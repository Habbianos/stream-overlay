function u(t){return Object.fromEntries(Array.from(t.keys(),e=>e.endsWith("[]")?[e.slice(0,-2),t.getAll(e)]:[e,t.get(e)]))}function d(){const t=document.querySelector("form");t.addEventListener("submit",e=>{e.preventDefault()}),t.addEventListener("change",l),c(),l()}d();function l(t){if(t?.target?.id==="url"){t.target.value;return}const e=document.querySelector("form"),n=new FormData(e);n.delete("url"),f(n);const o=new URLSearchParams(n).toString(),r=window.location.origin+window.overlayURL+"?"+o;e.url.value=r,e.querySelector("iframe").src=r}function f(t){if(c.loading||!window.overlayURL)return;const e=u(t);localStorage.setItem("_cache_"+window.overlayURL,JSON.stringify(e))}function c(){if(c.loading||(c.loading=!0,!window.overlayURL))return;const t=localStorage.getItem("_cache_"+window.overlayURL);if(!t)return;const e=JSON.parse(t),n=document.querySelector("form");for(const o in e)if(Array.isArray(e[o]))for(const[r,i]of e[o].entries()){const a=Array.from(n.querySelectorAll(`[name="${o}[]"]`)).filter(s=>!s.disabled)[r];switch(a.type){case"text":a.value=i;break;case"checkbox":a.checked=i==="on";break}switch(a.tagName){case"SELECT":a.value=i}a.dispatchEvent(new Event("change"))}else{const r=n.querySelector(`[name=${o}]`);if(!r)return;switch(r.type){case"text":r.value=e[o];break;case"checkbox":r.checked=e[o]==="on";break}}c.loading=!1}c.loading=!1;
