function Vm(r=!1){const t=window.location.search.substring(1),e={},i=t.split("&");for(let n=0;n<i.length;n++){const o=i[n].split("="),s=e[decodeURIComponent(o[0])],a=decodeURIComponent((o[1]||"").replace(/\+/g," ")),l=Number.isNaN(+a)?a:+a;e[decodeURIComponent(o[0])]=r?typeof s>"u"?l:[...Array.isArray(s)?s:[s],l]:l}return e}var k=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Br(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Hh(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var n=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(e,i,n.get?n:{enumerable:!0,get:function(){return r[i]}})}),e}var Dp={exports:{}};const Jm={},Qm=Object.freeze(Object.defineProperty({__proto__:null,default:Jm},Symbol.toStringTag,{value:"Module"})),rs=Hh(Qm);var Lp={exports:{}};const $m=/^\u0001ACTION ([^\u0001]+)\u0001$/,Km=/^(justinfan)(\d+$)/,qm=/\\([sn:r\\])/g,ty=/([ \n;\r\\])/g,af={s:" ",n:"",":":";",r:""},uf={" ":"s","\n":"n",";":":","\r":"r"},ey=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i"),iy=/[|\\^$*+?:#]/,Io=Lp.exports={get:(r,t)=>typeof r>"u"?t:r,hasOwn:(r,t)=>({}).hasOwnProperty.call(r,t),promiseDelay:r=>new Promise(t=>setTimeout(t,r)),isFinite:r=>isFinite(r)&&!isNaN(parseFloat(r)),toNumber(r,t){if(r===null)return 0;const e=Math.pow(10,Io.isFinite(t)?t:0);return Math.round(r*e)/e},isInteger:r=>!isNaN(Io.toNumber(r,0)),isRegex:r=>iy.test(r),isURL:r=>ey.test(r),justinfan:()=>`justinfan${Math.floor(Math.random()*8e4+1e3)}`,isJustinfan:r=>Km.test(r),channel(r){const t=(r||"").toLowerCase();return t[0]==="#"?t:"#"+t},username(r){const t=(r||"").toLowerCase();return t[0]==="#"?t.slice(1):t},token:r=>r?r.toLowerCase().replace("oauth:",""):"",password(r){const t=Io.token(r);return t?`oauth:${t}`:""},actionMessage:r=>r.match($m),replaceAll(r,t){if(r===null||typeof r>"u")return null;for(const e in t)r=r.replace(new RegExp(e,"g"),t[e]);return r},unescapeHtml:r=>r.replace(/\\&amp\\;/g,"&").replace(/\\&lt\\;/g,"<").replace(/\\&gt\\;/g,">").replace(/\\&quot\\;/g,'"').replace(/\\&#039\\;/g,"'"),unescapeIRC(r){return!r||typeof r!="string"||!r.includes("\\")?r:r.replace(qm,(t,e)=>e in af?af[e]:e)},escapeIRC(r){return!r||typeof r!="string"?r:r.replace(ty,(t,e)=>e in uf?`\\${uf[e]}`:e)},addWord:(r,t)=>r.length?r+" "+t:r+t,splitLine(r,t){let e=r.substring(0,t).lastIndexOf(" ");return e===-1&&(e=t-1),[r.substring(0,e),r.substring(e+1)]},extractNumber(r){const t=r.split(" ");for(let e=0;e<t.length;e++)if(Io.isInteger(t[e]))return~~t[e];return 0},formatDate(r){let t=r.getHours(),e=r.getMinutes();return t=(t<10?"0":"")+t,e=(e<10?"0":"")+e,`${t}:${e}`},inherits(r,t){r.super_=t;const e=function(){};e.prototype=t.prototype,r.prototype=new e,r.prototype.constructor=r},isNode(){try{return typeof process=="object"&&Object.prototype.toString.call(process)==="[object process]"}catch{}return!1}};var Tn=Lp.exports;const ry=rs,lf=Tn;var ny=function(t,e){let i=t.url!==void 0?t.url:t.uri;if(lf.isURL(i)||(i=`https://api.twitch.tv/kraken${i[0]==="/"?i:`/${i}`}`),lf.isNode()){const n=Object.assign({method:"GET",json:!0},t);if(n.qs){const l=new URLSearchParams(n.qs);i+=`?${l}`}const o={};"fetchAgent"in this.opts.connection&&(o.agent=this.opts.connection.fetchAgent);const s=ry(i,{...o,method:n.method,headers:n.headers,body:n.body});let a={};s.then(l=>(a={statusCode:l.status,headers:l.headers},n.json?l.json():l.text())).then(l=>e(null,a,l),l=>e(l,a,null))}else{const n=Object.assign({method:"GET",headers:{}},t,{url:i}),o=new XMLHttpRequest;o.open(n.method,n.url,!0);for(const s in n.headers)o.setRequestHeader(s,n.headers[s]);o.responseType="json",o.addEventListener("load",s=>{o.readyState===4&&(o.status!==200?e(o.status,null,null):e(null,null,o.response))}),o.send()}};const pt=Tn;function hf(r,t){return r=pt.channel(r),t=pt.get(t,30),this._sendCommand(null,r,`/followers ${t}`,(e,i)=>{this.once("_promiseFollowers",n=>{n?i(n):e([r,~~t])})})}function cf(r){return r=pt.channel(r),this._sendCommand(null,r,"/followersoff",(t,e)=>{this.once("_promiseFollowersoff",i=>{i?e(i):t([r])})})}function ff(r){return r=pt.channel(r),this._sendCommand(null,null,`PART ${r}`,(t,e)=>{this.once("_promisePart",i=>{i?e(i):t([r])})})}function df(r){return r=pt.channel(r),this._sendCommand(null,r,"/r9kbeta",(t,e)=>{this.once("_promiseR9kbeta",i=>{i?e(i):t([r])})})}function gf(r){return r=pt.channel(r),this._sendCommand(null,r,"/r9kbetaoff",(t,e)=>{this.once("_promiseR9kbetaoff",i=>{i?e(i):t([r])})})}function pf(r,t){return r=pt.channel(r),t=pt.get(t,300),this._sendCommand(null,r,`/slow ${t}`,(e,i)=>{this.once("_promiseSlow",n=>{n?i(n):e([r,~~t])})})}function If(r){return r=pt.channel(r),this._sendCommand(null,r,"/slowoff",(t,e)=>{this.once("_promiseSlowoff",i=>{i?e(i):t([r])})})}var oy={action(r,t){return r=pt.channel(r),t=`ACTION ${t}`,this._sendMessage(this._getPromiseDelay(),r,t,(e,i)=>{e([r,t])})},ban(r,t,e){return r=pt.channel(r),t=pt.username(t),e=pt.get(e,""),this._sendCommand(null,r,`/ban ${t} ${e}`,(i,n)=>{this.once("_promiseBan",o=>{o?n(o):i([r,t,e])})})},clear(r){return r=pt.channel(r),this._sendCommand(null,r,"/clear",(t,e)=>{this.once("_promiseClear",i=>{i?e(i):t([r])})})},color(r,t){return t=pt.get(t,r),this._sendCommand(null,"#tmijs",`/color ${t}`,(e,i)=>{this.once("_promiseColor",n=>{n?i(n):e([t])})})},commercial(r,t){return r=pt.channel(r),t=pt.get(t,30),this._sendCommand(null,r,`/commercial ${t}`,(e,i)=>{this.once("_promiseCommercial",n=>{n?i(n):e([r,~~t])})})},deletemessage(r,t){return r=pt.channel(r),this._sendCommand(null,r,`/delete ${t}`,(e,i)=>{this.once("_promiseDeletemessage",n=>{n?i(n):e([r])})})},emoteonly(r){return r=pt.channel(r),this._sendCommand(null,r,"/emoteonly",(t,e)=>{this.once("_promiseEmoteonly",i=>{i?e(i):t([r])})})},emoteonlyoff(r){return r=pt.channel(r),this._sendCommand(null,r,"/emoteonlyoff",(t,e)=>{this.once("_promiseEmoteonlyoff",i=>{i?e(i):t([r])})})},followersonly:hf,followersmode:hf,followersonlyoff:cf,followersmodeoff:cf,host(r,t){return r=pt.channel(r),t=pt.username(t),this._sendCommand(2e3,r,`/host ${t}`,(e,i)=>{this.once("_promiseHost",(n,o)=>{n?i(n):e([r,t,~~o])})})},join(r){return r=pt.channel(r),this._sendCommand(void 0,null,`JOIN ${r}`,(t,e)=>{const i="_promiseJoin";let n=!1;const o=(a,l)=>{r===pt.channel(l)&&(this.removeListener(i,o),n=!0,a?e(a):t([r]))};this.on(i,o);const s=this._getPromiseDelay();pt.promiseDelay(s).then(()=>{n||this.emit(i,"No response from Twitch.",r)})})},mod(r,t){return r=pt.channel(r),t=pt.username(t),this._sendCommand(null,r,`/mod ${t}`,(e,i)=>{this.once("_promiseMod",n=>{n?i(n):e([r,t])})})},mods(r){return r=pt.channel(r),this._sendCommand(null,r,"/mods",(t,e)=>{this.once("_promiseMods",(i,n)=>{i?e(i):(n.forEach(o=>{this.moderators[r]||(this.moderators[r]=[]),this.moderators[r].includes(o)||this.moderators[r].push(o)}),t(n))})})},part:ff,leave:ff,ping(){return this._sendCommand(null,null,"PING",(r,t)=>{this.latency=new Date,this.pingTimeout=setTimeout(()=>{this.ws!==null&&(this.wasCloseCalled=!1,this.log.error("Ping timeout."),this.ws.close(),clearInterval(this.pingLoop),clearTimeout(this.pingTimeout))},pt.get(this.opts.connection.timeout,9999)),this.once("_promisePing",e=>r([parseFloat(e)]))})},r9kbeta:df,r9kmode:df,r9kbetaoff:gf,r9kmodeoff:gf,raw(r){return this._sendCommand(null,null,r,(t,e)=>{t([r])})},say(r,t){return r=pt.channel(r),t.startsWith(".")&&!t.startsWith("..")||t.startsWith("/")||t.startsWith("\\")?t.substr(1,3)==="me "?this.action(r,t.substr(4)):this._sendCommand(null,r,t,(e,i)=>{e([r,t])}):this._sendMessage(this._getPromiseDelay(),r,t,(e,i)=>{e([r,t])})},slow:pf,slowmode:pf,slowoff:If,slowmodeoff:If,subscribers(r){return r=pt.channel(r),this._sendCommand(null,r,"/subscribers",(t,e)=>{this.once("_promiseSubscribers",i=>{i?e(i):t([r])})})},subscribersoff(r){return r=pt.channel(r),this._sendCommand(null,r,"/subscribersoff",(t,e)=>{this.once("_promiseSubscribersoff",i=>{i?e(i):t([r])})})},timeout(r,t,e,i){return r=pt.channel(r),t=pt.username(t),e!==null&&!pt.isInteger(e)&&(i=e,e=300),e=pt.get(e,300),i=pt.get(i,""),this._sendCommand(null,r,`/timeout ${t} ${e} ${i}`,(n,o)=>{this.once("_promiseTimeout",s=>{s?o(s):n([r,t,~~e,i])})})},unban(r,t){return r=pt.channel(r),t=pt.username(t),this._sendCommand(null,r,`/unban ${t}`,(e,i)=>{this.once("_promiseUnban",n=>{n?i(n):e([r,t])})})},unhost(r){return r=pt.channel(r),this._sendCommand(2e3,r,"/unhost",(t,e)=>{this.once("_promiseUnhost",i=>{i?e(i):t([r])})})},unmod(r,t){return r=pt.channel(r),t=pt.username(t),this._sendCommand(null,r,`/unmod ${t}`,(e,i)=>{this.once("_promiseUnmod",n=>{n?i(n):e([r,t])})})},unvip(r,t){return r=pt.channel(r),t=pt.username(t),this._sendCommand(null,r,`/unvip ${t}`,(e,i)=>{this.once("_promiseUnvip",n=>{n?i(n):e([r,t])})})},vip(r,t){return r=pt.channel(r),t=pt.username(t),this._sendCommand(null,r,`/vip ${t}`,(e,i)=>{this.once("_promiseVip",n=>{n?i(n):e([r,t])})})},vips(r){return r=pt.channel(r),this._sendCommand(null,r,"/vips",(t,e)=>{this.once("_promiseVips",(i,n)=>{i?e(i):t(n)})})},whisper(r,t){return r=pt.username(r),r===this.getUsername()?Promise.reject("Cannot send a whisper to the same account."):this._sendCommand(null,"#tmijs",`/w ${r} ${t}`,(e,i)=>{this.once("_promiseWhisper",n=>{n&&i(n)})}).catch(e=>{if(e&&typeof e=="string"&&e.indexOf("No response from Twitch.")!==0)throw e;const i=pt.channel(r),n=Object.assign({"message-type":"whisper","message-id":null,"thread-id":null,username:this.getUsername()},this.globaluserstate);return this.emits(["whisper","message"],[[i,n,t,!0],[i,n,t,!0]]),[r,t]})}};function $t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var sy=$t;$t.EventEmitter=$t;$t.prototype._events=void 0;$t.prototype._maxListeners=void 0;$t.defaultMaxListeners=10;$t.prototype.setMaxListeners=function(r){if(!ay(r)||r<0||isNaN(r))throw TypeError("n must be a positive number");return this._maxListeners=r,this};$t.prototype.emit=function(r){var t,e,i,n,o,s;if(this._events||(this._events={}),r==="error"&&(!this._events.error||pn(this._events.error)&&!this._events.error.length))throw t=arguments[1],t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');if(e=this._events[r],Bp(e))return!1;if(qe(e))switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:n=Array.prototype.slice.call(arguments,1),e.apply(this,n)}else if(pn(e))for(n=Array.prototype.slice.call(arguments,1),s=e.slice(),i=s.length,o=0;o<i;o++)s[o].apply(this,n);return!0};$t.prototype.addListener=function(r,t){var e;if(!qe(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",r,qe(t.listener)?t.listener:t),this._events[r]?pn(this._events[r])?this._events[r].push(t):this._events[r]=[this._events[r],t]:this._events[r]=t,pn(this._events[r])&&!this._events[r].warned&&(Bp(this._maxListeners)?e=$t.defaultMaxListeners:e=this._maxListeners,e&&e>0&&this._events[r].length>e&&(this._events[r].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[r].length),typeof console.trace=="function"&&console.trace())),this};$t.prototype.on=$t.prototype.addListener;$t.prototype.once=function(r,t){if(!qe(t))throw TypeError("listener must be a function");var e=!1;if(this._events.hasOwnProperty(r)&&r.charAt(0)==="_"){var i=1,n=r;for(var o in this._events)this._events.hasOwnProperty(o)&&o.startsWith(n)&&i++;r=r+i}function s(){r.charAt(0)==="_"&&!isNaN(r.substr(r.length-1))&&(r=r.substring(0,r.length-1)),this.removeListener(r,s),e||(e=!0,t.apply(this,arguments))}return s.listener=t,this.on(r,s),this};$t.prototype.removeListener=function(r,t){var e,i,n,o;if(!qe(t))throw TypeError("listener must be a function");if(!this._events||!this._events[r])return this;if(e=this._events[r],n=e.length,i=-1,e===t||qe(e.listener)&&e.listener===t){if(delete this._events[r],this._events.hasOwnProperty(r+"2")&&r.charAt(0)==="_"){var s=r;for(var a in this._events)this._events.hasOwnProperty(a)&&a.startsWith(s)&&(isNaN(parseInt(a.substr(a.length-1)))||(this._events[r+parseInt(a.substr(a.length-1)-1)]=this._events[a],delete this._events[a]));this._events[r]=this._events[r+"1"],delete this._events[r+"1"]}this._events.removeListener&&this.emit("removeListener",r,t)}else if(pn(e)){for(o=n;o-- >0;)if(e[o]===t||e[o].listener&&e[o].listener===t){i=o;break}if(i<0)return this;e.length===1?(e.length=0,delete this._events[r]):e.splice(i,1),this._events.removeListener&&this.emit("removeListener",r,t)}return this};$t.prototype.removeAllListeners=function(r){var t,e;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[r]&&delete this._events[r],this;if(arguments.length===0){for(t in this._events)t!=="removeListener"&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(e=this._events[r],qe(e))this.removeListener(r,e);else if(e)for(;e.length;)this.removeListener(r,e[e.length-1]);return delete this._events[r],this};$t.prototype.listeners=function(r){var t;return!this._events||!this._events[r]?t=[]:qe(this._events[r])?t=[this._events[r]]:t=this._events[r].slice(),t};$t.prototype.listenerCount=function(r){if(this._events){var t=this._events[r];if(qe(t))return 1;if(t)return t.length}return 0};$t.listenerCount=function(r,t){return r.listenerCount(t)};function qe(r){return typeof r=="function"}function ay(r){return typeof r=="number"}function pn(r){return typeof r=="object"&&r!==null}function Bp(r){return r===void 0}const uy=Tn;let Rp="info";const vf={trace:0,debug:1,info:2,warn:3,error:4,fatal:5};function er(r){return function(t){vf[r]>=vf[Rp]&&console.log(`[${uy.formatDate(new Date)}] ${r}: ${t}`)}}var ly={setLevel(r){Rp=r},trace:er("trace"),debug:er("debug"),info:er("info"),warn:er("warn"),error:er("error"),fatal:er("fatal")};const nu=Tn,ir=/\S+/g;function ou(r,t,e=",",i="/",n){const o=r[t];if(o===void 0)return r;const s=typeof o=="string";if(r[t+"-raw"]=s?o:null,o===!0)return r[t]=null,r;if(r[t]={},s){const a=o.split(e);for(let l=0;l<a.length;l++){const c=a[l].split(i);let d=c[1];n!==void 0&&d&&(d=d.split(n)),r[t][c[0]]=d||null}}return r}var hy={badges:r=>ou(r,"badges"),badgeInfo:r=>ou(r,"badge-info"),emotes:r=>ou(r,"emotes","/",":",","),emoteRegex(r,t,e,i){ir.lastIndex=0;const n=new RegExp("(\\b|^|\\s)"+nu.unescapeHtml(t)+"(\\b|$|\\s)");let o;for(;(o=ir.exec(r))!==null;)n.test(o[0])&&(i[e]=i[e]||[],i[e].push([o.index,ir.lastIndex-1]))},emoteString(r,t,e,i){ir.lastIndex=0;let n;for(;(n=ir.exec(r))!==null;)n[0]===nu.unescapeHtml(t)&&(i[e]=i[e]||[],i[e].push([n.index,ir.lastIndex-1]))},transformEmotes(r){let t="";return Object.keys(r).forEach(e=>{t=`${t+e}:`,r[e].forEach(i=>t=`${t+i.join("-")},`),t=`${t.slice(0,-1)}/`}),t.slice(0,-1)},formTags(r){const t=[];for(const e in r){const i=nu.escapeIRC(r[e]);t.push(`${e}=${i}`)}return`@${t.join(";")}`},msg(r){const t={raw:r,tags:{},prefix:null,command:null,params:[]};let e=0,i=0;if(r.charCodeAt(0)===64){if(i=r.indexOf(" "),i===-1)return null;const n=r.slice(1,i).split(";");for(let o=0;o<n.length;o++){const s=n[o],a=s.split("=");t.tags[a[0]]=s.substring(s.indexOf("=")+1)||!0}e=i+1}for(;r.charCodeAt(e)===32;)e++;if(r.charCodeAt(e)===58){if(i=r.indexOf(" ",e),i===-1)return null;for(t.prefix=r.slice(e+1,i),e=i+1;r.charCodeAt(e)===32;)e++}if(i=r.indexOf(" ",e),i===-1)return r.length>e?(t.command=r.slice(e),t):null;for(t.command=r.slice(e,i),e=i+1;r.charCodeAt(e)===32;)e++;for(;e<r.length;){if(i=r.indexOf(" ",e),r.charCodeAt(e)===58){t.params.push(r.slice(e+1));break}if(i!==-1){for(t.params.push(r.slice(e,i)),e=i+1;r.charCodeAt(e)===32;)e++;continue}if(i===-1){t.params.push(r.slice(e));break}}return t}};class cy{constructor(t){this.queue=[],this.index=0,this.defaultDelay=t===void 0?3e3:t}add(t,e){this.queue.push({fn:t,delay:e})}next(){const t=this.index++,e=this.queue[t];if(!e)return;const i=this.queue[this.index];if(e.fn(),i){const n=i.delay===void 0?this.defaultDelay:i.delay;setTimeout(()=>this.next(),n)}}}var fy=cy;(function(r){const t=typeof k<"u"?k:typeof window<"u"?window:{},e=t.WebSocket||rs,i=t.fetch||rs,n=ny,o=oy,s=sy.EventEmitter,a=ly,l=hy,c=fy,d=Tn;let g=!1;const u=function h(f){if(!(this instanceof h))return new h(f);this.opts=d.get(f,{}),this.opts.channels=this.opts.channels||[],this.opts.connection=this.opts.connection||{},this.opts.identity=this.opts.identity||{},this.opts.options=this.opts.options||{},this.clientId=d.get(this.opts.options.clientId,null),this._globalDefaultChannel=d.channel(d.get(this.opts.options.globalDefaultChannel,"#tmijs")),this._skipMembership=d.get(this.opts.options.skipMembership,!1),this._skipUpdatingEmotesets=d.get(this.opts.options.skipUpdatingEmotesets,!1),this._updateEmotesetsTimer=null,this._updateEmotesetsTimerDelay=d.get(this.opts.options.updateEmotesetsTimer,6e4),this.maxReconnectAttempts=d.get(this.opts.connection.maxReconnectAttempts,1/0),this.maxReconnectInterval=d.get(this.opts.connection.maxReconnectInterval,3e4),this.reconnect=d.get(this.opts.connection.reconnect,!0),this.reconnectDecay=d.get(this.opts.connection.reconnectDecay,1.5),this.reconnectInterval=d.get(this.opts.connection.reconnectInterval,1e3),this.reconnecting=!1,this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.secure=d.get(this.opts.connection.secure,!this.opts.connection.server&&!this.opts.connection.port),this.emotes="",this.emotesets={},this.channels=[],this.currentLatency=0,this.globaluserstate={},this.lastJoined="",this.latency=new Date,this.moderators={},this.pingLoop=null,this.pingTimeout=null,this.reason="",this.username="",this.userstate={},this.wasCloseCalled=!1,this.ws=null;let I="error";this.opts.options.debug&&(I="info"),this.log=this.opts.logger||a;try{a.setLevel(I)}catch{}this.opts.channels.forEach((m,y,v)=>v[y]=d.channel(m)),s.call(this),this.setMaxListeners(0)};d.inherits(u,s);for(const h in o)u.prototype[h]=o[h];u.prototype.emits=function(f,I){for(let m=0;m<f.length;m++){const y=m<I.length?I[m]:I[I.length-1];this.emit.apply(this,[f[m]].concat(y))}},u.prototype.api=function(...h){g||(this.log.warn("Client.prototype.api is deprecated and will be removed for version 2.0.0"),g=!0),n(...h)},u.prototype.handleMessage=function(f){if(!f)return;this.listenerCount("raw_message")&&this.emit("raw_message",JSON.parse(JSON.stringify(f)),f);const I=d.channel(d.get(f.params[0],null));let m=d.get(f.params[1],null);const y=d.get(f.tags["msg-id"],null),v=f.tags=l.badges(l.badgeInfo(l.emotes(f.tags)));for(const p in v){if(p==="emote-sets"||p==="ban-duration"||p==="bits")continue;let _=v[p];typeof _=="boolean"?_=null:_==="1"?_=!0:_==="0"?_=!1:typeof _=="string"&&(_=d.unescapeIRC(_)),v[p]=_}if(f.prefix===null)switch(f.command){case"PING":this.emit("ping"),this._isConnected()&&this.ws.send("PONG");break;case"PONG":{const p=new Date;this.currentLatency=(p.getTime()-this.latency.getTime())/1e3,this.emits(["pong","_promisePing"],[[this.currentLatency]]),clearTimeout(this.pingTimeout);break}default:this.log.warn(`Could not parse message with no prefix:
${JSON.stringify(f,null,4)}`);break}else if(f.prefix==="tmi.twitch.tv")switch(f.command){case"002":case"003":case"004":case"372":case"375":case"CAP":break;case"001":this.username=f.params[0];break;case"376":{this.log.info("Connected to server."),this.userstate[this._globalDefaultChannel]={},this.emits(["connected","_promiseConnect"],[[this.server,this.port],[null]]),this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.pingLoop=setInterval(()=>{this._isConnected()&&this.ws.send("PING"),this.latency=new Date,this.pingTimeout=setTimeout(()=>{this.ws!==null&&(this.wasCloseCalled=!1,this.log.error("Ping timeout."),this.ws.close(),clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer))},d.get(this.opts.connection.timeout,9999))},6e4);let p=d.get(this.opts.options.joinInterval,2e3);p<300&&(p=300);const _=new c(p),A=[...new Set([...this.opts.channels,...this.channels])];this.channels=[];for(let b=0;b<A.length;b++){const P=A[b];_.add(()=>{this._isConnected()&&this.join(P).catch(E=>this.log.error(E))})}_.next();break}case"NOTICE":{const p=[null],_=[I,y,m],A=[y],b=[I,!0],P=[I,!1],E=[_,p],C=[_,A],x=`[${I}] ${m}`;switch(y){case"subs_on":this.log.info(`[${I}] This room is now in subscribers-only mode.`),this.emits(["subscriber","subscribers","_promiseSubscribers"],[b,b,p]);break;case"subs_off":this.log.info(`[${I}] This room is no longer in subscribers-only mode.`),this.emits(["subscriber","subscribers","_promiseSubscribersoff"],[P,P,p]);break;case"emote_only_on":this.log.info(`[${I}] This room is now in emote-only mode.`),this.emits(["emoteonly","_promiseEmoteonly"],[b,p]);break;case"emote_only_off":this.log.info(`[${I}] This room is no longer in emote-only mode.`),this.emits(["emoteonly","_promiseEmoteonlyoff"],[P,p]);break;case"slow_on":case"slow_off":break;case"followers_on_zero":case"followers_on":case"followers_off":break;case"r9k_on":this.log.info(`[${I}] This room is now in r9k mode.`),this.emits(["r9kmode","r9kbeta","_promiseR9kbeta"],[b,b,p]);break;case"r9k_off":this.log.info(`[${I}] This room is no longer in r9k mode.`),this.emits(["r9kmode","r9kbeta","_promiseR9kbetaoff"],[P,P,p]);break;case"room_mods":{const F=m.split(": "),R=(F.length>1?F[1]:"").toLowerCase().split(", ").filter(Z=>Z);this.emits(["_promiseMods","mods"],[[null,R],[I,R]]);break}case"no_mods":this.emits(["_promiseMods","mods"],[[null,[]],[I,[]]]);break;case"vips_success":{m.endsWith(".")&&(m=m.slice(0,-1));const F=m.split(": "),R=(F.length>1?F[1]:"").toLowerCase().split(", ").filter(Z=>Z);this.emits(["_promiseVips","vips"],[[null,R],[I,R]]);break}case"no_vips":this.emits(["_promiseVips","vips"],[[null,[]],[I,[]]]);break;case"already_banned":case"bad_ban_admin":case"bad_ban_anon":case"bad_ban_broadcaster":case"bad_ban_global_mod":case"bad_ban_mod":case"bad_ban_self":case"bad_ban_staff":case"usage_ban":this.log.info(x),this.emits(["notice","_promiseBan"],C);break;case"ban_success":this.log.info(x),this.emits(["notice","_promiseBan"],E);break;case"usage_clear":this.log.info(x),this.emits(["notice","_promiseClear"],C);break;case"usage_mods":this.log.info(x),this.emits(["notice","_promiseMods"],[_,[y,[]]]);break;case"mod_success":this.log.info(x),this.emits(["notice","_promiseMod"],E);break;case"usage_vips":this.log.info(x),this.emits(["notice","_promiseVips"],[_,[y,[]]]);break;case"usage_vip":case"bad_vip_grantee_banned":case"bad_vip_grantee_already_vip":case"bad_vip_max_vips_reached":case"bad_vip_achievement_incomplete":this.log.info(x),this.emits(["notice","_promiseVip"],[_,[y,[]]]);break;case"vip_success":this.log.info(x),this.emits(["notice","_promiseVip"],E);break;case"usage_mod":case"bad_mod_banned":case"bad_mod_mod":this.log.info(x),this.emits(["notice","_promiseMod"],C);break;case"unmod_success":this.log.info(x),this.emits(["notice","_promiseUnmod"],E);break;case"unvip_success":this.log.info(x),this.emits(["notice","_promiseUnvip"],E);break;case"usage_unmod":case"bad_unmod_mod":this.log.info(x),this.emits(["notice","_promiseUnmod"],C);break;case"usage_unvip":case"bad_unvip_grantee_not_vip":this.log.info(x),this.emits(["notice","_promiseUnvip"],C);break;case"color_changed":this.log.info(x),this.emits(["notice","_promiseColor"],E);break;case"usage_color":case"turbo_only_color":this.log.info(x),this.emits(["notice","_promiseColor"],C);break;case"commercial_success":this.log.info(x),this.emits(["notice","_promiseCommercial"],E);break;case"usage_commercial":case"bad_commercial_error":this.log.info(x),this.emits(["notice","_promiseCommercial"],C);break;case"hosts_remaining":{this.log.info(x);const F=isNaN(m[0])?0:parseInt(m[0]);this.emits(["notice","_promiseHost"],[_,[null,~~F]]);break}case"bad_host_hosting":case"bad_host_rate_exceeded":case"bad_host_error":case"usage_host":this.log.info(x),this.emits(["notice","_promiseHost"],[_,[y,null]]);break;case"already_r9k_on":case"usage_r9k_on":this.log.info(x),this.emits(["notice","_promiseR9kbeta"],C);break;case"already_r9k_off":case"usage_r9k_off":this.log.info(x),this.emits(["notice","_promiseR9kbetaoff"],C);break;case"timeout_success":this.log.info(x),this.emits(["notice","_promiseTimeout"],E);break;case"delete_message_success":this.log.info(`[${I} ${m}]`),this.emits(["notice","_promiseDeletemessage"],E);break;case"already_subs_off":case"usage_subs_off":this.log.info(x),this.emits(["notice","_promiseSubscribersoff"],C);break;case"already_subs_on":case"usage_subs_on":this.log.info(x),this.emits(["notice","_promiseSubscribers"],C);break;case"already_emote_only_off":case"usage_emote_only_off":this.log.info(x),this.emits(["notice","_promiseEmoteonlyoff"],C);break;case"already_emote_only_on":case"usage_emote_only_on":this.log.info(x),this.emits(["notice","_promiseEmoteonly"],C);break;case"usage_slow_on":this.log.info(x),this.emits(["notice","_promiseSlow"],C);break;case"usage_slow_off":this.log.info(x),this.emits(["notice","_promiseSlowoff"],C);break;case"usage_timeout":case"bad_timeout_admin":case"bad_timeout_anon":case"bad_timeout_broadcaster":case"bad_timeout_duration":case"bad_timeout_global_mod":case"bad_timeout_mod":case"bad_timeout_self":case"bad_timeout_staff":this.log.info(x),this.emits(["notice","_promiseTimeout"],C);break;case"untimeout_success":case"unban_success":this.log.info(x),this.emits(["notice","_promiseUnban"],E);break;case"usage_unban":case"bad_unban_no_ban":this.log.info(x),this.emits(["notice","_promiseUnban"],C);break;case"usage_delete":case"bad_delete_message_error":case"bad_delete_message_broadcaster":case"bad_delete_message_mod":this.log.info(x),this.emits(["notice","_promiseDeletemessage"],C);break;case"usage_unhost":case"not_hosting":this.log.info(x),this.emits(["notice","_promiseUnhost"],C);break;case"whisper_invalid_login":case"whisper_invalid_self":case"whisper_limit_per_min":case"whisper_limit_per_sec":case"whisper_restricted":case"whisper_restricted_recipient":this.log.info(x),this.emits(["notice","_promiseWhisper"],C);break;case"no_permission":case"msg_banned":case"msg_room_not_found":case"msg_channel_suspended":case"tos_ban":case"invalid_user":this.log.info(x),this.emits(["notice","_promiseBan","_promiseClear","_promiseUnban","_promiseTimeout","_promiseDeletemessage","_promiseMods","_promiseMod","_promiseUnmod","_promiseVips","_promiseVip","_promiseUnvip","_promiseCommercial","_promiseHost","_promiseUnhost","_promiseJoin","_promisePart","_promiseR9kbeta","_promiseR9kbetaoff","_promiseSlow","_promiseSlowoff","_promiseFollowers","_promiseFollowersoff","_promiseSubscribers","_promiseSubscribersoff","_promiseEmoteonly","_promiseEmoteonlyoff","_promiseWhisper"],[_,[y,I]]);break;case"msg_rejected":case"msg_rejected_mandatory":this.log.info(x),this.emit("automod",I,y,m);break;case"unrecognized_cmd":this.log.info(x),this.emit("notice",I,y,m);break;case"cmds_available":case"host_target_went_offline":case"msg_censored_broadcaster":case"msg_duplicate":case"msg_emoteonly":case"msg_verified_email":case"msg_ratelimit":case"msg_subsonly":case"msg_timedout":case"msg_bad_characters":case"msg_channel_blocked":case"msg_facebook":case"msg_followersonly":case"msg_followersonly_followed":case"msg_followersonly_zero":case"msg_slowmode":case"msg_suspended":case"no_help":case"usage_disconnect":case"usage_help":case"usage_me":case"unavailable_command":this.log.info(x),this.emit("notice",I,y,m);break;case"host_on":case"host_off":break;default:m.includes("Login unsuccessful")||m.includes("Login authentication failed")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason=m,this.log.error(this.reason),this.ws.close()):m.includes("Error logging in")||m.includes("Improperly formatted auth")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason=m,this.log.error(this.reason),this.ws.close()):m.includes("Invalid NICK")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason="Invalid NICK.",this.log.error(this.reason),this.ws.close()):(this.log.warn(`Could not parse NOTICE from tmi.twitch.tv:
${JSON.stringify(f,null,4)}`),this.emit("notice",I,y,m));break}break}case"USERNOTICE":{const p=v["display-name"]||v.login,_=v["msg-param-sub-plan"]||"",A=d.unescapeIRC(d.get(v["msg-param-sub-plan-name"],""))||null,P={prime:_.includes("Prime"),plan:_,planName:A},E=~~(v["msg-param-streak-months"]||0),C=v["msg-param-recipient-display-name"]||v["msg-param-recipient-user-name"],x=~~v["msg-param-mass-gift-count"];switch(v["message-type"]=y,y){case"resub":this.emits(["resub","subanniversary"],[[I,p,E,m,v,P]]);break;case"sub":this.emits(["subscription","sub"],[[I,p,P,m,v]]);break;case"subgift":this.emit("subgift",I,p,E,C,P,v);break;case"anonsubgift":this.emit("anonsubgift",I,E,C,P,v);break;case"submysterygift":this.emit("submysterygift",I,p,x,P,v);break;case"anonsubmysterygift":this.emit("anonsubmysterygift",I,x,P,v);break;case"primepaidupgrade":this.emit("primepaidupgrade",I,p,P,v);break;case"giftpaidupgrade":{const F=v["msg-param-sender-name"]||v["msg-param-sender-login"];this.emit("giftpaidupgrade",I,p,F,v);break}case"anongiftpaidupgrade":this.emit("anongiftpaidupgrade",I,p,v);break;case"raid":{const F=v["msg-param-displayName"]||v["msg-param-login"],R=+v["msg-param-viewerCount"];this.emit("raided",I,F,R,v);break}case"ritual":{const F=v["msg-param-ritual-name"];switch(F){case"new_chatter":this.emit("newchatter",I,p,v,m);break;default:this.emit("ritual",F,I,p,v,m);break}break}default:this.emit("usernotice",y,I,v,m);break}break}case"HOSTTARGET":{const p=m.split(" "),_=~~p[1]||0;p[0]==="-"?(this.log.info(`[${I}] Exited host mode.`),this.emits(["unhost","_promiseUnhost"],[[I,_],[null]])):(this.log.info(`[${I}] Now hosting ${p[0]} for ${_} viewer(s).`),this.emit("hosting",I,p[0],_));break}case"CLEARCHAT":if(f.params.length>1){const p=d.get(f.tags["ban-duration"],null);p===null?(this.log.info(`[${I}] ${m} has been banned.`),this.emit("ban",I,m,null,f.tags)):(this.log.info(`[${I}] ${m} has been timed out for ${p} seconds.`),this.emit("timeout",I,m,null,~~p,f.tags))}else this.log.info(`[${I}] Chat was cleared by a moderator.`),this.emits(["clearchat","_promiseClear"],[[I],[null]]);break;case"CLEARMSG":if(f.params.length>1){const p=m,_=v.login;v["message-type"]="messagedeleted",this.log.info(`[${I}] ${_}'s message has been deleted.`),this.emit("messagedeleted",I,_,p,v)}break;case"RECONNECT":this.log.info("Received RECONNECT request from Twitch.."),this.log.info(`Disconnecting and reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.disconnect().catch(p=>this.log.error(p)),setTimeout(()=>this.connect().catch(p=>this.log.error(p)),this.reconnectTimer);break;case"USERSTATE":f.tags.username=this.username,f.tags["user-type"]==="mod"&&(this.moderators[I]||(this.moderators[I]=[]),this.moderators[I].includes(this.username)||this.moderators[I].push(this.username)),!d.isJustinfan(this.getUsername())&&!this.userstate[I]&&(this.userstate[I]=v,this.lastJoined=I,this.channels.push(I),this.log.info(`Joined ${I}`),this.emit("join",I,d.username(this.getUsername()),!0)),f.tags["emote-sets"]!==this.emotes&&this._updateEmoteset(f.tags["emote-sets"]),this.userstate[I]=v;break;case"GLOBALUSERSTATE":this.globaluserstate=v,this.emit("globaluserstate",v),typeof f.tags["emote-sets"]<"u"&&this._updateEmoteset(f.tags["emote-sets"]);break;case"ROOMSTATE":if(d.channel(this.lastJoined)===I&&this.emit("_promiseJoin",null,I),f.tags.channel=I,this.emit("roomstate",I,f.tags),!d.hasOwn(f.tags,"subs-only")){if(d.hasOwn(f.tags,"slow"))if(typeof f.tags.slow=="boolean"&&!f.tags.slow){const p=[I,!1,0];this.log.info(`[${I}] This room is no longer in slow mode.`),this.emits(["slow","slowmode","_promiseSlowoff"],[p,p,[null]])}else{const p=~~f.tags.slow,_=[I,!0,p];this.log.info(`[${I}] This room is now in slow mode.`),this.emits(["slow","slowmode","_promiseSlow"],[_,_,[null]])}if(d.hasOwn(f.tags,"followers-only"))if(f.tags["followers-only"]==="-1"){const p=[I,!1,0];this.log.info(`[${I}] This room is no longer in followers-only mode.`),this.emits(["followersonly","followersmode","_promiseFollowersoff"],[p,p,[null]])}else{const p=~~f.tags["followers-only"],_=[I,!0,p];this.log.info(`[${I}] This room is now in follower-only mode.`),this.emits(["followersonly","followersmode","_promiseFollowers"],[_,_,[null]])}}break;case"SERVERCHANGE":break;default:this.log.warn(`Could not parse message from tmi.twitch.tv:
${JSON.stringify(f,null,4)}`);break}else if(f.prefix==="jtv")switch(f.command){case"MODE":m==="+o"?(this.moderators[I]||(this.moderators[I]=[]),this.moderators[I].includes(f.params[2])||this.moderators[I].push(f.params[2]),this.emit("mod",I,f.params[2])):m==="-o"&&(this.moderators[I]||(this.moderators[I]=[]),this.moderators[I].filter(p=>p!==f.params[2]),this.emit("unmod",I,f.params[2]));break;default:this.log.warn(`Could not parse message from jtv:
${JSON.stringify(f,null,4)}`);break}else switch(f.command){case"353":this.emit("names",f.params[2],f.params[3].split(" "));break;case"366":break;case"JOIN":{const p=f.prefix.split("!")[0];d.isJustinfan(this.getUsername())&&this.username===p&&(this.lastJoined=I,this.channels.push(I),this.log.info(`Joined ${I}`),this.emit("join",I,p,!0)),this.username!==p&&this.emit("join",I,p,!1);break}case"PART":{let p=!1;const _=f.prefix.split("!")[0];if(this.username===_){p=!0,this.userstate[I]&&delete this.userstate[I];let A=this.channels.indexOf(I);A!==-1&&this.channels.splice(A,1),A=this.opts.channels.indexOf(I),A!==-1&&this.opts.channels.splice(A,1),this.log.info(`Left ${I}`),this.emit("_promisePart",null)}this.emit("part",I,_,p);break}case"WHISPER":{const p=f.prefix.split("!")[0];this.log.info(`[WHISPER] <${p}>: ${m}`),d.hasOwn(f.tags,"username")||(f.tags.username=p),f.tags["message-type"]="whisper";const _=d.channel(f.tags.username);this.emits(["whisper","message"],[[_,f.tags,m,!1]]);break}case"PRIVMSG":if(f.tags.username=f.prefix.split("!")[0],f.tags.username==="jtv"){const p=d.username(m.split(" ")[0]),_=m.includes("auto");if(m.includes("hosting you for")){const A=d.extractNumber(m);this.emit("hosted",I,p,A,_)}else m.includes("hosting you")&&this.emit("hosted",I,p,0,_)}else{const p=d.get(this.opts.options.messagesLogLevel,"info"),_=d.actionMessage(m);if(f.tags["message-type"]=_?"action":"chat",m=_?_[1]:m,d.hasOwn(f.tags,"bits"))this.emit("cheer",I,f.tags,m);else{if(d.hasOwn(f.tags,"msg-id")){if(f.tags["msg-id"]==="highlighted-message"){const A=f.tags["msg-id"];this.emit("redeem",I,f.tags.username,A,f.tags,m)}else if(f.tags["msg-id"]==="skip-subs-mode-message"){const A=f.tags["msg-id"];this.emit("redeem",I,f.tags.username,A,f.tags,m)}}else if(d.hasOwn(f.tags,"custom-reward-id")){const A=f.tags["custom-reward-id"];this.emit("redeem",I,f.tags.username,A,f.tags,m)}_?(this.log[p](`[${I}] *<${f.tags.username}>: ${m}`),this.emits(["action","message"],[[I,f.tags,m,!1]])):(this.log[p](`[${I}] <${f.tags.username}>: ${m}`),this.emits(["chat","message"],[[I,f.tags,m,!1]]))}}break;default:this.log.warn(`Could not parse message:
${JSON.stringify(f,null,4)}`);break}},u.prototype.connect=function(){return new Promise((f,I)=>{this.server=d.get(this.opts.connection.server,"irc-ws.chat.twitch.tv"),this.port=d.get(this.opts.connection.port,80),this.secure&&(this.port=443),this.port===443&&(this.secure=!0),this.reconnectTimer=this.reconnectTimer*this.reconnectDecay,this.reconnectTimer>=this.maxReconnectInterval&&(this.reconnectTimer=this.maxReconnectInterval),this._openConnection(),this.once("_promiseConnect",m=>{m?I(m):f([this.server,~~this.port])})})},u.prototype._openConnection=function(){const f=`${this.secure?"wss":"ws"}://${this.server}:${this.port}/`,I={};"agent"in this.opts.connection&&(I.agent=this.opts.connection.agent),this.ws=new e(f,"irc",I),this.ws.onmessage=this._onMessage.bind(this),this.ws.onerror=this._onError.bind(this),this.ws.onclose=this._onClose.bind(this),this.ws.onopen=this._onOpen.bind(this)},u.prototype._onOpen=function(){this._isConnected()&&(this.log.info(`Connecting to ${this.server} on port ${this.port}..`),this.emit("connecting",this.server,~~this.port),this.username=d.get(this.opts.identity.username,d.justinfan()),this._getToken().then(f=>{const I=d.password(f);this.log.info("Sending authentication to server.."),this.emit("logon");let m="twitch.tv/tags twitch.tv/commands";this._skipMembership||(m+=" twitch.tv/membership"),this.ws.send("CAP REQ :"+m),I?this.ws.send(`PASS ${I}`):d.isJustinfan(this.username)&&this.ws.send("PASS SCHMOOPIIE"),this.ws.send(`NICK ${this.username}`)}).catch(f=>{this.emits(["_promiseConnect","disconnected"],[[f],["Could not get a token."]])}))},u.prototype._getToken=function(){const f=this.opts.identity.password;let I;return typeof f=="function"?(I=f(),I instanceof Promise?I:Promise.resolve(I)):Promise.resolve(f)},u.prototype._onMessage=function(f){f.data.trim().split(`\r
`).forEach(m=>{const y=l.msg(m);y&&this.handleMessage(y)})},u.prototype._onError=function(){this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer),this.reason=this.ws===null?"Connection closed.":"Unable to connect.",this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error(`Reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.emit("reconnect"),setTimeout(()=>{this.reconnecting=!1,this.connect().catch(f=>this.log.error(f))},this.reconnectTimer)),this.ws=null},u.prototype._onClose=function(){this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer),this.wasCloseCalled?(this.wasCloseCalled=!1,this.reason="Connection closed.",this.log.info(this.reason),this.emits(["_promiseConnect","_promiseDisconnect","disconnected"],[[this.reason],[null],[this.reason]])):(this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error(`Could not connect to server. Reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.emit("reconnect"),setTimeout(()=>{this.reconnecting=!1,this.connect().catch(f=>this.log.error(f))},this.reconnectTimer))),this.ws=null},u.prototype._getPromiseDelay=function(){return this.currentLatency<=600?600:this.currentLatency+100},u.prototype._sendCommand=function(f,I,m,y){return new Promise((v,p)=>{if(this._isConnected())(f===null||typeof f=="number")&&(f===null&&(f=this._getPromiseDelay()),d.promiseDelay(f).then(()=>p("No response from Twitch.")));else return p("Not connected to server.");if(I!==null){const _=d.channel(I);this.log.info(`[${_}] Executing command: ${m}`),this.ws.send(`PRIVMSG ${_} :${m}`)}else this.log.info(`Executing command: ${m}`),this.ws.send(m);typeof y=="function"?y(v,p):v()})},u.prototype._sendMessage=function(f,I,m,y){return new Promise((v,p)=>{if(this._isConnected()){if(d.isJustinfan(this.getUsername()))return p("Cannot send anonymous messages.")}else return p("Not connected to server.");const _=d.channel(I);if(this.userstate[_]||(this.userstate[_]={}),m.length>=500){const C=d.splitLine(m,500);m=C[0],setTimeout(()=>{this._sendMessage(f,I,C[1],()=>{})},350)}this.ws.send(`PRIVMSG ${_} :${m}`);const A={};Object.keys(this.emotesets).forEach(C=>this.emotesets[C].forEach(x=>(d.isRegex(x.code)?l.emoteRegex:l.emoteString)(m,x.code,x.id,A)));const b=Object.assign(this.userstate[_],l.emotes({emotes:l.transformEmotes(A)||null})),P=d.get(this.opts.options.messagesLogLevel,"info"),E=d.actionMessage(m);E?(b["message-type"]="action",this.log[P](`[${_}] *<${this.getUsername()}>: ${E[1]}`),this.emits(["action","message"],[[_,b,E[1],!0]])):(b["message-type"]="chat",this.log[P](`[${_}] <${this.getUsername()}>: ${m}`),this.emits(["chat","message"],[[_,b,m,!0]])),typeof y=="function"?y(v,p):v()})},u.prototype._updateEmoteset=function(f){let I=f!==void 0;if(I&&(f===this.emotes?I=!1:this.emotes=f),this._skipUpdatingEmotesets){I&&this.emit("emotesets",f,{});return}const m=()=>{this._updateEmotesetsTimerDelay>0&&(clearTimeout(this._updateEmotesetsTimer),this._updateEmotesetsTimer=setTimeout(()=>this._updateEmoteset(f),this._updateEmotesetsTimerDelay))};this._getToken().then(y=>{const v=`https://api.twitch.tv/kraken/chat/emoticon_images?emotesets=${f}`,p={};return"fetchAgent"in this.opts.connection&&(p.agent=this.opts.connection.fetchAgent),i(v,{...p,headers:{Accept:"application/vnd.twitchtv.v5+json",Authorization:`OAuth ${d.token(y)}`,"Client-ID":this.clientId}})}).then(y=>y.json()).then(y=>{this.emotesets=y.emoticon_sets||{},this.emit("emotesets",f,this.emotesets),m()}).catch(()=>m())},u.prototype.getUsername=function(){return this.username},u.prototype.getOptions=function(){return this.opts},u.prototype.getChannels=function(){return this.channels},u.prototype.isMod=function(f,I){const m=d.channel(f);return this.moderators[m]||(this.moderators[m]=[]),this.moderators[m].includes(d.username(I))},u.prototype.readyState=function(){return this.ws===null?"CLOSED":["CONNECTING","OPEN","CLOSING","CLOSED"][this.ws.readyState]},u.prototype._isConnected=function(){return this.ws!==null&&this.ws.readyState===1},u.prototype.disconnect=function(){return new Promise((f,I)=>{this.ws!==null&&this.ws.readyState!==3?(this.wasCloseCalled=!0,this.log.info("Disconnecting from server.."),this.ws.close(),this.once("_promiseDisconnect",()=>f([this.server,~~this.port]))):(this.log.error("Cannot disconnect from server. Socket is not opened or connection is already closing."),I("Cannot disconnect from server. Socket is not opened or connection is already closing."))})},u.prototype.off=u.prototype.removeListener,r.exports&&(r.exports=u),typeof window<"u"&&(window.tmi={client:u,Client:u})})(Dp);var dy=Dp.exports;const mf=dy;var gy={client:mf,Client:mf};const py=Br(gy);function Iy(r,t){const e=new py.Client({channels:[r.userName]});e.connect(),e.on("message",(i,n,o,s)=>{console.log(i,n),n.username&&t.onChatMessage(n.username,o)})}function vy(){let r="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let e=0;e<15;e++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}class hr{heartbeatHandle=0;socket=null;config={};static eventHandlers={};constructor(t){this.config=t}addHandler(t,e){return hr.eventHandlers[[t,this.config.broadcaster].join(".")]=e,this}removeHandler(t){return delete hr.eventHandlers[[t,this.config.broadcaster].join(".")],this}setupListener(){if(this.socket&&this.socket.readyState!=WebSocket.CLOSED)return;const t=new WebSocket("wss://pubsub-edge.twitch.tv");this.socket=t,t.onopen=e=>{console.info("PubSub WebSocket connected."),this.heartbeatHandle=setInterval(()=>{t.send(JSON.stringify({type:"PING"}))},6e4),t.send(JSON.stringify({type:"LISTEN",nonce:vy(),data:{topics:Object.keys(hr.eventHandlers)}}))},t.onclose=e=>{console.info("PubSub WebSocket closed."),clearInterval(this.heartbeatHandle),setTimeout(()=>(console.info("PubSub WebSocket reconnecting..."),this.setupListener()),3e3)},t.onerror=console.error,t.onmessage=e=>{const i=JSON.parse(e.data);if(i.type=="MESSAGE"){const n=hr.eventHandlers[i.data.topic];if(typeof n=="function"){const o=JSON.parse(i.data.message);n(o)}}}}disconnectListener(){!this.socket||this.socket.readyState==WebSocket.CLOSED||this.socket.close()}}function my(r,t){const e=new hr({broadcaster:r.userId});e.addHandler("community-points-channel-v1",i=>{if(i.type==="reward-redeemed"){const n=i.data.redemption.user.login,o=i.data.redemption.reward.title,s=i.data.redemption.user_input;t.onRewardRedeemed(n,o,s)}}),e.setupListener()}function Op(){const r=document.createElement("iframe");r.style.display="none",document.body.appendChild(r),r.contentWindow?.localStorage.setItem("t",Date.now().toString()),r.remove()}function En(){const r=localStorage.getItem("users")??"{}";let t;try{t=JSON.parse(r)}catch{t={}}return t}function Zp(r){localStorage.setItem("users",JSON.stringify(r))}async function yy(r,t){if(_y.includes(t)){const e=En();e[r]={...e[r]||{},style:t},Zp(e),Op()}}async function yf(r,t){const e=En();"figureString"in t?e[r]={...e[r]||{},hotel:void 0,nick:void 0,figureString:t.figureString}:e[r]={...e[r]||{},hotel:t.hotel,nick:t.nick,figureString:void 0},Zp(e),Op()}let ne={};window.addEventListener("storage",r=>{ne=En()});let hi=null;const _y=["normal","generic","bot","normal_red","normal_blue","normal_yellow","normal_green","normal_grey","fortune_teller","zombie_hand","skeleton","normal_sky_blue","normal_pink","normal_purple","normal_dark_yellow","normal_dark_turquoise",`hearts,
gothicrose`,"piglet","sausagedog","firingmylazer","dragon","staff","bats","console","steampunk_pipe","storm","parrot","pirate","bot_guide","bot_rentable","skelestock","bot_frank_large","notification","goat","santa","ambassador","radio","snowstorm_red","snowstorm_blue","nft_habbo_avatar_bronze","nft_habbo_avatar_gold","nft_habbo_avatar_diamond","nft_habbo_avatar_rainbow","nft_habbo_avatar_trippy","nft_habbo_avatar_ultra_trippy","nft_mvhq","nft_metakey"];let zo,Vo,Gp;function Cy(r,t){return Math.random()*(t-r)+r}async function Ay(r,t){if(!hi)throw new Error("Invalid chat history container.");const e=await fetch(`https://www.habbo${ne[r]&&ne[r].hotel||""}/api/public/users?name=${ne[r]&&ne[r].nick||""}`).then(o=>o.json()).catch(o=>(console.error(o),{figureString:Gp})),i=document.createElement("div");i.classList.add("message"),i.classList.add(ne[r]&&ne[r].style?ne[r].style:"normal"),i.innerHTML+=`
		<div class="color"></div>
      ${ne[r]&&ne[r].hotel?`<img class="user" src="https://www.habbo.com/habbo-imaging/avatarimage?img_format=png&direction=2&head_direction=2&size=m&headonly=1&figure=${e.figureString}" />`:""}
      <span class="nick">${r}</span><b>:</b> <span class="text">${t}</span>
  `;let n=ne[r]&&ne[r].offsetX&&ne[r].lastMessage>Date.now()-30*60*1e3?ne[r].offsetX:Cy(25,75);ne[r]={...ne[r]||{},offsetX:n,lastMessage:Date.now()},i.style.left=n+"%",hi.appendChild(i),i.style.top=hi.clientHeight-i.clientHeight-50+"px";for(const o of hi.children)o!==i&&(o.style.top=parseInt(o.style.top)-i.clientHeight-5+"px");zo&&clearInterval(zo),zo=setInterval(xy,5*1e3),Vo&&clearTimeout(Vo),Vo=setTimeout(by,3*60*1e3)}function by(){clearInterval(zo),Vo=0}function wy(r){return parseInt(r.style.top)>-r.scrollHeight}function xy(){if(!hi)throw new Error("Invalid chat history container.");for(const r of hi.children)wy(r)?r.style.top=parseInt(r.style.top)-10+"px":hi.removeChild(r)}function Py(r,t){if(!t)throw new Error("Invalid chat history container.");return hi=t,Gp=r.defaultLook??"hd-190-7-.ch-210-66-.lg-270-82-.sh-290-80-.ha-1015-61-61",{createChatMessage:Ay}}var Np={};(function(r){(function(t){var e=t.Promise,i=e&&"resolve"in e&&"reject"in e&&"all"in e&&"race"in e&&function(){var C;return new e(function(x){C=x}),typeof C=="function"}();r?(r.Promise=i?e:E,r.Polyfill=E):i||(t.Promise=E);var n="pending",o="sealed",s="fulfilled",a="rejected",l=function(){};function c(C){return Object.prototype.toString.call(C)==="[object Array]"}var d=typeof setImmediate<"u"?setImmediate:setTimeout,g=[],u;function h(){for(var C=0;C<g.length;C++)g[C][0](g[C][1]);g=[],u=!1}function f(C,x){g.push([C,x]),u||(u=!0,d(h,0))}function I(C,x){function F(Z){v(x,Z)}function R(Z){_(x,Z)}try{C(F,R)}catch(Z){R(Z)}}function m(C){var x=C.owner,F=x.state_,R=x.data_,Z=C[F],H=C.then;if(typeof Z=="function"){F=s;try{R=Z(R)}catch(W){_(H,W)}}y(H,R)||(F===s&&v(H,R),F===a&&_(H,R))}function y(C,x){var F;try{if(C===x)throw new TypeError("A promises callback cannot return that same promise.");if(x&&(typeof x=="function"||typeof x=="object")){var R=x.then;if(typeof R=="function")return R.call(x,function(Z){F||(F=!0,x!==Z?v(C,Z):p(C,Z))},function(Z){F||(F=!0,_(C,Z))}),!0}}catch(Z){return F||_(C,Z),!0}return!1}function v(C,x){(C===x||!y(C,x))&&p(C,x)}function p(C,x){C.state_===n&&(C.state_=o,C.data_=x,f(b,C))}function _(C,x){C.state_===n&&(C.state_=o,C.data_=x,f(P,C))}function A(C){var x=C.then_;C.then_=void 0;for(var F=0;F<x.length;F++)m(x[F])}function b(C){C.state_=s,A(C)}function P(C){C.state_=a,A(C)}function E(C){if(typeof C!="function")throw new TypeError("Promise constructor takes a function argument");if(!(this instanceof E))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],I(C,this)}E.prototype={constructor:E,state_:n,then_:null,data_:void 0,then:function(C,x){var F={owner:this,then:new this.constructor(l),fulfilled:C,rejected:x};return this.state_===s||this.state_===a?f(m,F):this.then_.push(F),F.then},catch:function(C){return this.then(null,C)}},E.all=function(C){var x=this;if(!c(C))throw new TypeError("You must pass an array to Promise.all().");return new x(function(F,R){var Z=[],H=0;function W(ot){return H++,function(lt){Z[ot]=lt,--H||F(Z)}}for(var U=0,X;U<C.length;U++)X=C[U],X&&typeof X.then=="function"?X.then(W(U),R):Z[U]=X;H||F(Z)})},E.race=function(C){var x=this;if(!c(C))throw new TypeError("You must pass an array to Promise.race().");return new x(function(F,R){for(var Z=0,H;Z<C.length;Z++)H=C[Z],H&&typeof H.then=="function"?H.then(F,R):F(H)})},E.resolve=function(C){var x=this;return C&&typeof C=="object"&&C.constructor===x?C:new x(function(F){F(C)})},E.reject=function(C){var x=this;return new x(function(F,R){R(C)})}})(typeof window<"u"?window:typeof k<"u"?k:typeof self<"u"?self:k)})(Np);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var _f=Object.getOwnPropertySymbols,Sy=Object.prototype.hasOwnProperty,Ty=Object.prototype.propertyIsEnumerable;function Ey(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function Fy(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;var i=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(i.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(o){n[o]=o}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var My=Fy()?Object.assign:function(r,t){for(var e,i=Ey(r),n,o=1;o<arguments.length;o++){e=Object(arguments[o]);for(var s in e)Sy.call(e,s)&&(i[s]=e[s]);if(_f){n=_f(e);for(var a=0;a<n.length;a++)Ty.call(e,n[a])&&(i[n[a]]=e[n[a]])}}return i};const Dy=Br(My);/*!
 * @pixi/polyfill - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */window.Promise||(window.Promise=Np.Polyfill);Object.assign||(Object.assign=Dy);var Ly=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(window.performance&&window.performance.now)){var By=Date.now();window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-By}}var su=Date.now(),Cf=["ms","moz","webkit","o"];for(var au=0;au<Cf.length&&!window.requestAnimationFrame;++au){var uu=Cf[au];window.requestAnimationFrame=window[uu+"RequestAnimationFrame"],window.cancelAnimationFrame=window[uu+"CancelAnimationFrame"]||window[uu+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(r){if(typeof r!="function")throw new TypeError(r+"is not a function");var t=Date.now(),e=Ly+su-t;return e<0&&(e=0),su=t,window.setTimeout(function(){su=Date.now(),r(performance.now())},e)});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(r){return clearTimeout(r)});Math.sign||(Math.sign=function(t){return t=Number(t),t===0||isNaN(t)?t:t>0?1:-1});Number.isInteger||(Number.isInteger=function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t});window.ArrayBuffer||(window.ArrayBuffer=Array);window.Float32Array||(window.Float32Array=Array);window.Uint32Array||(window.Uint32Array=Array);window.Uint16Array||(window.Uint16Array=Array);window.Uint8Array||(window.Uint8Array=Array);window.Int32Array||(window.Int32Array=Array);var lu=/iPhone/i,Af=/iPod/i,bf=/iPad/i,wf=/\biOS-universal(?:.+)Mac\b/i,hu=/\bAndroid(?:.+)Mobile\b/i,xf=/Android/i,rr=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,vo=/Silk/i,Xe=/Windows Phone/i,Pf=/\bWindows(?:.+)ARM\b/i,Sf=/BlackBerry/i,Tf=/BB10/i,Ef=/Opera Mini/i,Ff=/\b(CriOS|Chrome)(?:.+)Mobile/i,Mf=/Mobile(?:.+)Firefox\b/i,Df=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function Ry(r){return function(t){return t.test(r)}}function Oy(r){var t={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?t.userAgent=r:r&&r.userAgent&&(t={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var e=t.userAgent,i=e.split("[FBAN");typeof i[1]<"u"&&(e=i[0]),i=e.split("Twitter"),typeof i[1]<"u"&&(e=i[0]);var n=Ry(e),o={apple:{phone:n(lu)&&!n(Xe),ipod:n(Af),tablet:!n(lu)&&(n(bf)||Df(t))&&!n(Xe),universal:n(wf),device:(n(lu)||n(Af)||n(bf)||n(wf)||Df(t))&&!n(Xe)},amazon:{phone:n(rr),tablet:!n(rr)&&n(vo),device:n(rr)||n(vo)},android:{phone:!n(Xe)&&n(rr)||!n(Xe)&&n(hu),tablet:!n(Xe)&&!n(rr)&&!n(hu)&&(n(vo)||n(xf)),device:!n(Xe)&&(n(rr)||n(vo)||n(hu)||n(xf))||n(/\bokhttp\b/i)},windows:{phone:n(Xe),tablet:n(Pf),device:n(Xe)||n(Pf)},other:{blackberry:n(Sf),blackberry10:n(Tf),opera:n(Ef),firefox:n(Mf),chrome:n(Ff),device:n(Sf)||n(Tf)||n(Ef)||n(Mf)||n(Ff)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}/*!
 * @pixi/settings - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ce=Oy(window.navigator);function Zy(r){var t=!0;if(Ce.tablet||Ce.phone){if(Ce.apple.device){var e=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(e){var i=parseInt(e[1],10);i<11&&(t=!1)}}if(Ce.android.device){var e=navigator.userAgent.match(/Android\s([0-9.]*)/);if(e){var i=parseInt(e[1],10);i<7&&(t=!1)}}}return t?r:4}function Gy(){return!Ce.apple.device}var ht={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:Zy(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:Ce.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:Gy(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},jp={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function n(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function o(l,c,d,g,u){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new n(d,g||l,u),f=e?e+c:c;return l._events[f]?l._events[f].fn?l._events[f]=[l._events[f],h]:l._events[f].push(h):(l._events[f]=h,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new i:delete l._events[c]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],d,g;if(this._eventsCount===0)return c;for(g in d=this._events)t.call(d,g)&&c.push(e?g.slice(1):g);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},a.prototype.listeners=function(c){var d=e?e+c:c,g=this._events[d];if(!g)return[];if(g.fn)return[g.fn];for(var u=0,h=g.length,f=new Array(h);u<h;u++)f[u]=g[u].fn;return f},a.prototype.listenerCount=function(c){var d=e?e+c:c,g=this._events[d];return g?g.fn?1:g.length:0},a.prototype.emit=function(c,d,g,u,h,f){var I=e?e+c:c;if(!this._events[I])return!1;var m=this._events[I],y=arguments.length,v,p;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,d),!0;case 3:return m.fn.call(m.context,d,g),!0;case 4:return m.fn.call(m.context,d,g,u),!0;case 5:return m.fn.call(m.context,d,g,u,h),!0;case 6:return m.fn.call(m.context,d,g,u,h,f),!0}for(p=1,v=new Array(y-1);p<y;p++)v[p-1]=arguments[p];m.fn.apply(m.context,v)}else{var _=m.length,A;for(p=0;p<_;p++)switch(m[p].once&&this.removeListener(c,m[p].fn,void 0,!0),y){case 1:m[p].fn.call(m[p].context);break;case 2:m[p].fn.call(m[p].context,d);break;case 3:m[p].fn.call(m[p].context,d,g);break;case 4:m[p].fn.call(m[p].context,d,g,u);break;default:if(!v)for(A=1,v=new Array(y-1);A<y;A++)v[A-1]=arguments[A];m[p].fn.apply(m[p].context,v)}}return!0},a.prototype.on=function(c,d,g){return o(this,c,d,g,!1)},a.prototype.once=function(c,d,g){return o(this,c,d,g,!0)},a.prototype.removeListener=function(c,d,g,u){var h=e?e+c:c;if(!this._events[h])return this;if(!d)return s(this,h),this;var f=this._events[h];if(f.fn)f.fn===d&&(!u||f.once)&&(!g||f.context===g)&&s(this,h);else{for(var I=0,m=[],y=f.length;I<y;I++)(f[I].fn!==d||u&&!f[I].once||g&&f[I].context!==g)&&m.push(f[I]);m.length?this._events[h]=m.length===1?m[0]:m:s(this,h)}return this},a.prototype.removeAllListeners=function(c){var d;return c?(d=e?e+c:c,this._events[d]&&s(this,d)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,r.exports=a})(jp);var Ny=jp.exports;const Rr=Br(Ny);var Yh={exports:{}};Yh.exports=Ss;Yh.exports.default=Ss;function Ss(r,t,e){e=e||2;var i=t&&t.length,n=i?t[0]*e:r.length,o=kp(r,0,n,e,!0),s=[];if(!o||o.next===o.prev)return s;var a,l,c,d,g,u,h;if(i&&(o=Hy(r,t,o,e)),r.length>80*e){a=c=r[0],l=d=r[1];for(var f=e;f<n;f+=e)g=r[f],u=r[f+1],g<a&&(a=g),u<l&&(l=u),g>c&&(c=g),u>d&&(d=u);h=Math.max(c-a,d-l),h=h!==0?32767/h:0}return In(o,s,e,a,l,h,0),s}function kp(r,t,e,i,n){var o,s;if(n===Xl(r,t,e,i)>0)for(o=t;o<e;o+=i)s=Lf(o,r[o],r[o+1],s);else for(o=e-i;o>=t;o-=i)s=Lf(o,r[o],r[o+1],s);return s&&Ts(s,s.next)&&(mn(s),s=s.next),s}function ji(r,t){if(!r)return r;t||(t=r);var e=r,i;do if(i=!1,!e.steiner&&(Ts(e,e.next)||Bt(e.prev,e,e.next)===0)){if(mn(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function In(r,t,e,i,n,o,s){if(r){!s&&o&&Jy(r,i,n,o);for(var a=r,l,c;r.prev!==r.next;){if(l=r.prev,c=r.next,o?ky(r,i,n,o):jy(r)){t.push(l.i/e|0),t.push(r.i/e|0),t.push(c.i/e|0),mn(r),r=c.next,a=c.next;continue}if(r=c,r===a){s?s===1?(r=Wy(ji(r),t,e),In(r,t,e,i,n,o,2)):s===2&&Xy(r,t,e,i,n,o):In(ji(r),t,e,i,n,o,1);break}}}}function jy(r){var t=r.prev,e=r,i=r.next;if(Bt(t,e,i)>=0)return!1;for(var n=t.x,o=e.x,s=i.x,a=t.y,l=e.y,c=i.y,d=n<o?n<s?n:s:o<s?o:s,g=a<l?a<c?a:c:l<c?l:c,u=n>o?n>s?n:s:o>s?o:s,h=a>l?a>c?a:c:l>c?l:c,f=i.next;f!==t;){if(f.x>=d&&f.x<=u&&f.y>=g&&f.y<=h&&cr(n,a,o,l,s,c,f.x,f.y)&&Bt(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function ky(r,t,e,i){var n=r.prev,o=r,s=r.next;if(Bt(n,o,s)>=0)return!1;for(var a=n.x,l=o.x,c=s.x,d=n.y,g=o.y,u=s.y,h=a<l?a<c?a:c:l<c?l:c,f=d<g?d<u?d:u:g<u?g:u,I=a>l?a>c?a:c:l>c?l:c,m=d>g?d>u?d:u:g>u?g:u,y=kl(h,f,t,e,i),v=kl(I,m,t,e,i),p=r.prevZ,_=r.nextZ;p&&p.z>=y&&_&&_.z<=v;){if(p.x>=h&&p.x<=I&&p.y>=f&&p.y<=m&&p!==n&&p!==s&&cr(a,d,l,g,c,u,p.x,p.y)&&Bt(p.prev,p,p.next)>=0||(p=p.prevZ,_.x>=h&&_.x<=I&&_.y>=f&&_.y<=m&&_!==n&&_!==s&&cr(a,d,l,g,c,u,_.x,_.y)&&Bt(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;p&&p.z>=y;){if(p.x>=h&&p.x<=I&&p.y>=f&&p.y<=m&&p!==n&&p!==s&&cr(a,d,l,g,c,u,p.x,p.y)&&Bt(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;_&&_.z<=v;){if(_.x>=h&&_.x<=I&&_.y>=f&&_.y<=m&&_!==n&&_!==s&&cr(a,d,l,g,c,u,_.x,_.y)&&Bt(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function Wy(r,t,e){var i=r;do{var n=i.prev,o=i.next.next;!Ts(n,o)&&Wp(n,i,i.next,o)&&vn(n,o)&&vn(o,n)&&(t.push(n.i/e|0),t.push(i.i/e|0),t.push(o.i/e|0),mn(i),mn(i.next),i=r=o),i=i.next}while(i!==r);return ji(i)}function Xy(r,t,e,i,n,o){var s=r;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Ky(s,a)){var l=Xp(s,a);s=ji(s,s.next),l=ji(l,l.next),In(s,t,e,i,n,o,0),In(l,t,e,i,n,o,0);return}a=a.next}s=s.next}while(s!==r)}function Hy(r,t,e,i){var n=[],o,s,a,l,c;for(o=0,s=t.length;o<s;o++)a=t[o]*i,l=o<s-1?t[o+1]*i:r.length,c=kp(r,a,l,i,!1),c===c.next&&(c.steiner=!0),n.push($y(c));for(n.sort(Yy),o=0;o<n.length;o++)e=Uy(n[o],e);return e}function Yy(r,t){return r.x-t.x}function Uy(r,t){var e=zy(r,t);if(!e)return t;var i=Xp(e,r);return ji(i,i.next),ji(e,e.next)}function zy(r,t){var e=t,i=r.x,n=r.y,o=-1/0,s;do{if(n<=e.y&&n>=e.next.y&&e.next.y!==e.y){var a=e.x+(n-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(a<=i&&a>o&&(o=a,s=e.x<e.next.x?e:e.next,a===i))return s}e=e.next}while(e!==t);if(!s)return null;var l=s,c=s.x,d=s.y,g=1/0,u;e=s;do i>=e.x&&e.x>=c&&i!==e.x&&cr(n<d?i:o,n,c,d,n<d?o:i,n,e.x,e.y)&&(u=Math.abs(n-e.y)/(i-e.x),vn(e,r)&&(u<g||u===g&&(e.x>s.x||e.x===s.x&&Vy(s,e)))&&(s=e,g=u)),e=e.next;while(e!==l);return s}function Vy(r,t){return Bt(r.prev,r,t.prev)<0&&Bt(t.next,r,r.next)<0}function Jy(r,t,e,i){var n=r;do n.z===0&&(n.z=kl(n.x,n.y,t,e,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==r);n.prevZ.nextZ=null,n.prevZ=null,Qy(n)}function Qy(r){var t,e,i,n,o,s,a,l,c=1;do{for(e=r,r=null,o=null,s=0;e;){for(s++,i=e,a=0,t=0;t<c&&(a++,i=i.nextZ,!!i);t++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||e.z<=i.z)?(n=e,e=e.nextZ,a--):(n=i,i=i.nextZ,l--),o?o.nextZ=n:r=n,n.prevZ=o,o=n;e=i}o.nextZ=null,c*=2}while(s>1);return r}function kl(r,t,e,i,n){return r=(r-e)*n|0,t=(t-i)*n|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1}function $y(r){var t=r,e=r;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==r);return e}function cr(r,t,e,i,n,o,s,a){return(n-s)*(t-a)>=(r-s)*(o-a)&&(r-s)*(i-a)>=(e-s)*(t-a)&&(e-s)*(o-a)>=(n-s)*(i-a)}function Ky(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!qy(r,t)&&(vn(r,t)&&vn(t,r)&&t0(r,t)&&(Bt(r.prev,r,t.prev)||Bt(r,t.prev,t))||Ts(r,t)&&Bt(r.prev,r,r.next)>0&&Bt(t.prev,t,t.next)>0)}function Bt(r,t,e){return(t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y)}function Ts(r,t){return r.x===t.x&&r.y===t.y}function Wp(r,t,e,i){var n=yo(Bt(r,t,e)),o=yo(Bt(r,t,i)),s=yo(Bt(e,i,r)),a=yo(Bt(e,i,t));return!!(n!==o&&s!==a||n===0&&mo(r,e,t)||o===0&&mo(r,i,t)||s===0&&mo(e,r,i)||a===0&&mo(e,t,i))}function mo(r,t,e){return t.x<=Math.max(r.x,e.x)&&t.x>=Math.min(r.x,e.x)&&t.y<=Math.max(r.y,e.y)&&t.y>=Math.min(r.y,e.y)}function yo(r){return r>0?1:r<0?-1:0}function qy(r,t){var e=r;do{if(e.i!==r.i&&e.next.i!==r.i&&e.i!==t.i&&e.next.i!==t.i&&Wp(e,e.next,r,t))return!0;e=e.next}while(e!==r);return!1}function vn(r,t){return Bt(r.prev,r,r.next)<0?Bt(r,t,r.next)>=0&&Bt(r,r.prev,t)>=0:Bt(r,t,r.prev)<0||Bt(r,r.next,t)<0}function t0(r,t){var e=r,i=!1,n=(r.x+t.x)/2,o=(r.y+t.y)/2;do e.y>o!=e.next.y>o&&e.next.y!==e.y&&n<(e.next.x-e.x)*(o-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==r);return i}function Xp(r,t){var e=new Wl(r.i,r.x,r.y),i=new Wl(t.i,t.x,t.y),n=r.next,o=t.prev;return r.next=t,t.prev=r,e.next=n,n.prev=e,i.next=e,e.prev=i,o.next=i,i.prev=o,i}function Lf(r,t,e,i){var n=new Wl(r,t,e);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function mn(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Wl(r,t,e){this.i=r,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Ss.deviation=function(r,t,e,i){var n=t&&t.length,o=n?t[0]*e:r.length,s=Math.abs(Xl(r,0,o,e));if(n)for(var a=0,l=t.length;a<l;a++){var c=t[a]*e,d=a<l-1?t[a+1]*e:r.length;s-=Math.abs(Xl(r,c,d,e))}var g=0;for(a=0;a<i.length;a+=3){var u=i[a]*e,h=i[a+1]*e,f=i[a+2]*e;g+=Math.abs((r[u]-r[f])*(r[h+1]-r[u+1])-(r[u]-r[h])*(r[f+1]-r[u+1]))}return s===0&&g===0?0:Math.abs((g-s)/s)};function Xl(r,t,e,i){for(var n=0,o=t,s=e-i;o<e;o+=i)n+=(r[s]-r[o])*(r[o+1]+r[s+1]),s=o;return n}Ss.flatten=function(r){for(var t=r[0][0].length,e={vertices:[],holes:[],dimensions:t},i=0,n=0;n<r.length;n++){for(var o=0;o<r[n].length;o++)for(var s=0;s<t;s++)e.vertices.push(r[n][o][s]);n>0&&(i+=r[n-1].length,e.holes.push(i))}return e};var e0=Yh.exports;const Uh=Br(e0);var Vi={},ns={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */ns.exports;(function(r,t){(function(e){var i=t&&!t.nodeType&&t,n=r&&!r.nodeType&&r,o=typeof k=="object"&&k;(o.global===o||o.window===o||o.self===o)&&(e=o);var s,a=2147483647,l=36,c=1,d=26,g=38,u=700,h=72,f=128,I="-",m=/^xn--/,y=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=l-c,A=Math.floor,b=String.fromCharCode,P;function E(et){throw new RangeError(p[et])}function C(et,Q){for(var it=et.length,at=[];it--;)at[it]=Q(et[it]);return at}function x(et,Q){var it=et.split("@"),at="";it.length>1&&(at=it[0]+"@",et=it[1]),et=et.replace(v,".");var N=et.split("."),It=C(N,Q).join(".");return at+It}function F(et){for(var Q=[],it=0,at=et.length,N,It;it<at;)N=et.charCodeAt(it++),N>=55296&&N<=56319&&it<at?(It=et.charCodeAt(it++),(It&64512)==56320?Q.push(((N&1023)<<10)+(It&1023)+65536):(Q.push(N),it--)):Q.push(N);return Q}function R(et){return C(et,function(Q){var it="";return Q>65535&&(Q-=65536,it+=b(Q>>>10&1023|55296),Q=56320|Q&1023),it+=b(Q),it}).join("")}function Z(et){return et-48<10?et-22:et-65<26?et-65:et-97<26?et-97:l}function H(et,Q){return et+22+75*(et<26)-((Q!=0)<<5)}function W(et,Q,it){var at=0;for(et=it?A(et/u):et>>1,et+=A(et/Q);et>_*d>>1;at+=l)et=A(et/_);return A(at+(_+1)*et/(et+g))}function U(et){var Q=[],it=et.length,at,N=0,It=f,dt=h,D,S,M,B,z,$,K,st,gt;for(D=et.lastIndexOf(I),D<0&&(D=0),S=0;S<D;++S)et.charCodeAt(S)>=128&&E("not-basic"),Q.push(et.charCodeAt(S));for(M=D>0?D+1:0;M<it;){for(B=N,z=1,$=l;M>=it&&E("invalid-input"),K=Z(et.charCodeAt(M++)),(K>=l||K>A((a-N)/z))&&E("overflow"),N+=K*z,st=$<=dt?c:$>=dt+d?d:$-dt,!(K<st);$+=l)gt=l-st,z>A(a/gt)&&E("overflow"),z*=gt;at=Q.length+1,dt=W(N-B,at,B==0),A(N/at)>a-It&&E("overflow"),It+=A(N/at),N%=at,Q.splice(N++,0,It)}return R(Q)}function X(et){var Q,it,at,N,It,dt,D,S,M,B,z,$=[],K,st,gt,Pt;for(et=F(et),K=et.length,Q=f,it=0,It=h,dt=0;dt<K;++dt)z=et[dt],z<128&&$.push(b(z));for(at=N=$.length,N&&$.push(I);at<K;){for(D=a,dt=0;dt<K;++dt)z=et[dt],z>=Q&&z<D&&(D=z);for(st=at+1,D-Q>A((a-it)/st)&&E("overflow"),it+=(D-Q)*st,Q=D,dt=0;dt<K;++dt)if(z=et[dt],z<Q&&++it>a&&E("overflow"),z==Q){for(S=it,M=l;B=M<=It?c:M>=It+d?d:M-It,!(S<B);M+=l)Pt=S-B,gt=l-B,$.push(b(H(B+Pt%gt,0))),S=A(Pt/gt);$.push(b(H(S,0))),It=W(it,st,at==N),it=0,++at}++it,++Q}return $.join("")}function ot(et){return x(et,function(Q){return m.test(Q)?U(Q.slice(4).toLowerCase()):Q})}function lt(et){return x(et,function(Q){return y.test(Q)?"xn--"+X(Q):Q})}if(s={version:"1.4.1",ucs2:{decode:F,encode:R},decode:U,encode:X,toASCII:lt,toUnicode:ot},i&&n)if(r.exports==i)n.exports=s;else for(P in s)s.hasOwnProperty(P)&&(i[P]=s[P]);else e.punycode=s})(k)})(ns,ns.exports);var i0=ns.exports,r0=Error,n0=EvalError,o0=RangeError,s0=ReferenceError,Hp=SyntaxError,Fn=TypeError,a0=URIError,u0=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),i=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;t[e]=n;for(e in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,e);if(s.value!==n||s.enumerable!==!0)return!1}return!0},Bf=typeof Symbol<"u"&&Symbol,l0=u0,h0=function(){return typeof Bf!="function"||typeof Symbol!="function"||typeof Bf("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:l0()},cu={__proto__:null,foo:{}},c0=Object,f0=function(){return{__proto__:cu}.foo===cu.foo&&!(cu instanceof c0)},d0="Function.prototype.bind called on incompatible ",g0=Object.prototype.toString,p0=Math.max,I0="[object Function]",Rf=function(t,e){for(var i=[],n=0;n<t.length;n+=1)i[n]=t[n];for(var o=0;o<e.length;o+=1)i[o+t.length]=e[o];return i},v0=function(t,e){for(var i=[],n=e||0,o=0;n<t.length;n+=1,o+=1)i[o]=t[n];return i},m0=function(r,t){for(var e="",i=0;i<r.length;i+=1)e+=r[i],i+1<r.length&&(e+=t);return e},y0=function(t){var e=this;if(typeof e!="function"||g0.apply(e)!==I0)throw new TypeError(d0+e);for(var i=v0(arguments,1),n,o=function(){if(this instanceof n){var d=e.apply(this,Rf(i,arguments));return Object(d)===d?d:this}return e.apply(t,Rf(i,arguments))},s=p0(0,e.length-i.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(n=Function("binder","return function ("+m0(a,",")+"){ return binder.apply(this,arguments); }")(o),e.prototype){var c=function(){};c.prototype=e.prototype,n.prototype=new c,c.prototype=null}return n},_0=y0,zh=Function.prototype.bind||_0,C0=Function.prototype.call,A0=Object.prototype.hasOwnProperty,b0=zh,w0=b0.call(C0,A0),At,x0=r0,P0=n0,S0=o0,T0=s0,mr=Hp,dr=Fn,E0=a0,Yp=Function,fu=function(r){try{return Yp('"use strict"; return ('+r+").constructor;")()}catch{}},Zi=Object.getOwnPropertyDescriptor;if(Zi)try{Zi({},"")}catch{Zi=null}var du=function(){throw new dr},F0=Zi?function(){try{return arguments.callee,du}catch{try{return Zi(arguments,"callee").get}catch{return du}}}():du,nr=h0(),M0=f0(),Ut=Object.getPrototypeOf||(M0?function(r){return r.__proto__}:null),lr={},D0=typeof Uint8Array>"u"||!Ut?At:Ut(Uint8Array),Gi={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?At:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?At:ArrayBuffer,"%ArrayIteratorPrototype%":nr&&Ut?Ut([][Symbol.iterator]()):At,"%AsyncFromSyncIteratorPrototype%":At,"%AsyncFunction%":lr,"%AsyncGenerator%":lr,"%AsyncGeneratorFunction%":lr,"%AsyncIteratorPrototype%":lr,"%Atomics%":typeof Atomics>"u"?At:Atomics,"%BigInt%":typeof BigInt>"u"?At:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?At:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?At:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?At:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":x0,"%eval%":eval,"%EvalError%":P0,"%Float32Array%":typeof Float32Array>"u"?At:Float32Array,"%Float64Array%":typeof Float64Array>"u"?At:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?At:FinalizationRegistry,"%Function%":Yp,"%GeneratorFunction%":lr,"%Int8Array%":typeof Int8Array>"u"?At:Int8Array,"%Int16Array%":typeof Int16Array>"u"?At:Int16Array,"%Int32Array%":typeof Int32Array>"u"?At:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":nr&&Ut?Ut(Ut([][Symbol.iterator]())):At,"%JSON%":typeof JSON=="object"?JSON:At,"%Map%":typeof Map>"u"?At:Map,"%MapIteratorPrototype%":typeof Map>"u"||!nr||!Ut?At:Ut(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?At:Promise,"%Proxy%":typeof Proxy>"u"?At:Proxy,"%RangeError%":S0,"%ReferenceError%":T0,"%Reflect%":typeof Reflect>"u"?At:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?At:Set,"%SetIteratorPrototype%":typeof Set>"u"||!nr||!Ut?At:Ut(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?At:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":nr&&Ut?Ut(""[Symbol.iterator]()):At,"%Symbol%":nr?Symbol:At,"%SyntaxError%":mr,"%ThrowTypeError%":F0,"%TypedArray%":D0,"%TypeError%":dr,"%Uint8Array%":typeof Uint8Array>"u"?At:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?At:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?At:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?At:Uint32Array,"%URIError%":E0,"%WeakMap%":typeof WeakMap>"u"?At:WeakMap,"%WeakRef%":typeof WeakRef>"u"?At:WeakRef,"%WeakSet%":typeof WeakSet>"u"?At:WeakSet};if(Ut)try{null.error}catch(r){var L0=Ut(Ut(r));Gi["%Error.prototype%"]=L0}var B0=function r(t){var e;if(t==="%AsyncFunction%")e=fu("async function () {}");else if(t==="%GeneratorFunction%")e=fu("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=fu("async function* () {}");else if(t==="%AsyncGenerator%"){var i=r("%AsyncGeneratorFunction%");i&&(e=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var n=r("%AsyncGenerator%");n&&Ut&&(e=Ut(n.prototype))}return Gi[t]=e,e},Of={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Mn=zh,os=w0,R0=Mn.call(Function.call,Array.prototype.concat),O0=Mn.call(Function.apply,Array.prototype.splice),Zf=Mn.call(Function.call,String.prototype.replace),ss=Mn.call(Function.call,String.prototype.slice),Z0=Mn.call(Function.call,RegExp.prototype.exec),G0=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,N0=/\\(\\)?/g,j0=function(t){var e=ss(t,0,1),i=ss(t,-1);if(e==="%"&&i!=="%")throw new mr("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&e!=="%")throw new mr("invalid intrinsic syntax, expected opening `%`");var n=[];return Zf(t,G0,function(o,s,a,l){n[n.length]=a?Zf(l,N0,"$1"):s||o}),n},k0=function(t,e){var i=t,n;if(os(Of,i)&&(n=Of[i],i="%"+n[0]+"%"),os(Gi,i)){var o=Gi[i];if(o===lr&&(o=B0(i)),typeof o>"u"&&!e)throw new dr("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:o}}throw new mr("intrinsic "+t+" does not exist!")},Or=function(t,e){if(typeof t!="string"||t.length===0)throw new dr("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new dr('"allowMissing" argument must be a boolean');if(Z0(/^%?[^%]*%?$/,t)===null)throw new mr("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=j0(t),n=i.length>0?i[0]:"",o=k0("%"+n+"%",e),s=o.name,a=o.value,l=!1,c=o.alias;c&&(n=c[0],O0(i,R0([0,1],c)));for(var d=1,g=!0;d<i.length;d+=1){var u=i[d],h=ss(u,0,1),f=ss(u,-1);if((h==='"'||h==="'"||h==="`"||f==='"'||f==="'"||f==="`")&&h!==f)throw new mr("property names with quotes must have matching quotes");if((u==="constructor"||!g)&&(l=!0),n+="."+u,s="%"+n+"%",os(Gi,s))a=Gi[s];else if(a!=null){if(!(u in a)){if(!e)throw new dr("base intrinsic for "+t+" exists, but the property is not available.");return}if(Zi&&d+1>=i.length){var I=Zi(a,u);g=!!I,g&&"get"in I&&!("originalValue"in I.get)?a=I.get:a=a[u]}else g=os(a,u),a=a[u];g&&!l&&(Gi[s]=a)}}return a},Up={exports:{}},gu,Gf;function Vh(){if(Gf)return gu;Gf=1;var r=Or,t=r("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return gu=t,gu}var W0=Or,Jo=W0("%Object.getOwnPropertyDescriptor%",!0);if(Jo)try{Jo([],"length")}catch{Jo=null}var zp=Jo,Nf=Vh(),X0=Hp,or=Fn,jf=zp,H0=function(t,e,i){if(!t||typeof t!="object"&&typeof t!="function")throw new or("`obj` must be an object or a function`");if(typeof e!="string"&&typeof e!="symbol")throw new or("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new or("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new or("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new or("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new or("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!jf&&jf(t,e);if(Nf)Nf(t,e,{configurable:s===null&&l?l.configurable:!s,enumerable:n===null&&l?l.enumerable:!n,value:i,writable:o===null&&l?l.writable:!o});else if(a||!n&&!o&&!s)t[e]=i;else throw new X0("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Hl=Vh(),Vp=function(){return!!Hl};Vp.hasArrayLengthDefineBug=function(){if(!Hl)return null;try{return Hl([],"length",{value:1}).length!==1}catch{return!0}};var Y0=Vp,U0=Or,kf=H0,z0=Y0(),Wf=zp,Xf=Fn,V0=U0("%Math.floor%"),J0=function(t,e){if(typeof t!="function")throw new Xf("`fn` is not a function");if(typeof e!="number"||e<0||e>4294967295||V0(e)!==e)throw new Xf("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],n=!0,o=!0;if("length"in t&&Wf){var s=Wf(t,"length");s&&!s.configurable&&(n=!1),s&&!s.writable&&(o=!1)}return(n||o||!i)&&(z0?kf(t,"length",e,!0,!0):kf(t,"length",e)),t};(function(r){var t=zh,e=Or,i=J0,n=Fn,o=e("%Function.prototype.apply%"),s=e("%Function.prototype.call%"),a=e("%Reflect.apply%",!0)||t.call(s,o),l=Vh(),c=e("%Math.max%");r.exports=function(u){if(typeof u!="function")throw new n("a function is required");var h=a(t,s,arguments);return i(h,1+c(0,u.length-(arguments.length-1)),!0)};var d=function(){return a(t,o,arguments)};l?l(r.exports,"apply",{value:d}):r.exports.apply=d})(Up);var Q0=Up.exports,Jp=Or,Qp=Q0,$0=Qp(Jp("String.prototype.indexOf")),K0=function(t,e){var i=Jp(t,!!e);return typeof i=="function"&&$0(t,".prototype.")>-1?Qp(i):i},Jh=typeof Map=="function"&&Map.prototype,pu=Object.getOwnPropertyDescriptor&&Jh?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,as=Jh&&pu&&typeof pu.get=="function"?pu.get:null,Hf=Jh&&Map.prototype.forEach,Qh=typeof Set=="function"&&Set.prototype,Iu=Object.getOwnPropertyDescriptor&&Qh?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,us=Qh&&Iu&&typeof Iu.get=="function"?Iu.get:null,Yf=Qh&&Set.prototype.forEach,q0=typeof WeakMap=="function"&&WeakMap.prototype,an=q0?WeakMap.prototype.has:null,t_=typeof WeakSet=="function"&&WeakSet.prototype,un=t_?WeakSet.prototype.has:null,e_=typeof WeakRef=="function"&&WeakRef.prototype,Uf=e_?WeakRef.prototype.deref:null,i_=Boolean.prototype.valueOf,r_=Object.prototype.toString,n_=Function.prototype.toString,o_=String.prototype.match,$h=String.prototype.slice,ci=String.prototype.replace,s_=String.prototype.toUpperCase,zf=String.prototype.toLowerCase,$p=RegExp.prototype.test,Vf=Array.prototype.concat,Ze=Array.prototype.join,a_=Array.prototype.slice,Jf=Math.floor,Yl=typeof BigInt=="function"?BigInt.prototype.valueOf:null,vu=Object.getOwnPropertySymbols,Ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,yr=typeof Symbol=="function"&&typeof Symbol.iterator=="object",se=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===yr||!0)?Symbol.toStringTag:null,Kp=Object.prototype.propertyIsEnumerable,Qf=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function $f(r,t){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||$p.call(/e/,t))return t;var e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var i=r<0?-Jf(-r):Jf(r);if(i!==r){var n=String(i),o=$h.call(t,n.length+1);return ci.call(n,e,"$&_")+"."+ci.call(ci.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ci.call(t,e,"$&_")}var zl=rs,Kf=zl.custom,qf=tI(Kf)?Kf:null,u_=function r(t,e,i,n){var o=e||{};if(ai(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ai(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=ai(o,"customInspect")?o.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ai(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ai(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return iI(t,o);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var l=String(t);return a?$f(t,l):l}if(typeof t=="bigint"){var c=String(t)+"n";return a?$f(t,c):c}var d=typeof o.depth>"u"?5:o.depth;if(typeof i>"u"&&(i=0),i>=d&&d>0&&typeof t=="object")return Vl(t)?"[Array]":"[Object]";var g=P_(o,i);if(typeof n>"u")n=[];else if(eI(n,t)>=0)return"[Circular]";function u(Z,H,W){if(H&&(n=a_.call(n),n.push(H)),W){var U={depth:o.depth};return ai(o,"quoteStyle")&&(U.quoteStyle=o.quoteStyle),r(Z,U,i+1,n)}return r(Z,o,i+1,n)}if(typeof t=="function"&&!td(t)){var h=v_(t),f=_o(t,u);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(f.length>0?" { "+Ze.call(f,", ")+" }":"")}if(tI(t)){var I=yr?ci.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Ul.call(t);return typeof t=="object"&&!yr?Jr(I):I}if(b_(t)){for(var m="<"+zf.call(String(t.nodeName)),y=t.attributes||[],v=0;v<y.length;v++)m+=" "+y[v].name+"="+qp(l_(y[v].value),"double",o);return m+=">",t.childNodes&&t.childNodes.length&&(m+="..."),m+="</"+zf.call(String(t.nodeName))+">",m}if(Vl(t)){if(t.length===0)return"[]";var p=_o(t,u);return g&&!x_(p)?"["+Jl(p,g)+"]":"[ "+Ze.call(p,", ")+" ]"}if(c_(t)){var _=_o(t,u);return!("cause"in Error.prototype)&&"cause"in t&&!Kp.call(t,"cause")?"{ ["+String(t)+"] "+Ze.call(Vf.call("[cause]: "+u(t.cause),_),", ")+" }":_.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+Ze.call(_,", ")+" }"}if(typeof t=="object"&&s){if(qf&&typeof t[qf]=="function"&&zl)return zl(t,{depth:d-i});if(s!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(m_(t)){var A=[];return Hf&&Hf.call(t,function(Z,H){A.push(u(H,t,!0)+" => "+u(Z,t))}),ed("Map",as.call(t),A,g)}if(C_(t)){var b=[];return Yf&&Yf.call(t,function(Z){b.push(u(Z,t))}),ed("Set",us.call(t),b,g)}if(y_(t))return mu("WeakMap");if(A_(t))return mu("WeakSet");if(__(t))return mu("WeakRef");if(d_(t))return Jr(u(Number(t)));if(p_(t))return Jr(u(Yl.call(t)));if(g_(t))return Jr(i_.call(t));if(f_(t))return Jr(u(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===k)return"{ [object globalThis] }";if(!h_(t)&&!td(t)){var P=_o(t,u),E=Qf?Qf(t)===Object.prototype:t instanceof Object||t.constructor===Object,C=t instanceof Object?"":"null prototype",x=!E&&se&&Object(t)===t&&se in t?$h.call(_i(t),8,-1):C?"Object":"",F=E||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",R=F+(x||C?"["+Ze.call(Vf.call([],x||[],C||[]),": ")+"] ":"");return P.length===0?R+"{}":g?R+"{"+Jl(P,g)+"}":R+"{ "+Ze.call(P,", ")+" }"}return String(t)};function qp(r,t,e){var i=(e.quoteStyle||t)==="double"?'"':"'";return i+r+i}function l_(r){return ci.call(String(r),/"/g,"&quot;")}function Vl(r){return _i(r)==="[object Array]"&&(!se||!(typeof r=="object"&&se in r))}function h_(r){return _i(r)==="[object Date]"&&(!se||!(typeof r=="object"&&se in r))}function td(r){return _i(r)==="[object RegExp]"&&(!se||!(typeof r=="object"&&se in r))}function c_(r){return _i(r)==="[object Error]"&&(!se||!(typeof r=="object"&&se in r))}function f_(r){return _i(r)==="[object String]"&&(!se||!(typeof r=="object"&&se in r))}function d_(r){return _i(r)==="[object Number]"&&(!se||!(typeof r=="object"&&se in r))}function g_(r){return _i(r)==="[object Boolean]"&&(!se||!(typeof r=="object"&&se in r))}function tI(r){if(yr)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!Ul)return!1;try{return Ul.call(r),!0}catch{}return!1}function p_(r){if(!r||typeof r!="object"||!Yl)return!1;try{return Yl.call(r),!0}catch{}return!1}var I_=Object.prototype.hasOwnProperty||function(r){return r in this};function ai(r,t){return I_.call(r,t)}function _i(r){return r_.call(r)}function v_(r){if(r.name)return r.name;var t=o_.call(n_.call(r),/^function\s*([\w$]+)/);return t?t[1]:null}function eI(r,t){if(r.indexOf)return r.indexOf(t);for(var e=0,i=r.length;e<i;e++)if(r[e]===t)return e;return-1}function m_(r){if(!as||!r||typeof r!="object")return!1;try{as.call(r);try{us.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function y_(r){if(!an||!r||typeof r!="object")return!1;try{an.call(r,an);try{un.call(r,un)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function __(r){if(!Uf||!r||typeof r!="object")return!1;try{return Uf.call(r),!0}catch{}return!1}function C_(r){if(!us||!r||typeof r!="object")return!1;try{us.call(r);try{as.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function A_(r){if(!un||!r||typeof r!="object")return!1;try{un.call(r,un);try{an.call(r,an)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function b_(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function iI(r,t){if(r.length>t.maxStringLength){var e=r.length-t.maxStringLength,i="... "+e+" more character"+(e>1?"s":"");return iI($h.call(r,0,t.maxStringLength),t)+i}var n=ci.call(ci.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,w_);return qp(n,"single",t)}function w_(r){var t=r.charCodeAt(0),e={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return e?"\\"+e:"\\x"+(t<16?"0":"")+s_.call(t.toString(16))}function Jr(r){return"Object("+r+")"}function mu(r){return r+" { ? }"}function ed(r,t,e,i){var n=i?Jl(e,i):Ze.call(e,", ");return r+" ("+t+") {"+n+"}"}function x_(r){for(var t=0;t<r.length;t++)if(eI(r[t],`
`)>=0)return!1;return!0}function P_(r,t){var e;if(r.indent==="	")e="	";else if(typeof r.indent=="number"&&r.indent>0)e=Ze.call(Array(r.indent+1)," ");else return null;return{base:e,prev:Ze.call(Array(t+1),e)}}function Jl(r,t){if(r.length===0)return"";var e=`
`+t.prev+t.base;return e+Ze.call(r,","+e)+`
`+t.prev}function _o(r,t){var e=Vl(r),i=[];if(e){i.length=r.length;for(var n=0;n<r.length;n++)i[n]=ai(r,n)?t(r[n],r):""}var o=typeof vu=="function"?vu(r):[],s;if(yr){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var l in r)ai(r,l)&&(e&&String(Number(l))===l&&l<r.length||yr&&s["$"+l]instanceof Symbol||($p.call(/[^\w$]/,l)?i.push(t(l,r)+": "+t(r[l],r)):i.push(l+": "+t(r[l],r))));if(typeof vu=="function")for(var c=0;c<o.length;c++)Kp.call(r,o[c])&&i.push("["+t(o[c])+"]: "+t(r[o[c]],r));return i}var rI=Or,Zr=K0,S_=u_,T_=Fn,Co=rI("%WeakMap%",!0),Ao=rI("%Map%",!0),E_=Zr("WeakMap.prototype.get",!0),F_=Zr("WeakMap.prototype.set",!0),M_=Zr("WeakMap.prototype.has",!0),D_=Zr("Map.prototype.get",!0),L_=Zr("Map.prototype.set",!0),B_=Zr("Map.prototype.has",!0),Kh=function(r,t){for(var e=r,i;(i=e.next)!==null;e=i)if(i.key===t)return e.next=i.next,i.next=r.next,r.next=i,i},R_=function(r,t){var e=Kh(r,t);return e&&e.value},O_=function(r,t,e){var i=Kh(r,t);i?i.value=e:r.next={key:t,next:r.next,value:e}},Z_=function(r,t){return!!Kh(r,t)},G_=function(){var t,e,i,n={assert:function(o){if(!n.has(o))throw new T_("Side channel does not contain "+S_(o))},get:function(o){if(Co&&o&&(typeof o=="object"||typeof o=="function")){if(t)return E_(t,o)}else if(Ao){if(e)return D_(e,o)}else if(i)return R_(i,o)},has:function(o){if(Co&&o&&(typeof o=="object"||typeof o=="function")){if(t)return M_(t,o)}else if(Ao){if(e)return B_(e,o)}else if(i)return Z_(i,o);return!1},set:function(o,s){Co&&o&&(typeof o=="object"||typeof o=="function")?(t||(t=new Co),F_(t,o,s)):Ao?(e||(e=new Ao),L_(e,o,s)):(i||(i={key:{},next:null}),O_(i,o,s))}};return n},N_=String.prototype.replace,j_=/%20/g,yu={RFC1738:"RFC1738",RFC3986:"RFC3986"},qh={default:yu.RFC3986,formatters:{RFC1738:function(r){return N_.call(r,j_,"+")},RFC3986:function(r){return String(r)}},RFC1738:yu.RFC1738,RFC3986:yu.RFC3986},k_=qh,_u=Object.prototype.hasOwnProperty,Bi=Array.isArray,Re=function(){for(var r=[],t=0;t<256;++t)r.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return r}(),W_=function(t){for(;t.length>1;){var e=t.pop(),i=e.obj[e.prop];if(Bi(i)){for(var n=[],o=0;o<i.length;++o)typeof i[o]<"u"&&n.push(i[o]);e.obj[e.prop]=n}}},nI=function(t,e){for(var i=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)typeof t[n]<"u"&&(i[n]=t[n]);return i},X_=function r(t,e,i){if(!e)return t;if(typeof e!="object"){if(Bi(t))t.push(e);else if(t&&typeof t=="object")(i&&(i.plainObjects||i.allowPrototypes)||!_u.call(Object.prototype,e))&&(t[e]=!0);else return[t,e];return t}if(!t||typeof t!="object")return[t].concat(e);var n=t;return Bi(t)&&!Bi(e)&&(n=nI(t,i)),Bi(t)&&Bi(e)?(e.forEach(function(o,s){if(_u.call(t,s)){var a=t[s];a&&typeof a=="object"&&o&&typeof o=="object"?t[s]=r(a,o,i):t.push(o)}else t[s]=o}),t):Object.keys(e).reduce(function(o,s){var a=e[s];return _u.call(o,s)?o[s]=r(o[s],a,i):o[s]=a,o},n)},H_=function(t,e){return Object.keys(e).reduce(function(i,n){return i[n]=e[n],i},t)},Y_=function(r,t,e){var i=r.replace(/\+/g," ");if(e==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},U_=function(t,e,i,n,o){if(t.length===0)return t;var s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),i==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});for(var a="",l=0;l<s.length;++l){var c=s.charCodeAt(l);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||o===k_.RFC1738&&(c===40||c===41)){a+=s.charAt(l);continue}if(c<128){a=a+Re[c];continue}if(c<2048){a=a+(Re[192|c>>6]+Re[128|c&63]);continue}if(c<55296||c>=57344){a=a+(Re[224|c>>12]+Re[128|c>>6&63]+Re[128|c&63]);continue}l+=1,c=65536+((c&1023)<<10|s.charCodeAt(l)&1023),a+=Re[240|c>>18]+Re[128|c>>12&63]+Re[128|c>>6&63]+Re[128|c&63]}return a},z_=function(t){for(var e=[{obj:{o:t},prop:"o"}],i=[],n=0;n<e.length;++n)for(var o=e[n],s=o.obj[o.prop],a=Object.keys(s),l=0;l<a.length;++l){var c=a[l],d=s[c];typeof d=="object"&&d!==null&&i.indexOf(d)===-1&&(e.push({obj:s,prop:c}),i.push(d))}return W_(e),t},V_=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},J_=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},Q_=function(t,e){return[].concat(t,e)},$_=function(t,e){if(Bi(t)){for(var i=[],n=0;n<t.length;n+=1)i.push(e(t[n]));return i}return e(t)},oI={arrayToObject:nI,assign:H_,combine:Q_,compact:z_,decode:Y_,encode:U_,isBuffer:J_,isRegExp:V_,maybeMap:$_,merge:X_},sI=G_,Qo=oI,ln=qh,K_=Object.prototype.hasOwnProperty,aI={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},Oe=Array.isArray,q_=Array.prototype.push,uI=function(r,t){q_.apply(r,Oe(t)?t:[t])},tC=Date.prototype.toISOString,id=ln.default,Ht={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Qo.encode,encodeValuesOnly:!1,format:id,formatter:ln.formatters[id],indices:!1,serializeDate:function(t){return tC.call(t)},skipNulls:!1,strictNullHandling:!1},eC=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},Cu={},iC=function r(t,e,i,n,o,s,a,l,c,d,g,u,h,f,I,m,y,v){for(var p=t,_=v,A=0,b=!1;(_=_.get(Cu))!==void 0&&!b;){var P=_.get(t);if(A+=1,typeof P<"u"){if(P===A)throw new RangeError("Cyclic object value");b=!0}typeof _.get(Cu)>"u"&&(A=0)}if(typeof d=="function"?p=d(e,p):p instanceof Date?p=h(p):i==="comma"&&Oe(p)&&(p=Qo.maybeMap(p,function(et){return et instanceof Date?h(et):et})),p===null){if(s)return c&&!m?c(e,Ht.encoder,y,"key",f):e;p=""}if(eC(p)||Qo.isBuffer(p)){if(c){var E=m?e:c(e,Ht.encoder,y,"key",f);return[I(E)+"="+I(c(p,Ht.encoder,y,"value",f))]}return[I(e)+"="+I(String(p))]}var C=[];if(typeof p>"u")return C;var x;if(i==="comma"&&Oe(p))m&&c&&(p=Qo.maybeMap(p,c)),x=[{value:p.length>0?p.join(",")||null:void 0}];else if(Oe(d))x=d;else{var F=Object.keys(p);x=g?F.sort(g):F}var R=l?e.replace(/\./g,"%2E"):e,Z=n&&Oe(p)&&p.length===1?R+"[]":R;if(o&&Oe(p)&&p.length===0)return Z+"[]";for(var H=0;H<x.length;++H){var W=x[H],U=typeof W=="object"&&typeof W.value<"u"?W.value:p[W];if(!(a&&U===null)){var X=u&&l?W.replace(/\./g,"%2E"):W,ot=Oe(p)?typeof i=="function"?i(Z,X):Z:Z+(u?"."+X:"["+X+"]");v.set(t,A);var lt=sI();lt.set(Cu,v),uI(C,r(U,ot,i,n,o,s,a,l,i==="comma"&&m&&Oe(p)?null:c,d,g,u,h,f,I,m,y,lt))}}return C},rC=function(t){if(!t)return Ht;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var e=t.charset||Ht.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=ln.default;if(typeof t.format<"u"){if(!K_.call(ln.formatters,t.format))throw new TypeError("Unknown format option provided.");i=t.format}var n=ln.formatters[i],o=Ht.filter;(typeof t.filter=="function"||Oe(t.filter))&&(o=t.filter);var s;if(t.arrayFormat in aI?s=t.arrayFormat:"indices"in t?s=t.indices?"indices":"repeat":s=Ht.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof t.allowDots>"u"?t.encodeDotInKeys===!0?!0:Ht.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Ht.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ht.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ht.charsetSentinel,commaRoundTrip:t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Ht.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Ht.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Ht.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Ht.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Ht.encodeValuesOnly,filter:o,format:i,formatter:n,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Ht.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Ht.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ht.strictNullHandling}},nC=function(r,t){var e=r,i=rC(t),n,o;typeof i.filter=="function"?(o=i.filter,e=o("",e)):Oe(i.filter)&&(o=i.filter,n=o);var s=[];if(typeof e!="object"||e===null)return"";var a=aI[i.arrayFormat],l=a==="comma"&&i.commaRoundTrip;n||(n=Object.keys(e)),i.sort&&n.sort(i.sort);for(var c=sI(),d=0;d<n.length;++d){var g=n[d];i.skipNulls&&e[g]===null||uI(s,iC(e[g],g,a,l,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,c))}var u=s.join(i.delimiter),h=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),u.length>0?h+u:""},_r=oI,Ql=Object.prototype.hasOwnProperty,oC=Array.isArray,Ot={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!0,decoder:_r.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},sC=function(r){return r.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},lI=function(r,t){return r&&typeof r=="string"&&t.comma&&r.indexOf(",")>-1?r.split(","):r},aC="utf8=%26%2310003%3B",uC="utf8=%E2%9C%93",lC=function(t,e){var i={__proto__:null},n=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,o=e.parameterLimit===1/0?void 0:e.parameterLimit,s=n.split(e.delimiter,o),a=-1,l,c=e.charset;if(e.charsetSentinel)for(l=0;l<s.length;++l)s[l].indexOf("utf8=")===0&&(s[l]===uC?c="utf-8":s[l]===aC&&(c="iso-8859-1"),a=l,l=s.length);for(l=0;l<s.length;++l)if(l!==a){var d=s[l],g=d.indexOf("]="),u=g===-1?d.indexOf("="):g+1,h,f;u===-1?(h=e.decoder(d,Ot.decoder,c,"key"),f=e.strictNullHandling?null:""):(h=e.decoder(d.slice(0,u),Ot.decoder,c,"key"),f=_r.maybeMap(lI(d.slice(u+1),e),function(m){return e.decoder(m,Ot.decoder,c,"value")})),f&&e.interpretNumericEntities&&c==="iso-8859-1"&&(f=sC(f)),d.indexOf("[]=")>-1&&(f=oC(f)?[f]:f);var I=Ql.call(i,h);I&&e.duplicates==="combine"?i[h]=_r.combine(i[h],f):(!I||e.duplicates==="last")&&(i[h]=f)}return i},hC=function(r,t,e,i){for(var n=i?t:lI(t,e),o=r.length-1;o>=0;--o){var s,a=r[o];if(a==="[]"&&e.parseArrays)s=e.allowEmptyArrays&&n===""?[]:[].concat(n);else{s=e.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,c=e.decodeDotInKeys?l.replace(/%2E/g,"."):l,d=parseInt(c,10);!e.parseArrays&&c===""?s={0:n}:!isNaN(d)&&a!==c&&String(d)===c&&d>=0&&e.parseArrays&&d<=e.arrayLimit?(s=[],s[d]=n):c!=="__proto__"&&(s[c]=n)}n=s}return n},cC=function(t,e,i,n){if(t){var o=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,s=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=i.depth>0&&s.exec(o),c=l?o.slice(0,l.index):o,d=[];if(c){if(!i.plainObjects&&Ql.call(Object.prototype,c)&&!i.allowPrototypes)return;d.push(c)}for(var g=0;i.depth>0&&(l=a.exec(o))!==null&&g<i.depth;){if(g+=1,!i.plainObjects&&Ql.call(Object.prototype,l[1].slice(1,-1))&&!i.allowPrototypes)return;d.push(l[1])}return l&&d.push("["+o.slice(l.index)+"]"),hC(d,e,i,n)}},fC=function(t){if(!t)return Ot;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys<"u"&&typeof t.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(t.decoder!==null&&typeof t.decoder<"u"&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=typeof t.charset>"u"?Ot.charset:t.charset,i=typeof t.duplicates>"u"?Ot.duplicates:t.duplicates;if(i!=="combine"&&i!=="first"&&i!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var n=typeof t.allowDots>"u"?t.decodeDotInKeys===!0?!0:Ot.allowDots:!!t.allowDots;return{allowDots:n,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ot.allowEmptyArrays,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:Ot.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:Ot.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:Ot.arrayLimit,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ot.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:Ot.comma,decodeDotInKeys:typeof t.decodeDotInKeys=="boolean"?t.decodeDotInKeys:Ot.decodeDotInKeys,decoder:typeof t.decoder=="function"?t.decoder:Ot.decoder,delimiter:typeof t.delimiter=="string"||_r.isRegExp(t.delimiter)?t.delimiter:Ot.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:Ot.depth,duplicates:i,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:Ot.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:Ot.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:Ot.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ot.strictNullHandling}},dC=function(r,t){var e=fC(t);if(r===""||r===null||typeof r>"u")return e.plainObjects?Object.create(null):{};for(var i=typeof r=="string"?lC(r,e):r,n=e.plainObjects?Object.create(null):{},o=Object.keys(i),s=0;s<o.length;++s){var a=o[s],l=cC(a,i[a],e,typeof r=="string");n=_r.merge(n,l,e)}return e.allowSparse===!0?n:_r.compact(n)},gC=nC,pC=dC,IC=qh,vC={formats:IC,parse:pC,stringify:gC},mC=i0;function be(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var yC=/^([a-z0-9.+-]+:)/i,_C=/:[0-9]*$/,CC=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,AC=["<",">",'"',"`"," ","\r",`
`,"	"],bC=["{","}","|","\\","^","`"].concat(AC),$l=["'"].concat(bC),rd=["%","/","?",";","#"].concat($l),nd=["/","?","#"],wC=255,od=/^[+a-z0-9A-Z_-]{0,63}$/,xC=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,PC={javascript:!0,"javascript:":!0},Kl={javascript:!0,"javascript:":!0},gr={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},ql=vC;function Dn(r,t,e){if(r&&typeof r=="object"&&r instanceof be)return r;var i=new be;return i.parse(r,t,e),i}be.prototype.parse=function(r,t,e){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var i=r.indexOf("?"),n=i!==-1&&i<r.indexOf("#")?"?":"#",o=r.split(n),s=/\\/g;o[0]=o[0].replace(s,"/"),r=o.join(n);var a=r;if(a=a.trim(),!e&&r.split("#").length===1){var l=CC.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=ql.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var c=yC.exec(a);if(c){c=c[0];var d=c.toLowerCase();this.protocol=d,a=a.substr(c.length)}if(e||c||a.match(/^\/\/[^@/]+@[^@/]+/)){var g=a.substr(0,2)==="//";g&&!(c&&Kl[c])&&(a=a.substr(2),this.slashes=!0)}if(!Kl[c]&&(g||c&&!gr[c])){for(var u=-1,h=0;h<nd.length;h++){var f=a.indexOf(nd[h]);f!==-1&&(u===-1||f<u)&&(u=f)}var I,m;u===-1?m=a.lastIndexOf("@"):m=a.lastIndexOf("@",u),m!==-1&&(I=a.slice(0,m),a=a.slice(m+1),this.auth=decodeURIComponent(I)),u=-1;for(var h=0;h<rd.length;h++){var f=a.indexOf(rd[h]);f!==-1&&(u===-1||f<u)&&(u=f)}u===-1&&(u=a.length),this.host=a.slice(0,u),a=a.slice(u),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var v=this.hostname.split(/\./),h=0,p=v.length;h<p;h++){var _=v[h];if(_&&!_.match(od)){for(var A="",b=0,P=_.length;b<P;b++)_.charCodeAt(b)>127?A+="x":A+=_[b];if(!A.match(od)){var E=v.slice(0,h),C=v.slice(h+1),x=_.match(xC);x&&(E.push(x[1]),C.unshift(x[2])),C.length&&(a="/"+C.join(".")+a),this.hostname=E.join(".");break}}}this.hostname.length>wC?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=mC.toASCII(this.hostname));var F=this.port?":"+this.port:"",R=this.hostname||"";this.host=R+F,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!PC[d])for(var h=0,p=$l.length;h<p;h++){var Z=$l[h];if(a.indexOf(Z)!==-1){var H=encodeURIComponent(Z);H===Z&&(H=escape(Z)),a=a.split(Z).join(H)}}var W=a.indexOf("#");W!==-1&&(this.hash=a.substr(W),a=a.slice(0,W));var U=a.indexOf("?");if(U!==-1?(this.search=a.substr(U),this.query=a.substr(U+1),t&&(this.query=ql.parse(this.query)),a=a.slice(0,U)):t&&(this.search="",this.query={}),a&&(this.pathname=a),gr[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",X=this.search||"";this.path=F+X}return this.href=this.format(),this};function SC(r){return typeof r=="string"&&(r=Dn(r)),r instanceof be?r.format():be.prototype.format.call(r)}be.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var t=this.protocol||"",e=this.pathname||"",i=this.hash||"",n=!1,o="";this.host?n=r+this.host:this.hostname&&(n=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(o=ql.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var s=this.search||o&&"?"+o||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||gr[t])&&n!==!1?(n="//"+(n||""),e&&e.charAt(0)!=="/"&&(e="/"+e)):n||(n=""),i&&i.charAt(0)!=="#"&&(i="#"+i),s&&s.charAt(0)!=="?"&&(s="?"+s),e=e.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),s=s.replace("#","%23"),t+n+e+s+i};function TC(r,t){return Dn(r,!1,!0).resolve(t)}be.prototype.resolve=function(r){return this.resolveObject(Dn(r,!1,!0)).format()};function EC(r,t){return r?Dn(r,!1,!0).resolveObject(t):t}be.prototype.resolveObject=function(r){if(typeof r=="string"){var t=new be;t.parse(r,!1,!0),r=t}for(var e=new be,i=Object.keys(this),n=0;n<i.length;n++){var o=i[n];e[o]=this[o]}if(e.hash=r.hash,r.href==="")return e.href=e.format(),e;if(r.slashes&&!r.protocol){for(var s=Object.keys(r),a=0;a<s.length;a++){var l=s[a];l!=="protocol"&&(e[l]=r[l])}return gr[e.protocol]&&e.hostname&&!e.pathname&&(e.pathname="/",e.path=e.pathname),e.href=e.format(),e}if(r.protocol&&r.protocol!==e.protocol){if(!gr[r.protocol]){for(var c=Object.keys(r),d=0;d<c.length;d++){var g=c[d];e[g]=r[g]}return e.href=e.format(),e}if(e.protocol=r.protocol,!r.host&&!Kl[r.protocol]){for(var p=(r.pathname||"").split("/");p.length&&!(r.host=p.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),p[0]!==""&&p.unshift(""),p.length<2&&p.unshift(""),e.pathname=p.join("/")}else e.pathname=r.pathname;if(e.search=r.search,e.query=r.query,e.host=r.host||"",e.auth=r.auth,e.hostname=r.hostname||r.host,e.port=r.port,e.pathname||e.search){var u=e.pathname||"",h=e.search||"";e.path=u+h}return e.slashes=e.slashes||r.slashes,e.href=e.format(),e}var f=e.pathname&&e.pathname.charAt(0)==="/",I=r.host||r.pathname&&r.pathname.charAt(0)==="/",m=I||f||e.host&&r.pathname,y=m,v=e.pathname&&e.pathname.split("/")||[],p=r.pathname&&r.pathname.split("/")||[],_=e.protocol&&!gr[e.protocol];if(_&&(e.hostname="",e.port=null,e.host&&(v[0]===""?v[0]=e.host:v.unshift(e.host)),e.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(p[0]===""?p[0]=r.host:p.unshift(r.host)),r.host=null),m=m&&(p[0]===""||v[0]==="")),I)e.host=r.host||r.host===""?r.host:e.host,e.hostname=r.hostname||r.hostname===""?r.hostname:e.hostname,e.search=r.search,e.query=r.query,v=p;else if(p.length)v||(v=[]),v.pop(),v=v.concat(p),e.search=r.search,e.query=r.query;else if(r.search!=null){if(_){e.host=v.shift(),e.hostname=e.host;var A=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;A&&(e.auth=A.shift(),e.hostname=A.shift(),e.host=e.hostname)}return e.search=r.search,e.query=r.query,(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!v.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var b=v.slice(-1)[0],P=(e.host||r.host||v.length>1)&&(b==="."||b==="..")||b==="",E=0,C=v.length;C>=0;C--)b=v[C],b==="."?v.splice(C,1):b===".."?(v.splice(C,1),E++):E&&(v.splice(C,1),E--);if(!m&&!y)for(;E--;E)v.unshift("..");m&&v[0]!==""&&(!v[0]||v[0].charAt(0)!=="/")&&v.unshift(""),P&&v.join("/").substr(-1)!=="/"&&v.push("");var x=v[0]===""||v[0]&&v[0].charAt(0)==="/";if(_){e.hostname=x?"":v.length?v.shift():"",e.host=e.hostname;var A=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;A&&(e.auth=A.shift(),e.hostname=A.shift(),e.host=e.hostname)}return m=m||e.host&&v.length,m&&!x&&v.unshift(""),v.length>0?e.pathname=v.join("/"):(e.pathname=null,e.path=null),(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=r.auth||e.auth,e.slashes=e.slashes||r.slashes,e.href=e.format(),e};be.prototype.parseHost=function(){var r=this.host,t=_C.exec(r);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),r=r.substr(0,r.length-t.length)),r&&(this.hostname=r)};var FC=Vi.parse=Dn;Vi.resolve=TC;Vi.resolveObject=EC;Vi.format=SC;Vi.Url=be;/*!
 * @pixi/constants - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ne;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(Ne||(Ne={}));var Cr;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(Cr||(Cr={}));var yn;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(yn||(yn={}));var ct;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(ct||(ct={}));var Ae;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Ae||(Ae={}));var Ar;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Ar||(Ar={}));var fi;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(fi||(fi={}));var Nt;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.FLOAT=5126]="FLOAT",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(Nt||(Nt={}));var Me;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(Me||(Me={}));var $e;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})($e||($e={}));var br;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON"})(br||(br={}));var ti;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(ti||(ti={}));var Fe;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(Fe||(Fe={}));var ls;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(ls||(ls={}));var De;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(De||(De={}));var ue;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(ue||(ue={}));var ki;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(ki||(ki={}));/*!
 * @pixi/utils - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ht.RETINA_PREFIX=/@([0-9\.]+)x/;ht.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var th=!1,sd="5.3.3";function MC(){th=!0}function hI(r){var t;if(!th){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=[`
 %c %c %c PixiJS `+sd+" - ✰ "+r+` ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(t=window.console).log.apply(t,e)}else window.console&&window.console.log("PixiJS "+sd+" - "+r+" - http://www.pixijs.com/");th=!0}}var Au;function cI(){return typeof Au>"u"&&(Au=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:ht.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!!(i&&i.getContextAttributes().stencil);if(i){var o=i.getExtension("WEBGL_lose_context");o&&o.loseContext()}return i=null,n}catch{return!1}}()),Au}function Wi(r,t){return t===void 0&&(t=[]),t[0]=(r>>16&255)/255,t[1]=(r>>8&255)/255,t[2]=(r&255)/255,t}function tc(r){var t=r.toString(16);return t="000000".substr(0,6-t.length)+t,"#"+t}function ec(r){return typeof r=="string"&&r[0]==="#"&&(r=r.substr(1)),parseInt(r,16)}function DC(r){return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)}function LC(){for(var r=[],t=[],e=0;e<32;e++)r[e]=e,t[e]=e;r[ct.NORMAL_NPM]=ct.NORMAL,r[ct.ADD_NPM]=ct.ADD,r[ct.SCREEN_NPM]=ct.SCREEN,t[ct.NORMAL]=ct.NORMAL_NPM,t[ct.ADD]=ct.ADD_NPM,t[ct.SCREEN]=ct.SCREEN_NPM;var i=[];return i.push(t),i.push(r),i}var ic=LC();function rc(r,t){return ic[t?1:0][r]}function fI(r,t,e,i){return e=e||new Float32Array(4),i||i===void 0?(e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t):(e[0]=r[0],e[1]=r[1],e[2]=r[2]),e[3]=t,e}function Es(r,t){if(t===1)return(t*255<<24)+r;if(t===0)return 0;var e=r>>16&255,i=r>>8&255,n=r&255;return e=e*t+.5|0,i=i*t+.5|0,n=n*t+.5|0,(t*255<<24)+(e<<16)+(i<<8)+n}function nc(r,t,e,i){return e=e||new Float32Array(4),e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255,(i||i===void 0)&&(e[0]*=t,e[1]*=t,e[2]*=t),e[3]=t,e}function dI(r,t){t===void 0&&(t=null);var e=r*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error("Out buffer length is incorrect, got "+t.length+" and expected "+e);for(var i=0,n=0;i<e;i+=6,n+=4)t[i+0]=n+0,t[i+1]=n+1,t[i+2]=n+2,t[i+3]=n+0,t[i+4]=n+2,t[i+5]=n+3;return t}function gI(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}var BC={Float32Array,Uint32Array,Int32Array,Uint8Array};function RC(r,t){for(var e=0,i=0,n={},o=0;o<r.length;o++)i+=t[o],e+=r[o].length;for(var s=new ArrayBuffer(e*4),a=null,l=0,o=0;o<r.length;o++){var c=t[o],d=r[o],g=gI(d);n[g]||(n[g]=new BC[g](s)),a=n[g];for(var u=0;u<d.length;u++){var h=(u/c|0)*i+l,f=u%c;a[h+f]=d[u]}l+=c}return new Float32Array(s)}function _n(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function eh(r){return!(r&r-1)&&!!r}function ih(r){var t=(r>65535?1:0)<<4;r>>>=t;var e=(r>255?1:0)<<3;return r>>>=e,t|=e,e=(r>15?1:0)<<2,r>>>=e,t|=e,e=(r>3?1:0)<<1,r>>>=e,t|=e,t|r>>1}function Ni(r,t,e){var i=r.length,n;if(!(t>=i||e===0)){e=t+e>i?i-t:e;var o=i-e;for(n=t;n<o;++n)r[n]=r[n+e];r.length=o}}function Ri(r){return r===0?0:r<0?-1:1}var OC=0;function Xi(){return++OC}var ad={};function rt(r,t,e){if(e===void 0&&(e=3),!ad[t]){var i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+r):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+`
Deprecated since v`+r),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+r),console.warn(i))),ad[t]=!0}}var rh={},le=Object.create(null),me=Object.create(null);function ZC(){var r;for(r in le)le[r].destroy();for(r in me)me[r].destroy()}function GC(){var r;for(r in le)delete le[r];for(r in me)delete me[r]}var nh=function(){function r(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||ht.RESOLUTION,this.resize(t,e)}return r.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},r.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},r.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(r.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0}),r}();function pI(r){var t=r.width,e=r.height,i=r.getContext("2d"),n=i.getImageData(0,0,t,e),o=n.data,s=o.length,a={top:null,left:null,right:null,bottom:null},l=null,c,d,g;for(c=0;c<s;c+=4)o[c+3]!==0&&(d=c/4%t,g=~~(c/4/t),a.top===null&&(a.top=g),(a.left===null||d<a.left)&&(a.left=d),(a.right===null||a.right<d)&&(a.right=d+1),(a.bottom===null||a.bottom<g)&&(a.bottom=g));return a.top!==null&&(t=a.right-a.left,e=a.bottom-a.top+1,l=i.getImageData(a.left,a.top,t,e)),{height:e,width:t,data:l}}var II=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function NC(r){var t=II.exec(r);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}}var bo;function vI(r,t){if(t===void 0&&(t=window.location),r.indexOf("data:")===0)return"";t=t||window.location,bo||(bo=document.createElement("a")),bo.href=r;var e=FC(bo.href),i=!e.port&&t.port===""||e.port===t.port;return e.hostname!==t.hostname||!i||e.protocol!==t.protocol?"anonymous":""}function Cn(r,t){var e=ht.RETINA_PREFIX.exec(r);return e?parseFloat(e[1]):t!==void 0?t:1}const jC=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:me,CanvasRenderTarget:nh,DATA_URI:II,EventEmitter:Rr,ProgramCache:rh,TextureCache:le,clearTextureCache:GC,correctBlendMode:rc,createIndicesForQuads:dI,decomposeDataUri:NC,deprecation:rt,destroyTextureCache:ZC,determineCrossOrigin:vI,earcut:Uh,getBufferType:gI,getResolutionOfUrl:Cn,hex2rgb:Wi,hex2string:tc,interleaveTypedArrays:RC,isMobile:Ce,isPow2:eh,isWebGLSupported:cI,log2:ih,nextPow2:_n,premultiplyBlendMode:ic,premultiplyRgba:fI,premultiplyTint:Es,premultiplyTintToRgba:nc,removeItems:Ni,rgb2hex:DC,sayHello:hI,sign:Ri,skipHello:MC,string2hex:ec,trimCanvas:pI,uid:Xi,url:Vi},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/math - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var wr=Math.PI*2,mI=180/Math.PI,yI=Math.PI/180,Rt;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(Rt||(Rt={}));var wt=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=Rt.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),o=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(o-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),o=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=o-n,this},r}(),_I=function(){function r(t,e,i){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),this.x=t,this.y=e,this.radius=i,this.type=Rt.CIRC}return r.prototype.clone=function(){return new r(this.x,this.y,this.radius)},r.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-t,o=this.y-e;return n*=n,o*=o,n+o<=i},r.prototype.getBounds=function(){return new wt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},r}(),CI=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n,this.type=Rt.ELIP}return r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return i*=i,n*=n,i+n<=1},r.prototype.getBounds=function(){return new wt(this.x-this.width,this.y-this.height,this.width,this.height)},r}(),pr=function(){function r(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var n=Array.isArray(e[0])?e[0]:e;if(typeof n[0]!="number"){for(var o=[],s=0,a=n.length;s<a;s++)o.push(n[s].x,n[s].y);n=o}this.points=n,this.type=Rt.POLY,this.closeStroke=!0}return r.prototype.clone=function(){var t=this.points.slice(),e=new r(t);return e.closeStroke=this.closeStroke,e},r.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,o=0,s=n-1;o<n;s=o++){var a=this.points[o*2],l=this.points[o*2+1],c=this.points[s*2],d=this.points[s*2+1],g=l>e!=d>e&&t<(c-a)*((e-l)/(d-l))+a;g&&(i=!i)}return i},r}(),AI=function(){function r(t,e,i,n,o){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),o===void 0&&(o=20),this.x=t,this.y=e,this.width=i,this.height=n,this.radius=o,this.type=Rt.RREC}return r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.radius)},r.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),n=e-(this.y+this.radius),o=this.radius*this.radius;if(i*i+n*n<=o||(i=t-(this.x+this.width-this.radius),i*i+n*n<=o)||(n=e-(this.y+this.height-this.radius),i*i+n*n<=o)||(i=t-(this.x+this.radius),i*i+n*n<=o))return!0}return!1},r}(),Kt=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r}(),Oi=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),jt=function(){function r(t,e,i,n,o,s){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),o===void 0&&(o=0),s===void 0&&(s=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=o,this.ty=s}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,o,s){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=o,this.ty=s,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new Kt;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new Kt;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,o=t.y;return e.x=this.d*i*n+-this.c*i*o+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*o+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,o=this.c,s=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=o*e-this.d*i,this.d=o*i+this.d*e,this.tx=s*e-this.ty*i,this.ty=s*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,o=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*o,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*o,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*o+this.ty,this},r.prototype.setTransform=function(t,e,i,n,o,s,a,l,c){return this.a=Math.cos(a+c)*o,this.b=Math.sin(a+c)*o,this.c=-Math.sin(a-l)*s,this.d=Math.cos(a-l)*s,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,o=this.d,s=-Math.atan2(-n,o),a=Math.atan2(i,e),l=Math.abs(s+a);return l<1e-5||Math.abs(wr-l)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=a),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+o*o),t.position.x=this.tx,t.position.y=this.ty,t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,o=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*o)/s,this.ty=-(t*this.ty-e*o)/s,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),Fi=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Mi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Di=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Li=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],oh=[],bI=[],wo=Math.sign;function kC(){for(var r=0;r<16;r++){var t=[];oh.push(t);for(var e=0;e<16;e++)for(var i=wo(Fi[r]*Fi[e]+Di[r]*Mi[e]),n=wo(Mi[r]*Fi[e]+Li[r]*Mi[e]),o=wo(Fi[r]*Di[e]+Di[r]*Li[e]),s=wo(Mi[r]*Di[e]+Li[r]*Li[e]),a=0;a<16;a++)if(Fi[a]===i&&Mi[a]===n&&Di[a]===o&&Li[a]===s){t.push(a);break}}for(var r=0;r<16;r++){var l=new jt;l.set(Fi[r],Mi[r],Di[r],Li[r],0,0),bI.push(l)}}kC();var Dt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(r){return Fi[r]},uY:function(r){return Mi[r]},vX:function(r){return Di[r]},vY:function(r){return Li[r]},inv:function(r){return r&8?r&15:-r&7},add:function(r,t){return oh[r][t]},sub:function(r,t){return oh[r][Dt.inv(t)]},rotate180:function(r){return r^4},isVertical:function(r){return(r&3)===2},byDirection:function(r,t){return Math.abs(r)*2<=Math.abs(t)?t>=0?Dt.S:Dt.N:Math.abs(t)*2<=Math.abs(r)?r>0?Dt.E:Dt.W:t>0?r>0?Dt.SE:Dt.SW:r>0?Dt.NE:Dt.NW},matrixAppendRotationInv:function(r,t,e,i){e===void 0&&(e=0),i===void 0&&(i=0);var n=bI[Dt.inv(t)];n.tx=e,n.ty=i,r.append(n)}},oc=function(){function r(){this.worldTransform=new jt,this.localTransform=new jt,this.position=new Oi(this.onChange,this,0,0),this.scale=new Oi(this.onChange,this,1,1),this.pivot=new Oi(this.onChange,this,0,0),this.skew=new Oi(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r}();/*!
 * @pixi/display - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ht.SORTABLE_CHILDREN=!1;var An=function(){function r(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return r.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},r.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},r.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?wt.EMPTY:(t=t||new wt(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},r.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},r.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,o=this.maxY,s=t[0],a=t[1];e=s<e?s:e,i=a<i?a:i,n=s>n?s:n,o=a>o?a:o,s=t[2],a=t[3],e=s<e?s:e,i=a<i?a:i,n=s>n?s:n,o=a>o?a:o,s=t[4],a=t[5],e=s<e?s:e,i=a<i?a:i,n=s>n?s:n,o=a>o?a:o,s=t[6],a=t[7],e=s<e?s:e,i=a<i?a:i,n=s>n?s:n,o=a>o?a:o,this.minX=e,this.minY=i,this.maxX=n,this.maxY=o},r.prototype.addFrame=function(t,e,i,n,o){this.addFrameMatrix(t.worldTransform,e,i,n,o)},r.prototype.addFrameMatrix=function(t,e,i,n,o){var s=t.a,a=t.b,l=t.c,c=t.d,d=t.tx,g=t.ty,u=this.minX,h=this.minY,f=this.maxX,I=this.maxY,m=s*e+l*i+d,y=a*e+c*i+g;u=m<u?m:u,h=y<h?y:h,f=m>f?m:f,I=y>I?y:I,m=s*n+l*i+d,y=a*n+c*i+g,u=m<u?m:u,h=y<h?y:h,f=m>f?m:f,I=y>I?y:I,m=s*e+l*o+d,y=a*e+c*o+g,u=m<u?m:u,h=y<h?y:h,f=m>f?m:f,I=y>I?y:I,m=s*n+l*o+d,y=a*n+c*o+g,u=m<u?m:u,h=y<h?y:h,f=m>f?m:f,I=y>I?y:I,this.minX=u,this.minY=h,this.maxX=f,this.maxY=I},r.prototype.addVertexData=function(t,e,i){for(var n=this.minX,o=this.minY,s=this.maxX,a=this.maxY,l=e;l<i;l+=2){var c=t[l],d=t[l+1];n=c<n?c:n,o=d<o?d:o,s=c>s?c:s,a=d>a?d:a}this.minX=n,this.minY=o,this.maxX=s,this.maxY=a},r.prototype.addVertices=function(t,e,i,n){this.addVerticesMatrix(t.worldTransform,e,i,n)},r.prototype.addVerticesMatrix=function(t,e,i,n,o,s){o===void 0&&(o=0),s===void 0&&(s=o);for(var a=t.a,l=t.b,c=t.c,d=t.d,g=t.tx,u=t.ty,h=this.minX,f=this.minY,I=this.maxX,m=this.maxY,y=i;y<n;y+=2){var v=e[y],p=e[y+1],_=a*v+c*p+g,A=d*p+l*v+u;h=Math.min(h,_-o),I=Math.max(I,_+o),f=Math.min(f,A-s),m=Math.max(m,A+s)}this.minX=h,this.minY=f,this.maxX=I,this.maxY=m},r.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,o=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>o?t.maxY:o},r.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,o=t.maxX<e.maxX?t.maxX:e.maxX,s=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=o&&n<=s){var a=this.minX,l=this.minY,c=this.maxX,d=this.maxY;this.minX=i<a?i:a,this.minY=n<l?n:l,this.maxX=o>c?o:c,this.maxY=s>d?s:d}},r.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},r.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,s=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=o&&n<=s){var a=this.minX,l=this.minY,c=this.maxX,d=this.maxY;this.minX=i<a?i:a,this.minY=n<l?n:l,this.maxX=o>c?o:c,this.maxY=s>d?s:d}},r.prototype.pad=function(t,e){t===void 0&&(t=0),e===void 0&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},r.prototype.addFramePad=function(t,e,i,n,o,s){t-=o,e-=s,i+=o,n+=s,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var sh=function(r,t){return sh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},sh(r,t)};function sc(r,t){sh(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var kt=function(r){sc(t,r);function t(){var e=r.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new oc,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new An,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return t.mixin=function(e){for(var i=Object.keys(e),n=0;n<i.length;++n){var o=i[n];Object.defineProperty(t.prototype,o,Object.getOwnPropertyDescriptor(e,o))}},t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(e,i){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new wt),i=this._boundsRect),this._bounds.getRectangle(i)},t.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new wt),e=this._localBoundsRect),this._localBounds||(this._localBounds=new An);var i=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,s=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,e);return this.parent=n,this.transform=i,this._bounds=o,this._bounds.updateID+=this._boundsID-s,a},t.prototype.toGlobal=function(e,i,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,i)},t.prototype.toLocal=function(e,i,n,o){return i&&(e=i.toGlobal(e,n,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(e,i,n,o,s,a,l,c,d){return e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),o===void 0&&(o=1),s===void 0&&(s=0),a===void 0&&(a=0),l===void 0&&(l=0),c===void 0&&(c=0),d===void 0&&(d=0),this.position.x=e,this.position.y=i,this.scale.x=n||1,this.scale.y=o||1,this.rotation=s,this.skew.x=a,this.skew.y=l,this.pivot.x=c,this.pivot.y=d,this},t.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new ac),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},t.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*mI},set:function(e){this.transform.rotation=e*yI},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){if(this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!0,i.isMask=!1}if(this._mask=e,this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!1,i.isMask=!0}},enumerable:!1,configurable:!0}),t}(Rr),ac=function(r){sc(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.sortDirty=null,e}return t}(kt);kt.prototype.displayObjectUpdateTransform=kt.prototype.updateTransform;function WC(r,t){return r.zIndex===t.zIndex?r._lastSortedIndex-t._lastSortedIndex:r.zIndex-t.zIndex}var Le=function(r){sc(t,r);function t(){var e=r.call(this)||this;return e.children=[],e.sortableChildren=ht.SORTABLE_CHILDREN,e.sortDirty=!1,e}return t.prototype.onChildrenChange=function(e){},t.prototype.addChild=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(i.length>1)for(var o=0;o<i.length;o++)this.addChild(i[o]);else{var s=i[0];s.parent&&s.parent.removeChild(s),s.parent=this,this.sortDirty=!0,s.transform._parentID=-1,this.children.push(s),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",s,this,this.children.length-1),s.emit("added",this)}return i[0]},t.prototype.addChildAt=function(e,i){if(i<0||i>this.children.length)throw new Error(e+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(i,0,e),this._boundsID++,this.onChildrenChange(i),e.emit("added",this),this.emit("childAdded",e,this,i),e},t.prototype.swapChildren=function(e,i){if(e!==i){var n=this.getChildIndex(e),o=this.getChildIndex(i);this.children[n]=i,this.children[o]=e,this.onChildrenChange(n<o?n:o)}},t.prototype.getChildIndex=function(e){var i=this.children.indexOf(e);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},t.prototype.setChildIndex=function(e,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(e);Ni(this.children,n,1),this.children.splice(i,0,e),this.onChildrenChange(i)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(i.length>1)for(var o=0;o<i.length;o++)this.removeChild(i[o]);else{var s=i[0],a=this.children.indexOf(s);if(a===-1)return null;s.parent=null,s.transform._parentID=-1,Ni(this.children,a,1),this._boundsID++,this.onChildrenChange(a),s.emit("removed",this),this.emit("childRemoved",s,this,a)}return i[0]},t.prototype.removeChildAt=function(e){var i=this.getChildAt(e);return i.parent=null,i.transform._parentID=-1,Ni(this.children,e,1),this._boundsID++,this.onChildrenChange(e),i.emit("removed",this),this.emit("childRemoved",i,this,e),i},t.prototype.removeChildren=function(e,i){e===void 0&&(e=0),i===void 0&&(i=this.children.length);var n=e,o=i,s=o-n,a;if(s>0&&s<=o){a=this.children.splice(n,s);for(var l=0;l<a.length;++l)a[l].parent=null,a[l].transform&&(a[l].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var l=0;l<a.length;++l)a[l].emit("removed",this),this.emit("childRemoved",a[l],this,l);return a}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var e=!1,i=0,n=this.children.length;i<n;++i){var o=this.children[i];o._lastSortedIndex=i,!e&&o.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(WC),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,i=this.children.length;e<i;++e){var n=this.children[e];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var i=this.children[e];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){var n=i._mask.maskObject||i._mask;n.calculateBounds(),this._bounds.addBoundsMask(i._bounds,n._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(e,i){i===void 0&&(i=!1);var n=r.prototype.getLocalBounds.call(this,e);if(!i)for(var o=0,s=this.children.length;o<s;++o){var a=this.children[o];a.visible&&a.updateTransform()}return n},t.prototype._calculateBounds=function(){},t.prototype.render=function(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else{this._render(e);for(var i=0,n=this.children.length;i<n;++i)this.children[i].render(e)}},t.prototype.renderAdvanced=function(e){e.batch.flush();var i=this.filters,n=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<i.length;o++)i[o].enabled&&this._enabledFilters.push(i[o]);this._enabledFilters.length&&e.filter.push(this,this._enabledFilters)}n&&e.mask.push(this,this._mask),this._render(e);for(var o=0,s=this.children.length;o<s;o++)this.children[o].render(e);e.batch.flush(),n&&e.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},t.prototype._render=function(e){},t.prototype.destroy=function(e){r.prototype.destroy.call(this),this.sortDirty=!1;var i=typeof e=="boolean"?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var o=0;o<n.length;++o)n[o].destroy(e)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var i=this.getLocalBounds().width;i!==0?this.scale.x=e/i:this.scale.x=1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var i=this.getLocalBounds().height;i!==0?this.scale.y=e/i:this.scale.y=1,this._height=e},enumerable:!1,configurable:!0}),t}(kt);Le.prototype.containerUpdateTransform=Le.prototype.updateTransform;/*!
 * @pixi/accessibility - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var wI={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};kt.mixin(wI);var XC=9,xo=100,HC=0,YC=0,ud=2,ld=1,UC=-1e3,zC=-1e3,VC=2,xI=function(){function r(t){this._hookDiv=null,(Ce.tablet||Ce.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width=xo+"px",e.style.height=xo+"px",e.style.position="absolute",e.style.top=HC+"px",e.style.left=YC+"px",e.style.zIndex=ud.toString(),this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(r.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),r.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width=ld+"px",e.style.height=ld+"px",e.style.position="absolute",e.style.top=UC+"px",e.style.left=zC+"px",e.style.zIndex=VC.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessability for this content",e.addEventListener("focus",function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e},r.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},r.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},r.prototype.deactivate=function(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},r.prototype.updateAccessibleObjects=function(t){if(!(!t.visible||!t.accessibleChildren)){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},r.prototype.update=function(){var t=performance.now();if(!(Ce.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),i=this.renderer.resolution,n=e.width/this.renderer.width*i,o=e.height/this.renderer.height*i,s=this.div;s.style.left=e.left+"px",s.style.top=e.top+"px",s.style.width=this.renderer.width+"px",s.style.height=this.renderer.height+"px";for(var a=0;a<this.children.length;a++){var l=this.children[a];if(l.renderId!==this.renderId)l._accessibleActive=!1,Ni(this.children,a,1),this.div.removeChild(l._accessibleDiv),this.pool.push(l._accessibleDiv),l._accessibleDiv=null,a--;else{s=l._accessibleDiv;var c=l.hitArea,d=l.worldTransform;l.hitArea?(s.style.left=(d.tx+c.x*d.a)*n+"px",s.style.top=(d.ty+c.y*d.d)*o+"px",s.style.width=c.width*d.a*n+"px",s.style.height=c.height*d.d*o+"px"):(c=l.getBounds(),this.capHitArea(c),s.style.left=c.x*n+"px",s.style.top=c.y*o+"px",s.style.width=c.width*n+"px",s.style.height=c.height*o+"px",s.title!==l.accessibleTitle&&l.accessibleTitle!==null&&(s.title=l.accessibleTitle),s.getAttribute("aria-label")!==l.accessibleHint&&l.accessibleHint!==null&&s.setAttribute("aria-label",l.accessibleHint)),(l.accessibleTitle!==s.title||l.tabIndex!==s.tabIndex)&&(s.title=l.accessibleTitle,s.tabIndex=l.tabIndex,this.debug&&this.updateDebugHTML(s))}}this.renderId++}},r.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},r.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},r.prototype.addChild=function(t){var e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=xo+"px",e.style.height=xo+"px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=ud.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title="displayObject "+t.tabIndex),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},r.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData),e.dispatchEvent(t.target.displayObject,"pointertap",e.eventData),e.dispatchEvent(t.target.displayObject,"tap",e.eventData)},r.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},r.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},r.prototype._onKeyDown=function(t){t.keyCode===XC&&this.activate()},r.prototype._onMouseMove=function(t){t.movementX===0&&t.movementY===0||this.deactivate()},r.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},r}();/*!
 * @pixi/ticker - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ht.TARGET_FPMS=.06;var je;(function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"})(je||(je={}));var bu=function(){function r(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.fn=t,this.context=e,this.priority=i,this.once=n,this.next=null,this.previous=null,this._destroyed=!1}return r.prototype.match=function(t,e){return e===void 0&&(e=null),this.fn===t&&this.context===e},r.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},r.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},r.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},r}(),Qt=function(){function r(){var t=this;this._head=new bu(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/ht.TARGET_FPMS,this.elapsedMS=1/ht.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return r.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(t,e,i){return i===void 0&&(i=je.NORMAL),this._addListener(new bu(t,e,i))},r.prototype.addOnce=function(t,e,i){return i===void 0&&(i=je.NORMAL),this._addListener(new bu(t,e,i,!0))},r.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this},r.prototype.remove=function(t,e){for(var i=this._head.next;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(r.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},r.prototype.update=function(t){t===void 0&&(t=performance.now());var e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*ht.TARGET_FPMS;for(var n=this._head,o=n.next;o;)o=o.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(r.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,ht.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"shared",{get:function(){if(!r._shared){var t=r._shared=new r;t.autoStart=!0,t._protected=!0}return r._shared},enumerable:!1,configurable:!0}),Object.defineProperty(r,"system",{get:function(){if(!r._system){var t=r._system=new r;t.autoStart=!0,t._protected=!0}return r._system},enumerable:!1,configurable:!0}),r}(),PI=function(){function r(){}return r.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,je.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Qt.shared:new Qt,t.autoStart&&this.start()},r.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},r}();/*!
 * @pixi/interaction - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ah=function(){function r(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Kt,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(r.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),r.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},r.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},r.prototype.reset=function(){this.isPrimary=!1},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var uh=function(r,t){return uh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},uh(r,t)};function JC(r,t){uh(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var SI=function(){function r(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return r.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},r.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},r}(),$o=function(){function r(t){this._pointerId=t,this._flags=r.FLAGS.NONE}return r.prototype._doSet=function(t,e){e?this._flags=this._flags|t:this._flags=this._flags&~t},Object.defineProperty(r.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"none",{get:function(){return this._flags===r.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"over",{get:function(){return(this._flags&r.FLAGS.OVER)!==0},set:function(t){this._doSet(r.FLAGS.OVER,t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rightDown",{get:function(){return(this._flags&r.FLAGS.RIGHT_DOWN)!==0},set:function(t){this._doSet(r.FLAGS.RIGHT_DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leftDown",{get:function(){return(this._flags&r.FLAGS.LEFT_DOWN)!==0},set:function(t){this._doSet(r.FLAGS.LEFT_DOWN,t)},enumerable:!1,configurable:!0}),r.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),r}(),QC=function(){function r(){this._tempPoint=new Kt}return r.prototype.recursiveFindHit=function(t,e,i,n,o){if(!e||!e.visible)return!1;var s=t.data.global;o=e.interactive||o;var a=!1,l=o,c=!0;if(e.hitArea?(n&&(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(n=!1,c=!1)),l=!1):e._mask&&n&&(e._mask.containsPoint&&e._mask.containsPoint(s)||(n=!1)),c&&e.interactiveChildren&&e.children)for(var d=e.children,g=d.length-1;g>=0;g--){var u=d[g],h=this.recursiveFindHit(t,u,i,n,l);if(h){if(!u.parent)continue;l=!1,h&&(t.target&&(n=!1),a=!0)}}return o&&(n&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(s)&&(a=!0),e.interactive&&(a&&!t.target&&(t.target=e),i&&i(t,e,!!a))),a},r.prototype.findHit=function(t,e,i,n){this.recursiveFindHit(t,e,i,n,!1)},r}(),TI={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(r){r?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};kt.mixin(TI);var Po=1,So={target:null,data:{global:null}},EI=function(r){JC(t,r);function t(e,i){var n=r.call(this)||this;return i=i||{},n.renderer=e,n.autoPreventDefault=i.autoPreventDefault!==void 0?i.autoPreventDefault:!0,n.interactionFrequency=i.interactionFrequency||10,n.mouse=new ah,n.mouse.identifier=Po,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[Po]=n.mouse,n.interactionDataPool=[],n.eventData=new SI,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.tickerAdded=!1,n.mouseOverRenderer=!1,n.supportsTouchEvents="ontouchstart"in window,n.supportsPointerEvents=!!window.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n.resolution=1,n.delayedEvents=[],n.search=new QC,n._tempDisplayObject=new ac,n._useSystemTicker=i.useSystemTicker!==void 0?i.useSystemTicker:!0,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return Object.defineProperty(t.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(e){this._useSystemTicker=e,e?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(e,i){return So.target=null,So.data.global=e,i||(i=this.lastObjectRendered),this.processInteractive(So,i,null,!0),So.target},t.prototype.setTargetElement=function(e,i){i===void 0&&(i=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=e,this.resolution=i,this.addEvents(),this.addTickerListener()},t.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(Qt.system.add(this.tickerUpdate,this,je.INTERACTION),this.tickerAdded=!0)},t.prototype.removeTickerListener=function(){this.tickerAdded&&(Qt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},t.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var e=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},t.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var e=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},t.prototype.tickerUpdate=function(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},t.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var e in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var i=this.activeInteractionData[e];if(i.originalEvent&&i.pointerType!=="touch"){var n=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(e){if(e=e||"default",this.currentCursorMode!==e){this.currentCursorMode=e;var i=this.cursorStyles[e];if(i)switch(typeof i){case"string":this.interactionDOMElement.style.cursor=i;break;case"function":i(e);break;case"object":Object.assign(this.interactionDOMElement.style,i);break}else typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.interactionDOMElement.style.cursor=e)}},t.prototype.dispatchEvent=function(e,i,n){(!n.stopPropagationHint||e===n.stopsPropagatingAt)&&(n.currentTarget=e,n.type=i,e.emit(i,n),e[i]&&e[i](n))},t.prototype.delayDispatchEvent=function(e,i,n){this.delayedEvents.push({displayObject:e,eventString:i,eventData:n})},t.prototype.mapPositionToPoint=function(e,i,n){var o;this.interactionDOMElement.parentElement?o=this.interactionDOMElement.getBoundingClientRect():o={x:0,y:0,width:0,height:0};var s=1/this.resolution;e.x=(i-o.left)*(this.interactionDOMElement.width/o.width)*s,e.y=(n-o.top)*(this.interactionDOMElement.height/o.height)*s},t.prototype.processInteractive=function(e,i,n,o){var s=this.search.findHit(e,i,n,o),a=this.delayedEvents;if(!a.length)return s;e.stopPropagationHint=!1;var l=a.length;this.delayedEvents=[];for(var c=0;c<l;c++){var d=a[c],g=d.displayObject,u=d.eventString,h=d.eventData;h.stopsPropagatingAt===g&&(h.stopPropagationHint=!0),this.dispatchEvent(g,u,h)}return s},t.prototype.onPointerDown=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var i=this.normalizeToPointerData(e);if(this.autoPreventDefault&&i[0].isNormalized){var n=e.cancelable||!("cancelable"in e);n&&e.preventDefault()}for(var o=i.length,s=0;s<o;s++){var a=i[s],l=this.getInteractionDataForPointerId(a),c=this.configureInteractionEventForDOMEvent(this.eventData,a,l);if(c.data.originalEvent=e,this.processInteractive(c,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",c),a.pointerType==="touch")this.emit("touchstart",c);else if(a.pointerType==="mouse"||a.pointerType==="pen"){var d=a.button===2;this.emit(d?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(e,i,n){var o=e.data,s=e.data.identifier;if(n){if(i.trackedPointers[s]||(i.trackedPointers[s]=new $o(s)),this.dispatchEvent(i,"pointerdown",e),o.pointerType==="touch")this.dispatchEvent(i,"touchstart",e);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var a=o.button===2;a?i.trackedPointers[s].rightDown=!0:i.trackedPointers[s].leftDown=!0,this.dispatchEvent(i,a?"rightdown":"mousedown",e)}}},t.prototype.onPointerComplete=function(e,i,n){for(var o=this.normalizeToPointerData(e),s=o.length,a=e.target!==this.interactionDOMElement?"outside":"",l=0;l<s;l++){var c=o[l],d=this.getInteractionDataForPointerId(c),g=this.configureInteractionEventForDOMEvent(this.eventData,c,d);if(g.data.originalEvent=e,this.processInteractive(g,this.lastObjectRendered,n,i||!a),this.emit(i?"pointercancel":"pointerup"+a,g),c.pointerType==="mouse"||c.pointerType==="pen"){var u=c.button===2;this.emit(u?"rightup"+a:"mouseup"+a,g)}else c.pointerType==="touch"&&(this.emit(i?"touchcancel":"touchend"+a,g),this.releaseInteractionDataForPointerId(c.pointerId))}},t.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&e.pointerType==="touch"||this.onPointerComplete(e,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(e,i){var n=e.data,o=e.data.identifier;i.trackedPointers[o]!==void 0&&(delete i.trackedPointers[o],this.dispatchEvent(i,"pointercancel",e),n.pointerType==="touch"&&this.dispatchEvent(i,"touchcancel",e))},t.prototype.onPointerUp=function(e){this.supportsTouchEvents&&e.pointerType==="touch"||this.onPointerComplete(e,!1,this.processPointerUp)},t.prototype.processPointerUp=function(e,i,n){var o=e.data,s=e.data.identifier,a=i.trackedPointers[s],l=o.pointerType==="touch",c=o.pointerType==="mouse"||o.pointerType==="pen",d=!1;if(c){var g=o.button===2,u=$o.FLAGS,h=g?u.RIGHT_DOWN:u.LEFT_DOWN,f=a!==void 0&&a.flags&h;n?(this.dispatchEvent(i,g?"rightup":"mouseup",e),f&&(this.dispatchEvent(i,g?"rightclick":"click",e),d=!0)):f&&this.dispatchEvent(i,g?"rightupoutside":"mouseupoutside",e),a&&(g?a.rightDown=!1:a.leftDown=!1)}n?(this.dispatchEvent(i,"pointerup",e),l&&this.dispatchEvent(i,"touchend",e),a&&((!c||d)&&this.dispatchEvent(i,"pointertap",e),l&&(this.dispatchEvent(i,"tap",e),a.over=!1))):a&&(this.dispatchEvent(i,"pointerupoutside",e),l&&this.dispatchEvent(i,"touchendoutside",e)),a&&a.none&&delete i.trackedPointers[s]},t.prototype.onPointerMove=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var i=this.normalizeToPointerData(e);(i[0].pointerType==="mouse"||i[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var n=i.length,o=0;o<n;o++){var s=i[o],a=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,a);l.data.originalEvent=e,this.processInteractive(l,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",l),s.pointerType==="touch"&&this.emit("touchmove",l),(s.pointerType==="mouse"||s.pointerType==="pen")&&this.emit("mousemove",l)}i[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(e,i,n){var o=e.data,s=o.pointerType==="touch",a=o.pointerType==="mouse"||o.pointerType==="pen";a&&this.processPointerOverOut(e,i,n),(!this.moveWhenInside||n)&&(this.dispatchEvent(i,"pointermove",e),s&&this.dispatchEvent(i,"touchmove",e),a&&this.dispatchEvent(i,"mousemove",e))},t.prototype.onPointerOut=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var i=this.normalizeToPointerData(e),n=i[0];n.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);s.data.originalEvent=n,this.processInteractive(s,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",s),n.pointerType==="mouse"||n.pointerType==="pen"?this.emit("mouseout",s):this.releaseInteractionDataForPointerId(o.identifier)}},t.prototype.processPointerOverOut=function(e,i,n){var o=e.data,s=e.data.identifier,a=o.pointerType==="mouse"||o.pointerType==="pen",l=i.trackedPointers[s];n&&!l&&(l=i.trackedPointers[s]=new $o(s)),l!==void 0&&(n&&this.mouseOverRenderer?(l.over||(l.over=!0,this.delayDispatchEvent(i,"pointerover",e),a&&this.delayDispatchEvent(i,"mouseover",e)),a&&this.cursor===null&&(this.cursor=i.cursor)):l.over&&(l.over=!1,this.dispatchEvent(i,"pointerout",this.eventData),a&&this.dispatchEvent(i,"mouseout",e),l.none&&delete i.trackedPointers[s]))},t.prototype.onPointerOver=function(e){var i=this.normalizeToPointerData(e),n=i[0],o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);s.data.originalEvent=n,n.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",s),(n.pointerType==="mouse"||n.pointerType==="pen")&&this.emit("mouseover",s)},t.prototype.getInteractionDataForPointerId=function(e){var i=e.pointerId,n;return i===Po||e.pointerType==="mouse"?n=this.mouse:this.activeInteractionData[i]?n=this.activeInteractionData[i]:(n=this.interactionDataPool.pop()||new ah,n.identifier=i,this.activeInteractionData[i]=n),n.copyEvent(e),n},t.prototype.releaseInteractionDataForPointerId=function(e){var i=this.activeInteractionData[e];i&&(delete this.activeInteractionData[e],i.reset(),this.interactionDataPool.push(i))},t.prototype.configureInteractionEventForDOMEvent=function(e,i,n){return e.data=n,this.mapPositionToPoint(n.global,i.clientX,i.clientY),i.pointerType==="touch"&&(i.globalX=n.global.x,i.globalY=n.global.y),n.originalEvent=i,e.reset(),e},t.prototype.normalizeToPointerData=function(e){var i=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var n=0,o=e.changedTouches.length;n<o;n++){var s=e.changedTouches[n];typeof s.button>"u"&&(s.button=e.touches.length?1:0),typeof s.buttons>"u"&&(s.buttons=e.touches.length?1:0),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,i.push(s)}else if(e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof window.PointerEvent))){var a=e;typeof a.isPrimary>"u"&&(a.isPrimary=!0),typeof a.width>"u"&&(a.width=1),typeof a.height>"u"&&(a.height=1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="mouse"),typeof a.pointerId>"u"&&(a.pointerId=Po),typeof a.pressure>"u"&&(a.pressure=.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),a.isNormalized=!0,i.push(a)}else i.push(e);return i},t.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},t}(Rr);/*!
 * @pixi/runner - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ee=function(){function r(t){this.items=[],this._name=t,this._aliasCount=0}return r.prototype.emit=function(t,e,i,n,o,s,a,l){if(arguments.length>8)throw new Error("max arguments reached");var c=this,d=c.name,g=c.items;this._aliasCount++;for(var u=0,h=g.length;u<h;u++)g[u][d](t,e,i,n,o,s,a,l);return g===this.items&&this._aliasCount--,this},r.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},r.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},r.prototype.remove=function(t){var e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},r.prototype.contains=function(t){return this.items.indexOf(t)!==-1},r.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},r.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(r.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),r}();Object.defineProperties(ee.prototype,{dispatch:{value:ee.prototype.emit},run:{value:ee.prototype.emit}});/*!
 * @pixi/core - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ht.PREFER_ENV=Ce.any?Ne.WEBGL:Ne.WEBGL2;ht.STRICT_TEXTURE_CACHE=!1;var hs=[];function uc(r,t){if(!r)return null;var e="";if(typeof r=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(var n=hs.length-1;n>=0;--n){var o=hs[n];if(o.test&&o.test(r,e))return new o(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var lh=function(r,t){return lh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},lh(r,t)};function yt(r,t){lh(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var xr=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new ee("setRealSize"),this.onUpdate=new ee("update"),this.onError=new ee("onError")}return r.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},r.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},r.prototype.resize=function(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(r.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),r.prototype.update=function(){this.destroyed||this.onUpdate.emit()},r.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),r.prototype.style=function(t,e,i){return!1},r.prototype.dispose=function(){},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},r.test=function(t,e){return!1},r}(),Fs=function(r){yt(t,r);function t(e,i){var n=this,o=i||{},s=o.width,a=o.height;if(!s||!a)throw new Error("BufferResource width or height invalid");return n=r.call(this,s,a)||this,n.data=e,n}return t.prototype.upload=function(e,i,n){var o=e.gl;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===ti.UNPACK),n.width===i.width&&n.height===i.height?o.texSubImage2D(i.target,0,0,0,i.width,i.height,i.format,i.type,this.data):(n.width=i.width,n.height=i.height,o.texImage2D(i.target,0,n.internalFormat,i.width,i.height,0,i.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(xr),$C={scaleMode:Me.NEAREST,format:Ar.RGBA,alphaMode:ti.NPM},Et=function(r){yt(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this)||this;i=i||{};var o=i.alphaMode,s=i.mipmap,a=i.anisotropicLevel,l=i.scaleMode,c=i.width,d=i.height,g=i.wrapMode,u=i.format,h=i.type,f=i.target,I=i.resolution,m=i.resourceOptions;return e&&!(e instanceof xr)&&(e=uc(e,m),e.internal=!0),n.width=c||0,n.height=d||0,n.resolution=I||ht.RESOLUTION,n.mipmap=s!==void 0?s:ht.MIPMAP_TEXTURES,n.anisotropicLevel=a!==void 0?a:ht.ANISOTROPIC_LEVEL,n.wrapMode=g||ht.WRAP_MODE,n.scaleMode=l!==void 0?l:ht.SCALE_MODE,n.format=u||Ar.RGBA,n.type=h||Nt.UNSIGNED_BYTE,n.target=f||fi.TEXTURE_2D,n.alphaMode=o!==void 0?o:ti.UNPACK,i.premultiplyAlpha!==void 0&&(n.premultiplyAlpha=i.premultiplyAlpha),n.uid=Xi(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=c>0&&d>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,i){var n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,i,n){return this.resolution=n||this.resolution,this.width=e,this.height=i,this._refreshPOT(),this.update(),this},t.prototype.setRealSize=function(e,i,n){return this.resolution=n||this.resolution,this.width=e/this.resolution,this.height=i/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=eh(this.realWidth)&&eh(this.realHeight)},t.prototype.setResolution=function(e){var i=this.resolution;return i===e?this:(this.resolution=e,this.valid&&(this.width=this.width*i/e,this.height=this.height*i/e,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete me[this.cacheId],delete le[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,i,n){n===void 0&&(n=ht.STRICT_TEXTURE_CACHE);var o=typeof e=="string",s=null;o?s=e:(e._pixiId||(e._pixiId="pixiid_"+Xi()),s=e._pixiId);var a=me[s];if(o&&n&&!a)throw new Error('The cacheId "'+s+'" does not exist in BaseTextureCache.');return a||(a=new t(e,i),a.cacheId=s,t.addToCache(a,s)),a},t.fromBuffer=function(e,i,n,o){e=e||new Float32Array(i*n*4);var s=new Fs(e,{width:i,height:n}),a=e instanceof Float32Array?Nt.FLOAT:Nt.UNSIGNED_BYTE;return new t(s,Object.assign($C,o||{width:i,height:n,type:a}))},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),me[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),me[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=me[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete me[e],i}}else if(e&&e.textureCacheIds){for(var o=0;o<e.textureCacheIds.length;++o)delete me[e.textureCacheIds[o]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(Rr),lc=function(r){yt(t,r);function t(e,i){var n=this,o=i||{},s=o.width,a=o.height;n=r.call(this,s,a)||this,n.items=[],n.itemDirtyIds=[];for(var l=0;l<e;l++){var c=new Et;n.items.push(c),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return t.prototype.initFromArray=function(e,i){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof xr?this.addResourceAt(e[n],n):this.addResourceAt(uc(e[n],i),n))},t.prototype.dispose=function(){for(var e=0,i=this.length;e<i;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[i].setResource(e),this},t.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");r.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},t.prototype.unbind=function(e){r.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.items.map(function(o){return o.resource}).filter(function(o){return o}),n=i.map(function(o){return o.load()});return this._load=Promise.all(n).then(function(){var o=e.items[0],s=o.realWidth,a=o.realHeight;return e.resize(s,a),Promise.resolve(e)}),this._load},t}(xr),FI=function(r){yt(t,r);function t(e,i){var n=this,o=i||{},s=o.width,a=o.height,l,c;return Array.isArray(e)?(l=e,c=e.length):c=e,n=r.call(this,c,{width:s,height:a})||this,l&&n.initFromArray(l,i),n}return t.prototype.addBaseTextureAt=function(e,i){if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=fi.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,i,n){var o=this,s=o.length,a=o.itemDirtyIds,l=o.items,c=e.gl;n.dirtyId<0&&c.texImage3D(c.TEXTURE_2D_ARRAY,0,i.format,this._width,this._height,s,0,i.format,i.type,null);for(var d=0;d<s;d++){var g=l[d];a[d]<g.dirtyId&&(a[d]=g.dirtyId,g.valid&&c.texSubImage3D(c.TEXTURE_2D_ARRAY,0,0,0,d,g.resource.width,g.resource.height,1,i.format,i.type,g.resource.source))}return!0},t}(lc),ei=function(r){yt(t,r);function t(e){var i=this,n=e,o=n.naturalWidth||n.videoWidth||n.width,s=n.naturalHeight||n.videoHeight||n.height;return i=r.call(this,o,s)||this,i.source=e,i.noSubImage=!1,i}return t.crossOrigin=function(e,i,n){n===void 0&&i.indexOf("data:")!==0?e.crossOrigin=vI(i):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")},t.prototype.upload=function(e,i,n,o){var s=e.gl,a=i.realWidth,l=i.realHeight;return o=o||this.source,s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===ti.UNPACK),!this.noSubImage&&i.target===s.TEXTURE_2D&&n.width===a&&n.height===l?s.texSubImage2D(s.TEXTURE_2D,0,0,0,i.format,i.type,o):(n.width=a,n.height=l,s.texImage2D(i.target,0,i.format,i.format,i.type,o)),!0},t.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(i,n),r.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(xr),hc=function(r){yt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.test=function(e){var i=window.OffscreenCanvas;return i&&e instanceof i?!0:e instanceof HTMLCanvasElement},t}(ei),MI=function(r){yt(t,r);function t(e,i){var n=this,o=i||{},s=o.width,a=o.height,l=o.autoLoad,c=o.linkBaseTexture;if(e&&e.length!==t.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");n=r.call(this,6,{width:s,height:a})||this;for(var d=0;d<t.SIDES;d++)n.items[d].target=fi.TEXTURE_CUBE_MAP_POSITIVE_X+d;return n.linkBaseTexture=c!==!1,e&&n.initFromArray(e,i),l!==!1&&n.load(),n}return t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=fi.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=fi.TEXTURE_CUBE_MAP_POSITIVE_X+i,e.parentTextureArray=this.baseTexture,this.items[i]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[i]=e,this},t.prototype.upload=function(e,i,n){for(var o=this.itemDirtyIds,s=0;s<t.SIDES;s++){var a=this.items[s];o[s]<a.dirtyId&&(a.valid&&a.resource?(a.resource.upload(e,a,n),o[s]=a.dirtyId):o[s]<-1&&(e.gl.texImage2D(a.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),o[s]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(lc),cc=function(r){yt(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var o=new Image;ei.crossOrigin(o,e,i.crossorigin),o.src=e,e=o}return n=r.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:ht.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,i.premultiplyAlpha!==void 0&&(n.premultiplyAlpha=i.premultiplyAlpha),n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(e){var i=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(n,o){var s=i.source;i.url=s.src;var a=function(){i.destroyed||(s.onload=null,s.onerror=null,i.resize(s.width,s.height),i._load=null,i.createBitmap?n(i.process()):n(i))};s.complete&&s.src?a():(s.onload=a,s.onerror=function(l){o(l),i.onError.emit(l)})}),this._load)},t.prototype.process=function(){var e=this,i=this.source;return this._process!==null?this._process:this.bitmap!==null||!window.createImageBitmap?Promise.resolve(this):(this._process=window.createImageBitmap(i,0,0,i.width,i.height,{premultiplyAlpha:this.alphaMode===ti.UNPACK?"premultiply":"none"}).then(function(n){return e.destroyed?Promise.reject():(e.bitmap=n,e.update(),e._process=null,Promise.resolve(e))}),this._process)},t.prototype.upload=function(e,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return r.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(r.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var o=!0,s=i._glTextures;for(var a in s){var l=s[a];if(l!==n&&l.dirtyId!==i.dirtyId){o=!1;break}}o&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,r.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},t}(ei),DI=function(r){yt(t,r);function t(e,i){var n=this;return i=i||{},n=r.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=e,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(i){if(e._resolve=function(){e.resize(e.source.width,e.source.height),i(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var e=this,i=new Image;ei.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){e._resolve&&(i.onerror=null,e.onError.emit(n))},i.onload=function(){if(e._resolve){var n=i.width,o=i.height;if(!n||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var s=n*e.scale,a=o*e.scale;(e._overrideWidth||e._overrideHeight)&&(s=e._overrideWidth||e._overrideHeight/o*n,a=e._overrideHeight||e._overrideWidth/n*o),s=Math.round(s),a=Math.round(a);var l=e.source;l.width=s,l.height=a,l._pixiId="canvas_"+Xi(),l.getContext("2d").drawImage(i,0,0,n,o,0,0,s,a),e._resolve(),e._resolve=null}}},t.getSize=function(e){var i=t.SVG_SIZE.exec(e),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},t.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,i){return i==="svg"||typeof e=="string"&&e.indexOf("data:image/svg+xml;base64")===0||typeof e=="string"&&e.indexOf("<svg")===0},t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(ei),LI=function(r){yt(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var s=e[0].src||e[0];ei.crossOrigin(o,s,i.crossorigin);for(var a=0;a<e.length;++a){var l=document.createElement("source"),c=e[a],d=c.src,g=c.mime;d=d||e[a];var u=d.split("?").shift().toLowerCase(),h=u.substr(u.lastIndexOf(".")+1);g=g||t.MIME_TYPES[h]||"video/"+h,l.src=d,l.type=g,o.appendChild(l)}e=o}return n=r.call(this,e)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return t.prototype.update=function(e){if(!this.destroyed){var i=Qt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(r.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){e.valid?n(e):(e._resolve=n,i.load())}),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&e.paused===!1&&e.ended===!1&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return e.readyState===3||e.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Qt.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Qt.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(e.videoWidth,e.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&Qt.shared.remove(this.update,this);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),r.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Qt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Qt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,i){return e instanceof HTMLVideoElement||t.TYPES.indexOf(i)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(ei),BI=function(r){yt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.test=function(e){return!!window.createImageBitmap&&e instanceof ImageBitmap},t}(ei);hs.push(cc,BI,hc,LI,DI,Fs,MI,FI);var KC={Resource:xr,BaseImageResource:ei,INSTALLED:hs,autoDetectResource:uc,AbstractMultiResource:lc,ArrayResource:FI,BufferResource:Fs,CanvasResource:hc,CubeResource:MI,ImageResource:cc,SVGResource:DI,VideoResource:LI,ImageBitmapResource:BI},ce=function(){function r(t){this.renderer=t}return r.prototype.destroy=function(){this.renderer=null},r}(),qC=function(r){yt(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.upload=function(e,i,n){var o=e.gl;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===ti.UNPACK),n.width===i.width&&n.height===i.height?o.texSubImage2D(i.target,0,0,0,i.width,i.height,i.format,i.type,this.data):(n.width=i.width,n.height=i.height,o.texImage2D(i.target,0,e.context.webGLVersion===1?o.DEPTH_COMPONENT:o.DEPTH_COMPONENT16,i.width,i.height,0,i.format,i.type,this.data)),!0},t}(Fs),cs=function(){function r(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new ee("disposeFramebuffer"),this.multisample=ki.NONE}return Object.defineProperty(r.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),r.prototype.addColorTexture=function(t,e){return t===void 0&&(t=0),this.colorTextures[t]=e||new Et(null,{scaleMode:Me.NEAREST,resolution:1,mipmap:br.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Et(new qC(null,{width:this.width,height:this.height}),{scaleMode:Me.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:br.OFF,format:Ar.DEPTH_COMPONENT,type:Nt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],o=n.resolution;n.setSize(t/o,e/o)}if(this.depthTexture){var o=this.depthTexture.resolution;this.depthTexture.setSize(t/o,e/o)}}},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},r}(),hn=function(r){yt(t,r);function t(e){var i=this;if(typeof e=="number"){var n=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];e={width:n,height:o,scaleMode:s,resolution:a}}i=r.call(this,null,e)||this;var l=e||{},c=l.width,d=l.height;return i.mipmap=0,i.width=Math.ceil(c)||100,i.height=Math.ceil(d)||100,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new cs(i.width*i.resolution,i.height*i.resolution).addColorTexture(0,i),i.maskStack=[],i.filterStack=[{}],i}return t.prototype.resize=function(e,i){e=Math.ceil(e),i=Math.ceil(i),this.framebuffer.resize(e*this.resolution,i*this.resolution)},t.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(Et),fc=function(){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return r.prototype.set=function(t,e,i){var n=e.width,o=e.height;if(i){var s=t.width/2/n,a=t.height/2/o,l=t.x/n+s,c=t.y/o+a;i=Dt.add(i,Dt.NW),this.x0=l+s*Dt.uX(i),this.y0=c+a*Dt.uY(i),i=Dt.add(i,2),this.x1=l+s*Dt.uX(i),this.y1=c+a*Dt.uY(i),i=Dt.add(i,2),this.x2=l+s*Dt.uX(i),this.y2=c+a*Dt.uY(i),i=Dt.add(i,2),this.x3=l+s*Dt.uX(i),this.y3=c+a*Dt.uY(i)}else this.x0=t.x/n,this.y0=t.y/o,this.x1=(t.x+t.width)/n,this.y1=t.y/o,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/o,this.x3=t.x/n,this.y3=(t.y+t.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},r}(),hd=new fc,vt=function(r){yt(t,r);function t(e,i,n,o,s,a){var l=r.call(this)||this;if(l.noFrame=!1,i||(l.noFrame=!0,i=new wt(0,0,1,1)),e instanceof t&&(e=e.baseTexture),l.baseTexture=e,l._frame=i,l.trim=o,l.valid=!1,l._uvs=hd,l.uvMatrix=null,l.orig=n||i,l._rotate=Number(s||0),s===!0)l._rotate=2;else if(l._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=a?new Kt(a.x,a.y):new Kt(0,0),l._updateID=0,l.textureCacheIds=[],e.valid?l.noFrame?e.valid&&l.onBaseTextureUpdated(e):l.frame=i:e.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&e.on("update",l.onBaseTextureUpdated,l),l}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var i=this.baseTexture;i&&i.url&&le[i.url]&&t.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){return new t(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},t.prototype.updateUvs=function(){this._uvs===hd&&(this._uvs=new fc),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,i,n){i===void 0&&(i={}),n===void 0&&(n=ht.STRICT_TEXTURE_CACHE);var o=typeof e=="string",s=null;o?s=e:(e._pixiId||(e._pixiId="pixiid_"+Xi()),s=e._pixiId);var a=le[s];if(o&&n&&!a)throw new Error('The cacheId "'+s+'" does not exist in TextureCache.');return a||(i.resolution||(i.resolution=Cn(e)),a=new t(new Et(e,i)),a.baseTexture.cacheId=s,Et.addToCache(a.baseTexture,s),t.addToCache(a,s)),a},t.fromURL=function(e,i){var n=Object.assign({autoLoad:!1},i?.resourceOptions),o=t.from(e,Object.assign({resourceOptions:n},i),!1),s=o.baseTexture.resource;return o.baseTexture.valid?Promise.resolve(o):s.load().then(function(){return Promise.resolve(o)})},t.fromBuffer=function(e,i,n,o){return new t(Et.fromBuffer(e,i,n,o))},t.fromLoader=function(e,i,n){var o=new cc(e);o.url=i;var s=new Et(o,{scaleMode:ht.SCALE_MODE,resolution:Cn(i)}),a=new t(s);return n||(n=i),Et.addToCache(a.baseTexture,n),t.addToCache(a,n),n!==i&&(Et.addToCache(a.baseTexture,i),t.addToCache(a,i)),a},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),le[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),le[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=le[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete le[e],i}}else if(e&&e.textureCacheIds){for(var o=0;o<e.textureCacheIds.length;++o)le[e.textureCacheIds[o]]===e&&delete le[e.textureCacheIds[o]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var i=e.x,n=e.y,o=e.width,s=e.height,a=i+o>this.baseTexture.width,l=n+s>this.baseTexture.height;if(a||l){var c=a&&l?"and":"or",d="X: "+i+" + "+o+" = "+(i+o)+" > "+this.baseTexture.width,g="Y: "+n+" + "+s+" = "+(n+s)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(d+" "+c+" "+g))}this.valid=o&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(Rr);function tA(){var r=document.createElement("canvas");r.width=16,r.height=16;var t=r.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new vt(new Et(new hc(r)))}function Ms(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}vt.EMPTY=new vt(new Et);Ms(vt.EMPTY);Ms(vt.EMPTY.baseTexture);vt.WHITE=tA();Ms(vt.WHITE);Ms(vt.WHITE.baseTexture);var Hi=function(r){yt(t,r);function t(e,i){var n=this,o=null;if(!(e instanceof hn)){var s=arguments[1],a=arguments[2],l=arguments[3],c=arguments[4];console.warn("Please use RenderTexture.create("+s+", "+a+") instead of the ctor directly."),o=arguments[0],i=null,e=new hn({width:s,height:a,scaleMode:l,resolution:c})}return n=r.call(this,e,i)||this,n.legacyRenderer=o,n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i,n){n===void 0&&(n=!0),e=Math.ceil(e),i=Math.ceil(i),this.valid=e>0&&i>0,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=i,n&&this.baseTexture.resize(e,i),this.updateUvs()},t.prototype.setResolution=function(e){var i=this.baseTexture;i.resolution!==e&&(i.setResolution(e),this.resize(i.width,i.height,!1))},t.create=function(e){return typeof e=="number"&&(e={width:e,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new t(new hn(e))},t}(vt),RI=function(){function r(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return r.prototype.createTexture=function(t,e){var i=new hn(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new Hi(i)},r.prototype.getOptimalTexture=function(t,e,i){i===void 0&&(i=1);var n=r.SCREEN_KEY;t*=i,e*=i,(!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight)&&(t=_n(t),e=_n(e),n=(t&65535)<<16|e&65535),this.texturePool[n]||(this.texturePool[n]=[]);var o=this.texturePool[n].pop();return o||(o=this.createTexture(t,e)),o.filterPoolKey=n,o.setResolution(i),o},r.prototype.getFilterTexture=function(t,e){var i=this.getOptimalTexture(t.width,t.height,e||t.resolution);return i.filterFrame=t.filterFrame,i},r.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},r.prototype.returnFilterTexture=function(t){this.returnTexture(t)},r.prototype.clear=function(t){if(t=t!==!1,t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},r.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){var e=r.SCREEN_KEY,i=this.texturePool[e];if(this.enableFullScreen=t.width>0&&t.height>0,i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},r.SCREEN_KEY="screen",r}(),hh=function(){function r(t,e,i,n,o,s,a){e===void 0&&(e=0),i===void 0&&(i=!1),n===void 0&&(n=5126),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=o,this.start=s,this.instance=a}return r.prototype.destroy=function(){this.buffer=null},r.from=function(t,e,i,n,o){return new r(t,e,i,n,o)},r}(),eA=0,Jt=function(){function r(t,e,i){e===void 0&&(e=!0),i===void 0&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=eA++,this.disposeRunner=new ee("disposeBuffer")}return r.prototype.update=function(t){this.data=t||this.data,this._updateID++},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.data=null},r.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new r(t)},r}();function OI(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}var iA={Float32Array,Uint32Array,Int32Array,Uint8Array};function rA(r,t){for(var e=0,i=0,n={},o=0;o<r.length;o++)i+=t[o],e+=r[o].length;for(var s=new ArrayBuffer(e*4),a=null,l=0,o=0;o<r.length;o++){var c=t[o],d=r[o],g=OI(d);n[g]||(n[g]=new iA[g](s)),a=n[g];for(var u=0;u<d.length;u++){var h=(u/c|0)*i+l,f=u%c;a[h+f]=d[u]}l+=c}return new Float32Array(s)}var cd={5126:4,5123:2,5121:1},nA=0,oA={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Gr=function(){function r(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=nA++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new ee("disposeGeometry"),this.refCount=0}return r.prototype.addAttribute=function(t,e,i,n,o,s,a,l){if(i===void 0&&(i=0),n===void 0&&(n=!1),l===void 0&&(l=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Jt||(e instanceof Array&&(e=new Float32Array(e)),e=new Jt(e));var c=t.split("|");if(c.length>1){for(var d=0;d<c.length;d++)this.addAttribute(c[d],e,i,n,o);return this}var g=this.buffers.indexOf(e);return g===-1&&(this.buffers.push(e),g=this.buffers.length-1),this.attributes[t]=new hh(g,i,n,o,s,a,l),this.instanced=this.instanced||l,this},r.prototype.getAttribute=function(t){return this.attributes[t]},r.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},r.prototype.addIndex=function(t){return t instanceof Jt||(t instanceof Array&&(t=new Uint16Array(t)),t=new Jt(t)),t.index=!0,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},r.prototype.getIndex=function(){return this.indexBuffer},r.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],e=[],i=new Jt,n;for(n in this.attributes){var o=this.attributes[n],s=this.buffers[o.buffer];t.push(s.data),e.push(o.size*cd[o.type]/4),o.buffer=0}for(i.data=rA(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},r.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t],i=this.buffers[e.buffer];return i.data.length/(e.stride/4||e.size)}return 0},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},r.prototype.clone=function(){for(var t=new r,e=0;e<this.buffers.length;e++)t.buffers[e]=new Jt(this.buffers[e].data.slice(0));for(var e in this.attributes){var i=this.attributes[e];t.attributes[e]=new hh(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},r.merge=function(t){for(var e=new r,i=[],n=[],o=[],s,a=0;a<t.length;a++){s=t[a];for(var l=0;l<s.buffers.length;l++)n[l]=n[l]||0,n[l]+=s.buffers[l].data.length,o[l]=0}for(var a=0;a<s.buffers.length;a++)i[a]=new oA[OI(s.buffers[a].data)](n[a]),e.buffers[a]=new Jt(i[a]);for(var a=0;a<t.length;a++){s=t[a];for(var l=0;l<s.buffers.length;l++)i[l].set(s.buffers[l].data,o[l]),o[l]+=s.buffers[l].data.length}if(e.attributes=s.attributes,s.indexBuffer){e.indexBuffer=e.buffers[s.buffers.indexOf(s.indexBuffer)],e.indexBuffer.index=!0;for(var c=0,d=0,g=0,u=0,a=0;a<s.buffers.length;a++)if(s.buffers[a]!==s.indexBuffer){u=a;break}for(var a in s.attributes){var h=s.attributes[a];(h.buffer|0)===u&&(d+=h.size*cd[h.type]/4)}for(var a=0;a<t.length;a++){for(var f=t[a].indexBuffer.data,l=0;l<f.length;l++)e.indexBuffer.data[l+g]+=c;c+=s.buffers[u].data.length/d,g+=f.length}}return e},r}(),ZI=function(r){yt(t,r);function t(){var e=r.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return t}(Gr),dc=function(r){yt(t,r);function t(){var e=r.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Jt(e.vertices),e.uvBuffer=new Jt(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return t.prototype.map=function(e,i){var n=0,o=0;return this.uvs[0]=n,this.uvs[1]=o,this.uvs[2]=n+i.width/e.width,this.uvs[3]=o,this.uvs[4]=n+i.width/e.width,this.uvs[5]=o+i.height/e.height,this.uvs[6]=n,this.uvs[7]=o+i.height/e.height,n=i.x,o=i.y,this.vertices[0]=n,this.vertices[1]=o,this.vertices[2]=n+i.width,this.vertices[3]=o,this.vertices[4]=n+i.width,this.vertices[5]=o+i.height,this.vertices[6]=n,this.vertices[7]=o+i.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(Gr),sA=0,di=function(){function r(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=sA++,this.static=!!e}return r.prototype.update=function(){this.dirtyId++},r.prototype.add=function(t,e,i){this.uniforms[t]=new r(e,i)},r.from=function(t,e){return new r(t,e)},r}(),GI=function(){function r(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new wt,this.destinationFrame=new wt,this.filters=[]}return r.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},r}(),NI=function(r){yt(t,r);function t(e){var i=r.call(this,e)||this;return i.defaultFilterStack=[{}],i.texturePool=new RI,i.texturePool.setScreenSize(e.view),i.statePool=[],i.quad=new ZI,i.quadUv=new dc,i.tempRect=new wt,i.activeState={},i.globalUniforms=new di({outputFrame:i.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),i.forceClear=!1,i.useMaxPadding=!1,i}return t.prototype.push=function(e,i){for(var n=this.renderer,o=this.defaultFilterStack,s=this.statePool.pop()||new GI,a=i[0].resolution,l=i[0].padding,c=i[0].autoFit,d=i[0].legacy,g=1;g<i.length;g++){var u=i[g];a=Math.min(a,u.resolution),l=this.useMaxPadding?Math.max(l,u.padding):l+u.padding,c=c||u.autoFit,d=d||u.legacy}o.length===1&&(this.defaultFilterStack[0].renderTexture=n.renderTexture.current),o.push(s),s.resolution=a,s.legacy=d,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(l),c&&s.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),s.sourceFrame.ceil(a),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,a),s.filters=i,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var h=this.tempRect;h.width=s.sourceFrame.width,h.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,n.renderTexture.bind(s.renderTexture,s.sourceFrame,h),n.renderTexture.clear()},t.prototype.pop=function(){var e=this.defaultFilterStack,i=e.pop(),n=i.filters;this.activeState=i;var o=this.globalUniforms.uniforms;o.outputFrame=i.sourceFrame,o.resolution=i.resolution;var s=o.inputSize,a=o.inputPixel,l=o.inputClamp;if(s[0]=i.destinationFrame.width,s[1]=i.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=s[0]*i.resolution,a[1]=s[1]*i.resolution,a[2]=1/a[0],a[3]=1/a[1],l[0]=.5*a[2],l[1]=.5*a[3],l[2]=i.sourceFrame.width*s[2]-.5*a[2],l[3]=i.sourceFrame.height*s[3]-.5*a[3],i.legacy){var c=o.filterArea;c[0]=i.destinationFrame.width,c[1]=i.destinationFrame.height,c[2]=i.sourceFrame.x,c[3]=i.sourceFrame.y,o.filterClamp=o.inputClamp}this.globalUniforms.update();var d=e[e.length-1];if(i.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,i.renderTexture,d.renderTexture,Fe.BLEND,i),this.returnFilterTexture(i.renderTexture);else{var g=i.renderTexture,u=this.getOptimalFilterTexture(g.width,g.height,i.resolution);u.filterFrame=g.filterFrame;var h=0;for(h=0;h<n.length-1;++h){n[h].apply(this,g,u,Fe.CLEAR,i);var f=g;g=u,u=f}n[h].apply(this,g,d.renderTexture,Fe.BLEND,i),this.returnFilterTexture(g),this.returnFilterTexture(u)}i.clear(),this.statePool.push(i)},t.prototype.bindAndClear=function(e,i){if(i===void 0&&(i=Fe.CLEAR),e&&e.filterFrame){var n=this.tempRect;n.width=e.filterFrame.width,n.height=e.filterFrame.height,this.renderer.renderTexture.bind(e,e.filterFrame,n)}else this.renderer.renderTexture.bind(e);typeof i=="boolean"&&(i=i?Fe.CLEAR:Fe.BLEND,rt("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(i===Fe.CLEAR||i===Fe.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},t.prototype.applyFilter=function(e,i,n,o){var s=this.renderer;this.bindAndClear(n,o),e.uniforms.uSampler=i,e.uniforms.filterGlobals=this.globalUniforms,s.state.set(e.state),s.shader.bind(e),e.legacy?(this.quadUv.map(i._frame,i.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Ae.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Ae.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(e,i){var n=this.activeState,o=n.sourceFrame,s=n.destinationFrame,a=i._texture.orig,l=e.set(s.width,0,0,s.height,o.x,o.y),c=i.worldTransform.copyTo(jt.TEMP_MATRIX);return c.invert(),l.prepend(c),l.scale(1/a.width,1/a.height),l.translate(i.anchor.x,i.anchor.y),l},t.prototype.destroy=function(){this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(e,i,n){return n===void 0&&(n=1),this.texturePool.getOptimalTexture(e,i,n)},t.prototype.getFilterTexture=function(e,i){if(typeof e=="number"){var n=e;e=i,i=n}e=e||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(e.width,e.height,i||e.resolution);return o.filterFrame=e.filterFrame,o},t.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t}(ce),Ln=function(){function r(t){this.renderer=t}return r.prototype.flush=function(){},r.prototype.destroy=function(){this.renderer=null},r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.render=function(t){},r}(),jI=function(r){yt(t,r);function t(e){var i=r.call(this,e)||this;return i.emptyRenderer=new Ln(e),i.currentRenderer=i.emptyRenderer,i}return t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(e,i){for(var n=this.renderer.texture.boundTextures,o=i-1;o>=0;--o)e[o]=n[o]||null,e[o]&&(e[o]._batchLocation=o)},t.prototype.boundArray=function(e,i,n,o){for(var s=e.elements,a=e.ids,l=e.count,c=0,d=0;d<l;d++){var g=s[d],u=g._batchLocation;if(u>=0&&u<o&&i[u]===g){a[d]=u;continue}for(;c<o;){var h=i[c];if(h&&h._batchEnabled===n&&h._batchLocation===c){c++;continue}a[d]=c,g._batchLocation=c,i[c]=g;break}}},t}(ce),fd=0,kI=function(r){yt(t,r);function t(e){var i=r.call(this,e)||this;return i.webGLVersion=1,i.extensions={},i.supports={uint32Indices:!1},i.handleContextLost=i.handleContextLost.bind(i),i.handleContextRestored=i.handleContextRestored.bind(i),e.view.addEventListener("webglcontextlost",i.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",i.handleContextRestored,!1),i}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=fd++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=fd++,this.renderer.runners.contextChange.emit(e)},t.prototype.initFromOptions=function(e){var i=this.createContext(this.renderer.view,e);this.initFromContext(i)},t.prototype.createContext=function(e,i){var n;if(ht.PREFER_ENV>=Ne.WEBGL2&&(n=e.getContext("webgl2",i)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",i)||e.getContext("experimental-webgl",i),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var e=this.gl;this.webGLVersion===1?Object.assign(this.extensions,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,{anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:e.getExtension("EXT_color_buffer_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear")})},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var e=this.renderer.view;e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(e){var i=e.getContextAttributes();i.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n="WebGL2RenderingContext"in window&&e instanceof window.WebGL2RenderingContext||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(ce),WI=function(){function r(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=ki.NONE,this.msaaBuffer=null,this.blitFramebuffer=null}return r}(),aA=new wt,XI=function(r){yt(t,r);function t(e){var i=r.call(this,e)||this;return i.managedFramebuffers=[],i.unknownFramebuffer=new cs(10,10),i.msaaSamples=null,i}return t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new wt,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var i=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;ht.PREFER_ENV===Ne.WEBGL_LEGACY&&(i=null,n=null),i?e.drawBuffers=function(o){return i.drawBuffersWEBGL(o)}:(this.hasMRT=!1,e.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},t.prototype.bind=function(e,i){var n=this.gl;if(e){var o=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,n.bindFramebuffer(n.FRAMEBUFFER,o.framebuffer)),o.dirtyId!==e.dirtyId&&(o.dirtyId=e.dirtyId,o.dirtyFormat!==e.dirtyFormat?(o.dirtyFormat=e.dirtyFormat,this.updateFramebuffer(e)):o.dirtySize!==e.dirtySize&&(o.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var s=0;s<e.colorTextures.length;s++){var a=e.colorTextures[s];this.renderer.texture.unbind(a.parentTextureArray||a)}e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),i?this.setViewport(i.x,i.y,i.width,i.height):this.setViewport(0,0,e.width,e.height)}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),i?this.setViewport(i.x,i.y,i.width,i.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(e,i,n,o){var s=this.viewport;(s.width!==n||s.height!==o||s.x!==e||s.y!==i)&&(s.x=e,s.y=i,s.width=n,s.height=o,this.gl.viewport(e,i,n,o))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(e,i,n,o,s){s===void 0&&(s=yn.COLOR|yn.DEPTH);var a=this.gl;a.clearColor(e,i,n,o),a.clear(s)},t.prototype.initFramebuffer=function(e){var i=this.gl,n=new WI(i.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n},t.prototype.resizeFramebuffer=function(e){var i=this.gl,n=e.glFramebuffers[this.CONTEXT_UID];n.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e.width,e.height));for(var o=e.colorTextures,s=0;s<o.length;s++)this.renderer.texture.bind(o[s],0);e.depthTexture&&this.renderer.texture.bind(e.depthTexture,0)},t.prototype.updateFramebuffer=function(e){var i=this.gl,n=e.glFramebuffers[this.CONTEXT_UID],o=e.colorTextures,s=o.length;i.drawBuffers||(s=Math.min(s,1)),n.multisample>1&&(n.msaaBuffer=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer));for(var a=[],l=0;l<s;l++)if(!(l===0&&n.multisample>1)){var c=e.colorTextures[l],d=c.parentTextureArray||c;this.renderer.texture.bind(d,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,c.target,d._glTextures[this.CONTEXT_UID].texture,0),a.push(i.COLOR_ATTACHMENT0+l)}if(a.length>1&&i.drawBuffers(a),e.depthTexture){var g=this.writeDepthTexture;if(g){var u=e.depthTexture;this.renderer.texture.bind(u,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,u._glTextures[this.CONTEXT_UID].texture,0)}}!n.stencil&&(e.stencil||e.depth)&&(n.stencil=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e.width,e.height),e.depthTexture||i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil))},t.prototype.detectSamples=function(e){var i=this.msaaSamples,n=ki.NONE;if(e<=1||i===null)return n;for(var o=0;o<i.length;o++)if(i[o]<=e){n=i[o];break}return n===1&&(n=ki.NONE),n},t.prototype.blit=function(e,i,n){var o=this,s=o.current,a=o.renderer,l=o.gl,c=o.CONTEXT_UID;if(a.context.webGLVersion===2&&s){var d=s.glFramebuffers[c];if(d){if(!e){if(d.multisample<=1)return;d.blitFramebuffer||(d.blitFramebuffer=new cs(s.width,s.height),d.blitFramebuffer.addColorTexture(0,s.colorTextures[0])),e=d.blitFramebuffer,e.width=s.width,e.height=s.height}i||(i=aA,i.width=s.width,i.height=s.height),n||(n=i);var g=i.width===n.width&&i.height===n.height;this.bind(e),l.bindFramebuffer(l.READ_FRAMEBUFFER,d.framebuffer),l.blitFramebuffer(i.x,i.y,i.width,i.height,n.x,n.y,n.width,n.height,l.COLOR_BUFFER_BIT,g?l.NEAREST:l.LINEAR)}}},t.prototype.disposeFramebuffer=function(e,i){var n=e.glFramebuffers[this.CONTEXT_UID],o=this.gl;if(n){delete e.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),i||(o.deleteFramebuffer(n.framebuffer),n.stencil&&o.deleteRenderbuffer(n.stencil))}},t.prototype.disposeAll=function(e){var i=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<i.length;n++)this.disposeFramebuffer(i[n],e)},t.prototype.forceStencil=function(){var e=this.current;if(e){var i=e.glFramebuffers[this.CONTEXT_UID];if(!(!i||i.stencil)){e.enableStencil();var n=e.width,o=e.height,s=this.gl,a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,n,o),i.stencil=a,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new wt},t}(ce),uA=function(){function r(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return r}(),wu={5126:4,5123:2,5121:1},HI=function(r){yt(t,r);function t(e){var i=r.call(this,e)||this;return i._activeGeometry=null,i._activeVao=null,i.hasVao=!0,i.hasInstance=!0,i.canUseUInt32ElementIndex=!1,i.managedGeometries={},i.managedBuffers={},i}return t.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,i=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,!e.createVertexArray){var n=this.renderer.context.extensions.vertexArrayObject;ht.PREFER_ENV===Ne.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=function(){return n.createVertexArrayOES()},e.bindVertexArray=function(s){return n.bindVertexArrayOES(s)},e.deleteVertexArray=function(s){return n.deleteVertexArrayOES(s)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(!e.vertexAttribDivisor){var o=e.getExtension("ANGLE_instanced_arrays");o?(e.vertexAttribDivisor=function(s,a){return o.vertexAttribDivisorANGLE(s,a)},e.drawElementsInstanced=function(s,a,l,c,d){return o.drawElementsInstancedANGLE(s,a,l,c,d)},e.drawArraysInstanced=function(s,a,l,c){return o.drawArraysInstancedANGLE(s,a,l,c)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=i.webGLVersion===2||!!i.extensions.uint32ElementIndex},t.prototype.bind=function(e,i){i=i||this.renderer.shader.shader;var n=this.gl,o=e.glVertexArrayObjects[this.CONTEXT_UID];o||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=o={});var s=o[i.program.id]||this.initGeometryVao(e,i.program);this._activeGeometry=e,this._activeVao!==s&&(this._activeVao=s,this.hasVao?n.bindVertexArray(s):this.activateVao(e,i.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var e=this._activeGeometry,i=this.gl,n=0;n<e.buffers.length;n++){var o=e.buffers[n],s=o._glBuffers[this.CONTEXT_UID];if(o._updateID!==s.updateID){s.updateID=o._updateID;var a=o.index?i.ELEMENT_ARRAY_BUFFER:i.ARRAY_BUFFER;if(i.bindBuffer(a,s.buffer),this._boundBuffer=s,s.byteLength>=o.data.byteLength)i.bufferSubData(a,0,o.data);else{var l=o.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=o.data.byteLength,i.bufferData(a,o.data,l)}}}},t.prototype.checkCompatibility=function(e,i){var n=e.attributes,o=i.attributeData;for(var s in o)if(!n[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},t.prototype.getSignature=function(e,i){var n=e.attributes,o=i.attributeData,s=["g",e.id];for(var a in n)o[a]&&s.push(a);return s.join("-")},t.prototype.initGeometryVao=function(e,i){this.checkCompatibility(e,i);var n=this.gl,o=this.CONTEXT_UID,s=this.getSignature(e,i),a=e.glVertexArrayObjects[this.CONTEXT_UID],l=a[s];if(l)return a[i.id]=l,l;var c=e.buffers,d=e.attributes,g={},u={};for(var h in c)g[h]=0,u[h]=0;for(var h in d)!d[h].size&&i.attributeData[h]?d[h].size=i.attributeData[h].size:d[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),g[d[h].buffer]+=d[h].size*wu[d[h].type];for(var h in d){var f=d[h],I=f.size;f.stride===void 0&&(g[f.buffer]===I*wu[f.type]?f.stride=0:f.stride=g[f.buffer]),f.start===void 0&&(f.start=u[f.buffer],u[f.buffer]+=I*wu[f.type])}l=n.createVertexArray(),n.bindVertexArray(l);for(var m=0;m<c.length;m++){var y=c[m];y._glBuffers[o]||(y._glBuffers[o]=new uA(n.createBuffer()),this.managedBuffers[y.id]=y,y.disposeRunner.add(this)),y._glBuffers[o].refCount++}return this.activateVao(e,i),this._activeVao=l,a[i.id]=l,a[s]=l,l},t.prototype.disposeBuffer=function(e,i){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var n=e._glBuffers[this.CONTEXT_UID],o=this.gl;e.disposeRunner.remove(this),n&&(i||o.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeGeometry=function(e,i){if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var n=e.glVertexArrayObjects[this.CONTEXT_UID],o=this.gl,s=e.buffers;if(e.disposeRunner.remove(this),!!n){for(var a=0;a<s.length;a++){var l=s[a]._glBuffers[this.CONTEXT_UID];l.refCount--,l.refCount===0&&!i&&this.disposeBuffer(s[a],i)}if(!i){for(var c in n)if(c[0]==="g"){var d=n[c];this._activeVao===d&&this.unbind(),o.deleteVertexArray(d)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(e){for(var i=Object.keys(this.managedGeometries),n=0;n<i.length;n++)this.disposeGeometry(this.managedGeometries[i[n]],e);i=Object.keys(this.managedBuffers);for(var n=0;n<i.length;n++)this.disposeBuffer(this.managedBuffers[i[n]],e)},t.prototype.activateVao=function(e,i){var n=this.gl,o=this.CONTEXT_UID,s=e.buffers,a=e.attributes;e.indexBuffer&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer._glBuffers[o].buffer);var l=null;for(var c in a){var d=a[c],g=s[d.buffer],u=g._glBuffers[o];if(i.attributeData[c]){l!==u&&(n.bindBuffer(n.ARRAY_BUFFER,u.buffer),l=u);var h=i.attributeData[c].location;if(n.enableVertexAttribArray(h),n.vertexAttribPointer(h,d.size,d.type||n.FLOAT,d.normalized,d.stride,d.start),d.instance)if(this.hasInstance)n.vertexAttribDivisor(h,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},t.prototype.draw=function(e,i,n,o){var s=this.gl,a=this._activeGeometry;if(a.indexBuffer){var l=a.indexBuffer.data.BYTES_PER_ELEMENT,c=l===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;l===2||l===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(e,i||a.indexBuffer.data.length,c,(n||0)*l,o||1):s.drawElements(e,i||a.indexBuffer.data.length,c,(n||0)*l):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(e,n,i||a.getSize(),o||1):s.drawArrays(e,n,i||a.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t}(ce),YI=function(){function r(t){t===void 0&&(t=null),this.type=ue.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return r.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=ue.NONE,this.autoDetect=!0),this._target=null},r.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},r}();function dd(r,t,e){var i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function UI(r,t,e,i){var n=dd(r,r.VERTEX_SHADER,t),o=dd(r,r.FRAGMENT_SHADER,e),s=r.createProgram();if(r.attachShader(s,n),r.attachShader(s,o),i)for(var a in i)r.bindAttribLocation(s,i[a],a);return r.linkProgram(s),r.getProgramParameter(s,r.LINK_STATUS)||(r.getShaderParameter(n,r.COMPILE_STATUS)||(console.warn(t),console.error(r.getShaderInfoLog(n))),r.getShaderParameter(o,r.COMPILE_STATUS)||(console.warn(e),console.error(r.getShaderInfoLog(o))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",r.getProgramParameter(s,r.VALIDATE_STATUS)),console.error("gl.getError()",r.getError()),r.getProgramInfoLog(s)!==""&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(s)),r.deleteProgram(s),s=null),r.deleteShader(n),r.deleteShader(o),s}function xu(r){for(var t=new Array(r),e=0;e<t.length;e++)t[e]=!1;return t}function zI(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return!1;case"bvec2":return xu(2*t);case"bvec3":return xu(3*t);case"bvec4":return xu(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var VI={},Qr=VI;function JI(){if(Qr===VI||Qr&&Qr.isContextLost()){var r=document.createElement("canvas"),t=void 0;ht.PREFER_ENV>=Ne.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Qr=t}return Qr}var To;function lA(){if(!To){To=De.MEDIUM;var r=JI();if(r&&r.getShaderPrecisionFormat){var t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);To=t.precision?De.HIGH:De.MEDIUM}}return To}function gd(r,t,e){if(r.substring(0,9)!=="precision"){var i=t;return t===De.HIGH&&e!==De.HIGH&&(i=De.MEDIUM),"precision "+i+` float;
`+r}else if(e!==De.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var hA={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function cA(r){return hA[r]}var Eo=null,pd={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Id(r,t){if(!Eo){var e=Object.keys(pd);Eo={};for(var i=0;i<e.length;++i){var n=e[i];Eo[r[n]]=pd[n]}}return Eo[t]}var Ko=[{test:function(r){return r.type==="float"&&r.size===1},code:function(r){return`
            if(uv["`+r+'"] !== ud["'+r+`"].value)
            {
                ud["`+r+'"].value = uv["'+r+`"]
                gl.uniform1f(ud["`+r+'"].location, uv["'+r+`"])
            }
            `}},{test:function(r){return(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray},code:function(r){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+r+`"], t);

            if(ud["`+r+`"].value !== t)
            {
                ud["`+r+`"].value = t;
                gl.uniform1i(ud["`+r+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(r,t){return r.type==="mat3"&&r.size===1&&t.a!==void 0},code:function(r){return`
            gl.uniformMatrix3fv(ud["`+r+'"].location, false, uv["'+r+`"].toArray(true));
            `}},{test:function(r,t){return r.type==="vec2"&&r.size===1&&t.x!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+r+`"].location, v.x, v.y);
                }`}},{test:function(r){return r.type==="vec2"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+r+`"].location, v[0], v[1]);
                }
            `}},{test:function(r,t){return r.type==="vec4"&&r.size===1&&t.width!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+r+`"].location, v.x, v.y, v.width, v.height)
                }`}},{test:function(r){return r.type==="vec4"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+r+`"].location, v[0], v[1], v[2], v[3])
                }`}}],fA={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},dA={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function gA(r,t){var e=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var i in r.uniforms){var n=t[i];if(!n){r.uniforms[i].group&&e.push(`
                    renderer.shader.syncUniformGroup(uv["`+i+`"], syncData);
                `);continue}for(var o=r.uniforms[i],s=!1,a=0;a<Ko.length;a++)if(Ko[a].test(n,o)){e.push(Ko[a].code(i,o)),s=!0;break}if(!s){var l=n.size===1?fA:dA,c=l[n.type].replace("location",'ud["'+i+'"].location');e.push(`
            cv = ud["`+i+`"].value;
            v = uv["`+i+`"];
            `+c+";")}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}var pA=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function IA(r){for(var t="",e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+="if(test == "+e+".0){}");return t}function QI(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=t.createShader(t.FRAGMENT_SHADER);;){var i=pA.replace(/%forloop%/gi,IA(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}var $r;function vA(){if(typeof $r=="boolean")return $r;try{var r=new Function("param1","param2","param3","return param1[param2] === param3;");$r=r({a:"b"},"a","b")===!0}catch{$r=!1}return $r}var mA=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,yA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,_A=0,Fo={},Bn=function(){function r(t,e,i){i===void 0&&(i="pixi-shader"),this.id=_A++,this.vertexSrc=t||r.defaultVertexSrc,this.fragmentSrc=e||r.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),Fo[i]?(Fo[i]++,i+="-"+Fo[i]):Fo[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=gd(this.vertexSrc,ht.PRECISION_VERTEX,De.HIGH),this.fragmentSrc=gd(this.fragmentSrc,ht.PRECISION_FRAGMENT,lA())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return r.prototype.extractData=function(t,e){var i=JI();if(i){var n=UI(i,t,e);this.attributeData=this.getAttributeData(n,i),this.uniformData=this.getUniformData(n,i),i.deleteProgram(n)}else this.uniformData={},this.attributeData={}},r.prototype.getAttributeData=function(t,e){for(var i={},n=[],o=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<o;s++){var a=e.getActiveAttrib(t,s),l=Id(e,a.type),c={type:l,name:a.name,size:cA(l),location:0};i[a.name]=c,n.push(c)}n.sort(function(d,g){return d.name>g.name?1:-1});for(var s=0;s<n.length;s++)n[s].location=s;return i},r.prototype.getUniformData=function(t,e){for(var i={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),o=0;o<n;o++){var s=e.getActiveUniform(t,o),a=s.name.replace(/\[.*?\]$/,""),l=s.name.match(/\[.*?\]$/),c=Id(e,s.type);i[a]={type:c,size:s.size,isArray:l,value:zI(c,s.size)}}return i},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return yA},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return mA},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=t+e,o=rh[n];return o||(rh[n]=o=new r(t,e,i)),o},r}(),gi=function(){function r(t,e){this.program=t,e?e instanceof di?this.uniformGroup=e:this.uniformGroup=new di(e):this.uniformGroup=new di({});for(var i in t.uniformData)this.uniformGroup.uniforms[i]instanceof Array&&(this.uniformGroup.uniforms[i]=new Float32Array(this.uniformGroup.uniforms[i]))}return r.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},r.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=Bn.from(t,e);return new r(n,i)},r}(),Pu=0,Su=1,Tu=2,Eu=3,Fu=4,Ci=function(){function r(){this.data=0,this.blendMode=ct.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(r.prototype,"blend",{get:function(){return!!(this.data&1<<Pu)},set:function(t){!!(this.data&1<<Pu)!==t&&(this.data^=1<<Pu)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"offsets",{get:function(){return!!(this.data&1<<Su)},set:function(t){!!(this.data&1<<Su)!==t&&(this.data^=1<<Su)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"culling",{get:function(){return!!(this.data&1<<Tu)},set:function(t){!!(this.data&1<<Tu)!==t&&(this.data^=1<<Tu)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTest",{get:function(){return!!(this.data&1<<Eu)},set:function(t){!!(this.data&1<<Eu)!==t&&(this.data^=1<<Eu)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<Fu)},set:function(t){!!(this.data&1<<Fu)!==t&&(this.data^=1<<Fu)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==ct.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),r.for2d=function(){var t=new r;return t.depthTest=!1,t.blend=!0,t},r}(),CA=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,AA=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,ii=function(r){yt(t,r);function t(e,i,n){var o=this,s=Bn.from(e||t.defaultVertexSrc,i||t.defaultFragmentSrc);return o=r.call(this,s,n)||this,o.padding=0,o.resolution=ht.FILTER_RESOLUTION,o.enabled=!0,o.autoFit=!0,o.legacy=!!o.program.attributeData.aTextureCoord,o.state=new Ci,o}return t.prototype.apply=function(e,i,n,o,s){e.applyFilter(this,i,n,o)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return CA},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return AA},enumerable:!1,configurable:!0}),t}(gi),bA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,wA=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,vd=new jt,Ds=function(){function r(t,e){this._texture=t,this.mapCoord=new jt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}return Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),r.prototype.multiplyUvs=function(t,e){e===void 0&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var o=t[n],s=t[n+1];e[n]=o*i.a+s*i.c+i.tx,e[n+1]=o*i.b+s*i.d+i.ty}return e},r.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,o=e.trim;o&&(vd.set(n.width/o.width,0,0,n.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(vd));var s=e.baseTexture,a=this.uClampFrame,l=this.clampMargin/s.resolution,c=this.clampOffset;return a[0]=(e._frame.x+l+c)/s.width,a[1]=(e._frame.y+l+c)/s.height,a[2]=(e._frame.x+e._frame.width-l+c)/s.width,a[3]=(e._frame.y+e._frame.height-l+c)/s.height,this.uClampOffset[0]=c/s.realWidth,this.uClampOffset[1]=c/s.realHeight,this.isSimple=e._frame.width===s.width&&e._frame.height===s.height&&e.rotate===0,!0},r}(),$I=function(r){yt(t,r);function t(e){var i=this,n=new jt;return i=r.call(this,bA,wA)||this,e.renderable=!1,i.maskSprite=e,i.maskMatrix=n,i}return t.prototype.apply=function(e,i,n,o){var s=this.maskSprite,a=s._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new Ds(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,e.applyFilter(this,i,n,o))},t}(ii),KI=function(r){yt(t,r);function t(e){var i=r.call(this,e)||this;return i.enableScissor=!1,i.alphaMaskPool=[],i.maskDataPool=[],i.maskStack=[],i.alphaMaskIndex=0,i}return t.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},t.prototype.push=function(e,i){var n=i;if(!n.isMaskData){var o=this.maskDataPool.pop()||new YI;o.pooled=!0,o.maskObject=i,n=o}switch(n.autoDetect&&this.detect(n),n.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),n._target=e,n.type){case ue.SCISSOR:this.maskStack.push(n),this.renderer.scissor.push(n);break;case ue.STENCIL:this.maskStack.push(n),this.renderer.stencil.push(n);break;case ue.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n),this.maskStack.push(n);break}},t.prototype.pop=function(e){var i=this.maskStack.pop();if(!(!i||i._target!==e)){switch(i.type){case ue.SCISSOR:this.renderer.scissor.pop();break;case ue.STENCIL:this.renderer.stencil.pop(i.maskObject);break;case ue.SPRITE:this.popSpriteMask();break}i.reset(),i.pooled&&this.maskDataPool.push(i)}},t.prototype.detect=function(e){var i=e.maskObject;if(i.isSprite){e.type=ue.SPRITE;return}if(e.type=ue.STENCIL,this.enableScissor&&i.isFastRect&&i.isFastRect()){var n=i.worldTransform,o=Math.atan2(n.b,n.a),s=Math.atan2(n.d,n.c);o=Math.round(o*(180/Math.PI)*100),s=Math.round(s*(180/Math.PI)*100)-o,o=(o%9e3+9e3)%9e3,s=(s%18e3+18e3)%18e3,o===0&&s===9e3&&(e.type=ue.SCISSOR)}},t.prototype.pushSpriteMask=function(e){var i=e.maskObject,n=e._target,o=this.alphaMaskPool[this.alphaMaskIndex];o||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new $I(i)]),o[0].resolution=this.renderer.resolution,o[0].maskSprite=i;var s=n.filterArea;n.filterArea=i.getBounds(!0),this.renderer.filter.push(n,o),n.filterArea=s,this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},t}(ce),qI=function(r){yt(t,r);function t(e){var i=r.call(this,e)||this;return i.maskStack=[],i.glConst=0,i}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(e){var i=this.renderer.gl,n=this.getStackLength();this.maskStack=e;var o=this.getStackLength();o!==n&&(o===0?i.disable(this.glConst):(i.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.maskStack=null},t}(ce),tv=function(r){yt(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.push=function(e){var i=e.maskObject;i.renderable=!0;var n=e._scissorRect,o=i.getBounds(!0),s=this.renderer.gl;i.renderable=!1,n?o.fit(n):s.enable(s.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=o,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,i=this.renderer.renderTexture.current,n=this.renderer.projection,o=n.transform,s=n.sourceFrame,a=n.destinationFrame,l=i?i.resolution:this.renderer.resolution,c=(e.x-s.x)*l+a.x,d=(e.y-s.y)*l+a.y,g=e.width*l,u=e.height*l;o&&(c+=o.tx*l,d+=o.ty*l),i||(d=this.renderer.height-u-d),this.renderer.gl.scissor(c,d,g,u)},t}(qI),ev=function(r){yt(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var i=e.maskObject,n=this.renderer.gl,o=e._stencilCounter;o===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,o,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var i=this.renderer.gl;this.getStackLength()===0?(i.disable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),i.clearStencil(0)):(i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(qI),iv=function(r){yt(t,r);function t(e){var i=r.call(this,e)||this;return i.destinationFrame=null,i.sourceFrame=null,i.defaultFrame=null,i.projectionMatrix=new jt,i.transform=null,i}return t.prototype.update=function(e,i,n,o){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=i||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,o),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(e,i,n,o){var s=this.projectionMatrix,a=o?-1:1;s.identity(),s.a=1/i.width*2,s.d=a*(1/i.height*2),s.tx=-1-i.x*s.a,s.ty=-a-i.y*s.d},t.prototype.setTransform=function(e){},t}(ce),wi=new wt,Kr=new wt,qr=new wt,rv=function(r){yt(t,r);function t(e){var i=r.call(this,e)||this;return i.clearColor=e._backgroundColorRgba,i.defaultMaskStack=[],i.current=null,i.sourceFrame=new wt,i.destinationFrame=new wt,i}return t.prototype.bind=function(e,i,n){e===void 0&&(e=null);var o=this.renderer;this.current=e;var s,a,l;e?(s=e.baseTexture,l=s.resolution,i||(wi.width=e.frame.width,wi.height=e.frame.height,i=wi),n||(Kr.x=e.frame.x,Kr.y=e.frame.y,Kr.width=i.width,Kr.height=i.height,n=Kr),a=s.framebuffer):(l=o.resolution,i||(wi.width=o.screen.width,wi.height=o.screen.height,i=wi),n||(n=wi,n.width=i.width,n.height=i.height)),qr.x=n.x*l,qr.y=n.y*l,qr.width=n.width*l,qr.height=n.height*l,this.renderer.framebuffer.bind(a,qr),this.renderer.projection.update(n,i,l,!a),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(i),this.destinationFrame.copyFrom(n)},t.prototype.clear=function(e,i){this.current?e=e||this.current.baseTexture.clearColor:e=e||this.clearColor,this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],i)},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t}(ce),xA=function(){function r(){}return r}(),nv=function(){function r(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}return r.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},r}(),PA=0,md={textureCount:0},ov=function(r){yt(t,r);function t(e){var i=r.call(this,e)||this;return i.destroyed=!1,i.systemCheck(),i.gl=null,i.shader=null,i.program=null,i.cache={},i.id=PA++,i}return t.prototype.systemCheck=function(){if(!vA())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(e){this.gl=e,this.reset()},t.prototype.bind=function(e,i){e.uniforms.globals=this.renderer.globalUniforms;var n=e.program,o=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(o.program)),i||(md.textureCount=0,this.syncUniformGroup(e.uniformGroup,md)),o},t.prototype.setUniforms=function(e){var i=this.shader.program,n=i.glPrograms[this.renderer.CONTEXT_UID];i.syncUniforms(n.uniformData,e,this.renderer)},t.prototype.syncUniformGroup=function(e,i){var n=this.getglProgram();(!e.static||e.dirtyId!==n.uniformGroups[e.id])&&(n.uniformGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,i))},t.prototype.syncUniforms=function(e,i,n){var o=e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e);o(i.uniformData,e.uniforms,this.renderer,n)},t.prototype.createSyncGroups=function(e){var i=this.getSignature(e,this.shader.program.uniformData);return this.cache[i]||(this.cache[i]=gA(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[i],e.syncUniforms[this.shader.program.id]},t.prototype.getSignature=function(e,i){var n=e.uniforms,o=[];for(var s in n)o.push(s),i[s]&&o.push(i[s].type);return o.join("-")},t.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateShader=function(e){var i=this.gl,n=e.program,o={};for(var s in n.attributeData)o[s]=n.attributeData[s].location;var a=UI(i,n.vertexSrc,n.fragmentSrc,o),l={};for(var s in n.uniformData){var c=n.uniformData[s];l[s]={location:i.getUniformLocation(a,s),value:zI(c.type,c.size)}}var d=new nv(a,l);return n.glPrograms[this.renderer.CONTEXT_UID]=d,d},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.destroyed=!0},t}(ce);function SA(r,t){return t===void 0&&(t=[]),t[ct.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ct.ADD]=[r.ONE,r.ONE],t[ct.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ct.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ct.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ct.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ct.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ct.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ct.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ct.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ct.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ct.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ct.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ct.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ct.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ct.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ct.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ct.NONE]=[0,0],t[ct.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ct.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[ct.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ct.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[ct.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[ct.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[ct.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[ct.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[ct.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[ct.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[ct.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[ct.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}var TA=0,EA=1,FA=2,MA=3,DA=4,sv=function(r){yt(t,r);function t(e){var i=r.call(this,e)||this;return i.gl=null,i.stateId=0,i.polygonOffset=0,i.blendMode=ct.NONE,i._blendEq=!1,i.map=[],i.map[TA]=i.setBlend,i.map[EA]=i.setOffset,i.map[FA]=i.setCullFace,i.map[MA]=i.setDepthTest,i.map[DA]=i.setFrontFace,i.checks=[],i.defaultState=new Ci,i.defaultState.blend=!0,i}return t.prototype.contextChange=function(e){this.gl=e,this.blendModes=SA(e),this.set(this.defaultState),this.reset()},t.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var i=this.stateId^e.data,n=0;i;)i&1&&this.map[n].call(this,!!(e.data&1<<n)),i=i>>1,n++;this.stateId=e.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,e)},t.prototype.forceState=function(e){e=e||this.defaultState;for(var i=0;i<this.map.length;i++)this.map[i].call(this,!!(e.data&1<<i));for(var i=0;i<this.checks.length;i++)this.checks[i](this,e);this.stateId=e.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},t.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var i=this.blendModes[e],n=this.gl;i.length===2?n.blendFunc(i[0],i[1]):n.blendFuncSeparate(i[0],i[1],i[2],i[3]),i.length===6?(this._blendEq=!0,n.blendEquationSeparate(i[4],i[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},t.prototype.setPolygonOffset=function(e,i){this.gl.polygonOffset(e,i)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(e,i){var n=this.checks.indexOf(e);i&&n===-1?this.checks.push(e):!i&&n!==-1&&this.checks.splice(n,1)},t.checkBlendMode=function(e,i){e.setBlendMode(i.blendMode)},t.checkPolygonOffset=function(e,i){e.setPolygonOffset(1,i.polygonOffset)},t}(ce),av=function(r){yt(t,r);function t(e){var i=r.call(this,e)||this;return i.count=0,i.checkCount=0,i.maxIdle=ht.GC_MAX_IDLE,i.checkCountMax=ht.GC_MAX_CHECK_COUNT,i.mode=ht.GC_MODE,i}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==ls.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var e=this.renderer.texture,i=e.managedTextures,n=!1,o=0;o<i.length;o++){var s=i[o];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),i[o]=null,n=!0)}if(n){for(var a=0,o=0;o<i.length;o++)i[o]!==null&&(i[a++]=i[o]);i.length=a}},t.prototype.unload=function(e){var i,n=this.renderer.texture;!((i=e._texture)===null||i===void 0)&&i.framebuffer&&n.destroyTexture(e._texture);for(var o=e.children.length-1;o>=0;o--)this.unload(e.children[o])},t}(ce),qo=function(){function r(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121}return r}(),uv=function(r){yt(t,r);function t(e){var i=r.call(this,e)||this;return i.boundTextures=[],i.currentLocation=-1,i.managedTextures=[],i._unknownBoundTextures=!1,i.unknownTexture=new Et,i}return t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var i=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=i;for(var n=0;n<i;n++)this.boundTextures[n]=null;this.emptyTextures={};var o=new qo(e.createTexture());e.bindTexture(e.TEXTURE_2D,o.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=o,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new qo(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(var n=0;n<this.boundTextures.length;n++)this.bind(null,n)},t.prototype.bind=function(e,i){i===void 0&&(i=0);var n=this.gl;if(e){if(e=e.castToBaseTexture(),e.parentTextureArray)return;if(e.valid){e.touched=this.renderer.textureGC.count;var o=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[i]!==e&&(this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),n.bindTexture(e.target,o.texture)),o.dirtyId!==e.dirtyId&&(this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),this.updateTexture(e)),this.boundTextures[i]=e}}else this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[i]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},t.prototype.unbind=function(e){var i=this,n=i.gl,o=i.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<o.length;s++)o[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<o.length;s++)o[s]===e&&(this.currentLocation!==s&&(n.activeTexture(n.TEXTURE0+s),this.currentLocation=s),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[e.target].texture),o[s]=null)},t.prototype.initTexture=function(e){var i=new qo(this.gl.createTexture());return i.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=i,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),i},t.prototype.initTextureType=function(e,i){if(i.internalFormat=e.format,i.type=e.type,this.webGLVersion===2){var n=this.renderer.gl;e.type===n.FLOAT&&e.format===n.RGBA&&(i.internalFormat=n.RGBA32F),e.type===Nt.HALF_FLOAT&&(i.type=n.HALF_FLOAT),i.type===n.HALF_FLOAT&&e.format===n.RGBA&&(i.internalFormat=n.RGBA16F)}},t.prototype.updateTexture=function(e){var i=e._glTextures[this.CONTEXT_UID];if(i){var n=this.renderer;if(this.initTextureType(e,i),!(e.resource&&e.resource.upload(n,e,i))){var o=e.realWidth,s=e.realHeight,a=n.gl;(i.width!==o||i.height!==s||i.dirtyId<0)&&(i.width=o,i.height=s,a.texImage2D(e.target,0,i.internalFormat,o,s,0,e.format,i.type,null))}e.dirtyStyleId!==i.dirtyStyleId&&this.updateTextureStyle(e),i.dirtyId=e.dirtyId}},t.prototype.destroyTexture=function(e,i){var n=this.gl;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!i)){var o=this.managedTextures.indexOf(e);o!==-1&&Ni(this.managedTextures,o,1)}},t.prototype.updateTextureStyle=function(e){var i=e._glTextures[this.CONTEXT_UID];i&&((e.mipmap===br.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?i.mipmap=!1:i.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?i.wrapMode=$e.CLAMP:i.wrapMode=e.wrapMode,e.resource&&e.resource.style(this.renderer,e,i)||this.setStyle(e,i),i.dirtyStyleId=e.dirtyStyleId)},t.prototype.setStyle=function(e,i){var n=this.gl;if(i.mipmap&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,i.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,i.wrapMode),i.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Me.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var o=this.renderer.context.extensions.anisotropicFiltering;if(o&&e.anisotropicLevel>0&&e.scaleMode===Me.LINEAR){var s=Math.min(e.anisotropicLevel,n.getParameter(o.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,o.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Me.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===Me.LINEAR?n.LINEAR:n.NEAREST)},t}(ce),LA={FilterSystem:NI,BatchSystem:jI,ContextSystem:kI,FramebufferSystem:XI,GeometrySystem:HI,MaskSystem:KI,ScissorSystem:tv,StencilSystem:ev,ProjectionSystem:iv,RenderTextureSystem:rv,ShaderSystem:ov,StateSystem:sv,TextureGCSystem:av,TextureSystem:uv},Mu=new jt,lv=function(r){yt(t,r);function t(e,i){e===void 0&&(e=Cr.UNKNOWN);var n=r.call(this)||this;return i=Object.assign({},ht.RENDER_OPTIONS,i),i.roundPixels&&(ht.ROUND_PIXELS=i.roundPixels,rt("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),n.options=i,n.type=e,n.screen=new wt(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||ht.RESOLUTION,n.transparent=i.transparent,n.autoDensity=i.autoDensity||i.autoResize||!1,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,0],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n._lastObjectRendered=null,n.plugins={},n}return t.prototype.initPlugins=function(e){for(var i in e)this.plugins[i]=new e[i](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i){this.screen.width=e,this.screen.height=i,this.view.width=e*this.resolution,this.view.height=i*this.resolution,this.autoDensity&&(this.view.style.width=e+"px",this.view.style.height=i+"px"),this.emit("resize",e,i)},t.prototype.generateTexture=function(e,i,n,o){o=o||e.getLocalBounds(null,!0),o.width===0&&(o.width=1),o.height===0&&(o.height=1);var s=Hi.create({width:o.width|0,height:o.height|0,scaleMode:i,resolution:n});return Mu.tx=-o.x,Mu.ty=-o.y,this.render(e,s,!1,Mu,!!e.parent),s},t.prototype.destroy=function(e){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=Cr.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=tc(e),Wi(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),t}(Rr),ri=function(r){yt(t,r);function t(e){var i=r.call(this,Cr.WEBGL,e)||this;return e=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new ee("destroy"),contextChange:new ee("contextChange"),reset:new ee("reset"),update:new ee("update"),postrender:new ee("postrender"),prerender:new ee("prerender"),resize:new ee("resize")},i.globalUniforms=new di({projectionMatrix:new jt},!0),i.addSystem(KI,"mask").addSystem(kI,"context").addSystem(sv,"state").addSystem(ov,"shader").addSystem(uv,"texture").addSystem(HI,"geometry").addSystem(XI,"framebuffer").addSystem(tv,"scissor").addSystem(ev,"stencil").addSystem(iv,"projection").addSystem(av,"textureGC").addSystem(NI,"filter").addSystem(rv,"renderTexture").addSystem(jI,"batch"),i.initPlugins(t.__plugins),e.context?i.context.initFromContext(e.context):i.context.initFromOptions({alpha:!!i.transparent,antialias:e.antialias,premultipliedAlpha:i.transparent&&i.transparent!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,hI(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return t.create=function(e){if(cI())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.addSystem=function(e,i){i||(i=e.name);var n=new e(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var o in this.runners)this.runners[o].add(n);return this},t.prototype.render=function(e,i,n,o,s){if(this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=o,!this.context.isLost){if(i||(this._lastObjectRendered=e),!s){var a=e.enableTempParent();e.updateTransform(),e.disableTempParent(a)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(n!==void 0?n:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.resize=function(e,i){r.prototype.resize.call(this,e,i),this.runners.resize.emit(e,i)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(e){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();r.prototype.destroy.call(this,e),this.gl=null},t.registerPlugin=function(e,i){t.__plugins=t.__plugins||{},t.__plugins[e]=i},t}(lv);function hv(r){return ri.create(r)}var cv=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,gc=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,fs=function(){function r(){this.texArray=null,this.blend=0,this.type=Ae.TRIANGLES,this.start=0,this.size=0,this.data=null}return r}(),ds=function(){function r(){this.elements=[],this.ids=[],this.count=0}return r.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},r}(),fv=function(){function r(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(r.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),r.prototype.view=function(t){return this[t+"View"]},r.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},r.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},r}(),dv=function(r){yt(t,r);function t(e){var i=r.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=Ci.for2d(),i.size=ht.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return t.prototype.contextChange=function(){var e=this.renderer.gl;ht.PREFER_ENV===Ne.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),ht.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=QI(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,i=t._textureArrayPool,n=this.size/4,o=Math.floor(n/this.MAX_TEXTURES)+1;e.length<n;)e.push(new fs);for(;i.length<o;)i.push(new ds);for(var s=0;s<this.MAX_TEXTURES;s++)this._tempBoundTextures[s]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this,i=e._bufferedTextures,n=e.MAX_TEXTURES,o=t._textureArrayPool,s=this.renderer.batch,a=this._tempBoundTextures,l=this.renderer.textureGC.count,c=++Et._globalBatch,d=0,g=o[0],u=0;s.copyBoundTextures(a,n);for(var h=0;h<this._bufferSize;++h){var f=i[h];i[h]=null,f._batchEnabled!==c&&(g.count>=n&&(s.boundArray(g,a,c,n),this.buildDrawCalls(g,u,h),u=h,g=o[++d],++c),f._batchEnabled=c,f.touched=l,g.elements[g.count++]=f)}g.count>0&&(s.boundArray(g,a,c,n),this.buildDrawCalls(g,u,this._bufferSize),++d,++c);for(var h=0;h<a.length;h++)a[h]=null;Et._globalBatch=c},t.prototype.buildDrawCalls=function(e,i,n){var o=this,s=o._bufferedElements,a=o._attributeBuffer,l=o._indexBuffer,c=o.vertexSize,d=t._drawCallPool,g=this._dcIndex,u=this._aIndex,h=this._iIndex,f=d[g];f.start=this._iIndex,f.texArray=e;for(var I=i;I<n;++I){var m=s[I],y=m._texture.baseTexture,v=ic[y.alphaMode?1:0][m.blendMode];s[I]=null,i<I&&f.blend!==v&&(f.size=h-f.start,i=I,f=d[++g],f.texArray=e,f.start=h),this.packInterleavedGeometry(m,a,l,u,h),u+=m.vertexData.length/2*c,h+=m.indices.length,f.blend=v}i<n&&(f.size=h-f.start,++g),this._dcIndex=g,this._aIndex=u,this._iIndex=h},t.prototype.bindAndClearTexArray=function(e){for(var i=this.renderer.texture,n=0;n<e.count;n++)i.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,i=e._packedGeometries,n=e._attributeBuffer,o=e._indexBuffer;ht.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(o),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(o),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,i=this.renderer,n=i.gl,o=i.state,s=t._drawCallPool,a=null,l=0;l<e;l++){var c=s[l],d=c.texArray,g=c.type,u=c.size,h=c.start,f=c.blend;a!==d&&(a=d,this.bindAndClearTexArray(d)),this.state.blendMode=f,o.set(this.state),n.drawElements(g,u,n.UNSIGNED_SHORT,h*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),ht.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var i=_n(Math.ceil(e/8)),n=ih(i),o=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var s=this._aBuffers[o];return s||(this._aBuffers[o]=s=new fv(o*this.vertexSize*4)),s},t.prototype.getIndexBuffer=function(e){var i=_n(Math.ceil(e/12)),n=ih(i),o=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var s=this._iBuffers[n];return s||(this._iBuffers[n]=s=new Uint16Array(o)),s},t.prototype.packInterleavedGeometry=function(e,i,n,o,s){for(var a=i.uint32View,l=i.float32View,c=o/this.vertexSize,d=e.uvs,g=e.indices,u=e.vertexData,h=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),I=f<1&&e._texture.baseTexture.alphaMode?Es(e._tintRGB,f):e._tintRGB+(f*255<<24),m=0;m<u.length;m+=2)l[o++]=u[m],l[o++]=u[m+1],l[o++]=d[m],l[o++]=d[m+1],a[o++]=I,l[o++]=h;for(var m=0;m<g.length;m++)n[s++]=c+g[m]},t._drawCallPool=[],t._textureArrayPool=[],t}(Ln),gv=function(){function r(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return r.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=di.from({uSamplers:e},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+t),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Bn(this.vertexSrc,n)}var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new jt,default:this.defaultGroupCache[t]};return new gi(this.programCache[t],o)},r.prototype.generateSampleSrc=function(t){var e="";e+=`
`,e+=`
`;for(var i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},r}(),pc=function(r){yt(t,r);function t(e){e===void 0&&(e=!1);var i=r.call(this)||this;return i._buffer=new Jt(null,e,!1),i._indexBuffer=new Jt(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,Nt.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,Nt.FLOAT).addAttribute("aColor",i._buffer,4,!0,Nt.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,Nt.FLOAT).addIndex(i._indexBuffer),i}return t}(Gr),yd=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,_d=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,pv=function(){function r(){}return r.create=function(t){var e=Object.assign({vertex:yd,fragment:_d,geometryClass:pc,vertexSize:6},t),i=e.vertex,n=e.fragment,o=e.vertexSize,s=e.geometryClass;return function(a){yt(l,a);function l(c){var d=a.call(this,c)||this;return d.shaderGenerator=new gv(i,n),d.geometryClass=s,d.vertexSize=o,d}return l}(dv)},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return yd},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentTemplate",{get:function(){return _d},enumerable:!1,configurable:!0}),r}(),Iv=pv.create();/*!
 * @pixi/app - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Nr=function(){function r(t){var e=this;t=Object.assign({forceCanvas:!1},t),this.renderer=hv(t),this.stage=new Le,r._plugins.forEach(function(i){i.init.call(e,t)})}return r.registerPlugin=function(t){r._plugins.push(t)},r.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(r.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),r.prototype.destroy=function(t,e){var i=this,n=r._plugins.slice(0);n.reverse(),n.forEach(function(o){o.destroy.call(i)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null},r}();Nr._plugins=[];var BA=function(){function r(){}return r.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(i){window.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame(function(){return e.resize()}))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){e.cancelResize();var i,n;if(e._resizeTo===window)i=window.innerWidth,n=window.innerHeight;else{var o=e._resizeTo,s=o.clientWidth,a=o.clientHeight;i=s,n=a}e.renderer.resize(i,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},r.destroy=function(){this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},r}();Nr.registerPlugin(BA);/*!
 * @pixi/extract - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Cd=new wt,Ad=4,vv=function(){function r(t){this.renderer=t,t.extract=this}return r.prototype.image=function(t,e,i){var n=new Image;return n.src=this.base64(t,e,i),n},r.prototype.base64=function(t,e,i){return this.canvas(t).toDataURL(e,i)},r.prototype.canvas=function(t){var e=this.renderer,i,n,o=!1,s,a=!1;t&&(t instanceof Hi?s=t:(s=this.renderer.generateTexture(t),a=!0)),s?(i=s.baseTexture.resolution,n=s.frame,o=!1,e.renderTexture.bind(s)):(i=this.renderer.resolution,o=!0,n=Cd,n.width=this.renderer.width,n.height=this.renderer.height,e.renderTexture.bind(null));var l=Math.floor(n.width*i+1e-4),c=Math.floor(n.height*i+1e-4),d=new nh(l,c,1),g=new Uint8Array(Ad*l*c),u=e.gl;u.readPixels(n.x*i,n.y*i,l,c,u.RGBA,u.UNSIGNED_BYTE,g);var h=d.context.getImageData(0,0,l,c);if(r.arrayPostDivide(g,h.data),d.context.putImageData(h,0,0),o){var f=new nh(d.width,d.height,1);f.context.scale(1,-1),f.context.drawImage(d.canvas,0,-c),d.destroy(),d=f}return a&&s.destroy(!0),d.canvas},r.prototype.pixels=function(t){var e=this.renderer,i,n,o,s=!1;t&&(t instanceof Hi?o=t:(o=this.renderer.generateTexture(t),s=!0)),o?(i=o.baseTexture.resolution,n=o.frame,e.renderTexture.bind(o)):(i=e.resolution,n=Cd,n.width=e.width,n.height=e.height,e.renderTexture.bind(null));var a=n.width*i,l=n.height*i,c=new Uint8Array(Ad*a*l),d=e.gl;return d.readPixels(n.x*i,n.y*i,a,l,d.RGBA,d.UNSIGNED_BYTE,c),s&&o.destroy(!0),r.arrayPostDivide(c,c),c},r.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},r.arrayPostDivide=function(t,e){for(var i=0;i<t.length;i+=4){var n=e[i+3]=t[i+3];n!==0?(e[i]=Math.round(Math.min(t[i]*255/n,255)),e[i+1]=Math.round(Math.min(t[i+1]*255/n,255)),e[i+2]=Math.round(Math.min(t[i+2]*255/n,255))):(e[i]=t[i],e[i+1]=t[i+1],e[i+2]=t[i+2])}},r}(),RA=(r,t={})=>{if(!r)return;const e={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=e.parser[t.strictMode?"strict":"loose"].exec(r),n={};let o=14;for(;o--;)n[e.key[o]]=i[o]||"";return n[e.q.name]={},n[e.key[12]].replace(e.q.parser,function(s,a,l){a&&(n[e.q.name][a]=l)}),n};const mv=Br(RA);class Mo{constructor(t,e=!1,i){this._fn=t,this._once=e,this._thisArg=i,this._next=this._prev=this._owner=null}detach(){return this._owner===null?!1:(this._owner.detach(this),!0)}}function bd(r,t){return r._head?(r._tail._next=t,t._prev=r._tail,r._tail=t):(r._head=t,r._tail=t),t._owner=r,t}class Ve{constructor(){this._head=this._tail=void 0}handlers(t=!1){let e=this._head;if(t)return!!e;const i=[];for(;e;)i.push(e),e=e._next;return i}has(t){if(!(t instanceof Mo))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}dispatch(){let t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}add(t,e=null){if(typeof t!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return bd(this,new Mo(t,!1,e))}once(t,e=null){if(typeof t!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return bd(this,new Mo(t,!0,e))}detach(t){if(!(t instanceof Mo))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,t._next===null&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}detachAll(){let t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}/*!
 * resource-loader - v3.0.1
 * https://github.com/pixijs/pixi-sound
 * Compiled Tue, 02 Jul 2019 14:06:18 UTC
 *
 * resource-loader is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */function xi(){}function wd(r,t,e,i){var n=0,o=r.length;(function s(a){if(a||n===o){e&&e(a);return}i?setTimeout(function(){t(r[n++],s)},1):t(r[n++],s)})()}function OA(r){return function(){if(r===null)throw new Error("Callback was already called.");var e=r;r=null,e.apply(this,arguments)}}function ZA(r,t){if(t==null)t=1;else if(t===0)throw new Error("Concurrency must not be zero");var e=0,i={_tasks:[],concurrency:t,saturated:xi,unsaturated:xi,buffer:t/4,empty:xi,drain:xi,error:xi,started:!1,paused:!1,push:function(a,l){n(a,!1,l)},kill:function(){e=0,i.drain=xi,i.started=!1,i._tasks=[]},unshift:function(a,l){n(a,!0,l)},process:function(){for(;!i.paused&&e<i.concurrency&&i._tasks.length;){var a=i._tasks.shift();i._tasks.length===0&&i.empty(),e+=1,e===i.concurrency&&i.saturated(),r(a.data,OA(o(a)))}},length:function(){return i._tasks.length},running:function(){return e},idle:function(){return i._tasks.length+e===0},pause:function(){i.paused!==!0&&(i.paused=!0)},resume:function(){if(i.paused!==!1){i.paused=!1;for(var a=1;a<=i.concurrency;a++)i.process()}}};function n(s,a,l){if(l!=null&&typeof l!="function")throw new Error("task callback must be a function");if(i.started=!0,s==null&&i.idle()){setTimeout(function(){return i.drain()},1);return}var c={data:s,callback:typeof l=="function"?l:xi};a?i._tasks.unshift(c):i._tasks.push(c),setTimeout(function(){return i.process()},1)}function o(s){return function(){e-=1,s.callback.apply(s,arguments),arguments[0]!=null&&i.error(arguments[0],s.data),e<=i.concurrency-i.buffer&&i.unsaturated(),i.idle()&&i.drain(),i.process()}}return i}var Du={};function GA(r,t){var e=this;Du[r.url]?(r.data=Du[r.url],r.complete()):r.onComplete.once(function(){return Du[e.url]=e.data}),t()}function xd(r,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function yv(r,t,e){return t&&xd(r.prototype,t),e&&xd(r,e),r}var NA=!!(window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),Do=null,jA=0,Pd=200,kA=204,WA=1223,XA=2;function HA(){}var ft=function(){r.setExtensionLoadType=function(i,n){Sd(r._loadTypeMap,i,n)},r.setExtensionXhrType=function(i,n){Sd(r._xhrTypeMap,i,n)};function r(e,i,n){if(typeof e!="string"||typeof i!="string")throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(r.STATUS_FLAGS.DATA_URL,i.indexOf("data:")===0),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=r.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=HA,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Ve,this.onProgress=new Ve,this.onComplete=new Ve,this.onAfterMiddleware=new Ve}var t=r.prototype;return t.complete=function(){this._clearEvents(),this._finish()},t.abort=function(i){if(!this.error){if(this.error=new Error(i),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=r.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.load=function(i){var n=this;if(!this.isLoading){if(this.isComplete){i&&setTimeout(function(){return i(n)},1);return}else i&&this.onComplete.once(i);switch(this._setFlag(r.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case r.LOAD_TYPE.IMAGE:this.type=r.TYPE.IMAGE,this._loadElement("image");break;case r.LOAD_TYPE.AUDIO:this.type=r.TYPE.AUDIO,this._loadSourceElement("audio");break;case r.LOAD_TYPE.VIDEO:this.type=r.TYPE.VIDEO,this._loadSourceElement("video");break;case r.LOAD_TYPE.XHR:default:NA&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},t._hasFlag=function(i){return(this._flags&i)!==0},t._setFlag=function(i,n){this._flags=n?this._flags|i:this._flags&~i},t._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(r.STATUS_FLAGS.COMPLETE,!0),this._setFlag(r.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t._loadElement=function(i){this.metadata.loadElement?this.data=this.metadata.loadElement:i==="image"&&typeof window.Image<"u"?this.data=new Image:this.data=document.createElement(i),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t._loadSourceElement=function(i){if(this.metadata.loadElement?this.data=this.metadata.loadElement:i==="audio"&&typeof window.Audio<"u"?this.data=new Audio:this.data=document.createElement(i),this.data===null){this.abort("Unsupported element: "+i);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var n=this.metadata.mimeType,o=0;o<this.url.length;++o)this.data.appendChild(this._createSource(i,this.url[o],Array.isArray(n)?n[o]:n));else{var s=this.metadata.mimeType;this.data.appendChild(this._createSource(i,this.url,Array.isArray(s)?s[0]:s))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var i=this.xhr=new XMLHttpRequest;i.open("GET",this.url,!0),i.timeout=this.timeout,this.xhrType===r.XHR_RESPONSE_TYPE.JSON||this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT?i.responseType=r.XHR_RESPONSE_TYPE.TEXT:i.responseType=this.xhrType,i.addEventListener("error",this._boundXhrOnError,!1),i.addEventListener("timeout",this._boundXhrOnTimeout,!1),i.addEventListener("abort",this._boundXhrOnAbort,!1),i.addEventListener("progress",this._boundOnProgress,!1),i.addEventListener("load",this._boundXhrOnLoad,!1),i.send()},t._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var i=this.xhr=new XDomainRequest;i.timeout=this.timeout||5e3,i.onerror=this._boundXhrOnError,i.ontimeout=this._boundXhrOnTimeout,i.onprogress=this._boundOnProgress,i.onload=this._boundXhrOnLoad,i.open("GET",this.url,!0),setTimeout(function(){return i.send()},1)},t._createSource=function(i,n,o){o||(o=i+"/"+this._getExtension(n));var s=document.createElement("source");return s.src=n,s.type=o,s},t._onError=function(i){this.abort("Failed to load element using: "+i.target.nodeName)},t._onProgress=function(i){i&&i.lengthComputable&&this.onProgress.dispatch(this,i.loaded/i.total)},t._onTimeout=function(){this.abort("Load timed out.")},t._xhrOnError=function(){var i=this.xhr;this.abort(Lu(i)+" Request failed. Status: "+i.status+', text: "'+i.statusText+'"')},t._xhrOnTimeout=function(){var i=this.xhr;this.abort(Lu(i)+" Request timed out.")},t._xhrOnAbort=function(){var i=this.xhr;this.abort(Lu(i)+" Request was aborted by the user.")},t._xhrOnLoad=function(){var i=this.xhr,n="",o=typeof i.status>"u"?Pd:i.status;(i.responseType===""||i.responseType==="text"||typeof i.responseType>"u")&&(n=i.responseText),o===jA&&(n.length>0||i.responseType===r.XHR_RESPONSE_TYPE.BUFFER)?o=Pd:o===WA&&(o=kA);var s=o/100|0;if(s===XA)if(this.xhrType===r.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=r.TYPE.TEXT;else if(this.xhrType===r.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=r.TYPE.JSON}catch(c){this.abort("Error trying to parse loaded json: "+c);return}else if(this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var a=new DOMParser;this.data=a.parseFromString(n,"text/xml")}else{var l=document.createElement("div");l.innerHTML=n,this.data=l}this.type=r.TYPE.XML}catch(c){this.abort("Error trying to parse loaded xml: "+c);return}else this.data=i.response||n;else{this.abort("["+i.status+"] "+i.statusText+": "+i.responseURL);return}this.complete()},t._determineCrossOrigin=function(i,n){if(i.indexOf("data:")===0)return"";if(window.origin!==window.location.origin)return"anonymous";n=n||window.location,Do||(Do=document.createElement("a")),Do.href=i,i=mv(Do.href,{strictMode:!0});var o=!i.port&&n.port===""||i.port===n.port,s=i.protocol?i.protocol+":":"";return i.host!==n.hostname||!o||s!==n.protocol?"anonymous":""},t._determineXhrType=function(){return r._xhrTypeMap[this.extension]||r.XHR_RESPONSE_TYPE.TEXT},t._determineLoadType=function(){return r._loadTypeMap[this.extension]||r.LOAD_TYPE.XHR},t._getExtension=function(){var i=this.url,n="";if(this.isDataUrl){var o=i.indexOf("/");n=i.substring(o+1,i.indexOf(";",o))}else{var s=i.indexOf("?"),a=i.indexOf("#"),l=Math.min(s>-1?s:i.length,a>-1?a:i.length);i=i.substring(0,l),n=i.substring(i.lastIndexOf(".")+1)}return n.toLowerCase()},t._getMimeFromXhrType=function(i){switch(i){case r.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case r.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case r.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case r.XHR_RESPONSE_TYPE.JSON:return"application/json";case r.XHR_RESPONSE_TYPE.DEFAULT:case r.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},yv(r,[{key:"isDataUrl",get:function(){return this._hasFlag(r.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(r.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(r.STATUS_FLAGS.LOADING)}}]),r}();ft.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4};ft.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6};ft.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};ft.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};ft._loadTypeMap={gif:ft.LOAD_TYPE.IMAGE,png:ft.LOAD_TYPE.IMAGE,bmp:ft.LOAD_TYPE.IMAGE,jpg:ft.LOAD_TYPE.IMAGE,jpeg:ft.LOAD_TYPE.IMAGE,tif:ft.LOAD_TYPE.IMAGE,tiff:ft.LOAD_TYPE.IMAGE,webp:ft.LOAD_TYPE.IMAGE,tga:ft.LOAD_TYPE.IMAGE,svg:ft.LOAD_TYPE.IMAGE,"svg+xml":ft.LOAD_TYPE.IMAGE,mp3:ft.LOAD_TYPE.AUDIO,ogg:ft.LOAD_TYPE.AUDIO,wav:ft.LOAD_TYPE.AUDIO,mp4:ft.LOAD_TYPE.VIDEO,webm:ft.LOAD_TYPE.VIDEO};ft._xhrTypeMap={xhtml:ft.XHR_RESPONSE_TYPE.DOCUMENT,html:ft.XHR_RESPONSE_TYPE.DOCUMENT,htm:ft.XHR_RESPONSE_TYPE.DOCUMENT,xml:ft.XHR_RESPONSE_TYPE.DOCUMENT,tmx:ft.XHR_RESPONSE_TYPE.DOCUMENT,svg:ft.XHR_RESPONSE_TYPE.DOCUMENT,tsx:ft.XHR_RESPONSE_TYPE.DOCUMENT,gif:ft.XHR_RESPONSE_TYPE.BLOB,png:ft.XHR_RESPONSE_TYPE.BLOB,bmp:ft.XHR_RESPONSE_TYPE.BLOB,jpg:ft.XHR_RESPONSE_TYPE.BLOB,jpeg:ft.XHR_RESPONSE_TYPE.BLOB,tif:ft.XHR_RESPONSE_TYPE.BLOB,tiff:ft.XHR_RESPONSE_TYPE.BLOB,webp:ft.XHR_RESPONSE_TYPE.BLOB,tga:ft.XHR_RESPONSE_TYPE.BLOB,json:ft.XHR_RESPONSE_TYPE.JSON,text:ft.XHR_RESPONSE_TYPE.TEXT,txt:ft.XHR_RESPONSE_TYPE.TEXT,ttf:ft.XHR_RESPONSE_TYPE.BUFFER,otf:ft.XHR_RESPONSE_TYPE.BUFFER};ft.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";function Sd(r,t,e){t&&t.indexOf(".")===0&&(t=t.substring(1)),t&&(r[t]=e)}function Lu(r){return r.toString().replace("object ","")}var YA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function UA(r){for(var t="",e=0;e<r.length;){for(var i=[0,0,0],n=[0,0,0,0],o=0;o<i.length;++o)e<r.length?i[o]=r.charCodeAt(e++)&255:i[o]=0;n[0]=i[0]>>2,n[1]=(i[0]&3)<<4|i[1]>>4,n[2]=(i[1]&15)<<2|i[2]>>6,n[3]=i[2]&63;var s=e-(r.length-1);switch(s){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64;break}for(var a=0;a<n.length;++a)t+=YA.charAt(n[a])}return t}var Td=window.URL||window.webkitURL;function zA(r,t){if(!r.data){t();return}if(r.xhr&&r.xhrType===ft.XHR_RESPONSE_TYPE.BLOB){if(!window.Blob||typeof r.data=="string"){var e=r.xhr.getResponseHeader("content-type");if(e&&e.indexOf("image")===0){r.data=new Image,r.data.src="data:"+e+";base64,"+UA(r.xhr.responseText),r.type=ft.TYPE.IMAGE,r.data.onload=function(){r.data.onload=null,t()};return}}else if(r.data.type.indexOf("image")===0){var i=Td.createObjectURL(r.data);r.blob=r.data,r.data=new Image,r.data.src=i,r.type=ft.TYPE.IMAGE,r.data.onload=function(){Td.revokeObjectURL(i),r.data.onload=null,t()};return}}t()}var VA={caching:GA,parsing:zA},Bu=100,JA=/(#[\w-]+)?$/,Ke=function(){function r(e,i){var n=this;e===void 0&&(e=""),i===void 0&&(i=10),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(a,l){return n._loadResource(a,l)},this._queue=ZA(this._boundLoadResource,i),this._queue.pause(),this.resources={},this.onProgress=new Ve,this.onError=new Ve,this.onLoad=new Ve,this.onStart=new Ve,this.onComplete=new Ve;for(var o=0;o<r._defaultBeforeMiddleware.length;++o)this.pre(r._defaultBeforeMiddleware[o]);for(var s=0;s<r._defaultAfterMiddleware.length;++s)this.use(r._defaultAfterMiddleware[s])}var t=r.prototype;return t.add=function(i,n,o,s){if(Array.isArray(i)){for(var a=0;a<i.length;++a)this.add(i[a]);return this}if(typeof i=="object"&&(s=n||i.callback||i.onComplete,o=i,n=i.url,i=i.name||i.key||i.url),typeof n!="string"&&(s=o,o=n,n=i),typeof n!="string")throw new Error("No url passed to add resource to loader.");if(typeof o=="function"&&(s=o,o=null),this.loading&&(!o||!o.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[i])throw new Error('Resource named "'+i+'" already exists.');if(n=this._prepareUrl(n),this.resources[i]=new ft(i,n,o),typeof s=="function"&&this.resources[i].onAfterMiddleware.once(s),this.loading){for(var l=o.parentResource,c=[],d=0;d<l.children.length;++d)l.children[d].isComplete||c.push(l.children[d]);var g=l.progressChunk*(c.length+1),u=g/(c.length+2);l.children.push(this.resources[i]),l.progressChunk=u;for(var h=0;h<c.length;++h)c[h].progressChunk=u;this.resources[i].progressChunk=u}return this._queue.push(this.resources[i]),this},t.pre=function(i){return this._beforeMiddleware.push(i),this},t.use=function(i){return this._afterMiddleware.push(i),this},t.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var i in this.resources){var n=this.resources[i];n._onLoadBinding&&n._onLoadBinding.detach(),n.isLoading&&n.abort()}return this.resources={},this},t.load=function(i){if(typeof i=="function"&&this.onComplete.once(i),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var n=this._queue._tasks.length,o=Bu/n,s=0;s<this._queue._tasks.length;++s)this._queue._tasks[s].data.progressChunk=o;this._onStart(),this._queue.resume()}return this},t._prepareUrl=function(i){var n=mv(i,{strictMode:!0}),o;if(n.protocol||!n.path||i.indexOf("//")===0?o=i:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&i.charAt(0)!=="/"?o=this.baseUrl+"/"+i:o=this.baseUrl+i,this.defaultQueryString){var s=JA.exec(o)[0];o=o.substr(0,o.length-s.length),o.indexOf("?")!==-1?o+="&"+this.defaultQueryString:o+="?"+this.defaultQueryString,o+=s}return o},t._loadResource=function(i,n){var o=this;i._dequeue=n,wd(this._beforeMiddleware,function(s,a){s.call(o,i,function(){a(i.isComplete?{}:null)})},function(){i.isComplete?o._onLoad(i):(i._onLoadBinding=i.onComplete.once(o._onLoad,o),i.load())},!0)},t._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t._onComplete=function(){this.progress=Bu,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t._onLoad=function(i){var n=this;i._onLoadBinding=null,this._resourcesParsing.push(i),i._dequeue(),wd(this._afterMiddleware,function(o,s){o.call(n,i,s)},function(){i.onAfterMiddleware.dispatch(i),n.progress=Math.min(Bu,n.progress+i.progressChunk),n.onProgress.dispatch(n,i),i.error?n.onError.dispatch(i.error,n,i):n.onLoad.dispatch(n,i),n._resourcesParsing.splice(n._resourcesParsing.indexOf(i),1),n._queue.idle()&&n._resourcesParsing.length===0&&n._onComplete()},!0)},yv(r,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(i){this._queue.concurrency=i}}]),r}();Ke._defaultBeforeMiddleware=[];Ke._defaultAfterMiddleware=[];Ke.pre=function(t){return Ke._defaultBeforeMiddleware.push(t),Ke};Ke.use=function(t){return Ke._defaultAfterMiddleware.push(t),Ke};/*!
 * @pixi/loaders - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var cn=ft;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ch=function(r,t){return ch=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},ch(r,t)};function QA(r,t){ch(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var _v=function(){function r(){}return r.use=function(t,e){t.data&&t.type===ft.TYPE.IMAGE&&(t.texture=vt.fromLoader(t.data,t.url,t.name)),e()},r}(),Yi=function(r){QA(t,r);function t(e,i){for(var n=r.call(this,e,i)||this,o=0;o<t._plugins.length;++o){var s=t._plugins[o],a=s.pre,l=s.use;a&&n.pre(a),l&&n.use(l)}return n._protected=!1,n}return t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||(e=new t,e._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return t._plugins.push(e),e.add&&e.add(),t},t._plugins=[],t}(Ke);Yi.registerPlugin({use:VA.parsing});Yi.registerPlugin(_v);var Cv=function(){function r(){}return r.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?Yi.shared:new Yi},r.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},r}();/*!
 * @pixi/particles - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/particles is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var fh=function(r,t){return fh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},fh(r,t)};function Av(r,t){fh(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var $A=function(r){Av(t,r);function t(e,i,n,o){e===void 0&&(e=1500),n===void 0&&(n=16384),o===void 0&&(o=!1);var s=r.call(this)||this,a=16384;return n>a&&(n=a),s._properties=[!1,!0,!1,!1,!1],s._maxSize=e,s._batchSize=n,s._buffers=null,s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=ct.NORMAL,s.autoResize=o,s.roundPixels=!0,s.baseTexture=null,s.setProperties(i),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}return t.prototype.setProperties=function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,Wi(e,this.tintRgb)},enumerable:!1,configurable:!0}),t.prototype.render=function(e){var i=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return i.onChildrenChange(0)})),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},t.prototype.onChildrenChange=function(e){for(var i=Math.floor(e/this._batchSize);this._bufferUpdateIDs.length<i;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[i]=++this._updateID},t.prototype.dispose=function(){if(this._buffers){for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}},t.prototype.destroy=function(e){r.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},t}(Le),Ed=function(){function r(t,e,i){this.geometry=new Gr,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<t.length;++n){var o=t[n];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||Nt.FLOAT,offset:o.offset},e[n]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return r.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new Jt(dI(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];n.offset=e,e+=n.size,this.dynamicStride+=n.size}var o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=new Jt(this.dynamicData,!1,!1);var s=0;this.staticStride=0;for(var i=0;i<this.staticProperties.length;++i){var n=this.staticProperties[i];n.offset=s,s+=n.size,this.staticStride+=n.size}var a=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(a),this.staticDataUint32=new Uint32Array(a),this.staticBuffer=new Jt(this.staticData,!0,!1);for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];t.addAttribute(n.attributeName,this.dynamicBuffer,0,n.type===Nt.UNSIGNED_BYTE,n.type,this.dynamicStride*4,n.offset*4)}for(var i=0;i<this.staticProperties.length;++i){var n=this.staticProperties[i];t.addAttribute(n.attributeName,this.staticBuffer,0,n.type===Nt.UNSIGNED_BYTE,n.type,this.staticStride*4,n.offset*4)}},r.prototype.uploadDynamic=function(t,e,i){for(var n=0;n<this.dynamicProperties.length;n++){var o=this.dynamicProperties[n];o.uploadFunction(t,e,i,o.type===Nt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++},r.prototype.uploadStatic=function(t,e,i){for(var n=0;n<this.staticProperties.length;n++){var o=this.staticProperties[n];o.uploadFunction(t,e,i,o.type===Nt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++},r.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},r}(),KA=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,qA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,bv=function(r){Av(t,r);function t(e){var i=r.call(this,e)||this;return i.shader=null,i.properties=null,i.tempMatrix=new jt,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Nt.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=gi.from(qA,KA,{}),i.state=Ci.for2d(),i}return t.prototype.render=function(e){var i=e.children,n=e._maxSize,o=e._batchSize,s=this.renderer,a=i.length;if(a!==0){a>n&&!e.autoResize&&(a=n);var l=e._buffers;l||(l=e._buffers=this.generateBuffers(e));var c=i[0]._texture.baseTexture;this.state.blendMode=rc(e.blendMode,c.alphaMode),s.state.set(this.state);var d=s.gl,g=e.worldTransform.copyTo(this.tempMatrix);g.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=g.toArray(!0),this.shader.uniforms.uColor=fI(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,c.alphaMode),this.shader.uniforms.uSampler=c,this.renderer.shader.bind(this.shader);for(var u=!1,h=0,f=0;h<a;h+=o,f+=1){var I=a-h;I>o&&(I=o),f>=l.length&&l.push(this._generateOneMoreBuffer(e));var m=l[f];m.uploadDynamic(i,h,I);var y=e._bufferUpdateIDs[f]||0;u=u||m._updateID<y,u&&(m._updateID=e._updateID,m.uploadStatic(i,h,I)),s.geometry.bind(m.geometry),d.drawElements(d.TRIANGLES,I*6,d.UNSIGNED_SHORT,0)}}},t.prototype.generateBuffers=function(e){for(var i=[],n=e._maxSize,o=e._batchSize,s=e._properties,a=0;a<n;a+=o)i.push(new Ed(this.properties,s,o));return i},t.prototype._generateOneMoreBuffer=function(e){var i=e._batchSize,n=e._properties;return new Ed(this.properties,n,i)},t.prototype.uploadVertices=function(e,i,n,o,s,a){for(var l=0,c=0,d=0,g=0,u=0;u<n;++u){var h=e[i+u],f=h._texture,I=h.scale.x,m=h.scale.y,y=f.trim,v=f.orig;y?(c=y.x-h.anchor.x*v.width,l=c+y.width,g=y.y-h.anchor.y*v.height,d=g+y.height):(l=v.width*(1-h.anchor.x),c=v.width*-h.anchor.x,d=v.height*(1-h.anchor.y),g=v.height*-h.anchor.y),o[a]=c*I,o[a+1]=g*m,o[a+s]=l*I,o[a+s+1]=g*m,o[a+s*2]=l*I,o[a+s*2+1]=d*m,o[a+s*3]=c*I,o[a+s*3+1]=d*m,a+=s*4}},t.prototype.uploadPosition=function(e,i,n,o,s,a){for(var l=0;l<n;l++){var c=e[i+l].position;o[a]=c.x,o[a+1]=c.y,o[a+s]=c.x,o[a+s+1]=c.y,o[a+s*2]=c.x,o[a+s*2+1]=c.y,o[a+s*3]=c.x,o[a+s*3+1]=c.y,a+=s*4}},t.prototype.uploadRotation=function(e,i,n,o,s,a){for(var l=0;l<n;l++){var c=e[i+l].rotation;o[a]=c,o[a+s]=c,o[a+s*2]=c,o[a+s*3]=c,a+=s*4}},t.prototype.uploadUvs=function(e,i,n,o,s,a){for(var l=0;l<n;++l){var c=e[i+l]._texture._uvs;c?(o[a]=c.x0,o[a+1]=c.y0,o[a+s]=c.x1,o[a+s+1]=c.y1,o[a+s*2]=c.x2,o[a+s*2+1]=c.y2,o[a+s*3]=c.x3,o[a+s*3+1]=c.y3,a+=s*4):(o[a]=0,o[a+1]=0,o[a+s]=0,o[a+s+1]=0,o[a+s*2]=0,o[a+s*2+1]=0,o[a+s*3]=0,o[a+s*3+1]=0,a+=s*4)}},t.prototype.uploadTint=function(e,i,n,o,s,a){for(var l=0;l<n;++l){var c=e[i+l],d=c._texture.baseTexture.alphaMode>0,g=c.alpha,u=g<1&&d?Es(c._tintRGB,g):c._tintRGB+(g*255<<24);o[a]=u,o[a+s]=u,o[a+s*2]=u,o[a+s*3]=u,a+=s*4}},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},t}(Ln);/*!
 * @pixi/graphics - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ui;(function(r){r.MITER="miter",r.BEVEL="bevel",r.ROUND="round"})(Ui||(Ui={}));var Je;(function(r){r.BUTT="butt",r.ROUND="round",r.SQUARE="square"})(Je||(Je={}));var Pr={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(r,t){if(t===void 0&&(t=20),!this.adaptive||!r||isNaN(r))return t;var e=Math.ceil(r/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}},Ic=function(){function r(){this.color=16777215,this.alpha=1,this.texture=vt.WHITE,this.matrix=null,this.visible=!1,this.reset()}return r.prototype.clone=function(){var t=new r;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},r.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=vt.WHITE,this.matrix=null,this.visible=!1},r.prototype.destroy=function(){this.texture=null,this.matrix=null},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var dh=function(r,t){return dh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},dh(r,t)};function Ls(r,t){dh(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var vc={build:function(r){r.points=r.shape.points.slice()},triangulate:function(r,t){var e=r.points,i=r.holes,n=t.points,o=t.indices;if(e.length>=6){for(var s=[],a=0;a<i.length;a++){var l=i[a];s.push(e.length/2),e=e.concat(l.points)}var c=Uh(e,s,2);if(!c)return;for(var d=n.length/2,a=0;a<c.length;a+=3)o.push(c[a]+d),o.push(c[a+1]+d),o.push(c[a+2]+d);for(var a=0;a<e.length;a++)n.push(e[a])}}},gh={build:function(r){var t=r.shape,e=r.points,i=t.x,n=t.y,o,s;if(e.length=0,r.type===Rt.CIRC)o=t.radius,s=t.radius;else{var a=r.shape;o=a.width,s=a.height}if(!(o===0||s===0)){var l=Math.floor(30*Math.sqrt(t.radius))||Math.floor(15*Math.sqrt(o+s));l/=2.3;for(var c=Math.PI*2/l,d=0;d<l-.5;d++)e.push(i+Math.sin(-c*d)*o,n+Math.cos(-c*d)*s);e.push(e[0],e[1])}},triangulate:function(r,t){var e=r.points,i=t.points,n=t.indices,o=i.length/2,s=o,a=r.shape,l=r.matrix,c=a.x,d=a.y;i.push(r.matrix?l.a*c+l.c*d+l.tx:c,r.matrix?l.b*c+l.d*d+l.ty:d);for(var g=0;g<e.length;g+=2)i.push(e[g],e[g+1]),n.push(o++,s,o)}},wv={build:function(r){var t=r.shape,e=t.x,i=t.y,n=t.width,o=t.height,s=r.points;s.length=0,s.push(e,i,e+n,i,e+n,i+o,e,i+o)},triangulate:function(r,t){var e=r.points,i=t.points,n=i.length/2;i.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function sr(r,t,e){var i=t-r;return r+i*e}function Lo(r,t,e,i,n,o,s){s===void 0&&(s=[]);for(var a=20,l=s,c=0,d=0,g=0,u=0,h=0,f=0,I=0,m=0;I<=a;++I)m=I/a,c=sr(r,e,m),d=sr(t,i,m),g=sr(e,n,m),u=sr(i,o,m),h=sr(c,g,m),f=sr(d,u,m),l.push(h,f);return l}var xv={build:function(r){var t=r.shape,e=r.points,i=t.x,n=t.y,o=t.width,s=t.height,a=Math.max(0,Math.min(t.radius,Math.min(o,s)/2));e.length=0,a?(Lo(i,n+a,i,n,i+a,n,e),Lo(i+o-a,n,i+o,n,i+o,n+a,e),Lo(i+o,n+s-a,i+o,n+s,i+o-a,n+s,e),Lo(i+a,n+s,i,n+s,i,n+s-a,e)):e.push(i,n,i+o,n,i+o,n+s,i,n+s)},triangulate:function(r,t){for(var e=r.points,i=t.points,n=t.indices,o=i.length/2,s=Uh(e,null,2),a=0,l=s.length;a<l;a+=3)n.push(s[a]+o),n.push(s[a+1]+o),n.push(s[a+2]+o);for(var a=0,l=e.length;a<l;a++)i.push(e[a],e[++a])}};function Fd(r,t,e,i,n,o,s,a){var l=r-e*n,c=t-i*n,d=r+e*o,g=t+i*o,u,h;s?(u=i,h=-e):(u=-i,h=e);var f=l+u,I=c+h,m=d+u,y=g+h;return a.push(f,I),a.push(m,y),2}function Bo(r,t,e,i,n,o,s,a){var l=e-r,c=i-t,d=Math.atan2(l,c),g=Math.atan2(n-r,o-t);a&&d<g?d+=Math.PI*2:!a&&d>g&&(g+=Math.PI*2);var u=d,h=g-d,f=Math.abs(h),I=Math.sqrt(l*l+c*c),m=(15*f*Math.sqrt(I)/Math.PI>>0)+1,y=h/m;if(u+=y,a){s.push(r,t),s.push(e,i);for(var v=1,p=u;v<m;v++,p+=y)s.push(r,t),s.push(r+Math.sin(p)*I,t+Math.cos(p)*I);s.push(r,t),s.push(n,o)}else{s.push(e,i),s.push(r,t);for(var v=1,p=u;v<m;v++,p+=y)s.push(r+Math.sin(p)*I,t+Math.cos(p)*I),s.push(r,t);s.push(n,o),s.push(r,t)}return m*2}function tb(r,t){var e=r.shape,i=r.points||e.points.slice(),n=t.closePointEps;if(i.length!==0){var o=r.lineStyle,s=new Kt(i[0],i[1]),a=new Kt(i[i.length-2],i[i.length-1]),l=e.type!==Rt.POLY||e.closeStroke,c=Math.abs(s.x-a.x)<n&&Math.abs(s.y-a.y)<n;if(l){i=i.slice(),c&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));var d=(s.x+a.x)*.5,g=(a.y+s.y)*.5;i.unshift(d,g),i.push(d,g)}var u=t.points,h=i.length/2,f=i.length,I=u.length/2,m=o.width/2,y=m*m,v=o.miterLimit*o.miterLimit,p=i[0],_=i[1],A=i[2],b=i[3],P=0,E=0,C=-(_-b),x=p-A,F=0,R=0,Z=Math.sqrt(C*C+x*x);C/=Z,x/=Z,C*=m,x*=m;var H=o.alignment,W=(1-H)*2,U=H*2;l||(o.cap===Je.ROUND?f+=Bo(p-C*(W-U)*.5,_-x*(W-U)*.5,p-C*W,_-x*W,p+C*U,_+x*U,u,!0)+2:o.cap===Je.SQUARE&&(f+=Fd(p,_,C,x,W,U,!0,u))),u.push(p-C*W,_-x*W),u.push(p+C*U,_+x*U);for(var X=1;X<h-1;++X){p=i[(X-1)*2],_=i[(X-1)*2+1],A=i[X*2],b=i[X*2+1],P=i[(X+1)*2],E=i[(X+1)*2+1],C=-(_-b),x=p-A,Z=Math.sqrt(C*C+x*x),C/=Z,x/=Z,C*=m,x*=m,F=-(b-E),R=A-P,Z=Math.sqrt(F*F+R*R),F/=Z,R/=Z,F*=m,R*=m;var ot=A-p,lt=_-b,et=A-P,Q=E-b,it=lt*et-Q*ot,at=it<0;if(Math.abs(it)<.1){u.push(A-C*W,b-x*W),u.push(A+C*U,b+x*U);continue}var N=(-C+p)*(-x+b)-(-C+A)*(-x+_),It=(-F+P)*(-R+b)-(-F+A)*(-R+E),dt=(ot*It-et*N)/it,D=(Q*N-lt*It)/it,S=(dt-A)*(dt-A)+(D-b)*(D-b),M=A+(dt-A)*W,B=b+(D-b)*W,z=A-(dt-A)*U,$=b-(D-b)*U;o.join===Ui.BEVEL||S/y>v?(at?(u.push(M,B),u.push(A+C*U,b+x*U),u.push(M,B),u.push(A+F*U,b+R*U)):(u.push(A-C*W,b-x*W),u.push(z,$),u.push(A-F*W,b-R*W),u.push(z,$)),f+=2):o.join===Ui.ROUND?at?(u.push(M,B),u.push(A+C*U,b+x*U),f+=Bo(A,b,A+C*U,b+x*U,A+F*U,b+R*U,u,!0)+4,u.push(M,B),u.push(A+F*U,b+R*U)):(u.push(A-C*W,b-x*W),u.push(z,$),f+=Bo(A,b,A-C*W,b-x*W,A-F*W,b-R*W,u,!1)+4,u.push(A-F*W,b-R*W),u.push(z,$)):(u.push(M,B),u.push(z,$))}p=i[(h-2)*2],_=i[(h-2)*2+1],A=i[(h-1)*2],b=i[(h-1)*2+1],C=-(_-b),x=p-A,Z=Math.sqrt(C*C+x*x),C/=Z,x/=Z,C*=m,x*=m,u.push(A-C*W,b-x*W),u.push(A+C*U,b+x*U),l||(o.cap===Je.ROUND?f+=Bo(A-C*(W-U)*.5,b-x*(W-U)*.5,A-C*W,b-x*W,A+C*U,b+x*U,u,!1)+2:o.cap===Je.SQUARE&&(f+=Fd(A,b,C,x,W,U,!1,u)));for(var K=t.indices,st=Pr.epsilon*Pr.epsilon,X=I;X<f+I-2;++X)p=u[X*2],_=u[X*2+1],A=u[(X+1)*2],b=u[(X+1)*2+1],P=u[(X+2)*2],E=u[(X+2)*2+1],!(Math.abs(p*(b-E)+A*(E-_)+P*(_-b))<st)&&K.push(X,X+1,X+2)}}function eb(r,t){var e=0,i=r.shape,n=r.points||i.points,o=i.type!==Rt.POLY||i.closeStroke;if(n.length!==0){var s=t.points,a=t.indices,l=n.length/2,c=s.length/2,d=c;for(s.push(n[0],n[1]),e=1;e<l;e++)s.push(n[e*2],n[e*2+1]),a.push(d,d+1),d++;o&&a.push(d,c)}}function ph(r,t){r.lineStyle.native?eb(r,t):tb(r,t)}var Pv=function(r){Ls(t,r);function t(e,i,n,o,s,a){a===void 0&&(a=0);var l=this;s=s||o/2;for(var c=-1*Math.PI/2+a,d=n*2,g=wr/d,u=[],h=0;h<d;h++){var f=h%2?s:o,I=h*g+c;u.push(e+f*Math.cos(I),i+f*Math.sin(I))}return l=r.call(this,u)||this,l}return t}(pr),Ih=function(){function r(){}return r.curveTo=function(t,e,i,n,o,s){var a=s[s.length-2],l=s[s.length-1],c=l-e,d=a-t,g=n-e,u=i-t,h=Math.abs(c*u-d*g);if(h<1e-8||o===0)return(s[s.length-2]!==t||s[s.length-1]!==e)&&s.push(t,e),null;var f=c*c+d*d,I=g*g+u*u,m=c*g+d*u,y=o*Math.sqrt(f)/h,v=o*Math.sqrt(I)/h,p=y*m/f,_=v*m/I,A=y*u+v*d,b=y*g+v*c,P=d*(v+p),E=c*(v+p),C=u*(y+_),x=g*(y+_),F=Math.atan2(E-b,P-A),R=Math.atan2(x-b,C-A);return{cx:A+t,cy:b+e,radius:o,startAngle:F,endAngle:R,anticlockwise:d*g>u*c}},r.arc=function(t,e,i,n,o,s,a,l,c){for(var d=a-s,g=Pr._segmentsCount(Math.abs(d)*o,Math.ceil(Math.abs(d)/wr)*40),u=d/(g*2),h=u*2,f=Math.cos(u),I=Math.sin(u),m=g-1,y=m%1/m,v=0;v<=m;++v){var p=v+y*v,_=u+s+h*p,A=Math.cos(_),b=-Math.sin(_);c.push((f*A+I*b)*o+i,(f*-b+I*A)*o+n)}},r}(),Sv=function(){function r(){}return r.curveLength=function(t,e,i,n,o,s,a,l){for(var c=10,d=0,g=0,u=0,h=0,f=0,I=0,m=0,y=0,v=0,p=0,_=0,A=t,b=e,P=1;P<=c;++P)g=P/c,u=g*g,h=u*g,f=1-g,I=f*f,m=I*f,y=m*t+3*I*g*i+3*f*u*o+h*a,v=m*e+3*I*g*n+3*f*u*s+h*l,p=A-y,_=b-v,A=y,b=v,d+=Math.sqrt(p*p+_*_);return d},r.curveTo=function(t,e,i,n,o,s,a){var l=a[a.length-2],c=a[a.length-1];a.length-=2;var d=Pr._segmentsCount(r.curveLength(l,c,t,e,i,n,o,s)),g=0,u=0,h=0,f=0,I=0;a.push(l,c);for(var m=1,y=0;m<=d;++m)y=m/d,g=1-y,u=g*g,h=u*g,f=y*y,I=f*y,a.push(h*l+3*u*y*t+3*g*f*i+I*o,h*c+3*u*y*e+3*g*f*n+I*s)},r}(),Tv=function(){function r(){}return r.curveLength=function(t,e,i,n,o,s){var a=t-2*i+o,l=e-2*n+s,c=2*i-2*t,d=2*n-2*e,g=4*(a*a+l*l),u=4*(a*c+l*d),h=c*c+d*d,f=2*Math.sqrt(g+u+h),I=Math.sqrt(g),m=2*g*I,y=2*Math.sqrt(h),v=u/I;return(m*f+I*u*(f-y)+(4*h*g-u*u)*Math.log((2*I+v+f)/(v+y)))/(4*m)},r.curveTo=function(t,e,i,n,o){for(var s=o[o.length-2],a=o[o.length-1],l=Pr._segmentsCount(r.curveLength(s,a,t,e,i,n)),c=0,d=0,g=1;g<=l;++g){var u=g/l;c=s+(t-s)*u,d=a+(e-a)*u,o.push(c+(t+(i-t)*u-c)*u,d+(e+(n-e)*u-d)*u)}},r}(),Ev=function(){function r(){this.reset()}return r.prototype.begin=function(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i},r.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},r.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},r}(),Pi,ts=(Pi={},Pi[Rt.POLY]=vc,Pi[Rt.CIRC]=gh,Pi[Rt.ELIP]=gh,Pi[Rt.RECT]=wv,Pi[Rt.RREC]=xv,Pi),vh=[],sn=[],ib={buildPoly:vc,buildCircle:gh,buildRectangle:wv,buildRoundedRectangle:xv,FILL_COMMANDS:ts,BATCH_POOL:vh,DRAW_CALL_POOL:sn,buildLine:ph,Star:Pv,ArcUtils:Ih,BezierUtils:Sv,QuadraticUtils:Tv,BatchPart:Ev},mh=function(){function r(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=null),n===void 0&&(n=null),this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=n,this.type=t.type,this.points=[],this.holes=[]}return r.prototype.clone=function(){return new r(this.shape,this.fillStyle,this.lineStyle,this.matrix)},r.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},r}(),ar=new Kt,rb=new An,Fv=function(r){Ls(t,r);function t(){var e=r.call(this)||this;return e.uvsFloat32=null,e.indicesUint16=null,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.dirty=0,e.batchDirty=-1,e.cacheDirty=-1,e.clearDirty=0,e.drawCalls=[],e.batches=[],e.shapeIndex=0,e._bounds=new An,e.boundsDirty=-1,e.boundsPadding=0,e.batchable=!1,e.indicesUint16=null,e.uvsFloat32=null,e.closePointEps=1e-4,e}return Object.defineProperty(t.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),t.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),sn.push(this.drawCalls[e]);this.drawCalls.length=0;for(var e=0;e<this.batches.length;e++){var i=this.batches[e];i.reset(),vh.push(i)}this.batches.length=0},t.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},t.prototype.drawShape=function(e,i,n,o){i===void 0&&(i=null),n===void 0&&(n=null),o===void 0&&(o=null);var s=new mh(e,i,n,o);return this.graphicsData.push(s),this.dirty++,this},t.prototype.drawHole=function(e,i){if(i===void 0&&(i=null),!this.graphicsData.length)return null;var n=new mh(e,null,null,i),o=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=o.lineStyle,o.holes.push(n),this.dirty++,this},t.prototype.destroy=function(){r.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},t.prototype.containsPoint=function(e){for(var i=this.graphicsData,n=0;n<i.length;++n){var o=i[n];if(o.fillStyle.visible&&o.shape&&(o.matrix?o.matrix.applyInverse(e,ar):ar.copyFrom(e),o.shape.contains(ar.x,ar.y))){var s=!1;if(o.holes)for(var a=0;a<o.holes.length;a++){var l=o.holes[a];if(l.shape.contains(ar.x,ar.y)){s=!0;break}}if(!s)return!0}}return!1},t.prototype.updateBatches=function(e){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var i=this.uvs,n=this.graphicsData,o=null,s=null;this.batches.length>0&&(o=this.batches[this.batches.length-1],s=o.style);for(var a=this.shapeIndex;a<n.length;a++){this.shapeIndex++;var l=n[a],c=l.fillStyle,d=l.lineStyle,g=ts[l.type];g.build(l),l.matrix&&this.transformPoints(l.points,l.matrix);for(var u=0;u<2;u++){var h=u===0?c:d;if(h.visible){var f=h.texture.baseTexture,I=this.indices.length,m=this.points.length/2;f.wrapMode=$e.REPEAT,u===0?this.processFill(l):this.processLine(l);var y=this.points.length/2-m;y!==0&&(o&&!this._compareStyles(s,h)&&(o.end(I,m),o=null),o||(o=vh.pop()||new Ev,o.begin(h,I,m),this.batches.push(o),s=h),this.addUvs(this.points,i,h.texture,m,y,h.matrix))}}}var v=this.indices.length,p=this.points.length/2;if(o&&o.end(v,p),this.batches.length===0){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var _=p>65535&&e;this.indicesUint16=_?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},t.prototype._compareStyles=function(e,i){return!(!e||!i||e.texture.baseTexture!==i.texture.baseTexture||e.color+e.alpha!==i.color+i.alpha||!!e.native!=!!i.native)},t.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var e=0,i=this.graphicsData.length;e<i;e++){var n=this.graphicsData[e],o=n.fillStyle,s=n.lineStyle;if(o&&!o.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0},t.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var e=this.batches,i=0,n=e.length;i<n;i++)for(var o=e[i],s=0;s<o.size;s++){var a=o.start+s;this.indicesUint16[a]=this.indicesUint16[a]-o.attribStart}},t.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var e=this.batches,i=0;i<e.length;i++)if(e[i].style.native)return!1;return this.points.length<t.BATCHABLE_SIZE*2},t.prototype.buildDrawCalls=function(){for(var e=++Et._globalBatch,i=0;i<this.drawCalls.length;i++)this.drawCalls[i].texArray.clear(),sn.push(this.drawCalls[i]);this.drawCalls.length=0;var n=this.colors,o=this.textureIds,s=sn.pop();s||(s=new fs,s.texArray=new ds),s.texArray.count=0,s.start=0,s.size=0,s.type=Ae.TRIANGLES;var a=0,l=null,c=0,d=!1,g=Ae.TRIANGLES,u=0;this.drawCalls.push(s);for(var i=0;i<this.batches.length;i++){var h=this.batches[i],f=8,I=h.style,m=I.texture.baseTexture;d!==!!I.native&&(d=!!I.native,g=d?Ae.LINES:Ae.TRIANGLES,l=null,a=f,e++),l!==m&&(l=m,m._batchEnabled!==e&&(a===f&&(e++,a=0,s.size>0&&(s=sn.pop(),s||(s=new fs,s.texArray=new ds),this.drawCalls.push(s)),s.start=u,s.size=0,s.texArray.count=0,s.type=g),m.touched=1,m._batchEnabled=e,m._batchLocation=a,m.wrapMode=10497,s.texArray.elements[s.texArray.count++]=m,a++)),s.size+=h.size,u+=h.size,c=m._batchLocation,this.addColors(n,I.color,I.alpha,h.attribSize),this.addTextureIds(o,c,h.attribSize)}Et._globalBatch=e,this.packAttributes()},t.prototype.packAttributes=function(){for(var e=this.points,i=this.uvs,n=this.colors,o=this.textureIds,s=new ArrayBuffer(e.length*3*4),a=new Float32Array(s),l=new Uint32Array(s),c=0,d=0;d<e.length/2;d++)a[c++]=e[d*2],a[c++]=e[d*2+1],a[c++]=i[d*2],a[c++]=i[d*2+1],l[c++]=n[d],a[c++]=o[d];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)},t.prototype.processFill=function(e){if(e.holes.length)this.processHoles(e.holes),vc.triangulate(e,this);else{var i=ts[e.type];i.triangulate(e,this)}},t.prototype.processLine=function(e){ph(e,this);for(var i=0;i<e.holes.length;i++)ph(e.holes[i],this)},t.prototype.processHoles=function(e){for(var i=0;i<e.length;i++){var n=e[i],o=ts[n.type];o.build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},t.prototype.calculateBounds=function(){var e=this._bounds,i=rb,n=jt.IDENTITY;this._bounds.clear(),i.clear();for(var o=0;o<this.graphicsData.length;o++){var s=this.graphicsData[o],a=s.shape,l=s.type,c=s.lineStyle,d=s.matrix||jt.IDENTITY,g=0;if(c&&c.visible){var u=c.alignment;g=c.width,l===Rt.POLY?g=g*(.5+Math.abs(.5-u)):g=g*Math.max(0,u)}if(n!==d&&(i.isEmpty()||(e.addBoundsMatrix(i,n),i.clear()),n=d),l===Rt.RECT||l===Rt.RREC){var h=a;i.addFramePad(h.x,h.y,h.x+h.width,h.y+h.height,g,g)}else if(l===Rt.CIRC){var f=a;i.addFramePad(f.x,f.y,f.x,f.y,f.radius+g,f.radius+g)}else if(l===Rt.ELIP){var I=a;i.addFramePad(I.x,I.y,I.x,I.y,I.width+g,I.height+g)}else{var m=a;e.addVerticesMatrix(n,m.points,0,m.points.length,g,g)}}i.isEmpty()||e.addBoundsMatrix(i,n),e.pad(this.boundsPadding,this.boundsPadding)},t.prototype.transformPoints=function(e,i){for(var n=0;n<e.length/2;n++){var o=e[n*2],s=e[n*2+1];e[n*2]=i.a*o+i.c*s+i.tx,e[n*2+1]=i.b*o+i.d*s+i.ty}},t.prototype.addColors=function(e,i,n,o){for(var s=(i>>16)+(i&65280)+((i&255)<<16),a=Es(s,n);o-- >0;)e.push(a)},t.prototype.addTextureIds=function(e,i,n){for(;n-- >0;)e.push(i)},t.prototype.addUvs=function(e,i,n,o,s,a){a===void 0&&(a=null);for(var l=0,c=i.length,d=n.frame;l<s;){var g=e[(o+l)*2],u=e[(o+l)*2+1];if(a){var h=a.a*g+a.c*u+a.tx;u=a.b*g+a.d*u+a.ty,g=h}l++,i.push(g/d.width,u/d.height)}var f=n.baseTexture;(d.width<f.width||d.height<f.height)&&this.adjustUvs(i,n,c,s)},t.prototype.adjustUvs=function(e,i,n,o){for(var s=i.baseTexture,a=1e-6,l=n+o*2,c=i.frame,d=c.width/s.width,g=c.height/s.height,u=c.x/c.width,h=c.y/c.height,f=Math.floor(e[n]+a),I=Math.floor(e[n+1]+a),m=n+2;m<l;m+=2)f=Math.min(f,Math.floor(e[m]+a)),I=Math.min(I,Math.floor(e[m+1]+a));u-=f,h-=I;for(var m=n;m<l;m+=2)e[m]=(e[m]+u)*d,e[m+1]=(e[m+1]+h)*g},t.BATCHABLE_SIZE=100,t}(pc),Mv=function(r){Ls(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=Je.BUTT,e.join=Ui.MITER,e.miterLimit=10,e}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e},t.prototype.reset=function(){r.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},t}(Ic),nb=new Float32Array(3),Ru={},mc=function(r){Ls(t,r);function t(e){e===void 0&&(e=null);var i=r.call(this)||this;return i._geometry=e||new Fv,i._geometry.refCount++,i.shader=null,i.state=Ci.for2d(),i._fillStyle=new Ic,i._lineStyle=new Mv,i._matrix=null,i._holeMode=!1,i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i.pluginName="batch",i._transformID=-1,i.tint=16777215,i.blendMode=ct.NORMAL,i}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return this.finishPoly(),new t(this._geometry)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),t.prototype.lineStyle=function(e){if(e===void 0&&(e=null),typeof e=="number"){var i=arguments;e={width:i[0]||0,color:i[1]||0,alpha:i[2]!==void 0?i[2]:1,alignment:i[3]!==void 0?i[3]:.5,native:!!i[4]}}return this.lineTextureStyle(e)},t.prototype.lineTextureStyle=function(e){if(typeof e=="number"){rt("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var i=arguments,n=i[0],o=i[1],s=i[2],a=i[3],l=i[4],c=i[5],d=i[6];e={width:n,texture:o,color:s,alpha:a,matrix:l,alignment:c,native:d},Object.keys(e).forEach(function(u){return e[u]===void 0&&delete e[u]})}e=Object.assign({width:0,texture:vt.WHITE,color:e&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Je.BUTT,join:Ui.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();var g=e.width>0&&e.alpha>0;return g?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:g},e)):this._lineStyle.reset(),this},t.prototype.startPoly=function(){if(this.currentPath){var e=this.currentPath.points,i=this.currentPath.points.length;i>2&&(this.drawShape(this.currentPath),this.currentPath=new pr,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[i-2],e[i-1]))}else this.currentPath=new pr,this.currentPath.closeStroke=!1},t.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},t.prototype.moveTo=function(e,i){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=i,this},t.prototype.lineTo=function(e,i){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,o=n[n.length-2],s=n[n.length-1];return(o!==e||s!==i)&&n.push(e,i),this},t.prototype._initCurve=function(e,i){e===void 0&&(e=0),i===void 0&&(i=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,i]):this.moveTo(e,i)},t.prototype.quadraticCurveTo=function(e,i,n,o){this._initCurve();var s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),Tv.curveTo(e,i,n,o,s),this},t.prototype.bezierCurveTo=function(e,i,n,o,s,a){return this._initCurve(),Sv.curveTo(e,i,n,o,s,a,this.currentPath.points),this},t.prototype.arcTo=function(e,i,n,o,s){this._initCurve(e,i);var a=this.currentPath.points,l=Ih.curveTo(e,i,n,o,s,a);if(l){var c=l.cx,d=l.cy,g=l.radius,u=l.startAngle,h=l.endAngle,f=l.anticlockwise;this.arc(c,d,g,u,h,f)}return this},t.prototype.arc=function(e,i,n,o,s,a){if(a===void 0&&(a=!1),o===s)return this;!a&&s<=o?s+=wr:a&&o<=s&&(o+=wr);var l=s-o;if(l===0)return this;var c=e+Math.cos(o)*n,d=i+Math.sin(o)*n,g=this._geometry.closePointEps,u=this.currentPath?this.currentPath.points:null;if(u){var h=Math.abs(u[u.length-2]-c),f=Math.abs(u[u.length-1]-d);h<g&&f<g||u.push(c,d)}else this.moveTo(c,d),u=this.currentPath.points;return Ih.arc(c,d,e,i,n,o,s,a,u),this},t.prototype.beginFill=function(e,i){return e===void 0&&(e=0),i===void 0&&(i=1),this.beginTextureFill({texture:vt.WHITE,color:e,alpha:i})},t.prototype.beginTextureFill=function(e){if(e instanceof vt){rt("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var i=arguments,n=i[0],o=i[1],s=i[2],a=i[3];e={texture:n,color:o,alpha:s,matrix:a},Object.keys(e).forEach(function(c){return e[c]===void 0&&delete e[c]})}e=Object.assign({texture:vt.WHITE,color:16777215,alpha:1,matrix:null},e),this.currentPath&&this.startPoly();var l=e.alpha>0;return l?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:l},e)):this._fillStyle.reset(),this},t.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},t.prototype.drawRect=function(e,i,n,o){return this.drawShape(new wt(e,i,n,o))},t.prototype.drawRoundedRect=function(e,i,n,o,s){return this.drawShape(new AI(e,i,n,o,s))},t.prototype.drawCircle=function(e,i,n){return this.drawShape(new _I(e,i,n))},t.prototype.drawEllipse=function(e,i,n,o){return this.drawShape(new CI(e,i,n,o))},t.prototype.drawPolygon=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];var o,s=!0,a=i[0];a.points?(s=a.closeStroke,o=a.points):Array.isArray(i[0])?o=i[0]:o=i;var l=new pr(o);return l.closeStroke=s,this.drawShape(l),this},t.prototype.drawShape=function(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},t.prototype.drawStar=function(e,i,n,o,s,a){return a===void 0&&(a=0),this.drawPolygon(new Pv(e,i,n,o,s,a))},t.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},t.prototype.isFastRect=function(){var e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Rt.RECT&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)},t.prototype._render=function(e){this.finishPoly();var i=this._geometry,n=e.context.supports.uint32Indices;i.updateBatches(n),i.batchable?(this.batchDirty!==i.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))},t.prototype._populateBatches=function(){var e=this._geometry,i=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(var o=0;o<n;o++){var s=e.batches[o],a=s.style.color,l=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),c=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),d=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),g={vertexData:l,blendMode:i,indices:d,uvs:c,_batchRGB:Wi(a),_tintRGB:a,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[o]=g}},t.prototype._renderBatched=function(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var i=0,n=this.batches.length;i<n;i++){var o=this.batches[i];o.worldAlpha=this.worldAlpha*o.alpha,e.plugins[this.pluginName].render(o)}}},t.prototype._renderDirect=function(e){var i=this._resolveDirectShader(e),n=this._geometry,o=this.tint,s=this.worldAlpha,a=i.uniforms,l=n.drawCalls;a.translationMatrix=this.transform.worldTransform,a.tint[0]=(o>>16&255)/255*s,a.tint[1]=(o>>8&255)/255*s,a.tint[2]=(o&255)/255*s,a.tint[3]=s,e.shader.bind(i),e.geometry.bind(n,i),e.state.set(this.state);for(var c=0,d=l.length;c<d;c++)this._renderDrawCallDirect(e,n.drawCalls[c])},t.prototype._renderDrawCallDirect=function(e,i){for(var n=i.texArray,o=i.type,s=i.size,a=i.start,l=n.count,c=0;c<l;c++)e.texture.bind(n.elements[c],c);e.geometry.draw(o,s,a)},t.prototype._resolveDirectShader=function(e){var i=this.shader,n=this.pluginName;if(!i){if(!Ru[n]){for(var o=new Int32Array(16),s=0;s<16;s++)o[s]=s;var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new jt,default:di.from({uSamplers:o},!0)},l=e.plugins[n]._shader.program;Ru[n]=new gi(l,a)}i=Ru[n]}return i},t.prototype._calculateBounds=function(){this.finishPoly();var e=this._geometry;if(e.graphicsData.length){var i=e.bounds,n=i.minX,o=i.minY,s=i.maxX,a=i.maxY;this._bounds.addFrame(this.transform,n,o,s,a)}},t.prototype.containsPoint=function(e){return this.worldTransform.applyInverse(e,t._TEMP_POINT),this._geometry.containsPoint(t._TEMP_POINT)},t.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var e=Wi(this.tint,nb),i=0;i<this.batches.length;i++){var n=this.batches[i],o=n._batchRGB,s=e[0]*o[0]*255,a=e[1]*o[1]*255,l=e[2]*o[2]*255,c=(s<<16)+(a<<8)+(l|0);n._tintRGB=(c>>16)+(c&65280)+((c&255)<<16)}}},t.prototype.calculateVertices=function(){var e=this.transform._worldID;if(this._transformID!==e){this._transformID=e;for(var i=this.transform.worldTransform,n=i.a,o=i.b,s=i.c,a=i.d,l=i.tx,c=i.ty,d=this._geometry.points,g=this.vertexData,u=0,h=0;h<d.length;h+=2){var f=d[h],I=d[h+1];g[u++]=n*f+s*I+l,g[u++]=a*I+o*f+c}}},t.prototype.closePath=function(){var e=this.currentPath;return e&&(e.closeStroke=!0),this},t.prototype.setMatrix=function(e){return this._matrix=e,this},t.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},t.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},t.prototype.destroy=function(e){r.prototype.destroy.call(this,e),this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,r.prototype.destroy.call(this,e)},t._TEMP_POINT=new Kt,t}(Le);/*!
 * @pixi/sprite - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var yh=function(r,t){return yh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},yh(r,t)};function ob(r,t){yh(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var tn=new Kt,sb=new Uint16Array([0,1,2,0,2,3]),jr=function(r){ob(t,r);function t(e){var i=r.call(this)||this;return i._anchor=new Oi(i._onAnchorUpdate,i,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=ct.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=e||vt.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=sb,i.pluginName="batch",i.isSprite=!0,i._roundPixels=ht.ROUND_PIXELS,i}return t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ri(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ri(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){var e=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===e._updateID)){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var i=this.transform.worldTransform,n=i.a,o=i.b,s=i.c,a=i.d,l=i.tx,c=i.ty,d=this.vertexData,g=e.trim,u=e.orig,h=this._anchor,f=0,I=0,m=0,y=0;if(g?(I=g.x-h._x*u.width,f=I+g.width,y=g.y-h._y*u.height,m=y+g.height):(I=-h._x*u.width,f=I+u.width,y=-h._y*u.height,m=y+u.height),d[0]=n*I+s*y+l,d[1]=a*y+o*I+c,d[2]=n*f+s*y+l,d[3]=a*y+o*f+c,d[4]=n*f+s*m+l,d[5]=a*m+o*f+c,d[6]=n*I+s*m+l,d[7]=a*m+o*I+c,this._roundPixels)for(var v=ht.RESOLUTION,p=0;p<d.length;++p)d[p]=Math.round((d[p]*v|0)/v)}},t.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,i=this.vertexTrimmedData,n=e.orig,o=this._anchor,s=this.transform.worldTransform,a=s.a,l=s.b,c=s.c,d=s.d,g=s.tx,u=s.ty,h=-o._x*n.width,f=h+n.width,I=-o._y*n.height,m=I+n.height;i[0]=a*h+c*I+g,i[1]=d*I+l*h+u,i[2]=a*f+c*I+g,i[3]=d*I+l*f+u,i[4]=a*f+c*m+g,i[5]=d*m+l*f+u,i[6]=a*h+c*m+g,i[7]=d*m+l*h+u},t.prototype._render=function(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var e=this._texture.trim,i=this._texture.orig;!e||e.width===i.width&&e.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(e){return this.children.length===0?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new wt),e=this._localBoundsRect),this._bounds.getRectangle(e)):r.prototype.getLocalBounds.call(this,e)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,tn);var i=this._texture.orig.width,n=this._texture.orig.height,o=-i*this.anchor.x,s=0;return tn.x>=o&&tn.x<o+i&&(s=-n*this.anchor.y,tn.y>=s&&tn.y<s+n)},t.prototype.destroy=function(e){r.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var i=typeof e=="boolean"?e:e&&e.texture;if(i){var n=typeof e=="boolean"?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null},t.from=function(e,i){var n=e instanceof vt?e:vt.from(e,i);return new t(n)},Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var i=Ri(this.scale.x)||1;this.scale.x=i*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var i=Ri(this.scale.y)||1;this.scale.y=i*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||vt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),t}(Le);/*!
 * @pixi/text - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var _h=function(r,t){return _h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},_h(r,t)};function ab(r,t){_h(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Sr;(function(r){r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(Sr||(Sr={}));var Ou={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Sr.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},ub=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],zi=function(){function r(t){this.styleID=0,this.reset(),Gu(this,t,t)}return r.prototype.clone=function(){var t={};return Gu(t,this,Ou),new r(t)},r.prototype.reset=function(){Gu(this,Ou,Ou)},Object.defineProperty(r.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=Zu(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=Zu(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){lb(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=Zu(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),r.prototype.toFontString=function(){var t=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var n=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&ub.indexOf(n)<0&&(n='"'+n+'"'),e[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},r}();function Md(r){return typeof r=="number"?tc(r):(typeof r=="string"&&r.indexOf("0x")===0&&(r=r.replace("0x","#")),r)}function Zu(r){if(Array.isArray(r)){for(var t=0;t<r.length;++t)r[t]=Md(r[t]);return r}else return Md(r)}function lb(r,t){if(!Array.isArray(r)||!Array.isArray(t)||r.length!==t.length)return!1;for(var e=0;e<r.length;++e)if(r[e]!==t[e])return!1;return!0}function Gu(r,t,e){for(var i in e)Array.isArray(t[i])?r[i]=t[i].slice():r[i]=t[i]}var xe=function(){function r(t,e,i,n,o,s,a,l,c){this.text=t,this.style=e,this.width=i,this.height=n,this.lines=o,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=c}return r.measureText=function(t,e,i,n){n===void 0&&(n=r._canvas),i=i??e.wordWrap;var o=e.toFontString(),s=r.measureFont(o);s.fontSize===0&&(s.fontSize=e.fontSize,s.ascent=e.fontSize);var a=n.getContext("2d");a.font=o;for(var l=i?r.wordWrap(t,e,n):t,c=l.split(/(?:\r\n|\r|\n)/),d=new Array(c.length),g=0,u=0;u<c.length;u++){var h=a.measureText(c[u]).width+(c[u].length-1)*e.letterSpacing;d[u]=h,g=Math.max(g,h)}var f=g+e.strokeThickness;e.dropShadow&&(f+=e.dropShadowDistance);var I=e.lineHeight||s.fontSize+e.strokeThickness,m=Math.max(I,s.fontSize+e.strokeThickness)+(c.length-1)*(I+e.leading);return e.dropShadow&&(m+=e.dropShadowDistance),new r(t,e,f,m,c,d,I+e.leading,g,s)},r.wordWrap=function(t,e,i){i===void 0&&(i=r._canvas);for(var n=i.getContext("2d"),o=0,s="",a="",l={},c=e.letterSpacing,d=e.whiteSpace,g=r.collapseSpaces(d),u=r.collapseNewlines(d),h=!g,f=e.wordWrapWidth+c,I=r.tokenize(t),m=0;m<I.length;m++){var y=I[m];if(r.isNewline(y)){if(!u){a+=r.addLine(s),h=!g,s="",o=0;continue}y=" "}if(g){var v=r.isBreakingSpace(y),p=r.isBreakingSpace(s[s.length-1]);if(v&&p)continue}var _=r.getFromCache(y,c,l,n);if(_>f)if(s!==""&&(a+=r.addLine(s),s="",o=0),r.canBreakWords(y,e.breakWords))for(var A=r.wordWrapSplit(y),b=0;b<A.length;b++){for(var P=A[b],E=1;A[b+E];){var C=A[b+E],x=P[P.length-1];if(!r.canBreakChars(x,C,y,b,e.breakWords))P+=C;else break;E++}b+=P.length-1;var F=r.getFromCache(P,c,l,n);F+o>f&&(a+=r.addLine(s),h=!1,s="",o=0),s+=P,o+=F}else{s.length>0&&(a+=r.addLine(s),s="",o=0);var R=m===I.length-1;a+=r.addLine(y,!R),h=!1,s="",o=0}else _+o>f&&(h=!1,a+=r.addLine(s),s="",o=0),(s.length>0||!r.isBreakingSpace(y)||h)&&(s+=y,o+=_)}return a+=r.addLine(s,!1),a},r.addLine=function(t,e){return e===void 0&&(e=!0),t=r.trimRight(t),t=e?t+`
`:t,t},r.getFromCache=function(t,e,i,n){var o=i[t];if(o===void 0){var s=t.length*e;o=n.measureText(t).width+s,i[t]=o}return o},r.collapseSpaces=function(t){return t==="normal"||t==="pre-line"},r.collapseNewlines=function(t){return t==="normal"},r.trimRight=function(t){if(typeof t!="string")return"";for(var e=t.length-1;e>=0;e--){var i=t[e];if(!r.isBreakingSpace(i))break;t=t.slice(0,-1)}return t},r.isNewline=function(t){return typeof t!="string"?!1:r._newlines.indexOf(t.charCodeAt(0))>=0},r.isBreakingSpace=function(t){return typeof t!="string"?!1:r._breakingSpaces.indexOf(t.charCodeAt(0))>=0},r.tokenize=function(t){var e=[],i="";if(typeof t!="string")return e;for(var n=0;n<t.length;n++){var o=t[n];if(r.isBreakingSpace(o)||r.isNewline(o)){i!==""&&(e.push(i),i=""),e.push(o);continue}i+=o}return i!==""&&e.push(i),e},r.canBreakWords=function(t,e){return e},r.canBreakChars=function(t,e,i,n,o){return!0},r.wordWrapSplit=function(t){return t.split("")},r.measureFont=function(t){if(r._fonts[t])return r._fonts[t];var e={ascent:0,descent:0,fontSize:0},i=r._canvas,n=r._context;n.font=t;var o=r.METRICS_STRING+r.BASELINE_SYMBOL,s=Math.ceil(n.measureText(o).width),a=Math.ceil(n.measureText(r.BASELINE_SYMBOL).width),l=2*a;a=a*r.BASELINE_MULTIPLIER|0,i.width=s,i.height=l,n.fillStyle="#f00",n.fillRect(0,0,s,l),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(o,0,a);var c=n.getImageData(0,0,s,l).data,d=c.length,g=s*4,u=0,h=0,f=!1;for(u=0;u<a;++u){for(var I=0;I<g;I+=4)if(c[h+I]!==255){f=!0;break}if(!f)h+=g;else break}for(e.ascent=a-u,h=d-g,f=!1,u=l;u>a;--u){for(var I=0;I<g;I+=4)if(c[h+I]!==255){f=!0;break}if(!f)h-=g;else break}return e.descent=u-a,e.fontSize=e.ascent+e.descent,r._fonts[t]=e,e},r.clearMetrics=function(t){t===void 0&&(t=""),t?delete r._fonts[t]:r._fonts={}},r}(),gs=function(){try{var r=new OffscreenCanvas(0,0),t=r.getContext("2d");return t&&t.measureText?r:document.createElement("canvas")}catch{return document.createElement("canvas")}}();gs.width=gs.height=10;xe._canvas=gs;xe._context=gs.getContext("2d");xe._fonts={};xe.METRICS_STRING="|ÉqÅ";xe.BASELINE_SYMBOL="M";xe.BASELINE_MULTIPLIER=1.4;xe._newlines=[10,13];xe._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var hb={texture:!0,children:!1,baseTexture:!0},yc=function(r){ab(t,r);function t(e,i,n){var o=this,s=!1;n||(n=document.createElement("canvas"),s=!0),n.width=3,n.height=3;var a=vt.from(n);return a.orig=new wt,a.trim=new wt,o=r.call(this,a)||this,o._ownCanvas=s,o.canvas=n,o.context=o.canvas.getContext("2d"),o._resolution=ht.RESOLUTION,o._autoResolution=!0,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=e,o.style=i,o.localStyleID=-1,o}return t.prototype.updateText=function(e){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),!(!this.dirty&&e)){this._font=this._style.toFontString();var n=this.context,o=xe.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=o.width,a=o.height,l=o.lines,c=o.lineHeight,d=o.lineWidths,g=o.maxLineWidth,u=o.fontProperties;this.canvas.width=Math.ceil((Math.max(1,s)+i.padding*2)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,a)+i.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=i.strokeThickness,n.textBaseline=i.textBaseline,n.lineJoin=i.lineJoin,n.miterLimit=i.miterLimit;for(var h,f,I=i.dropShadow?2:1,m=0;m<I;++m){var y=i.dropShadow&&m===0,v=y?a*2:0,p=v*this.resolution;if(y){n.fillStyle="black",n.strokeStyle="black";var _=i.dropShadowColor,A=Wi(typeof _=="number"?_:ec(_));n.shadowColor="rgba("+A[0]*255+","+A[1]*255+","+A[2]*255+","+i.dropShadowAlpha+")",n.shadowBlur=i.dropShadowBlur,n.shadowOffsetX=Math.cos(i.dropShadowAngle)*i.dropShadowDistance,n.shadowOffsetY=Math.sin(i.dropShadowAngle)*i.dropShadowDistance+p}else n.fillStyle=this._generateFillStyle(i,l,o),n.strokeStyle=i.stroke,n.shadowColor="0",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;for(var b=0;b<l.length;b++)h=i.strokeThickness/2,f=i.strokeThickness/2+b*c+u.ascent,i.align==="right"?h+=g-d[b]:i.align==="center"&&(h+=(g-d[b])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(l[b],h+i.padding,f+i.padding-v,!0),i.fill&&this.drawLetterSpacing(l[b],h+i.padding,f+i.padding-v)}this.updateTexture()}},t.prototype.drawLetterSpacing=function(e,i,n,o){o===void 0&&(o=!1);var s=this._style,a=s.letterSpacing;if(a===0){o?this.context.strokeText(e,i,n):this.context.fillText(e,i,n);return}for(var l=i,c=Array.from?Array.from(e):e.split(""),d=this.context.measureText(e).width,g=0,u=0;u<c.length;++u){var h=c[u];o?this.context.strokeText(h,l,n):this.context.fillText(h,l,n),g=this.context.measureText(e.substring(u+1)).width,l+=d-g+a,d=g}},t.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var i=pI(e);i.data&&(e.width=i.width,e.height=i.height,this.context.putImageData(i.data,0,0))}var n=this._texture,o=this._style,s=o.trim?0:o.padding,a=n.baseTexture;n.trim.width=n._frame.width=Math.ceil(e.width/this._resolution),n.trim.height=n._frame.height=Math.ceil(e.height/this._resolution),n.trim.x=-s,n.trim.y=-s,n.orig.width=n._frame.width-s*2,n.orig.height=n._frame.height-s*2,this._onTextureUpdate(),a.setRealSize(e.width,e.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},t.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),r.prototype._render.call(this,e)},t.prototype.getLocalBounds=function(e){return this.updateText(!0),r.prototype.getLocalBounds.call(this,e)},t.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._generateFillStyle=function(e,i,n){var o=e.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;var s,a=e.dropShadow?e.dropShadowDistance:0,l=e.padding||0,c=Math.ceil(this.canvas.width/this._resolution)-a-l*2,d=Math.ceil(this.canvas.height/this._resolution)-a-l*2,g=o.slice(),u=e.fillGradientStops.slice();if(!u.length)for(var h=g.length+1,f=1;f<h;++f)u.push(f/h);if(g.unshift(o[0]),u.unshift(0),g.push(o[o.length-1]),u.push(1),e.fillGradientType===Sr.LINEAR_VERTICAL){s=this.context.createLinearGradient(c/2,l,c/2,d+l);for(var I=0,m=n.fontProperties.fontSize+e.strokeThickness,y=m/d,f=0;f<i.length;f++)for(var v=n.lineHeight*f,p=0;p<g.length;p++){var _=0;typeof u[p]=="number"?_=u[p]:_=p/g.length;var A=v/d+_*y,b=Math.max(I,A);b=Math.min(b,1),s.addColorStop(b,g[p]),I=b}}else{s=this.context.createLinearGradient(l,d/2,c+l,d/2);for(var P=g.length+1,E=1,f=0;f<g.length;f++){var C=void 0;typeof u[f]=="number"?C=u[f]:C=E/P,s.addColorStop(C,g[f]),E++}}return s},t.prototype.destroy=function(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},hb,e),r.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var i=Ri(this.scale.x)||1;this.scale.x=i*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var i=Ri(this.scale.y)||1;this.scale.y=i*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(e){e=e||{},e instanceof zi?this._style=e:this._style=new zi(e),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),t}(jr);/*!
 * @pixi/prepare - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ht.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ch=function(r,t){return Ch=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Ch(r,t)};function cb(r,t){Ch(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Dv=function(){function r(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return r.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},r.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},r}();function fb(r,t){var e=!1;if(r&&r._textures&&r._textures.length){for(var i=0;i<r._textures.length;i++)if(r._textures[i]instanceof vt){var n=r._textures[i].baseTexture;t.indexOf(n)===-1&&(t.push(n),e=!0)}}return e}function db(r,t){if(r.baseTexture instanceof Et){var e=r.baseTexture;return t.indexOf(e)===-1&&t.push(e),!0}return!1}function gb(r,t){if(r._texture&&r._texture instanceof vt){var e=r._texture.baseTexture;return t.indexOf(e)===-1&&t.push(e),!0}return!1}function pb(r,t){return t instanceof yc?(t.updateText(!0),!0):!1}function Ib(r,t){if(t instanceof zi){var e=t.toFontString();return xe.measureFont(e),!0}return!1}function vb(r,t){if(r instanceof yc){t.indexOf(r.style)===-1&&t.push(r.style),t.indexOf(r)===-1&&t.push(r);var e=r._texture.baseTexture;return t.indexOf(e)===-1&&t.push(e),!0}return!1}function mb(r,t){return r instanceof zi?(t.indexOf(r)===-1&&t.push(r),!0):!1}var Lv=function(){function r(t){var e=this;this.limiter=new Dv(ht.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(vb),this.registerFindHook(mb),this.registerFindHook(fb),this.registerFindHook(db),this.registerFindHook(gb),this.registerUploadHook(pb),this.registerUploadHook(Ib)}return r.prototype.upload=function(t,e){typeof t=="function"&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,Qt.system.addOnce(this.tick,this,je.UTILITY))):e&&e()},r.prototype.tick=function(){setTimeout(this.delayedTick,0)},r.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed){for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)Qt.system.addOnce(this.tick,this,je.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var i=0,n=o.length;i<n;i++)o[i]()}},r.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},r.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},r.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof Le)for(var e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},r.prototype.destroy=function(){this.ticking&&Qt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},r}();function Bv(r,t){return t instanceof Et?(t._glTextures[r.CONTEXT_UID]||r.texture.bind(t),!0):!1}function yb(r,t){if(!(t instanceof mc))return!1;var e=t.geometry;t.finishPoly(),e.updateBatches();for(var i=e.batches,n=0;n<i.length;n++){var o=i[n].style.texture;o&&Bv(r,o.baseTexture)}return e.batchable||r.geometry.bind(e,t._resolveDirectShader(r)),!0}function _b(r,t){return r instanceof mc?(t.push(r),!0):!1}var Rv=function(r){cb(t,r);function t(e){var i=r.call(this,e)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(_b),i.registerUploadHook(Bv),i.registerUploadHook(yb),i}return t}(Lv),Cb=function(){function r(t){this.maxMilliseconds=t,this.frameStart=0}return r.prototype.beginFrame=function(){this.frameStart=Date.now()},r.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},r}();/*!
 * @pixi/spritesheet - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ov=function(){function r(t,e,i){i===void 0&&(i=null),this._texture=t instanceof vt?t:null,this.baseTexture=t instanceof Et?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var n=this.baseTexture.resource;this.resolution=this._updateResolution(i||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return r.prototype._updateResolution=function(t){t===void 0&&(t=null);var e=this.data.meta.scale,i=Cn(t,null);return i===null&&(i=e!==void 0?parseFloat(e):1),i!==1&&this.baseTexture.setResolution(i),i},r.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=r.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},r.prototype._processFrames=function(t){for(var e=t,i=r.BATCH_SIZE;e-t<i&&e<this._frameKeys.length;){var n=this._frameKeys[e],o=this._frames[n],s=o.frame;if(s){var a=null,l=null,c=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,d=new wt(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);o.rotated?a=new wt(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):a=new wt(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(l=new wt(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[n]=new vt(this.baseTexture,a,d,l,o.rotated?2:0,o.anchor),vt.addToCache(this.textures[n],n)}e++}},r.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var i=0;i<t[e].length;i++){var n=t[e][i];this.animations[e].push(this.textures[n])}}},r.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},r.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*r.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*r.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},r.prototype.destroy=function(t){var e;t===void 0&&(t=!1);for(var i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)===null||e===void 0||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},r.BATCH_SIZE=1e3,r}(),Zv=function(){function r(){}return r.use=function(t,e){var i=this,n=t.name+"_image";if(!t.data||t.type!==cn.TYPE.JSON||!t.data.frames||i.resources[n]){e();return}var o={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},s=r.getResourcePath(t,i.baseUrl);i.add(n,s,o,function(l){if(l.error){e(l.error);return}var c=new Ov(l.texture,t.data,t.url);c.parse(function(){t.spritesheet=c,t.textures=c.textures,e()})})},r.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:Vi.resolve(t.url.replace(e,""),t.data.meta.image)},r}();/*!
 * @pixi/sprite-tiling - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ah=function(r,t){return Ah=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Ah(r,t)};function Gv(r,t){Ah(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var en=new Kt,Ab=function(r){Gv(t,r);function t(e,i,n){i===void 0&&(i=100),n===void 0&&(n=100);var o=r.call(this,e)||this;return o.tileTransform=new oc,o._width=i,o._height=n,o.uvMatrix=e.uvMatrix||new Ds(e),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}return Object.defineProperty(t.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copyFrom(e)},enumerable:!1,configurable:!0}),t.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},t.prototype._render=function(e){var i=this._texture;!i||!i.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},t.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,i=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),o=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,i,n,o)},t.prototype.getLocalBounds=function(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new wt),e=this._localBoundsRect),this._bounds.getRectangle(e)):r.prototype.getLocalBounds.call(this,e)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,en);var i=this._width,n=this._height,o=-i*this.anchor._x;if(en.x>=o&&en.x<o+i){var s=-n*this.anchor._y;if(en.y>=s&&en.y<s+n)return!0}return!1},t.prototype.destroy=function(e){r.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},t.from=function(e,i){return typeof i=="number"&&(rt("5.3.0","TilingSprite.from use options instead of width and height args"),i={width:i,height:arguments[2]}),new t(vt.from(e,i),i.width,i.height)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0}),t}(jr),Dd=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,bb=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord - floor(vTextureCoord - uClampOffset);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture2D(uSampler, coord);
    gl_FragColor = texSample * uColor;
}
`,wb=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 sample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = sample * uColor;
}
`,Ro=new jt,Nv=function(r){Gv(t,r);function t(e){var i=r.call(this,e)||this,n={globals:i.renderer.globalUniforms};return i.shader=gi.from(Dd,bb,n),i.simpleShader=gi.from(Dd,wb,n),i.quad=new dc,i.state=Ci.for2d(),i}return t.prototype.render=function(e){var i=this.renderer,n=this.quad,o=n.vertices;o[0]=o[6]=e._width*-e.anchor.x,o[1]=o[3]=e._height*-e.anchor.y,o[2]=o[4]=e._width*(1-e.anchor.x),o[5]=o[7]=e._height*(1-e.anchor.y),e.uvRespectAnchor&&(o=n.uvs,o[0]=o[6]=-e.anchor.x,o[1]=o[3]=-e.anchor.y,o[2]=o[4]=1-e.anchor.x,o[5]=o[7]=1-e.anchor.y),n.invalidate();var s=e._texture,a=s.baseTexture,l=e.tileTransform.localTransform,c=e.uvMatrix,d=a.isPowerOfTwo&&s.frame.width===a.width&&s.frame.height===a.height;d&&(a._glTextures[i.CONTEXT_UID]?d=a.wrapMode!==$e.CLAMP:a.wrapMode===$e.CLAMP&&(a.wrapMode=$e.REPEAT));var g=d?this.simpleShader:this.shader,u=s.width,h=s.height,f=e._width,I=e._height;Ro.set(l.a*u/f,l.b*u/I,l.c*h/f,l.d*h/I,l.tx/f,l.ty/I),Ro.invert(),d?Ro.prepend(c.mapCoord):(g.uniforms.uMapCoord=c.mapCoord.toArray(!0),g.uniforms.uClampFrame=c.uClampFrame,g.uniforms.uClampOffset=c.uClampOffset),g.uniforms.uTransform=Ro.toArray(!0),g.uniforms.uColor=nc(e.tint,e.worldAlpha,g.uniforms.uColor,a.alphaMode),g.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),g.uniforms.uSampler=s,i.shader.bind(g),i.geometry.bind(n),this.state.blendMode=rc(e.blendMode,a.alphaMode),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},t}(Ln);/*!
 * @pixi/mesh - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var bh=function(r,t){return bh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},bh(r,t)};function _c(r,t){bh(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var jv=function(){function r(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return r.prototype.update=function(t){if(!(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},r}(),Nu=new Kt,Ld=new pr,Tr=function(r){_c(t,r);function t(e,i,n,o){o===void 0&&(o=Ae.TRIANGLES);var s=r.call(this)||this;return s.geometry=e,e.refCount++,s.shader=i,s.state=n||Ci.for2d(),s.drawMode=o,s.start=0,s.size=0,s.uvs=null,s.indices=null,s.vertexData=new Float32Array(1),s.vertexDirty=0,s._transformID=-1,s.tint=16777215,s.blendMode=ct.NORMAL,s._roundPixels=ht.ROUND_PIXELS,s.batchUvs=null,s}return Object.defineProperty(t.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this.shader},set:function(e){this.shader=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this.shader.tint},set:function(e){this.shader.tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){this.shader.texture=e},enumerable:!1,configurable:!0}),t.prototype._render=function(e){var i=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Ae.TRIANGLES&&i.length<t.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)},t.prototype._renderDefault=function(e){var i=this.shader;i.alpha=this.worldAlpha,i.update&&i.update(),e.batch.flush(),i.program.uniformData.translationMatrix&&(i.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),e.shader.bind(i),e.state.set(this.state),e.geometry.bind(this.geometry,i),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},t.prototype._renderToBatch=function(e){var i=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=i.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var n=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[n]),e.plugins[n].render(this)},t.prototype.calculateVertices=function(){var e=this.geometry,i=e.buffers[0].data;if(!(e.vertexDirtyId===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));for(var n=this.transform.worldTransform,o=n.a,s=n.b,a=n.c,l=n.d,c=n.tx,d=n.ty,g=this.vertexData,u=0;u<g.length/2;u++){var h=i[u*2],f=i[u*2+1];g[u*2]=o*h+a*f+c,g[u*2+1]=s*h+l*f+d}if(this._roundPixels)for(var I=ht.RESOLUTION,u=0;u<g.length;++u)g[u]=Math.round((g[u]*I|0)/I);this.vertexDirty=e.vertexDirtyId}},t.prototype.calculateUvs=function(){var e=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new jv(e,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,Nu);for(var i=this.geometry.getBuffer("aVertexPosition").data,n=Ld.points,o=this.geometry.getIndex().data,s=o.length,a=this.drawMode===4?3:1,l=0;l+2<s;l+=a){var c=o[l]*2,d=o[l+1]*2,g=o[l+2]*2;if(n[0]=i[c],n[1]=i[c+1],n[2]=i[d],n[3]=i[d+1],n[4]=i[g],n[5]=i[g+1],Ld.contains(Nu.x,Nu.y))return!0}return!1},t.prototype.destroy=function(e){r.prototype.destroy.call(this,e),this.geometry.refCount--,this.geometry.refCount===0&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},t.BATCHABLE_SIZE=100,t}(Le),xb=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,Pb=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,Rn=function(r){_c(t,r);function t(e,i){var n=this,o={uSampler:e,alpha:1,uTextureMatrix:jt.IDENTITY,uColor:new Float32Array([1,1,1,1])};return i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i),i.uniforms&&Object.assign(o,i.uniforms),n=r.call(this,i.program||Bn.from(Pb,xb),o)||this,n._colorDirty=!1,n.uvMatrix=new Ds(e),n.batchable=i.program===void 0,n.pluginName=i.pluginName,n.tint=i.tint,n.alpha=i.alpha,n}return Object.defineProperty(t.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(e){this.uniforms.uSampler!==e&&(this.uniforms.uSampler=e,this.uvMatrix.texture=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),t.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var e=this.texture.baseTexture;nc(this._tint,this._alpha,this.uniforms.uColor,e.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},t}(gi),On=function(r){_c(t,r);function t(e,i,n){var o=r.call(this)||this,s=new Jt(e),a=new Jt(i,!0),l=new Jt(n,!0,!0);return o.addAttribute("aVertexPosition",s,2,!1,Nt.FLOAT).addAttribute("aTextureCoord",a,2,!1,Nt.FLOAT).addIndex(l),o._updateId=-1,o}return Object.defineProperty(t.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),t}(Gr);/*!
 * @pixi/text-bitmap - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var wh=function(r,t){return wh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},wh(r,t)};function Sb(r,t){wh(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var bn=function(){function r(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]}return r}(),Tb=function(){function r(){}return r.test=function(t){return typeof t=="string"&&t.indexOf("info face=")===0},r.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[]};for(var n in e){var o=e[n].match(/^[a-z]+/gm)[0],s=e[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var l in s){var c=s[l].split("="),d=c[0],g=c[1].replace(/"/gm,""),u=parseFloat(g),h=isNaN(u)?g:u;a[d]=h}i[o].push(a)}var f=new bn;return i.info.forEach(function(I){return f.info.push({face:I.face,size:parseInt(I.size,10)})}),i.common.forEach(function(I){return f.common.push({lineHeight:parseInt(I.lineHeight,10)})}),i.page.forEach(function(I){return f.page.push({id:parseInt(I.id,10),file:I.file})}),i.char.forEach(function(I){return f.char.push({id:parseInt(I.id,10),page:parseInt(I.page,10),x:parseInt(I.x,10),y:parseInt(I.y,10),width:parseInt(I.width,10),height:parseInt(I.height,10),xoffset:parseInt(I.xoffset,10),yoffset:parseInt(I.yoffset,10),xadvance:parseInt(I.xadvance,10)})}),i.kerning.forEach(function(I){return f.kerning.push({first:parseInt(I.first,10),second:parseInt(I.second,10),amount:parseInt(I.amount,10)})}),f},r}(),Eb=function(){function r(){}return r.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},r.parse=function(t){for(var e=new bn,i=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),o=t.getElementsByTagName("page"),s=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),l=0;l<i.length;l++)e.info.push({face:i[l].getAttribute("face"),size:parseInt(i[l].getAttribute("size"),10)});for(var l=0;l<n.length;l++)e.common.push({lineHeight:parseInt(n[l].getAttribute("lineHeight"),10)});for(var l=0;l<o.length;l++)e.page.push({id:parseInt(o[l].getAttribute("id"),10)||0,file:o[l].getAttribute("file")});for(var l=0;l<s.length;l++){var c=s[l];e.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(var l=0;l<a.length;l++)e.kerning.push({first:parseInt(a[l].getAttribute("first"),10),second:parseInt(a[l].getAttribute("second"),10),amount:parseInt(a[l].getAttribute("amount"),10)});return e},r}(),ju=[Tb,Eb];function kv(r){for(var t=0;t<ju.length;t++)if(ju[t].test(r))return ju[t];return null}function Bd(r,t,e,i,n,o){var s=e.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;var a,l=e.dropShadow?e.dropShadowDistance:0,c=e.padding||0,d=Math.ceil(r.width/i)-l-c*2,g=Math.ceil(r.height/i)-l-c*2,u=s.slice(),h=e.fillGradientStops.slice();if(!h.length)for(var f=u.length+1,I=1;I<f;++I)h.push(I/f);if(u.unshift(s[0]),h.unshift(0),u.push(s[s.length-1]),h.push(1),e.fillGradientType===Sr.LINEAR_VERTICAL){a=t.createLinearGradient(d/2,c,d/2,g+c);for(var m=0,y=o.fontProperties.fontSize+e.strokeThickness,v=y/g,I=0;I<n.length;I++)for(var p=o.lineHeight*I,_=0;_<u.length;_++){var A=0;typeof h[_]=="number"?A=h[_]:A=_/u.length;var b=p/g+A*v,P=Math.max(m,b);P=Math.min(P,1),a.addColorStop(P,u[_]),m=P}}else{a=t.createLinearGradient(c,g/2,d+c,g/2);for(var E=u.length+1,C=1,I=0;I<u.length;I++){var x=void 0;typeof h[I]=="number"?x=h[I]:x=C/E,a.addColorStop(x,u[I]),C++}}return a}function Fb(r,t,e,i,n,o,s){var a=e.text,l=e.fontProperties;t.translate(i,n),t.scale(o,o);var c=s.strokeThickness/2,d=-(s.strokeThickness/2);t.font=s.toFontString(),t.lineWidth=s.strokeThickness,t.textBaseline=s.textBaseline,t.lineJoin=s.lineJoin,t.miterLimit=s.miterLimit,t.fillStyle=Bd(r,t,s,o,[a],e),t.strokeStyle=s.stroke,t.font=s.toFontString(),t.lineWidth=s.strokeThickness,t.textBaseline=s.textBaseline,t.lineJoin=s.lineJoin,t.miterLimit=s.miterLimit,t.fillStyle=Bd(r,t,s,o,[a],e),t.strokeStyle=s.stroke;var g=s.dropShadowColor,u=Wi(typeof g=="number"?g:ec(g));s.dropShadow?(t.shadowColor="rgba("+u[0]*255+","+u[1]*255+","+u[2]*255+","+s.dropShadowAlpha+")",t.shadowBlur=s.dropShadowBlur,t.shadowOffsetX=Math.cos(s.dropShadowAngle)*s.dropShadowDistance,t.shadowOffsetY=Math.sin(s.dropShadowAngle)*s.dropShadowDistance):(t.shadowColor="0",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),s.stroke&&s.strokeThickness&&t.strokeText(a,c,d+e.lineHeight-l.descent),s.fill&&t.fillText(a,c,d+e.lineHeight-l.descent),t.setTransform(),t.fillStyle="rgba(0, 0, 0, 0)"}function Mb(r){typeof r=="string"&&(r=[r]);for(var t=[],e=0,i=r.length;e<i;e++){var n=r[e];if(Array.isArray(n)){if(n.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var o=n[0].charCodeAt(0),s=n[1].charCodeAt(0);if(s<o)throw new Error("[BitmapFont]: Invalid character range.");for(var a=o,l=s;a<=l;a++)t.push(String.fromCharCode(a))}else t.push.apply(t,n.split(""))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}var ui=function(){function r(t,e){var i=t.info[0],n=t.common[0],o=t.page[0],s=Cn(o.file),a={};this.font=i.face,this.size=i.size,this.lineHeight=n.lineHeight/s,this.chars={},this.pageTextures=a;for(var l=0;l<t.page.length;l++){var c=t.page[l],d=c.id,g=c.file;a[d]=e instanceof Array?e[l]:e[g]}for(var l=0;l<t.char.length;l++){var u=t.char[l],d=u.id,h=u.page,f=t.char[l],I=f.x,m=f.y,y=f.width,v=f.height,p=f.xoffset,_=f.yoffset,A=f.xadvance;I/=s,m/=s,y/=s,v/=s,p/=s,_/=s,A/=s;var b=new wt(I+a[h].frame.x/s,m+a[h].frame.y/s,y,v);this.chars[d]={xOffset:p,yOffset:_,xAdvance:A,kerning:{},texture:new vt(a[h].baseTexture,b),page:h}}for(var l=0;l<t.kerning.length;l++){var P=t.kerning[l],E=P.first,C=P.second,x=P.amount;E/=s,C/=s,x/=s,this.chars[C]&&(this.chars[C].kerning[E]=x)}}return r.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},r.install=function(t,e){var i;if(t instanceof bn)i=t;else{var n=kv(t);if(!n)throw new Error("Unrecognized data format for font.");i=n.parse(t)}e instanceof vt&&(e=[e]);var o=new r(i,e);return r.available[o.font]=o,o},r.uninstall=function(t){var e=r.available[t];if(!e)throw new Error("No font found named '"+t+"'");e.destroy(),delete r.available[t]},r.from=function(t,e,i){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var n=Object.assign({},r.defaultOptions,i),o=n.chars,s=n.padding,a=n.resolution,l=n.textureWidth,c=n.textureHeight,d=Mb(o),g=e instanceof zi?e:new zi(e),u=l,h=new bn;h.info[0]={face:g.fontFamily,size:g.fontSize},h.common[0]={lineHeight:g.fontSize};for(var f=0,I=0,m,y,v,p=0,_=[],A=0;A<d.length;A++){m||(m=document.createElement("canvas"),m.width=l,m.height=c,y=m.getContext("2d"),v=new Et(m,{resolution:a}),_.push(new vt(v)),h.page.push({id:_.length-1,file:""}));var b=xe.measureText(d[A],g,!1,m),P=b.width,E=Math.ceil(b.height),C=Math.ceil((g.fontStyle==="italic"?2:1)*P);if(I>=c-E*a){if(I===0)throw new Error("[BitmapFont] textureHeight "+c+"px is "+("too small for "+g.fontSize+"px fonts"));--A,m=null,y=null,v=null,I=0,f=0,p=0;continue}if(p=Math.max(E+b.fontProperties.descent,p),C*a+f>=u){--A,I+=p*a,I=Math.ceil(I),f=0,p=0;continue}Fb(m,y,b,f,I,a,g);var x=b.text.charCodeAt(0);h.char.push({id:x,page:_.length-1,x:f/a,y:I/a,width:C,height:E,xoffset:0,yoffset:0,xadvance:Math.ceil(P-(g.dropShadow?g.dropShadowDistance:0)-(g.stroke?g.strokeThickness:0))}),f+=(C+2*s)*a,f=Math.ceil(f)}var F=new r(h,_);return r.available[t]!==void 0&&r.uninstall(t),r.available[t]=F,F},r.ALPHA=[["a","z"],["A","Z"]," "],r.NUMERIC=[["0","9"]],r.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],r.ASCII=[[" ","~"]],r.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:r.ALPHANUMERIC},r.available={},r}(),Rd=[],Od=[],Db=function(r){Sb(t,r);function t(e,i){i===void 0&&(i={});var n=r.call(this)||this;n._tint=16777215,i.font&&(rt("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),n._upgradeStyle(i));var o=Object.assign({},t.styleDefaults,i),s=o.align,a=o.tint,l=o.maxWidth,c=o.letterSpacing,d=o.fontName,g=o.fontSize;if(!ui.available[d])throw new Error('Missing BitmapFont "'+d+'"');return n._activePagesMeshData=[],n._textWidth=0,n._textHeight=0,n._align=s,n._tint=a,n._fontName=d,n._fontSize=g||ui.available[d].size,n._text=e,n._maxWidth=l,n._maxLineHeight=0,n._letterSpacing=c,n._anchor=new Oi(function(){n.dirty=!0},n,0,0),n.roundPixels=ht.ROUND_PIXELS,n.dirty=!0,n}return t.prototype.updateText=function(){for(var e,i=ui.available[this._fontName],n=this._fontSize/i.size,o=new Kt,s=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=l.length,d=this._maxWidth*i.size/this._fontSize,g=null,u=0,h=0,f=0,I=-1,m=0,y=0,v=0,p=0;p<c;p++){var _=l.charCodeAt(p),A=l.charAt(p);if(/(?:\s)/.test(A)&&(I=p,m=u),A==="\r"||A===`
`){a.push(u),h=Math.max(h,u),++f,++y,o.x=0,o.y+=i.lineHeight,g=null;continue}var b=i.chars[_];if(b){g&&b.kerning[g]&&(o.x+=b.kerning[g]);var P=Od.pop()||{texture:vt.EMPTY,line:0,charCode:0,position:new Kt};P.texture=b.texture,P.line=f,P.charCode=_,P.position.x=o.x+b.xOffset+this._letterSpacing/2,P.position.y=o.y+b.yOffset,s.push(P),o.x+=b.xAdvance+this._letterSpacing,u=o.x,v=Math.max(v,b.yOffset+b.texture.height),g=_,I!==-1&&d>0&&o.x>d&&(++y,Ni(s,1+I-y,1+p-I),p=I,I=-1,a.push(m),h=Math.max(h,m),f++,o.x=0,o.y+=i.lineHeight,g=null)}}var E=l.charAt(l.length-1);E!=="\r"&&E!==`
`&&(/(?:\s)/.test(E)&&(u=m),a.push(u),h=Math.max(h,u));for(var C=[],p=0;p<=f;p++){var x=0;this._align==="right"?x=h-a[p]:this._align==="center"&&(x=(h-a[p])/2),C.push(x)}for(var F=s.length,R={},Z=[],H=this._activePagesMeshData,p=0;p<H.length;p++)Rd.push(H[p]);for(var p=0;p<F;p++){var W=s[p].texture,U=W.baseTexture.uid;if(!R[U]){var X=Rd.pop();if(!X){var ot=new On,lt=new Rn(vt.EMPTY),et=new Tr(ot,lt);X={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:et,vertices:null,uvs:null,indices:null}}X.index=0,X.indexCount=0,X.vertexCount=0,X.uvsCount=0,X.total=0,X.mesh.texture=new vt(W.baseTexture),X.mesh.tint=this._tint,Z.push(X),R[U]=X}R[U].total++}for(var p=0;p<H.length;p++)Z.indexOf(H[p])===-1&&this.removeChild(H[p].mesh);for(var p=0;p<Z.length;p++)Z[p].mesh.parent!==this&&this.addChild(Z[p].mesh);this._activePagesMeshData=Z;for(var p in R){var X=R[p],Q=X.total;(!(((e=X.indices)===null||e===void 0?void 0:e.length)>6*Q)||X.vertices.length<Tr.BATCHABLE_SIZE*2)&&(X.vertices=new Float32Array(4*2*Q),X.uvs=new Float32Array(4*2*Q),X.indices=new Uint16Array(6*Q)),X.mesh.size=6*Q}for(var p=0;p<F;p++){var A=s[p],it=(A.position.x+C[A.line])*n,at=A.position.y*n,W=A.texture,N=R[W.baseTexture.uid],It=W.frame,dt=W._uvs,D=N.index++;N.indices[D*6+0]=0+D*4,N.indices[D*6+1]=1+D*4,N.indices[D*6+2]=2+D*4,N.indices[D*6+3]=0+D*4,N.indices[D*6+4]=2+D*4,N.indices[D*6+5]=3+D*4,N.vertices[D*8+0]=it,N.vertices[D*8+1]=at,N.vertices[D*8+2]=it+It.width*n,N.vertices[D*8+3]=at,N.vertices[D*8+4]=it+It.width*n,N.vertices[D*8+5]=at+It.height*n,N.vertices[D*8+6]=it,N.vertices[D*8+7]=at+It.height*n,N.uvs[D*8+0]=dt.x0,N.uvs[D*8+1]=dt.y0,N.uvs[D*8+2]=dt.x1,N.uvs[D*8+3]=dt.y1,N.uvs[D*8+4]=dt.x2,N.uvs[D*8+5]=dt.y2,N.uvs[D*8+6]=dt.x3,N.uvs[D*8+7]=dt.y3}this._textWidth=h*n,this._textHeight=(o.y+i.lineHeight)*n;for(var p in R){var X=R[p];if(this.anchor.x!==0||this.anchor.y!==0)for(var S=0,M=this._textWidth*this.anchor.x,B=this._textHeight*this.anchor.y,z=0;z<X.total;z++)X.vertices[S++]-=M,X.vertices[S++]-=B,X.vertices[S++]-=M,X.vertices[S++]-=B,X.vertices[S++]-=M,X.vertices[S++]-=B,X.vertices[S++]-=M,X.vertices[S++]-=B;this._maxLineHeight=v*n;var $=X.mesh.geometry.getBuffer("aVertexPosition"),K=X.mesh.geometry.getBuffer("aTextureCoord"),st=X.mesh.geometry.getIndex();$.data=X.vertices,K.data=X.uvs,st.data=X.indices,$.update(),K.update(),st.update()}for(var p=0;p<s.length;p++)Od.push(s[p])},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype.getLocalBounds=function(){return this.validate(),r.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){if(this._tint!==e){this._tint=e;for(var i=0;i<this._activePagesMeshData.length;i++)this._activePagesMeshData[i].mesh.tint=e}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontName",{get:function(){return this._fontName},set:function(e){if(!ui.available[e])throw new Error('Missing BitmapFont "'+e+'"');this._fontName!==e&&(this._fontName=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),t.prototype._upgradeStyle=function(e){if(typeof e.font=="string"){var i=e.font.split(" ");e.fontName=i.length===1?i[0]:i.slice(1).join(" "),i.length>=2&&(e.fontSize=parseInt(i[0],10))}else e.fontName=e.font.name,e.fontSize=typeof e.font.size=="number"?e.font.size:parseInt(e.font.size,10)},t.registerFont=function(e,i){return rt("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),ui.install(e,i)},Object.defineProperty(t,"fonts",{get:function(){return rt("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),ui.available},enumerable:!1,configurable:!0}),t.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},t}(Le),Wv=function(){function r(){}return r.add=function(){cn.setExtensionXhrType("fnt",cn.XHR_RESPONSE_TYPE.DOCUMENT)},r.use=function(t,e){var i=kv(t.data);if(!i){e();return}for(var n=r.getBaseUrl(this,t),o=i.parse(t.data),s={},a=function(I){s[I.metadata.pageFile]=I.texture,Object.keys(s).length===o.page.length&&(t.bitmapFont=ui.install(o,s),e())},l=0;l<o.page.length;++l){var c=o.page[l].file,d=n+c,g=!1;for(var u in this.resources){var h=this.resources[u];if(h.url===d){h.metadata.pageFile=c,h.texture?a(h):h.onAfterMiddleware.add(a),g=!0;break}}if(!g){var f={crossOrigin:t.crossOrigin,loadType:cn.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:c},t.metadata.imageMetadata),parentResource:t};this.add(d,f,a)}}},r.getBaseUrl=function(t,e){var i=e.isDataUrl?"":r.dirname(e.url);return e.isDataUrl&&(i==="."&&(i=""),t.baseUrl&&i&&t.baseUrl.charAt(t.baseUrl.length-1)==="/"&&(i+="/")),i=i.replace(t.baseUrl,""),i&&i.charAt(i.length-1)!=="/"&&(i+="/"),i},r.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":e===""?"/":e},r}();/*!
 * @pixi/filter-alpha - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var xh=function(r,t){return xh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},xh(r,t)};function Lb(r,t){xh(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Bb=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,Rb=function(r){Lb(t,r);function t(e){e===void 0&&(e=1);var i=r.call(this,cv,Bb,{uAlpha:1})||this;return i.alpha=e,i}return Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),t}(ii);/*!
 * @pixi/filter-blur - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ph=function(r,t){return Ph=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Ph(r,t)};function Xv(r,t){Ph(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Ob=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function Zb(r,t){var e=Math.ceil(r/2),i=Ob,n="",o;t?o="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":o="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<r;s++){var a=o.replace("%index%",s.toString());a=a.replace("%sampleIndex%",s-(e-1)+".0"),n+=a,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",r.toString()),i}var Gb={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Nb=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function jb(r){for(var t=Gb[r],e=t.length,i=Nb,n="",o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",s,a=0;a<r;a++){var l=o.replace("%index%",a.toString());s=a,a>=e&&(s=r-a-1),l=l.replace("%value%",t[s].toString()),n+=l,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",r.toString()),i}var Zd;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(Zd||(Zd={}));var Gd;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(Gd||(Gd={}));var Nd;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(Nd||(Nd={}));var jd;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(jd||(jd={}));var kd;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(kd||(kd={}));var Wd;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Wd||(Wd={}));var Xd;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Xd||(Xd={}));var Hd;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.FLOAT=5126]="FLOAT",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(Hd||(Hd={}));var Yd;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(Yd||(Yd={}));var Ud;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Ud||(Ud={}));var zd;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON"})(zd||(zd={}));var Vd;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(Vd||(Vd={}));var wn;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(wn||(wn={}));var Jd;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(Jd||(Jd={}));var Qd;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(Qd||(Qd={}));var $d;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})($d||($d={}));var Kd;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(Kd||(Kd={}));var Sh=function(r){Xv(t,r);function t(e,i,n,o,s){i===void 0&&(i=8),n===void 0&&(n=4),o===void 0&&(o=ht.RESOLUTION),s===void 0&&(s=5);var a=this,l=Zb(s,e),c=jb(s);return a=r.call(this,l,c)||this,a.horizontal=e,a.resolution=o,a._quality=0,a.quality=n,a.blur=i,a}return t.prototype.apply=function(e,i,n,o){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/i.width):this.uniforms.strength=1/n.height*(n.height/i.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/i.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,i,n,o);else{var s=e.getFilterTexture(),a=e.renderer,l=i,c=s;this.state.blend=!1,e.applyFilter(this,l,c,wn.CLEAR);for(var d=1;d<this.passes-1;d++){e.bindAndClear(l,wn.BLIT),this.uniforms.uSampler=c;var g=c;c=l,l=g,a.shader.bind(this),a.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,c,n,o),e.returnFilterTexture(s)}},Object.defineProperty(t.prototype,"blur",{get:function(){return this.strength},set:function(e){this.padding=1+Math.abs(e)*2,this.strength=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e},enumerable:!1,configurable:!0}),t}(ii),kb=function(r){Xv(t,r);function t(e,i,n,o){e===void 0&&(e=8),i===void 0&&(i=4),n===void 0&&(n=ht.RESOLUTION),o===void 0&&(o=5);var s=r.call(this)||this;return s.blurXFilter=new Sh(!0,e,i,n,o),s.blurYFilter=new Sh(!1,e,i,n,o),s.resolution=n,s.quality=i,s.blur=e,s.repeatEdgePixels=!1,s}return t.prototype.apply=function(e,i,n,o){var s=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(s&&a){var l=e.getFilterTexture();this.blurXFilter.apply(e,i,l,wn.CLEAR),this.blurYFilter.apply(e,l,n,o),e.returnFilterTexture(l)}else a?this.blurYFilter.apply(e,i,n,o):this.blurXFilter.apply(e,i,n,o)},t.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(t.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(e){this.blurYFilter.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(e){this._repeatEdgePixels=e,this.updatePadding()},enumerable:!1,configurable:!0}),t}(ii);/*!
 * @pixi/filter-color-matrix - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Th=function(r,t){return Th=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Th(r,t)};function Wb(r,t){Th(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Xb=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,Eh=function(r){Wb(t,r);function t(){var e=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return e=r.call(this,gc,Xb,i)||this,e.alpha=1,e}return t.prototype._loadMatrix=function(e,i){i===void 0&&(i=!1);var n=e;i&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n},t.prototype._multiply=function(e,i,n){return e[0]=i[0]*n[0]+i[1]*n[5]+i[2]*n[10]+i[3]*n[15],e[1]=i[0]*n[1]+i[1]*n[6]+i[2]*n[11]+i[3]*n[16],e[2]=i[0]*n[2]+i[1]*n[7]+i[2]*n[12]+i[3]*n[17],e[3]=i[0]*n[3]+i[1]*n[8]+i[2]*n[13]+i[3]*n[18],e[4]=i[0]*n[4]+i[1]*n[9]+i[2]*n[14]+i[3]*n[19]+i[4],e[5]=i[5]*n[0]+i[6]*n[5]+i[7]*n[10]+i[8]*n[15],e[6]=i[5]*n[1]+i[6]*n[6]+i[7]*n[11]+i[8]*n[16],e[7]=i[5]*n[2]+i[6]*n[7]+i[7]*n[12]+i[8]*n[17],e[8]=i[5]*n[3]+i[6]*n[8]+i[7]*n[13]+i[8]*n[18],e[9]=i[5]*n[4]+i[6]*n[9]+i[7]*n[14]+i[8]*n[19]+i[9],e[10]=i[10]*n[0]+i[11]*n[5]+i[12]*n[10]+i[13]*n[15],e[11]=i[10]*n[1]+i[11]*n[6]+i[12]*n[11]+i[13]*n[16],e[12]=i[10]*n[2]+i[11]*n[7]+i[12]*n[12]+i[13]*n[17],e[13]=i[10]*n[3]+i[11]*n[8]+i[12]*n[13]+i[13]*n[18],e[14]=i[10]*n[4]+i[11]*n[9]+i[12]*n[14]+i[13]*n[19]+i[14],e[15]=i[15]*n[0]+i[16]*n[5]+i[17]*n[10]+i[18]*n[15],e[16]=i[15]*n[1]+i[16]*n[6]+i[17]*n[11]+i[18]*n[16],e[17]=i[15]*n[2]+i[16]*n[7]+i[17]*n[12]+i[18]*n[17],e[18]=i[15]*n[3]+i[16]*n[8]+i[17]*n[13]+i[18]*n[18],e[19]=i[15]*n[4]+i[16]*n[9]+i[17]*n[14]+i[18]*n[19]+i[19],e},t.prototype._colorMatrix=function(e){var i=new Float32Array(e);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i},t.prototype.brightness=function(e,i){var n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,i)},t.prototype.greyscale=function(e,i){var n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,i)},t.prototype.blackAndWhite=function(e){var i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.hue=function(e,i){e=(e||0)/180*Math.PI;var n=Math.cos(e),o=Math.sin(e),s=Math.sqrt,a=1/3,l=s(a),c=n+(1-n)*a,d=a*(1-n)-l*o,g=a*(1-n)+l*o,u=a*(1-n)+l*o,h=n+a*(1-n),f=a*(1-n)-l*o,I=a*(1-n)-l*o,m=a*(1-n)+l*o,y=n+a*(1-n),v=[c,d,g,0,0,u,h,f,0,0,I,m,y,0,0,0,0,0,1,0];this._loadMatrix(v,i)},t.prototype.contrast=function(e,i){var n=(e||0)+1,o=-.5*(n-1),s=[n,0,0,0,o,0,n,0,0,o,0,0,n,0,o,0,0,0,1,0];this._loadMatrix(s,i)},t.prototype.saturate=function(e,i){e===void 0&&(e=0);var n=e*2/3+1,o=(n-1)*-.5,s=[n,o,o,0,0,o,n,o,0,0,o,o,n,0,0,0,0,0,1,0];this._loadMatrix(s,i)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(e){var i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.sepia=function(e){var i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.technicolor=function(e){var i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.polaroid=function(e){var i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.toBGR=function(e){var i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.kodachrome=function(e){var i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.browni=function(e){var i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.vintage=function(e){var i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.colorTone=function(e,i,n,o,s){e=e||.2,i=i||.15,n=n||16770432,o=o||3375104;var a=(n>>16&255)/255,l=(n>>8&255)/255,c=(n&255)/255,d=(o>>16&255)/255,g=(o>>8&255)/255,u=(o&255)/255,h=[.3,.59,.11,0,0,a,l,c,e,0,d,g,u,i,0,a-d,l-g,c-u,0,0];this._loadMatrix(h,s)},t.prototype.night=function(e,i){e=e||.1;var n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,i)},t.prototype.predator=function(e,i){var n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,i)},t.prototype.lsd=function(e){var i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.reset=function(){var e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)},Object.defineProperty(t.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),t}(ii);Eh.prototype.grayscale=Eh.prototype.greyscale;/*!
 * @pixi/filter-displacement - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Fh=function(r,t){return Fh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Fh(r,t)};function Hb(r,t){Fh(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Yb=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,Ub=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,zb=function(r){Hb(t,r);function t(e,i){var n=this,o=new jt;return e.renderable=!1,n=r.call(this,Ub,Yb,{mapSampler:e._texture,filterMatrix:o,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,n.maskSprite=e,n.maskMatrix=o,i==null&&(i=20),n.scale=new Kt(i,i),n}return t.prototype.apply=function(e,i,n,o){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var s=this.maskSprite.worldTransform,a=Math.sqrt(s.a*s.a+s.b*s.b),l=Math.sqrt(s.c*s.c+s.d*s.d);a!==0&&l!==0&&(this.uniforms.rotation[0]=s.a/a,this.uniforms.rotation[1]=s.b/a,this.uniforms.rotation[2]=s.c/l,this.uniforms.rotation[3]=s.d/l),e.applyFilter(this,i,n,o)},Object.defineProperty(t.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e},enumerable:!1,configurable:!0}),t}(ii);/*!
 * @pixi/filter-fxaa - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Mh=function(r,t){return Mh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Mh(r,t)};function Vb(r,t){Mh(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Jb=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputPixel;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,Qb=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputPixel;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,$b=function(r){Vb(t,r);function t(){return r.call(this,Jb,Qb)||this}return t}(ii);/*!
 * @pixi/filter-noise - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Dh=function(r,t){return Dh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Dh(r,t)};function Kb(r,t){Dh(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var qb=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,tw=function(r){Kb(t,r);function t(e,i){e===void 0&&(e=.5),i===void 0&&(i=Math.random());var n=r.call(this,gc,qb,{uNoise:0,uSeed:0})||this;return n.noise=e,n.seed=i,n}return Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e},enumerable:!1,configurable:!0}),t}(ii);/*!
 * @pixi/mixin-cache-as-bitmap - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Hv=new jt;kt.prototype._cacheAsBitmap=!1;kt.prototype._cacheData=null;var ew=function(){function r(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return r}();Object.defineProperties(kt.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(r){if(this._cacheAsBitmap!==r){this._cacheAsBitmap=r;var t;r?(this._cacheData||(this._cacheData=new ew),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}});kt.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};kt.prototype._initCachedDisplayObject=function(t){if(!(this._cacheData&&this._cacheData.sprite)){var e=this.alpha;this.alpha=1,t.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters){var n=this.filters[0].padding;i.pad(n)}i.ceil(ht.RESOLUTION);var o=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),a=t.projection.transform,l=Hi.create({width:i.width,height:i.height}),c="cacheAsBitmap_"+Xi();this._cacheData.textureCacheId=c,Et.addToCache(l.baseTexture,c),vt.addToCache(l,c);var d=this.transform.localTransform.copyTo(Hv).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,t.render(this,l,!0,d,!1),t.projection.transform=a,t.renderTexture.bind(o,s),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var g=new jr(l);g.transform.worldTransform=this.transform.worldTransform,g.anchor.x=-(i.x/i.width),g.anchor.y=-(i.y/i.height),g.alpha=e,g._bounds=this._bounds,this._cacheData.sprite=g,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=g.containsPoint.bind(g)}};kt.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};kt.prototype._initCachedDisplayObjectCanvas=function(t){if(!(this._cacheData&&this._cacheData.sprite)){var e=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;var n=t.context,o=t._projTransform;e.ceil(ht.RESOLUTION);var s=Hi.create({width:e.width,height:e.height}),a="cacheAsBitmap_"+Xi();this._cacheData.textureCacheId=a,Et.addToCache(s.baseTexture,a),vt.addToCache(s,a);var l=Hv;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,s,!0,l,!1),t.context=n,t._projTransform=o,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var c=new jr(s);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(e.x/e.width),c.anchor.y=-(e.y/e.height),c.alpha=i,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)}};kt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};kt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};kt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Et.removeFromCache(this._cacheData.textureCacheId),vt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};kt.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};/*!
 * @pixi/mixin-get-child-by-name - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */kt.prototype.name=null;Le.prototype.getChildByName=function(t,e){for(var i=0,n=this.children.length;i<n;i++)if(this.children[i].name===t)return this.children[i];if(e)for(var i=0,n=this.children.length;i<n;i++){var o=this.children[i];if(o.getChildByName){var s=this.children[i].getChildByName(t,!0);if(s)return s}}return null};/*!
 * @pixi/mixin-get-global-position - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */kt.prototype.getGlobalPosition=function(t,e){return t===void 0&&(t=new Kt),e===void 0&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};/*!
 * @pixi/mesh-extras - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Lh=function(r,t){return Lh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Lh(r,t)};function kr(r,t){Lh(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Yv=function(r){kr(t,r);function t(e,i,n,o){e===void 0&&(e=100),i===void 0&&(i=100),n===void 0&&(n=10),o===void 0&&(o=10);var s=r.call(this)||this;return s.segWidth=n,s.segHeight=o,s.width=e,s.height=i,s.build(),s}return t.prototype.build=function(){for(var e=this.segWidth*this.segHeight,i=[],n=[],o=[],s=this.segWidth-1,a=this.segHeight-1,l=this.width/s,c=this.height/a,d=0;d<e;d++){var g=d%this.segWidth,u=d/this.segWidth|0;i.push(g*l,u*c),n.push(g/s,u/a)}for(var h=s*a,d=0;d<h;d++){var f=d%s,I=d/s|0,m=I*this.segWidth+f,y=I*this.segWidth+f+1,v=(I+1)*this.segWidth+f,p=(I+1)*this.segWidth+f+1;o.push(m,y,v,y,p,v)}this.buffers[0].data=new Float32Array(i),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(o),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},t}(On),Uv=function(r){kr(t,r);function t(e,i,n){e===void 0&&(e=200),n===void 0&&(n=0);var o=r.call(this,new Float32Array(i.length*4),new Float32Array(i.length*4),new Uint16Array((i.length-1)*6))||this;return o.points=i,o._width=e,o.textureScale=n,o.build(),o}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),t.prototype.build=function(){var e=this.points;if(e){var i=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),o=this.getIndex();if(!(e.length<1)){i.data.length/4!==e.length&&(i.data=new Float32Array(e.length*4),n.data=new Float32Array(e.length*4),o.data=new Uint16Array((e.length-1)*6));var s=n.data,a=o.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;for(var l=0,c=e[0],d=this._width*this.textureScale,g=e.length,u=0;u<g;u++){var h=u*4;if(this.textureScale>0){var f=c.x-e[u].x,I=c.y-e[u].y,m=Math.sqrt(f*f+I*I);c=e[u],l+=m/d}else l=u/(g-1);s[h]=l,s[h+1]=0,s[h+2]=l,s[h+3]=1}for(var y=0,u=0;u<g-1;u++){var h=u*2;a[y++]=h,a[y++]=h+1,a[y++]=h+2,a[y++]=h+2,a[y++]=h+1,a[y++]=h+3}n.update(),o.update(),this.updateVertices()}}},t.prototype.updateVertices=function(){var e=this.points;if(!(e.length<1)){for(var i=e[0],n,o=0,s=0,a=this.buffers[0].data,l=e.length,c=0;c<l;c++){var d=e[c],g=c*4;c<e.length-1?n=e[c+1]:n=d,s=-(n.x-i.x),o=n.y-i.y;var u=Math.sqrt(o*o+s*s),h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;o/=u,s/=u,o*=h,s*=h,a[g]=d.x+o,a[g+1]=d.y+s,a[g+2]=d.x-o,a[g+3]=d.y-s,i=d}this.buffers[0].update()}},t.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},t}(On),iw=function(r){kr(t,r);function t(e,i,n){n===void 0&&(n=0);var o=this,s=new Uv(e.height,i,n),a=new Rn(e);return n>0&&(e.baseTexture.wrapMode=$e.REPEAT),o=r.call(this,s,a)||this,o.autoUpdate=!0,o}return t.prototype._render=function(e){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),r.prototype._render.call(this,e)},t}(Tr),zv=function(r){kr(t,r);function t(e,i,n){var o=this,s=new Yv(e.width,e.height,i,n),a=new Rn(vt.WHITE);return o=r.call(this,s,a)||this,o.texture=e,o}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var e=this.geometry;e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build()},Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),t.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),r.prototype._render.call(this,e)},t}(Tr),rw=function(r){kr(t,r);function t(e,i,n,o,s){e===void 0&&(e=vt.EMPTY);var a=this,l=new On(i,n,o);l.getBuffer("aVertexPosition").static=!1;var c=new Rn(e);return a=r.call(this,l,c,null,s)||this,a.autoUpdate=!0,a}return Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),r.prototype._render.call(this,e)},t}(Tr),Oo=10,nw=function(r){kr(t,r);function t(e,i,n,o,s){i===void 0&&(i=Oo),n===void 0&&(n=Oo),o===void 0&&(o=Oo),s===void 0&&(s=Oo);var a=r.call(this,vt.WHITE,4,4)||this;return a._origWidth=e.orig.width,a._origHeight=e.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=i,a._rightWidth=o,a._topHeight=n,a._bottomHeight=s,a.texture=e,a}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype.updateHorizontalVertices=function(){var e=this.vertices,i=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*i,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*i,e[25]=e[27]=e[29]=e[31]=this._height},t.prototype.updateVerticalVertices=function(){var e=this.vertices,i=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*i,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*i,e[6]=e[14]=e[22]=e[30]=this._width},t.prototype._getMinScale=function(){var e=this._leftWidth+this._rightWidth,i=this._width>e?1:this._width/e,n=this._topHeight+this._bottomHeight,o=this._height>n?1:this._height/n,s=Math.min(i,o);return s},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topHeight",{get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()},enumerable:!1,configurable:!0}),t.prototype._refresh=function(){var e=this.texture,i=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var n=1/this._origWidth,o=1/this._origHeight;i[0]=i[8]=i[16]=i[24]=0,i[1]=i[3]=i[5]=i[7]=0,i[6]=i[14]=i[22]=i[30]=1,i[25]=i[27]=i[29]=i[31]=1,i[2]=i[10]=i[18]=i[26]=n*this._leftWidth,i[4]=i[12]=i[20]=i[28]=1-n*this._rightWidth,i[9]=i[11]=i[13]=i[15]=o*this._topHeight,i[17]=i[19]=i[21]=i[23]=1-o*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},t}(zv);/*!
 * @pixi/sprite-animated - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Bh=function(r,t){return Bh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Bh(r,t)};function ow(r,t){Bh(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var sw=function(r){ow(t,r);function t(e,i){i===void 0&&(i=!0);var n=r.call(this,e[0]instanceof vt?e[0]:e[0].texture)||this;return n._textures=null,n._durations=null,n._autoUpdate=i,n._isConnectedToTicker=!1,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n._playing=!1,n._previousFrame=null,n.textures=e,n}return t.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Qt.shared.remove(this.update,this),this._isConnectedToTicker=!1))},t.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Qt.shared.add(this.update,this,je.HIGH),this._isConnectedToTicker=!0))},t.prototype.gotoAndStop=function(e){this.stop();var i=this.currentFrame;this._currentTime=e,i!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(e){var i=this.currentFrame;this._currentTime=e,i!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(e){var i=this.animationSpeed*e,n=this.currentFrame;if(this._durations!==null){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=i/60*1e3;o<0;)this._currentTime--,o+=this._durations[this.currentFrame];var s=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n?this.onLoop():this.animationSpeed<0&&this.currentFrame>n&&this.onLoop()),this.updateTexture())},t.prototype.updateTexture=function(){var e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},t.prototype.destroy=function(e){this.stop(),r.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},t.fromFrames=function(e){for(var i=[],n=0;n<e.length;++n)i.push(vt.from(e[n]));return new t(i)},t.fromImages=function(e){for(var i=[],n=0;n<e.length;++n)i.push(vt.from(e[n]));return new t(i)},Object.defineProperty(t.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textures",{get:function(){return this._textures},set:function(e){if(e[0]instanceof vt)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var i=0;i<e.length;i++)this._textures.push(e[i].texture),this._durations.push(e[i].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Qt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Qt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),t}(jr);/*!
 * pixi.js - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Rh=function(r,t){return Rh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Rh(r,t)};function qd(r,t){Rh(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var ut="5.0.0";function aw(){var r=this;Object.defineProperties(r,{SVG_SIZE:{get:function(){return rt(ut,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),r.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return rt(ut,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),r.Transform}},TransformBase:{get:function(){return rt(ut,"PIXI.TransformBase class has been removed, use PIXI.Transform"),r.Transform}},TRANSFORM_MODE:{get:function(){return rt(ut,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return rt(ut,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),r.Renderer}},CanvasRenderTarget:{get:function(){return rt(ut,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),r.utils.CanvasRenderTarget}},loader:{get:function(){return rt(ut,"PIXI.loader instance has moved to PIXI.Loader.shared"),r.Loader.shared}},FilterManager:{get:function(){return rt(ut,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),r.systems.FilterSystem}},CanvasTinter:{get:function(){return rt("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),r.canvasUtils}},GroupD8:{get:function(){return rt("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),r.groupD8}}}),r.accessibility={},Object.defineProperties(r.accessibility,{AccessibilityManager:{get:function(){return rt("5.3.0","PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager"),r.AccessibilityManager}}}),r.interaction={},Object.defineProperties(r.interaction,{InteractionManager:{get:function(){return rt("5.3.0","PIXI.interaction.InteractionManager moved to PIXI.InteractionManager"),r.InteractionManager}},InteractionData:{get:function(){return rt("5.3.0","PIXI.interaction.InteractionData moved to PIXI.InteractionData"),r.InteractionData}},InteractionEvent:{get:function(){return rt("5.3.0","PIXI.interaction.InteractionEvent moved to PIXI.InteractionEvent"),r.InteractionEvent}}}),r.prepare={},Object.defineProperties(r.prepare,{BasePrepare:{get:function(){return rt("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"),r.BasePrepare}},Prepare:{get:function(){return rt("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare"),r.Prepare}},CanvasPrepare:{get:function(){return rt("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"),r.CanvasPrepare}}}),r.extract={},Object.defineProperties(r.extract,{Extract:{get:function(){return rt("5.2.1","PIXI.extract.Extract moved to PIXI.Extract"),r.Extract}},CanvasExtract:{get:function(){return rt("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"),r.CanvasExtract}}}),r.extras={},Object.defineProperties(r.extras,{TilingSprite:{get:function(){return rt(ut,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),r.TilingSprite}},TilingSpriteRenderer:{get:function(){return rt(ut,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),r.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return rt(ut,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),r.AnimatedSprite}},BitmapText:{get:function(){return rt(ut,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),r.BitmapText}}}),r.TilingSprite.fromFrame=function(u,h,f){return rt("5.3.0","TilingSprite.fromFrame is deprecated, use TilingSprite.from"),r.TilingSprite.from(u,{width:h,height:f})},r.TilingSprite.fromImage=function(u,h,f,I){return I===void 0&&(I={}),rt("5.3.0","TilingSprite.fromImage is deprecated, use TilingSprite.from"),I&&typeof I!="object"&&(I={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),I.width=h,I.height=f,r.TilingSprite.from(u,I)},Object.defineProperties(r.utils,{getSvgSize:{get:function(){return rt(ut,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),r.resources.SVGResource.getSize}}}),r.mesh={},Object.defineProperties(r.mesh,{Mesh:{get:function(){return rt(ut,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),r.SimpleMesh}},NineSlicePlane:{get:function(){return rt(ut,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),r.NineSlicePlane}},Plane:{get:function(){return rt(ut,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),r.SimplePlane}},Rope:{get:function(){return rt(ut,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),r.SimpleRope}},RawMesh:{get:function(){return rt(ut,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),r.Mesh}},CanvasMeshRenderer:{get:function(){return rt(ut,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),r.CanvasMeshRenderer}},MeshRenderer:{get:function(){return rt(ut,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),r.MeshRenderer}}}),r.particles={},Object.defineProperties(r.particles,{ParticleContainer:{get:function(){return rt(ut,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),r.ParticleContainer}},ParticleRenderer:{get:function(){return rt(ut,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),r.ParticleRenderer}}}),r.ticker={},Object.defineProperties(r.ticker,{Ticker:{get:function(){return rt(ut,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),r.Ticker}},shared:{get:function(){return rt(ut,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),r.Ticker.shared}}}),r.loaders={},Object.defineProperties(r.loaders,{Loader:{get:function(){return rt(ut,"PIXI.loaders.Loader class has moved to PIXI.Loader"),r.Loader}},Resource:{get:function(){return rt(ut,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),r.LoaderResource}},bitmapFontParser:{get:function(){return rt(ut,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),r.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){rt(ut,"PIXI.loaders.parseBitmapFontData function has removed")}},spritesheetParser:{get:function(){return rt(ut,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),r.SpritesheetLoader.use}},getResourcePath:{get:function(){return rt(ut,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),r.SpritesheetLoader.getResourcePath}}}),r.Loader.addPixiMiddleware=function(u){return rt(ut,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),r.loaders.Loader.registerPlugin({use:u()})};var t=function(g){return"on"+g.charAt(0).toUpperCase()+g.slice(1)};Object.assign(r.Loader.prototype,{on:function(g){var u=t(g);rt(ut,"PIXI.Loader#on is completely deprecated, use PIXI.Loader#"+u+".add")},once:function(g){var u=t(g);rt(ut,"PIXI.Loader#once is completely deprecated, use PIXI.Loader#"+u+".once")},off:function(g){var u=t(g);rt(ut,"PIXI.Loader#off is completely deprecated, use PIXI.Loader#"+u+".detach")}}),Object.defineProperty(r.extract,"WebGLExtract",{get:function(){return rt(ut,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract"),r.Extract}}),Object.defineProperty(r.prepare,"WebGLPrepare",{get:function(){return rt(ut,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"),r.Prepare}}),r.Container.prototype._renderWebGL=function(u){rt(ut,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(u)},r.Container.prototype.renderWebGL=function(u){rt(ut,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(u)},r.DisplayObject.prototype.renderWebGL=function(u){rt(ut,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(u)},r.Container.prototype.renderAdvancedWebGL=function(u){rt(ut,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(u)},Object.defineProperties(r.settings,{TRANSFORM_MODE:{get:function(){return rt(ut,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){rt(ut,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var e=r.BaseTexture;e.prototype.loadSource=function(u){rt(ut,"PIXI.BaseTexture.loadSource method has been deprecated");var h=r.resources.autoDetectResource(u);h.internal=!0,this.setResource(h),this.update()};var i=!1;Object.defineProperties(e.prototype,{hasLoaded:{get:function(){return rt(ut,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){var g;return rt(ut,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),(g=this.resource)===null||g===void 0?void 0:g.url},set:function(g){rt(ut,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=g)}},source:{get:function(){return rt(ut,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource.source},set:function(g){rt(ut,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=g)}},premultiplyAlpha:{get:function(){return rt("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode!==0},set:function(g){rt("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(g)}},_id:{get:function(){return i||(rt("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),i=!0),this._batchLocation},set:function(g){this._batchLocation=g}}}),e.fromImage=function(u,h,f,I){rt(ut,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");var m={scale:I,crossorigin:h};return e.from(u,{scaleMode:f,resourceOptions:m})},e.fromCanvas=function(u,h){return rt(ut,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),e.from(u,{scaleMode:h})},e.fromSVG=function(u,h,f,I){rt(ut,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");var m={scale:I,crossorigin:h};return e.from(u,{scaleMode:f,resourceOptions:m})},Object.defineProperties(r.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){return rt("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode!==0},set:function(g){rt("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(g)}}}),r.Point.prototype.copy=function(u){return rt(ut,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(u)},r.ObservablePoint.prototype.copy=function(u){return rt(ut,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(u)},r.Rectangle.prototype.copy=function(u){return rt(ut,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(u)},r.Matrix.prototype.copy=function(u){return rt(ut,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(u)},r.systems.StateSystem.prototype.setState=function(u){return rt("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(u)},Object.assign(r.systems.FilterSystem.prototype,{getRenderTarget:function(g,u){return rt(ut,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(null,u)},returnRenderTarget:function(g){rt(ut,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(g)},calculateScreenSpaceMatrix:function(g){rt(ut,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var u=g.identity(),h=this.activeState,f=h.sourceFrame,I=h.destinationFrame;return u.translate(f.x/I.width,f.y/I.height),u.scale(I.width,I.height),u},calculateNormalizedScreenSpaceMatrix:function(g){rt(ut,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var u=this.activeState,h=u.sourceFrame,f=u.destinationFrame,I=g.identity();I.translate(h.x/f.width,h.y/f.height);var m=f.width/h.width,y=f.height/h.height;return I.scale(m,y),I}}),Object.defineProperties(r.RenderTexture.prototype,{sourceFrame:{get:function(){return rt(ut,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return rt(ut,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var n=function(g){qd(u,g);function u(h,f,I,m){var y=this;return rt(ut,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),y=g.call(this,!0,h,f,I,m)||this,y}return u}(r.filters.BlurFilterPass),o=function(g){qd(u,g);function u(h,f,I,m){var y=this;return rt(ut,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),y=g.call(this,!1,h,f,I,m)||this,y}return u}(r.filters.BlurFilterPass);Object.assign(r.filters,{BlurXFilter:n,BlurYFilter:o});var s=r.Sprite,a=r.Texture,l=r.Graphics;l.prototype.generateCanvasTexture||(l.prototype.generateCanvasTexture=function(){rt(ut,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(l.prototype,"graphicsData",{get:function(){return rt(ut,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}});function c(g,u,h,f){return rt(ut,"PIXI.Sprite."+g+" method is deprecated, use PIXI.Sprite.from"),s.from(u,{resourceOptions:{scale:f,crossorigin:h}})}s.fromImage=c.bind(null,"fromImage"),s.fromSVG=c.bind(null,"fromSVG"),s.fromCanvas=c.bind(null,"fromCanvas"),s.fromVideo=c.bind(null,"fromVideo"),s.fromFrame=c.bind(null,"fromFrame");function d(g,u,h,f){return rt(ut,"PIXI.Texture."+g+" method is deprecated, use PIXI.Texture.from"),a.from(u,{resourceOptions:{scale:f,crossorigin:h}})}a.fromImage=d.bind(null,"fromImage"),a.fromSVG=d.bind(null,"fromSVG"),a.fromCanvas=d.bind(null,"fromCanvas"),a.fromVideo=d.bind(null,"fromVideo"),a.fromFrame=d.bind(null,"fromFrame"),Object.defineProperty(r.AbstractRenderer.prototype,"autoResize",{get:function(){return rt(ut,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(g){rt(ut,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=g}}),Object.defineProperty(r.Renderer.prototype,"textureManager",{get:function(){return rt(ut,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),r.utils.mixins={mixin:function(){rt(ut,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){rt(ut,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){rt(ut,"PIXI.utils.mixins.performMixins function is no longer available")}},Object.defineProperty(r.BitmapText.prototype,"font",{get:function(){return rt("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),{name:this._fontName,size:this._fontSize,tint:this._tint,align:this._align}},set:function(g){if(rt("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),!!g){var u={font:g};this._upgradeStyle(u),u.fontSize=u.fontSize||r.BitmapFont.available[u.fontName].size,this._fontName=u.fontName,this._fontSize=u.fontSize,this.dirty=!0}}})}ri.registerPlugin("accessibility",xI);ri.registerPlugin("extract",vv);ri.registerPlugin("interaction",EI);ri.registerPlugin("particle",bv);ri.registerPlugin("prepare",Rv);ri.registerPlugin("batch",Iv);ri.registerPlugin("tilingSprite",Nv);Yi.registerPlugin(Wv);Yi.registerPlugin(Zv);Nr.registerPlugin(PI);Nr.registerPlugin(Cv);var uw="5.3.3",lw={AlphaFilter:Rb,BlurFilter:kb,BlurFilterPass:Sh,ColorMatrixFilter:Eh,DisplacementFilter:zb,FXAAFilter:$b,NoiseFilter:tw};const hw=Object.freeze(Object.defineProperty({__proto__:null,get ALPHA_MODES(){return ti},AbstractBatchRenderer:dv,AbstractRenderer:lv,AccessibilityManager:xI,AnimatedSprite:sw,AppLoaderPlugin:Cv,Application:Nr,Attribute:hh,get BLEND_MODES(){return ct},get BUFFER_BITS(){return yn},BasePrepare:Lv,BaseRenderTexture:hn,BaseTexture:Et,BatchDrawCall:fs,BatchGeometry:pc,BatchPluginFactory:pv,BatchRenderer:Iv,BatchShaderGenerator:gv,BatchTextureArray:ds,BitmapFont:ui,BitmapFontData:bn,BitmapFontLoader:Wv,BitmapText:Db,Bounds:An,Buffer:Jt,get CLEAR_MODES(){return Fe},Circle:_I,Container:Le,CountLimiter:Dv,DEG_TO_RAD:yI,get DRAW_MODES(){return Ae},DisplayObject:kt,get ENV(){return Ne},Ellipse:CI,Extract:vv,get FORMATS(){return Ar},FillStyle:Ic,Filter:ii,FilterState:GI,Framebuffer:cs,get GC_MODES(){return ls},GLFramebuffer:WI,GLProgram:nv,GLTexture:qo,GRAPHICS_CURVES:Pr,Geometry:Gr,Graphics:mc,GraphicsData:mh,GraphicsGeometry:Fv,IGLUniformData:xA,InteractionData:ah,InteractionEvent:SI,InteractionManager:EI,InteractionTrackingData:$o,get LINE_CAP(){return Je},get LINE_JOIN(){return Ui},LineStyle:Mv,Loader:Yi,LoaderResource:cn,get MASK_TYPES(){return ue},get MIPMAP_MODES(){return br},get MSAA_QUALITY(){return ki},MaskData:YI,Matrix:jt,Mesh:Tr,MeshBatchUvs:jv,MeshGeometry:On,MeshMaterial:Rn,NineSlicePlane:nw,ObjectRenderer:Ln,ObservablePoint:Oi,PI_2:wr,get PRECISION(){return De},ParticleContainer:$A,ParticleRenderer:bv,PlaneGeometry:Yv,Point:Kt,Polygon:pr,Prepare:Rv,Program:Bn,Quad:ZI,QuadUv:dc,RAD_TO_DEG:mI,get RENDERER_TYPE(){return Cr},Rectangle:wt,RenderTexture:Hi,RenderTexturePool:RI,Renderer:ri,RopeGeometry:Uv,RoundedRectangle:AI,Runner:ee,get SCALE_MODES(){return Me},get SHAPES(){return Rt},Shader:gi,SimpleMesh:rw,SimplePlane:zv,SimpleRope:iw,Sprite:jr,SpriteMaskFilter:$I,Spritesheet:Ov,SpritesheetLoader:Zv,State:Ci,System:ce,get TARGETS(){return fi},get TEXT_GRADIENT(){return Sr},get TYPES(){return Nt},TemporaryDisplayObject:ac,Text:yc,TextMetrics:xe,TextStyle:zi,Texture:vt,TextureLoader:_v,TextureMatrix:Ds,TextureUvs:fc,Ticker:Qt,TickerPlugin:PI,TilingSprite:Ab,TilingSpriteRenderer:Nv,TimeLimiter:Cb,Transform:oc,get UPDATE_PRIORITY(){return je},UniformGroup:di,VERSION:uw,ViewableBuffer:fv,get WRAP_MODES(){return $e},accessibleTarget:wI,autoDetectRenderer:hv,checkMaxIfStatementsInShader:QI,defaultFilterVertex:gc,defaultVertex:cv,filters:lw,graphicsUtils:ib,groupD8:Dt,interactiveTarget:TI,isMobile:Ce,resources:KC,settings:ht,systems:LA,uniformParsers:Ko,useDeprecated:aw,utils:jC},Symbol.toStringTag,{value:"Module"}));var cw=function(){this.pointsToAvoid={},this.startX,this.callback,this.startY,this.endX,this.endY,this.nodeHash={},this.openList},fw=function(r,t,e,i,n){this.parent=r,this.x=t,this.y=e,this.costSoFar=i,this.simpleDistanceToTarget=n,this.bestGuessDistance=function(){return this.costSoFar+this.simpleDistanceToTarget}},Vv={exports:{}};(function(r,t){(function(){var e,i,n,o,s,a,l,c,d,g,u,h,f,I,m;n=Math.floor,g=Math.min,i=function(y,v){return y<v?-1:y>v?1:0},d=function(y,v,p,_,A){var b;if(p==null&&(p=0),A==null&&(A=i),p<0)throw new Error("lo must be non-negative");for(_==null&&(_=y.length);p<_;)b=n((p+_)/2),A(v,y[b])<0?_=b:p=b+1;return[].splice.apply(y,[p,p-p].concat(v)),v},a=function(y,v,p){return p==null&&(p=i),y.push(v),I(y,0,y.length-1,p)},s=function(y,v){var p,_;return v==null&&(v=i),p=y.pop(),y.length?(_=y[0],y[0]=p,m(y,0,v)):_=p,_},c=function(y,v,p){var _;return p==null&&(p=i),_=y[0],y[0]=v,m(y,0,p),_},l=function(y,v,p){var _;return p==null&&(p=i),y.length&&p(y[0],v)<0&&(_=[y[0],v],v=_[0],y[0]=_[1],m(y,0,p)),v},o=function(y,v){var p,_,A,b,P,E;for(v==null&&(v=i),b=function(){E=[];for(var C=0,x=n(y.length/2);0<=x?C<x:C>x;0<=x?C++:C--)E.push(C);return E}.apply(this).reverse(),P=[],_=0,A=b.length;_<A;_++)p=b[_],P.push(m(y,p,v));return P},f=function(y,v,p){var _;if(p==null&&(p=i),_=y.indexOf(v),_!==-1)return I(y,0,_,p),m(y,_,p)},u=function(y,v,p){var _,A,b,P,E;if(p==null&&(p=i),A=y.slice(0,v),!A.length)return A;for(o(A,p),E=y.slice(v),b=0,P=E.length;b<P;b++)_=E[b],l(A,_,p);return A.sort(p).reverse()},h=function(y,v,p){var _,A,b,P,E,C,x,F,R;if(p==null&&(p=i),v*10<=y.length){if(b=y.slice(0,v).sort(p),!b.length)return b;for(A=b[b.length-1],x=y.slice(v),P=0,C=x.length;P<C;P++)_=x[P],p(_,A)<0&&(d(b,_,0,null,p),b.pop(),A=b[b.length-1]);return b}for(o(y,p),R=[],E=0,F=g(v,y.length);0<=F?E<F:E>F;0<=F?++E:--E)R.push(s(y,p));return R},I=function(y,v,p,_){var A,b,P;for(_==null&&(_=i),A=y[p];p>v;){if(P=p-1>>1,b=y[P],_(A,b)<0){y[p]=b,p=P;continue}break}return y[p]=A},m=function(y,v,p){var _,A,b,P,E;for(p==null&&(p=i),A=y.length,E=v,b=y[v],_=2*v+1;_<A;)P=_+1,P<A&&!(p(y[_],y[P])<0)&&(_=P),y[v]=y[_],v=_,_=2*v+1;return y[v]=b,I(y,E,v,p)},e=function(){y.push=a,y.pop=s,y.replace=c,y.pushpop=l,y.heapify=o,y.updateItem=f,y.nlargest=u,y.nsmallest=h;function y(v){this.cmp=v??i,this.nodes=[]}return y.prototype.push=function(v){return a(this.nodes,v,this.cmp)},y.prototype.pop=function(){return s(this.nodes,this.cmp)},y.prototype.peek=function(){return this.nodes[0]},y.prototype.contains=function(v){return this.nodes.indexOf(v)!==-1},y.prototype.replace=function(v){return c(this.nodes,v,this.cmp)},y.prototype.pushpop=function(v){return l(this.nodes,v,this.cmp)},y.prototype.heapify=function(){return o(this.nodes,this.cmp)},y.prototype.updateItem=function(v){return f(this.nodes,v,this.cmp)},y.prototype.clear=function(){return this.nodes=[]},y.prototype.empty=function(){return this.nodes.length===0},y.prototype.size=function(){return this.nodes.length},y.prototype.clone=function(){var v;return v=new y,v.nodes=this.nodes.slice(0),v},y.prototype.toArray=function(){return this.nodes.slice(0)},y.prototype.insert=y.prototype.push,y.prototype.top=y.prototype.peek,y.prototype.front=y.prototype.peek,y.prototype.has=y.prototype.contains,y.prototype.copy=y.prototype.clone,y}(),function(y,v){return r.exports=v()}(this,function(){return e})}).call(k)})(Vv);var dw=Vv.exports,gw=dw,Vt={},pw=cw,Iw=fw,vw=gw;const mw=0,yw=1;var _w=Vt,Cw=1;Vt.js=function(){var r=1,t=1.4,e=!1,i={},n,o={},s={},a={},l=!0,c,d={},g=[],u=Number.MAX_VALUE,h,f=!1;this.setAcceptableTiles=function(A){A instanceof Array?h=A:!isNaN(parseFloat(A))&&isFinite(A)&&(h=[A])},this.enableSync=function(){e=!0},this.disableSync=function(){e=!1},this.enableDiagonals=function(){f=!0},this.disableDiagonals=function(){f=!1},this.setGrid=function(A){n=A;for(var b=0;b<n.length;b++)for(var P=0;P<n[0].length;P++)o[n[b][P]]||(o[n[b][P]]=1)},this.setTileCost=function(A,b){o[A]=b},this.setAdditionalPointCost=function(A,b,P){s[b]===void 0&&(s[b]={}),s[b][A]=P},this.removeAdditionalPointCost=function(A,b){s[b]!==void 0&&delete s[b][A]},this.removeAllAdditionalPointCosts=function(){s={}},this.setDirectionalCondition=function(A,b,P){a[b]===void 0&&(a[b]={}),a[b][A]=P},this.removeAllDirectionalConditions=function(){a={}},this.setIterationsPerCalculation=function(A){u=A},this.avoidAdditionalPoint=function(A,b){i[b]===void 0&&(i[b]={}),i[b][A]=1},this.stopAvoidingAdditionalPoint=function(A,b){i[b]!==void 0&&delete i[b][A]},this.enableCornerCutting=function(){l=!0},this.disableCornerCutting=function(){l=!1},this.stopAvoidingAllAdditionalPoints=function(){i={}},this.findPath=function(A,b,P,E,C){var x=function(U){e?C(U):setTimeout(function(){C(U)})};if(h===void 0)throw new Error("You can't set a path without first calling setAcceptableTiles() on EasyStar.");if(n===void 0)throw new Error("You can't set a path without first calling setGrid() on EasyStar.");if(A<0||b<0||P<0||E<0||A>n[0].length-1||b>n.length-1||P>n[0].length-1||E>n.length-1)throw new Error("Your start or end point is outside the scope of your grid.");if(A===P&&b===E){x([]);return}for(var F=n[E][P],R=!1,Z=0;Z<h.length;Z++)if(F===h[Z]){R=!0;break}if(R===!1){x(null);return}var H=new pw;H.openList=new vw(function(U,X){return U.bestGuessDistance()-X.bestGuessDistance()}),H.isDoneCalculating=!1,H.nodeHash={},H.startX=A,H.startY=b,H.endX=P,H.endY=E,H.callback=x,H.openList.push(p(H,H.startX,H.startY,null,r));var W=Cw++;return d[W]=H,g.push(W),W},this.cancelPath=function(A){return A in d?(delete d[A],!0):!1},this.calculate=function(){if(!(g.length===0||n===void 0||h===void 0))for(c=0;c<u;c++){if(g.length===0)return;e&&(c=0);var A=g[0],b=d[A];if(typeof b>"u"){g.shift();continue}if(b.openList.size()===0){b.callback(null),delete d[A],g.shift();continue}var P=b.openList.pop();if(b.endX===P.x&&b.endY===P.y){var E=[];E.push({x:P.x,y:P.y});for(var C=P.parent;C!=null;)E.push({x:C.x,y:C.y}),C=C.parent;E.reverse();var x=E;b.callback(x),delete d[A],g.shift();continue}P.list=mw,P.y>0&&I(b,P,0,-1,r*v(P.x,P.y-1)),P.x<n[0].length-1&&I(b,P,1,0,r*v(P.x+1,P.y)),P.y<n.length-1&&I(b,P,0,1,r*v(P.x,P.y+1)),P.x>0&&I(b,P,-1,0,r*v(P.x-1,P.y)),f&&(P.x>0&&P.y>0&&(l||m(n,h,P.x,P.y-1,P)&&m(n,h,P.x-1,P.y,P))&&I(b,P,-1,-1,t*v(P.x-1,P.y-1)),P.x<n[0].length-1&&P.y<n.length-1&&(l||m(n,h,P.x,P.y+1,P)&&m(n,h,P.x+1,P.y,P))&&I(b,P,1,1,t*v(P.x+1,P.y+1)),P.x<n[0].length-1&&P.y>0&&(l||m(n,h,P.x,P.y-1,P)&&m(n,h,P.x+1,P.y,P))&&I(b,P,1,-1,t*v(P.x+1,P.y-1)),P.x>0&&P.y<n.length-1&&(l||m(n,h,P.x,P.y+1,P)&&m(n,h,P.x-1,P.y,P))&&I(b,P,-1,1,t*v(P.x-1,P.y+1)))}};var I=function(A,b,P,E,C){var x=b.x+P,F=b.y+E;if((i[F]===void 0||i[F][x]===void 0)&&m(n,h,x,F,b)){var R=p(A,x,F,b,C);R.list===void 0?(R.list=yw,A.openList.push(R)):b.costSoFar+C<R.costSoFar&&(R.costSoFar=b.costSoFar+C,R.parent=b,A.openList.updateItem(R))}},m=function(A,b,P,E,C){var x=a[E]&&a[E][P];if(x){var F=y(C.x-P,C.y-E),R=function(){for(var H=0;H<x.length;H++)if(x[H]===F)return!0;return!1};if(!R())return!1}for(var Z=0;Z<b.length;Z++)if(A[E][P]===b[Z])return!0;return!1},y=function(A,b){if(A===0&&b===-1)return Vt.TOP;if(A===1&&b===-1)return Vt.TOP_RIGHT;if(A===1&&b===0)return Vt.RIGHT;if(A===1&&b===1)return Vt.BOTTOM_RIGHT;if(A===0&&b===1)return Vt.BOTTOM;if(A===-1&&b===1)return Vt.BOTTOM_LEFT;if(A===-1&&b===0)return Vt.LEFT;if(A===-1&&b===-1)return Vt.TOP_LEFT;throw new Error("These differences are not valid: "+A+", "+b)},v=function(A,b){return s[b]&&s[b][A]||o[n[b][A]]},p=function(A,b,P,E,C){if(A.nodeHash[P]!==void 0){if(A.nodeHash[P][b]!==void 0)return A.nodeHash[P][b]}else A.nodeHash[P]={};var x=_(b,P,A.endX,A.endY);if(E!==null)var F=E.costSoFar+C;else F=0;var R=new Iw(E,b,P,F,x);return A.nodeHash[P][b]=R,R},_=function(A,b,P,E){if(f){var C=Math.abs(A-P),x=Math.abs(b-E);return C<x?t*C+x:t*x+C}else{var C=Math.abs(A-P),x=Math.abs(b-E);return C+x}}};Vt.TOP="TOP";Vt.TOP_RIGHT="TOP_RIGHT";Vt.RIGHT="RIGHT";Vt.BOTTOM_RIGHT="BOTTOM_RIGHT";Vt.BOTTOM="BOTTOM";Vt.BOTTOM_LEFT="BOTTOM_LEFT";Vt.LEFT="LEFT";Vt.TOP_LEFT="TOP_LEFT";const Aw=Br(_w);var de={},Ai={};Object.defineProperty(Ai,"__esModule",{value:!0});Ai.RoomObject=void 0;class bw{constructor(){this._isDestroyed=!1}setParent(t){if(this._context!=null)throw new Error("RoomObject already provided with a context.");this._isDestroyed=!1,this._context=t,this.registered()}destroy(){this._isDestroyed||(this._isDestroyed=!0,this.roomObjectContainer.removeRoomObject(this),this._context=void 0,this.destroyed())}getRoomContext(){if(this._context==null)throw new Error("Invalid context");return this._context}get mounted(){return this._context!=null}get room(){return this.getRoomContext().room}get configuration(){return this.getRoomContext().configuration}get furnitureLoader(){return this.getRoomContext().furnitureLoader}get animationTicker(){return this.getRoomContext().animationTicker}get roomVisualization(){return this.getRoomContext().visualization}get geometry(){return this.getRoomContext().geometry}get roomObjectContainer(){return this.getRoomContext().roomObjectContainer}get avatarLoader(){return this.getRoomContext().avatarLoader}get eventManager(){return this.getRoomContext().eventManager}get tilemap(){return this.getRoomContext().tilemap}get landscapeContainer(){return this.getRoomContext().landscapeContainer}get application(){return this.getRoomContext().application}}Ai.RoomObject=bw;var Bs={},Ji={};Object.defineProperty(Ji,"__esModule",{value:!0});Ji.getZOrder=void 0;function ww(r,t,e){return r*1e3+t*1e3+e}Ji.getZOrder=ww;var Zn={};const Zt=Hh(hw);var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.ClickHandler=void 0;class xw{constructor(){this._map=new Map}get onClick(){return this._onClick}set onClick(t){this._onClick=t}get onDoubleClick(){return this._onDoubleClick}set onDoubleClick(t){this._onDoubleClick=t}get onPointerDown(){return this._onPointerDown}set onPointerDown(t){this._onPointerDown=t}get onPointerUp(){return this._onPointerUp}set onPointerUp(t){this._onPointerUp=t}handleClick(t){this._doubleClickInfo==null?(this.onClick&&this.onClick(t),this.onDoubleClick!=null&&this._startDoubleClick(t)):(t.stopPropagation(),this._performDoubleClick(t))}handlePointerDown(t){this.onPointerDown&&this.onPointerDown(t)}handlePointerUp(t){this.onPointerUp&&this.onPointerUp(t)}_performDoubleClick(t){this._doubleClickInfo!=null&&(this.onDoubleClick&&this.onDoubleClick(this._doubleClickInfo.initialEvent),setTimeout(()=>{this._resetDoubleClick()}))}_resetDoubleClick(){this._doubleClickInfo!=null&&(clearTimeout(this._doubleClickInfo.timeout),this._doubleClickInfo=void 0)}_startDoubleClick(t){this._doubleClickInfo={initialEvent:t,timeout:window.setTimeout(()=>this._resetDoubleClick(),350)}}}Gn.ClickHandler=xw;var Nn={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Oh=function(r,t){return Oh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Oh(r,t)};function Ct(r,t){Oh(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function xn(r){return typeof r=="function"}var tg=!1,ye={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){var t=new Error;""+t.stack}tg=r},get useDeprecatedSynchronousErrorHandling(){return tg}};function fr(r){setTimeout(function(){throw r},0)}var ps={closed:!0,next:function(r){},error:function(r){if(ye.useDeprecatedSynchronousErrorHandling)throw r;fr(r)},complete:function(){}},we=function(){return Array.isArray||function(r){return r&&typeof r.length=="number"}}();function Cc(r){return r!==null&&typeof r=="object"}var Pw=function(){function r(t){return Error.call(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(e,i){return i+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t,this}return r.prototype=Object.create(Error.prototype),r}(),fn=Pw,Yt=function(){function r(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return r.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this,i=e._parentOrParents,n=e._ctorUnsubscribe,o=e._unsubscribe,s=e._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof r)i.remove(this);else if(i!==null)for(var a=0;a<i.length;++a){var l=i[a];l.remove(this)}if(xn(o)){n&&(this._unsubscribe=void 0);try{o.call(this)}catch(g){t=g instanceof fn?eg(g.errors):[g]}}if(we(s))for(var a=-1,c=s.length;++a<c;){var d=s[a];if(Cc(d))try{d.unsubscribe()}catch(u){t=t||[],u instanceof fn?t=t.concat(eg(u.errors)):t.push(u)}}if(t)throw new fn(t)}},r.prototype.add=function(t){var e=t;if(!t)return r.EMPTY;switch(typeof t){case"function":e=new r(t);case"object":if(e===this||e.closed||typeof e.unsubscribe!="function")return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof r)){var i=e;e=new r,e._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var n=e._parentOrParents;if(n===null)e._parentOrParents=this;else if(n instanceof r){if(n===this)return e;e._parentOrParents=[n,this]}else if(n.indexOf(this)===-1)n.push(this);else return e;var o=this._subscriptions;return o===null?this._subscriptions=[e]:o.push(e),e},r.prototype.remove=function(t){var e=this._subscriptions;if(e){var i=e.indexOf(t);i!==-1&&e.splice(i,1)}},r.EMPTY=function(t){return t.closed=!0,t}(new r),r}();function eg(r){return r.reduce(function(t,e){return t.concat(e instanceof fn?e.errors:e)},[])}var Is=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),oe=function(r){Ct(t,r);function t(e,i,n){var o=r.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=ps;break;case 1:if(!e){o.destination=ps;break}if(typeof e=="object"){e instanceof t?(o.syncErrorThrowable=e.syncErrorThrowable,o.destination=e,e.add(o)):(o.syncErrorThrowable=!0,o.destination=new ig(o,e));break}default:o.syncErrorThrowable=!0,o.destination=new ig(o,e,i,n);break}return o}return t.prototype[Is]=function(){return this},t.create=function(e,i,n){var o=new t(e,i,n);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(Yt),ig=function(r){Ct(t,r);function t(e,i,n,o){var s=r.call(this)||this;s._parentSubscriber=e;var a,l=s;return xn(i)?a=i:i&&(a=i.next,n=i.error,o=i.complete,i!==ps&&(l=Object.create(i),xn(l.unsubscribe)&&s.add(l.unsubscribe.bind(l)),l.unsubscribe=s.unsubscribe.bind(s))),s._context=l,s._next=a,s._error=n,s._complete=o,s}return t.prototype.next=function(e){if(!this.isStopped&&this._next){var i=this._parentSubscriber;!ye.useDeprecatedSynchronousErrorHandling||!i.syncErrorThrowable?this.__tryOrUnsub(this._next,e):this.__tryOrSetError(i,this._next,e)&&this.unsubscribe()}},t.prototype.error=function(e){if(!this.isStopped){var i=this._parentSubscriber,n=ye.useDeprecatedSynchronousErrorHandling;if(this._error)!n||!i.syncErrorThrowable?(this.__tryOrUnsub(this._error,e),this.unsubscribe()):(this.__tryOrSetError(i,this._error,e),this.unsubscribe());else if(i.syncErrorThrowable)n?(i.syncErrorValue=e,i.syncErrorThrown=!0):fr(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;fr(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var i=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};!ye.useDeprecatedSynchronousErrorHandling||!i.syncErrorThrowable?(this.__tryOrUnsub(n),this.unsubscribe()):(this.__tryOrSetError(i,n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,i){try{e.call(this._context,i)}catch(n){if(this.unsubscribe(),ye.useDeprecatedSynchronousErrorHandling)throw n;fr(n)}},t.prototype.__tryOrSetError=function(e,i,n){if(!ye.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{i.call(this._context,n)}catch(o){return ye.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=o,e.syncErrorThrown=!0,!0):(fr(o),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(oe);function Ac(r){for(;r;){var t=r,e=t.closed,i=t.destination,n=t.isStopped;if(e||n)return!1;i&&i instanceof oe?r=i:r=null}return!0}function Sw(r,t,e){if(r){if(r instanceof oe)return r;if(r[Is])return r[Is]()}return!r&&!t&&!e?new oe(ps):new oe(r,t,e)}var Wr=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Pn(r){return r}function Tw(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return Jv(r)}function Jv(r){return r.length===0?Pn:r.length===1?r[0]:function(e){return r.reduce(function(i,n){return n(i)},e)}}var _t=function(){function r(t){this._isScalar=!1,t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,i){var n=this.operator,o=Sw(t,e,i);if(n?o.add(n.call(o,this.source)):o.add(this.source||ye.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),ye.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){ye.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),Ac(t)?t.error(e):console.warn(e)}},r.prototype.forEach=function(t,e){var i=this;return e=rg(e),new e(function(n,o){var s;s=i.subscribe(function(a){try{t(a)}catch(l){o(l),s&&s.unsubscribe()}},o,n)})},r.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},r.prototype[Wr]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===0?this:Jv(t)(this)},r.prototype.toPromise=function(t){var e=this;return t=rg(t),new t(function(i,n){var o;e.subscribe(function(s){return o=s},function(s){return n(s)},function(){return i(o)})})},r.create=function(t){return new r(t)},r}();function rg(r){if(r||(r=ye.Promise||Promise),!r)throw new Error("no Promise impl found");return r}var Ew=function(){function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return r.prototype=Object.create(Error.prototype),r}(),li=Ew,Qv=function(r){Ct(t,r);function t(e,i){var n=r.call(this)||this;return n.subject=e,n.subscriber=i,n.closed=!1,n}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,i=e.observers;if(this.subject=null,!(!i||i.length===0||e.isStopped||e.closed)){var n=i.indexOf(this.subscriber);n!==-1&&i.splice(n,1)}}},t}(Yt),$v=function(r){Ct(t,r);function t(e){var i=r.call(this,e)||this;return i.destination=e,i}return t}(oe),jn=function(r){Ct(t,r);function t(){var e=r.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return t.prototype[Is]=function(){return new $v(this)},t.prototype.lift=function(e){var i=new ng(this,this);return i.operator=e,i},t.prototype.next=function(e){if(this.closed)throw new li;if(!this.isStopped)for(var i=this.observers,n=i.length,o=i.slice(),s=0;s<n;s++)o[s].next(e)},t.prototype.error=function(e){if(this.closed)throw new li;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var i=this.observers,n=i.length,o=i.slice(),s=0;s<n;s++)o[s].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new li;this.isStopped=!0;for(var e=this.observers,i=e.length,n=e.slice(),o=0;o<i;o++)n[o].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(e){if(this.closed)throw new li;return r.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){if(this.closed)throw new li;return this.hasError?(e.error(this.thrownError),Yt.EMPTY):this.isStopped?(e.complete(),Yt.EMPTY):(this.observers.push(e),new Qv(this,e))},t.prototype.asObservable=function(){var e=new _t;return e.source=this,e},t.create=function(e,i){return new ng(e,i)},t}(_t),ng=function(r){Ct(t,r);function t(e,i){var n=r.call(this)||this;return n.destination=e,n.source=i,n}return t.prototype.next=function(e){var i=this.destination;i&&i.next&&i.next(e)},t.prototype.error=function(e){var i=this.destination;i&&i.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var i=this.source;return i?this.source.subscribe(e):Yt.EMPTY},t}(jn);function Fw(){return function(t){return t.lift(new Mw(t))}}var Mw=function(){function r(t){this.connectable=t}return r.prototype.call=function(t,e){var i=this.connectable;i._refCount++;var n=new Dw(t,i),o=e.subscribe(n);return n.closed||(n.connection=i.connect()),o},r}(),Dw=function(r){Ct(t,r);function t(e,i){var n=r.call(this,e)||this;return n.connectable=i,n}return t.prototype._unsubscribe=function(){var e=this.connectable;if(!e){this.connection=null;return}this.connectable=null;var i=e._refCount;if(i<=0){this.connection=null;return}if(e._refCount=i-1,i>1){this.connection=null;return}var n=this.connection,o=e._connection;this.connection=null,o&&(!n||o===n)&&o.unsubscribe()},t}(oe),Lw=function(r){Ct(t,r);function t(e,i){var n=r.call(this)||this;return n.source=e,n.subjectFactory=i,n._refCount=0,n._isComplete=!1,n}return t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,e=this._connection=new Yt,e.add(this.source.subscribe(new Bw(this.getSubject(),this))),e.closed&&(this._connection=null,e=Yt.EMPTY)),e},t.prototype.refCount=function(){return Fw()(this)},t}(_t),Bw=function(r){Ct(t,r);function t(e,i){var n=r.call(this,e)||this;return n.connectable=i,n}return t.prototype._error=function(e){this._unsubscribe(),r.prototype._error.call(this,e)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var i=e._connection;e._refCount=0,e._subject=null,e._connection=null,i&&i.unsubscribe()}},t}($v),Rw=function(r){Ct(t,r);function t(e,i,n){var o=r.call(this)||this;return o.key=e,o.groupSubject=i,o.refCountSubscription=n,o}return t.prototype._subscribe=function(e){var i=new Yt,n=this,o=n.refCountSubscription,s=n.groupSubject;return o&&!o.closed&&i.add(new Ow(o)),i.add(s.subscribe(e)),i},t}(_t),Ow=function(r){Ct(t,r);function t(e){var i=r.call(this)||this;return i.parent=e,e.count++,i}return t.prototype.unsubscribe=function(){var e=this.parent;!e.closed&&!this.closed&&(r.prototype.unsubscribe.call(this),e.count-=1,e.count===0&&e.attemptedToUnsubscribe&&e.unsubscribe())},t}(Yt),Zw=function(r){Ct(t,r);function t(e){var i=r.call(this)||this;return i._value=e,i}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(e){var i=r.prototype._subscribe.call(this,e);return i&&!i.closed&&e.next(this._value),i},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new li;return this._value},t.prototype.next=function(e){r.prototype.next.call(this,this._value=e)},t}(jn),Gw=function(r){Ct(t,r);function t(e,i){return r.call(this)||this}return t.prototype.schedule=function(e,i){return this},t}(Yt),kn=function(r){Ct(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.scheduler=e,n.work=i,n.pending=!1,n}return t.prototype.schedule=function(e,i){if(i===void 0&&(i=0),this.closed)return this;this.state=e;var n=this.id,o=this.scheduler;return n!=null&&(this.id=this.recycleAsyncId(o,n,i)),this.pending=!0,this.delay=i,this.id=this.id||this.requestAsyncId(o,this.id,i),this},t.prototype.requestAsyncId=function(e,i,n){return n===void 0&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,i,n){if(n===void 0&&(n=0),n!==null&&this.delay===n&&this.pending===!1)return i;clearInterval(i)},t.prototype.execute=function(e,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,i);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,i){var n=!1,o=void 0;try{this.work(e)}catch(s){n=!0,o=!!s&&s||new Error(s)}if(n)return this.unsubscribe(),o},t.prototype._unsubscribe=function(){var e=this.id,i=this.scheduler,n=i.actions,o=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,o!==-1&&n.splice(o,1),e!=null&&(this.id=this.recycleAsyncId(i,e,null)),this.delay=null},t}(Gw),Nw=function(r){Ct(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.scheduler=e,n.work=i,n}return t.prototype.schedule=function(e,i){return i===void 0&&(i=0),i>0?r.prototype.schedule.call(this,e,i):(this.delay=i,this.state=e,this.scheduler.flush(this),this)},t.prototype.execute=function(e,i){return i>0||this.closed?r.prototype.execute.call(this,e,i):this._execute(e,i)},t.prototype.requestAsyncId=function(e,i,n){return n===void 0&&(n=0),n!==null&&n>0||n===null&&this.delay>0?r.prototype.requestAsyncId.call(this,e,i,n):e.flush(this)},t}(kn),Zh=function(){function r(t,e){e===void 0&&(e=r.now),this.SchedulerAction=t,this.now=e}return r.prototype.schedule=function(t,e,i){return e===void 0&&(e=0),new this.SchedulerAction(this,t).schedule(i,e)},r.now=function(){return Date.now()},r}(),Wn=function(r){Ct(t,r);function t(e,i){i===void 0&&(i=Zh.now);var n=r.call(this,e,function(){return t.delegate&&t.delegate!==n?t.delegate.now():i()})||this;return n.actions=[],n.active=!1,n.scheduled=void 0,n}return t.prototype.schedule=function(e,i,n){return i===void 0&&(i=0),t.delegate&&t.delegate!==this?t.delegate.schedule(e,i,n):r.prototype.schedule.call(this,e,i,n)},t.prototype.flush=function(e){var i=this.actions;if(this.active){i.push(e);return}var n;this.active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=i.shift());if(this.active=!1,n){for(;e=i.shift();)e.unsubscribe();throw n}},t}(Zh),jw=function(r){Ct(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(Wn),Kv=new jw(Nw),qv=Kv,Er=new _t(function(r){return r.complete()});function bc(r){return r?kw(r):Er}function kw(r){return new _t(function(t){return r.schedule(function(){return t.complete()})})}function pi(r){return r&&typeof r.schedule=="function"}var tm=function(r){return function(t){for(var e=0,i=r.length;e<i&&!t.closed;e++)t.next(r[e]);t.complete()}};function wc(r,t){return new _t(function(e){var i=new Yt,n=0;return i.add(t.schedule(function(){if(n===r.length){e.complete();return}e.next(r[n++]),e.closed||i.add(this.schedule())})),i})}function Xn(r,t){return t?wc(r,t):new _t(tm(r))}function xc(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r[r.length-1];return pi(e)?(r.pop(),wc(r,e)):Xn(r)}function em(r,t){return t?new _t(function(e){return t.schedule(Ww,0,{error:r,subscriber:e})}):new _t(function(e){return e.error(r)})}function Ww(r){var t=r.error,e=r.subscriber;e.error(t)}var Gh;Gh||(Gh={});var es=function(){function r(t,e,i){this.kind=t,this.value=e,this.error=i,this.hasValue=t==="N"}return r.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},r.prototype.do=function(t,e,i){var n=this.kind;switch(n){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return i&&i()}},r.prototype.accept=function(t,e,i){return t&&typeof t.next=="function"?this.observe(t):this.do(t,e,i)},r.prototype.toObservable=function(){var t=this.kind;switch(t){case"N":return xc(this.value);case"E":return em(this.error);case"C":return bc()}throw new Error("unexpected notification kind value")},r.createNext=function(t){return typeof t<"u"?new r("N",t):r.undefinedValueNotification},r.createError=function(t){return new r("E",void 0,t)},r.createComplete=function(){return r.completeNotification},r.completeNotification=new r("C"),r.undefinedValueNotification=new r("N",void 0),r}(),Xw=function(r){Ct(t,r);function t(e,i,n){n===void 0&&(n=0);var o=r.call(this,e)||this;return o.scheduler=i,o.delay=n,o}return t.dispatch=function(e){var i=e.notification,n=e.destination;i.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){var i=this.destination;i.add(this.scheduler.schedule(t.dispatch,this.delay,new Hw(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(es.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(es.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(es.createComplete()),this.unsubscribe()},t}(oe),Hw=function(){function r(t,e){this.notification=t,this.destination=e}return r}(),Yw=function(r){Ct(t,r);function t(e,i,n){e===void 0&&(e=Number.POSITIVE_INFINITY),i===void 0&&(i=Number.POSITIVE_INFINITY);var o=r.call(this)||this;return o.scheduler=n,o._events=[],o._infiniteTimeWindow=!1,o._bufferSize=e<1?1:e,o._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(o._infiniteTimeWindow=!0,o.next=o.nextInfiniteTimeWindow):o.next=o.nextTimeWindow,o}return t.prototype.nextInfiniteTimeWindow=function(e){if(!this.isStopped){var i=this._events;i.push(e),i.length>this._bufferSize&&i.shift()}r.prototype.next.call(this,e)},t.prototype.nextTimeWindow=function(e){this.isStopped||(this._events.push(new Uw(this._getNow(),e)),this._trimBufferThenGetEvents()),r.prototype.next.call(this,e)},t.prototype._subscribe=function(e){var i=this._infiniteTimeWindow,n=i?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,s=n.length,a;if(this.closed)throw new li;if(this.isStopped||this.hasError?a=Yt.EMPTY:(this.observers.push(e),a=new Qv(this,e)),o&&e.add(e=new Xw(e,o)),i)for(var l=0;l<s&&!e.closed;l++)e.next(n[l]);else for(var l=0;l<s&&!e.closed;l++)e.next(n[l].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),a},t.prototype._getNow=function(){return(this.scheduler||qv).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),i=this._bufferSize,n=this._windowTime,o=this._events,s=o.length,a=0;a<s&&!(e-o[a].time<n);)a++;return s>i&&(a=Math.max(a,s-i)),a>0&&o.splice(0,a),o},t}(jn),Uw=function(){function r(t,e){this.time=t,this.value=e}return r}(),Hn=function(r){Ct(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return t.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),Yt.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),Yt.EMPTY):r.prototype._subscribe.call(this,e)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(e){this.hasCompleted||r.prototype.error.call(this,e)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&r.prototype.next.call(this,this.value),r.prototype.complete.call(this)},t}(jn),zw=1,Vw=function(){return Promise.resolve()}(),Nh={};function og(r){return r in Nh?(delete Nh[r],!0):!1}var sg={setImmediate:function(r){var t=zw++;return Nh[t]=!0,Vw.then(function(){return og(t)&&r()}),t},clearImmediate:function(r){og(r)}},Jw=function(r){Ct(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.scheduler=e,n.work=i,n}return t.prototype.requestAsyncId=function(e,i,n){return n===void 0&&(n=0),n!==null&&n>0?r.prototype.requestAsyncId.call(this,e,i,n):(e.actions.push(this),e.scheduled||(e.scheduled=sg.setImmediate(e.flush.bind(e,null))))},t.prototype.recycleAsyncId=function(e,i,n){if(n===void 0&&(n=0),n!==null&&n>0||n===null&&this.delay>0)return r.prototype.recycleAsyncId.call(this,e,i,n);e.actions.length===0&&(sg.clearImmediate(i),e.scheduled=void 0)},t}(kn),Qw=function(r){Ct(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var i=this.actions,n,o=-1,s=i.length;e=e||i.shift();do if(n=e.execute(e.state,e.delay))break;while(++o<s&&(e=i.shift()));if(this.active=!1,n){for(;++o<s&&(e=i.shift());)e.unsubscribe();throw n}},t}(Wn),im=new Qw(Jw),$w=im,rm=new Wn(kn),vs=rm,Kw=function(r){Ct(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.scheduler=e,n.work=i,n}return t.prototype.requestAsyncId=function(e,i,n){return n===void 0&&(n=0),n!==null&&n>0?r.prototype.requestAsyncId.call(this,e,i,n):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},t.prototype.recycleAsyncId=function(e,i,n){if(n===void 0&&(n=0),n!==null&&n>0||n===null&&this.delay>0)return r.prototype.recycleAsyncId.call(this,e,i,n);e.actions.length===0&&(cancelAnimationFrame(i),e.scheduled=void 0)},t}(kn),qw=function(r){Ct(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var i=this.actions,n,o=-1,s=i.length;e=e||i.shift();do if(n=e.execute(e.state,e.delay))break;while(++o<s&&(e=i.shift()));if(this.active=!1,n){for(;++o<s&&(e=i.shift());)e.unsubscribe();throw n}},t}(Wn),nm=new qw(Kw),tx=nm,ex=function(r){Ct(t,r);function t(e,i){e===void 0&&(e=om),i===void 0&&(i=Number.POSITIVE_INFINITY);var n=r.call(this,e,function(){return n.frame})||this;return n.maxFrames=i,n.frame=0,n.index=-1,n}return t.prototype.flush=function(){for(var e=this,i=e.actions,n=e.maxFrames,o,s;(s=i[0])&&s.delay<=n&&(i.shift(),this.frame=s.delay,!(o=s.execute(s.state,s.delay))););if(o){for(;s=i.shift();)s.unsubscribe();throw o}},t.frameTimeFactor=10,t}(Wn),om=function(r){Ct(t,r);function t(e,i,n){n===void 0&&(n=e.index+=1);var o=r.call(this,e,i)||this;return o.scheduler=e,o.work=i,o.index=n,o.active=!0,o.index=e.index=n,o}return t.prototype.schedule=function(e,i){if(i===void 0&&(i=0),!this.id)return r.prototype.schedule.call(this,e,i);this.active=!1;var n=new t(this.scheduler,this.work);return this.add(n),n.schedule(e,i)},t.prototype.requestAsyncId=function(e,i,n){n===void 0&&(n=0),this.delay=e.frame+n;var o=e.actions;return o.push(this),o.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,i,n){},t.prototype._execute=function(e,i){if(this.active===!0)return r.prototype._execute.call(this,e,i)},t.sortActions=function(e,i){return e.delay===i.delay?e.index===i.index?0:e.index>i.index?1:-1:e.delay>i.delay?1:-1},t}(kn);function sm(){}function ix(r){return!!r&&(r instanceof _t||typeof r.lift=="function"&&typeof r.subscribe=="function")}var rx=function(){function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return r.prototype=Object.create(Error.prototype),r}(),nx=rx,ox=function(){function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return r.prototype=Object.create(Error.prototype),r}(),sx=ox,ax=function(){function r(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return r.prototype=Object.create(Error.prototype),r}(),ux=ax;function Xr(r,t){return function(i){if(typeof r!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new lx(r,t))}}var lx=function(){function r(t,e){this.project=t,this.thisArg=e}return r.prototype.call=function(t,e){return e.subscribe(new hx(t,this.project,this.thisArg))},r}(),hx=function(r){Ct(t,r);function t(e,i,n){var o=r.call(this,e)||this;return o.project=i,o.count=0,o.thisArg=n||o,o}return t.prototype._next=function(e){var i;try{i=this.project.call(this.thisArg,e,this.count++)}catch(n){this.destination.error(n);return}this.destination.next(i)},t}(oe);function am(r,t,e){if(t)if(pi(t))e=t;else return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return am(r,e).apply(void 0,i).pipe(Xr(function(o){return we(o)?t.apply(void 0,o):t(o)}))};return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var o=this,s,a={context:o,subject:s,callbackFunc:r,scheduler:e};return new _t(function(l){if(e){var d={args:i,subscriber:l,params:a};return e.schedule(cx,0,d)}else{if(!s){s=new Hn;var c=function(){for(var g=[],u=0;u<arguments.length;u++)g[u]=arguments[u];s.next(g.length<=1?g[0]:g),s.complete()};try{r.apply(o,i.concat([c]))}catch(g){Ac(s)?s.error(g):console.warn(g)}}return s.subscribe(l)}})}}function cx(r){var t=this,e=r.args,i=r.subscriber,n=r.params,o=n.callbackFunc,s=n.context,a=n.scheduler,l=n.subject;if(!l){l=n.subject=new Hn;var c=function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];var u=d.length<=1?d[0]:d;t.add(a.schedule(fx,0,{value:u,subject:l}))};try{o.apply(s,e.concat([c]))}catch(d){l.error(d)}}this.add(l.subscribe(i))}function fx(r){var t=r.value,e=r.subject;e.next(t),e.complete()}function um(r,t,e){if(t)if(pi(t))e=t;else return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return um(r,e).apply(void 0,i).pipe(Xr(function(o){return we(o)?t.apply(void 0,o):t(o)}))};return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var o={subject:void 0,args:i,callbackFunc:r,scheduler:e,context:this};return new _t(function(s){var a=o.context,l=o.subject;if(e)return e.schedule(dx,0,{params:o,subscriber:s,context:a});if(!l){l=o.subject=new Hn;var c=function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];var u=d.shift();if(u){l.error(u);return}l.next(d.length<=1?d[0]:d),l.complete()};try{r.apply(a,i.concat([c]))}catch(d){Ac(l)?l.error(d):console.warn(d)}}return l.subscribe(s)})}}function dx(r){var t=this,e=r.params,i=r.subscriber,n=r.context,o=e.callbackFunc,s=e.args,a=e.scheduler,l=e.subject;if(!l){l=e.subject=new Hn;var c=function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];var u=d.shift();if(u)t.add(a.schedule(ag,0,{err:u,subject:l}));else{var h=d.length<=1?d[0]:d;t.add(a.schedule(gx,0,{value:h,subject:l}))}};try{o.apply(n,s.concat([c]))}catch(d){this.add(a.schedule(ag,0,{err:d,subject:l}))}}this.add(l.subscribe(i))}function gx(r){var t=r.value,e=r.subject;e.next(t),e.complete()}function ag(r){var t=r.err,e=r.subject;e.error(t)}var lm=function(r){Ct(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.notifyNext=function(e,i,n,o,s){this.destination.next(i)},t.prototype.notifyError=function(e,i){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(oe),px=function(r){Ct(t,r);function t(e,i,n){var o=r.call(this)||this;return o.parent=e,o.outerValue=i,o.outerIndex=n,o.index=0,o}return t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(oe),Ix=function(r){return function(t){return r.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,fr),t}};function vx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ii=vx(),mx=function(r){return function(t){var e=r[Ii]();do{var i=void 0;try{i=e.next()}catch(n){return t.error(n),t}if(i.done){t.complete();break}if(t.next(i.value),t.closed)break}while(!0);return typeof e.return=="function"&&t.add(function(){e.return&&e.return()}),t}},yx=function(r){return function(t){var e=r[Wr]();if(typeof e.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)}},hm=function(r){return r&&typeof r.length=="number"&&typeof r!="function"};function cm(r){return!!r&&typeof r.subscribe!="function"&&typeof r.then=="function"}var Sn=function(r){if(r&&typeof r[Wr]=="function")return yx(r);if(hm(r))return tm(r);if(cm(r))return Ix(r);if(r&&typeof r[Ii]=="function")return mx(r);var t=Cc(r)?"an invalid object":"'"+r+"'",e="You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(e)};function fm(r,t,e,i,n){if(n===void 0&&(n=new px(r,e,i)),!n.closed)return t instanceof _t?t.subscribe(n):Sn(t)(n)}var ug={};function _x(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=void 0,i=void 0;return pi(r[r.length-1])&&(i=r.pop()),typeof r[r.length-1]=="function"&&(e=r.pop()),r.length===1&&we(r[0])&&(r=r[0]),Xn(r,i).lift(new Cx(e))}var Cx=function(){function r(t){this.resultSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new Ax(t,this.resultSelector))},r}(),Ax=function(r){Ct(t,r);function t(e,i){var n=r.call(this,e)||this;return n.resultSelector=i,n.active=0,n.values=[],n.observables=[],n}return t.prototype._next=function(e){this.values.push(ug),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,i=e.length;if(i===0)this.destination.complete();else{this.active=i,this.toRespond=i;for(var n=0;n<i;n++){var o=e[n];this.add(fm(this,o,void 0,n))}}},t.prototype.notifyComplete=function(e){(this.active-=1)===0&&this.destination.complete()},t.prototype.notifyNext=function(e,i,n){var o=this.values,s=o[n],a=this.toRespond?s===ug?--this.toRespond:this.toRespond:0;o[n]=i,a===0&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},t.prototype._tryResultSelector=function(e){var i;try{i=this.resultSelector.apply(this,e)}catch(n){this.destination.error(n);return}this.destination.next(i)},t}(lm);function bx(r,t){return new _t(function(e){var i=new Yt;return i.add(t.schedule(function(){var n=r[Wr]();i.add(n.subscribe({next:function(o){i.add(t.schedule(function(){return e.next(o)}))},error:function(o){i.add(t.schedule(function(){return e.error(o)}))},complete:function(){i.add(t.schedule(function(){return e.complete()}))}}))})),i})}function wx(r,t){return new _t(function(e){var i=new Yt;return i.add(t.schedule(function(){return r.then(function(n){i.add(t.schedule(function(){e.next(n),i.add(t.schedule(function(){return e.complete()}))}))},function(n){i.add(t.schedule(function(){return e.error(n)}))})})),i})}function xx(r,t){if(!r)throw new Error("Iterable cannot be null");return new _t(function(e){var i=new Yt,n;return i.add(function(){n&&typeof n.return=="function"&&n.return()}),i.add(t.schedule(function(){n=r[Ii](),i.add(t.schedule(function(){if(!e.closed){var o,s;try{var a=n.next();o=a.value,s=a.done}catch(l){e.error(l);return}s?e.complete():(e.next(o),this.schedule())}}))})),i})}function Px(r){return r&&typeof r[Wr]=="function"}function Sx(r){return r&&typeof r[Ii]=="function"}function dm(r,t){if(r!=null){if(Px(r))return bx(r,t);if(cm(r))return wx(r,t);if(hm(r))return wc(r,t);if(Sx(r)||typeof r=="string")return xx(r,t)}throw new TypeError((r!==null&&typeof r||r)+" is not observable")}function Hr(r,t){return t?dm(r,t):r instanceof _t?r:new _t(Sn(r))}var gm=function(r){Ct(t,r);function t(e){var i=r.call(this)||this;return i.parent=e,i}return t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(oe),pm=function(r){Ct(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(oe);function Im(r,t){if(!t.closed){if(r instanceof _t)return r.subscribe(t);var e;try{e=Sn(r)(t)}catch(i){t.error(i)}return e}}function vm(r,t,e){return e===void 0&&(e=Number.POSITIVE_INFINITY),typeof t=="function"?function(i){return i.pipe(vm(function(n,o){return Hr(r(n,o)).pipe(Xr(function(s,a){return t(n,s,o,a)}))},e))}:(typeof t=="number"&&(e=t),function(i){return i.lift(new Tx(r,e))})}var Tx=function(){function r(t,e){e===void 0&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return r.prototype.call=function(t,e){return e.subscribe(new Ex(t,this.project,this.concurrent))},r}(),Ex=function(r){Ct(t,r);function t(e,i,n){n===void 0&&(n=Number.POSITIVE_INFINITY);var o=r.call(this,e)||this;return o.project=i,o.concurrent=n,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var i,n=this.index++;try{i=this.project(e,n)}catch(o){this.destination.error(o);return}this.active++,this._innerSub(i)},t.prototype._innerSub=function(e){var i=new gm(this),n=this.destination;n.add(i);var o=Im(e,i);o!==i&&n.add(o)},t.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},t}(pm);function mm(r){return r===void 0&&(r=Number.POSITIVE_INFINITY),vm(Pn,r)}function Fx(){return mm(1)}function Mx(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return Fx()(xc.apply(void 0,r))}function ym(r){return new _t(function(t){var e;try{e=r()}catch(n){t.error(n);return}var i=e?Hr(e):bc();return i.subscribe(t)})}function Dx(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===1){var e=r[0];if(we(e))return Zo(e,null);if(Cc(e)&&Object.getPrototypeOf(e)===Object.prototype){var i=Object.keys(e);return Zo(i.map(function(o){return e[o]}),i)}}if(typeof r[r.length-1]=="function"){var n=r.pop();return r=r.length===1&&we(r[0])?r[0]:r,Zo(r,null).pipe(Xr(function(o){return n.apply(void 0,o)}))}return Zo(r,null)}function Zo(r,t){return new _t(function(e){var i=r.length;if(i===0){e.complete();return}for(var n=new Array(i),o=0,s=0,a=function(c){var d=Hr(r[c]),g=!1;e.add(d.subscribe({next:function(u){g||(g=!0,s++),n[c]=u},error:function(u){return e.error(u)},complete:function(){o++,(o===i||!g)&&(s===i&&e.next(t?t.reduce(function(u,h,f){return u[h]=n[f],u},{}):n),e.complete())}}))},l=0;l<i;l++)a(l)})}function _m(r,t,e,i){return xn(e)&&(i=e,e=void 0),i?_m(r,t,e).pipe(Xr(function(n){return we(n)?i.apply(void 0,n):i(n)})):new _t(function(n){function o(s){arguments.length>1?n.next(Array.prototype.slice.call(arguments)):n.next(s)}Cm(r,t,o,n,e)})}function Cm(r,t,e,i,n){var o;if(Rx(r)){var s=r;r.addEventListener(t,e,n),o=function(){return s.removeEventListener(t,e,n)}}else if(Bx(r)){var a=r;r.on(t,e),o=function(){return a.off(t,e)}}else if(Lx(r)){var l=r;r.addListener(t,e),o=function(){return l.removeListener(t,e)}}else if(r&&r.length)for(var c=0,d=r.length;c<d;c++)Cm(r[c],t,e,i,n);else throw new TypeError("Invalid event target");i.add(o)}function Lx(r){return r&&typeof r.addListener=="function"&&typeof r.removeListener=="function"}function Bx(r){return r&&typeof r.on=="function"&&typeof r.off=="function"}function Rx(r){return r&&typeof r.addEventListener=="function"&&typeof r.removeEventListener=="function"}function Am(r,t,e){return e?Am(r,t).pipe(Xr(function(i){return we(i)?e.apply(void 0,i):e(i)})):new _t(function(i){var n=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return i.next(s.length===1?s[0]:s)},o;try{o=r(n)}catch(s){i.error(s);return}if(xn(t))return function(){return t(n,o)}})}function Ox(r,t,e,i,n){var o,s;if(arguments.length==1){var a=r;s=a.initialState,t=a.condition,e=a.iterate,o=a.resultSelector||Pn,n=a.scheduler}else i===void 0||pi(i)?(s=r,o=Pn,n=i):(s=r,o=i);return new _t(function(l){var c=s;if(n)return n.schedule(Zx,0,{subscriber:l,iterate:e,condition:t,resultSelector:o,state:c});do{if(t){var d=void 0;try{d=t(c)}catch(u){l.error(u);return}if(!d){l.complete();break}}var g=void 0;try{g=o(c)}catch(u){l.error(u);return}if(l.next(g),l.closed)break;try{c=e(c)}catch(u){l.error(u);return}}while(!0)})}function Zx(r){var t=r.subscriber,e=r.condition;if(!t.closed){if(r.needIterate)try{r.state=r.iterate(r.state)}catch(o){t.error(o);return}else r.needIterate=!0;if(e){var i=void 0;try{i=e(r.state)}catch(o){t.error(o);return}if(!i){t.complete();return}if(t.closed)return}var n;try{n=r.resultSelector(r.state)}catch(o){t.error(o);return}if(!t.closed&&(t.next(n),!t.closed))return this.schedule(r)}}function Gx(r,t,e){return t===void 0&&(t=Er),e===void 0&&(e=Er),ym(function(){return r()?t:e})}function jh(r){return!we(r)&&r-parseFloat(r)+1>=0}function Nx(r,t){return r===void 0&&(r=0),t===void 0&&(t=vs),(!jh(r)||r<0)&&(r=0),(!t||typeof t.schedule!="function")&&(t=vs),new _t(function(e){return e.add(t.schedule(jx,r,{subscriber:e,counter:0,period:r})),e})}function jx(r){var t=r.subscriber,e=r.counter,i=r.period;t.next(e),this.schedule({subscriber:t,counter:e+1,period:i},i)}function kx(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=Number.POSITIVE_INFINITY,i=null,n=r[r.length-1];return pi(n)?(i=r.pop(),r.length>1&&typeof r[r.length-1]=="number"&&(e=r.pop())):typeof n=="number"&&(e=r.pop()),i===null&&r.length===1&&r[0]instanceof _t?r[0]:mm(e)(Xn(r,i))}var bm=new _t(sm);function Wx(){return bm}function kh(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===0)return Er;var e=r[0],i=r.slice(1);return r.length===1&&we(e)?kh.apply(void 0,e):new _t(function(n){var o=function(){return n.add(kh.apply(void 0,i).subscribe(n))};return Hr(e).subscribe({next:function(s){n.next(s)},error:o,complete:o})})}function Xx(r,t){return t?new _t(function(e){var i=Object.keys(r),n=new Yt;return n.add(t.schedule(Hx,0,{keys:i,index:0,subscriber:e,subscription:n,obj:r})),n}):new _t(function(e){for(var i=Object.keys(r),n=0;n<i.length&&!e.closed;n++){var o=i[n];r.hasOwnProperty(o)&&e.next([o,r[o]])}e.complete()})}function Hx(r){var t=r.keys,e=r.index,i=r.subscriber,n=r.subscription,o=r.obj;if(!i.closed)if(e<t.length){var s=t[e];i.next([s,o[s]]),n.add(this.schedule({keys:t,index:e+1,subscriber:i,subscription:n,obj:o}))}else i.complete()}function Yx(r,t){function e(){return!e.pred.apply(e.thisArg,arguments)}return e.pred=r,e.thisArg=t,e}function lg(r,t){return function(i){return i.lift(new Ux(r,t))}}var Ux=function(){function r(t,e){this.predicate=t,this.thisArg=e}return r.prototype.call=function(t,e){return e.subscribe(new zx(t,this.predicate,this.thisArg))},r}(),zx=function(r){Ct(t,r);function t(e,i,n){var o=r.call(this,e)||this;return o.predicate=i,o.thisArg=n,o.count=0,o}return t.prototype._next=function(e){var i;try{i=this.predicate.call(this.thisArg,e,this.count++)}catch(n){this.destination.error(n);return}i&&this.destination.next(e)},t}(oe);function Vx(r,t,e){return[lg(t,e)(new _t(Sn(r))),lg(Yx(t,e))(new _t(Sn(r)))]}function Jx(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===1)if(we(r[0]))r=r[0];else return r[0];return Xn(r,void 0).lift(new Qx)}var Qx=function(){function r(){}return r.prototype.call=function(t,e){return e.subscribe(new $x(t))},r}(),$x=function(r){Ct(t,r);function t(e){var i=r.call(this,e)||this;return i.hasFirst=!1,i.observables=[],i.subscriptions=[],i}return t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,i=e.length;if(i===0)this.destination.complete();else{for(var n=0;n<i&&!this.hasFirst;n++){var o=e[n],s=fm(this,o,void 0,n);this.subscriptions&&this.subscriptions.push(s),this.add(s)}this.observables=null}},t.prototype.notifyNext=function(e,i,n){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(i)},t}(lm);function Kx(r,t,e){return r===void 0&&(r=0),new _t(function(i){t===void 0&&(t=r,r=0);var n=0,o=r;if(e)return e.schedule(qx,0,{index:n,count:t,start:r,subscriber:i});do{if(n++>=t){i.complete();break}if(i.next(o++),i.closed)break}while(!0)})}function qx(r){var t=r.start,e=r.index,i=r.count,n=r.subscriber;if(e>=i){n.complete();return}n.next(t),!n.closed&&(r.index=e+1,r.start=t+1,this.schedule(r))}function tP(r,t,e){r===void 0&&(r=0);var i=-1;return jh(t)?i=Number(t)<1&&1||Number(t):pi(t)&&(e=t),pi(e)||(e=vs),new _t(function(n){var o=jh(r)?r:+r-e.now();return e.schedule(eP,o,{index:0,period:i,subscriber:n})})}function eP(r){var t=r.index,e=r.period,i=r.subscriber;if(i.next(t),!i.closed){if(e===-1)return i.complete();r.index=t+1,this.schedule(r,e)}}function iP(r,t){return new _t(function(e){var i;try{i=r()}catch(a){e.error(a);return}var n;try{n=t(i)}catch(a){e.error(a);return}var o=n?Hr(n):Er,s=o.subscribe(e);return function(){s.unsubscribe(),i&&i.unsubscribe()}})}function rP(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r[r.length-1];return typeof e=="function"&&r.pop(),Xn(r,void 0).lift(new nP(e))}var nP=function(){function r(t){this.resultSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new oP(t,this.resultSelector))},r}(),oP=function(r){Ct(t,r);function t(e,i,n){var o=r.call(this,e)||this;return o.resultSelector=i,o.iterators=[],o.active=0,o.resultSelector=typeof i=="function"?i:void 0,o}return t.prototype._next=function(e){var i=this.iterators;we(e)?i.push(new aP(e)):typeof e[Ii]=="function"?i.push(new sP(e[Ii]())):i.push(new uP(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,i=e.length;if(this.unsubscribe(),i===0){this.destination.complete();return}this.active=i;for(var n=0;n<i;n++){var o=e[n];if(o.stillUnsubscribed){var s=this.destination;s.add(o.subscribe())}else this.active--}},t.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,i=e.length,n=this.destination,o=0;o<i;o++){var s=e[o];if(typeof s.hasValue=="function"&&!s.hasValue())return}for(var a=!1,l=[],o=0;o<i;o++){var s=e[o],c=s.next();if(s.hasCompleted()&&(a=!0),c.done){n.complete();return}l.push(c.value)}this.resultSelector?this._tryresultSelector(l):n.next(l),a&&n.complete()},t.prototype._tryresultSelector=function(e){var i;try{i=this.resultSelector.apply(this,e)}catch(n){this.destination.error(n);return}this.destination.next(i)},t}(oe),sP=function(){function r(t){this.iterator=t,this.nextResult=t.next()}return r.prototype.hasValue=function(){return!0},r.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},r.prototype.hasCompleted=function(){var t=this.nextResult;return!!(t&&t.done)},r}(),aP=function(){function r(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return r.prototype[Ii]=function(){return this},r.prototype.next=function(t){var e=this.index++,i=this.array;return e<this.length?{value:i[e],done:!1}:{value:null,done:!0}},r.prototype.hasValue=function(){return this.array.length>this.index},r.prototype.hasCompleted=function(){return this.array.length===this.index},r}(),uP=function(r){Ct(t,r);function t(e,i,n){var o=r.call(this,e)||this;return o.parent=i,o.observable=n,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return t.prototype[Ii]=function(){return this},t.prototype.next=function(){var e=this.buffer;return e.length===0&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return Im(this.observable,new gm(this))},t}(pm);const lP=Object.freeze(Object.defineProperty({__proto__:null,ArgumentOutOfRangeError:nx,AsyncSubject:Hn,BehaviorSubject:Zw,ConnectableObservable:Lw,EMPTY:Er,EmptyError:sx,GroupedObservable:Rw,NEVER:bm,Notification:es,get NotificationKind(){return Gh},ObjectUnsubscribedError:li,Observable:_t,ReplaySubject:Yw,Scheduler:Zh,Subject:jn,Subscriber:oe,Subscription:Yt,TimeoutError:ux,UnsubscriptionError:fn,VirtualAction:om,VirtualTimeScheduler:ex,animationFrame:tx,animationFrameScheduler:nm,asap:$w,asapScheduler:im,async:vs,asyncScheduler:rm,bindCallback:am,bindNodeCallback:um,combineLatest:_x,concat:Mx,config:ye,defer:ym,empty:bc,forkJoin:Dx,from:Hr,fromEvent:_m,fromEventPattern:Am,generate:Ox,identity:Pn,iif:Gx,interval:Nx,isObservable:ix,merge:kx,never:Wx,noop:sm,observable:Wr,of:xc,onErrorResumeNext:kh,pairs:Xx,partition:Vx,pipe:Tw,queue:qv,queueScheduler:Kv,race:Jx,range:Kx,scheduled:dm,throwError:em,timer:tP,using:iP,zip:rP},Symbol.toStringTag,{value:"Module"})),Pc=Hh(lP);var Rs={};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.EventEmitter=void 0;class hP{constructor(){this._map=new Map}addEventListener(t,e){var i;const n=t.toString(),o=(i=this._map.get(n))!==null&&i!==void 0?i:new Set;o.add(e),this._map.set(n,o)}removeEventListener(t,e){const i=t.toString(),n=this._map.get(i);n?.delete(e)}trigger(t,e){const i=t.toString(),n=this._map.get(i);n?.forEach(o=>o(e))}}Rs.EventEmitter=hP;var cP=k&&k.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),fP=k&&k.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),dP=k&&k.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&cP(t,r,e);return fP(t,r),t};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.HitSprite=void 0;const ku=dP(Zt),gP=Pc,pP=Rs;class IP extends ku.Sprite{constructor({eventManager:t,mirrored:e=!1,getHitmap:i,tag:n,group:o}){super(),this._ignore=!1,this._ignoreMouse=!1,this._rectangleSubject=new gP.BehaviorSubject(void 0),this._eventEmitter=new pP.EventEmitter,this._group=o,this._mirrored=e,this._getHitmap=i,this._tag=n,this.mirrored=this._mirrored,this._eventManager=t,t.register(this)}get events(){return this._eventEmitter}getGroup(){return this._group}getRectangleObservable(){return this._rectangleSubject}getEventZOrder(){return this.zIndex}triggerPointerTargetChanged(t){t.tag=this._tag,this._eventEmitter.trigger("pointertargetchanged",t)}triggerClick(t){t.tag=this._tag,this._eventEmitter.trigger("click",t)}triggerPointerDown(t){t.tag=this._tag,this._eventEmitter.trigger("pointerdown",t)}triggerPointerUp(t){t.tag=this._tag,this._eventEmitter.trigger("pointerup",t)}triggerPointerOver(t){t.tag=this._tag,this._eventEmitter.trigger("pointerover",t)}triggerPointerOut(t){t.tag=this._tag,this._eventEmitter.trigger("pointerout",t)}createDebugSprite(){if(this._hitTexture==null||this._hitTexture.getHitMap()==null)return;const e=new ku.TilingSprite(ku.Texture.WHITE,this._hitTexture.texture.width,this._hitTexture.texture.height);return e.alpha=.1,e.x=this.getGlobalPosition().x,e.y=this.getGlobalPosition().y,e}get ignoreMouse(){return this._ignoreMouse}set ignoreMouse(t){this._ignoreMouse=t}get group(){return this._group}get ignore(){return this._ignore}set ignore(t){this._ignore=t}get mirrored(){return this._mirrored}set mirrored(t){this._mirrored=t,this.scale.x=this._mirrored?-1:1}get hitTexture(){return this._hitTexture}set hitTexture(t){t!=null&&(this.texture=t.texture,this._hitTexture=t,this._getHitmap=()=>(e,i,n)=>t.hits(e,i,n,{mirrorHorizonally:this._mirrored}))}getHitDetectionZIndex(){return this.zIndex}destroy(){super.destroy(),this._eventManager.remove(this)}getHitBox(){const t=this.getGlobalPosition();return this._mirrored?{x:t.x-this.texture.width,y:t.y,width:this.texture.width,height:this.texture.height}:{x:t.x,y:t.y,width:this.texture.width,height:this.texture.height}}hits(t,e){if(this._getHitmap==null||this.ignore||this.ignoreMouse)return!1;const i=this.getHitBox(),n=i.x<=t&&t<=i.x+i.width,o=i.y<=e&&e<=i.y+i.height;return n&&o?this._getHitmap()(t,e,{x:this.getGlobalPosition().x,y:this.getGlobalPosition().y}):!1}updateTransform(){super.updateTransform(),this._rectangleSubject.next(this.getHitBox())}}Nn.HitSprite=IP;var Os={};Object.defineProperty(Os,"__esModule",{value:!0});Os.isSetEqual=void 0;function vP(r,t){if(r.size!==t.size)return!1;for(const e of r)if(!t.has(e))return!1;return!0}Os.isSetEqual=vP;var Yn={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.AvatarFigurePartType=void 0,function(t){t.Body="bd",t.Shoes="sh",t.Legs="lg",t.Chest="ch",t.WaistAccessory="wa",t.ChestAccessory="ca",t.Head="hd",t.Hair="hr",t.FaceAccessory="fa",t.EyeAccessory="ea",t.HeadAccessory="ha",t.HeadAccessoryExtra="he",t.CoatChest="cc",t.ChestPrint="cp",t.LeftHandItem="li",t.LeftHand="lh",t.LeftSleeve="ls",t.RightHand="rh",t.RightSleeve="rs",t.Face="fc",t.Eyes="ey",t.HairBig="hrb",t.RightHandItem="ri",t.LeftCoatSleeve="lc",t.RightCoatSleeve="rc"}(r.AvatarFigurePartType||(r.AvatarFigurePartType={}))})(Yn);var vi={},Zs={};Object.defineProperty(Zs,"__esModule",{value:!0});Zs.EventManagerNode=void 0;class mP{constructor(t,e){this.target=t,this._bush=e,this._subscription=t.getRectangleObservable().subscribe(i=>{this._updateRectangle(i)})}get minX(){if(this._rectangle==null)throw new Error("Rectangle wasn't set");return this._rectangle.x}get maxX(){if(this._rectangle==null)throw new Error("Rectangle wasn't set");return this._rectangle.x+this._rectangle.width}get minY(){if(this._rectangle==null)throw new Error("Rectangle wasn't set");return this._rectangle.y}get maxY(){if(this._rectangle==null)throw new Error("Rectangle wasn't set");return this._rectangle.y+this._rectangle.height}destroy(){this._rectangle!=null&&this._bush.remove(this),this._subscription.unsubscribe()}_updateRectangle(t){this._rectangle!=null&&this._bush.remove(this),this._rectangle=t,t!=null&&this._bush.insert(this)}}Zs.EventManagerNode=mP;var wm={exports:{}};(function(r,t){(function(e,i){r.exports=i()})(k,function(){function e(v,p,_,A,b){(function P(E,C,x,F,R){for(;F>x;){if(F-x>600){var Z=F-x+1,H=C-x+1,W=Math.log(Z),U=.5*Math.exp(2*W/3),X=.5*Math.sqrt(W*U*(Z-U)/Z)*(H-Z/2<0?-1:1),ot=Math.max(x,Math.floor(C-H*U/Z+X)),lt=Math.min(F,Math.floor(C+(Z-H)*U/Z+X));P(E,C,ot,lt,R)}var et=E[C],Q=x,it=F;for(i(E,x,C),R(E[F],et)>0&&i(E,x,F);Q<it;){for(i(E,Q,it),Q++,it--;R(E[Q],et)<0;)Q++;for(;R(E[it],et)>0;)it--}R(E[x],et)===0?i(E,x,it):i(E,++it,F),it<=C&&(x=it+1),C<=it&&(F=it-1)}})(v,p,_||0,A||v.length-1,b||n)}function i(v,p,_){var A=v[p];v[p]=v[_],v[_]=A}function n(v,p){return v<p?-1:v>p?1:0}var o=function(v){v===void 0&&(v=9),this._maxEntries=Math.max(4,v),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function s(v,p,_){if(!_)return p.indexOf(v);for(var A=0;A<p.length;A++)if(_(v,p[A]))return A;return-1}function a(v,p){l(v,0,v.children.length,p,v)}function l(v,p,_,A,b){b||(b=m(null)),b.minX=1/0,b.minY=1/0,b.maxX=-1/0,b.maxY=-1/0;for(var P=p;P<_;P++){var E=v.children[P];c(b,v.leaf?A(E):E)}return b}function c(v,p){return v.minX=Math.min(v.minX,p.minX),v.minY=Math.min(v.minY,p.minY),v.maxX=Math.max(v.maxX,p.maxX),v.maxY=Math.max(v.maxY,p.maxY),v}function d(v,p){return v.minX-p.minX}function g(v,p){return v.minY-p.minY}function u(v){return(v.maxX-v.minX)*(v.maxY-v.minY)}function h(v){return v.maxX-v.minX+(v.maxY-v.minY)}function f(v,p){return v.minX<=p.minX&&v.minY<=p.minY&&p.maxX<=v.maxX&&p.maxY<=v.maxY}function I(v,p){return p.minX<=v.maxX&&p.minY<=v.maxY&&p.maxX>=v.minX&&p.maxY>=v.minY}function m(v){return{children:v,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(v,p,_,A,b){for(var P=[p,_];P.length;)if(!((_=P.pop())-(p=P.pop())<=A)){var E=p+Math.ceil((_-p)/A/2)*A;e(v,E,p,_,b),P.push(p,E,E,_)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(v){var p=this.data,_=[];if(!I(v,p))return _;for(var A=this.toBBox,b=[];p;){for(var P=0;P<p.children.length;P++){var E=p.children[P],C=p.leaf?A(E):E;I(v,C)&&(p.leaf?_.push(E):f(v,C)?this._all(E,_):b.push(E))}p=b.pop()}return _},o.prototype.collides=function(v){var p=this.data;if(!I(v,p))return!1;for(var _=[];p;){for(var A=0;A<p.children.length;A++){var b=p.children[A],P=p.leaf?this.toBBox(b):b;if(I(v,P)){if(p.leaf||f(v,P))return!0;_.push(b)}}p=_.pop()}return!1},o.prototype.load=function(v){if(!v||!v.length)return this;if(v.length<this._minEntries){for(var p=0;p<v.length;p++)this.insert(v[p]);return this}var _=this._build(v.slice(),0,v.length-1,0);if(this.data.children.length)if(this.data.height===_.height)this._splitRoot(this.data,_);else{if(this.data.height<_.height){var A=this.data;this.data=_,_=A}this._insert(_,this.data.height-_.height-1,!0)}else this.data=_;return this},o.prototype.insert=function(v){return v&&this._insert(v,this.data.height-1),this},o.prototype.clear=function(){return this.data=m([]),this},o.prototype.remove=function(v,p){if(!v)return this;for(var _,A,b,P=this.data,E=this.toBBox(v),C=[],x=[];P||C.length;){if(P||(P=C.pop(),A=C[C.length-1],_=x.pop(),b=!0),P.leaf){var F=s(v,P.children,p);if(F!==-1)return P.children.splice(F,1),C.push(P),this._condense(C),this}b||P.leaf||!f(P,E)?A?(_++,P=A.children[_],b=!1):P=null:(C.push(P),x.push(_),_=0,A=P,P=P.children[0])}return this},o.prototype.toBBox=function(v){return v},o.prototype.compareMinX=function(v,p){return v.minX-p.minX},o.prototype.compareMinY=function(v,p){return v.minY-p.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(v){return this.data=v,this},o.prototype._all=function(v,p){for(var _=[];v;)v.leaf?p.push.apply(p,v.children):_.push.apply(_,v.children),v=_.pop();return p},o.prototype._build=function(v,p,_,A){var b,P=_-p+1,E=this._maxEntries;if(P<=E)return a(b=m(v.slice(p,_+1)),this.toBBox),b;A||(A=Math.ceil(Math.log(P)/Math.log(E)),E=Math.ceil(P/Math.pow(E,A-1))),(b=m([])).leaf=!1,b.height=A;var C=Math.ceil(P/E),x=C*Math.ceil(Math.sqrt(E));y(v,p,_,x,this.compareMinX);for(var F=p;F<=_;F+=x){var R=Math.min(F+x-1,_);y(v,F,R,C,this.compareMinY);for(var Z=F;Z<=R;Z+=C){var H=Math.min(Z+C-1,R);b.children.push(this._build(v,Z,H,A-1))}}return a(b,this.toBBox),b},o.prototype._chooseSubtree=function(v,p,_,A){for(;A.push(p),!p.leaf&&A.length-1!==_;){for(var b=1/0,P=1/0,E=void 0,C=0;C<p.children.length;C++){var x=p.children[C],F=u(x),R=(Z=v,H=x,(Math.max(H.maxX,Z.maxX)-Math.min(H.minX,Z.minX))*(Math.max(H.maxY,Z.maxY)-Math.min(H.minY,Z.minY))-F);R<P?(P=R,b=F<b?F:b,E=x):R===P&&F<b&&(b=F,E=x)}p=E||p.children[0]}var Z,H;return p},o.prototype._insert=function(v,p,_){var A=_?v:this.toBBox(v),b=[],P=this._chooseSubtree(A,this.data,p,b);for(P.children.push(v),c(P,A);p>=0&&b[p].children.length>this._maxEntries;)this._split(b,p),p--;this._adjustParentBBoxes(A,b,p)},o.prototype._split=function(v,p){var _=v[p],A=_.children.length,b=this._minEntries;this._chooseSplitAxis(_,b,A);var P=this._chooseSplitIndex(_,b,A),E=m(_.children.splice(P,_.children.length-P));E.height=_.height,E.leaf=_.leaf,a(_,this.toBBox),a(E,this.toBBox),p?v[p-1].children.push(E):this._splitRoot(_,E)},o.prototype._splitRoot=function(v,p){this.data=m([v,p]),this.data.height=v.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(v,p,_){for(var A,b,P,E,C,x,F,R=1/0,Z=1/0,H=p;H<=_-p;H++){var W=l(v,0,H,this.toBBox),U=l(v,H,_,this.toBBox),X=(b=W,P=U,E=void 0,C=void 0,x=void 0,F=void 0,E=Math.max(b.minX,P.minX),C=Math.max(b.minY,P.minY),x=Math.min(b.maxX,P.maxX),F=Math.min(b.maxY,P.maxY),Math.max(0,x-E)*Math.max(0,F-C)),ot=u(W)+u(U);X<R?(R=X,A=H,Z=ot<Z?ot:Z):X===R&&ot<Z&&(Z=ot,A=H)}return A||_-p},o.prototype._chooseSplitAxis=function(v,p,_){var A=v.leaf?this.compareMinX:d,b=v.leaf?this.compareMinY:g;this._allDistMargin(v,p,_,A)<this._allDistMargin(v,p,_,b)&&v.children.sort(A)},o.prototype._allDistMargin=function(v,p,_,A){v.children.sort(A);for(var b=this.toBBox,P=l(v,0,p,b),E=l(v,_-p,_,b),C=h(P)+h(E),x=p;x<_-p;x++){var F=v.children[x];c(P,v.leaf?b(F):F),C+=h(P)}for(var R=_-p-1;R>=p;R--){var Z=v.children[R];c(E,v.leaf?b(Z):Z),C+=h(E)}return C},o.prototype._adjustParentBBoxes=function(v,p,_){for(var A=_;A>=0;A--)c(p[A],v)},o.prototype._condense=function(v){for(var p=v.length-1,_=void 0;p>=0;p--)v[p].children.length===0?p>0?(_=v[p-1].children).splice(_.indexOf(v[p]),1):this.clear():a(v[p],this.toBBox)},o})})(wm);var yP=wm.exports,ge={};Object.defineProperty(ge,"__esModule",{value:!0});ge.TILE_CURSOR=ge.AVATAR=ge.FURNITURE=void 0;ge.FURNITURE=Symbol("FURNITURE");ge.AVATAR=Symbol("AVATAR");ge.TILE_CURSOR=Symbol("TILE_CURSOR");var _P=k&&k.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vi,"__esModule",{value:!0});vi.NOOP_EVENT_MANAGER=vi.EventManager=void 0;const CP=Zs,AP=_P(yP),bP=ge;class wP{constructor(){this._nodes=new Map,this._bush=new AP.default,this._currentOverElements=new Set,this._pointerDownElements=new Set}click(t,e,i){const n=this._performHitTest(e,i);new Si(t,n.activeNodes,(o,s)=>o.triggerClick(s))}pointerDown(t,e,i){const n=this._performHitTest(e,i);this._pointerDownElements=new Set(n.activeNodes),new Si(t,n.activeNodes,(o,s)=>o.triggerPointerDown(s))}pointerUp(t,e,i){const n=this._performHitTest(e,i),o=new Set(n.activeNodes),s=new Set;this._pointerDownElements.forEach(a=>{o.has(a)&&s.add(a)}),new Si(t,n.activeNodes,(a,l)=>a.triggerPointerUp(l)),new Si(t,Array.from(s),(a,l)=>{a.triggerClick(l)})}move(t,e,i){const n=this._performHitTest(e,i),o=new Set(n.activeNodes.filter((u,h)=>h===0||u.target.getGroup().getEventGroupIdentifier()===bP.TILE_CURSOR)),s=this._currentOverElements,a=new Set;o.forEach(u=>{s.has(u)||a.add(u)});const l=new Set;s.forEach(u=>{o.has(u)||l.add(u)});const c=new Set;a.forEach(u=>{c.add(u.target.getGroup())});const d=new Set,g=new Set;l.forEach(u=>{c.has(u.target.getGroup())&&d.add(u),g.add(u)}),this._currentOverElements=o,new Si(t,Array.from(d),(u,h)=>{u.triggerPointerTargetChanged(h)}),new Si(t,Array.from(g),(u,h)=>u.triggerPointerOut(h)),new Si(t,Array.from(a),(u,h)=>u.triggerPointerOver(h))}register(t){if(this._nodes.has(t))throw new Error("Target already registered");const e=new CP.EventManagerNode(t,this._bush);return this._nodes.set(t,e),e}remove(t){const e=this._nodes.get(t);if(e==null)throw new Error("Target isn't in the event manager");e.destroy()}_performHitTest(t,e){const n=this._bush.search({minX:t,minY:e,maxX:t,maxY:e}).sort((a,l)=>l.target.getEventZOrder()-a.target.getEventZOrder()).filter(a=>a.target.hits(t,e)),o=new Map,s=[];return n.forEach(a=>{const l=a.target.getGroup();l!=null&&o.has(l)||(s.push(a),l!=null&&o.set(l,a))}),{activeNodes:s,activeGroups:o}}}vi.EventManager=wP;class Si{constructor(t,e,i){this.event=t,this.path=e,this._trigger=i,this._skip=new Set,this._allow=new Set,this._stopped=!1,this._propagate()}_propagate(){const t=this._createEvent();for(let e=0;e<this.path.length;e++){if(this._stopped)return;const i=this.path[e];this._skip.has(i.target.getGroup().getEventGroupIdentifier())&&!this._allow.has(i.target.getGroup().getEventGroupIdentifier())||this._allow.size>0&&!this._allow.has(i.target.getGroup().getEventGroupIdentifier())||this._trigger(this.path[e].target,t)}}_createEvent(){return{interactionEvent:this.event,mouseEvent:this.event.data.originalEvent,stopPropagation:()=>{this._stopped=!0},skip:(...t)=>{const e=i=>{Array.isArray(i)?i.forEach(n=>e(n)):this._skip.add(i)};e(t)},skipExcept:(...t)=>{const e=i=>{Array.isArray(i)?i.forEach(n=>e(n)):this._allow.add(i)};e(t)}}}}vi.NOOP_EVENT_MANAGER={register:()=>({destroy:()=>{}}),remove:()=>{}};var Un={};Object.defineProperty(Un,"__esModule",{value:!0});Un.EventOverOutHandler=void 0;class xP{constructor(){this._eventEmitters=new Map,this._overElements=new Set,this._hover=!1,this._targetChanged=!1,this._onOver=(t,e)=>{this._overElements.add(t),this._update(e)},this._onOut=(t,e)=>{this._overElements.delete(t),this._update(e)},this._onTargetChanged=(t,e)=>{this._overElements.delete(t),this._targetChanged=!0,this._update(e)}}get onOver(){return this._onOverCallback}set onOver(t){this._onOverCallback=t}get onOut(){return this._onOutCallback}set onOut(t){this._onOutCallback=t}register(t){this._eventEmitters.has(t)||this._eventEmitters.set(t,new PP(t,this._onOver,this._onOut,this._onTargetChanged))}remove(t){const e=this._eventEmitters.get(t);e!=null&&(this._eventEmitters.delete(t),this._overElements.delete(t),e.destroy())}_update(t){this._overElements.size>0&&!this._hover&&(this._hover=!0,this._targetChanged||this.onOver&&this.onOver(t),this._targetChanged=!1),this._overElements.size<1&&this._hover&&(this._hover=!1,this._targetChanged||this.onOut&&this.onOut(t))}}Un.EventOverOutHandler=xP;class PP{constructor(t,e,i,n){this.emitter=t,this.onOver=e,this.onOut=i,this.onTargetChanged=n,this._handlePointerOut=o=>{this.onOut(this.emitter,o)},this._handlePointerOver=o=>{this.onOver(this.emitter,o)},this._handlePointerTargetChanged=o=>{this.onTargetChanged(this.emitter,o)},t.addEventListener("pointerout",this._handlePointerOut),t.addEventListener("pointerover",this._handlePointerOver),t.addEventListener("pointertargetchanged",this._handlePointerTargetChanged)}destroy(){this.emitter.removeEventListener("pointerout",this._handlePointerOut),this.emitter.removeEventListener("pointerover",this._handlePointerOver),this.emitter.removeEventListener("pointertargetchanged",this._handlePointerTargetChanged)}}var SP=k&&k.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),TP=k&&k.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),EP=k&&k.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&SP(t,r,e);return TP(t,r),t};Object.defineProperty(Zn,"__esModule",{value:!0});Zn.BaseAvatar=void 0;const Wu=EP(Zt),FP=Gn,MP=Nn,DP=Os,fe=Yn,LP=vi,BP=ge,RP=Un,OP=new Set([fe.AvatarFigurePartType.Head,fe.AvatarFigurePartType.Body,fe.AvatarFigurePartType.LeftHand,fe.AvatarFigurePartType.RightHand]),ZP=new Set([fe.AvatarFigurePartType.Head,fe.AvatarFigurePartType.Face,fe.AvatarFigurePartType.Eyes,fe.AvatarFigurePartType.EyeAccessory,fe.AvatarFigurePartType.Hair,fe.AvatarFigurePartType.HairBig,fe.AvatarFigurePartType.FaceAccessory,fe.AvatarFigurePartType.HeadAccessory,fe.AvatarFigurePartType.HeadAccessoryExtra]);class Sc extends Wu.Container{constructor(t){var e,i,n;super(),this._avatarDestroyed=!1,this._currentFrame=0,this._clickHandler=new FP.ClickHandler,this._overOutHandler=new RP.EventOverOutHandler,this._refreshFrame=!1,this._refreshLook=!1,this._sprites=new Map,this._updateId=0,this._spritesZIndex=0,this.x=t.position.x,this.y=t.position.y,this.zIndex=t.zIndex,this.spritesZIndex=t.zIndex,this._nextLookOptions=t.look,this._onLoad=t.onLoad,this._skipBodyParts=(e=t.skipBodyParts)!==null&&e!==void 0?e:!1,this._headOnly=(i=t.headOnly)!==null&&i!==void 0?i:!1,this._skipCaching=(n=t.skipCaching)!==null&&n!==void 0?n:!1}get spritesZIndex(){return this._spritesZIndex}set spritesZIndex(t){this._spritesZIndex=t,this._updateSpritesZIndex()}get dependencies(){if(this._dependencies==null)throw new Error("Invalid dependencies in BaseAvatar");return this._dependencies}set dependencies(t){this._dependencies=t,this._handleDependenciesSet()}get mounted(){return this._dependencies!=null}get onClick(){return this._clickHandler.onClick}set onClick(t){this._clickHandler.onClick=t}get onDoubleClick(){return this._clickHandler.onDoubleClick}set onDoubleClick(t){this._clickHandler.onDoubleClick=t}get onPointerDown(){return this._clickHandler.onPointerDown}set onPointerDown(t){this._clickHandler.onPointerDown=t}get onPointerUp(){return this._clickHandler.onPointerUp}set onPointerUp(t){this._clickHandler.onPointerUp=t}get onPointerOut(){return this._overOutHandler.onOut}set onPointerOut(t){this._overOutHandler.onOut=t}get onPointerOver(){return this._overOutHandler.onOver}set onPointerOver(t){this._overOutHandler.onOver=t}get lookOptions(){if(this._nextLookOptions!=null)return this._nextLookOptions;if(this._lookOptions==null)throw new Error("Invalid look options");return this._lookOptions}set lookOptions(t){this._updateLookOptions(this._lookOptions,t)}get currentFrame(){return this._currentFrame}set currentFrame(t){t!==this._currentFrame&&(this._currentFrame=t,this._refreshFrame=!0)}static fromShroom(t,e){const i=new Sc({...e});return i.dependencies={...t.dependencies,eventManager:LP.NOOP_EVENT_MANAGER},i}getEventGroupIdentifier(){return BP.AVATAR}destroy(){super.destroy(),this._destroyAssets(),this._cancelTicker!=null&&this._cancelTicker()}_destroyAssets(){var t;this._sprites.forEach(e=>{this._overOutHandler.remove(e.events),e.destroy()}),this._sprites=new Map,(t=this._container)===null||t===void 0||t.destroy()}_updateSpritesZIndex(){this._sprites.forEach(t=>{t.zIndex=this.spritesZIndex})}_updateLookOptions(t,e){(t==null||!DP.isSetEqual(t.actions,e.actions)||t.look!=e.look||t.item!=e.item||t.effect!=e.effect||t.direction!=e.direction||t.headDirection!=e.headDirection)&&(this._nextLookOptions=e,this._refreshLook=!0)}_updatePosition(t){this._container!=null&&(this._container.x=0,this._container.y=0)}_updateSprites(){if(this._avatarLoaderResult==null||this._lookOptions==null)return;const t=this._avatarLoaderResult.getDrawDefinition(this._lookOptions);this._avatarDrawDefinition=t,this._updateSpritesWithAvatarDrawDefinition(t,this.currentFrame),this._updatePosition(t)}_updateSpritesWithAvatarDrawDefinition(t,e){var i;if(this._destroyed)throw new Error("BaseAvatar was destroyed already");this.mounted&&(this._sprites.forEach(n=>{n.visible=!1,n.ignore=!0}),(i=this._container)===null||i===void 0||i.destroy(),this._container=new Wu.Container,this._container.sortableChildren=!0,t.getDrawDefinition().forEach(n=>{var o,s;if(n.kind==="AVATAR_DRAW_PART"){const a=n.type;if(this._skipBodyParts&&OP.has(a)||this._headOnly&&!ZP.has(a))return;const l=e%n.assets.length,c=n.assets[l];let d=this._sprites.get(c.fileId);if(d==null&&(d=this._createAsset(n,c),d!=null&&this._overOutHandler.register(d.events)),d==null)return;d.x=c.x,d.y=c.y,d.visible=!0,d.mirrored=c.mirror,d.ignore=!1,d.zIndex=this.spritesZIndex+n.z,this._sprites.set(c.fileId,d),(o=this._container)===null||o===void 0||o.addChild(d)}else if(n.kind==="EFFECT_DRAW_PART"){const a=e%n.assets.length,l=n.assets[a];let c=this._sprites.get(l.fileId);if(c==null&&(c=this._createAsset(n,l),c!=null&&this._overOutHandler.register(c.events)),c==null)return;switch(n.ink){case 33:c.blendMode=Wu.BLEND_MODES.ADD;break}c.x=l.x+(l.substractWidth!=null&&l.substractWidth?c.texture.width:0),c.y=l.y,c.visible=!0,c.mirrored=l.mirror,c.ignore=!1,c.zIndex=this.spritesZIndex+n.z,this._sprites.set(l.fileId,c),(s=this._container)===null||s===void 0||s.addChild(c)}}),this.addChild(this._container))}_createAsset(t,e){if(this._avatarLoaderResult==null)throw new Error("Cant create asset when avatar loader result not present");const i=this._avatarLoaderResult.getTexture(e.fileId);if(i==null)return;const n=new MP.HitSprite({eventManager:this.dependencies.eventManager,mirrored:e.mirror,group:this});return n.hitTexture=i,n.x=e.x,n.y=e.y,n.events.addEventListener("click",o=>{this._clickHandler.handleClick(o)}),n.events.addEventListener("pointerdown",o=>{this._clickHandler.handlePointerDown(o)}),n.events.addEventListener("pointerup",o=>{this._clickHandler.handlePointerUp(o)}),t.kind==="AVATAR_DRAW_PART"&&t.color!=null&&t.mode==="colored"?n.tint=parseInt(t.color.slice(1),16):n.tint=16777215,n}_reloadLook(){if(!this.mounted)return;const t=this._nextLookOptions;if(t!=null){const e=++this._updateId;this.dependencies.avatarLoader.getAvatarDrawDefinition({...t,initial:!0,skipCaching:this._skipCaching}).then(i=>{this._destroyed||e===this._updateId&&(this._avatarLoaderResult=i,this._lookOptions=t,this._nextLookOptions=void 0,this._destroyAssets(),this._updateSprites(),this._onLoad&&this._onLoad())})}}_updateFrame(){this._avatarDrawDefinition!=null&&(this._updateSpritesWithAvatarDrawDefinition(this._avatarDrawDefinition,this.currentFrame),this._updatePosition(this._avatarDrawDefinition))}_handleDependenciesSet(){this._reloadLook(),this._cancelTicker!=null&&this._cancelTicker(),this._cancelTicker!=null&&this._cancelTicker(),this._cancelTicker=this.dependencies.animationTicker.subscribe(()=>{this._refreshLook&&(this._refreshLook=!1,this._reloadLook()),this._refreshFrame&&(this._refreshFrame=!1,this._updateFrame())})}}Zn.BaseAvatar=Sc;var zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.ObjectAnimation=void 0;class GP{constructor(t,e,i=500){this._animationTicker=t,this._callbacks=e,this._duration=i,this._start=0,this._enqueued=[]}clear(){return this._enqueued=[],this._nextPosition}move(t,e,i){this._finishCurrent!=null&&(this._finishCurrent(),this._finishCurrent=void 0),this._callbacks.onStart(i),this._current=t,this._diff={roomX:e.roomX-t.roomX,roomY:e.roomY-t.roomY,roomZ:e.roomZ-t.roomZ},this._nextPosition=e,this._start=performance.now();const n=()=>{this._diff=void 0,this._current=void 0;const s=this._enqueued.shift();s!=null?this.move(s.currentPosition,s.newPosition,s.data):this._callbacks.onStop(i),o()};this._finishCurrent=n,this._callbacks.onUpdatePosition({roomX:this._current.roomX,roomY:this._current.roomY,roomZ:this._current.roomZ},i);const o=this._animationTicker.subscribe(()=>{let a=(performance.now()-this._start)/this._duration;const l=this._current,c=this._diff;if(a>1&&(a=1),l!=null&&c!=null&&this._callbacks.onUpdatePosition({roomX:l.roomX+c.roomX*a,roomY:l.roomY+c.roomY*a,roomZ:l.roomZ+c.roomZ*a},i),a>=1){n();return}})}}zn.ObjectAnimation=GP;var Yr={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.AvatarAction=void 0,function(t){t.Move="Move",t.Wave="Wave",t.Talk="Talk",t.Swim="Swim",t.Float="Float",t.Sign="Sign",t.Respect="Respect",t.Blow="Blow",t.Laugh="Laugh",t.SnowWarRun="SnowWarRun",t.SnowWarDieFront="SnowWarDieFront",t.SnowWarDieBack="SnowWarDieBack",t.SnowWarPick="SnowWarPick",t.SnowWarThrow="SnowWarThrow",t.Lay="Lay",t.Sit="Sit",t.Idle="Idle",t.Dance="Dance",t.UseItem="UseItem",t.CarryItem="CarryItem",t.Gesture="Gesture",t.GestureSmile="GestureSmile",t.GestureSad="GestureSad",t.GestureAngry="GestureAngry",t.GestureSurprised="GestureSurprised",t.Sleep="Sleep",t.Default="Default"}(r.AvatarAction||(r.AvatarAction={}))})(Yr);Object.defineProperty(Bs,"__esModule",{value:!0});Bs.Avatar=void 0;const NP=Ai,jP=Ji,hg=Zn,kP=zn,rn=Yr;class WP extends NP.RoomObject{constructor({look:t,roomX:e,roomY:i,roomZ:n,direction:o,headDirection:s}){super(),this._walking=!1,this._moving=!1,this._frame=0,this._waving=!1,this._direction=0,this._roomX=0,this._roomY=0,this._roomZ=0,this._animatedPosition={roomX:0,roomY:0,roomZ:0},this._actions=new Set,this._loaded=!1,this._onClick=void 0,this._onDoubleClick=void 0,this._onPointerDown=void 0,this._onPointerUp=void 0,this._onPointerOver=void 0,this._onPointerOut=void 0,this._direction=o,this._look=t,this._roomX=e,this._roomY=i,this._roomZ=n,this._headDirection=s,this._placeholderSprites=new hg.BaseAvatar({look:this._getPlaceholderLookOptions(),zIndex:this._calculateZIndex(),position:{x:0,y:0},onLoad:()=>{this._updateAvatarSprites()}}),this._placeholderSprites.alpha=.5,this._avatarSprites=this._placeholderSprites,this._loadingAvatarSprites=new hg.BaseAvatar({look:this._getLookOptions(),position:{x:0,y:0},zIndex:this._calculateZIndex(),onLoad:()=>{this._loaded=!0,this._updateAvatarSprites()}})}get look(){return this._look}get onClick(){return this._onClick}set onClick(t){this._onClick=t,this._updateEventHandlers()}get onDoubleClick(){return this._onDoubleClick}set onDoubleClick(t){this._onDoubleClick=t,this._updateEventHandlers()}get onPointerDown(){return this._onPointerDown}set onPointerDown(t){this._onPointerDown=t,this._updateEventHandlers()}get onPointerUp(){return this._onPointerUp}set onPointerUp(t){this._onPointerUp=t,this._updateEventHandlers()}get onPointerOver(){return this._onPointerOver}set onPointerOver(t){this._onPointerOver=t,this._updateEventHandlers()}get onPointerOut(){return this._onPointerOut}set onPointerOut(t){this._onPointerOut=t,this._updateEventHandlers()}get roomX(){return this._roomX}set roomX(t){this._roomX=t,this._updatePosition()}get roomY(){return this._roomY}set roomY(t){this._roomY=t,this._updatePosition()}get roomZ(){return this._roomZ}set roomZ(t){this._roomZ=t,this._updatePosition()}get item(){return this._item}set item(t){this._item=t,this._updateAvatarSprites()}get effect(){return this._effect}set effect(t){this._effect=t,this._updateAvatarSprites()}get direction(){return this._direction}set direction(t){this._direction=t,this._updateAvatarSprites()}get headDirection(){return this._headDirection}set headDirection(t){this._headDirection=t,this._updateAvatarSprites()}get waving(){return this._waving}set waving(t){this._waving=t,this._updateAvatarSprites()}get actions(){return this._actions}set actions(t){this._actions=t,this._updateAvatarSprites()}get screenPosition(){const t=this._avatarSprites.getGlobalPosition();if(t!=null)return{x:t.x,y:t.y}}clearMovement(){var t;const e=(t=this._moveAnimation)===null||t===void 0?void 0:t.clear();e!=null&&(this.roomX=e.roomX,this.roomY=e.roomY,this.roomZ=e.roomZ)}walk(t,e,i,n){var o;(o=this._moveAnimation)===null||o===void 0||o.move({roomX:this.roomX,roomY:this.roomY,roomZ:this.roomZ},{roomX:t,roomY:e,roomZ:i},{direction:n?.direction,headDirection:n?.headDirection,type:"walk"}),this._roomX=t,this._roomY=e,this._roomZ=i}move(t,e,i){var n;(n=this._moveAnimation)===null||n===void 0||n.move({roomX:this.roomX,roomY:this.roomY,roomZ:this.roomZ},{roomX:t,roomY:e,roomZ:i},{type:"move"}),this._roomX=t,this._roomY=e,this._roomZ=i}getScreenPosition(){return{x:this._avatarSprites.x,y:this._avatarSprites.y}}registered(){this._placeholderSprites!=null&&(this._placeholderSprites.dependencies={animationTicker:this.animationTicker,avatarLoader:this.avatarLoader,eventManager:this.eventManager}),this._loadingAvatarSprites.dependencies={animationTicker:this.animationTicker,avatarLoader:this.avatarLoader,eventManager:this.eventManager},this._updateAvatarSprites(),this._moveAnimation=new kP.ObjectAnimation(this.animationTicker,{onUpdatePosition:t=>{this._animatedPosition=t,this._updatePosition()},onStart:t=>{t.type==="walk"?(this._startWalking(t.direction,t.headDirection),this._moving=!1):t.type==="move"&&(this._stopWalking(),this._moving=!0)},onStop:()=>{this._stopWalking(),this._moving=!1}},this.configuration.avatarMovementDuration)}addAction(t){this.actions=new Set(this._actions).add(t)}removeAction(t){const e=new Set(this._actions);e.delete(t),this.actions=e}hasAction(t){return this.actions.has(t)}destroyed(){var t;(t=this._avatarSprites)===null||t===void 0||t.destroy(),this._cancelAnimation!=null&&this._cancelAnimation()}_updateEventHandlers(){this._placeholderSprites!=null&&(this._placeholderSprites.onClick=this._onClick,this._placeholderSprites.onDoubleClick=this._onDoubleClick,this._placeholderSprites.onPointerDown=this._onPointerDown,this._placeholderSprites.onPointerUp=this._onPointerUp,this._placeholderSprites.onPointerOut=this._onPointerOut,this._placeholderSprites.onPointerOver=this._onPointerOver),this._loadingAvatarSprites.onClick=this._onClick,this._loadingAvatarSprites.onDoubleClick=this._onDoubleClick,this._loadingAvatarSprites.onPointerDown=this._onPointerDown,this._loadingAvatarSprites.onPointerUp=this._onPointerUp,this._loadingAvatarSprites.onPointerOut=this._onPointerOut,this._loadingAvatarSprites.onPointerOver=this._onPointerOver}_getPlaceholderLookOptions(){return{actions:new Set,direction:this.direction,headDirection:this.direction,look:"hd-99999-99999",effect:void 0,initial:!1,item:void 0}}_getCurrentLookOptions(){return this._loaded?this._getLookOptions():this._getPlaceholderLookOptions()}_getLookOptions(){const t=new Set(this.actions);return this._walking&&t.add(rn.AvatarAction.Move),this.waving&&t.add(rn.AvatarAction.Wave),t.has(rn.AvatarAction.Lay)&&this._walking&&t.delete(rn.AvatarAction.Lay),{actions:t,direction:this.direction,headDirection:this.headDirection,look:this._look,item:this.item,effect:this.effect}}_updateAvatarSprites(){if(!this.mounted)return;this._loaded?(this._placeholderSprites!=null&&this._placeholderSprites.destroy(),this._placeholderSprites=void 0,this._avatarSprites=this._loadingAvatarSprites):this._placeholderSprites!=null&&(this._avatarSprites=this._placeholderSprites);const t=this._getCurrentLookOptions();this._startAnimation();const e=this._avatarSprites;e!=null&&(e.lookOptions=t),this._updatePosition(),this._updateEventHandlers()}_updateFrame(){this._avatarSprites.currentFrame=this._frame}_startAnimation(){if(this._cancelAnimation!=null)return;this._frame=0;const t=this.animationTicker.current();this._cancelAnimation=this.animationTicker.subscribe(e=>{this._frame=e-t,this._updateFrame()})}_stopAnimation(){this._frame=0,this._cancelAnimation!=null&&(this._cancelAnimation(),this._cancelAnimation=void 0)}_startWalking(t,e){this._walking=!0,t!=null&&(this.direction=t),e!=null&&(this.headDirection=e),this._updateAvatarSprites()}_stopWalking(){this._walking=!1,this._updateAvatarSprites()}_calculateZIndex(){return this._getZIndexAtPosition(this.roomX,this.roomY,this.roomZ)}_getDisplayRoomPosition(){return this._walking||this._moving?this._animatedPosition:{roomX:this.roomX,roomY:this.roomY,roomZ:this.roomZ}}_getZIndexAtPosition(t,e,i){let n=1;return this._getCurrentLookOptions().actions.has(rn.AvatarAction.Lay)&&(n+=2e3),jP.getZOrder(t,e,i)+n}_updatePosition(){if(!this.mounted)return;const{roomX:t,roomY:e,roomZ:i}=this._getDisplayRoomPosition(),{x:n,y:o}=this.geometry.getPosition(t,e,i),s=Math.round(t),a=Math.round(e);if(this._avatarSprites!=null){this._avatarSprites.x=Math.round(n),this._avatarSprites.y=Math.round(o);const c=this._getZIndexAtPosition(s,a,this.roomZ);this._avatarSprites.zIndex=c,this._avatarSprites.spritesZIndex=c}const l=this.tilemap.getTileAtPosition(s,a);l?.type==="door"&&(this.roomVisualization.container.removeChild(this._avatarSprites),this.roomVisualization.behindWallContainer.addChild(this._avatarSprites)),(l==null||l.type!=="door")&&(this.roomVisualization.behindWallContainer.removeChild(this._avatarSprites),this.roomVisualization.container.addChild(this._avatarSprites))}}Bs.Avatar=WP;var Gs={},Ur={},Vn={},XP=k&&k.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),HP=k&&k.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),YP=k&&k.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&XP(t,r,e);return HP(t,r),t};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.HighlightFilter=void 0;const Xu=YP(Zt);class UP extends Xu.Filter{constructor(t,e){super(zP,VP),this._backgroundColor=t,this._borderColor=e,this.uniforms.backgroundColor=new Float32Array(4),this.uniforms.borderColor=new Float32Array(4),this.uniforms.backgroundColor=[...Xu.utils.hex2rgb(this._backgroundColor),1],this.uniforms.borderColor=[...Xu.utils.hex2rgb(this._borderColor),1]}}Vn.HighlightFilter=UP;const zP=`
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}
`,VP=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 backgroundColor;
uniform vec4 borderColor;

void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);

    if (currentColor.a > 0.0) {
        if (currentColor.r == 0.0 && currentColor.g == 0.0 && currentColor.b == 0.0) {
            gl_FragColor = borderColor;
        } else {
            gl_FragColor = backgroundColor;
        }
    }
}
`;var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.FurnitureSprite=void 0;const JP=Nn;class QP extends JP.HitSprite{constructor(){super(...arguments),this._baseX=0,this._baseY=0,this._baseZIndex=0,this._offsetX=0,this._offsetY=0,this._offsetZIndex=0}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._update()}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._update()}get offsetZIndex(){return this._offsetZIndex}set offsetZIndex(t){this._offsetZIndex=t,this._update()}get baseX(){return this._baseX}set baseX(t){this._baseX=t,this._update()}get baseY(){return this._baseY}set baseY(t){this._baseY=t,this._update()}get baseZIndex(){return this._baseZIndex}set baseZIndex(t){this._baseZIndex=t,this._update()}get assetName(){return this._assetName}set assetName(t){this._assetName=t}_update(){this.x=this.baseX+this.offsetX,this.y=this.baseY+this.offsetY,this.zIndex=this.baseZIndex+this.offsetZIndex}}Jn.FurnitureSprite=QP;var Qi={},bi={};Object.defineProperty(bi,"__esModule",{value:!0});bi.FurnitureVisualization=void 0;class $P{get view(){if(this._view==null)throw new Error("No view mounted");return this._view}get previousView(){return this._previousView}get mounted(){return this._view!=null}setView(t){this._previousView=this._view,this._view=t}isAnimated(t="0"){return!1}}bi.FurnitureVisualization=$P;Object.defineProperty(Qi,"__esModule",{value:!0});Qi.AnimatedFurnitureVisualization=void 0;const KP=bi;class qP extends KP.FurnitureVisualization{constructor(){super(),this._animationQueue=[],this._sprites=new Set,this._disableTransitions=!1,this._frame=0,this._changeAnimationCount=0,this._lastFramePlayedMap=new Map,this._refreshFurniture=!1,this._refreshFurniture=!0}get animationId(){return this._overrideAnimation!=null?this._overrideAnimation:this._currentAnimationId}set animationId(t){this._overrideAnimation=t,this._refreshFurniture=!0}get modifier(){return this._modifier}set modifier(t){this._modifier=t,this._updateFurniture()}setCurrentAnimation(t){this._animationQueueStartFrame=void 0,this._animationQueue=this._getAnimationList(this.view.getVisualizationData(),t),this._disableTransitions=this._changeAnimationCount===0,this._changeAnimationCount++,this._update()}updateAnimation(t){this._updateAnimation(this._currentTargetAnimationId,t)}updateDirection(t){this._currentDirection!==t&&(this._currentDirection=t,this._updateFurniture())}isLastFramePlayedForLayer(t){var e;return(e=this._lastFramePlayedMap.get(t))!==null&&e!==void 0?e:!1}destroy(){}update(){this._currentDirection!=null&&(this.view.setDisplayDirection(this._currentDirection),this.view.updateDisplay(),this._update())}updateFrame(t){if(this._refreshFurniture&&(this._refreshFurniture=!1,this._updateFurniture()),this._animationQueueStartFrame==null&&(this._animationQueueStartFrame=t),this._animationQueue.length>0){const e=this._getCurrentProgress(t);let i=0,n,o;for(let s=0;s<this._animationQueue.length;s++){const a=this._animationQueue[s];if(i+=a.frameCount,e<i){n=a.id,o=a.frameCount;break}}if(n==null||o==null||this._disableTransitions){const s=this._animationQueue[this._animationQueue.length-1];n=s.id,o=s.frameCount}this._setAnimation(n),this._animationFrameCount=o,this._frame=e}this._update(!0)}isAnimated(){return!0}_getCurrentProgress(t){return this._animationQueueStartFrame==null?0:t-this._animationQueueStartFrame}_setAnimation(t){this._currentAnimationId!==t&&(this._currentAnimationId=t,this._updateFurniture())}_updateLayers(){if(this.modifier!=null){const t=this.modifier;this.view.getLayers().forEach(e=>t(e))}}_updateFurniture(){var t,e;this.mounted&&(this.view.setDisplayDirection((t=this._currentDirection)!==null&&t!==void 0?t:0),this.view.setDisplayAnimation((e=this.animationId)===null||e===void 0?void 0:e.toString()),this.view.updateDisplay(),this._updateLayers(),this._update())}_update(t=!1){var e;const i=(e=this._animationFrameCount)!==null&&e!==void 0?e:1;this.view.getLayers().forEach(n=>{this.modifier!=null&&(n=this.modifier(n));const o=this._frame%i;let s=Math.floor(o/n.frameRepeat);const a=n.assetCount-1;s>a&&(s=a),o===i-1?this._lastFramePlayedMap.set(n.layerIndex,!0):this._lastFramePlayedMap.set(n.layerIndex,!1),n.setCurrentFrameIndex(s)})}_getAnimationList(t,e){const i=[],n=o=>{var s;const a=t.getTransitionForAnimation(64,o);a!=null&&n(a.id);const l=t.getAnimation(64,o),c=(s=t.getFrameCount(64,o))!==null&&s!==void 0?s:1;l!=null&&i.push({id:l.id,frameCount:c})};return n(e),i.length===0?[{id:0,frameCount:1}]:i}_updateAnimation(t,e){this._currentTargetAnimationId=e,e==null?this.setCurrentAnimation(0):t==e||t!=e&&this.setCurrentAnimation(Number(e))}}Qi.AnimatedFurnitureVisualization=qP;var Ns={};Object.defineProperty(Ns,"__esModule",{value:!0});Ns.getDirectionForFurniture=void 0;function tS(r,t){if(t.length<1)return 0;let e=t[0];for(let i=0;i<t.length;i++){const n=t[i];if(n===r)return r;if(n>r)return e;e=n}return e}Ns.getDirectionForFurniture=tS;var js={},eS=k&&k.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),iS=k&&k.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),rS=k&&k.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&eS(t,r,e);return iS(t,r),t};Object.defineProperty(js,"__esModule",{value:!0});js.FurnitureVisualizationView=void 0;const cg=rS(Zt),nS=ge,oS=Vn,sS=Jn,aS=new oS.HighlightFilter(10066329,16777215);class uS{constructor(t,e,i,n,o){this._eventManager=t,this._clickHandler=e,this._overOutHandler=i,this._container=n,this._furniture=o,this._cache=new Map}get x(){if(this._x==null)throw new Error("x not set");return this._x}set x(t){this._x=t}get y(){if(this._y==null)throw new Error("y not set");return this._y}set y(t){this._y=t}get zIndex(){if(this._zIndex==null)throw new Error("zIndex not set");return this._zIndex}set zIndex(t){this._zIndex=t}get alpha(){if(this._alpha==null)throw new Error("alpha not set");return this._alpha}set alpha(t){this._alpha=t}get highlight(){if(this._highlight==null)throw new Error("highlight not set");return this._highlight}set highlight(t){this._highlight=t}getEventGroupIdentifier(){return nS.FURNITURE}getLayers(){if(this._layers==null)throw new Error("Layers not set yet. Call `updateDisplay` before accessing the layers.");return this._layers}getVisualizationData(){return this._furniture.visualizationData}setDisplayAnimation(t){this._animation=t}setDisplayDirection(t){this._direction=t}updateLayers(){var t;(t=this._layers)===null||t===void 0||t.forEach(e=>{e.x=this.x,e.y=this.y,e.zIndex=this.zIndex,e.alpha=this.alpha,e.highlight=this.highlight,e.update()})}updateDisplay(){var t;if(this._direction==null)throw new Error("Direction was not set");const e=this._direction,i=this._animation;(t=this._layers)===null||t===void 0||t.forEach(n=>n.destroy()),this._layers=this._getDrawDefinition(e,i).parts.map(n=>new lS(this,this._container,n,this._eventManager,this._clickHandler,this._overOutHandler,o=>this._furniture.getTexture(o))),this.updateLayers()}destroy(){var t;(t=this._layers)===null||t===void 0||t.forEach(e=>e.destroy())}_getDrawDefinition(t,e){e=e??"undefined";const i=`${t}_${e}`,n=this._cache.get(i);if(n!=null)return n;const o=this._furniture.getDrawDefinition(t,e);return this._cache.set(i,o),o}}js.FurnitureVisualizationView=uS;class lS{constructor(t,e,i,n,o,s,a){this._parent=t,this._container=e,this._part=i,this._eventManager=n,this._clickHandler=o,this._overOutHandler=s,this._getTexture=a,this._sprites=new Map,this._spritePositionChanged=!1,this._spritesChanged=!1,this._frameIndex=0,this._mountedSprites=new Set,this.frameRepeat=i.frameRepeat,this.layerIndex=i.layerIndex,this.assetCount=i.assets.length}get highlight(){if(this._highlight==null)throw new Error("highlight not set");return this._highlight}set highlight(t){t!==this._highlight&&(this._highlight=t,this._spritesChanged=!0)}get alpha(){if(this._alpha==null)throw new Error("alpha not set");return this._alpha}set alpha(t){t!==this._alpha&&(this._alpha=t,this._spritesChanged=!0)}get x(){if(this._x==null)throw new Error("x not set");return this._x}set x(t){t!==this._x&&(this._x=t,this._spritePositionChanged=!0)}get y(){if(this._y==null)throw new Error("y not set");return this._y}set y(t){this._y!==t&&(this._y=t,this._spritePositionChanged=!0)}get zIndex(){if(this._zIndex==null)throw new Error("zIndex not set");return this._zIndex}set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this._spritePositionChanged=!0)}get tag(){var t;return(t=this._part.layer)===null||t===void 0?void 0:t.tag}setColor(t){this._color!==t&&(this._color=t,this._spritesChanged=!0)}setCurrentFrameIndex(t){const e=this._frameIndex;this._frameIndex=t;const i=this._getSprite(e);i!=null&&this._setSpriteVisible(i,!1);const n=this._getSprite(this._frameIndex);n!=null&&(this._setSpriteVisible(n,!0),this._addSprite(n),this._color!=null&&(n.tint=this._color))}update(){this._spritePositionChanged&&(this._spritePositionChanged=!1,this._updateSpritesPosition()),this._spritesChanged&&(this._spritesChanged=!1,this._destroySprites(),this._updateSprites())}destroy(){this._destroySprites()}_updateSpritePosition(t){t.baseX=this.x,t.baseY=this.y,t.baseZIndex=this.zIndex}_addSprite(t){this._mountedSprites.has(t)||(this._mountedSprites.add(t),this._container.addChild(t),this._overOutHandler.register(t.events))}_destroySprites(){this._sprites.forEach(t=>{this._container.removeChild(t),this._overOutHandler.remove(t.events),t.destroy()}),this._sprites=new Map,this._mountedSprites=new Set}_setSpriteVisible(t,e){e?(t.ignore=!1,t.visible=!0):(t.ignore=!0,t.visible=!1)}_updateSprites(){const t=this._frameIndex,e=this._getSprite(t);this._sprites.forEach(i=>this._setSpriteVisible(i,!1)),e!=null&&(this._addSprite(e),this._setSpriteVisible(e,!0))}_updateSpritesPosition(){this._sprites.forEach(t=>{this._updateSpritePosition(t)})}_getSpriteInfo(t){const e=this._part.assets[t];if(e==null)return;const i=this._getTexture(hS(e));return{asset:e,texture:i}}_getSprite(t){const e=this._sprites.get(t);if(e!=null)return e;const i=this._getSpriteInfo(t);if(i==null)return;const{z:n,layer:o,shadow:s,mask:a,tint:l}=this._part,{asset:c,texture:d}=i,g=n??0,u=new sS.FurnitureSprite({eventManager:this._eventManager,mirrored:c.flipH,tag:o?.tag,group:this._parent}),h=o?.ignoreMouse!=null&&o.ignoreMouse;u.ignoreMouse=h,u.events.addEventListener("click",p=>{this._clickHandler.handleClick(p)}),u.events.addEventListener("pointerup",p=>{this._clickHandler.handlePointerUp(p)}),u.events.addEventListener("pointerdown",p=>{this._clickHandler.handlePointerDown(p)}),u.hitTexture=d,this._highlight&&o?.ink==null&&!s&&!a?u.filters=[aS]:u.filters=[];const I=c.flipH?-1:1,m=+(32-c.x*I),y=-c.y+16;u.offsetX=m,u.offsetY=y,u.offsetZIndex=g,u.baseX=this.x,u.baseY=this.y,u.baseZIndex=this.zIndex,s&&(u.baseZIndex=this.zIndex,u.offsetZIndex=-this.zIndex),l!=null&&(u.tint=parseInt(l,16));const v=this._getAlpha({baseAlpha:this.alpha,layerAlpha:o?.alpha});return o!=null&&o.ink!=null&&(this.highlight&&(u.visible=!1),u.blendMode=o.ink==="ADD"?cg.BLEND_MODES.ADD:cg.BLEND_MODES.NORMAL),s?this.highlight?(u.visible=!1,u.alpha=0):(u.visible=!0,u.alpha=v/5):(u.visible=!0,u.alpha=v),a&&(u.tint=16777215),this._color!=null&&(u.tint=this._color),this._setSpriteVisible(u,!1),this._sprites.set(t,u),this._overOutHandler.register(u.events),u}_getAlpha({layerAlpha:t,baseAlpha:e}){return t!=null?t/255*e:e}}const hS=r=>{var t;return(t=r.source)!==null&&t!==void 0?t:r.name};var cS=k&&k.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),fS=k&&k.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),dS=k&&k.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&cS(t,r,e);return fS(t,r),t};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.BaseFurniture=void 0;const fg=dS(Zt),gS=Gn,pS=Vn,IS=Jn,vS=Qi,mS=Ns,yS=ge,_S=vi,CS=js,AS=Un;new pS.HighlightFilter(10066329,16777215);class ms{constructor({type:t,direction:e,animation:i="0",getMaskId:n=()=>{},dependencies:o,onLoad:s}){this._sprites=new Map,this._x=0,this._y=0,this._zIndex=0,this._direction=0,this._clickHandler=new gS.ClickHandler,this._overOutHandler=new AS.EventOverOutHandler,this._fallbackVisualization=new vS.AnimatedFurnitureVisualization,this._refreshPosition=!1,this._refreshFurniture=!1,this._refreshZIndex=!1,this._highlight=!1,this._alpha=1,this._destroyed=!1,this._maskNodes=[],this._maskSprites=[],this._cancelTicker=void 0,this._onTicker=()=>{this._refreshFurniture&&(this._refreshFurniture=!1,this._updateFurniture()),this._refreshPosition&&(this._refreshPosition=!1,this._updatePosition()),this._refreshZIndex&&(this._refreshZIndex=!1,this._updateZIndex())},this._direction=e,this._animation=i,this._type=t,this._getMaskId=n,this._onLoad=s,o!=null&&(this.dependencies=o),fg.Ticker.shared.add(this._onTicker),this._loadFurniResultPromise=new Promise(a=>{this._resolveLoadFurniResult=a})}static fromRoomContext(t,e){return new ms({dependencies:{placeholder:t.configuration.placeholder,animationTicker:t.animationTicker,furnitureLoader:t.furnitureLoader,visualization:t.visualization,application:t.application,eventManager:t.eventManager},...e})}static fromShroom(t,e,i){return new ms({dependencies:{animationTicker:t.dependencies.animationTicker,furnitureLoader:t.dependencies.furnitureLoader,placeholder:t.dependencies.configuration.placeholder,application:t.dependencies.application,eventManager:_S.NOOP_EVENT_MANAGER,visualization:{container:e,addMask:()=>({remove:()=>{},update:()=>{},sprite:null})}},...i})}get dependencies(){if(this._dependencies==null)throw new Error("Invalid dependencies");return this._dependencies}set dependencies(t){this._dependencies=t,this._loadFurniture()}get visualization(){return this._visualization==null?this._fallbackVisualization:this._visualization}set visualization(t){var e;(e=this._visualization)===null||e===void 0||e.destroy(),this._visualization=t,this._updateFurniture()}get mounted(){return this._dependencies!=null}get extradata(){return this._loadFurniResultPromise.then(t=>t.getExtraData())}get validDirections(){return this._loadFurniResultPromise.then(t=>t.directions)}get highlight(){return this._highlight}set highlight(t){this._highlight=t,this._refreshFurniture=!0}get alpha(){return this._alpha}set alpha(t){this._alpha=t,this._refreshFurniture=!0}get onClick(){return this._clickHandler.onClick}set onClick(t){this._clickHandler.onClick=t}get onDoubleClick(){return this._clickHandler.onDoubleClick}set onDoubleClick(t){this._clickHandler.onDoubleClick=t}get onPointerDown(){return this._clickHandler.onPointerDown}set onPointerDown(t){this._clickHandler.onPointerDown=t}get onPointerUp(){return this._clickHandler.onPointerUp}set onPointerUp(t){this._clickHandler.onPointerUp=t}get onPointerOut(){return this._overOutHandler.onOut}set onPointerOut(t){this._overOutHandler.onOut=t}get onPointerOver(){return this._overOutHandler.onOver}set onPointerOver(t){this._overOutHandler.onOver=t}get x(){return this._x}set x(t){t!==this.x&&(this._x=t,this._refreshPosition=!0)}get y(){return this._y}set y(t){t!==this.y&&(this._y=t,this._refreshPosition=!0)}get zIndex(){return this._zIndex}set zIndex(t){t!==this.zIndex&&(this._zIndex=t,this._refreshZIndex=!0)}get direction(){return this._direction}set direction(t){this._direction=t,this._updateDirection()}get animation(){return this._animation}set animation(t){this._animation=t,this.mounted&&(this.visualization.updateAnimation(this.animation),this._handleAnimationChange())}get maskId(){return this._getMaskId}set maskId(t){this._getMaskId=t}getEventGroupIdentifier(){return yS.FURNITURE}destroy(){var t;this._destroySprites(),this._destroyed=!0,fg.Ticker.shared.remove(this._onTicker),this._cancelTicker&&this._cancelTicker(),this._cancelTicker=void 0,(t=this._view)===null||t===void 0||t.destroy()}_updateDirection(){this.mounted&&this._validDirections!=null&&this.visualization.updateDirection(mS.getDirectionForFurniture(this.direction,this._validDirections))}_updateSprites(t){this._sprites.forEach(t),this._unknownSprite!=null&&t(this._unknownSprite)}_updateZIndex(){this._updateSprites(t=>{t.baseZIndex=this.zIndex})}_updatePosition(){this._updateSprites(t=>{t.baseX=this.x,t.baseY=this.y}),this._view!=null&&(this._view.x=this.x,this._view.y=this.y,this._view.zIndex=this.zIndex,this._view.updateLayers())}_updateFurniture(){this.mounted&&(this._loadFurniResult!=null?this._updateFurnitureSprites(this._loadFurniResult):this._updateUnknown())}_updateUnknown(){this.mounted&&this._unknownSprite==null&&(this._unknownSprite=new IS.FurnitureSprite({eventManager:this.dependencies.eventManager,group:this}),this._unknownSprite.baseX=this.x,this._unknownSprite.baseY=this.y,this._unknownSprite.offsetY=-32,this._unknownTexture!=null&&(this._unknownSprite.texture=this._unknownTexture),this._unknownSprite.zIndex=this.zIndex,this.dependencies.visualization.container.addChild(this._unknownSprite),this._updatePosition())}_createNewView(t){var e,i,n;(e=this._view)===null||e===void 0||e.destroy();const o=new CS.FurnitureVisualizationView(this.dependencies.eventManager,this._clickHandler,this._overOutHandler,this.dependencies.visualization.container,t);return o.x=this.x,o.y=this.y,o.zIndex=this.zIndex,o.alpha=(i=this.alpha)!==null&&i!==void 0?i:1,o.highlight=(n=this.highlight)!==null&&n!==void 0?n:!1,this._view=o,o}_updateFurnitureSprites(t){var e;this.mounted&&(this._maskNodes.forEach(i=>i.remove()),this._maskNodes=[],(e=this._unknownSprite)===null||e===void 0||e.destroy(),this._unknownSprite=void 0,this.visualization.setView(this._createNewView(t)),this.visualization.update(this),this._validDirections=t.directions,this._updateDirection(),this.visualization.updateAnimation(this.animation),this.visualization.updateFrame(this.dependencies.animationTicker.current()),this._handleAnimationChange(),this._updatePosition())}_destroySprites(){var t;this._sprites.forEach(e=>e.destroy()),this._maskNodes.forEach(e=>e.remove()),(t=this._unknownSprite)===null||t===void 0||t.destroy(),this._sprites=new Map}_loadFurniture(){var t;this.mounted&&(this._unknownTexture=(t=this.dependencies.placeholder)!==null&&t!==void 0?t:void 0,this.dependencies.furnitureLoader.loadFurni(this._type).then(e=>{this._destroyed||(this._loadFurniResult=e,this._resolveLoadFurniResult&&this._resolveLoadFurniResult(e),this._updateFurniture(),this._onLoad&&this._onLoad())}),this._updateFurniture())}_handleAnimationChange(){this.visualization.isAnimated(this.animation)&&this._cancelTicker==null&&(this._cancelTicker=this.dependencies.animationTicker.subscribe(t=>{this.visualization.updateFrame(t)}),this.visualization.update(this),this.visualization.updateFrame(this.dependencies.animationTicker.current())),!this.visualization.isAnimated(this.animation)&&this._cancelTicker!=null&&(this._cancelTicker(),this._cancelTicker=void 0,this.visualization.update(this),this.visualization.updateFrame(this.dependencies.animationTicker.current()))}_getAlpha({layerAlpha:t,baseAlpha:e}){return t!=null?t/255*e:e}}Ur.BaseFurniture=ms;var Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.getFurnitureFetch=void 0;function bS(r,t){if(r.id!=null&&r.type!=null)throw new Error("Both `id` and `type` specified. Please supply only one of the two.");if(r.id!=null)return{kind:"id",id:r.id,placementType:t};if(r.type!=null)return{kind:"type",type:r.type};throw new Error("No `id` or `type` provided for the furniture.")}Qn.getFurnitureFetch=bS;Object.defineProperty(Gs,"__esModule",{value:!0});Gs.FloorFurniture=void 0;const wS=Ai,xS=Ji,PS=Ur,SS=zn,TS=Qn;class ES extends wS.RoomObject{constructor(t){var e;super(),this.placementType="floor",this._animatedPosition={roomX:0,roomY:0,roomZ:0},this._moving=!1,this._highlight=!1,this._type=t.type,this._id=t.id,this._roomX=t.roomX,this._roomY=t.roomY,this._roomZ=t.roomZ,this._direction=t.direction,this._animation=t.animation,"type"in t&&(this._type=t.type),this._baseFurniture=new PS.BaseFurniture({animation:this.animation,direction:this.direction,type:TS.getFurnitureFetch(t,"floor")}),(e=t.behaviors)===null||e===void 0||e.forEach(i=>i.setParent(this))}move(t,e,i){var n;(n=this._moveAnimation)===null||n===void 0||n.move({roomX:this.roomX,roomY:this.roomY,roomZ:this.roomZ},{roomX:t,roomY:e,roomZ:i},void 0),this._roomX=t,this._roomY=e,this._roomZ=i}clearMovement(){var t;const e=(t=this._moveAnimation)===null||t===void 0?void 0:t.clear();e!=null&&(this.roomX=e.roomX,this.roomY=e.roomY,this.roomZ=e.roomZ)}destroyed(){this._baseFurniture.destroy()}registered(){this._baseFurniture.dependencies={animationTicker:this.animationTicker,furnitureLoader:this.furnitureLoader,placeholder:this.configuration.placeholder,visualization:this.roomVisualization,eventManager:this.eventManager},this._moveAnimation=new SS.ObjectAnimation(this.animationTicker,{onStart:()=>{this._moving=!0},onStop:()=>{this._moving=!1},onUpdatePosition:t=>{this._animatedPosition=t,this._updatePosition()}},this.configuration.furnitureMovementDuration),this._updatePosition()}get highlight(){return this._highlight}set highlight(t){this._highlight=t,this._updateHighlight()}get alpha(){return this._baseFurniture.alpha}set alpha(t){this._baseFurniture.alpha=t}get type(){return this._type}get onClick(){return this._onClick}set onClick(t){this._onClick=t,this._baseFurniture.onClick=this.onClick}get onDoubleClick(){return this._onDoubleClick}set onDoubleClick(t){this._onDoubleClick=t,this._baseFurniture.onDoubleClick=this.onDoubleClick}get onPointerDown(){return this._onPointerDown}set onPointerDown(t){this._onPointerDown=t,this._baseFurniture.onPointerDown=this.onPointerDown}get onPointerUp(){return this._onPointerUp}set onPointerUp(t){this._onPointerUp=t,this._baseFurniture.onPointerUp=this.onPointerUp}get onPointerOver(){return this._onPointerOver}set onPointerOver(t){this._onPointerOver=t,this._baseFurniture.onPointerOver=this.onPointerOver}get onPointerOut(){return this._onPointerOut}set onPointerOut(t){this._onPointerOut=t,this._baseFurniture.onPointerOut=this.onPointerOut}get id(){return this._id}get extradata(){return this._baseFurniture.extradata}get validDirections(){return this._baseFurniture.validDirections}get animation(){return this._animation}set animation(t){this._animation=t,this._updateAnimation()}get direction(){return this._direction}set direction(t){this._direction=t,this._updateDirection()}get roomX(){return this._roomX}set roomX(t){this._roomX=t,this._updatePosition()}get roomY(){return this._roomY}set roomY(t){this._roomY=t,this._updatePosition()}get roomZ(){return this._roomZ}set roomZ(t){this._roomZ=t,this._updatePosition()}get visualization(){return this._baseFurniture.visualization}set visualization(t){this._baseFurniture.visualization=t}_updateDirection(){this._baseFurniture.direction=this.direction}_getDisplayRoomPosition(){return this._moving?this._animatedPosition:{roomX:this.roomX,roomY:this.roomY,roomZ:this.roomZ}}_updatePosition(){const{roomX:t,roomY:e,roomZ:i}=this._getDisplayRoomPosition(),{x:n,y:o}=this.geometry.getPosition(t,e,i),s=Math.round(t),a=Math.round(e);this._baseFurniture.x=n,this._baseFurniture.y=o,this._baseFurniture.zIndex=xS.getZOrder(s,a,this.roomZ)}_updateAnimation(){this._baseFurniture.animation=this.animation}_updateHighlight(){this._baseFurniture.highlight=this.highlight}}Gs.FloorFurniture=ES;var ks={},$n={};Object.defineProperty($n,"__esModule",{value:!0});$n.getMaskId=void 0;function FS(r,t,e){switch(r){case 2:case 6:return`x_${t}`;case 0:case 4:return`y_${e}`}}$n.getMaskId=FS;var Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.LegacyWallGeometry=void 0;class Kn{constructor(t){this._heightmap=t,this._width=t[0].length,this._height=t.length,this._scale=64}getLocation(t,e,i,n,o){let s=t,a=e,l=this.getHeight(t,e);return o==Kn.LEFT_WALL?(s=s+(i/(this._scale/2)-.5),a=a+.5,l=l-(n-i/2)/(this._scale/2)):(a=a+((this._scale/2-i)/(this._scale/2)-.5),s=s+.5,l=l-(n-(this._scale/2-i)/2)/(this._scale/2)),{x:s,y:a,z:l}}getHeight(t,e){if(t<0||t>=this._width||e<0||e>=this._height)return 0;const i=this._heightmap[e];if(i==null)return 0;const n=i[t];switch(n.type){case"wall":return n.height;case"stairs":return n.z;case"tile":return n.z}return 0}}Ws.LegacyWallGeometry=Kn;Kn.RIGHT_WALL="l";Kn.LEFT_WALL="r";Object.defineProperty(ks,"__esModule",{value:!0});ks.WallFurniture=void 0;const MS=Ai,DS=Ji,LS=Ur,dg=$n,BS=Qn,RS=Ws;class OS extends MS.RoomObject{constructor(t){super(),this.placementType="wall",this._offsetX=0,this._offsetY=0,this._highlight=!1,this._type=t.type,this._id=t.id,this._roomX=t.roomX,this._roomY=t.roomY,this._animation=t.animation,this._direction=t.direction,this._offsetX=t.offsetX,this._offsetY=t.offsetY,this._baseFurniture=new LS.BaseFurniture({animation:this.animation,direction:this.direction,type:BS.getFurnitureFetch(t,"wall"),getMaskId:e=>dg.getMaskId(e,this.roomX,this.roomY)})}get extradata(){return this._baseFurniture.extradata}get validDirections(){return this._baseFurniture.validDirections}get id(){return this._id}get highlight(){return this._highlight}set highlight(t){this._highlight=t,this._updateHighlight()}get alpha(){return this._baseFurniture.alpha}set alpha(t){this._baseFurniture.alpha=t}get type(){return this._type}get animation(){return this._animation}set animation(t){this._animation=t,this._updateAnimation()}get direction(){return this._direction}set direction(t){this._direction=t,this._updateDirection()}get roomX(){return this._roomX}set roomX(t){this._roomX=t,this._updatePosition()}get roomY(){return this._roomY}set roomY(t){this._roomY=t,this._updatePosition()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._updatePosition()}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._updatePosition()}get visualization(){return this._baseFurniture.visualization}set visualization(t){this._baseFurniture.visualization=t}get onClick(){return this._baseFurniture.onClick}set onClick(t){this._baseFurniture.onClick=t}get onDoubleClick(){return this._baseFurniture.onDoubleClick}set onDoubleClick(t){this._baseFurniture.onDoubleClick=t}get onPointerDown(){return this._baseFurniture.onPointerDown}set onPointerDown(t){this._baseFurniture.onPointerDown=t}get onPointerUp(){return this._baseFurniture.onPointerUp}set onPointerUp(t){this._baseFurniture.onPointerUp=t}destroyed(){this._baseFurniture.destroy()}registered(){this._baseFurniture.dependencies={animationTicker:this.animationTicker,furnitureLoader:this.furnitureLoader,placeholder:void 0,visualization:this.roomVisualization,eventManager:this.eventManager},this._updatePosition()}_updateAnimation(){this._baseFurniture.animation=this.animation}_updateDirection(){this._baseFurniture.direction=this.direction}_updateHighlight(){this._baseFurniture.highlight=this.highlight}_getOffsets(t){const i=new RS.LegacyWallGeometry(this.room.getParsedTileTypes()).getLocation(this.roomX,this.roomY,this._offsetX,this._offsetY,t===2?"l":"r");if(t===2){const n=this.room.getPosition(i.x,i.y,i.z*2-.5);return{x:n.x,y:n.y-this.room.wallHeight}}else{const n=this.room.getPosition(i.x,i.y-.5,i.z*2-.5);return{x:n.x,y:n.y-this.room.wallHeight}}}_updatePosition(){if(this._getOffsets(this.direction)==null)return;const e=this._getOffsets(this.direction);this._baseFurniture.x=e.x,this._baseFurniture.y=e.y,this._baseFurniture.maskId=i=>dg.getMaskId(i,this.roomX,this.roomY),this._baseFurniture.zIndex=DS.getZOrder(this.roomX,this.roomY,0)-1}}ks.WallFurniture=OS;var Xs={},qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.parseTileMapString=void 0;function ZS(r){return r}function GS(r){return r=r.replace(/\r/g,`
`),r=r.replace(/ /g,""),r.split(`
`).map(t=>t.trim()).filter(t=>t.length>0).map(t=>t.split("").map(ZS))}qn.parseTileMapString=GS;var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.RoomObjectContainer=void 0;class NS{constructor(){this._roomObjects=new Set}get roomObjects(){return this._roomObjects}get context(){return this._context}set context(t){this._context=t}addRoomObject(t){if(this._context==null)throw new Error("Context wasn't supplied to RoomObjectContainer");this._roomObjects.has(t)||(t.setParent(this._context),this._roomObjects.add(t))}removeRoomObject(t){this._roomObjects.has(t)&&(this._roomObjects.delete(t),t.destroy())}}Hs.RoomObjectContainer=NS;var to={},Ys={},jS=k&&k.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),kS=k&&k.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),WS=k&&k.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&jS(t,r,e);return kS(t,r),t};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.EventManagerContainer=void 0;const gg=WS(Zt);class XS{constructor(t,e){this._application=t,this._eventManager=e,this._updateRectangle=()=>{const n=this._application.renderer,o=n.width/n.resolution,s=n.height/n.resolution;this._box=new gg.TilingSprite(gg.Texture.WHITE,o,s),this._box.alpha=.3},this._updateRectangle(),t.ticker.add(this._updateRectangle);const i=this._application.renderer.plugins.interaction;i.addListener("pointermove",n=>{const o=n.data.getLocalPosition(this._application.stage);this._eventManager.move(n,o.x,o.y)},!0),i.addListener("pointerup",n=>{const o=n.data.getLocalPosition(this._application.stage);this._eventManager.pointerUp(n,o.x,o.y)},!0),i.addListener("pointerdown",n=>{const o=n.data.getLocalPosition(this._application.stage);this._eventManager.pointerDown(n,o.x,o.y)},!0)}destroy(){this._application.ticker.remove(this._updateRectangle)}}Ys.EventManagerContainer=XS;var Us={},Ge={},zs={},HS=k&&k.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),YS=k&&k.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),US=k&&k.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&HS(t,r,e);return YS(t,r),t};Object.defineProperty(zs,"__esModule",{value:!0});zs.createPlaneMatrix=void 0;const zS=US(Zt);function VS(r,{width:t,height:e,x:i,y:n}){let o=r.d.x-r.c.x,s=r.d.y-r.c.y,a=r.b.x-r.c.x,l=r.b.y-r.c.y;Math.abs(a-t)<=1&&(a=t),Math.abs(l-t)<=1&&(l=t),Math.abs(o-e)<=1&&(o=e),Math.abs(s-e)<=1&&(s=e);const c=a/t,d=l/t,g=o/e,u=s/e,h=i+r.c.x,f=n+r.c.y;return new zS.Matrix(c,d,g,u,h,f)}zs.createPlaneMatrix=VS;Object.defineProperty(Ge,"__esModule",{value:!0});Ge.getRightMatrix=Ge.getLeftMatrix=Ge.getFloorMatrix=void 0;const Tc=zs;function JS(r,t){return Tc.createPlaneMatrix({c:{x:0,y:16},d:{x:32,y:0},a:{x:64,y:16},b:{x:32,y:32}},{width:32,height:32,x:r,y:t})}Ge.getFloorMatrix=JS;function QS(r,t,e){return Tc.createPlaneMatrix({b:{x:0,y:16},c:{x:e.width,y:16+e.width/2},d:{x:e.width,y:16+e.width/2+e.height},a:{x:0,y:16+e.height}},{width:e.width,height:e.height,x:r,y:t})}Ge.getLeftMatrix=QS;function $S(r,t,e){return Tc.createPlaneMatrix({b:{x:32,y:32},c:{x:32+e.width,y:32-e.width/2},d:{x:32+e.width,y:32+e.height-e.width/2},a:{x:32,y:32+e.height}},{width:e.width,height:e.height,x:r,y:t})}Ge.getRightMatrix=$S;var KS=k&&k.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),qS=k&&k.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),tT=k&&k.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&KS(t,r,e);return qS(t,r),t};Object.defineProperty(Us,"__esModule",{value:!0});Us.Stair=void 0;const He=tT(Zt),ur=Ge;class eT extends He.Container{constructor(t){super(),this._props=t,this._tileHeight=0,this._tileLeftColor=0,this._tileRightColor=0,this._tileTopColor=0,this._tileHeight=t.tileHeight,this.updateSprites()}update(t){this._tileHeight=t.tileHeight,this._tileLeftColor=t.tileLeftColor,this._tileRightColor=t.tileRightColor,this._tileTopColor=t.tileTopColor,this._texture=t.tileTexture,this.updateSprites()}updateSprites(){this.removeChildren();const{direction:t}=this._props;for(let e=0;e<4;e++)t===0?this.addChild(...this._createStairBoxDirection0(3-e)):t===2&&this.addChild(...this._createStairBoxDirection2(3-e))}_createStairBoxDirection0(t){const e=+Te*t,i=-Te*t*1.5,n=this._texture;function o(c,d,g){const u=new He.TilingSprite(n??He.Texture.WHITE);return u.tilePosition=g,u.transform.setFromMatrix(c),u.tint=d,u}const s=o(ur.getFloorMatrix(e,i),this._tileTopColor,new He.Point(0,0));s.width=32,s.height=8;const a=o(ur.getLeftMatrix(e,i,{width:32,height:this._tileHeight}),this._tileLeftColor,new He.Point(0,0));a.width=32,a.height=this._tileHeight;const l=o(ur.getRightMatrix(e,i,{width:8,height:this._tileHeight}),this._tileRightColor,new He.Point(0,0));return l.width=8,l.height=this._tileHeight,[a,l,s]}_createStairBoxDirection2(t){const e=-Te*t,i=-Te*t*1.5,n=this._texture;function o(c,d){const g=new He.TilingSprite(n??He.Texture.WHITE);return g.tilePosition=new He.Point(0,0),g.transform.setFromMatrix(c),g.tint=d,g}const s=o(ur.getFloorMatrix(e+32-Te,i+Te*1.5),this._tileTopColor);s.width=Te,s.height=32;const a=o(ur.getLeftMatrix(e+32-Te,i+Te*1.5,{width:Te,height:this._tileHeight}),this._tileLeftColor);a.width=Te,a.height=this._tileHeight;const l=o(ur.getRightMatrix(e,i,{width:32,height:this._tileHeight}),this._tileRightColor);return l.width=32,l.height=this._tileHeight,[a,l,s]}destroy(){super.destroy(),this.removeChildren()}}Us.Stair=eT;const Te=8;var Vs={},iT=k&&k.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),rT=k&&k.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),nT=k&&k.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&iT(t,r,e);return rT(t,r),t};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.StairCorner=void 0;const Xt=nT(Zt),Ie=Ge;class oT extends Xt.Container{constructor(t){super(),this._props=t,this._tileHeight=0,this._tileLeftColor=0,this._tileRightColor=0,this._tileTopColor=0,this.sortableChildren=!0}update(t){this._tileHeight=t.tileHeight,this._tileLeftColor=t.tileLeftColor,this._tileRightColor=t.tileRightColor,this._tileTopColor=t.tileTopColor,this._texture=t.tileTexture,this.updateSprites()}updateSprites(){this.removeChildren();const{type:t}=this._props;for(let e=0;e<4;e++)t==="front"?this.addChild(...this._createStairBoxFront(3-e)):t==="left"?this.addChild(...this._createStairBoxLeft(3-e)):t==="right"&&this.addChild(...this._createStairBoxRight(3-e))}destroySprites(){var t;(t=this._container)===null||t===void 0||t.destroy()}destroy(){super.destroy(),this.destroySprites()}_createStairBoxFront(t){const e=+te*t,i=-te*t*1.5,n=0,o=-te*t*2,s=this._texture;function a(u,h,f){const I=new Xt.TilingSprite(s??Xt.Texture.WHITE);return I.tilePosition=f,I.transform.setFromMatrix(u),I.tint=h,I}const l=a(Ie.getFloorMatrix(e,i),this._tileTopColor,new Xt.Point);l.width=32-8*t,l.height=8;const c=a(Ie.getFloorMatrix(n+32-te,o+te*1.5),this._tileTopColor,new Xt.Point(0,0));c.width=te,c.height=32-8*t;const d=a(Ie.getLeftMatrix(e-8*t,i-8*t*.5,{width:32,height:this._tileHeight}),this._tileLeftColor,new Xt.Point(0,0));d.width=32-8*t,d.height=this._tileHeight;const g=a(Ie.getRightMatrix(n-te*t,-te*t*1.5,{width:32,height:this._tileHeight}),this._tileRightColor,new Xt.Point(0,0));return g.width=32-8*t,g.height=this._tileHeight,[d,g,l,c]}_createStairBoxLeft(t){const e=-te*t,i=-te*t*1.5,n=this._texture;function o(l,c,d){const g=new Xt.TilingSprite(n??Xt.Texture.WHITE);return g.tilePosition=d,g.transform.setFromMatrix(l),g.tint=c,g}const s=o(Ie.getFloorMatrix(e+32-te,i+te*1.5),this._tileTopColor,new Xt.Point(0,0));s.width=te,s.height=32-8*t,s.zIndex=2;const a=o(Ie.getRightMatrix(e-te*t,-te*t,{width:32,height:this._tileHeight}),this._tileRightColor,new Xt.Point(0,0));if(a.width=32-8*t,a.height=this._tileHeight,a.zIndex=1,t==0){const l=o(Ie.getFloorMatrix(e+40,-4),this._tileTopColor,new Xt.Point(0,0));l.width=8,l.height=8,l.zIndex=0;const c=o(Ie.getFloorMatrix(e+24,-12),this._tileTopColor,new Xt.Point(0,0));return c.width=8,c.height=8,c.zIndex=0,[s,a,l,c]}else return[s,a]}_createStairBoxRight(t){const e=+te*t,i=-te*t*1.5,n=this._texture;function o(l,c,d){const g=new Xt.TilingSprite(n??Xt.Texture.WHITE);return g.tilePosition=d,g.transform.setFromMatrix(l),g.tint=c,g}const s=o(Ie.getFloorMatrix(e+8*t,i+8*t*.5),this._tileTopColor,new Xt.Point(0,0));s.width=32-8*t,s.height=8,s.zIndex=2;const a=o(Ie.getLeftMatrix(e,i,{width:32,height:this._tileHeight}),this._tileLeftColor,new Xt.Point(0,0));if(a.width=32-8*t,a.height=this._tileHeight,a.zIndex=1,t==0){const l=o(Ie.getFloorMatrix(e+8,-4),this._tileTopColor,new Xt.Point(0,0));l.width=8,l.height=8,l.zIndex=0;const c=o(Ie.getFloorMatrix(e+24,-12),this._tileTopColor,new Xt.Point(0,0));return c.width=8,c.height=8,c.zIndex=0,[s,a,l,c]}else return[s,a]}}Vs.StairCorner=oT;const te=8;var Js={},sT=k&&k.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),aT=k&&k.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),uT=k&&k.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&sT(t,r,e);return aT(t,r),t};Object.defineProperty(Js,"__esModule",{value:!0});Js.Tile=void 0;const Ye=uT(Zt),Hu=Ge;class lT extends Ye.Container{constructor(t){super(),this.props=t,this._sprites=[],this._tilePositions=new Ye.Point(0,0),this._texture=t.texture,this._color=t.color,this._tileHeight=t.tileHeight,this._updateSprites()}get color(){return this._color}set color(t){this._color=t,this._updateSprites()}get tilePositions(){return this._tilePositions}set tilePositions(t){this._tilePositions=t,this._updateSprites()}get tileHeight(){return this._tileHeight}set tileHeight(t){this._tileHeight=t,this._updateSprites()}update(t){this.tileHeight=t.tileHeight,this._roomPartData=t,this._texture=t.tileTexture,this._updateSprites()}destroy(){super.destroy(),this._destroySprites()}_destroySprites(){this._sprites.forEach(t=>t.destroy()),this._sprites=[]}_updateSprites(){var t,e,i,n,o,s,a,l,c,d;(t=this._container)===null||t===void 0||t.destroy(),this._container=new Ye.Container,this._destroySprites();const g=Hu.getFloorMatrix(0,0),u=new Ye.TilingSprite((e=this._texture)!==null&&e!==void 0?e:Ye.Texture.WHITE);u.tilePosition=this.tilePositions,u.transform.setFromMatrix(g),u.width=32,u.height=32,u.tint=(n=(i=this._roomPartData)===null||i===void 0?void 0:i.tileTopColor)!==null&&n!==void 0?n:0;const h=Hu.getLeftMatrix(0,0,{width:32,height:this.tileHeight}),f=Hu.getRightMatrix(0,0,{width:32,height:this.tileHeight}),I=new Ye.TilingSprite((o=this._texture)!==null&&o!==void 0?o:Ye.Texture.WHITE);I.tilePosition=this.tilePositions,I.transform.setFromMatrix(h),I.width=32,I.height=this.tileHeight,I.tint=(a=(s=this._roomPartData)===null||s===void 0?void 0:s.tileLeftColor)!==null&&a!==void 0?a:0;const m=new Ye.TilingSprite((l=this._texture)!==null&&l!==void 0?l:Ye.Texture.WHITE);m.tilePosition=this.tilePositions,m.transform.setFromMatrix(f),m.width=32,m.height=this.tileHeight,m.tint=(d=(c=this._roomPartData)===null||c===void 0?void 0:c.tileRightColor)!==null&&d!==void 0?d:0,this._sprites.push(this._container),this._container.addChild(I),this._container.addChild(m),this._container.addChild(u),this.addChild(this._container)}}Js.Tile=lT;var Qs={},$s={};Object.defineProperty($s,"__esModule",{value:!0});$s.isPointInside=void 0;function hT(r,t){const e=r[0],i=r[1];let n=!1;for(let o=0,s=t.length-1;o<t.length;s=o++){const a=t[o][0],l=t[o][1],c=t[s][0],d=t[s][1];l>i!=d>i&&e<(c-a)*(i-l)/(d-l)+a&&(n=!n)}return n}$s.isPointInside=hT;var cT=k&&k.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),fT=k&&k.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),dT=k&&k.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&cT(t,r,e);return fT(t,r),t};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.TileCursor=void 0;const pg=dT(Zt),gT=Pc,pT=$s,IT=ge;class vT extends pg.Container{constructor(t,e,i,n,o){super(),this._eventManager=t,this._position=e,this.onClick=i,this.onOver=n,this.onOut=o,this._hover=!1,this._subject=new gT.BehaviorSubject(void 0),this._roomX=e.roomX,this._roomY=e.roomY,this._roomZ=e.roomZ,this._graphics=this._createGraphics(),this._updateGraphics(),this.addChild(this._graphics),this._eventManager.register(this)}getEventGroupIdentifier(){return IT.TILE_CURSOR}getGroup(){return this}getRectangleObservable(){return this._subject}getEventZOrder(){return-1e3}triggerPointerTargetChanged(t){}triggerClick(t){this.onClick({roomX:this._roomX,roomY:this._roomY,roomZ:this._roomZ})}triggerPointerDown(t){}triggerPointerUp(t){}triggerPointerOver(t){this._updateHover(!0),this.onOver({roomX:this._roomX,roomY:this._roomY,roomZ:this._roomZ})}triggerPointerOut(t){this._updateHover(!1),this.onOut({roomX:this._roomX,roomY:this._roomY,roomZ:this._roomZ})}createDebugSprite(){}hits(t,e){const i=this.getGlobalPosition(),n=t-i.x,o=e-i.y;return this._pointInside([n,o],[[Mt.p1.x,Mt.p1.y],[Mt.p2.x,Mt.p2.y],[Mt.p3.x,Mt.p3.y],[Mt.p4.x,Mt.p4.y]])}getHitDetectionZIndex(){return-1e3}destroy(){super.destroy(),this._graphics.destroy(),this._eventManager.remove(this)}updateTransform(){super.updateTransform(),this._subject.next(this._getCurrentRectangle())}_getCurrentRectangle(){const t=this.getGlobalPosition();return{x:t.x,y:t.y,width:64,height:32}}_createGraphics(){return new pg.Graphics}_updateGraphics(){const t=this._graphics;t!=null&&(t.clear(),this._hover&&(Yu(t,0,.33,0),Yu(t,10998240,1,-2),Yu(t,16777215,1,-3)))}_updateHover(t){this._hover!==t&&(this._hover=t,this._updateGraphics(),t?this.onOver(this._position):this.onOut(this._position))}_pointInside(t,e){return pT.isPointInside(t,e)}}Qs.TileCursor=vT;const Mt={p1:{x:0,y:16},p2:{x:32,y:0},p3:{x:64,y:16},p4:{x:32,y:32}};function Yu(r,t,e=1,i){r.beginFill(t,e),r.moveTo(Mt.p1.x,Mt.p1.y+i),r.lineTo(Mt.p2.x,Mt.p2.y+i),r.lineTo(Mt.p3.x,Mt.p3.y+i),r.lineTo(Mt.p4.x,Mt.p4.y+i),r.endFill(),r.beginHole(),r.moveTo(Mt.p1.x+6,Mt.p1.y+i),r.lineTo(Mt.p2.x,Mt.p2.y+3+i),r.lineTo(Mt.p3.x-6,Mt.p3.y+i),r.lineTo(Mt.p4.x,Mt.p4.y-3+i),r.endHole()}var zr={},mT=k&&k.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),yT=k&&k.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),_T=k&&k.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&mT(t,r,e);return yT(t,r),t};Object.defineProperty(zr,"__esModule",{value:!0});zr.WallLeft=void 0;const re=_T(Zt);class CT extends re.Container{constructor(t){super(),this.props=t,this._offsets={x:0,y:0},this._borderWidth=0,this._wallHeight=0,this._wallWidth=32,this._tileHeight=0,this._wallLeftColor=0,this._wallRightColor=0,this._wallTopColor=0,this._drawHitArea=!1,this._hideBorder=!1,this._roomZ=0,this._hideBorder=t.hideBorder}get roomZ(){return this._roomZ}set roomZ(t){this._roomZ=t,this._update()}get wallY(){return-this._wallHeight}get wallHeight(){return this.props.cutawayHeight!=null?this._wallHeight-this.props.cutawayHeight:this._wallHeight}update(t){this._borderWidth=t.borderWidth,this._wallHeight=t.wallHeight-this.roomZ*32,this._tileHeight=t.tileHeight,this._wallLeftColor=t.wallLeftColor,this._wallRightColor=t.wallRightColor,this._wallTopColor=t.wallTopColor,this._wallTexture=t.wallTexture,this._update()}destroy(){var t;super.destroy(),(t=this._hitAreaElement)===null||t===void 0||t.destroy(),this.removeChildren()}_update(){this._hitAreaElement!=null&&(this.props.hitAreaContainer.removeChild(this._hitAreaElement),this._hitAreaElement=void 0),this.removeChildren();const t=new re.Polygon(this._getDisplayPoints());this.hitArea=t;const e=this._createPrimarySprite(),i=this._createBorderSprite(),n=this._createTopSprite();this.addChild(e),this._hideBorder||this.addChild(i),this.addChild(n);const o=new re.Graphics;o.beginFill(16711935),o.drawPolygon(t),o.alpha=this._drawHitArea?1:0,o.endFill();const s=a=>{if(a.target===o){const l=a.data.getLocalPosition(o);this.props.onMouseMove({offsetX:l.x,offsetY:l.y})}};o.addListener("mousemove",s),o.addListener("mouseover",s),o.addListener("mouseout",()=>{this.props.onMouseOut()}),o.interactive=!0,this._hitAreaElement=o,this._hitAreaElement.x=this.x,this._hitAreaElement.y=this.y,this._hitAreaElement.scale=this.scale,this.props.hitAreaContainer.addChild(this._hitAreaElement)}_getDisplayPoints(){var t,e;return[new re.Point(this._getOffsetX()+this._borderWidth,this._wallWidth/2-((t=this.props.cutawayHeight)!==null&&t!==void 0?t:0)),new re.Point(this._getOffsetX()+this._wallWidth+this._borderWidth,-((e=this.props.cutawayHeight)!==null&&e!==void 0?e:0)),new re.Point(this._getOffsetX()+this._wallWidth+this._borderWidth,-this._wallHeight),new re.Point(this._getOffsetX()+this._borderWidth,-this._wallHeight+this._wallWidth/2)]}_getOffsetX(){return this.scale.x*this._offsets.x-this._borderWidth}_createPrimarySprite(){var t;const e=new re.TilingSprite((t=this._wallTexture)!==null&&t!==void 0?t:re.Texture.WHITE,this._wallWidth,this.wallHeight);return e.transform.setFromMatrix(new re.Matrix(-1,.5,0,1)),e.x=this._getOffsetX()+this._borderWidth+this._wallWidth,e.y=this.wallY,e.tint=this._wallLeftColor,e}_createBorderSprite(){const t=new re.TilingSprite(re.Texture.WHITE,this._borderWidth,this._wallHeight+this._tileHeight);return t.transform.setFromMatrix(new re.Matrix(-1,-.5,0,1)),t.y=this.wallY+this._wallWidth/2,t.x=this._getOffsetX()+this._borderWidth,t.tint=this._wallRightColor,t}_createTopSprite(){const t=new re.TilingSprite(re.Texture.WHITE,this._borderWidth,this._wallWidth);return t.transform.setFromMatrix(new re.Matrix(1,.5,1,-.5)),t.x=this._getOffsetX()+0,t.y=this.wallY+this._wallWidth/2-this._borderWidth/2,t.tint=this._wallTopColor,t}}zr.WallLeft=CT;var Ks={},AT=k&&k.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),bT=k&&k.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),wT=k&&k.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&AT(t,r,e);return bT(t,r),t};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.WallOuterCorner=void 0;const Go=wT(Zt);class xT extends Go.Container{constructor(){super(),this._borderWidth=0,this._wallHeight=0,this._roomZ=0,this._wallTopColor=0}get roomZ(){return this._roomZ}set roomZ(t){this._roomZ=t,this._update()}get wallY(){return-this._wallHeight}update(t){this._borderWidth=t.borderWidth,this._wallHeight=t.wallHeight,this._wallTopColor=t.wallTopColor,this._update()}_createTopSprite(){const t=new Go.TilingSprite(Go.Texture.WHITE,this._borderWidth,this._borderWidth);return t.transform.setFromMatrix(new Go.Matrix(1,.5,1,-.5)),t.tint=this._wallTopColor,t.x=-this._borderWidth,t.y=-this._wallHeight+this.roomZ*32-32/2+this._borderWidth/2+(32-this._borderWidth),t}_update(){this.removeChildren(),this.addChild(this._createTopSprite())}}Ks.WallOuterCorner=xT;var eo={};Object.defineProperty(eo,"__esModule",{value:!0});eo.WallRight=void 0;const PT=zr;class ST extends PT.WallLeft{constructor(t){super(t)}_update(){this._offsets={x:this._wallWidth,y:0},this.scale.x=-1;const t=this._wallLeftColor;this._wallLeftColor=this._wallRightColor,this._wallRightColor=t,super._update()}}eo.WallRight=ST;var qs={},ta={};Object.defineProperty(ta,"__esModule",{value:!0});ta.getPosition=void 0;function TT(r,t,e,i){r=r+i.x,t=t+i.y;const n=32,o=r*n-t*n,s=r*(n/2)+t*(n/2);return{x:o,y:s-e*32}}ta.getPosition=TT;Object.defineProperty(qs,"__esModule",{value:!0});qs.getTileMapBounds=void 0;const ET=ta;function FT(r,t){let e,i,n,o;if(r.forEach((s,a)=>{s.forEach((l,c)=>{if(l.type!=="tile")return;const d=ET.getPosition(c,a,l.z,t),g=d.x+64,u=d.y+32;(e==null||d.x<e)&&(e=d.x),(i==null||d.y<i)&&(i=d.y),(n==null||g>n)&&(n=g),(o==null||u>o)&&(o=u)})}),e==null||i==null||n==null||o==null)throw new Error("Couldnt figure out dimensions");return{minX:e,minY:i-32,maxX:n,maxY:o-32}}qs.getTileMapBounds=FT;var MT=k&&k.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),DT=k&&k.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),LT=k&&k.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&MT(t,r,e);return DT(t,r),t};Object.defineProperty(to,"__esModule",{value:!0});to.RoomModelVisualization=void 0;const ve=LT(Zt),Uu=Pc,BT=Ji,RT=Ys,OT=Us,ZT=Vs,GT=Js,NT=Qs,jT=zr,kT=Ks,WT=eo,XT=qs;class HT extends ve.Container{constructor(t,e,i){super(),this._eventManager=t,this._application=e,this.parsedTileMap=i,this._hideTileCursor=!1,this._hideWalls=!1,this._hideFloor=!1,this._positionalContainer=new ve.Container,this._behindWallLayer=new ve.Container,this._wallLayer=new ve.Container,this._tileLayer=new ve.Container,this._primaryLayer=new ve.Container,this._landscapeLayer=new ve.Container,this._wallHitAreaLayer=new ve.Container,this._masksLayer=new ve.Container,this._walls=[],this._tiles=[],this._tileCursors=[],this._masks=new Map,this._parts=new Set,this._borderWidth=8,this._tileHeight=8,this._wallHeight=116,this._onActiveTileChange=new Uu.Subject,this._onActiveWallChange=new Uu.Subject,this._onTileClick=new Uu.Subject,this._refreshRoom=!1,this._rebuildRoom=!1,this._handleTick=()=>{this._rebuildRoom&&(this._updateHeightmap(),this._rebuildRoom=!1),this._refreshRoom&&(this._updateParts(),this._refreshRoom=!1)},this._tileMapBounds=XT.getTileMapBounds(this.parsedTileMap.parsedTileTypes,{x:this.parsedTileMap.wallOffsets.x,y:this.parsedTileMap.wallOffsets.y}),this._positionalContainer.addChild(this._behindWallLayer),this._positionalContainer.addChild(this._wallLayer),this._positionalContainer.addChild(this._wallHitAreaLayer),this._positionalContainer.addChild(this._tileLayer),this._positionalContainer.addChild(this._landscapeLayer),this._positionalContainer.addChild(this._primaryLayer),this._positionalContainer.addChild(this._masksLayer),this._positionalContainer.x=-this.roomBounds.minX,this._positionalContainer.y=-this.roomBounds.minY,this._primaryLayer.sortableChildren=!0,this._tileLayer.sortableChildren=!0,this.addChild(this._positionalContainer),new RT.EventManagerContainer(this._application,this._eventManager),this._updateHeightmap(),this._application.ticker.add(this._handleTick)}addPart(t){return this._parts.add(t),t.update(this._getCurrentRoomPartData()),{remove:()=>{this._parts.delete(t)}}}getMaskLevel(t,e){return{roomX:t,roomY:e}}get onTileClick(){return this._onTileClick}get hideFloor(){return this._hideFloor}set hideFloor(t){this._hideFloor=t,this._rebuildRoom=!0}get hideWalls(){return this._hideWalls}set hideWalls(t){this._hideWalls=t,this._rebuildRoom=!0}get hideTileCursor(){return this._hideTileCursor}set hideTileCursor(t){this._hideTileCursor=t,this._rebuildRoom=!0}get wallTexture(){return this._wallTexture}set wallTexture(t){this._wallTexture=t,this._refreshRoom=!0}get floorTexture(){return this._floorTexture}set floorTexture(t){this._floorTexture=t,this._refreshRoom=!0}get wallHeight(){return this._wallHeight}set wallHeight(t){this._wallHeight=t,this._refreshRoom=!0}get tileHeight(){return this._tileHeight}set tileHeight(t){this._tileHeight=t,this._refreshRoom=!0}get wallDepth(){return this._borderWidth}set wallDepth(t){this._borderWidth=t,this._refreshRoom=!0}get roomBounds(){const t=this.hideWalls||this.hideFloor,e=t?0:-this._wallHeight-this._borderWidth,i=t?0:-this._borderWidth,n=t?0:this._borderWidth,o=t?0:this._tileHeight;return{minX:this._tileMapBounds.minX+i,maxX:this._tileMapBounds.maxX+n,minY:this._tileMapBounds.minY+e,maxY:this._tileMapBounds.maxY+o}}get rectangle(){return{x:this.x,y:this.y,width:this.roomBounds.maxX-this.roomBounds.minX,height:this.roomBounds.maxY-this.roomBounds.minY}}get wallLeftColor(){return this._wallLeftColor}set wallLeftColor(t){this._wallLeftColor=t,this._refreshRoom=!0}get wallRightColor(){return this._wallRightColor}set wallRightColor(t){this._wallRightColor=t,this._refreshRoom=!0}get wallTopColor(){return this._wallTopColor}set wallTopColor(t){this._wallTopColor=t,this._refreshRoom=!0}get tileLeftColor(){return this._tileLeftColor}set tileLeftColor(t){this._tileLeftColor=t,this._refreshRoom=!0}get tileRightColor(){return this._tileRightColor}set tileRightColor(t){this._tileRightColor=t,this._refreshRoom=!0}get tileTopColor(){return this._tileTopColor}set tileTopColor(t){this._tileTopColor=t,this._refreshRoom=!0}get onActiveTileChange(){return this._onActiveTileChange.asObservable()}get onActiveWallChange(){return this._onActiveWallChange.asObservable()}get container(){return this._primaryLayer}get behindWallContainer(){return this._behindWallLayer}get landscapeContainer(){return this._landscapeLayer}get floorContainer(){return this._tileLayer}get wallContainer(){return this._wallLayer}destroy(){super.destroy(),this._destroyAllSprites()}addMask(t,e){return{update:()=>{},remove:()=>{},sprite:e}}getScreenPosition(t,e,i){return this._getPosition(t,e,i)}_getCurrentRoomPartData(){var t,e,i,n,o,s,a,l;return{borderWidth:this._borderWidth,tileHeight:this._tileHeight,wallHeight:this._getLargestWallHeight(),wallLeftColor:(t=this._wallLeftColor)!==null&&t!==void 0?t:9540767,wallRightColor:(e=this._wallRightColor)!==null&&e!==void 0?e:12304077,wallTopColor:(i=this._wallTopColor)!==null&&i!==void 0?i:7369339,tileLeftColor:(n=this._tileLeftColor)!==null&&n!==void 0?n:8618839,tileRightColor:(o=this._tileRightColor)!==null&&o!==void 0?o:6710852,tileTopColor:(s=this._tileTopColor)!==null&&s!==void 0?s:10000485,tileTexture:(a=this._floorTexture)!==null&&a!==void 0?a:ve.Texture.WHITE,wallTexture:(l=this._wallTexture)!==null&&l!==void 0?l:ve.Texture.WHITE,masks:this._masks}}_setCache(t){[this._tileLayer,this._wallLayer].forEach(e=>e.cacheAsBitmap=t)}_getLargestWallHeight(){return this.parsedTileMap.largestDiff*32+this._wallHeight}_destroyAllSprites(){[...this._tileCursors,...this._tiles,...this._walls].forEach(t=>t.destroy()),this._tileCursors=[],this._tiles=[],this._walls=[]}_updateHeightmap(){this._destroyAllSprites();for(let t=0;t<this.parsedTileMap.parsedTileTypes.length;t++)for(let e=0;e<this.parsedTileMap.parsedTileTypes[t].length;e++){const i=this.parsedTileMap.parsedTileTypes[t][e];this._createHeightmapElement(i,e,t)}this._updateParts(),this._positionalContainer.x=-this.roomBounds.minX,this._positionalContainer.y=-this.roomBounds.minY}_updateParts(){this._setCache(!1),[...this._tiles,...this._walls,...this._parts].forEach(t=>t.update(this._getCurrentRoomPartData())),this._setCache(!0)}_createHeightmapElement(t,e,i){switch(t.type){case"wall":this._createWallElement(t,e,i,t.height);break;case"tile":this._createTileElement(e,i,t.z);break;case"door":this._createDoor(e,i,t.z);break;case"stairs":this._createStair(e,i,t.z,t.kind);break;case"stairCorner":this._createStairCorner(e,i,t.z,t.kind);break}}_createStairCorner(t,e,i,n){const o=new ZT.StairCorner({type:n}),s=this._getPosition(t,e,i);o.x=s.x,o.y=s.y,this._tiles.push(o),this._tileLayer.addChild(o),this._createTileCursor(t,e,i),this._createTileCursor(t,e,i+1)}_createStair(t,e,i,n){const o=new OT.Stair({tileHeight:this._tileHeight,direction:n}),s=this._getPosition(t,e,i);o.x=s.x,o.y=s.y,this._tiles.push(o),this._tileLayer.addChild(o),this._createTileCursor(t,e,i),this._createTileCursor(t,e,i+1)}_createDoor(t,e,i){this._createTileElement(t,e,i,this._behindWallLayer),this._createLeftWall(t,e,i,{hideBorder:!1,cutawayHeight:90})}_createTileElement(t,e,i,n){if(this._hideFloor)return;const o=new GT.Tile({color:"#eeeeee",tileHeight:this._tileHeight}),s=t%2===0,a=e%2===0;o.tilePositions=new ve.Point(s?32:0,a?32:0);const l=this._getPosition(t,e,i);o.x=l.x,o.y=l.y,(n??this._tileLayer).addChild(o),this._tiles.push(o),this._createTileCursor(t,e,i,n)}_createTileCursor(t,e,i,n){if(this._hideTileCursor)return;const o={roomX:t,roomY:e,roomZ:i},s=new NT.TileCursor(this._eventManager,o,()=>{this._onTileClick.next(o)},()=>{this._onActiveTileChange.next(o)},()=>{this._onActiveTileChange.next(void 0)}),{x:a,y:l}=this._getPosition(t,e,i);s.x=a,s.y=l,s.zIndex=BT.getZOrder(t,e,i)-1e3,this._tileCursors.push(s),(n??this._primaryLayer).addChild(s)}_createRightWall(t,e,i,n){var o;const s=new WT.WallRight({hideBorder:(o=n.hideBorder)!==null&&o!==void 0?o:!1,onMouseMove:c=>{this._onActiveWallChange.next({roomX:t,roomY:e,offsetX:-c.offsetX-16,offsetY:c.offsetY/2+this._wallHeight/2-c.offsetX/4+i*16-8,wall:"r"})},onMouseOut:()=>{this._onActiveWallChange.next(void 0)},hitAreaContainer:this._wallHitAreaLayer}),{x:a,y:l}=this._getPosition(t,e+1,i);s.x=a+32,s.y=l,s.roomZ=i,this._wallLayer.addChild(s),this._walls.push(s)}_createLeftWall(t,e,i,{hideBorder:n=!1,cutawayHeight:o}){if(this._hideWalls)return;const s=new jT.WallLeft({hideBorder:n,onMouseMove:c=>{this._onActiveWallChange.next({roomX:t,roomY:e,offsetX:c.offsetX,offsetY:c.offsetY/2+this._wallHeight/2-c.offsetX/4+i*16,wall:"l"})},onMouseOut:()=>{this._onActiveWallChange.next(void 0)},hitAreaContainer:this._wallHitAreaLayer,cutawayHeight:o}),{x:a,y:l}=this._getPosition(t+1,e,i);s.x=a,s.y=l,s.roomZ=i,this._wallLayer.addChild(s),this._walls.push(s)}_createOuterBorder(t,e,i){const n=new kT.WallOuterCorner,{x:o,y:s}=this._getPosition(t+1,e,i);n.x=o,n.y=s,n.roomZ=i,this._wallLayer.addChild(n),this._walls.push(n)}_createWallElement(t,e,i,n){if(!(this._hideWalls||this._hideFloor))switch(t.kind){case"colWall":this._createRightWall(e,i,n,{hideBorder:t.hideBorder});break;case"rowWall":this._createLeftWall(e,i,n,{hideBorder:t.hideBorder});break;case"innerCorner":this._createRightWall(e,i,n,{hideBorder:!1}),this._createLeftWall(e,i,n,{hideBorder:!0});break;case"outerCorner":this._createOuterBorder(e,i,n);break}}_getPosition(t,e,i){const n=()=>({x:t,y:e}),{x:o,y:s}=n(),a=32,l=o*a-s*a,c=o*(a/2)+s*(a/2);return{x:l,y:c-i*32}}}to.RoomModelVisualization=HT;var ea={},ia={},mi={},ra={};Object.defineProperty(ra,"__esModule",{value:!0});ra.isTile=void 0;const YT=r=>!isNaN(Number(r));ra.isTile=YT;Object.defineProperty(mi,"__esModule",{value:!0});mi.getTileInfo=mi.getNumberOfTileType=void 0;const zt=ra,Ig={none:{x:0,y:0},top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},topLeft:{x:-1,y:-1},bottomLeft:{x:-1,y:1},right:{x:1,y:0},topRight:{x:1,y:-1},bottomRight:{x:1,y:1}};function xm(r){if(r==="x"||r==null)return"x";const t=Number(r);return isNaN(t)?r.charCodeAt(0)-96+9:t}mi.getNumberOfTileType=xm;const he=(r,t,e,i="none")=>(t=t+Ig[i].x,e=e+Ig[i].y,r[e]==null||r[e][t]==null?"x":xm(r[e][t]));function UT(r,t,e){const i=he(r,t,e),n=he(r,t-1,e),o=he(r,t,e-1),s=he(r,t-1,e-1),a=he(r,t-1,e+1),l=he(r,t,e+1),c=he(r,t+1,e),d=o==="x"&&n==="x"&&s==="x"&&l==="x"&&a==="x"&&zt.isTile(c)&&zt.isTile(i),g=zT(r,t,e),u=zt.isTile(i)?i:void 0;return{rowEdge:n==="x"&&zt.isTile(i),colEdge:o==="x"&&zt.isTile(i),innerEdge:s==="x"&&zt.isTile(i)&&zt.isTile(o)&&zt.isTile(n),stairs:g,height:u,rowDoor:d}}mi.getTileInfo=UT;function zT(r,t,e){const i=he(r,t,e),n=he(r,t,e,"top"),o=he(r,t,e,"left"),s=he(r,t,e,"right"),a=he(r,t,e,"topLeft"),l=he(r,t,e,"bottomLeft"),c=he(r,t,e,"topRight");if(zt.isTile(n)&&zt.isTile(i)&&Number(n)-Number(i)===1)return{direction:0};if(zt.isTile(o)&&zt.isTile(i)&&Number(o)-Number(i)===1)return{direction:2};if(zt.isTile(l)&&zt.isTile(i)&&(o==="x"||Number(o)<=Number(i))&&Number(l)-Number(i)===1)return{cornerType:"left",isCorner:!0};if(zt.isTile(c)&&zt.isTile(i)&&(s==="x"||Number(s)<=Number(i))&&Number(c)-Number(i)===1)return{cornerType:"right",isCorner:!0};if(zt.isTile(a)&&zt.isTile(i)&&(o==="x"||Number(o)<=Number(i))&&Number(a)-Number(i)===1)return{cornerType:"front",isCorner:!0}}var na={};Object.defineProperty(na,"__esModule",{value:!0});na.getColumnWalls=void 0;const VT=mi;function JT(r){var t;let e=r[0].length-1,i,n,o;const s=[];for(let a=0;a<r.length;a++)for(let l=e;l>=0;l--){const c=VT.getTileInfo(r,l,a);c.colEdge&&!c.rowDoor?(i==null&&(i=l),n=l,e=l-1,(o==null||((t=c.height)!==null&&t!==void 0?t:0)<o)&&(o=c.height)):i!=null&&n!=null&&(s.push({startX:n,endX:i,y:a-1,height:o??0}),i=void 0,n=void 0,o=void 0)}return s}na.getColumnWalls=JT;var oa={};Object.defineProperty(oa,"__esModule",{value:!0});oa.getRowWalls=void 0;const QT=mi;function $T(r){var t;let e=r.length-1,i,n,o;const s=[];for(let a=0;a<r[0].length;a++)for(let l=e;l>=0;l--){const c=QT.getTileInfo(r,a,l);c.rowEdge&&!c.rowDoor?(i==null&&(i=l),n=l,e=l-1,(o==null||((t=c.height)!==null&&t!==void 0?t:0)<o)&&(o=c.height)):i!=null&&n!=null&&(s.push({startY:n,endY:i,x:a-1,height:o??0}),i=void 0,n=void 0,o=void 0)}return s}oa.getRowWalls=$T;var sa={};Object.defineProperty(sa,"__esModule",{value:!0});sa.padTileMap=void 0;function KT(r){const t=r[0];if(t==null)throw new Error("Invalid row");let e=0,i=0;return t.some(o=>o!=="x")&&(r=[t.map(()=>"x"),...r],e+=1),r.filter(o=>o[0]!=="x").length>1&&(r=r.map(o=>["x",...o]),i+=1),{tilemap:r,offsetX:i,offsetY:e}}sa.padTileMap=KT;Object.defineProperty(ia,"__esModule",{value:!0});ia.parseTileMap=void 0;const zu=mi,qT=na,t1=oa,e1=sa;function i1(r){var t;const e=new r1(t1.getRowWalls(r),qT.getColumnWalls(r));e1.padTileMap(r);const i=r.map(d=>d.map(()=>({type:"hidden"})));let n,o,s=!1;function a(d){(o==null||d>o)&&(o=d),(n==null||d<n)&&(n=d)}for(let d=0;d<r.length;d++)for(let g=0;g<r[d].length;g++){const u=g,h=d,f=zu.getTileInfo(r,g,d),I=zu.getTileInfo(r,g,d+1),m=zu.getTileInfo(r,g+1,d),y=e.getWall(g,d);if(y!=null)switch(y.kind){case"column":{const v=I.height!=null?Math.abs(I.height-y.height):0;i[h][u]={kind:"colWall",type:"wall",height:y.height,hideBorder:v>0};break}case"row":{const v=m.height!=null?Math.abs(m.height-y.height):0;i[h][u]={kind:"rowWall",type:"wall",height:y.height,hideBorder:I.rowDoor||v>0};break}case"innerCorner":{i[h][u]={kind:"innerCorner",type:"wall",height:y.height};break}case"outerCorner":{i[h][u]={kind:"outerCorner",type:"wall",height:y.height};break}}!f.rowDoor||s?f.stairs!=null&&f.height!=null?(f.stairs.isCorner?i[h][u]={type:"stairCorner",kind:f.stairs.cornerType,z:f.height}:f.stairs.direction!=null&&(i[h][u]={type:"stairs",kind:f.stairs.direction,z:f.height}),a(f.height)):f.height!=null&&(i[h][u]={type:"tile",z:f.height},a(f.height)):(s=!0,i[h][u]={type:"door",z:(t=f.height)!==null&&t!==void 0?t:0})}let l=0;n!=null&&o!=null&&(l=o-n);const c={x:1,y:1};return{tilemap:i,largestDiff:l,wallOffsets:c,positionOffsets:{x:0,y:0},maskOffsets:{x:-c.x,y:-c.y}}}ia.parseTileMap=i1;class r1{constructor(t,e){this._rowWalls=new Map,this._colWalls=new Map,t.forEach(i=>{for(let n=i.startY;n<=i.endY;n++)this._rowWalls.set(`${i.x}_${n}`,i)}),e.forEach(i=>{for(let n=i.startX;n<=i.endX;n++)this._colWalls.set(`${n}_${i.y}`,i)})}getWall(t,e){const i=this._getColWall(t+1,e),n=this._getRowWall(t,e+1);if(i!=null&&n!=null)return{kind:"outerCorner",height:Math.min(i.height,n.height)};const o=this._getColWall(t,e),s=this._getRowWall(t,e);if(o!=null&&s!=null)return{kind:"innerCorner",height:Math.min(o.height,s.height)};const a=this._getRowWall(t,e);if(a!=null)return{kind:"row",height:a.height};const l=this._getColWall(t,e);if(l!=null)return{kind:"column",height:l.height}}_getRowWall(t,e){return this._rowWalls.get(`${t}_${e}`)}_getColWall(t,e){return this._colWalls.get(`${t}_${e}`)}}Object.defineProperty(ea,"__esModule",{value:!0});ea.ParsedTileMap=void 0;const n1=ia;class o1{constructor(t){this.tilemap=t,this._data=n1.parseTileMap(t)}get largestDiff(){return this._data.largestDiff}get parsedTileTypes(){return this._data.tilemap}get wallOffsets(){return this._data.wallOffsets}}ea.ParsedTileMap=o1;var Fr={};Object.defineProperty(Fr,"__esModule",{value:!0});Fr.getWallColors=Fr.getTileColors=void 0;function s1(r){const t=Ir(r),e=Ir(ys(r,-20)),i=Ir(ys(r,-40));return{tileTint:t,borderLeftTint:e,borderRightTint:i}}Fr.getTileColors=s1;function a1(r){const t=Ir(r),e=Ir(ys(r,-103)),i=Ir(ys(r,-52));return{topTint:e,leftTint:t,rightTint:i}}Fr.getWallColors=a1;function Ir(r){return parseInt(r.replace("#","0x"),16)}function ys(r,t){return"#"+r.replace(/^#/,"").replace(/../g,e=>("0"+Math.min(255,Math.max(0,parseInt(e,16)+t)).toString(16)).substr(-2))}var u1=k&&k.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),l1=k&&k.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),h1=k&&k.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&u1(t,r,e);return l1(t,r),t};Object.defineProperty(Xs,"__esModule",{value:!0});Xs.Room=void 0;const c1=h1(Zt),f1=qn,d1=Hs,g1=to,p1=ea,vg=Fr,I1=vi;class Ec extends c1.Container{constructor({animationTicker:t,avatarLoader:e,furnitureLoader:i,tilemap:n,configuration:o,application:s}){super();const a=typeof n=="string"?f1.parseTileMapString(n):n;this._application=s,this._animationTicker=t,this._furnitureLoader=i,this._avatarLoader=e,this._eventManager=new I1.EventManager,this._configuration=o,this.application=s,this._visualization=new g1.RoomModelVisualization(this._eventManager,this.application,new p1.ParsedTileMap(a)),this._roomObjectContainer=new d1.RoomObjectContainer,this._roomObjectContainer.context={geometry:this,visualization:this._visualization,animationTicker:this._animationTicker,furnitureLoader:this._furnitureLoader,roomObjectContainer:this,avatarLoader:this._avatarLoader,eventManager:this._eventManager,configuration:this._configuration,tilemap:this,landscapeContainer:this._visualization,application:this._application,room:this},this.addChild(this._visualization),this._visualization.onTileClick.subscribe(l=>{this.onTileClick&&this.onTileClick(l)})}get onActiveTileChange(){return this._visualization.onActiveTileChange}get onActiveWallChange(){return this._visualization.onActiveWallChange}static create(t,{tilemap:e}){return new Ec({...t.dependencies,tilemap:e})}get roomObjects(){return this._roomObjectContainer.roomObjects}get hideWalls(){return this._visualization.hideWalls}set hideWalls(t){this._visualization.hideWalls=t}get hideFloor(){return this._visualization.hideFloor}set hideFloor(t){this._visualization.hideFloor=t}get hideTileCursor(){return this._visualization.hideTileCursor}set hideTileCursor(t){this._visualization.hideTileCursor=t}get wallHeight(){return this._visualization.wallHeight}set wallHeight(t){this._visualization.wallHeight=t}get tileHeight(){return this._visualization.tileHeight}set tileHeight(t){this._visualization.tileHeight=t}get wallDepth(){return this._visualization.wallDepth}set wallDepth(t){this._visualization.wallDepth=t}get onTileClick(){return this._onTileClick}set onTileClick(t){this._onTileClick=t}get wallTexture(){return this._wallTexture}set wallTexture(t){this._wallTexture=t,this._loadWallTextures()}get floorTexture(){return this._floorTexture}set floorTexture(t){this._floorTexture=t,this._loadFloorTextures()}get wallColor(){return this._wallColor}set wallColor(t){this._wallColor=t,this._updateWallColor()}get floorColor(){return this._floorColor}set floorColor(t){this._floorColor=t,this._updateTileColor()}get roomHeight(){return this._visualization.rectangle.height}get roomWidth(){return this._visualization.rectangle.width}getParsedTileTypes(){return this._visualization.parsedTileMap.parsedTileTypes}addRoomObject(t){this._roomObjectContainer.addRoomObject(t)}removeRoomObject(t){this._roomObjectContainer.removeRoomObject(t)}getPosition(t,e,i){return this._visualization.getScreenPosition(t,e,i)}getTileAtPosition(t,e){const{x:i,y:n}=this._getObjectPositionWithOffset(t,e),o=this._visualization.parsedTileMap.parsedTileTypes[n];if(o!=null&&o[i]!=null)return o[i]}destroy(){super.destroy(),this.roomObjects.forEach(t=>this.removeRoomObject(t)),this._visualization.destroy()}_getObjectPositionWithOffset(t,e){return{x:t,y:e}}_loadWallTextures(){Promise.resolve(this.wallTexture).then(t=>{this._currentWallTexture=t,this._visualization.wallTexture=t})}_loadFloorTextures(){Promise.resolve(this.floorTexture).then(t=>{this._visualization.floorTexture=t})}_updateWallColor(){const t=vg.getWallColors(this._getWallColor());this._visualization.wallLeftColor=t.rightTint,this._visualization.wallRightColor=t.leftTint,this._visualization.wallTopColor=t.topTint}_updateTileColor(){if(this._floorColor!=null){const t=vg.getTileColors(this._floorColor);this._visualization.tileTopColor=t.tileTint,this._visualization.tileLeftColor=t.borderRightTint,this._visualization.tileRightColor=t.borderLeftTint}else this._visualization.tileTopColor=void 0,this._visualization.tileLeftColor=void 0,this._visualization.tileRightColor=void 0}_getWallColor(){var t;return this.wallColor==null&&this._currentWallTexture!=null?"#ffffff":this.wallColor==null&&this._currentWallTexture==null?"#b6b8c7":(t=this.wallColor)!==null&&t!==void 0?t:"#ffffff"}}Xs.Room=Ec;var aa={},Pm={exports:{}};(function(r,t){var e=e||function(){var i=[];return{getAll:function(){return i},removeAll:function(){i=[]},add:function(n){i.push(n)},remove:function(n){var o=i.indexOf(n);o!==-1&&i.splice(o,1)},update:function(n,o){if(i.length===0)return!1;var s=0;for(n=n!==void 0?n:e.now();s<i.length;)i[s].update(n)||o?s++:i.splice(s,1);return!0}}}();typeof window>"u"&&typeof process<"u"?e.now=function(){var i=process.hrtime();return i[0]*1e3+i[1]/1e6}:typeof window<"u"&&window.performance!==void 0&&window.performance.now!==void 0?e.now=window.performance.now.bind(window.performance):Date.now!==void 0?e.now=Date.now:e.now=function(){return new Date().getTime()},e.Tween=function(i){var n=i,o={},s={},a={},l=1e3,c=0,d,g=!1,u=!1,h=0,f=null,I=e.Easing.Linear.None,m=e.Interpolation.Linear,y=[],v=null,p=!1,_=null,A=null,b=null;this.to=function(P,E){return s=P,E!==void 0&&(l=E),this},this.start=function(P){e.add(this),u=!0,p=!1,f=P!==void 0?P:e.now(),f+=h;for(var E in s){if(s[E]instanceof Array){if(s[E].length===0)continue;s[E]=[n[E]].concat(s[E])}n[E]!==void 0&&(o[E]=n[E],o[E]instanceof Array||(o[E]*=1),a[E]=o[E]||0)}return this},this.stop=function(){return u?(e.remove(this),u=!1,b!==null&&b.call(n,n),this.stopChainedTweens(),this):this},this.end=function(){return this.update(f+l),this},this.stopChainedTweens=function(){for(var P=0,E=y.length;P<E;P++)y[P].stop()},this.delay=function(P){return h=P,this},this.repeat=function(P){return c=P,this},this.repeatDelay=function(P){return d=P,this},this.yoyo=function(P){return g=P,this},this.easing=function(P){return I=P,this},this.interpolation=function(P){return m=P,this},this.chain=function(){return y=arguments,this},this.onStart=function(P){return v=P,this},this.onUpdate=function(P){return _=P,this},this.onComplete=function(P){return A=P,this},this.onStop=function(P){return b=P,this},this.update=function(P){var E,C,x;if(P<f)return!0;p===!1&&(v!==null&&v.call(n,n),p=!0),C=(P-f)/l,C=C>1?1:C,x=I(C);for(E in s)if(o[E]!==void 0){var F=o[E]||0,R=s[E];R instanceof Array?n[E]=m(R,x):(typeof R=="string"&&(R.charAt(0)==="+"||R.charAt(0)==="-"?R=F+parseFloat(R):R=parseFloat(R)),typeof R=="number"&&(n[E]=F+(R-F)*x))}if(_!==null&&_.call(n,x),C===1)if(c>0){isFinite(c)&&c--;for(E in a){if(typeof s[E]=="string"&&(a[E]=a[E]+parseFloat(s[E])),g){var Z=a[E];a[E]=s[E],s[E]=Z}o[E]=a[E]}return d!==void 0?f=P+d:f=P+h,!0}else{A!==null&&A.call(n,n);for(var H=0,W=y.length;H<W;H++)y[H].start(f+l);return!1}return!0}},e.Easing={Linear:{None:function(i){return i}},Quadratic:{In:function(i){return i*i},Out:function(i){return i*(2-i)},InOut:function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)}},Cubic:{In:function(i){return i*i*i},Out:function(i){return--i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)}},Quartic:{In:function(i){return i*i*i*i},Out:function(i){return 1- --i*i*i*i},InOut:function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)}},Quintic:{In:function(i){return i*i*i*i*i},Out:function(i){return--i*i*i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)}},Sinusoidal:{In:function(i){return 1-Math.cos(i*Math.PI/2)},Out:function(i){return Math.sin(i*Math.PI/2)},InOut:function(i){return .5*(1-Math.cos(Math.PI*i))}},Exponential:{In:function(i){return i===0?0:Math.pow(1024,i-1)},Out:function(i){return i===1?1:1-Math.pow(2,-10*i)},InOut:function(i){return i===0?0:i===1?1:(i*=2)<1?.5*Math.pow(1024,i-1):.5*(-Math.pow(2,-10*(i-1))+2)}},Circular:{In:function(i){return 1-Math.sqrt(1-i*i)},Out:function(i){return Math.sqrt(1- --i*i)},InOut:function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)}},Elastic:{In:function(i){return i===0?0:i===1?1:-Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI)},Out:function(i){return i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((i-.1)*5*Math.PI)+1},InOut:function(i){return i===0?0:i===1?1:(i*=2,i<1?-.5*Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI):.5*Math.pow(2,-10*(i-1))*Math.sin((i-1.1)*5*Math.PI)+1)}},Back:{In:function(i){var n=1.70158;return i*i*((n+1)*i-n)},Out:function(i){var n=1.70158;return--i*i*((n+1)*i+n)+1},InOut:function(i){var n=2.5949095;return(i*=2)<1?.5*(i*i*((n+1)*i-n)):.5*((i-=2)*i*((n+1)*i+n)+2)}},Bounce:{In:function(i){return 1-e.Easing.Bounce.Out(1-i)},Out:function(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},InOut:function(i){return i<.5?e.Easing.Bounce.In(i*2)*.5:e.Easing.Bounce.Out(i*2-1)*.5+.5}}},e.Interpolation={Linear:function(i,n){var o=i.length-1,s=o*n,a=Math.floor(s),l=e.Interpolation.Utils.Linear;return n<0?l(i[0],i[1],s):n>1?l(i[o],i[o-1],o-s):l(i[a],i[a+1>o?o:a+1],s-a)},Bezier:function(i,n){for(var o=0,s=i.length-1,a=Math.pow,l=e.Interpolation.Utils.Bernstein,c=0;c<=s;c++)o+=a(1-n,s-c)*a(n,c)*i[c]*l(s,c);return o},CatmullRom:function(i,n){var o=i.length-1,s=o*n,a=Math.floor(s),l=e.Interpolation.Utils.CatmullRom;return i[0]===i[o]?(n<0&&(a=Math.floor(s=o*(1+n))),l(i[(a-1+o)%o],i[a],i[(a+1)%o],i[(a+2)%o],s-a)):n<0?i[0]-(l(i[0],i[0],i[1],i[1],-s)-i[0]):n>1?i[o]-(l(i[o],i[o],i[o-1],i[o-1],s-o)-i[o]):l(i[a?a-1:0],i[a],i[o<a+1?o:a+1],i[o<a+2?o:a+2],s-a)},Utils:{Linear:function(i,n,o){return(n-i)*o+i},Bernstein:function(i,n){var o=e.Interpolation.Utils.Factorial;return o(i)/o(n)/o(i-n)},Factorial:function(){var i=[1];return function(n){var o=1;if(i[n])return i[n];for(var s=n;s>1;s--)o*=s;return i[n]=o,o}}(),CatmullRom:function(i,n,o,s,a){var l=(o-i)*.5,c=(s-n)*.5,d=a*a,g=a*d;return(2*n-2*o+l+c)*g+(-3*n+3*o-2*l-c)*d+l*a+n}}},function(i){r.exports=e}()})(Pm);var v1=Pm.exports,m1=k&&k.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),y1=k&&k.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),_1=k&&k.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&m1(t,r,e);return y1(t,r),t};Object.defineProperty(aa,"__esModule",{value:!0});aa.RoomCamera=void 0;const No=_1(Zt),Vu=v1;class Fc extends No.Container{constructor(t,e,i){var n,o;super(),this._room=t,this._parentBounds=e,this._options=i,this._state={type:"WAITING"},this._offsets={x:0,y:0},this._animatedOffsets={x:0,y:0},this._handlePointerUp=l=>{if(this._state.type==="WAITING"||this._state.type==="ANIMATE_ZERO"||this._state.pointerId!==l.pointerId)return;let c=!1;this._state.type==="DRAGGING"&&(c=this._stopDragging(this._state)),c||this._resetDrag()},this._handlePointerDown=l=>{const c=l.data.getLocalPosition(this.parent);this._state.type==="WAITING"?this._enterWaitingForDistance(c,l.data.pointerId):this._state.type==="ANIMATE_ZERO"&&this._changingDragWhileAnimating(c,l.data.pointerId)},this._handlePointerMove=l=>{const c=this._room.application.view.getBoundingClientRect(),d=new No.Point(l.clientX-c.x-this.parent.worldTransform.tx,l.clientY-c.y-this.parent.worldTransform.tx);switch(this._state.type){case"WAIT_FOR_DISTANCE":{this._tryUpgradeWaitForDistance(this._state,d,l.pointerId);break}case"DRAGGING":{this._updateDragging(this._state,d,l.pointerId);break}}};const s=(o=(n=this._options)===null||n===void 0?void 0:n.target)!==null&&o!==void 0?o:window;this._target=s,this._parentContainer=new No.Container,this._parentContainer.hitArea=this._parentBounds(),this._parentContainer.interactive=!0,this._container=new No.Container,this._container.addChild(this._room),this._parentContainer.addChild(this._container),this.addChild(this._parentContainer),this._parentContainer.addListener("pointerdown",this._handlePointerDown),this._target.addEventListener("pointermove",this._handlePointerMove),this._target.addEventListener("pointerup",this._handlePointerUp);let a;this._room.application.ticker.add(()=>{a==null&&(a=performance.now());const l=performance.now()-a;Vu.update(l)})}static forScreen(t,e){return new Fc(t,()=>t.application.screen,e)}destroy(){this._parentContainer.removeListener("pointerdown",this._handlePointerDown),this._target.removeEventListener("pointermove",this._handlePointerMove),this._target.removeEventListener("pointerup",this._handlePointerUp)}_updatePosition(){switch(this._state.type){case"DRAGGING":{const t=this._state.currentX-this._state.startX,e=this._state.currentY-this._state.startY;this._container.x=this._offsets.x+t,this._container.y=this._offsets.y+e;break}case"ANIMATE_ZERO":{this._container.x=this._animatedOffsets.x,this._container.y=this._animatedOffsets.y;break}default:this._container.x=this._offsets.x,this._container.y=this._offsets.y}}_isOutOfBounds(t){const e=this.parent.transform.position.x+this._room.x,i=this.parent.transform.position.y+this._room.y;return e+this._room.roomWidth+t.x<=0||e+t.x>=this._parentBounds().width||i+this._room.roomHeight+t.y<=0||i+t.y>=this._parentBounds().height}_returnToZero(t,e){var i,n;this._state={...t,type:"ANIMATE_ZERO"};const o=(n=(i=this._options)===null||i===void 0?void 0:i.duration)!==null&&n!==void 0?n:500;this._animatedOffsets=e,this._offsets={x:0,y:0};const s={...this._animatedOffsets},a=new Vu.Tween(s).to({x:0,y:0},o).easing(Vu.Easing.Quadratic.Out).onUpdate(l=>{this._animatedOffsets=s,l>=1&&(this._state={type:"WAITING"}),this._updatePosition()}).start();this._tween=a,this._updatePosition()}_stopDragging(t){const e=t.currentX-t.startX,i=t.currentY-t.startY,n={x:this._offsets.x+e,y:this._offsets.y+i};return this._isOutOfBounds(n)||t.skipBoundsCheck!=null&&t.skipBoundsCheck?(this._returnToZero(t,n),!0):(this._offsets=n,!1)}_resetDrag(){this._state={type:"WAITING"},this._updatePosition()}_changingDragWhileAnimating(t,e){this._offsets=this._animatedOffsets,this._animatedOffsets={x:0,y:0},this._tween.stop(),this._state={currentX:t.x,currentY:t.y,startX:t.x,startY:t.y,pointerId:e,type:"DRAGGING",skipBoundsCheck:!0},this._updatePosition()}_enterWaitingForDistance(t,e){this._state={type:"WAIT_FOR_DISTANCE",pointerId:e,startX:t.x,startY:t.y}}_tryUpgradeWaitForDistance(t,e,i){if(t.pointerId!==i)return;Math.sqrt((e.x-t.startX)**2+(e.y-t.startY)**2)>=10&&(this._state={currentX:e.x,currentY:e.y,startX:e.x,startY:e.y,pointerId:i,type:"DRAGGING"},this._updatePosition())}_updateDragging(t,e,i){t.pointerId===i&&(this._state={...t,currentX:e.x,currentY:e.y},this._updatePosition())}}aa.RoomCamera=Fc;var ua={},io={},C1=k&&k.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),A1=k&&k.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),b1=k&&k.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&C1(t,r,e);return A1(t,r),t};Object.defineProperty(io,"__esModule",{value:!0});io.applyTextureProperties=void 0;const w1=b1(Zt);function x1(r){r.baseTexture.scaleMode=w1.SCALE_MODES.NEAREST}io.applyTextureProperties=x1;var P1=k&&k.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),S1=k&&k.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),T1=k&&k.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&P1(t,r,e);return S1(t,r),t};Object.defineProperty(ua,"__esModule",{value:!0});ua.loadRoomTexture=void 0;const E1=T1(Zt),F1=io;async function M1(r){const t=new Image;t.crossOrigin="anonymous",t.src=r,await new Promise(i=>{t.onload=()=>{i()}});const e=E1.Texture.from(t);return F1.applyTextureProperties(e),e}ua.loadRoomTexture=M1;var ro={},si={},Ju={},mg;function Mc(){return mg||(mg=1,function(){Ju.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}.call(k)),Ju}var Qu={},Ue={},ze={},yg;function ni(){return yg||(yg=1,function(){var r,t,e,i,n,o,s,a=[].slice,l={}.hasOwnProperty;r=function(){var c,d,g,u,h,f;if(f=arguments[0],h=2<=arguments.length?a.call(arguments,1):[],n(Object.assign))Object.assign.apply(null,arguments);else for(c=0,g=h.length;c<g;c++)if(u=h[c],u!=null)for(d in u)l.call(u,d)&&(f[d]=u[d]);return f},n=function(c){return!!c&&Object.prototype.toString.call(c)==="[object Function]"},o=function(c){var d;return!!c&&((d=typeof c)=="function"||d==="object")},e=function(c){return n(Array.isArray)?Array.isArray(c):Object.prototype.toString.call(c)==="[object Array]"},i=function(c){var d;if(e(c))return!c.length;for(d in c)if(l.call(c,d))return!1;return!0},s=function(c){var d,g;return o(c)&&(g=Object.getPrototypeOf(c))&&(d=g.constructor)&&typeof d=="function"&&d instanceof d&&Function.prototype.toString.call(d)===Function.prototype.toString.call(Object)},t=function(c){return n(c.valueOf)?c.valueOf():c},ze.assign=r,ze.isFunction=n,ze.isObject=o,ze.isArray=e,ze.isEmpty=i,ze.isPlainObject=s,ze.getValue=t}.call(k)),ze}var $u={exports:{}},_g;function Sm(){return _g||(_g=1,function(){$u.exports=function(){function r(){}return r.prototype.hasFeature=function(t,e){return!0},r.prototype.createDocumentType=function(t,e,i){throw new Error("This DOM method is not implemented.")},r.prototype.createDocument=function(t,e,i){throw new Error("This DOM method is not implemented.")},r.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},r.prototype.getFeature=function(t,e){throw new Error("This DOM method is not implemented.")},r}()}.call(k)),$u.exports}var Ku={exports:{}},qu={exports:{}},tl={exports:{}},Cg;function D1(){return Cg||(Cg=1,function(){tl.exports=function(){function r(){}return r.prototype.handleError=function(t){throw new Error(t)},r}()}.call(k)),tl.exports}var el={exports:{}},Ag;function L1(){return Ag||(Ag=1,function(){el.exports=function(){function r(t){this.arr=t||[]}return Object.defineProperty(r.prototype,"length",{get:function(){return this.arr.length}}),r.prototype.item=function(t){return this.arr[t]||null},r.prototype.contains=function(t){return this.arr.indexOf(t)!==-1},r}()}.call(k)),el.exports}var bg;function B1(){return bg||(bg=1,function(){var r,t;r=D1(),t=L1(),qu.exports=function(){function e(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new r,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(e.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),e.prototype.getParameter=function(i){return this.params.hasOwnProperty(i)?this.params[i]:null},e.prototype.canSetParameter=function(i,n){return!0},e.prototype.setParameter=function(i,n){return n!=null?this.params[i]=n:delete this.params[i]},e}()}.call(k)),qu.exports}var il={exports:{}},rl={exports:{}},nl={exports:{}},wg;function Wt(){return wg||(wg=1,function(){nl.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}.call(k)),nl.exports}var ol={exports:{}},xg;function Tm(){return xg||(xg=1,function(){var r;r=Wt(),Pe(),ol.exports=function(){function t(e,i,n){if(this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),i==null)throw new Error("Missing attribute name. "+this.debugInfo(i));this.name=this.stringify.name(i),this.value=this.stringify.attValue(n),this.type=r.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(t.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(t.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(t.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(t.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"specified",{get:function(){return!0}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(e){return this.options.writer.attribute(this,this.options.writer.filterOptions(e))},t.prototype.debugInfo=function(e){return e=e||this.name,e==null?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"},t.prototype.isEqualNode=function(e){return!(e.namespaceURI!==this.namespaceURI||e.prefix!==this.prefix||e.localName!==this.localName||e.value!==this.value)},t}()}.call(k)),ol.exports}var sl={exports:{}},Pg;function Dc(){return Pg||(Pg=1,function(){sl.exports=function(){function r(t){this.nodes=t}return Object.defineProperty(r.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),r.prototype.clone=function(){return this.nodes=null},r.prototype.getNamedItem=function(t){return this.nodes[t]},r.prototype.setNamedItem=function(t){var e;return e=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,e||null},r.prototype.removeNamedItem=function(t){var e;return e=this.nodes[t],delete this.nodes[t],e||null},r.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},r.prototype.getNamedItemNS=function(t,e){throw new Error("This DOM method is not implemented.")},r.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},r.prototype.removeNamedItemNS=function(t,e){throw new Error("This DOM method is not implemented.")},r}()}.call(k)),sl.exports}var Sg;function Lc(){return Sg||(Sg=1,function(){var r,t,e,i,n,o,s,a,l=function(d,g){for(var u in g)c.call(g,u)&&(d[u]=g[u]);function h(){this.constructor=d}return h.prototype=g.prototype,d.prototype=new h,d.__super__=g.prototype,d},c={}.hasOwnProperty;a=ni(),s=a.isObject,o=a.isFunction,n=a.getValue,i=Pe(),r=Wt(),t=Tm(),e=Dc(),rl.exports=function(d){l(g,d);function g(u,h,f){var I,m,y,v;if(g.__super__.constructor.call(this,u),h==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(h),this.type=r.Element,this.attribs={},this.schemaTypeInfo=null,f!=null&&this.attribute(f),u.type===r.Document&&(this.isRoot=!0,this.documentObject=u,u.rootObject=this,u.children)){for(v=u.children,m=0,y=v.length;m<y;m++)if(I=v[m],I.type===r.DocType){I.name=this.name;break}}}return Object.defineProperty(g.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(g.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(g.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(g.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(g.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(g.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(g.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(g.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new e(this.attribs)),this.attributeMap}}),g.prototype.clone=function(){var u,h,f,I;f=Object.create(this),f.isRoot&&(f.documentObject=null),f.attribs={},I=this.attribs;for(h in I)c.call(I,h)&&(u=I[h],f.attribs[h]=u.clone());return f.children=[],this.children.forEach(function(m){var y;return y=m.clone(),y.parent=f,f.children.push(y)}),f},g.prototype.attribute=function(u,h){var f,I;if(u!=null&&(u=n(u)),s(u))for(f in u)c.call(u,f)&&(I=u[f],this.attribute(f,I));else o(h)&&(h=h.apply()),this.options.keepNullAttributes&&h==null?this.attribs[u]=new t(this,u,""):h!=null&&(this.attribs[u]=new t(this,u,h));return this},g.prototype.removeAttribute=function(u){var h,f,I;if(u==null)throw new Error("Missing attribute name. "+this.debugInfo());if(u=n(u),Array.isArray(u))for(f=0,I=u.length;f<I;f++)h=u[f],delete this.attribs[h];else delete this.attribs[u];return this},g.prototype.toString=function(u){return this.options.writer.element(this,this.options.writer.filterOptions(u))},g.prototype.att=function(u,h){return this.attribute(u,h)},g.prototype.a=function(u,h){return this.attribute(u,h)},g.prototype.getAttribute=function(u){return this.attribs.hasOwnProperty(u)?this.attribs[u].value:null},g.prototype.setAttribute=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getAttributeNode=function(u){return this.attribs.hasOwnProperty(u)?this.attribs[u]:null},g.prototype.setAttributeNode=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.removeAttributeNode=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagName=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getAttributeNS=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setAttributeNS=function(u,h,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.removeAttributeNS=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getAttributeNodeNS=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setAttributeNodeNS=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagNameNS=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.hasAttribute=function(u){return this.attribs.hasOwnProperty(u)},g.prototype.hasAttributeNS=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setIdAttribute=function(u,h){return this.attribs.hasOwnProperty(u)?this.attribs[u].isId:h},g.prototype.setIdAttributeNS=function(u,h,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setIdAttributeNode=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagName=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagNameNS=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByClassName=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.isEqualNode=function(u){var h,f,I;if(!g.__super__.isEqualNode.apply(this,arguments).isEqualNode(u)||u.namespaceURI!==this.namespaceURI||u.prefix!==this.prefix||u.localName!==this.localName||u.attribs.length!==this.attribs.length)return!1;for(h=f=0,I=this.attribs.length-1;0<=I?f<=I:f>=I;h=0<=I?++f:--f)if(!this.attribs[h].isEqualNode(u.attribs[h]))return!1;return!0},g}(i)}.call(k)),rl.exports}var al={exports:{}},ul={exports:{}},Tg;function la(){return Tg||(Tg=1,function(){var r,t=function(i,n){for(var o in n)e.call(n,o)&&(i[o]=n[o]);function s(){this.constructor=i}return s.prototype=n.prototype,i.prototype=new s,i.__super__=n.prototype,i},e={}.hasOwnProperty;r=Pe(),ul.exports=function(i){t(n,i);function n(o){n.__super__.constructor.call(this,o),this.value=""}return Object.defineProperty(n.prototype,"data",{get:function(){return this.value},set:function(o){return this.value=o||""}}),Object.defineProperty(n.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(n.prototype,"textContent",{get:function(){return this.value},set:function(o){return this.value=o||""}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.substringData=function(o,s){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.appendData=function(o){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.insertData=function(o,s){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.deleteData=function(o,s){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.replaceData=function(o,s,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.isEqualNode=function(o){return!(!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(o)||o.data!==this.data)},n}(r)}.call(k)),ul.exports}var Eg;function Bc(){return Eg||(Eg=1,function(){var r,t,e=function(n,o){for(var s in o)i.call(o,s)&&(n[s]=o[s]);function a(){this.constructor=n}return a.prototype=o.prototype,n.prototype=new a,n.__super__=o.prototype,n},i={}.hasOwnProperty;r=Wt(),t=la(),al.exports=function(n){e(o,n);function o(s,a){if(o.__super__.constructor.call(this,s),a==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=r.CData,this.value=this.stringify.cdata(a)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(s){return this.options.writer.cdata(this,this.options.writer.filterOptions(s))},o}(t)}.call(k)),al.exports}var ll={exports:{}},Fg;function Rc(){return Fg||(Fg=1,function(){var r,t,e=function(n,o){for(var s in o)i.call(o,s)&&(n[s]=o[s]);function a(){this.constructor=n}return a.prototype=o.prototype,n.prototype=new a,n.__super__=o.prototype,n},i={}.hasOwnProperty;r=Wt(),t=la(),ll.exports=function(n){e(o,n);function o(s,a){if(o.__super__.constructor.call(this,s),a==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=r.Comment,this.value=this.stringify.comment(a)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(s){return this.options.writer.comment(this,this.options.writer.filterOptions(s))},o}(t)}.call(k)),ll.exports}var hl={exports:{}},Mg;function Oc(){return Mg||(Mg=1,function(){var r,t,e,i=function(o,s){for(var a in s)n.call(s,a)&&(o[a]=s[a]);function l(){this.constructor=o}return l.prototype=s.prototype,o.prototype=new l,o.__super__=s.prototype,o},n={}.hasOwnProperty;e=ni().isObject,t=Pe(),r=Wt(),hl.exports=function(o){i(s,o);function s(a,l,c,d){var g;s.__super__.constructor.call(this,a),e(l)&&(g=l,l=g.version,c=g.encoding,d=g.standalone),l||(l="1.0"),this.type=r.Declaration,this.version=this.stringify.xmlVersion(l),c!=null&&(this.encoding=this.stringify.xmlEncoding(c)),d!=null&&(this.standalone=this.stringify.xmlStandalone(d))}return s.prototype.toString=function(a){return this.options.writer.declaration(this,this.options.writer.filterOptions(a))},s}(t)}.call(k)),hl.exports}var cl={exports:{}},fl={exports:{}},Dg;function Zc(){return Dg||(Dg=1,function(){var r,t,e=function(n,o){for(var s in o)i.call(o,s)&&(n[s]=o[s]);function a(){this.constructor=n}return a.prototype=o.prototype,n.prototype=new a,n.__super__=o.prototype,n},i={}.hasOwnProperty;t=Pe(),r=Wt(),fl.exports=function(n){e(o,n);function o(s,a,l,c,d,g){if(o.__super__.constructor.call(this,s),a==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(l==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(a));if(!c)throw new Error("Missing DTD attribute type. "+this.debugInfo(a));if(!d)throw new Error("Missing DTD attribute default. "+this.debugInfo(a));if(d.indexOf("#")!==0&&(d="#"+d),!d.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(a));if(g&&!d.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(a));this.elementName=this.stringify.name(a),this.type=r.AttributeDeclaration,this.attributeName=this.stringify.name(l),this.attributeType=this.stringify.dtdAttType(c),g&&(this.defaultValue=this.stringify.dtdAttDefault(g)),this.defaultValueType=d}return o.prototype.toString=function(s){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(s))},o}(t)}.call(k)),fl.exports}var dl={exports:{}},Lg;function Gc(){return Lg||(Lg=1,function(){var r,t,e,i=function(o,s){for(var a in s)n.call(s,a)&&(o[a]=s[a]);function l(){this.constructor=o}return l.prototype=s.prototype,o.prototype=new l,o.__super__=s.prototype,o},n={}.hasOwnProperty;e=ni().isObject,t=Pe(),r=Wt(),dl.exports=function(o){i(s,o);function s(a,l,c,d){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD entity name. "+this.debugInfo(c));if(d==null)throw new Error("Missing DTD entity value. "+this.debugInfo(c));if(this.pe=!!l,this.name=this.stringify.name(c),this.type=r.EntityDeclaration,!e(d))this.value=this.stringify.dtdEntityValue(d),this.internal=!0;else{if(!d.pubID&&!d.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(c));if(d.pubID&&!d.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(c));if(this.internal=!1,d.pubID!=null&&(this.pubID=this.stringify.dtdPubID(d.pubID)),d.sysID!=null&&(this.sysID=this.stringify.dtdSysID(d.sysID)),d.nData!=null&&(this.nData=this.stringify.dtdNData(d.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(c))}}return Object.defineProperty(s.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(s.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(s.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(s.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(s.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(s.prototype,"xmlVersion",{get:function(){return null}}),s.prototype.toString=function(a){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(a))},s}(t)}.call(k)),dl.exports}var gl={exports:{}},Bg;function Nc(){return Bg||(Bg=1,function(){var r,t,e=function(n,o){for(var s in o)i.call(o,s)&&(n[s]=o[s]);function a(){this.constructor=n}return a.prototype=o.prototype,n.prototype=new a,n.__super__=o.prototype,n},i={}.hasOwnProperty;t=Pe(),r=Wt(),gl.exports=function(n){e(o,n);function o(s,a,l){if(o.__super__.constructor.call(this,s),a==null)throw new Error("Missing DTD element name. "+this.debugInfo());l||(l="(#PCDATA)"),Array.isArray(l)&&(l="("+l.join(",")+")"),this.name=this.stringify.name(a),this.type=r.ElementDeclaration,this.value=this.stringify.dtdElementValue(l)}return o.prototype.toString=function(s){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(s))},o}(t)}.call(k)),gl.exports}var pl={exports:{}},Rg;function jc(){return Rg||(Rg=1,function(){var r,t,e=function(n,o){for(var s in o)i.call(o,s)&&(n[s]=o[s]);function a(){this.constructor=n}return a.prototype=o.prototype,n.prototype=new a,n.__super__=o.prototype,n},i={}.hasOwnProperty;t=Pe(),r=Wt(),pl.exports=function(n){e(o,n);function o(s,a,l){if(o.__super__.constructor.call(this,s),a==null)throw new Error("Missing DTD notation name. "+this.debugInfo(a));if(!l.pubID&&!l.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(a));this.name=this.stringify.name(a),this.type=r.NotationDeclaration,l.pubID!=null&&(this.pubID=this.stringify.dtdPubID(l.pubID)),l.sysID!=null&&(this.sysID=this.stringify.dtdSysID(l.sysID))}return Object.defineProperty(o.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(o.prototype,"systemId",{get:function(){return this.sysID}}),o.prototype.toString=function(s){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(s))},o}(t)}.call(k)),pl.exports}var Og;function kc(){return Og||(Og=1,function(){var r,t,e,i,n,o,s,a,l=function(d,g){for(var u in g)c.call(g,u)&&(d[u]=g[u]);function h(){this.constructor=d}return h.prototype=g.prototype,d.prototype=new h,d.__super__=g.prototype,d},c={}.hasOwnProperty;a=ni().isObject,s=Pe(),r=Wt(),t=Zc(),i=Gc(),e=Nc(),n=jc(),o=Dc(),cl.exports=function(d){l(g,d);function g(u,h,f){var I,m,y,v,p,_;if(g.__super__.constructor.call(this,u),this.type=r.DocType,u.children){for(v=u.children,m=0,y=v.length;m<y;m++)if(I=v[m],I.type===r.Element){this.name=I.name;break}}this.documentObject=u,a(h)&&(p=h,h=p.pubID,f=p.sysID),f==null&&(_=[h,f],f=_[0],h=_[1]),h!=null&&(this.pubID=this.stringify.dtdPubID(h)),f!=null&&(this.sysID=this.stringify.dtdSysID(f))}return Object.defineProperty(g.prototype,"entities",{get:function(){var u,h,f,I,m;for(I={},m=this.children,h=0,f=m.length;h<f;h++)u=m[h],u.type===r.EntityDeclaration&&!u.pe&&(I[u.name]=u);return new o(I)}}),Object.defineProperty(g.prototype,"notations",{get:function(){var u,h,f,I,m;for(I={},m=this.children,h=0,f=m.length;h<f;h++)u=m[h],u.type===r.NotationDeclaration&&(I[u.name]=u);return new o(I)}}),Object.defineProperty(g.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(g.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(g.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),g.prototype.element=function(u,h){var f;return f=new e(this,u,h),this.children.push(f),this},g.prototype.attList=function(u,h,f,I,m){var y;return y=new t(this,u,h,f,I,m),this.children.push(y),this},g.prototype.entity=function(u,h){var f;return f=new i(this,!1,u,h),this.children.push(f),this},g.prototype.pEntity=function(u,h){var f;return f=new i(this,!0,u,h),this.children.push(f),this},g.prototype.notation=function(u,h){var f;return f=new n(this,u,h),this.children.push(f),this},g.prototype.toString=function(u){return this.options.writer.docType(this,this.options.writer.filterOptions(u))},g.prototype.ele=function(u,h){return this.element(u,h)},g.prototype.att=function(u,h,f,I,m){return this.attList(u,h,f,I,m)},g.prototype.ent=function(u,h){return this.entity(u,h)},g.prototype.pent=function(u,h){return this.pEntity(u,h)},g.prototype.not=function(u,h){return this.notation(u,h)},g.prototype.up=function(){return this.root()||this.documentObject},g.prototype.isEqualNode=function(u){return!(!g.__super__.isEqualNode.apply(this,arguments).isEqualNode(u)||u.name!==this.name||u.publicId!==this.publicId||u.systemId!==this.systemId)},g}(s)}.call(k)),cl.exports}var Il={exports:{}},Zg;function Wc(){return Zg||(Zg=1,function(){var r,t,e=function(n,o){for(var s in o)i.call(o,s)&&(n[s]=o[s]);function a(){this.constructor=n}return a.prototype=o.prototype,n.prototype=new a,n.__super__=o.prototype,n},i={}.hasOwnProperty;r=Wt(),t=Pe(),Il.exports=function(n){e(o,n);function o(s,a){if(o.__super__.constructor.call(this,s),a==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=r.Raw,this.value=this.stringify.raw(a)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(s){return this.options.writer.raw(this,this.options.writer.filterOptions(s))},o}(t)}.call(k)),Il.exports}var vl={exports:{}},Gg;function Xc(){return Gg||(Gg=1,function(){var r,t,e=function(n,o){for(var s in o)i.call(o,s)&&(n[s]=o[s]);function a(){this.constructor=n}return a.prototype=o.prototype,n.prototype=new a,n.__super__=o.prototype,n},i={}.hasOwnProperty;r=Wt(),t=la(),vl.exports=function(n){e(o,n);function o(s,a){if(o.__super__.constructor.call(this,s),a==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=r.Text,this.value=this.stringify.text(a)}return Object.defineProperty(o.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(o.prototype,"wholeText",{get:function(){var s,a,l;for(l="",a=this.previousSibling;a;)l=a.data+l,a=a.previousSibling;for(l+=this.data,s=this.nextSibling;s;)l=l+s.data,s=s.nextSibling;return l}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(s){return this.options.writer.text(this,this.options.writer.filterOptions(s))},o.prototype.splitText=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.replaceWholeText=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},o}(t)}.call(k)),vl.exports}var ml={exports:{}},Ng;function Hc(){return Ng||(Ng=1,function(){var r,t,e=function(n,o){for(var s in o)i.call(o,s)&&(n[s]=o[s]);function a(){this.constructor=n}return a.prototype=o.prototype,n.prototype=new a,n.__super__=o.prototype,n},i={}.hasOwnProperty;r=Wt(),t=la(),ml.exports=function(n){e(o,n);function o(s,a,l){if(o.__super__.constructor.call(this,s),a==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=r.ProcessingInstruction,this.target=this.stringify.insTarget(a),this.name=this.target,l&&(this.value=this.stringify.insValue(l))}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(s){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(s))},o.prototype.isEqualNode=function(s){return!(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(s)||s.target!==this.target)},o}(t)}.call(k)),ml.exports}var yl={exports:{}},jg;function Em(){return jg||(jg=1,function(){var r,t,e=function(n,o){for(var s in o)i.call(o,s)&&(n[s]=o[s]);function a(){this.constructor=n}return a.prototype=o.prototype,n.prototype=new a,n.__super__=o.prototype,n},i={}.hasOwnProperty;t=Pe(),r=Wt(),yl.exports=function(n){e(o,n);function o(s){o.__super__.constructor.call(this,s),this.type=r.Dummy}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(s){return""},o}(t)}.call(k)),yl.exports}var _l={exports:{}},kg;function R1(){return kg||(kg=1,function(){_l.exports=function(){function r(t){this.nodes=t}return Object.defineProperty(r.prototype,"length",{get:function(){return this.nodes.length||0}}),r.prototype.clone=function(){return this.nodes=null},r.prototype.item=function(t){return this.nodes[t]||null},r}()}.call(k)),_l.exports}var Cl={exports:{}},Wg;function O1(){return Wg||(Wg=1,function(){Cl.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}.call(k)),Cl.exports}var Xg;function Pe(){return Xg||(Xg=1,function(){var r,t,e,i,n,o,s,a,l,c,d,g,u,h,f,I,m,y={}.hasOwnProperty;m=ni(),I=m.isObject,f=m.isFunction,h=m.isEmpty,u=m.getValue,a=null,e=null,i=null,n=null,o=null,d=null,g=null,c=null,s=null,t=null,l=null,r=null,il.exports=function(){function v(p){this.parent=p,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,a||(a=Lc(),e=Bc(),i=Rc(),n=Oc(),o=kc(),d=Wc(),g=Xc(),c=Hc(),s=Em(),t=Wt(),l=R1(),Dc(),r=O1())}return Object.defineProperty(v.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(v.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(v.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(v.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(v.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new l(this.children)),this.childNodeList}}),Object.defineProperty(v.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(v.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(v.prototype,"previousSibling",{get:function(){var p;return p=this.parent.children.indexOf(this),this.parent.children[p-1]||null}}),Object.defineProperty(v.prototype,"nextSibling",{get:function(){var p;return p=this.parent.children.indexOf(this),this.parent.children[p+1]||null}}),Object.defineProperty(v.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(v.prototype,"textContent",{get:function(){var p,_,A,b,P;if(this.nodeType===t.Element||this.nodeType===t.DocumentFragment){for(P="",b=this.children,_=0,A=b.length;_<A;_++)p=b[_],p.textContent&&(P+=p.textContent);return P}else return null},set:function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),v.prototype.setParent=function(p){var _,A,b,P,E;for(this.parent=p,p&&(this.options=p.options,this.stringify=p.stringify),P=this.children,E=[],A=0,b=P.length;A<b;A++)_=P[A],E.push(_.setParent(this));return E},v.prototype.element=function(p,_,A){var b,P,E,C,x,F,R,Z,H,W,U;if(F=null,_===null&&A==null&&(H=[{},null],_=H[0],A=H[1]),_==null&&(_={}),_=u(_),I(_)||(W=[_,A],A=W[0],_=W[1]),p!=null&&(p=u(p)),Array.isArray(p))for(E=0,R=p.length;E<R;E++)P=p[E],F=this.element(P);else if(f(p))F=this.element(p.apply());else if(I(p)){for(x in p)if(y.call(p,x))if(U=p[x],f(U)&&(U=U.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&x.indexOf(this.stringify.convertAttKey)===0)F=this.attribute(x.substr(this.stringify.convertAttKey.length),U);else if(!this.options.separateArrayItems&&Array.isArray(U)&&h(U))F=this.dummy();else if(I(U)&&h(U))F=this.element(x);else if(!this.options.keepNullNodes&&U==null)F=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(U))for(C=0,Z=U.length;C<Z;C++)P=U[C],b={},b[x]=P,F=this.element(b);else I(U)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&x.indexOf(this.stringify.convertTextKey)===0?F=this.element(U):(F=this.element(x),F.element(U)):F=this.element(x,U)}else!this.options.keepNullNodes&&A===null?F=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&p.indexOf(this.stringify.convertTextKey)===0?F=this.text(A):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&p.indexOf(this.stringify.convertCDataKey)===0?F=this.cdata(A):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&p.indexOf(this.stringify.convertCommentKey)===0?F=this.comment(A):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&p.indexOf(this.stringify.convertRawKey)===0?F=this.raw(A):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&p.indexOf(this.stringify.convertPIKey)===0?F=this.instruction(p.substr(this.stringify.convertPIKey.length),A):F=this.node(p,_,A);if(F==null)throw new Error("Could not create any elements with: "+p+". "+this.debugInfo());return F},v.prototype.insertBefore=function(p,_,A){var b,P,E,C,x;if(p?.type)return E=p,C=_,E.setParent(this),C?(P=children.indexOf(C),x=children.splice(P),children.push(E),Array.prototype.push.apply(children,x)):children.push(E),E;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(p));return P=this.parent.children.indexOf(this),x=this.parent.children.splice(P),b=this.parent.element(p,_,A),Array.prototype.push.apply(this.parent.children,x),b},v.prototype.insertAfter=function(p,_,A){var b,P,E;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(p));return P=this.parent.children.indexOf(this),E=this.parent.children.splice(P+1),b=this.parent.element(p,_,A),Array.prototype.push.apply(this.parent.children,E),b},v.prototype.remove=function(){var p;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return p=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[p,p-p+1].concat([])),this.parent},v.prototype.node=function(p,_,A){var b,P;return p!=null&&(p=u(p)),_||(_={}),_=u(_),I(_)||(P=[_,A],A=P[0],_=P[1]),b=new a(this,p,_),A!=null&&b.text(A),this.children.push(b),b},v.prototype.text=function(p){var _;return I(p)&&this.element(p),_=new g(this,p),this.children.push(_),this},v.prototype.cdata=function(p){var _;return _=new e(this,p),this.children.push(_),this},v.prototype.comment=function(p){var _;return _=new i(this,p),this.children.push(_),this},v.prototype.commentBefore=function(p){var _,A;return _=this.parent.children.indexOf(this),A=this.parent.children.splice(_),this.parent.comment(p),Array.prototype.push.apply(this.parent.children,A),this},v.prototype.commentAfter=function(p){var _,A;return _=this.parent.children.indexOf(this),A=this.parent.children.splice(_+1),this.parent.comment(p),Array.prototype.push.apply(this.parent.children,A),this},v.prototype.raw=function(p){var _;return _=new d(this,p),this.children.push(_),this},v.prototype.dummy=function(){var p;return p=new s(this),p},v.prototype.instruction=function(p,_){var A,b,P,E,C;if(p!=null&&(p=u(p)),_!=null&&(_=u(_)),Array.isArray(p))for(E=0,C=p.length;E<C;E++)A=p[E],this.instruction(A);else if(I(p))for(A in p)y.call(p,A)&&(b=p[A],this.instruction(A,b));else f(_)&&(_=_.apply()),P=new c(this,p,_),this.children.push(P);return this},v.prototype.instructionBefore=function(p,_){var A,b;return A=this.parent.children.indexOf(this),b=this.parent.children.splice(A),this.parent.instruction(p,_),Array.prototype.push.apply(this.parent.children,b),this},v.prototype.instructionAfter=function(p,_){var A,b;return A=this.parent.children.indexOf(this),b=this.parent.children.splice(A+1),this.parent.instruction(p,_),Array.prototype.push.apply(this.parent.children,b),this},v.prototype.declaration=function(p,_,A){var b,P;return b=this.document(),P=new n(b,p,_,A),b.children.length===0?b.children.unshift(P):b.children[0].type===t.Declaration?b.children[0]=P:b.children.unshift(P),b.root()||b},v.prototype.dtd=function(p,_){var A,b,P,E,C,x,F,R,Z,H;for(b=this.document(),P=new o(b,p,_),Z=b.children,E=C=0,F=Z.length;C<F;E=++C)if(A=Z[E],A.type===t.DocType)return b.children[E]=P,P;for(H=b.children,E=x=0,R=H.length;x<R;E=++x)if(A=H[E],A.isRoot)return b.children.splice(E,0,P),P;return b.children.push(P),P},v.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},v.prototype.root=function(){var p;for(p=this;p;){if(p.type===t.Document)return p.rootObject;if(p.isRoot)return p;p=p.parent}},v.prototype.document=function(){var p;for(p=this;p;){if(p.type===t.Document)return p;p=p.parent}},v.prototype.end=function(p){return this.document().end(p)},v.prototype.prev=function(){var p;if(p=this.parent.children.indexOf(this),p<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[p-1]},v.prototype.next=function(){var p;if(p=this.parent.children.indexOf(this),p===-1||p===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[p+1]},v.prototype.importDocument=function(p){var _;return _=p.root().clone(),_.parent=this,_.isRoot=!1,this.children.push(_),this},v.prototype.debugInfo=function(p){var _,A;return p=p||this.name,p==null&&!((_=this.parent)!=null&&_.name)?"":p==null?"parent: <"+this.parent.name+">":(A=this.parent)!=null&&A.name?"node: <"+p+">, parent: <"+this.parent.name+">":"node: <"+p+">"},v.prototype.ele=function(p,_,A){return this.element(p,_,A)},v.prototype.nod=function(p,_,A){return this.node(p,_,A)},v.prototype.txt=function(p){return this.text(p)},v.prototype.dat=function(p){return this.cdata(p)},v.prototype.com=function(p){return this.comment(p)},v.prototype.ins=function(p,_){return this.instruction(p,_)},v.prototype.doc=function(){return this.document()},v.prototype.dec=function(p,_,A){return this.declaration(p,_,A)},v.prototype.e=function(p,_,A){return this.element(p,_,A)},v.prototype.n=function(p,_,A){return this.node(p,_,A)},v.prototype.t=function(p){return this.text(p)},v.prototype.d=function(p){return this.cdata(p)},v.prototype.c=function(p){return this.comment(p)},v.prototype.r=function(p){return this.raw(p)},v.prototype.i=function(p,_){return this.instruction(p,_)},v.prototype.u=function(){return this.up()},v.prototype.importXMLBuilder=function(p){return this.importDocument(p)},v.prototype.replaceChild=function(p,_){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.removeChild=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.appendChild=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.hasChildNodes=function(){return this.children.length!==0},v.prototype.cloneNode=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.isSupported=function(p,_){return!0},v.prototype.hasAttributes=function(){return this.attribs.length!==0},v.prototype.compareDocumentPosition=function(p){var _,A;return _=this,_===p?0:this.document()!==p.document()?(A=r.Disconnected|r.ImplementationSpecific,Math.random()<.5?A|=r.Preceding:A|=r.Following,A):_.isAncestor(p)?r.Contains|r.Preceding:_.isDescendant(p)?r.Contains|r.Following:_.isPreceding(p)?r.Preceding:r.Following},v.prototype.isSameNode=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.lookupPrefix=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.isDefaultNamespace=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.lookupNamespaceURI=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.isEqualNode=function(p){var _,A,b;if(p.nodeType!==this.nodeType||p.children.length!==this.children.length)return!1;for(_=A=0,b=this.children.length-1;0<=b?A<=b:A>=b;_=0<=b?++A:--A)if(!this.children[_].isEqualNode(p.children[_]))return!1;return!0},v.prototype.getFeature=function(p,_){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.setUserData=function(p,_,A){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.getUserData=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},v.prototype.contains=function(p){return p?p===this||this.isDescendant(p):!1},v.prototype.isDescendant=function(p){var _,A,b,P,E;for(E=this.children,b=0,P=E.length;b<P;b++)if(_=E[b],p===_||(A=_.isDescendant(p),A))return!0;return!1},v.prototype.isAncestor=function(p){return p.isDescendant(this)},v.prototype.isPreceding=function(p){var _,A;return _=this.treePosition(p),A=this.treePosition(this),_===-1||A===-1?!1:_<A},v.prototype.isFollowing=function(p){var _,A;return _=this.treePosition(p),A=this.treePosition(this),_===-1||A===-1?!1:_>A},v.prototype.treePosition=function(p){var _,A;return A=0,_=!1,this.foreachTreeNode(this.document(),function(b){if(A++,!_&&b===p)return _=!0}),_?A:-1},v.prototype.foreachTreeNode=function(p,_){var A,b,P,E,C;for(p||(p=this.document()),E=p.children,b=0,P=E.length;b<P;b++){if(A=E[b],C=_(A))return C;if(C=this.foreachTreeNode(A,_),C)return C}},v}()}.call(k)),il.exports}var Al={exports:{}},Hg;function Fm(){return Hg||(Hg=1,function(){var r=function(e,i){return function(){return e.apply(i,arguments)}},t={}.hasOwnProperty;Al.exports=function(){function e(i){this.assertLegalName=r(this.assertLegalName,this),this.assertLegalChar=r(this.assertLegalChar,this);var n,o,s;i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),o=i.stringify||{};for(n in o)t.call(o,n)&&(s=o[n],this[n]=s)}return e.prototype.name=function(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")},e.prototype.text=function(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))},e.prototype.cdata=function(i){return this.options.noValidation?i:(i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))},e.prototype.comment=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},e.prototype.raw=function(i){return this.options.noValidation?i:""+i||""},e.prototype.attValue=function(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))},e.prototype.insTarget=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},e.prototype.insValue=function(i){if(this.options.noValidation)return i;if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)},e.prototype.xmlVersion=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},e.prototype.xmlEncoding=function(i){if(this.options.noValidation)return i;if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)},e.prototype.xmlStandalone=function(i){return this.options.noValidation?i:i?"yes":"no"},e.prototype.dtdPubID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},e.prototype.dtdSysID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},e.prototype.dtdElementValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},e.prototype.dtdAttType=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},e.prototype.dtdAttDefault=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},e.prototype.dtdEntityValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},e.prototype.dtdNData=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},e.prototype.convertAttKey="@",e.prototype.convertPIKey="?",e.prototype.convertTextKey="#text",e.prototype.convertCDataKey="#cdata",e.prototype.convertCommentKey="#comment",e.prototype.convertRawKey="#raw",e.prototype.assertLegalChar=function(i){var n,o;if(this.options.noValidation)return i;if(n="",this.options.version==="1.0"){if(n=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,o=i.match(n))throw new Error("Invalid character in string: "+i+" at index "+o.index)}else if(this.options.version==="1.1"&&(n=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,o=i.match(n)))throw new Error("Invalid character in string: "+i+" at index "+o.index);return i},e.prototype.assertLegalName=function(i){var n;if(this.options.noValidation)return i;if(this.assertLegalChar(i),n=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(n))throw new Error("Invalid character in name");return i},e.prototype.textEscape=function(i){var n;return this.options.noValidation?i:(n=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(n,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},e.prototype.attEscape=function(i){var n;return this.options.noValidation?i:(n=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(n,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},e}()}.call(k)),Al.exports}var bl={exports:{}},wl={exports:{}},xl={exports:{}},Yg;function ha(){return Yg||(Yg=1,function(){xl.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}.call(k)),xl.exports}var Ug;function Mm(){return Ug||(Ug=1,function(){var r,t,e,i={}.hasOwnProperty;e=ni().assign,r=Wt(),Oc(),kc(),Bc(),Rc(),Lc(),Wc(),Xc(),Hc(),Em(),Zc(),Nc(),Gc(),jc(),t=ha(),wl.exports=function(){function n(o){var s,a,l;o||(o={}),this.options=o,a=o.writer||{};for(s in a)i.call(a,s)&&(l=a[s],this["_"+s]=this[s],this[s]=l)}return n.prototype.filterOptions=function(o){var s,a,l,c,d,g,u,h;return o||(o={}),o=e({},this.options,o),s={writer:this},s.pretty=o.pretty||!1,s.allowEmpty=o.allowEmpty||!1,s.indent=(a=o.indent)!=null?a:"  ",s.newline=(l=o.newline)!=null?l:`
`,s.offset=(c=o.offset)!=null?c:0,s.dontPrettyTextNodes=(d=(g=o.dontPrettyTextNodes)!=null?g:o.dontprettytextnodes)!=null?d:0,s.spaceBeforeSlash=(u=(h=o.spaceBeforeSlash)!=null?h:o.spacebeforeslash)!=null?u:"",s.spaceBeforeSlash===!0&&(s.spaceBeforeSlash=" "),s.suppressPrettyCount=0,s.user={},s.state=t.None,s},n.prototype.indent=function(o,s,a){var l;return!s.pretty||s.suppressPrettyCount?"":s.pretty&&(l=(a||0)+s.offset+1,l>0)?new Array(l).join(s.indent):""},n.prototype.endline=function(o,s,a){return!s.pretty||s.suppressPrettyCount?"":s.newline},n.prototype.attribute=function(o,s,a){var l;return this.openAttribute(o,s,a),l=" "+o.name+'="'+o.value+'"',this.closeAttribute(o,s,a),l},n.prototype.cdata=function(o,s,a){var l;return this.openNode(o,s,a),s.state=t.OpenTag,l=this.indent(o,s,a)+"<![CDATA[",s.state=t.InsideTag,l+=o.value,s.state=t.CloseTag,l+="]]>"+this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),l},n.prototype.comment=function(o,s,a){var l;return this.openNode(o,s,a),s.state=t.OpenTag,l=this.indent(o,s,a)+"<!-- ",s.state=t.InsideTag,l+=o.value,s.state=t.CloseTag,l+=" -->"+this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),l},n.prototype.declaration=function(o,s,a){var l;return this.openNode(o,s,a),s.state=t.OpenTag,l=this.indent(o,s,a)+"<?xml",s.state=t.InsideTag,l+=' version="'+o.version+'"',o.encoding!=null&&(l+=' encoding="'+o.encoding+'"'),o.standalone!=null&&(l+=' standalone="'+o.standalone+'"'),s.state=t.CloseTag,l+=s.spaceBeforeSlash+"?>",l+=this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),l},n.prototype.docType=function(o,s,a){var l,c,d,g,u;if(a||(a=0),this.openNode(o,s,a),s.state=t.OpenTag,g=this.indent(o,s,a),g+="<!DOCTYPE "+o.root().name,o.pubID&&o.sysID?g+=' PUBLIC "'+o.pubID+'" "'+o.sysID+'"':o.sysID&&(g+=' SYSTEM "'+o.sysID+'"'),o.children.length>0){for(g+=" [",g+=this.endline(o,s,a),s.state=t.InsideTag,u=o.children,c=0,d=u.length;c<d;c++)l=u[c],g+=this.writeChildNode(l,s,a+1);s.state=t.CloseTag,g+="]"}return s.state=t.CloseTag,g+=s.spaceBeforeSlash+">",g+=this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),g},n.prototype.element=function(o,s,a){var l,c,d,g,u,h,f,I,m,y,v,p,_,A;a||(a=0),y=!1,v="",this.openNode(o,s,a),s.state=t.OpenTag,v+=this.indent(o,s,a)+"<"+o.name,p=o.attribs;for(m in p)i.call(p,m)&&(l=p[m],v+=this.attribute(l,s,a));if(d=o.children.length,g=d===0?null:o.children[0],d===0||o.children.every(function(b){return(b.type===r.Text||b.type===r.Raw)&&b.value===""}))s.allowEmpty?(v+=">",s.state=t.CloseTag,v+="</"+o.name+">"+this.endline(o,s,a)):(s.state=t.CloseTag,v+=s.spaceBeforeSlash+"/>"+this.endline(o,s,a));else if(s.pretty&&d===1&&(g.type===r.Text||g.type===r.Raw)&&g.value!=null)v+=">",s.state=t.InsideTag,s.suppressPrettyCount++,y=!0,v+=this.writeChildNode(g,s,a+1),s.suppressPrettyCount--,y=!1,s.state=t.CloseTag,v+="</"+o.name+">"+this.endline(o,s,a);else{if(s.dontPrettyTextNodes){for(_=o.children,u=0,f=_.length;u<f;u++)if(c=_[u],(c.type===r.Text||c.type===r.Raw)&&c.value!=null){s.suppressPrettyCount++,y=!0;break}}for(v+=">"+this.endline(o,s,a),s.state=t.InsideTag,A=o.children,h=0,I=A.length;h<I;h++)c=A[h],v+=this.writeChildNode(c,s,a+1);s.state=t.CloseTag,v+=this.indent(o,s,a)+"</"+o.name+">",y&&s.suppressPrettyCount--,v+=this.endline(o,s,a),s.state=t.None}return this.closeNode(o,s,a),v},n.prototype.writeChildNode=function(o,s,a){switch(o.type){case r.CData:return this.cdata(o,s,a);case r.Comment:return this.comment(o,s,a);case r.Element:return this.element(o,s,a);case r.Raw:return this.raw(o,s,a);case r.Text:return this.text(o,s,a);case r.ProcessingInstruction:return this.processingInstruction(o,s,a);case r.Dummy:return"";case r.Declaration:return this.declaration(o,s,a);case r.DocType:return this.docType(o,s,a);case r.AttributeDeclaration:return this.dtdAttList(o,s,a);case r.ElementDeclaration:return this.dtdElement(o,s,a);case r.EntityDeclaration:return this.dtdEntity(o,s,a);case r.NotationDeclaration:return this.dtdNotation(o,s,a);default:throw new Error("Unknown XML node type: "+o.constructor.name)}},n.prototype.processingInstruction=function(o,s,a){var l;return this.openNode(o,s,a),s.state=t.OpenTag,l=this.indent(o,s,a)+"<?",s.state=t.InsideTag,l+=o.target,o.value&&(l+=" "+o.value),s.state=t.CloseTag,l+=s.spaceBeforeSlash+"?>",l+=this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),l},n.prototype.raw=function(o,s,a){var l;return this.openNode(o,s,a),s.state=t.OpenTag,l=this.indent(o,s,a),s.state=t.InsideTag,l+=o.value,s.state=t.CloseTag,l+=this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),l},n.prototype.text=function(o,s,a){var l;return this.openNode(o,s,a),s.state=t.OpenTag,l=this.indent(o,s,a),s.state=t.InsideTag,l+=o.value,s.state=t.CloseTag,l+=this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),l},n.prototype.dtdAttList=function(o,s,a){var l;return this.openNode(o,s,a),s.state=t.OpenTag,l=this.indent(o,s,a)+"<!ATTLIST",s.state=t.InsideTag,l+=" "+o.elementName+" "+o.attributeName+" "+o.attributeType,o.defaultValueType!=="#DEFAULT"&&(l+=" "+o.defaultValueType),o.defaultValue&&(l+=' "'+o.defaultValue+'"'),s.state=t.CloseTag,l+=s.spaceBeforeSlash+">"+this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),l},n.prototype.dtdElement=function(o,s,a){var l;return this.openNode(o,s,a),s.state=t.OpenTag,l=this.indent(o,s,a)+"<!ELEMENT",s.state=t.InsideTag,l+=" "+o.name+" "+o.value,s.state=t.CloseTag,l+=s.spaceBeforeSlash+">"+this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),l},n.prototype.dtdEntity=function(o,s,a){var l;return this.openNode(o,s,a),s.state=t.OpenTag,l=this.indent(o,s,a)+"<!ENTITY",s.state=t.InsideTag,o.pe&&(l+=" %"),l+=" "+o.name,o.value?l+=' "'+o.value+'"':(o.pubID&&o.sysID?l+=' PUBLIC "'+o.pubID+'" "'+o.sysID+'"':o.sysID&&(l+=' SYSTEM "'+o.sysID+'"'),o.nData&&(l+=" NDATA "+o.nData)),s.state=t.CloseTag,l+=s.spaceBeforeSlash+">"+this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),l},n.prototype.dtdNotation=function(o,s,a){var l;return this.openNode(o,s,a),s.state=t.OpenTag,l=this.indent(o,s,a)+"<!NOTATION",s.state=t.InsideTag,l+=" "+o.name,o.pubID&&o.sysID?l+=' PUBLIC "'+o.pubID+'" "'+o.sysID+'"':o.pubID?l+=' PUBLIC "'+o.pubID+'"':o.sysID&&(l+=' SYSTEM "'+o.sysID+'"'),s.state=t.CloseTag,l+=s.spaceBeforeSlash+">"+this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),l},n.prototype.openNode=function(o,s,a){},n.prototype.closeNode=function(o,s,a){},n.prototype.openAttribute=function(o,s,a){},n.prototype.closeAttribute=function(o,s,a){},n}()}.call(k)),wl.exports}var zg;function Yc(){return zg||(zg=1,function(){var r,t=function(i,n){for(var o in n)e.call(n,o)&&(i[o]=n[o]);function s(){this.constructor=i}return s.prototype=n.prototype,i.prototype=new s,i.__super__=n.prototype,i},e={}.hasOwnProperty;r=Mm(),bl.exports=function(i){t(n,i);function n(o){n.__super__.constructor.call(this,o)}return n.prototype.document=function(o,s){var a,l,c,d,g;for(s=this.filterOptions(s),d="",g=o.children,l=0,c=g.length;l<c;l++)a=g[l],d+=this.writeChildNode(a,s,0);return s.pretty&&d.slice(-s.newline.length)===s.newline&&(d=d.slice(0,-s.newline.length)),d},n}(r)}.call(k)),bl.exports}var Vg;function Dm(){return Vg||(Vg=1,function(){var r,t,e,i,n,o,s,a=function(c,d){for(var g in d)l.call(d,g)&&(c[g]=d[g]);function u(){this.constructor=c}return u.prototype=d.prototype,c.prototype=new u,c.__super__=d.prototype,c},l={}.hasOwnProperty;s=ni().isPlainObject,e=Sm(),t=B1(),i=Pe(),r=Wt(),o=Fm(),n=Yc(),Ku.exports=function(c){a(d,c);function d(g){d.__super__.constructor.call(this,null),this.name="#document",this.type=r.Document,this.documentURI=null,this.domConfig=new t,g||(g={}),g.writer||(g.writer=new n),this.options=g,this.stringify=new o(g)}return Object.defineProperty(d.prototype,"implementation",{value:new e}),Object.defineProperty(d.prototype,"doctype",{get:function(){var g,u,h,f;for(f=this.children,u=0,h=f.length;u<h;u++)if(g=f[u],g.type===r.DocType)return g;return null}}),Object.defineProperty(d.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(d.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(d.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(d.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===r.Declaration?this.children[0].encoding:null}}),Object.defineProperty(d.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===r.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(d.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===r.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(d.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(d.prototype,"origin",{get:function(){return null}}),Object.defineProperty(d.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(d.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(d.prototype,"contentType",{get:function(){return null}}),d.prototype.end=function(g){var u;return u={},g?s(g)&&(u=g,g=this.options.writer):g=this.options.writer,g.document(this,g.filterOptions(u))},d.prototype.toString=function(g){return this.options.writer.document(this,this.options.writer.filterOptions(g))},d.prototype.createElement=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createTextNode=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createComment=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createCDATASection=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createProcessingInstruction=function(g,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createAttribute=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createEntityReference=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagName=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.importNode=function(g,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createElementNS=function(g,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createAttributeNS=function(g,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagNameNS=function(g,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementById=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.adoptNode=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.renameNode=function(g,u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByClassName=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createEvent=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createNodeIterator=function(g,u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createTreeWalker=function(g,u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d}(i)}.call(k)),Ku.exports}var Pl={exports:{}},Jg;function Z1(){return Jg||(Jg=1,function(){var r,t,e,i,n,o,s,a,l,c,d,g,u,h,f,I,m,y,v,p,_,A,b,P={}.hasOwnProperty;b=ni(),_=b.isObject,p=b.isFunction,A=b.isPlainObject,v=b.getValue,r=Wt(),g=Dm(),u=Lc(),i=Bc(),n=Rc(),f=Wc(),y=Xc(),h=Hc(),c=Oc(),d=kc(),o=Zc(),a=Gc(),s=Nc(),l=jc(),e=Tm(),m=Fm(),I=Yc(),t=ha(),Pl.exports=function(){function E(C,x,F){var R;this.name="?xml",this.type=r.Document,C||(C={}),R={},C.writer?A(C.writer)&&(R=C.writer,C.writer=new I):C.writer=new I,this.options=C,this.writer=C.writer,this.writerOptions=this.writer.filterOptions(R),this.stringify=new m(C),this.onDataCallback=x||function(){},this.onEndCallback=F||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return E.prototype.createChildNode=function(C){var x,F,R,Z,H,W,U,X;switch(C.type){case r.CData:this.cdata(C.value);break;case r.Comment:this.comment(C.value);break;case r.Element:R={},U=C.attribs;for(F in U)P.call(U,F)&&(x=U[F],R[F]=x.value);this.node(C.name,R);break;case r.Dummy:this.dummy();break;case r.Raw:this.raw(C.value);break;case r.Text:this.text(C.value);break;case r.ProcessingInstruction:this.instruction(C.target,C.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+C.constructor.name)}for(X=C.children,H=0,W=X.length;H<W;H++)Z=X[H],this.createChildNode(Z),Z.type===r.Element&&this.up();return this},E.prototype.dummy=function(){return this},E.prototype.node=function(C,x,F){var R;if(C==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(C));return this.openCurrent(),C=v(C),x==null&&(x={}),x=v(x),_(x)||(R=[x,F],F=R[0],x=R[1]),this.currentNode=new u(this,C,x),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,F!=null&&this.text(F),this},E.prototype.element=function(C,x,F){var R,Z,H,W,U,X;if(this.currentNode&&this.currentNode.type===r.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(C)||_(C)||p(C))for(W=this.options.noValidation,this.options.noValidation=!0,X=new g(this.options).element("TEMP_ROOT"),X.element(C),this.options.noValidation=W,U=X.children,Z=0,H=U.length;Z<H;Z++)R=U[Z],this.createChildNode(R),R.type===r.Element&&this.up();else this.node(C,x,F);return this},E.prototype.attribute=function(C,x){var F,R;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(C));if(C!=null&&(C=v(C)),_(C))for(F in C)P.call(C,F)&&(R=C[F],this.attribute(F,R));else p(x)&&(x=x.apply()),this.options.keepNullAttributes&&x==null?this.currentNode.attribs[C]=new e(this,C,""):x!=null&&(this.currentNode.attribs[C]=new e(this,C,x));return this},E.prototype.text=function(C){var x;return this.openCurrent(),x=new y(this,C),this.onData(this.writer.text(x,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.cdata=function(C){var x;return this.openCurrent(),x=new i(this,C),this.onData(this.writer.cdata(x,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.comment=function(C){var x;return this.openCurrent(),x=new n(this,C),this.onData(this.writer.comment(x,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.raw=function(C){var x;return this.openCurrent(),x=new f(this,C),this.onData(this.writer.raw(x,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.instruction=function(C,x){var F,R,Z,H,W;if(this.openCurrent(),C!=null&&(C=v(C)),x!=null&&(x=v(x)),Array.isArray(C))for(F=0,H=C.length;F<H;F++)R=C[F],this.instruction(R);else if(_(C))for(R in C)P.call(C,R)&&(Z=C[R],this.instruction(R,Z));else p(x)&&(x=x.apply()),W=new h(this,C,x),this.onData(this.writer.processingInstruction(W,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},E.prototype.declaration=function(C,x,F){var R;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return R=new c(this,C,x,F),this.onData(this.writer.declaration(R,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.doctype=function(C,x,F){if(this.openCurrent(),C==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new d(this,x,F),this.currentNode.rootNodeName=C,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},E.prototype.dtdElement=function(C,x){var F;return this.openCurrent(),F=new s(this,C,x),this.onData(this.writer.dtdElement(F,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.attList=function(C,x,F,R,Z){var H;return this.openCurrent(),H=new o(this,C,x,F,R,Z),this.onData(this.writer.dtdAttList(H,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.entity=function(C,x){var F;return this.openCurrent(),F=new a(this,!1,C,x),this.onData(this.writer.dtdEntity(F,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.pEntity=function(C,x){var F;return this.openCurrent(),F=new a(this,!0,C,x),this.onData(this.writer.dtdEntity(F,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.notation=function(C,x){var F;return this.openCurrent(),F=new l(this,C,x),this.onData(this.writer.dtdNotation(F,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},E.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},E.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},E.prototype.openNode=function(C){var x,F,R,Z;if(!C.isOpen){if(!this.root&&this.currentLevel===0&&C.type===r.Element&&(this.root=C),F="",C.type===r.Element){this.writerOptions.state=t.OpenTag,F=this.writer.indent(C,this.writerOptions,this.currentLevel)+"<"+C.name,Z=C.attribs;for(R in Z)P.call(Z,R)&&(x=Z[R],F+=this.writer.attribute(x,this.writerOptions,this.currentLevel));F+=(C.children?">":"/>")+this.writer.endline(C,this.writerOptions,this.currentLevel),this.writerOptions.state=t.InsideTag}else this.writerOptions.state=t.OpenTag,F=this.writer.indent(C,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+C.rootNodeName,C.pubID&&C.sysID?F+=' PUBLIC "'+C.pubID+'" "'+C.sysID+'"':C.sysID&&(F+=' SYSTEM "'+C.sysID+'"'),C.children?(F+=" [",this.writerOptions.state=t.InsideTag):(this.writerOptions.state=t.CloseTag,F+=">"),F+=this.writer.endline(C,this.writerOptions,this.currentLevel);return this.onData(F,this.currentLevel),C.isOpen=!0}},E.prototype.closeNode=function(C){var x;if(!C.isClosed)return x="",this.writerOptions.state=t.CloseTag,C.type===r.Element?x=this.writer.indent(C,this.writerOptions,this.currentLevel)+"</"+C.name+">"+this.writer.endline(C,this.writerOptions,this.currentLevel):x=this.writer.indent(C,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(C,this.writerOptions,this.currentLevel),this.writerOptions.state=t.None,this.onData(x,this.currentLevel),C.isClosed=!0},E.prototype.onData=function(C,x){return this.documentStarted=!0,this.onDataCallback(C,x+1)},E.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},E.prototype.debugInfo=function(C){return C==null?"":"node: <"+C+">"},E.prototype.ele=function(){return this.element.apply(this,arguments)},E.prototype.nod=function(C,x,F){return this.node(C,x,F)},E.prototype.txt=function(C){return this.text(C)},E.prototype.dat=function(C){return this.cdata(C)},E.prototype.com=function(C){return this.comment(C)},E.prototype.ins=function(C,x){return this.instruction(C,x)},E.prototype.dec=function(C,x,F){return this.declaration(C,x,F)},E.prototype.dtd=function(C,x,F){return this.doctype(C,x,F)},E.prototype.e=function(C,x,F){return this.element(C,x,F)},E.prototype.n=function(C,x,F){return this.node(C,x,F)},E.prototype.t=function(C){return this.text(C)},E.prototype.d=function(C){return this.cdata(C)},E.prototype.c=function(C){return this.comment(C)},E.prototype.r=function(C){return this.raw(C)},E.prototype.i=function(C,x){return this.instruction(C,x)},E.prototype.att=function(){return this.currentNode&&this.currentNode.type===r.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},E.prototype.a=function(){return this.currentNode&&this.currentNode.type===r.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},E.prototype.ent=function(C,x){return this.entity(C,x)},E.prototype.pent=function(C,x){return this.pEntity(C,x)},E.prototype.not=function(C,x){return this.notation(C,x)},E}()}.call(k)),Pl.exports}var Sl={exports:{}},Qg;function G1(){return Qg||(Qg=1,function(){var r,t,e,i=function(o,s){for(var a in s)n.call(s,a)&&(o[a]=s[a]);function l(){this.constructor=o}return l.prototype=s.prototype,o.prototype=new l,o.__super__=s.prototype,o},n={}.hasOwnProperty;r=Wt(),e=Mm(),t=ha(),Sl.exports=function(o){i(s,o);function s(a,l){this.stream=a,s.__super__.constructor.call(this,l)}return s.prototype.endline=function(a,l,c){return a.isLastRootNode&&l.state===t.CloseTag?"":s.__super__.endline.call(this,a,l,c)},s.prototype.document=function(a,l){var c,d,g,u,h,f,I,m,y;for(I=a.children,d=g=0,h=I.length;g<h;d=++g)c=I[d],c.isLastRootNode=d===a.children.length-1;for(l=this.filterOptions(l),m=a.children,y=[],u=0,f=m.length;u<f;u++)c=m[u],y.push(this.writeChildNode(c,l,0));return y},s.prototype.attribute=function(a,l,c){return this.stream.write(s.__super__.attribute.call(this,a,l,c))},s.prototype.cdata=function(a,l,c){return this.stream.write(s.__super__.cdata.call(this,a,l,c))},s.prototype.comment=function(a,l,c){return this.stream.write(s.__super__.comment.call(this,a,l,c))},s.prototype.declaration=function(a,l,c){return this.stream.write(s.__super__.declaration.call(this,a,l,c))},s.prototype.docType=function(a,l,c){var d,g,u,h;if(c||(c=0),this.openNode(a,l,c),l.state=t.OpenTag,this.stream.write(this.indent(a,l,c)),this.stream.write("<!DOCTYPE "+a.root().name),a.pubID&&a.sysID?this.stream.write(' PUBLIC "'+a.pubID+'" "'+a.sysID+'"'):a.sysID&&this.stream.write(' SYSTEM "'+a.sysID+'"'),a.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(a,l,c)),l.state=t.InsideTag,h=a.children,g=0,u=h.length;g<u;g++)d=h[g],this.writeChildNode(d,l,c+1);l.state=t.CloseTag,this.stream.write("]")}return l.state=t.CloseTag,this.stream.write(l.spaceBeforeSlash+">"),this.stream.write(this.endline(a,l,c)),l.state=t.None,this.closeNode(a,l,c)},s.prototype.element=function(a,l,c){var d,g,u,h,f,I,m,y,v;c||(c=0),this.openNode(a,l,c),l.state=t.OpenTag,this.stream.write(this.indent(a,l,c)+"<"+a.name),y=a.attribs;for(m in y)n.call(y,m)&&(d=y[m],this.attribute(d,l,c));if(u=a.children.length,h=u===0?null:a.children[0],u===0||a.children.every(function(p){return(p.type===r.Text||p.type===r.Raw)&&p.value===""}))l.allowEmpty?(this.stream.write(">"),l.state=t.CloseTag,this.stream.write("</"+a.name+">")):(l.state=t.CloseTag,this.stream.write(l.spaceBeforeSlash+"/>"));else if(l.pretty&&u===1&&(h.type===r.Text||h.type===r.Raw)&&h.value!=null)this.stream.write(">"),l.state=t.InsideTag,l.suppressPrettyCount++,this.writeChildNode(h,l,c+1),l.suppressPrettyCount--,l.state=t.CloseTag,this.stream.write("</"+a.name+">");else{for(this.stream.write(">"+this.endline(a,l,c)),l.state=t.InsideTag,v=a.children,f=0,I=v.length;f<I;f++)g=v[f],this.writeChildNode(g,l,c+1);l.state=t.CloseTag,this.stream.write(this.indent(a,l,c)+"</"+a.name+">")}return this.stream.write(this.endline(a,l,c)),l.state=t.None,this.closeNode(a,l,c)},s.prototype.processingInstruction=function(a,l,c){return this.stream.write(s.__super__.processingInstruction.call(this,a,l,c))},s.prototype.raw=function(a,l,c){return this.stream.write(s.__super__.raw.call(this,a,l,c))},s.prototype.text=function(a,l,c){return this.stream.write(s.__super__.text.call(this,a,l,c))},s.prototype.dtdAttList=function(a,l,c){return this.stream.write(s.__super__.dtdAttList.call(this,a,l,c))},s.prototype.dtdElement=function(a,l,c){return this.stream.write(s.__super__.dtdElement.call(this,a,l,c))},s.prototype.dtdEntity=function(a,l,c){return this.stream.write(s.__super__.dtdEntity.call(this,a,l,c))},s.prototype.dtdNotation=function(a,l,c){return this.stream.write(s.__super__.dtdNotation.call(this,a,l,c))},s}(e)}.call(k)),Sl.exports}var $g;function N1(){return $g||($g=1,function(){var r,t,e,i,n,o,s,a,l,c;c=ni(),a=c.assign,l=c.isFunction,e=Sm(),i=Dm(),n=Z1(),s=Yc(),o=G1(),r=Wt(),t=ha(),Ue.create=function(d,g,u,h){var f,I;if(d==null)throw new Error("Root element needs a name.");return h=a({},g,u,h),f=new i(h),I=f.element(d),h.headless||(f.declaration(h),(h.pubID!=null||h.sysID!=null)&&f.dtd(h)),I},Ue.begin=function(d,g,u){var h;return l(d)&&(h=[d,g],g=h[0],u=h[1],d={}),g?new n(d,g,u):new i(d)},Ue.stringWriter=function(d){return new s(d)},Ue.streamWriter=function(d,g){return new o(d,g)},Ue.implementation=new e,Ue.nodeType=r,Ue.writerState=t}.call(k)),Ue}var Kg;function j1(){return Kg||(Kg=1,function(){var r,t,e,i,n,o={}.hasOwnProperty;r=N1(),t=Mc().defaults,i=function(s){return typeof s=="string"&&(s.indexOf("&")>=0||s.indexOf(">")>=0||s.indexOf("<")>=0)},n=function(s){return"<![CDATA["+e(s)+"]]>"},e=function(s){return s.replace("]]>","]]]]><![CDATA[>")},Qu.Builder=function(){function s(a){var l,c,d;this.options={},c=t["0.2"];for(l in c)o.call(c,l)&&(d=c[l],this.options[l]=d);for(l in a)o.call(a,l)&&(d=a[l],this.options[l]=d)}return s.prototype.buildObject=function(a){var l,c,d,g,u;return l=this.options.attrkey,c=this.options.charkey,Object.keys(a).length===1&&this.options.rootName===t["0.2"].rootName?(u=Object.keys(a)[0],a=a[u]):u=this.options.rootName,d=function(h){return function(f,I){var m,y,v,p,_,A;if(typeof I!="object")h.options.cdata&&i(I)?f.raw(n(I)):f.txt(I);else if(Array.isArray(I)){for(p in I)if(o.call(I,p)){y=I[p];for(_ in y)v=y[_],f=d(f.ele(_),v).up()}}else for(_ in I)if(o.call(I,_))if(y=I[_],_===l){if(typeof y=="object")for(m in y)A=y[m],f=f.att(m,A)}else if(_===c)h.options.cdata&&i(y)?f=f.raw(n(y)):f=f.txt(y);else if(Array.isArray(y))for(p in y)o.call(y,p)&&(v=y[p],typeof v=="string"?h.options.cdata&&i(v)?f=f.ele(_).raw(n(v)).up():f=f.ele(_,v).up():f=d(f.ele(_),v).up());else typeof y=="object"?f=d(f.ele(_),y).up():typeof y=="string"&&h.options.cdata&&i(y)?f=f.ele(_).raw(n(y)).up():(y==null&&(y=""),f=f.ele(_,y.toString()).up());return f}}(this),g=r.create(u,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),d(g,a).end(this.options.renderOpts)},s}()}.call(k)),Qu}var Tl={},El={},Fl,qg;function k1(){if(qg)return Fl;qg=1,Fl=r;function r(e){if(e)return t(e)}function t(e){for(var i in r.prototype)e[i]=r.prototype[i];return e}return r.prototype.on=r.prototype.addEventListener=function(e,i){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(i),this},r.prototype.once=function(e,i){var n=this;this._callbacks=this._callbacks||{};function o(){n.off(e,o),i.apply(this,arguments)}return o.fn=i,this.on(e,o),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(arguments.length==1)return delete this._callbacks[e],this;for(var o,s=0;s<n.length;s++)if(o=n[s],o===i||o.fn===i){n.splice(s,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var i=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var o=0,s=n.length;o<s;++o)n[o].apply(this,i)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length},Fl}var Ml,tp;function W1(){if(tp)return Ml;tp=1;var r=k1();function t(){r.call(this)}return t.prototype=new r,Ml=t,t.Stream=t,t.prototype.pipe=function(e,i){var n=this;function o(u){e.writable&&e.write(u)===!1&&n.pause&&n.pause()}n.on("data",o);function s(){n.readable&&n.resume&&n.resume()}e.on("drain",s),!e._isStdio&&(!i||i.end!==!1)&&(n.on("end",l),n.on("close",c));var a=!1;function l(){a||(a=!0,e.end())}function c(){a||(a=!0,typeof e.destroy=="function"&&e.destroy())}function d(u){if(g(),!this.hasListeners("error"))throw u}n.on("error",d),e.on("error",d);function g(){n.off("data",o),e.off("drain",s),n.off("end",l),n.off("close",c),n.off("error",d),e.off("error",d),n.off("end",g),n.off("close",g),e.off("end",g),e.off("close",g)}return n.on("end",g),n.on("close",g),e.on("end",g),e.on("close",g),e.emit("pipe",n),e},Ml}var Dl={},jo={exports:{}},Ll={},nn={},ep;function X1(){if(ep)return nn;ep=1,nn.byteLength=a,nn.toByteArray=c,nn.fromByteArray=u;for(var r=[],t=[],e=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=i.length;n<o;++n)r[n]=i[n],t[i.charCodeAt(n)]=n;t[45]=62,t[95]=63;function s(h){var f=h.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var I=h.indexOf("=");I===-1&&(I=f);var m=I===f?0:4-I%4;return[I,m]}function a(h){var f=s(h),I=f[0],m=f[1];return(I+m)*3/4-m}function l(h,f,I){return(f+I)*3/4-I}function c(h){var f,I=s(h),m=I[0],y=I[1],v=new e(l(h,m,y)),p=0,_=y>0?m-4:m,A;for(A=0;A<_;A+=4)f=t[h.charCodeAt(A)]<<18|t[h.charCodeAt(A+1)]<<12|t[h.charCodeAt(A+2)]<<6|t[h.charCodeAt(A+3)],v[p++]=f>>16&255,v[p++]=f>>8&255,v[p++]=f&255;return y===2&&(f=t[h.charCodeAt(A)]<<2|t[h.charCodeAt(A+1)]>>4,v[p++]=f&255),y===1&&(f=t[h.charCodeAt(A)]<<10|t[h.charCodeAt(A+1)]<<4|t[h.charCodeAt(A+2)]>>2,v[p++]=f>>8&255,v[p++]=f&255),v}function d(h){return r[h>>18&63]+r[h>>12&63]+r[h>>6&63]+r[h&63]}function g(h,f,I){for(var m,y=[],v=f;v<I;v+=3)m=(h[v]<<16&16711680)+(h[v+1]<<8&65280)+(h[v+2]&255),y.push(d(m));return y.join("")}function u(h){for(var f,I=h.length,m=I%3,y=[],v=16383,p=0,_=I-m;p<_;p+=v)y.push(g(h,p,p+v>_?_:p+v));return m===1?(f=h[I-1],y.push(r[f>>2]+r[f<<4&63]+"==")):m===2&&(f=(h[I-2]<<8)+h[I-1],y.push(r[f>>10]+r[f>>4&63]+r[f<<2&63]+"=")),y.join("")}return nn}var ko={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var ip;function H1(){return ip||(ip=1,ko.read=function(r,t,e,i,n){var o,s,a=n*8-i-1,l=(1<<a)-1,c=l>>1,d=-7,g=e?n-1:0,u=e?-1:1,h=r[t+g];for(g+=u,o=h&(1<<-d)-1,h>>=-d,d+=a;d>0;o=o*256+r[t+g],g+=u,d-=8);for(s=o&(1<<-d)-1,o>>=-d,d+=i;d>0;s=s*256+r[t+g],g+=u,d-=8);if(o===0)o=1-c;else{if(o===l)return s?NaN:(h?-1:1)*(1/0);s=s+Math.pow(2,i),o=o-c}return(h?-1:1)*s*Math.pow(2,o-i)},ko.write=function(r,t,e,i,n,o){var s,a,l,c=o*8-n-1,d=(1<<c)-1,g=d>>1,u=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:o-1,f=i?1:-1,I=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+g>=1?t+=u/l:t+=u*Math.pow(2,1-g),t*l>=2&&(s++,l/=2),s+g>=d?(a=0,s=d):s+g>=1?(a=(t*l-1)*Math.pow(2,n),s=s+g):(a=t*Math.pow(2,g-1)*Math.pow(2,n),s=0));n>=8;r[e+h]=a&255,h+=f,a/=256,n-=8);for(s=s<<n|a,c+=n;c>0;r[e+h]=s&255,h+=f,s/=256,c-=8);r[e+h-f]|=I*128}),ko}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var rp;function Y1(){return rp||(rp=1,function(r){const t=X1(),e=H1(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=v,r.INSPECT_MAX_BYTES=50;const n=2147483647;r.kMaxLength=n,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const L=new Uint8Array(1),w={foo:function(){return 42}};return Object.setPrototypeOf(w,Uint8Array.prototype),Object.setPrototypeOf(L,w),L.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(L){if(L>n)throw new RangeError('The value "'+L+'" is invalid for option "size"');const w=new Uint8Array(L);return Object.setPrototypeOf(w,a.prototype),w}function a(L,w,T){if(typeof L=="number"){if(typeof w=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(L)}return l(L,w,T)}a.poolSize=8192;function l(L,w,T){if(typeof L=="string")return u(L,w);if(ArrayBuffer.isView(L))return f(L);if(L==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L);if(ie(L,ArrayBuffer)||L&&ie(L.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ie(L,SharedArrayBuffer)||L&&ie(L.buffer,SharedArrayBuffer)))return I(L,w,T);if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const O=L.valueOf&&L.valueOf();if(O!=null&&O!==L)return a.from(O,w,T);const j=m(L);if(j)return j;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return a.from(L[Symbol.toPrimitive]("string"),w,T);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}a.from=function(L,w,T){return l(L,w,T)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function d(L,w,T){return c(L),L<=0?s(L):w!==void 0?typeof T=="string"?s(L).fill(w,T):s(L).fill(w):s(L)}a.alloc=function(L,w,T){return d(L,w,T)};function g(L){return c(L),s(L<0?0:y(L)|0)}a.allocUnsafe=function(L){return g(L)},a.allocUnsafeSlow=function(L){return g(L)};function u(L,w){if((typeof w!="string"||w==="")&&(w="utf8"),!a.isEncoding(w))throw new TypeError("Unknown encoding: "+w);const T=p(L,w)|0;let O=s(T);const j=O.write(L,w);return j!==T&&(O=O.slice(0,j)),O}function h(L){const w=L.length<0?0:y(L.length)|0,T=s(w);for(let O=0;O<w;O+=1)T[O]=L[O]&255;return T}function f(L){if(ie(L,Uint8Array)){const w=new Uint8Array(L);return I(w.buffer,w.byteOffset,w.byteLength)}return h(L)}function I(L,w,T){if(w<0||L.byteLength<w)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<w+(T||0))throw new RangeError('"length" is outside of buffer bounds');let O;return w===void 0&&T===void 0?O=new Uint8Array(L):T===void 0?O=new Uint8Array(L,w):O=new Uint8Array(L,w,T),Object.setPrototypeOf(O,a.prototype),O}function m(L){if(a.isBuffer(L)){const w=y(L.length)|0,T=s(w);return T.length===0||L.copy(T,0,0,w),T}if(L.length!==void 0)return typeof L.length!="number"||tr(L.length)?s(0):h(L);if(L.type==="Buffer"&&Array.isArray(L.data))return h(L.data)}function y(L){if(L>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return L|0}function v(L){return+L!=L&&(L=0),a.alloc(+L)}a.isBuffer=function(w){return w!=null&&w._isBuffer===!0&&w!==a.prototype},a.compare=function(w,T){if(ie(w,Uint8Array)&&(w=a.from(w,w.offset,w.byteLength)),ie(T,Uint8Array)&&(T=a.from(T,T.offset,T.byteLength)),!a.isBuffer(w)||!a.isBuffer(T))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(w===T)return 0;let O=w.length,j=T.length;for(let V=0,J=Math.min(O,j);V<J;++V)if(w[V]!==T[V]){O=w[V],j=T[V];break}return O<j?-1:j<O?1:0},a.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(w,T){if(!Array.isArray(w))throw new TypeError('"list" argument must be an Array of Buffers');if(w.length===0)return a.alloc(0);let O;if(T===void 0)for(T=0,O=0;O<w.length;++O)T+=w[O].length;const j=a.allocUnsafe(T);let V=0;for(O=0;O<w.length;++O){let J=w[O];if(ie(J,Uint8Array))V+J.length>j.length?(a.isBuffer(J)||(J=a.from(J)),J.copy(j,V)):Uint8Array.prototype.set.call(j,J,V);else if(a.isBuffer(J))J.copy(j,V);else throw new TypeError('"list" argument must be an Array of Buffers');V+=J.length}return j};function p(L,w){if(a.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||ie(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);const T=L.length,O=arguments.length>2&&arguments[2]===!0;if(!O&&T===0)return 0;let j=!1;for(;;)switch(w){case"ascii":case"latin1":case"binary":return T;case"utf8":case"utf-8":return xt(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T*2;case"hex":return T>>>1;case"base64":return Se(L).length;default:if(j)return O?-1:xt(L).length;w=(""+w).toLowerCase(),j=!0}}a.byteLength=p;function _(L,w,T){let O=!1;if((w===void 0||w<0)&&(w=0),w>this.length||((T===void 0||T>this.length)&&(T=this.length),T<=0)||(T>>>=0,w>>>=0,T<=w))return"";for(L||(L="utf8");;)switch(L){case"hex":return lt(this,w,T);case"utf8":case"utf-8":return H(this,w,T);case"ascii":return X(this,w,T);case"latin1":case"binary":return ot(this,w,T);case"base64":return Z(this,w,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return et(this,w,T);default:if(O)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),O=!0}}a.prototype._isBuffer=!0;function A(L,w,T){const O=L[w];L[w]=L[T],L[T]=O}a.prototype.swap16=function(){const w=this.length;if(w%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let T=0;T<w;T+=2)A(this,T,T+1);return this},a.prototype.swap32=function(){const w=this.length;if(w%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let T=0;T<w;T+=4)A(this,T,T+3),A(this,T+1,T+2);return this},a.prototype.swap64=function(){const w=this.length;if(w%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let T=0;T<w;T+=8)A(this,T,T+7),A(this,T+1,T+6),A(this,T+2,T+5),A(this,T+3,T+4);return this},a.prototype.toString=function(){const w=this.length;return w===0?"":arguments.length===0?H(this,0,w):_.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(w){if(!a.isBuffer(w))throw new TypeError("Argument must be a Buffer");return this===w?!0:a.compare(this,w)===0},a.prototype.inspect=function(){let w="";const T=r.INSPECT_MAX_BYTES;return w=this.toString("hex",0,T).replace(/(.{2})/g,"$1 ").trim(),this.length>T&&(w+=" ... "),"<Buffer "+w+">"},i&&(a.prototype[i]=a.prototype.inspect),a.prototype.compare=function(w,T,O,j,V){if(ie(w,Uint8Array)&&(w=a.from(w,w.offset,w.byteLength)),!a.isBuffer(w))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof w);if(T===void 0&&(T=0),O===void 0&&(O=w?w.length:0),j===void 0&&(j=0),V===void 0&&(V=this.length),T<0||O>w.length||j<0||V>this.length)throw new RangeError("out of range index");if(j>=V&&T>=O)return 0;if(j>=V)return-1;if(T>=O)return 1;if(T>>>=0,O>>>=0,j>>>=0,V>>>=0,this===w)return 0;let J=V-j,G=O-T;const Y=Math.min(J,G),q=this.slice(j,V),tt=w.slice(T,O);for(let nt=0;nt<Y;++nt)if(q[nt]!==tt[nt]){J=q[nt],G=tt[nt];break}return J<G?-1:G<J?1:0};function b(L,w,T,O,j){if(L.length===0)return-1;if(typeof T=="string"?(O=T,T=0):T>2147483647?T=2147483647:T<-2147483648&&(T=-2147483648),T=+T,tr(T)&&(T=j?0:L.length-1),T<0&&(T=L.length+T),T>=L.length){if(j)return-1;T=L.length-1}else if(T<0)if(j)T=0;else return-1;if(typeof w=="string"&&(w=a.from(w,O)),a.isBuffer(w))return w.length===0?-1:P(L,w,T,O,j);if(typeof w=="number")return w=w&255,typeof Uint8Array.prototype.indexOf=="function"?j?Uint8Array.prototype.indexOf.call(L,w,T):Uint8Array.prototype.lastIndexOf.call(L,w,T):P(L,[w],T,O,j);throw new TypeError("val must be string, number or Buffer")}function P(L,w,T,O,j){let V=1,J=L.length,G=w.length;if(O!==void 0&&(O=String(O).toLowerCase(),O==="ucs2"||O==="ucs-2"||O==="utf16le"||O==="utf-16le")){if(L.length<2||w.length<2)return-1;V=2,J/=2,G/=2,T/=2}function Y(tt,nt){return V===1?tt[nt]:tt.readUInt16BE(nt*V)}let q;if(j){let tt=-1;for(q=T;q<J;q++)if(Y(L,q)===Y(w,tt===-1?0:q-tt)){if(tt===-1&&(tt=q),q-tt+1===G)return tt*V}else tt!==-1&&(q-=q-tt),tt=-1}else for(T+G>J&&(T=J-G),q=T;q>=0;q--){let tt=!0;for(let nt=0;nt<G;nt++)if(Y(L,q+nt)!==Y(w,nt)){tt=!1;break}if(tt)return q}return-1}a.prototype.includes=function(w,T,O){return this.indexOf(w,T,O)!==-1},a.prototype.indexOf=function(w,T,O){return b(this,w,T,O,!0)},a.prototype.lastIndexOf=function(w,T,O){return b(this,w,T,O,!1)};function E(L,w,T,O){T=Number(T)||0;const j=L.length-T;O?(O=Number(O),O>j&&(O=j)):O=j;const V=w.length;O>V/2&&(O=V/2);let J;for(J=0;J<O;++J){const G=parseInt(w.substr(J*2,2),16);if(tr(G))return J;L[T+J]=G}return J}function C(L,w,T,O){return pe(xt(w,L.length-T),L,T,O)}function x(L,w,T,O){return pe(Lt(w),L,T,O)}function F(L,w,T,O){return pe(Se(w),L,T,O)}function R(L,w,T,O){return pe(qt(w,L.length-T),L,T,O)}a.prototype.write=function(w,T,O,j){if(T===void 0)j="utf8",O=this.length,T=0;else if(O===void 0&&typeof T=="string")j=T,O=this.length,T=0;else if(isFinite(T))T=T>>>0,isFinite(O)?(O=O>>>0,j===void 0&&(j="utf8")):(j=O,O=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const V=this.length-T;if((O===void 0||O>V)&&(O=V),w.length>0&&(O<0||T<0)||T>this.length)throw new RangeError("Attempt to write outside buffer bounds");j||(j="utf8");let J=!1;for(;;)switch(j){case"hex":return E(this,w,T,O);case"utf8":case"utf-8":return C(this,w,T,O);case"ascii":case"latin1":case"binary":return x(this,w,T,O);case"base64":return F(this,w,T,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,w,T,O);default:if(J)throw new TypeError("Unknown encoding: "+j);j=(""+j).toLowerCase(),J=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Z(L,w,T){return w===0&&T===L.length?t.fromByteArray(L):t.fromByteArray(L.slice(w,T))}function H(L,w,T){T=Math.min(L.length,T);const O=[];let j=w;for(;j<T;){const V=L[j];let J=null,G=V>239?4:V>223?3:V>191?2:1;if(j+G<=T){let Y,q,tt,nt;switch(G){case 1:V<128&&(J=V);break;case 2:Y=L[j+1],(Y&192)===128&&(nt=(V&31)<<6|Y&63,nt>127&&(J=nt));break;case 3:Y=L[j+1],q=L[j+2],(Y&192)===128&&(q&192)===128&&(nt=(V&15)<<12|(Y&63)<<6|q&63,nt>2047&&(nt<55296||nt>57343)&&(J=nt));break;case 4:Y=L[j+1],q=L[j+2],tt=L[j+3],(Y&192)===128&&(q&192)===128&&(tt&192)===128&&(nt=(V&15)<<18|(Y&63)<<12|(q&63)<<6|tt&63,nt>65535&&nt<1114112&&(J=nt))}}J===null?(J=65533,G=1):J>65535&&(J-=65536,O.push(J>>>10&1023|55296),J=56320|J&1023),O.push(J),j+=G}return U(O)}const W=4096;function U(L){const w=L.length;if(w<=W)return String.fromCharCode.apply(String,L);let T="",O=0;for(;O<w;)T+=String.fromCharCode.apply(String,L.slice(O,O+=W));return T}function X(L,w,T){let O="";T=Math.min(L.length,T);for(let j=w;j<T;++j)O+=String.fromCharCode(L[j]&127);return O}function ot(L,w,T){let O="";T=Math.min(L.length,T);for(let j=w;j<T;++j)O+=String.fromCharCode(L[j]);return O}function lt(L,w,T){const O=L.length;(!w||w<0)&&(w=0),(!T||T<0||T>O)&&(T=O);let j="";for(let V=w;V<T;++V)j+=po[L[V]];return j}function et(L,w,T){const O=L.slice(w,T);let j="";for(let V=0;V<O.length-1;V+=2)j+=String.fromCharCode(O[V]+O[V+1]*256);return j}a.prototype.slice=function(w,T){const O=this.length;w=~~w,T=T===void 0?O:~~T,w<0?(w+=O,w<0&&(w=0)):w>O&&(w=O),T<0?(T+=O,T<0&&(T=0)):T>O&&(T=O),T<w&&(T=w);const j=this.subarray(w,T);return Object.setPrototypeOf(j,a.prototype),j};function Q(L,w,T){if(L%1!==0||L<0)throw new RangeError("offset is not uint");if(L+w>T)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(w,T,O){w=w>>>0,T=T>>>0,O||Q(w,T,this.length);let j=this[w],V=1,J=0;for(;++J<T&&(V*=256);)j+=this[w+J]*V;return j},a.prototype.readUintBE=a.prototype.readUIntBE=function(w,T,O){w=w>>>0,T=T>>>0,O||Q(w,T,this.length);let j=this[w+--T],V=1;for(;T>0&&(V*=256);)j+=this[w+--T]*V;return j},a.prototype.readUint8=a.prototype.readUInt8=function(w,T){return w=w>>>0,T||Q(w,1,this.length),this[w]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(w,T){return w=w>>>0,T||Q(w,2,this.length),this[w]|this[w+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(w,T){return w=w>>>0,T||Q(w,2,this.length),this[w]<<8|this[w+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(w,T){return w=w>>>0,T||Q(w,4,this.length),(this[w]|this[w+1]<<8|this[w+2]<<16)+this[w+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(w,T){return w=w>>>0,T||Q(w,4,this.length),this[w]*16777216+(this[w+1]<<16|this[w+2]<<8|this[w+3])},a.prototype.readBigUInt64LE=Be(function(w){w=w>>>0,K(w,"offset");const T=this[w],O=this[w+7];(T===void 0||O===void 0)&&st(w,this.length-8);const j=T+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24,V=this[++w]+this[++w]*2**8+this[++w]*2**16+O*2**24;return BigInt(j)+(BigInt(V)<<BigInt(32))}),a.prototype.readBigUInt64BE=Be(function(w){w=w>>>0,K(w,"offset");const T=this[w],O=this[w+7];(T===void 0||O===void 0)&&st(w,this.length-8);const j=T*2**24+this[++w]*2**16+this[++w]*2**8+this[++w],V=this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+O;return(BigInt(j)<<BigInt(32))+BigInt(V)}),a.prototype.readIntLE=function(w,T,O){w=w>>>0,T=T>>>0,O||Q(w,T,this.length);let j=this[w],V=1,J=0;for(;++J<T&&(V*=256);)j+=this[w+J]*V;return V*=128,j>=V&&(j-=Math.pow(2,8*T)),j},a.prototype.readIntBE=function(w,T,O){w=w>>>0,T=T>>>0,O||Q(w,T,this.length);let j=T,V=1,J=this[w+--j];for(;j>0&&(V*=256);)J+=this[w+--j]*V;return V*=128,J>=V&&(J-=Math.pow(2,8*T)),J},a.prototype.readInt8=function(w,T){return w=w>>>0,T||Q(w,1,this.length),this[w]&128?(255-this[w]+1)*-1:this[w]},a.prototype.readInt16LE=function(w,T){w=w>>>0,T||Q(w,2,this.length);const O=this[w]|this[w+1]<<8;return O&32768?O|4294901760:O},a.prototype.readInt16BE=function(w,T){w=w>>>0,T||Q(w,2,this.length);const O=this[w+1]|this[w]<<8;return O&32768?O|4294901760:O},a.prototype.readInt32LE=function(w,T){return w=w>>>0,T||Q(w,4,this.length),this[w]|this[w+1]<<8|this[w+2]<<16|this[w+3]<<24},a.prototype.readInt32BE=function(w,T){return w=w>>>0,T||Q(w,4,this.length),this[w]<<24|this[w+1]<<16|this[w+2]<<8|this[w+3]},a.prototype.readBigInt64LE=Be(function(w){w=w>>>0,K(w,"offset");const T=this[w],O=this[w+7];(T===void 0||O===void 0)&&st(w,this.length-8);const j=this[w+4]+this[w+5]*2**8+this[w+6]*2**16+(O<<24);return(BigInt(j)<<BigInt(32))+BigInt(T+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24)}),a.prototype.readBigInt64BE=Be(function(w){w=w>>>0,K(w,"offset");const T=this[w],O=this[w+7];(T===void 0||O===void 0)&&st(w,this.length-8);const j=(T<<24)+this[++w]*2**16+this[++w]*2**8+this[++w];return(BigInt(j)<<BigInt(32))+BigInt(this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+O)}),a.prototype.readFloatLE=function(w,T){return w=w>>>0,T||Q(w,4,this.length),e.read(this,w,!0,23,4)},a.prototype.readFloatBE=function(w,T){return w=w>>>0,T||Q(w,4,this.length),e.read(this,w,!1,23,4)},a.prototype.readDoubleLE=function(w,T){return w=w>>>0,T||Q(w,8,this.length),e.read(this,w,!0,52,8)},a.prototype.readDoubleBE=function(w,T){return w=w>>>0,T||Q(w,8,this.length),e.read(this,w,!1,52,8)};function it(L,w,T,O,j,V){if(!a.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(w>j||w<V)throw new RangeError('"value" argument is out of bounds');if(T+O>L.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(w,T,O,j){if(w=+w,T=T>>>0,O=O>>>0,!j){const G=Math.pow(2,8*O)-1;it(this,w,T,O,G,0)}let V=1,J=0;for(this[T]=w&255;++J<O&&(V*=256);)this[T+J]=w/V&255;return T+O},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(w,T,O,j){if(w=+w,T=T>>>0,O=O>>>0,!j){const G=Math.pow(2,8*O)-1;it(this,w,T,O,G,0)}let V=O-1,J=1;for(this[T+V]=w&255;--V>=0&&(J*=256);)this[T+V]=w/J&255;return T+O},a.prototype.writeUint8=a.prototype.writeUInt8=function(w,T,O){return w=+w,T=T>>>0,O||it(this,w,T,1,255,0),this[T]=w&255,T+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(w,T,O){return w=+w,T=T>>>0,O||it(this,w,T,2,65535,0),this[T]=w&255,this[T+1]=w>>>8,T+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(w,T,O){return w=+w,T=T>>>0,O||it(this,w,T,2,65535,0),this[T]=w>>>8,this[T+1]=w&255,T+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(w,T,O){return w=+w,T=T>>>0,O||it(this,w,T,4,4294967295,0),this[T+3]=w>>>24,this[T+2]=w>>>16,this[T+1]=w>>>8,this[T]=w&255,T+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(w,T,O){return w=+w,T=T>>>0,O||it(this,w,T,4,4294967295,0),this[T]=w>>>24,this[T+1]=w>>>16,this[T+2]=w>>>8,this[T+3]=w&255,T+4};function at(L,w,T,O,j){$(w,O,j,L,T,7);let V=Number(w&BigInt(4294967295));L[T++]=V,V=V>>8,L[T++]=V,V=V>>8,L[T++]=V,V=V>>8,L[T++]=V;let J=Number(w>>BigInt(32)&BigInt(4294967295));return L[T++]=J,J=J>>8,L[T++]=J,J=J>>8,L[T++]=J,J=J>>8,L[T++]=J,T}function N(L,w,T,O,j){$(w,O,j,L,T,7);let V=Number(w&BigInt(4294967295));L[T+7]=V,V=V>>8,L[T+6]=V,V=V>>8,L[T+5]=V,V=V>>8,L[T+4]=V;let J=Number(w>>BigInt(32)&BigInt(4294967295));return L[T+3]=J,J=J>>8,L[T+2]=J,J=J>>8,L[T+1]=J,J=J>>8,L[T]=J,T+8}a.prototype.writeBigUInt64LE=Be(function(w,T=0){return at(this,w,T,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Be(function(w,T=0){return N(this,w,T,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(w,T,O,j){if(w=+w,T=T>>>0,!j){const Y=Math.pow(2,8*O-1);it(this,w,T,O,Y-1,-Y)}let V=0,J=1,G=0;for(this[T]=w&255;++V<O&&(J*=256);)w<0&&G===0&&this[T+V-1]!==0&&(G=1),this[T+V]=(w/J>>0)-G&255;return T+O},a.prototype.writeIntBE=function(w,T,O,j){if(w=+w,T=T>>>0,!j){const Y=Math.pow(2,8*O-1);it(this,w,T,O,Y-1,-Y)}let V=O-1,J=1,G=0;for(this[T+V]=w&255;--V>=0&&(J*=256);)w<0&&G===0&&this[T+V+1]!==0&&(G=1),this[T+V]=(w/J>>0)-G&255;return T+O},a.prototype.writeInt8=function(w,T,O){return w=+w,T=T>>>0,O||it(this,w,T,1,127,-128),w<0&&(w=255+w+1),this[T]=w&255,T+1},a.prototype.writeInt16LE=function(w,T,O){return w=+w,T=T>>>0,O||it(this,w,T,2,32767,-32768),this[T]=w&255,this[T+1]=w>>>8,T+2},a.prototype.writeInt16BE=function(w,T,O){return w=+w,T=T>>>0,O||it(this,w,T,2,32767,-32768),this[T]=w>>>8,this[T+1]=w&255,T+2},a.prototype.writeInt32LE=function(w,T,O){return w=+w,T=T>>>0,O||it(this,w,T,4,2147483647,-2147483648),this[T]=w&255,this[T+1]=w>>>8,this[T+2]=w>>>16,this[T+3]=w>>>24,T+4},a.prototype.writeInt32BE=function(w,T,O){return w=+w,T=T>>>0,O||it(this,w,T,4,2147483647,-2147483648),w<0&&(w=4294967295+w+1),this[T]=w>>>24,this[T+1]=w>>>16,this[T+2]=w>>>8,this[T+3]=w&255,T+4},a.prototype.writeBigInt64LE=Be(function(w,T=0){return at(this,w,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Be(function(w,T=0){return N(this,w,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function It(L,w,T,O,j,V){if(T+O>L.length)throw new RangeError("Index out of range");if(T<0)throw new RangeError("Index out of range")}function dt(L,w,T,O,j){return w=+w,T=T>>>0,j||It(L,w,T,4),e.write(L,w,T,O,23,4),T+4}a.prototype.writeFloatLE=function(w,T,O){return dt(this,w,T,!0,O)},a.prototype.writeFloatBE=function(w,T,O){return dt(this,w,T,!1,O)};function D(L,w,T,O,j){return w=+w,T=T>>>0,j||It(L,w,T,8),e.write(L,w,T,O,52,8),T+8}a.prototype.writeDoubleLE=function(w,T,O){return D(this,w,T,!0,O)},a.prototype.writeDoubleBE=function(w,T,O){return D(this,w,T,!1,O)},a.prototype.copy=function(w,T,O,j){if(!a.isBuffer(w))throw new TypeError("argument should be a Buffer");if(O||(O=0),!j&&j!==0&&(j=this.length),T>=w.length&&(T=w.length),T||(T=0),j>0&&j<O&&(j=O),j===O||w.length===0||this.length===0)return 0;if(T<0)throw new RangeError("targetStart out of bounds");if(O<0||O>=this.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("sourceEnd out of bounds");j>this.length&&(j=this.length),w.length-T<j-O&&(j=w.length-T+O);const V=j-O;return this===w&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(T,O,j):Uint8Array.prototype.set.call(w,this.subarray(O,j),T),V},a.prototype.fill=function(w,T,O,j){if(typeof w=="string"){if(typeof T=="string"?(j=T,T=0,O=this.length):typeof O=="string"&&(j=O,O=this.length),j!==void 0&&typeof j!="string")throw new TypeError("encoding must be a string");if(typeof j=="string"&&!a.isEncoding(j))throw new TypeError("Unknown encoding: "+j);if(w.length===1){const J=w.charCodeAt(0);(j==="utf8"&&J<128||j==="latin1")&&(w=J)}}else typeof w=="number"?w=w&255:typeof w=="boolean"&&(w=Number(w));if(T<0||this.length<T||this.length<O)throw new RangeError("Out of range index");if(O<=T)return this;T=T>>>0,O=O===void 0?this.length:O>>>0,w||(w=0);let V;if(typeof w=="number")for(V=T;V<O;++V)this[V]=w;else{const J=a.isBuffer(w)?w:a.from(w,j),G=J.length;if(G===0)throw new TypeError('The value "'+w+'" is invalid for argument "value"');for(V=0;V<O-T;++V)this[V+T]=J[V%G]}return this};const S={};function M(L,w,T){S[L]=class extends T{constructor(){super(),Object.defineProperty(this,"message",{value:w.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${L}]`,this.stack,delete this.name}get code(){return L}set code(j){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:j,writable:!0})}toString(){return`${this.name} [${L}]: ${this.message}`}}}M("ERR_BUFFER_OUT_OF_BOUNDS",function(L){return L?`${L} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),M("ERR_INVALID_ARG_TYPE",function(L,w){return`The "${L}" argument must be of type number. Received type ${typeof w}`},TypeError),M("ERR_OUT_OF_RANGE",function(L,w,T){let O=`The value of "${L}" is out of range.`,j=T;return Number.isInteger(T)&&Math.abs(T)>2**32?j=B(String(T)):typeof T=="bigint"&&(j=String(T),(T>BigInt(2)**BigInt(32)||T<-(BigInt(2)**BigInt(32)))&&(j=B(j)),j+="n"),O+=` It must be ${w}. Received ${j}`,O},RangeError);function B(L){let w="",T=L.length;const O=L[0]==="-"?1:0;for(;T>=O+4;T-=3)w=`_${L.slice(T-3,T)}${w}`;return`${L.slice(0,T)}${w}`}function z(L,w,T){K(w,"offset"),(L[w]===void 0||L[w+T]===void 0)&&st(w,L.length-(T+1))}function $(L,w,T,O,j,V){if(L>T||L<w){const J=typeof w=="bigint"?"n":"";let G;throw V>3?w===0||w===BigInt(0)?G=`>= 0${J} and < 2${J} ** ${(V+1)*8}${J}`:G=`>= -(2${J} ** ${(V+1)*8-1}${J}) and < 2 ** ${(V+1)*8-1}${J}`:G=`>= ${w}${J} and <= ${T}${J}`,new S.ERR_OUT_OF_RANGE("value",G,L)}z(O,j,V)}function K(L,w){if(typeof L!="number")throw new S.ERR_INVALID_ARG_TYPE(w,"number",L)}function st(L,w,T){throw Math.floor(L)!==L?(K(L,T),new S.ERR_OUT_OF_RANGE(T||"offset","an integer",L)):w<0?new S.ERR_BUFFER_OUT_OF_BOUNDS:new S.ERR_OUT_OF_RANGE(T||"offset",`>= ${T?1:0} and <= ${w}`,L)}const gt=/[^+/0-9A-Za-z-_]/g;function Pt(L){if(L=L.split("=")[0],L=L.trim().replace(gt,""),L.length<2)return"";for(;L.length%4!==0;)L=L+"=";return L}function xt(L,w){w=w||1/0;let T;const O=L.length;let j=null;const V=[];for(let J=0;J<O;++J){if(T=L.charCodeAt(J),T>55295&&T<57344){if(!j){if(T>56319){(w-=3)>-1&&V.push(239,191,189);continue}else if(J+1===O){(w-=3)>-1&&V.push(239,191,189);continue}j=T;continue}if(T<56320){(w-=3)>-1&&V.push(239,191,189),j=T;continue}T=(j-55296<<10|T-56320)+65536}else j&&(w-=3)>-1&&V.push(239,191,189);if(j=null,T<128){if((w-=1)<0)break;V.push(T)}else if(T<2048){if((w-=2)<0)break;V.push(T>>6|192,T&63|128)}else if(T<65536){if((w-=3)<0)break;V.push(T>>12|224,T>>6&63|128,T&63|128)}else if(T<1114112){if((w-=4)<0)break;V.push(T>>18|240,T>>12&63|128,T>>6&63|128,T&63|128)}else throw new Error("Invalid code point")}return V}function Lt(L){const w=[];for(let T=0;T<L.length;++T)w.push(L.charCodeAt(T)&255);return w}function qt(L,w){let T,O,j;const V=[];for(let J=0;J<L.length&&!((w-=2)<0);++J)T=L.charCodeAt(J),O=T>>8,j=T%256,V.push(j),V.push(O);return V}function Se(L){return t.toByteArray(Pt(L))}function pe(L,w,T,O){let j;for(j=0;j<O&&!(j+T>=w.length||j>=L.length);++j)w[j+T]=L[j];return j}function ie(L,w){return L instanceof w||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===w.name}function tr(L){return L!==L}const po=function(){const L="0123456789abcdef",w=new Array(256);for(let T=0;T<16;++T){const O=T*16;for(let j=0;j<16;++j)w[O+j]=L[T]+L[j]}return w}();function Be(L){return typeof BigInt>"u"?Vr:L}function Vr(){throw new Error("BigInt not supported")}}(Ll)),Ll}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var np;function U1(){return np||(np=1,function(r,t){var e=Y1(),i=e.Buffer;function n(s,a){for(var l in s)a[l]=s[l]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?r.exports=e:(n(e,t),t.Buffer=o);function o(s,a,l){return i(s,a,l)}o.prototype=Object.create(i.prototype),n(i,o),o.from=function(s,a,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return i(s,a,l)},o.alloc=function(s,a,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var c=i(s);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},o.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return i(s)},o.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(s)}}(jo,jo.exports)),jo.exports}var op;function z1(){if(op)return Dl;op=1;var r=U1().Buffer,t=r.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function e(y){if(!y)return"utf8";for(var v;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(v)return;y=(""+y).toLowerCase(),v=!0}}function i(y){var v=e(y);if(typeof v!="string"&&(r.isEncoding===t||!t(y)))throw new Error("Unknown encoding: "+y);return v||y}Dl.StringDecoder=n;function n(y){this.encoding=i(y);var v;switch(this.encoding){case"utf16le":this.text=g,this.end=u,v=4;break;case"utf8":this.fillLast=l,v=4;break;case"base64":this.text=h,this.end=f,v=3;break;default:this.write=I,this.end=m;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(v)}n.prototype.write=function(y){if(y.length===0)return"";var v,p;if(this.lastNeed){if(v=this.fillLast(y),v===void 0)return"";p=this.lastNeed,this.lastNeed=0}else p=0;return p<y.length?v?v+this.text(y,p):this.text(y,p):v||""},n.prototype.end=d,n.prototype.text=c,n.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function o(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function s(y,v,p){var _=v.length-1;if(_<p)return 0;var A=o(v[_]);return A>=0?(A>0&&(y.lastNeed=A-1),A):--_<p||A===-2?0:(A=o(v[_]),A>=0?(A>0&&(y.lastNeed=A-2),A):--_<p||A===-2?0:(A=o(v[_]),A>=0?(A>0&&(A===2?A=0:y.lastNeed=A-3),A):0))}function a(y,v,p){if((v[0]&192)!==128)return y.lastNeed=0,"�";if(y.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return y.lastNeed=1,"�";if(y.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return y.lastNeed=2,"�"}}function l(y){var v=this.lastTotal-this.lastNeed,p=a(this,y);if(p!==void 0)return p;if(this.lastNeed<=y.length)return y.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,v,0,y.length),this.lastNeed-=y.length}function c(y,v){var p=s(this,y,v);if(!this.lastNeed)return y.toString("utf8",v);this.lastTotal=p;var _=y.length-(p-this.lastNeed);return y.copy(this.lastChar,0,_),y.toString("utf8",v,_)}function d(y){var v=y&&y.length?this.write(y):"";return this.lastNeed?v+"�":v}function g(y,v){if((y.length-v)%2===0){var p=y.toString("utf16le",v);if(p){var _=p.charCodeAt(p.length-1);if(_>=55296&&_<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],p.slice(0,-1)}return p}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",v,y.length-1)}function u(y){var v=y&&y.length?this.write(y):"";if(this.lastNeed){var p=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,p)}return v}function h(y,v){var p=(y.length-v)%3;return p===0?y.toString("base64",v):(this.lastNeed=3-p,this.lastTotal=3,p===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",v,y.length-p))}function f(y){var v=y&&y.length?this.write(y):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function I(y){return y.toString(this.encoding)}function m(y){return y&&y.length?this.write(y):""}return Dl}var sp;function V1(){return sp||(sp=1,function(r){(function(t){t.parser=function(D,S){return new i(D,S)},t.SAXParser=i,t.SAXStream=d,t.createStream=c,t.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function i(D,S){if(!(this instanceof i))return new i(D,S);var M=this;o(M),M.q=M.c="",M.bufferCheckPosition=t.MAX_BUFFER_LENGTH,M.opt=S||{},M.opt.lowercase=M.opt.lowercase||M.opt.lowercasetags,M.looseCase=M.opt.lowercase?"toLowerCase":"toUpperCase",M.tags=[],M.closed=M.closedRoot=M.sawRoot=!1,M.tag=M.error=null,M.strict=!!D,M.noscript=!!(D||M.opt.noscript),M.state=C.BEGIN,M.strictEntities=M.opt.strictEntities,M.ENTITIES=M.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),M.attribList=[],M.opt.xmlns&&(M.ns=Object.create(I)),M.trackPosition=M.opt.position!==!1,M.trackPosition&&(M.position=M.line=M.column=0),F(M,"onready")}Object.create||(Object.create=function(D){function S(){}S.prototype=D;var M=new S;return M}),Object.keys||(Object.keys=function(D){var S=[];for(var M in D)D.hasOwnProperty(M)&&S.push(M);return S});function n(D){for(var S=Math.max(t.MAX_BUFFER_LENGTH,10),M=0,B=0,z=e.length;B<z;B++){var $=D[e[B]].length;if($>S)switch(e[B]){case"textNode":Z(D);break;case"cdata":R(D,"oncdata",D.cdata),D.cdata="";break;case"script":R(D,"onscript",D.script),D.script="";break;default:W(D,"Max buffer length exceeded: "+e[B])}M=Math.max(M,$)}var K=t.MAX_BUFFER_LENGTH-M;D.bufferCheckPosition=K+D.position}function o(D){for(var S=0,M=e.length;S<M;S++)D[e[S]]=""}function s(D){Z(D),D.cdata!==""&&(R(D,"oncdata",D.cdata),D.cdata=""),D.script!==""&&(R(D,"onscript",D.script),D.script="")}i.prototype={end:function(){U(this)},write:dt,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var a;try{a=W1().Stream}catch{a=function(){}}a||(a=function(){});var l=t.EVENTS.filter(function(D){return D!=="error"&&D!=="end"});function c(D,S){return new d(D,S)}function d(D,S){if(!(this instanceof d))return new d(D,S);a.apply(this),this._parser=new i(D,S),this.writable=!0,this.readable=!0;var M=this;this._parser.onend=function(){M.emit("end")},this._parser.onerror=function(B){M.emit("error",B),M._parser.error=null},this._decoder=null,l.forEach(function(B){Object.defineProperty(M,"on"+B,{get:function(){return M._parser["on"+B]},set:function(z){if(!z)return M.removeAllListeners(B),M._parser["on"+B]=z,z;M.on(B,z)},enumerable:!0,configurable:!1})})}d.prototype=Object.create(a.prototype,{constructor:{value:d}}),d.prototype.write=function(D){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(D)){if(!this._decoder){var S=z1().StringDecoder;this._decoder=new S("utf8")}D=this._decoder.write(D)}return this._parser.write(D.toString()),this.emit("data",D),!0},d.prototype.end=function(D){return D&&D.length&&this.write(D),this._parser.end(),!0},d.prototype.on=function(D,S){var M=this;return!M._parser["on"+D]&&l.indexOf(D)!==-1&&(M._parser["on"+D]=function(){var B=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);B.splice(0,0,D),M.emit.apply(M,B)}),a.prototype.on.call(M,D,S)};var g="[CDATA[",u="DOCTYPE",h="http://www.w3.org/XML/1998/namespace",f="http://www.w3.org/2000/xmlns/",I={xml:h,xmlns:f},m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function _(D){return D===" "||D===`
`||D==="\r"||D==="	"}function A(D){return D==='"'||D==="'"}function b(D){return D===">"||_(D)}function P(D,S){return D.test(S)}function E(D,S){return!P(D,S)}var C=0;t.STATE={BEGIN:C++,BEGIN_WHITESPACE:C++,TEXT:C++,TEXT_ENTITY:C++,OPEN_WAKA:C++,SGML_DECL:C++,SGML_DECL_QUOTED:C++,DOCTYPE:C++,DOCTYPE_QUOTED:C++,DOCTYPE_DTD:C++,DOCTYPE_DTD_QUOTED:C++,COMMENT_STARTING:C++,COMMENT:C++,COMMENT_ENDING:C++,COMMENT_ENDED:C++,CDATA:C++,CDATA_ENDING:C++,CDATA_ENDING_2:C++,PROC_INST:C++,PROC_INST_BODY:C++,PROC_INST_ENDING:C++,OPEN_TAG:C++,OPEN_TAG_SLASH:C++,ATTRIB:C++,ATTRIB_NAME:C++,ATTRIB_NAME_SAW_WHITE:C++,ATTRIB_VALUE:C++,ATTRIB_VALUE_QUOTED:C++,ATTRIB_VALUE_CLOSED:C++,ATTRIB_VALUE_UNQUOTED:C++,ATTRIB_VALUE_ENTITY_Q:C++,ATTRIB_VALUE_ENTITY_U:C++,CLOSE_TAG:C++,CLOSE_TAG_SAW_WHITE:C++,SCRIPT:C++,SCRIPT_ENDING:C++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(D){var S=t.ENTITIES[D],M=typeof S=="number"?String.fromCharCode(S):S;t.ENTITIES[D]=M});for(var x in t.STATE)t.STATE[t.STATE[x]]=x;C=t.STATE;function F(D,S,M){D[S]&&D[S](M)}function R(D,S,M){D.textNode&&Z(D),F(D,S,M)}function Z(D){D.textNode=H(D.opt,D.textNode),D.textNode&&F(D,"ontext",D.textNode),D.textNode=""}function H(D,S){return D.trim&&(S=S.trim()),D.normalize&&(S=S.replace(/\s+/g," ")),S}function W(D,S){return Z(D),D.trackPosition&&(S+=`
Line: `+D.line+`
Column: `+D.column+`
Char: `+D.c),S=new Error(S),D.error=S,F(D,"onerror",S),D}function U(D){return D.sawRoot&&!D.closedRoot&&X(D,"Unclosed root tag"),D.state!==C.BEGIN&&D.state!==C.BEGIN_WHITESPACE&&D.state!==C.TEXT&&W(D,"Unexpected end"),Z(D),D.c="",D.closed=!0,F(D,"onend"),i.call(D,D.strict,D.opt),D}function X(D,S){if(typeof D!="object"||!(D instanceof i))throw new Error("bad call to strictFail");D.strict&&W(D,S)}function ot(D){D.strict||(D.tagName=D.tagName[D.looseCase]());var S=D.tags[D.tags.length-1]||D,M=D.tag={name:D.tagName,attributes:{}};D.opt.xmlns&&(M.ns=S.ns),D.attribList.length=0,R(D,"onopentagstart",M)}function lt(D,S){var M=D.indexOf(":"),B=M<0?["",D]:D.split(":"),z=B[0],$=B[1];return S&&D==="xmlns"&&(z="xmlns",$=""),{prefix:z,local:$}}function et(D){if(D.strict||(D.attribName=D.attribName[D.looseCase]()),D.attribList.indexOf(D.attribName)!==-1||D.tag.attributes.hasOwnProperty(D.attribName)){D.attribName=D.attribValue="";return}if(D.opt.xmlns){var S=lt(D.attribName,!0),M=S.prefix,B=S.local;if(M==="xmlns")if(B==="xml"&&D.attribValue!==h)X(D,"xml: prefix must be bound to "+h+`
Actual: `+D.attribValue);else if(B==="xmlns"&&D.attribValue!==f)X(D,"xmlns: prefix must be bound to "+f+`
Actual: `+D.attribValue);else{var z=D.tag,$=D.tags[D.tags.length-1]||D;z.ns===$.ns&&(z.ns=Object.create($.ns)),z.ns[B]=D.attribValue}D.attribList.push([D.attribName,D.attribValue])}else D.tag.attributes[D.attribName]=D.attribValue,R(D,"onattribute",{name:D.attribName,value:D.attribValue});D.attribName=D.attribValue=""}function Q(D,S){if(D.opt.xmlns){var M=D.tag,B=lt(D.tagName);M.prefix=B.prefix,M.local=B.local,M.uri=M.ns[B.prefix]||"",M.prefix&&!M.uri&&(X(D,"Unbound namespace prefix: "+JSON.stringify(D.tagName)),M.uri=B.prefix);var z=D.tags[D.tags.length-1]||D;M.ns&&z.ns!==M.ns&&Object.keys(M.ns).forEach(function(ie){R(D,"onopennamespace",{prefix:ie,uri:M.ns[ie]})});for(var $=0,K=D.attribList.length;$<K;$++){var st=D.attribList[$],gt=st[0],Pt=st[1],xt=lt(gt,!0),Lt=xt.prefix,qt=xt.local,Se=Lt===""?"":M.ns[Lt]||"",pe={name:gt,value:Pt,prefix:Lt,local:qt,uri:Se};Lt&&Lt!=="xmlns"&&!Se&&(X(D,"Unbound namespace prefix: "+JSON.stringify(Lt)),pe.uri=Lt),D.tag.attributes[gt]=pe,R(D,"onattribute",pe)}D.attribList.length=0}D.tag.isSelfClosing=!!S,D.sawRoot=!0,D.tags.push(D.tag),R(D,"onopentag",D.tag),S||(!D.noscript&&D.tagName.toLowerCase()==="script"?D.state=C.SCRIPT:D.state=C.TEXT,D.tag=null,D.tagName=""),D.attribName=D.attribValue="",D.attribList.length=0}function it(D){if(!D.tagName){X(D,"Weird empty close tag."),D.textNode+="</>",D.state=C.TEXT;return}if(D.script){if(D.tagName!=="script"){D.script+="</"+D.tagName+">",D.tagName="",D.state=C.SCRIPT;return}R(D,"onscript",D.script),D.script=""}var S=D.tags.length,M=D.tagName;D.strict||(M=M[D.looseCase]());for(var B=M;S--;){var z=D.tags[S];if(z.name!==B)X(D,"Unexpected close tag");else break}if(S<0){X(D,"Unmatched closing tag: "+D.tagName),D.textNode+="</"+D.tagName+">",D.state=C.TEXT;return}D.tagName=M;for(var $=D.tags.length;$-- >S;){var K=D.tag=D.tags.pop();D.tagName=D.tag.name,R(D,"onclosetag",D.tagName);var st={};for(var gt in K.ns)st[gt]=K.ns[gt];var Pt=D.tags[D.tags.length-1]||D;D.opt.xmlns&&K.ns!==Pt.ns&&Object.keys(K.ns).forEach(function(xt){var Lt=K.ns[xt];R(D,"onclosenamespace",{prefix:xt,uri:Lt})})}S===0&&(D.closedRoot=!0),D.tagName=D.attribValue=D.attribName="",D.attribList.length=0,D.state=C.TEXT}function at(D){var S=D.entity,M=S.toLowerCase(),B,z="";return D.ENTITIES[S]?D.ENTITIES[S]:D.ENTITIES[M]?D.ENTITIES[M]:(S=M,S.charAt(0)==="#"&&(S.charAt(1)==="x"?(S=S.slice(2),B=parseInt(S,16),z=B.toString(16)):(S=S.slice(1),B=parseInt(S,10),z=B.toString(10))),S=S.replace(/^0+/,""),isNaN(B)||z.toLowerCase()!==S?(X(D,"Invalid character entity"),"&"+D.entity+";"):String.fromCodePoint(B))}function N(D,S){S==="<"?(D.state=C.OPEN_WAKA,D.startTagPosition=D.position):_(S)||(X(D,"Non-whitespace before first tag."),D.textNode=S,D.state=C.TEXT)}function It(D,S){var M="";return S<D.length&&(M=D.charAt(S)),M}function dt(D){var S=this;if(this.error)throw this.error;if(S.closed)return W(S,"Cannot write after close. Assign an onready handler.");if(D===null)return U(S);typeof D=="object"&&(D=D.toString());for(var M=0,B="";B=It(D,M++),S.c=B,!!B;)switch(S.trackPosition&&(S.position++,B===`
`?(S.line++,S.column=0):S.column++),S.state){case C.BEGIN:if(S.state=C.BEGIN_WHITESPACE,B==="\uFEFF")continue;N(S,B);continue;case C.BEGIN_WHITESPACE:N(S,B);continue;case C.TEXT:if(S.sawRoot&&!S.closedRoot){for(var z=M-1;B&&B!=="<"&&B!=="&";)B=It(D,M++),B&&S.trackPosition&&(S.position++,B===`
`?(S.line++,S.column=0):S.column++);S.textNode+=D.substring(z,M-1)}B==="<"&&!(S.sawRoot&&S.closedRoot&&!S.strict)?(S.state=C.OPEN_WAKA,S.startTagPosition=S.position):(!_(B)&&(!S.sawRoot||S.closedRoot)&&X(S,"Text data outside of root node."),B==="&"?S.state=C.TEXT_ENTITY:S.textNode+=B);continue;case C.SCRIPT:B==="<"?S.state=C.SCRIPT_ENDING:S.script+=B;continue;case C.SCRIPT_ENDING:B==="/"?S.state=C.CLOSE_TAG:(S.script+="<"+B,S.state=C.SCRIPT);continue;case C.OPEN_WAKA:if(B==="!")S.state=C.SGML_DECL,S.sgmlDecl="";else if(!_(B))if(P(m,B))S.state=C.OPEN_TAG,S.tagName=B;else if(B==="/")S.state=C.CLOSE_TAG,S.tagName="";else if(B==="?")S.state=C.PROC_INST,S.procInstName=S.procInstBody="";else{if(X(S,"Unencoded <"),S.startTagPosition+1<S.position){var $=S.position-S.startTagPosition;B=new Array($).join(" ")+B}S.textNode+="<"+B,S.state=C.TEXT}continue;case C.SGML_DECL:(S.sgmlDecl+B).toUpperCase()===g?(R(S,"onopencdata"),S.state=C.CDATA,S.sgmlDecl="",S.cdata=""):S.sgmlDecl+B==="--"?(S.state=C.COMMENT,S.comment="",S.sgmlDecl=""):(S.sgmlDecl+B).toUpperCase()===u?(S.state=C.DOCTYPE,(S.doctype||S.sawRoot)&&X(S,"Inappropriately located doctype declaration"),S.doctype="",S.sgmlDecl=""):B===">"?(R(S,"onsgmldeclaration",S.sgmlDecl),S.sgmlDecl="",S.state=C.TEXT):(A(B)&&(S.state=C.SGML_DECL_QUOTED),S.sgmlDecl+=B);continue;case C.SGML_DECL_QUOTED:B===S.q&&(S.state=C.SGML_DECL,S.q=""),S.sgmlDecl+=B;continue;case C.DOCTYPE:B===">"?(S.state=C.TEXT,R(S,"ondoctype",S.doctype),S.doctype=!0):(S.doctype+=B,B==="["?S.state=C.DOCTYPE_DTD:A(B)&&(S.state=C.DOCTYPE_QUOTED,S.q=B));continue;case C.DOCTYPE_QUOTED:S.doctype+=B,B===S.q&&(S.q="",S.state=C.DOCTYPE);continue;case C.DOCTYPE_DTD:S.doctype+=B,B==="]"?S.state=C.DOCTYPE:A(B)&&(S.state=C.DOCTYPE_DTD_QUOTED,S.q=B);continue;case C.DOCTYPE_DTD_QUOTED:S.doctype+=B,B===S.q&&(S.state=C.DOCTYPE_DTD,S.q="");continue;case C.COMMENT:B==="-"?S.state=C.COMMENT_ENDING:S.comment+=B;continue;case C.COMMENT_ENDING:B==="-"?(S.state=C.COMMENT_ENDED,S.comment=H(S.opt,S.comment),S.comment&&R(S,"oncomment",S.comment),S.comment=""):(S.comment+="-"+B,S.state=C.COMMENT);continue;case C.COMMENT_ENDED:B!==">"?(X(S,"Malformed comment"),S.comment+="--"+B,S.state=C.COMMENT):S.state=C.TEXT;continue;case C.CDATA:B==="]"?S.state=C.CDATA_ENDING:S.cdata+=B;continue;case C.CDATA_ENDING:B==="]"?S.state=C.CDATA_ENDING_2:(S.cdata+="]"+B,S.state=C.CDATA);continue;case C.CDATA_ENDING_2:B===">"?(S.cdata&&R(S,"oncdata",S.cdata),R(S,"onclosecdata"),S.cdata="",S.state=C.TEXT):B==="]"?S.cdata+="]":(S.cdata+="]]"+B,S.state=C.CDATA);continue;case C.PROC_INST:B==="?"?S.state=C.PROC_INST_ENDING:_(B)?S.state=C.PROC_INST_BODY:S.procInstName+=B;continue;case C.PROC_INST_BODY:if(!S.procInstBody&&_(B))continue;B==="?"?S.state=C.PROC_INST_ENDING:S.procInstBody+=B;continue;case C.PROC_INST_ENDING:B===">"?(R(S,"onprocessinginstruction",{name:S.procInstName,body:S.procInstBody}),S.procInstName=S.procInstBody="",S.state=C.TEXT):(S.procInstBody+="?"+B,S.state=C.PROC_INST_BODY);continue;case C.OPEN_TAG:P(y,B)?S.tagName+=B:(ot(S),B===">"?Q(S):B==="/"?S.state=C.OPEN_TAG_SLASH:(_(B)||X(S,"Invalid character in tag name"),S.state=C.ATTRIB));continue;case C.OPEN_TAG_SLASH:B===">"?(Q(S,!0),it(S)):(X(S,"Forward-slash in opening tag not followed by >"),S.state=C.ATTRIB);continue;case C.ATTRIB:if(_(B))continue;B===">"?Q(S):B==="/"?S.state=C.OPEN_TAG_SLASH:P(m,B)?(S.attribName=B,S.attribValue="",S.state=C.ATTRIB_NAME):X(S,"Invalid attribute name");continue;case C.ATTRIB_NAME:B==="="?S.state=C.ATTRIB_VALUE:B===">"?(X(S,"Attribute without value"),S.attribValue=S.attribName,et(S),Q(S)):_(B)?S.state=C.ATTRIB_NAME_SAW_WHITE:P(y,B)?S.attribName+=B:X(S,"Invalid attribute name");continue;case C.ATTRIB_NAME_SAW_WHITE:if(B==="=")S.state=C.ATTRIB_VALUE;else{if(_(B))continue;X(S,"Attribute without value"),S.tag.attributes[S.attribName]="",S.attribValue="",R(S,"onattribute",{name:S.attribName,value:""}),S.attribName="",B===">"?Q(S):P(m,B)?(S.attribName=B,S.state=C.ATTRIB_NAME):(X(S,"Invalid attribute name"),S.state=C.ATTRIB)}continue;case C.ATTRIB_VALUE:if(_(B))continue;A(B)?(S.q=B,S.state=C.ATTRIB_VALUE_QUOTED):(X(S,"Unquoted attribute value"),S.state=C.ATTRIB_VALUE_UNQUOTED,S.attribValue=B);continue;case C.ATTRIB_VALUE_QUOTED:if(B!==S.q){B==="&"?S.state=C.ATTRIB_VALUE_ENTITY_Q:S.attribValue+=B;continue}et(S),S.q="",S.state=C.ATTRIB_VALUE_CLOSED;continue;case C.ATTRIB_VALUE_CLOSED:_(B)?S.state=C.ATTRIB:B===">"?Q(S):B==="/"?S.state=C.OPEN_TAG_SLASH:P(m,B)?(X(S,"No whitespace between attributes"),S.attribName=B,S.attribValue="",S.state=C.ATTRIB_NAME):X(S,"Invalid attribute name");continue;case C.ATTRIB_VALUE_UNQUOTED:if(!b(B)){B==="&"?S.state=C.ATTRIB_VALUE_ENTITY_U:S.attribValue+=B;continue}et(S),B===">"?Q(S):S.state=C.ATTRIB;continue;case C.CLOSE_TAG:if(S.tagName)B===">"?it(S):P(y,B)?S.tagName+=B:S.script?(S.script+="</"+S.tagName,S.tagName="",S.state=C.SCRIPT):(_(B)||X(S,"Invalid tagname in closing tag"),S.state=C.CLOSE_TAG_SAW_WHITE);else{if(_(B))continue;E(m,B)?S.script?(S.script+="</"+B,S.state=C.SCRIPT):X(S,"Invalid tagname in closing tag."):S.tagName=B}continue;case C.CLOSE_TAG_SAW_WHITE:if(_(B))continue;B===">"?it(S):X(S,"Invalid characters in closing tag");continue;case C.TEXT_ENTITY:case C.ATTRIB_VALUE_ENTITY_Q:case C.ATTRIB_VALUE_ENTITY_U:var K,st;switch(S.state){case C.TEXT_ENTITY:K=C.TEXT,st="textNode";break;case C.ATTRIB_VALUE_ENTITY_Q:K=C.ATTRIB_VALUE_QUOTED,st="attribValue";break;case C.ATTRIB_VALUE_ENTITY_U:K=C.ATTRIB_VALUE_UNQUOTED,st="attribValue";break}if(B===";")if(S.opt.unparsedEntities){var gt=at(S);S.entity="",S.state=K,S.write(gt)}else S[st]+=at(S),S.entity="",S.state=K;else P(S.entity.length?p:v,B)?S.entity+=B:(X(S,"Invalid character in entity name"),S[st]+="&"+S.entity+B,S.entity="",S.state=K);continue;default:throw new Error(S,"Unknown state: "+S.state)}return S.position>=S.bufferCheckPosition&&n(S),S}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var D=String.fromCharCode,S=Math.floor,M=function(){var B=16384,z=[],$,K,st=-1,gt=arguments.length;if(!gt)return"";for(var Pt="";++st<gt;){var xt=Number(arguments[st]);if(!isFinite(xt)||xt<0||xt>1114111||S(xt)!==xt)throw RangeError("Invalid code point: "+xt);xt<=65535?z.push(xt):(xt-=65536,$=(xt>>10)+55296,K=xt%1024+56320,z.push($,K)),(st+1===gt||z.length>B)&&(Pt+=D.apply(null,z),z.length=0)}return Pt};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:M,configurable:!0,writable:!0}):String.fromCodePoint=M}()})(r)}(El)),El}var Wo={exports:{}},ap;function J1(){if(ap)return Wo.exports;ap=1;var r=typeof Reflect=="object"?Reflect:null,t=r&&typeof r.apply=="function"?r.apply:function(A,b,P){return Function.prototype.apply.call(A,b,P)},e;r&&typeof r.ownKeys=="function"?e=r.ownKeys:Object.getOwnPropertySymbols?e=function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:e=function(A){return Object.getOwnPropertyNames(A)};function i(_){console&&console.warn&&console.warn(_)}var n=Number.isNaN||function(A){return A!==A};function o(){o.init.call(this)}Wo.exports=o,Wo.exports.once=y,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(_){if(typeof _!="number"||_<0||n(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");s=_}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(A){if(typeof A!="number"||A<0||n(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this};function l(_){return _._maxListeners===void 0?o.defaultMaxListeners:_._maxListeners}o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(A){for(var b=[],P=1;P<arguments.length;P++)b.push(arguments[P]);var E=A==="error",C=this._events;if(C!==void 0)E=E&&C.error===void 0;else if(!E)return!1;if(E){var x;if(b.length>0&&(x=b[0]),x instanceof Error)throw x;var F=new Error("Unhandled error."+(x?" ("+x.message+")":""));throw F.context=x,F}var R=C[A];if(R===void 0)return!1;if(typeof R=="function")t(R,this,b);else for(var Z=R.length,H=f(R,Z),P=0;P<Z;++P)t(H[P],this,b);return!0};function c(_,A,b,P){var E,C,x;if(a(b),C=_._events,C===void 0?(C=_._events=Object.create(null),_._eventsCount=0):(C.newListener!==void 0&&(_.emit("newListener",A,b.listener?b.listener:b),C=_._events),x=C[A]),x===void 0)x=C[A]=b,++_._eventsCount;else if(typeof x=="function"?x=C[A]=P?[b,x]:[x,b]:P?x.unshift(b):x.push(b),E=l(_),E>0&&x.length>E&&!x.warned){x.warned=!0;var F=new Error("Possible EventEmitter memory leak detected. "+x.length+" "+String(A)+" listeners added. Use emitter.setMaxListeners() to increase limit");F.name="MaxListenersExceededWarning",F.emitter=_,F.type=A,F.count=x.length,i(F)}return _}o.prototype.addListener=function(A,b){return c(this,A,b,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(A,b){return c(this,A,b,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(_,A,b){var P={fired:!1,wrapFn:void 0,target:_,type:A,listener:b},E=d.bind(P);return E.listener=b,P.wrapFn=E,E}o.prototype.once=function(A,b){return a(b),this.on(A,g(this,A,b)),this},o.prototype.prependOnceListener=function(A,b){return a(b),this.prependListener(A,g(this,A,b)),this},o.prototype.removeListener=function(A,b){var P,E,C,x,F;if(a(b),E=this._events,E===void 0)return this;if(P=E[A],P===void 0)return this;if(P===b||P.listener===b)--this._eventsCount===0?this._events=Object.create(null):(delete E[A],E.removeListener&&this.emit("removeListener",A,P.listener||b));else if(typeof P!="function"){for(C=-1,x=P.length-1;x>=0;x--)if(P[x]===b||P[x].listener===b){F=P[x].listener,C=x;break}if(C<0)return this;C===0?P.shift():I(P,C),P.length===1&&(E[A]=P[0]),E.removeListener!==void 0&&this.emit("removeListener",A,F||b)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(A){var b,P,E;if(P=this._events,P===void 0)return this;if(P.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):P[A]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete P[A]),this;if(arguments.length===0){var C=Object.keys(P),x;for(E=0;E<C.length;++E)x=C[E],x!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(b=P[A],typeof b=="function")this.removeListener(A,b);else if(b!==void 0)for(E=b.length-1;E>=0;E--)this.removeListener(A,b[E]);return this};function u(_,A,b){var P=_._events;if(P===void 0)return[];var E=P[A];return E===void 0?[]:typeof E=="function"?b?[E.listener||E]:[E]:b?m(E):f(E,E.length)}o.prototype.listeners=function(A){return u(this,A,!0)},o.prototype.rawListeners=function(A){return u(this,A,!1)},o.listenerCount=function(_,A){return typeof _.listenerCount=="function"?_.listenerCount(A):h.call(_,A)},o.prototype.listenerCount=h;function h(_){var A=this._events;if(A!==void 0){var b=A[_];if(typeof b=="function")return 1;if(b!==void 0)return b.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]};function f(_,A){for(var b=new Array(A),P=0;P<A;++P)b[P]=_[P];return b}function I(_,A){for(;A+1<_.length;A++)_[A]=_[A+1];_.pop()}function m(_){for(var A=new Array(_.length),b=0;b<A.length;++b)A[b]=_[b].listener||_[b];return A}function y(_,A){return new Promise(function(b,P){function E(x){_.removeListener(A,C),P(x)}function C(){typeof _.removeListener=="function"&&_.removeListener("error",E),b([].slice.call(arguments))}p(_,A,C,{once:!0}),A!=="error"&&v(_,E,{once:!0})})}function v(_,A,b){typeof _.on=="function"&&p(_,"error",A,b)}function p(_,A,b,P){if(typeof _.on=="function")P.once?_.once(A,b):_.on(A,b);else if(typeof _.addEventListener=="function")_.addEventListener(A,function E(C){P.once&&_.removeEventListener(A,E),b(C)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _)}return Wo.exports}var Bl={},up;function Q1(){return up||(up=1,function(){Bl.stripBOM=function(r){return r[0]==="\uFEFF"?r.substring(1):r}}.call(k)),Bl}var Ti={},lp;function Lm(){return lp||(lp=1,function(){var r;r=new RegExp(/(?!xmlns)^.*:/),Ti.normalize=function(t){return t.toLowerCase()},Ti.firstCharLowerCase=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},Ti.stripPrefix=function(t){return t.replace(r,"")},Ti.parseNumbers=function(t){return isNaN(t)||(t=t%1===0?parseInt(t,10):parseFloat(t)),t},Ti.parseBooleans=function(t){return/^(?:true|false)$/i.test(t)&&(t=t.toLowerCase()==="true"),t}}.call(k)),Ti}var Rl={},hp;function $1(){if(hp)return Rl;hp=1,Rl.every=function(o){return new e(o)};var r={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5};for(var t in r)t==="millisecond"?r.ms=r[t]:r[t.charAt(0)]=r[t],r[t+"s"]=r[t];function e(o){this.count=0;var s=n(o);s&&(this.time=Number(s[0])*r[s[1]],this.type=s[1])}e.prototype.do=function(o){this.time&&(this.interval=setInterval(a,this.time));var s=this;function a(){s.count++,o.call(s)}return this},e.prototype.stop=function(){return this.interval&&(clearInterval(this.interval),delete this.interval),this};var i=/^\s*(\d+(?:\.\d+)?)\s*([a-z]+)\s*$/;function n(o){var s=o.match(i);return s&&r[s[2]]?s.slice(1):null}return Rl}var cp;function K1(){return cp||(cp=1,function(r){(function(){var t,e,i,n,o,s,a,l,c=function(u,h){return function(){return u.apply(h,arguments)}},d=function(u,h){for(var f in h)g.call(h,f)&&(u[f]=h[f]);function I(){this.constructor=u}return I.prototype=h.prototype,u.prototype=new I,u.__super__=h.prototype,u},g={}.hasOwnProperty;a=V1(),i=J1(),t=Q1(),s=Lm(),l=$1().setImmediate,e=Mc().defaults,n=function(u){return typeof u=="object"&&u!=null&&Object.keys(u).length===0},o=function(u,h,f){var I,m,y;for(I=0,m=u.length;I<m;I++)y=u[I],h=y(h,f);return h},r.Parser=function(u){d(h,u);function h(f){this.parseStringPromise=c(this.parseStringPromise,this),this.parseString=c(this.parseString,this),this.reset=c(this.reset,this),this.assignOrPush=c(this.assignOrPush,this),this.processAsync=c(this.processAsync,this);var I,m,y;if(!(this instanceof r.Parser))return new r.Parser(f);this.options={},m=e["0.2"];for(I in m)g.call(m,I)&&(y=m[I],this.options[I]=y);for(I in f)g.call(f,I)&&(y=f[I],this.options[I]=y);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(s.normalize)),this.reset()}return h.prototype.processAsync=function(){var f,I;try{return this.remaining.length<=this.options.chunkSize?(f=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(f),this.saxParser.close()):(f=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(f),l(this.processAsync))}catch(m){if(I=m,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(I)}},h.prototype.assignOrPush=function(f,I,m){return I in f?(f[I]instanceof Array||(f[I]=[f[I]]),f[I].push(m)):this.options.explicitArray?f[I]=[m]:f[I]=m},h.prototype.reset=function(){var f,I,m,y;return this.removeAllListeners(),this.saxParser=a.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(v){return function(p){if(v.saxParser.resume(),!v.saxParser.errThrown)return v.saxParser.errThrown=!0,v.emit("error",p)}}(this),this.saxParser.onend=function(v){return function(){if(!v.saxParser.ended)return v.saxParser.ended=!0,v.emit("end",v.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,y=[],f=this.options.attrkey,I=this.options.charkey,this.saxParser.onopentag=function(v){return function(p){var _,A,b,P,E;if(b={},b[I]="",!v.options.ignoreAttrs){E=p.attributes;for(_ in E)g.call(E,_)&&(!(f in b)&&!v.options.mergeAttrs&&(b[f]={}),A=v.options.attrValueProcessors?o(v.options.attrValueProcessors,p.attributes[_],_):p.attributes[_],P=v.options.attrNameProcessors?o(v.options.attrNameProcessors,_):_,v.options.mergeAttrs?v.assignOrPush(b,P,A):b[f][P]=A)}return b["#name"]=v.options.tagNameProcessors?o(v.options.tagNameProcessors,p.name):p.name,v.options.xmlns&&(b[v.options.xmlnskey]={uri:p.uri,local:p.local}),y.push(b)}}(this),this.saxParser.onclosetag=function(v){return function(){var p,_,A,b,P,E,C,x,F,R;if(E=y.pop(),P=E["#name"],(!v.options.explicitChildren||!v.options.preserveChildrenOrder)&&delete E["#name"],E.cdata===!0&&(p=E.cdata,delete E.cdata),F=y[y.length-1],E[I].match(/^\s*$/)&&!p?(_=E[I],delete E[I]):(v.options.trim&&(E[I]=E[I].trim()),v.options.normalize&&(E[I]=E[I].replace(/\s{2,}/g," ").trim()),E[I]=v.options.valueProcessors?o(v.options.valueProcessors,E[I],P):E[I],Object.keys(E).length===1&&I in E&&!v.EXPLICIT_CHARKEY&&(E=E[I])),n(E)&&(E=v.options.emptyTag!==""?v.options.emptyTag:_),v.options.validator!=null&&(R="/"+function(){var Z,H,W;for(W=[],Z=0,H=y.length;Z<H;Z++)b=y[Z],W.push(b["#name"]);return W}().concat(P).join("/"),function(){var Z;try{return E=v.options.validator(R,F&&F[P],E)}catch(H){return Z=H,v.emit("error",Z)}}()),v.options.explicitChildren&&!v.options.mergeAttrs&&typeof E=="object"){if(!v.options.preserveChildrenOrder)b={},v.options.attrkey in E&&(b[v.options.attrkey]=E[v.options.attrkey],delete E[v.options.attrkey]),!v.options.charsAsChildren&&v.options.charkey in E&&(b[v.options.charkey]=E[v.options.charkey],delete E[v.options.charkey]),Object.getOwnPropertyNames(E).length>0&&(b[v.options.childkey]=E),E=b;else if(F){F[v.options.childkey]=F[v.options.childkey]||[],C={};for(A in E)g.call(E,A)&&(C[A]=E[A]);F[v.options.childkey].push(C),delete E["#name"],Object.keys(E).length===1&&I in E&&!v.EXPLICIT_CHARKEY&&(E=E[I])}}return y.length>0?v.assignOrPush(F,P,E):(v.options.explicitRoot&&(x=E,E={},E[P]=x),v.resultObject=E,v.saxParser.ended=!0,v.emit("end",v.resultObject))}}(this),m=function(v){return function(p){var _,A;if(A=y[y.length-1],A)return A[I]+=p,v.options.explicitChildren&&v.options.preserveChildrenOrder&&v.options.charsAsChildren&&(v.options.includeWhiteChars||p.replace(/\\n/g,"").trim()!=="")&&(A[v.options.childkey]=A[v.options.childkey]||[],_={"#name":"__text__"},_[I]=p,v.options.normalize&&(_[I]=_[I].replace(/\s{2,}/g," ").trim()),A[v.options.childkey].push(_)),A}}(this),this.saxParser.ontext=m,this.saxParser.oncdata=function(v){return function(p){var _;if(_=m(p),_)return _.cdata=!0}}()},h.prototype.parseString=function(f,I){var m;I!=null&&typeof I=="function"&&(this.on("end",function(y){return this.reset(),I(null,y)}),this.on("error",function(y){return this.reset(),I(y)}));try{return f=f.toString(),f.trim()===""?(this.emit("end",null),!0):(f=t.stripBOM(f),this.options.async?(this.remaining=f,l(this.processAsync),this.saxParser):this.saxParser.write(f).close())}catch(y){if(m=y,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw m}else return this.emit("error",m),this.saxParser.errThrown=!0}},h.prototype.parseStringPromise=function(f){return new Promise(function(I){return function(m,y){return I.parseString(f,function(v,p){return v?y(v):m(p)})}}(this))},h}(i),r.parseString=function(u,h,f){var I,m,y;return f!=null?(typeof f=="function"&&(I=f),typeof h=="object"&&(m=h)):(typeof h=="function"&&(I=h),m={}),y=new r.Parser(m),y.parseString(u,I)},r.parseStringPromise=function(u,h){var f,I;return typeof h=="object"&&(f=h),I=new r.Parser(f),I.parseStringPromise(u)}}).call(k)}(Tl)),Tl}(function(){var r,t,e,i,n=function(s,a){for(var l in a)o.call(a,l)&&(s[l]=a[l]);function c(){this.constructor=s}return c.prototype=a.prototype,s.prototype=new c,s.__super__=a.prototype,s},o={}.hasOwnProperty;t=Mc(),r=j1(),e=K1(),i=Lm(),si.defaults=t.defaults,si.processors=i,si.ValidationError=function(s){n(a,s);function a(l){this.message=l}return a}(Error),si.Builder=r.Builder,si.Parser=e.Parser,si.parseString=e.parseString,si.parseStringPromise=e.parseStringPromise}).call(k);var Bm={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.furnitureDataTransformers=r.formatFurnitureData=r.transformFirst=void 0;function t(s,a){return l=>{const c=l[0];return c===""?a:s(c)}}r.transformFirst=t;function e(s){return s==="1"}function i(s){return Number(s)}function n(s){return s}function o(s){const a=Object.keys(s),l={};return a.forEach(c=>{const d=c,g=r.furnitureDataTransformers[d];if(g!=null){const u=s[c];l[d]=g(u)}}),l}r.formatFurnitureData=o,r.furnitureDataTransformers={adurl:t(n,void 0),bc:t(e,!1),buyout:t(e,!1),canlayon:t(e,!1),cansiton:t(e,!1),canstandon:t(e,!1),defaultdir:t(i,0),description:t(n,void 0),environment:t(n,void 0),excludeddynamic:t(e,!1),furniline:t(n,void 0),name:t(n,void 0),offerid:t(i,void 0),rare:t(e,!1),rentbuyout:t(e,!1),rentofferid:t(i,void 0),revision:t(i,void 0),specialtype:t(i,void 0),xdim:t(i,void 0),ydim:t(i,void 0)}})(Bm);Object.defineProperty(ro,"__esModule",{value:!0});ro.FurnitureData=void 0;const q1=si,tE=Bm;class Uc{constructor(t){this._getFurniData=t,this._data=this._prepareData()}static create(t=""){return new Uc(async()=>fetch(`${t}/furnidata.xml`).then(e=>e.text()))}async getRevisionForType(t){const e=await this.getInfo(t);return e?.revision}async getInfo(t){return(await this._data).typeToInfo[t]}async getTypeById(t,e){const i=await this._data,n=e!="floor"?i.floorIdToType[t]:i.wallIdToType[t];if(n!=null)return n}async getInfoForFurniture(t){if(t.id!=null){const e=await this.getTypeById(t.id,t.placementType);if(e!=null)return this.getInfo(e)}if(t.type!=null)return this.getInfo(t.type)}async getInfos(){const t=await this._data;return Object.entries(t.typeToInfo).map(([e,i])=>[e,i])}async _prepareData(){const t=await this._getFurniData(),e=await q1.parseStringPromise(t),i={},n={},o={},s=(a,l)=>{a.forEach(c=>{const d=c.$.classname,g=c.$.id;if(i[d]=tE.formatFurnitureData(c),l==="floor"){if(n[g]!=null)throw new Error(`Floor furniture with id ${g} already exists`);n[g]=d}else if(l==="wall"){if(o[g]!=null)throw new Error(`Wall furniture with id ${g} already exists`);o[g]=d}})};return s(e.furnidata.roomitemtypes[0].furnitype,"wall"),s(e.furnidata.wallitemtypes[0].furnitype,"floor"),{typeToInfo:i,floorIdToType:n,wallIdToType:o}}}ro.FurnitureData=Uc;var ca={},no={};Object.defineProperty(no,"__esModule",{value:!0});no.AnimationTicker=void 0;const fp=24,dp=60;class zc{constructor(t){this._frame=0,this._idCounter=0,this._subscriptions=new Map,t.ticker.maxFPS=dp,t.ticker.minFPS=fp,t.ticker.add(()=>this._increment())}static create(t){return new zc(t)}subscribe(t){const e=this._idCounter++;return this._subscriptions.set(e,t),()=>this._subscriptions.delete(e)}current(){return this._getNormalizedFrame(this._frame).rounded}_getNormalizedFrame(t){const e=fp/dp,i=t*e;return{rounded:Math.floor(i),pure:i}}_increment(){this._frame+=1;const t=this._getNormalizedFrame(this._frame);this._subscriptions.forEach(e=>e(t.rounded,t.pure))}}no.AnimationTicker=zc;var oo={},Rm={},fa={},Mr={},da={},oi={};Object.defineProperty(oi,"__esModule",{value:!0});oi.notNullOrUndefined=void 0;function eE(r){return r!=null}oi.notNullOrUndefined=eE;var $i={};Object.defineProperty($i,"__esModule",{value:!0});$i.getAvatarDirection=void 0;function iE(r){return r<-8||r>15?0:r<0?r+8:r>7?r-8:r}$i.getAvatarDirection=iE;var ga={};Object.defineProperty(ga,"__esModule",{value:!0});ga.getDrawOrderForActions=void 0;function rE(r,t){const e=new Set;return r.forEach(i=>{i.activepartset!=null&&e.add(i.activepartset)}),t.hasItem&&e.add("itemRight"),e.has("handLeft")?"lh-up":e.has("handRightAndHead")||e.has("handRight")?"rh-up":"std"}ga.getDrawOrderForActions=rE;var pa={},Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});Ia.associateBy=void 0;function nE(r,t){const e=new Map;return r.forEach(i=>{const n=t(i);e.set(n,i)}),e}Ia.associateBy=nE;var va={},yi={};Object.defineProperty(yi,"__esModule",{value:!0});yi.applyOffsets=yi.getAssetFromPartMeta=void 0;function oE(r,t,e,{offsetX:i,offsetY:n}){const o=e.getOffsets(t.asset);if(o==null)return;const{x:s,y:a}=Om({offsets:o,customOffsets:{offsetX:i,offsetY:n},flipped:t.flipped,lay:r==="lay"});if(isNaN(s))throw new Error("Invalid x offset");if(isNaN(a))throw new Error("Invalid y offset");return{fileId:t.asset,library:"",mirror:t.flipped,x:s,y:a}}yi.getAssetFromPartMeta=oE;function Om({offsets:r,customOffsets:{offsetX:t,offsetY:e},flipped:i,lay:n}){let o=0,s=0;return s=-r.offsetY+e,i?o=64+r.offsetX-t:o=-r.offsetX-t,n&&(i?o-=52:o+=52),s=s+16,{x:o,y:s}}yi.applyOffsets=Om;var on={},Vc={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPartFlippedMetaData=r.getBasicFlippedMetaData=r.getFlippedMetaData=r.DIRECTION_IS_FLIPPED=void 0;const t=Yn;r.DIRECTION_IS_FLIPPED=[!1,!1,!1,!1,!0,!0,!0,!1];function e({assetPartDefinition:o,direction:s,partType:a,flippedPartType:l}){if(!r.DIRECTION_IS_FLIPPED[s])return{direction:s,flip:!1,partType:a,swapped:!1};if(o==="wav"&&(a==t.AvatarFigurePartType.LeftHand||a==t.AvatarFigurePartType.LeftSleeve||a==t.AvatarFigurePartType.LeftCoatSleeve))return{direction:s,flip:!0,partType:a,swapped:!1};if(o=="drk"&&(a==t.AvatarFigurePartType.RightHand||a==t.AvatarFigurePartType.RightSleeve||a==t.AvatarFigurePartType.RightCoatSleeve))return{direction:s,flip:!0,partType:a,swapped:!1};if(o=="blw"&&a==t.AvatarFigurePartType.RightHand)return{direction:s,flip:!0,partType:a,swapped:!1};if(o=="sig"&&a==t.AvatarFigurePartType.LeftHand)return{direction:s,flip:!0,partType:a,swapped:!1};if(o=="respect"&&a==t.AvatarFigurePartType.LeftHand)return{direction:s,flip:!0,partType:a,swapped:!1};if(a==t.AvatarFigurePartType.RightHandItem)return{direction:s,flip:!0,partType:a,swapped:!1};if(a==t.AvatarFigurePartType.LeftHandItem)return{direction:s,flip:!0,partType:a,swapped:!1};if(a==t.AvatarFigurePartType.ChestPrint)return{direction:s,flip:!0,partType:a,swapped:!1};const d=i(s);return l!=a?{direction:d.direction,flip:!1,partType:l??a,swapped:!0}:{direction:d.direction,flip:!1,partType:a}}r.getFlippedMetaData=e;function i(o){let s=o,a=!1;return o===4&&(s=2,a=!0),o===5&&(s=1,a=!0),o===6&&(s=0,a=!0),{direction:s,flip:a}}r.getBasicFlippedMetaData=i;function n(o,{partType:s,flippedPartType:a}){const l=i(o);return a!=s?{direction:l.direction,flip:!1,partType:a??s,swapped:!0}:{direction:l.direction,flip:!1,partType:s}}r.getPartFlippedMetaData=n})(Vc);var Ei={},gp;function Zm(){if(gp)return Ei;gp=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.getSpriteId=Ei.AvatarEffectPart=void 0;const r=Yr,t=yi,e=$i,i=Gm();let n=class{constructor(a,l,c,d){this._sprite=a,this._actionsData=l,this._offsetsData=c,this._effectData=d,this._directionOffset=0,this._offsets=new Map,this._customFrames=[]}setDirection(a){this._direction=a}setDirectionOffset(a){this._directionOffset=a}getDirection(a=0){if(this._direction!=null)return this._sprite.directions?e.getAvatarDirection(this._direction+this._directionOffset+a):0}setEffectFrame(a,l){const c=a.getFrameEffectPart(this._sprite.id,l);if(c!=null){let d=c.action!=null?this._actionsData.getAction(c.action):void 0;d==null&&(d=this._actionsData.getAction(r.AvatarAction.Default)),this._customFrames.push({action:d,frame:c.frame,dd:c.dd,dx:c.dx,dy:c.dy})}}setAvatarOffsets(a,l){this._offsets.set(l,a)}setEffectFrameDefaultIfNotSet(){if(this._customFrames.length>0)return;const a=this._actionsData.getAction(r.AvatarAction.Default);this._customFrames.push({action:a})}getDrawDefinition(){var a;const l=[],c=this._direction!=null?this._effectData.getSpriteDirection(this._sprite.id,this._direction):void 0;if(this._customFrames.forEach(d=>{var g;if(d.action==null)throw new Error("Invalid action");const h=this.getDirection(d.dd);if(h==null)return;const f=this._getAvatarAsset(h,(g=d.frame)!==null&&g!==void 0?g:0,d,c);f!=null&&l.push(f)}),l.length!==0)return{assets:l.flatMap(d=>[d,d]),addition:!1,kind:"EFFECT_DRAW_PART",z:(a=c?.dz)!==null&&a!==void 0?a:0,ink:this._sprite.ink}}_getAvatarAsset(a,l,c,d){var g,u,h,f;if(this._sprite.member!=null){const{id:I,offsets:m,flip:y}=i.getEffectSprite(this._sprite.member,a,l,this._offsetsData,this._sprite.directions,!1);if(m==null)return;const{x:v,y:p}=t.applyOffsets({offsets:m,customOffsets:{offsetX:(g=c.dx)!==null&&g!==void 0?g:0-((u=d?.dx)!==null&&u!==void 0?u:0),offsetY:(h=c.dy)!==null&&h!==void 0?h:0+((f=d?.dy)!==null&&f!==void 0?f:0)},lay:!1,flipped:y});return{fileId:I,library:"",mirror:y,x:v,y:p}}}};Ei.AvatarEffectPart=n;const o=(s,a,l)=>`h_${s}_${a}_${l}`;return Ei.getSpriteId=o,Ei}var pp;function Gm(){if(pp)return on;pp=1,Object.defineProperty(on,"__esModule",{value:!0}),on.getEffectSprite=void 0;const r=Vc,t=Zm();function e(i,n,o,s,a,l){let c=t.getSpriteId(i,n,o),d=s.getOffsets(c),g=!1;if(l&&d==null){const u=r.getBasicFlippedMetaData(n);c=t.getSpriteId(i,u.direction,o),d=s.getOffsets(c),g=u.flip}return a||(c=t.getSpriteId(i,0,o),d==null&&(d=s.getOffsets(c))),{id:c,offsets:d,flip:g}}return on.getEffectSprite=e,on}Object.defineProperty(va,"__esModule",{value:!0});va.AvatarAdditionPart=void 0;const sE=yi,aE=$i,uE=Gm();class lE{constructor(t,e,i,n){this._addition=t,this._actionsData=e,this._offsetsData=i,this._partSetsData=n,this._directionOffset=0,this._customFrames=[],this._offsets=new Map}getDirection(t=0){if(this._direction!=null)return aE.getAvatarDirection(this._direction+this._directionOffset+t)}getDrawDefinition(){const t=[];if(this._customFrames.forEach((e,i)=>{if(e.action==null)throw new Error("Invalid action");const o=this.getDirection(e.dd);if(o==null)return;const s=this._getAsset(o,e.frame,i,e);s!=null&&t.push(s)}),t.length!==0)return{kind:"EFFECT_DRAW_PART",addition:!1,assets:t.flatMap(e=>[e,e]),z:0}}setEffectFrame(t,e){const i=this._addition.base!=null?t.getFrameBodyPartByBase(this._addition.base,e):void 0,n=t.getFrameEffectPart(this._addition.id,e);i!=null?this._handleBodyPart(t,e,i):n!=null&&this._handleFxPart(t,e,n)}setDirection(t){this._direction=t}setDirectionOffset(t){this._directionOffset=t}setAvatarOffsets(t,e){this._offsets.set(e,t)}_getAsset(t,e,i,n){var o,s,a,l,c;const d=this._addition.id;this._partSetsData.getPartInfo(d);const g=(o=n.base)!==null&&o!==void 0?o:this._addition.base,u=g!=null?`${n.action.assetpartdefinition}_${this._addition.id}_${g}`:`${n.action.assetpartdefinition}_${this._addition.id}_1`;if(u!=null){const{id:h,offsets:f,flip:I}=uE.getEffectSprite(u,t,e,this._offsetsData,!0,this._mode==="fx");if(f==null)return;const m=this._offsets.get(i),{x:y,y:v}=sE.applyOffsets({offsets:{offsetX:f.offsetX,offsetY:f.offsetY},customOffsets:{offsetX:((s=n.dx)!==null&&s!==void 0?s:0)+((a=m?.dx)!==null&&a!==void 0?a:0),offsetY:((l=n.dy)!==null&&l!==void 0?l:0)+((c=m?.dy)!==null&&c!==void 0?c:0)},lay:!1,flipped:I});return{fileId:h,library:"",mirror:I,x:y,y:v}}}_setMode(t){if(this._mode!=null&&this._mode!==t)throw new Error("Can't change mode once it is set.");this._mode=t}_handleBodyPart(t,e,i){var n;this._setMode("bodypart");const o=this._actionsData.getAction(i.action);if(o==null)throw new Error("Invalid action "+i.action);this._customFrames.push({action:o,frame:(n=i.frame)!==null&&n!==void 0?n:0,dd:i.dd,dx:i.dx,dy:i.dy})}_handleFxPart(t,e,i){var n;this._setMode("fx");const o=this._actionsData.getAction(i.action);if(o==null)throw new Error("Invalid action "+i.action);this._customFrames.push({action:o,frame:(n=i.frame)!==null&&n!==void 0?n:0,dd:i.dd,dx:i.dx,dy:i.dy})}}va.AvatarAdditionPart=lE;var ma={};Object.defineProperty(ma,"__esModule",{value:!0});ma.AvatarBodyPart=void 0;const hE=oi;class cE{constructor(t,e,i,n,o){this._bodyPart=t,this._parts=e,this._partSets=i,this._actions=n,this._geometry=o,this._additions=[]}get z(){return this._bodyPart.z}get id(){return this._bodyPart.id}get parts(){return this._parts}addAddition(t){this._additions.push(t)}getSortedParts(t){return[...this._parts.map(i=>{const n=this._geometry.getBodyPartItem(t,this._bodyPart.id,i.type);if(n!=null)return{part:i,item:n}}).filter(hE.notNullOrUndefined).sort((i,n)=>i.item.radius-n.item.radius).map(i=>i.part),...this._additions]}setActiveAction(t){if(t.activepartset==null)return;const e=this._partSets.getActivePartSet(t.activepartset);this._parts.forEach(i=>{e.has(i.type)&&i.setActiveAction(t)})}setDirection(t){this._parts.forEach(e=>{e.setDirection(t)})}setDirectionOffset(t){this._parts.forEach(e=>{e.setDirectionOffset(t)})}setFrameRepeat(t){this._parts.forEach(e=>{e.setFrameRepeat(t)})}setEffectFrame(t,e){const i=t.getFrameBodyPart(this.id,e);if(i==null)return;const n=this._actions.getAction(i.action);this._parts.forEach(o=>{var s;n!=null&&o.addCustomFrame({action:n,frame:(s=i.frame)!==null&&s!==void 0?s:0,dd:i.dd,dx:i.dx,dy:i.dy})})}setAvatarOffsets(t,e){this._parts.forEach(i=>{i.setAvatarOffsets(t,e)}),this._additions.forEach(i=>{i.setAvatarOffsets(t,e)})}}ma.AvatarBodyPart=cE;Object.defineProperty(pa,"__esModule",{value:!0});pa.AvatarBodyPartList=void 0;const fE=Ia,dE=oi,gE=va,pE=ma;class Jc{constructor(t,{actionsData:e,offsetsData:i,partSetsData:n}){this._bodyParts=t,this._bodyPartsById=new Map,this._additions=new Map,this._additionsArr=[],this._bodyPartsById=fE.associateBy(this._bodyParts,o=>o.id),this._actionsData=e,this._offsetsData=i,this._partSetsData=n}static create(t,e,{geometry:i,partSetsData:n,actionsData:o,offsetsData:s}){const a=[...i.getBodyParts("full")];e&&a.push("rightitem");const l=a.map(c=>i.getBodyPart("vertical",c)).filter(dE.notNullOrUndefined).map(c=>new pE.AvatarBodyPart(c,t.getPartsForBodyBart(c),n,o,i)).sort((c,d)=>c.z-d.z);return new Jc(l,{actionsData:o,offsetsData:s,partSetsData:n})}applyActions(t){t.forEach(e=>{this._bodyParts.forEach(i=>{i.setActiveAction(e)})})}applyEffectAdditions(t){t.getAddtions().forEach(e=>{var i;const n=e.align!=null?this._getBodyPartById(e.align):void 0;if(n!=null){const o=(i=this._additions.get(n))!==null&&i!==void 0?i:[],s=new gE.AvatarAdditionPart(e,this._actionsData,this._offsetsData,this._partSetsData);this._additions.set(n,[...o,s]),this._additionsArr.push(s),n.addAddition(s)}})}setEffectFrame(t,e){this._bodyParts.forEach(i=>{i.setEffectFrame(t,e),i.setFrameRepeat(2)}),this._additionsArr.forEach(i=>{i.setEffectFrame(t,e)})}setAvatarOffsets(t,e){this._bodyParts.forEach(i=>i.setAvatarOffsets(t,e))}setAdditionsDirection(t){this._additionsArr.forEach(e=>e.setDirection(t))}setDirectionOffset(t){this._additionsArr.forEach(e=>e.setDirectionOffset(t)),this._bodyParts.forEach(e=>e.setDirectionOffset(t))}setBodyPartDirection(t,e){this._bodyParts.forEach(i=>{i.id==="head"?i.setDirection(e??t):i.setDirection(t)})}getBodyPartById(t){return this._getBodyPartById(t)}_getBodyPartById(t){return this._bodyPartsById.get(t)}}pa.AvatarBodyPartList=Jc;var Nm={},ya={},_a={};Object.defineProperty(_a,"__esModule",{value:!0});_a.getAssetForFrame=void 0;const Ip=Vc,IE=yi;function vE({animationFrame:r,actionData:t,partTypeFlipped:e,direction:i,partType:n,partId:o,offsetsData:s,offsetX:a=0,offsetY:l=0}){const c=Ip.DIRECTION_IS_FLIPPED[i];let d=t.assetpartdefinition,g=0;r!=null&&(g=r.number,r.assetpartdefinition&&r.assetpartdefinition!==""&&(d=r.assetpartdefinition));const u=Ip.getFlippedMetaData({assetPartDefinition:d,flippedPartType:e,direction:i,partType:n});let h=vp(d,u.partType,o,u.direction,g),f=s.getOffsets(h);if(f==null&&(h=vp("std",u.partType,o,u.direction,0),f=s.getOffsets(h)),f!=null){let I=u.flip;c&&(I=!I);const m=IE.getAssetFromPartMeta(d,{flipped:I,swapped:!1,asset:h},s,{offsetX:a,offsetY:l});if(m!=null)return m}}_a.getAssetForFrame=vE;function vp(r,t,e,i,n){return`h_${r}_${t}_${e}_${i}_${n}`}Object.defineProperty(ya,"__esModule",{value:!0});ya.AvatarPart=void 0;const mp=$i,Ol=_a;class mE{constructor(t,e,{animationData:i,figureData:n,figureMap:o,offsetsData:s,partSetsData:a}){this._figureDataPart=t,this._color=e,this._directionOffset=0,this._assets=[],this._customFrames=[],this._frameRepeat=1,this._offsets=new Map,this._animationData=i,this._figureData=n,this._figureMap=o,this._offsetsData=s,this._partSetsData=a}get type(){return this._figureDataPart.type}get index(){return this._figureDataPart.index}setFrameRepeat(t){this._frameRepeat=t}setActiveAction(t){this._action=t}setDirection(t){this._direction=mp.getAvatarDirection(t)}addCustomFrame(t){this._customFrames.push(t)}setDirectionOffset(t){this._directionOffset=t}setAvatarOffsets(t,e){this._offsets.set(e,t)}getDirection(t=0){if(this._direction!=null)return mp.getAvatarDirection(this._direction+this._directionOffset+t)}getDrawDefinition(){if(this._update(),this._assets.length!==0)return{assets:this._assets.flatMap(t=>new Array(this._frameRepeat).fill(0).map(()=>t)),color:this._figureDataPart.colorable?`#${this._color}`:void 0,index:this._figureDataPart.index,kind:"AVATAR_DRAW_PART",mode:this._figureDataPart.type!=="ey"&&this._figureDataPart.colorable?"colored":"just-image",type:this._figureDataPart.type,z:0}}_getOffsetForFrame(t){var e,i;const n=this._offsets.get(t);return n==null?{x:0,y:0}:{x:(e=n.dx)!==null&&e!==void 0?e:0,y:(i=n.dy)!==null&&i!==void 0?i:0}}_update(){const t=this._partSetsData.getPartInfo(this.type);if(this._assets=[],this._customFrames.length>0){this._customFrames.forEach((s,a)=>{var l,c;const d=s.action,g=this.getDirection(s.dd);if(g==null)throw new Error("Invalid direction");const u=this._animationData.getAnimationFrame(d.id,this.type,s.frame),h=this._getOffsetForFrame(a),f=Ol.getAssetForFrame({animationFrame:u,actionData:d,direction:g,offsetsData:this._offsetsData,partId:this._figureDataPart.id,partType:this._figureDataPart.type,partTypeFlipped:t?.flippedSetType,offsetX:((l=s.dx)!==null&&l!==void 0?l:0)+h.x,offsetY:((c=s.dy)!==null&&c!==void 0?c:0)+h.y});f!=null&&this._assets.push(f)});return}const e=this._action,i=this.getDirection();if(e==null||i==null)return;let o=this._animationData.getAnimationFrames(e.id,this.type).flatMap(s=>new Array(s.repeats).fill(s));if(o.length===0&&(o=[void 0]),this._offsets.size>0)this._offsets.forEach(s=>{var a;const l=this._animationData.getAnimationFrame(e.id,this.type,(a=s.frame)!==null&&a!==void 0?a:0),c=Ol.getAssetForFrame({animationFrame:l,actionData:e,direction:i,offsetsData:this._offsetsData,partId:this._figureDataPart.id,partType:this._figureDataPart.type,partTypeFlipped:t?.flippedSetType,offsetX:s.dx,offsetY:s.dy});c!=null&&this._assets.push(c)});else for(let s=0;s<o.length;s++){const a=o[s],l=Ol.getAssetForFrame({animationFrame:a,actionData:e,direction:i,offsetsData:this._offsetsData,partId:this._figureDataPart.id,partType:this._figureDataPart.type,partTypeFlipped:t?.flippedSetType});l!=null&&this._assets.push(l)}}}ya.AvatarPart=mE;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.AvatarPartList=r.basePartSet=void 0;const t=Yn,e=ya;r.basePartSet=new Set([t.AvatarFigurePartType.LeftHand,t.AvatarFigurePartType.RightHand,t.AvatarFigurePartType.Body,t.AvatarFigurePartType.Head]);class i{constructor(o,s,a){this._deps=a,this._parts=[],this._hiddenLayers=new Set,this._partsByType=new Map;const{figureData:l}=a;o.forEach(({setId:c,colorId:d},g)=>{const u=l.getParts(g,c.toString()),h=l.getColor(g,d.toString());l.getHiddenLayers(g,c.toString()).forEach(I=>this._hiddenLayers.add(I)),u!=null&&u.length>0&&u.forEach(I=>{const m=new e.AvatarPart(I,h,a);this._registerPart(m)})}),s!=null&&this._addItem(s),r.basePartSet.forEach(c=>{const d=this._partsByType.get(c);(d==null||d.length===0)&&this._registerPart(new e.AvatarPart({id:"1",type:c,colorable:!1,index:0},void 0,a))})}getPartsForBodyBart(o){return o.items.flatMap(s=>{var a;return(a=this._partsByType.get(s.id))!==null&&a!==void 0?a:[]}).filter(s=>!this._hiddenLayers.has(s.type))}getPartsForType(o){const s=this._partsByType.get(o);return s==null?[]:[...s].sort((l,c)=>l.index-c.index)}get parts(){return this._parts}_addItem(o){this._registerPart(new e.AvatarPart({type:"ri",colorable:!1,id:o.toString(),index:0},void 0,this._deps))}_registerPart(o){var s;const a=o.type;this._parts.push(o);const l=(s=this._partsByType.get(a))!==null&&s!==void 0?s:[];this._partsByType.set(a,[...l,o])}}r.AvatarPartList=i})(Nm);var Ca={};Object.defineProperty(Ca,"__esModule",{value:!0});Ca.BodyPartDrawOrder=void 0;class yE{static getDrawOrder(t,e){switch(e){case"std":return Qc[t];case"rh-up":return _E[t];case"lh-up":return CE[t]}throw new Error(`Invalid draw order type ${e}`)}}Ca.BodyPartDrawOrder=yE;const Qc={0:["behind","bottom","leftitem","leftarm","torso","rightitem","rightarm","head","top"],1:["behind","bottom","leftitem","leftarm","torso","rightitem","rightarm","head","top"],2:["behind","bottom","leftitem","leftarm","torso","rightitem","rightarm","head","top"],3:["behind","bottom","torso","leftitem","leftarm","rightitem","rightarm","head","top"],4:["behind","bottom","rightarm","rightitem","torso","leftitem","leftarm","head","top"],5:["behind","bottom","rightarm","rightitem","torso","leftitem","leftarm","head","top"],6:["bottom","rightarm","rightitem","torso","leftitem","leftarm","head","behind","top"],7:["bottom","rightarm","rightitem","leftitem","leftarm","torso","head","behind","top"]},_E={...Qc,2:["behind","bottom","leftitem","leftarm","torso","head","rightitem","rightarm","top"],3:["behind","bottom","leftitem","leftarm","torso","head","rightitem","rightarm","top"],4:["behind","bottom","rightarm","torso","leftitem","leftarm","head","rightitem","top"]},CE={...Qc,5:["behind","bottom","rightarm","rightitem","torso","head","leftitem","leftarm","top"],6:["behind","bottom","rightarm","rightitem","torso","head","leftitem","leftarm","top"]};Object.defineProperty(da,"__esModule",{value:!0});da.AvatarDrawDefinition=void 0;const Zl=oi,AE=Yr,bE=$i,wE=ga,xE=pa,PE=Zm(),SE=Nm,TE=Ca;class EE{constructor(t,{figureData:e,actionsData:i,geometry:n,partSetsData:o,animationData:s,offsetsData:a,figureMap:l}){var c,d;this._options=t,this._directionOffset=0,this._drawParts=void 0,this._direction=t.direction,this._figureData=e,this._actionsData=i,this._geometry=n,this._partSetsData=o,this._animationData=s,this._offsetsData=a,this._figureMap=l;const g=t.effect,u=this._getPartsForLook(t.look),h=xE.AvatarBodyPartList.create(u,this._options.item!=null,{actionsData:i,geometry:n,partSetsData:o,offsetsData:a}),f=this._getActiveActions();this._bodyParts=h,h.applyActions(f),h.setBodyPartDirection(this._options.direction,this._options.headDirection);const I=new Map;if(this._effectParts=[],g!=null){h.applyEffectAdditions(g),g.getSprites().forEach(y=>{if(y.id==="avatar"){I.set(y.id,this);return}const v=new PE.AvatarEffectPart(y,this._actionsData,this._offsetsData,g);I.set(y.id,v),this._effectParts.push(v)});for(let y=0;y<g.getFrameCount();y++)h.setEffectFrame(g,y),I.forEach(v=>v.setEffectFrame(g,y));I.forEach(y=>{y.setEffectFrameDefaultIfNotSet(),y.setDirection(t.direction)}),h.setAdditionsDirection(t.direction)}const m=(d=(c=g?.getDirection())===null||c===void 0?void 0:c.offset)!==null&&d!==void 0?d:0;m!=null&&(I.forEach(y=>{y.setDirectionOffset(m)}),h.setDirectionOffset(m)),this._activeActions=f,this._partList=u}setDirection(t){this._direction=t}setDirectionOffset(t){this._directionOffset=t}setEffectFrame(t,e){const i=t.getFrameEffectPart("avatar",e);i!=null&&(this._bodyParts.setAvatarOffsets(i,e),this._effectParts.forEach(n=>{n.setAvatarOffsets(i,e)}))}setEffectFrameDefaultIfNotSet(){}getDrawDefinition(){if(this._drawParts!=null)return this._drawParts;const t=wE.getDrawOrderForActions(this._activeActions,{hasItem:this._options.item!=null}),e=bE.getAvatarDirection(this._direction+this._directionOffset),i=TE.BodyPartDrawOrder.getDrawOrder(e,t);if(i==null)return[];const o=i.map(l=>this._bodyParts.getBodyPartById(l)).filter(Zl.notNullOrUndefined).flatMap(l=>l.getSortedParts("vertical")).map(l=>l.getDrawDefinition()).filter(Zl.notNullOrUndefined),s=this._effectParts.map(l=>l.getDrawDefinition()).filter(Zl.notNullOrUndefined),a=[...o,...s].sort((l,c)=>l.z-c.z);return this._drawParts=a,a}_getPartsForLook(t){return new SE.AvatarPartList(t,this._options.item,{figureData:this._figureData,animationData:this._animationData,figureMap:this._figureMap,offsetsData:this._offsetsData,partSetsData:this._partSetsData})}_getActiveActions(){const t=new Set(this._options.actions).add(AE.AvatarAction.Default);return this._actionsData.getActions().filter(e=>t.has(e.id)).sort((e,i)=>e.precedence<i.precedence?1:e.precedence>i.precedence?-1:0)}}da.AvatarDrawDefinition=EE;Object.defineProperty(Mr,"__esModule",{value:!0});Mr.getAvatarDrawDefinition=Mr.basePartSet=void 0;const FE=Yr,Xo=Yn,ME=da;Mr.basePartSet=new Set([Xo.AvatarFigurePartType.LeftHand,Xo.AvatarFigurePartType.RightHand,Xo.AvatarFigurePartType.Body,Xo.AvatarFigurePartType.Head]);function DE({parsedLook:r,actions:t,direction:e,headDirection:i,item:n,effect:o},s){const a=new Set(t).add(FE.AvatarAction.Default);return new ME.AvatarDrawDefinition({actions:a,direction:e,frame:0,look:r,item:n,headDirection:i,effect:o},s)}Mr.getAvatarDrawDefinition=DE;var so={};Object.defineProperty(so,"__esModule",{value:!0});so.parseLookString=void 0;function LE(r){return new Map(r.split(".").map(t=>{const e=t.split("-");return[e[0],{setId:Number(e[1]),colorId:Number(e[2])}]}))}so.parseLookString=LE;Object.defineProperty(fa,"__esModule",{value:!0});fa.createLookServer=void 0;const BE=Mr,RE=so;async function OE(r){return({look:t,actions:e,direction:i,headDirection:n,item:o},s)=>BE.getAvatarDrawDefinition({parsedLook:RE.parseLookString(t),actions:e,direction:i,headDirection:n,frame:0,item:o,effect:s},r)}fa.createLookServer=OE;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.createLookServer=void 0;var t=fa;Object.defineProperty(r,"createLookServer",{enumerable:!0,get:function(){return t.createLookServer}})})(Rm);var jm={exports:{}};(function(r,t){var e={};/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2013-2018 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */(function(i){r.exports=i()})(function(){return function i(n,o,s){function a(d,g){if(!o[d]){if(!n[d]){var u=typeof _dereq_=="function"&&_dereq_;if(!g&&u)return u(d,!0);if(l)return l(d,!0);var h=new Error("Cannot find module '"+d+"'");throw h.code="MODULE_NOT_FOUND",h}var f=o[d]={exports:{}};n[d][0].call(f.exports,function(I){var m=n[d][1][I];return a(m||I)},f,f.exports,i,n,o,s)}return o[d].exports}for(var l=typeof _dereq_=="function"&&_dereq_,c=0;c<s.length;c++)a(s[c]);return a}({1:[function(i,n,o){n.exports=function(s){var a=s._SomePromiseArray;function l(c){var d=new a(c),g=d.promise();return d.setHowMany(1),d.setUnwrap(),d.init(),g}s.any=function(c){return l(c)},s.prototype.any=function(){return l(this)}}},{}],2:[function(i,n,o){var s;try{throw new Error}catch(I){s=I}var a=i("./schedule"),l=i("./queue");function c(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new l(16),this._normalQueue=new l(16),this._haveDrainedQueues=!1;var I=this;this.drainQueues=function(){I._drainQueues()},this._schedule=a}c.prototype.setScheduler=function(I){var m=this._schedule;return this._schedule=I,this._customScheduler=!0,m},c.prototype.hasCustomScheduler=function(){return this._customScheduler},c.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},c.prototype.fatalError=function(I,m){m?(process.stderr.write("Fatal "+(I instanceof Error?I.stack:I)+`
`),process.exit(2)):this.throwLater(I)},c.prototype.throwLater=function(I,m){if(arguments.length===1&&(m=I,I=function(){throw m}),typeof setTimeout<"u")setTimeout(function(){I(m)},0);else try{this._schedule(function(){I(m)})}catch{throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)}};function d(I,m,y){this._lateQueue.push(I,m,y),this._queueTick()}function g(I,m,y){this._normalQueue.push(I,m,y),this._queueTick()}function u(I){this._normalQueue._pushOne(I),this._queueTick()}c.prototype.invokeLater=d,c.prototype.invoke=g,c.prototype.settlePromises=u;function h(I){for(;I.length()>0;)f(I)}function f(I){var m=I.shift();if(typeof m!="function")m._settlePromises();else{var y=I.shift(),v=I.shift();m.call(y,v)}}c.prototype._drainQueues=function(){h(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,h(this._lateQueue)},c.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},c.prototype._reset=function(){this._isTickUsed=!1},n.exports=c,n.exports.firstLineError=s},{"./queue":26,"./schedule":29}],3:[function(i,n,o){n.exports=function(s,a,l,c){var d=!1,g=function(I,m){this._reject(m)},u=function(I,m){m.promiseRejectionQueued=!0,m.bindingPromise._then(g,g,null,this,I)},h=function(I,m){this._bitField&50397184||this._resolveCallback(m.target)},f=function(I,m){m.promiseRejectionQueued||this._reject(I)};s.prototype.bind=function(I){d||(d=!0,s.prototype._propagateFrom=c.propagateFromFunction(),s.prototype._boundValue=c.boundValueFunction());var m=l(I),y=new s(a);y._propagateFrom(this,1);var v=this._target();if(y._setBoundTo(m),m instanceof s){var p={promiseRejectionQueued:!1,promise:y,target:v,bindingPromise:m};v._then(a,u,void 0,y,p),m._then(h,f,void 0,y,p),y._setOnCancel(m)}else y._resolveCallback(v);return y},s.prototype._setBoundTo=function(I){I!==void 0?(this._bitField=this._bitField|2097152,this._boundTo=I):this._bitField=this._bitField&-2097153},s.prototype._isBound=function(){return(this._bitField&2097152)===2097152},s.bind=function(I,m){return s.resolve(m).bind(I)}}},{}],4:[function(i,n,o){var s;typeof Promise<"u"&&(s=Promise);function a(){try{Promise===l&&(Promise=s)}catch{}return l}var l=i("./promise")();l.noConflict=a,n.exports=l},{"./promise":22}],5:[function(i,n,o){var s=Object.create;if(s){var a=s(null),l=s(null);a[" size"]=l[" size"]=0}n.exports=function(c){var d=i("./util"),g=d.canEvaluate;d.isIdentifier;var u;function h(y,v){var p;if(y!=null&&(p=y[v]),typeof p!="function"){var _="Object "+d.classString(y)+" has no method '"+d.toString(v)+"'";throw new c.TypeError(_)}return p}function f(y){var v=this.pop(),p=h(y,v);return p.apply(y,this)}c.prototype.call=function(y){var v=[].slice.call(arguments,1);return v.push(y),this._then(f,void 0,void 0,v,void 0)};function I(y){return y[this]}function m(y){var v=+this;return v<0&&(v=Math.max(0,v+y.length)),y[v]}c.prototype.get=function(y){var v=typeof y=="number",p;if(v)p=m;else if(g){var _=u(y);p=_!==null?_:I}else p=I;return this._then(p,void 0,void 0,y,void 0)}}},{"./util":36}],6:[function(i,n,o){n.exports=function(s,a,l,c){var d=i("./util"),g=d.tryCatch,u=d.errorObj,h=s._async;s.prototype.break=s.prototype.cancel=function(){if(!c.cancellation())return this._warn("cancellation is disabled");for(var f=this,I=f;f._isCancellable();){if(!f._cancelBy(I)){I._isFollowing()?I._followee().cancel():I._cancelBranched();break}var m=f._cancellationParent;if(m==null||!m._isCancellable()){f._isFollowing()?f._followee().cancel():f._cancelBranched();break}else f._isFollowing()&&f._followee().cancel(),f._setWillBeCancelled(),I=f,f=m}},s.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},s.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===void 0||this._branchesRemainingToCancel<=0},s.prototype._cancelBy=function(f){return f===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},s.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},s.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),h.invoke(this._cancelPromises,this,void 0))},s.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},s.prototype._unsetOnCancel=function(){this._onCancelField=void 0},s.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},s.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},s.prototype._doInvokeOnCancel=function(f,I){if(d.isArray(f))for(var m=0;m<f.length;++m)this._doInvokeOnCancel(f[m],I);else if(f!==void 0)if(typeof f=="function"){if(!I){var y=g(f).call(this._boundValue());y===u&&(this._attachExtraTrace(y.e),h.throwLater(y.e))}}else f._resultCancelled(this)},s.prototype._invokeOnCancel=function(){var f=this._onCancel();this._unsetOnCancel(),h.invoke(this._doInvokeOnCancel,this,f)},s.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},s.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(i,n,o){n.exports=function(s){var a=i("./util"),l=i("./es5").keys,c=a.tryCatch,d=a.errorObj;function g(u,h,f){return function(I){var m=f._boundValue();t:for(var y=0;y<u.length;++y){var v=u[y];if(v===Error||v!=null&&v.prototype instanceof Error){if(I instanceof v)return c(h).call(m,I)}else if(typeof v=="function"){var p=c(v).call(m,I);if(p===d)return p;if(p)return c(h).call(m,I)}else if(a.isObject(I)){for(var _=l(v),A=0;A<_.length;++A){var b=_[A];if(v[b]!=I[b])continue t}return c(h).call(m,I)}}return s}}return g}},{"./es5":13,"./util":36}],8:[function(i,n,o){n.exports=function(s){var a=!1,l=[];s.prototype._promiseCreated=function(){},s.prototype._pushContext=function(){},s.prototype._popContext=function(){return null},s._peekContext=s.prototype._peekContext=function(){};function c(){this._trace=new c.CapturedTrace(g())}c.prototype._pushContext=function(){this._trace!==void 0&&(this._trace._promiseCreated=null,l.push(this._trace))},c.prototype._popContext=function(){if(this._trace!==void 0){var u=l.pop(),h=u._promiseCreated;return u._promiseCreated=null,h}return null};function d(){if(a)return new c}function g(){var u=l.length-1;if(u>=0)return l[u]}return c.CapturedTrace=null,c.create=d,c.deactivateLongStackTraces=function(){},c.activateLongStackTraces=function(){var u=s.prototype._pushContext,h=s.prototype._popContext,f=s._peekContext,I=s.prototype._peekContext,m=s.prototype._promiseCreated;c.deactivateLongStackTraces=function(){s.prototype._pushContext=u,s.prototype._popContext=h,s._peekContext=f,s.prototype._peekContext=I,s.prototype._promiseCreated=m,a=!1},a=!0,s.prototype._pushContext=c.prototype._pushContext,s.prototype._popContext=c.prototype._popContext,s._peekContext=s.prototype._peekContext=g,s.prototype._promiseCreated=function(){var y=this._peekContext();y&&y._promiseCreated==null&&(y._promiseCreated=this)}},c}},{}],9:[function(i,n,o){n.exports=function(s,a,l,c){var d=s._async,g=i("./errors").Warning,u=i("./util"),h=i("./es5"),f=u.canAttachTrace,I,m,y=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,v=/\((?:timers\.js):\d+:\d+\)/,p=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,_=null,A=null,b=!1,P,E=u.env("BLUEBIRD_DEBUG")!=0,C=!!(u.env("BLUEBIRD_WARNINGS")!=0&&(E||u.env("BLUEBIRD_WARNINGS"))),x=!!(u.env("BLUEBIRD_LONG_STACK_TRACES")!=0&&(E||u.env("BLUEBIRD_LONG_STACK_TRACES"))),F=u.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(C||!!u.env("BLUEBIRD_W_FORGOTTEN_RETURN")),R;(function(){var G=[];function Y(){for(var tt=0;tt<G.length;++tt)G[tt]._notifyUnhandledRejection();q()}function q(){G.length=0}R=function(tt){G.push(tt),setTimeout(Y,1)},h.defineProperty(s,"_unhandledRejectionCheck",{value:Y}),h.defineProperty(s,"_unhandledRejectionClear",{value:q})})(),s.prototype.suppressUnhandledRejections=function(){var G=this._target();G._bitField=G._bitField&-1048577|524288},s.prototype._ensurePossibleRejectionHandled=function(){this._bitField&524288||(this._setRejectionIsUnhandled(),R(this))},s.prototype._notifyUnhandledRejectionIsHandled=function(){tr("rejectionHandled",I,void 0,this)},s.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456},s.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0},s.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var G=this._settledValue();this._setUnhandledRejectionIsNotified(),tr("unhandledRejection",m,G,this)}},s.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144},s.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},s.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0},s.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576},s.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},s.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0},s.prototype._warn=function(G,Y,q){return gt(G,Y,q||this)},s.onPossiblyUnhandledRejection=function(G){var Y=s._getContext();m=u.contextBind(Y,G)},s.onUnhandledRejectionHandled=function(G){var Y=s._getContext();I=u.contextBind(Y,G)};var Z=function(){};s.longStackTraces=function(){if(d.haveItemsQueued()&&!J.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);if(!J.longStackTraces&&Vr()){var G=s.prototype._captureStackTrace,Y=s.prototype._attachExtraTrace,q=s.prototype._dereferenceTrace;J.longStackTraces=!0,Z=function(){if(d.haveItemsQueued()&&!J.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);s.prototype._captureStackTrace=G,s.prototype._attachExtraTrace=Y,s.prototype._dereferenceTrace=q,a.deactivateLongStackTraces(),J.longStackTraces=!1},s.prototype._captureStackTrace=B,s.prototype._attachExtraTrace=z,s.prototype._dereferenceTrace=$,a.activateLongStackTraces()}},s.hasLongStackTraces=function(){return J.longStackTraces&&Vr()};var H={unhandledrejection:{before:function(){var G=u.global.onunhandledrejection;return u.global.onunhandledrejection=null,G},after:function(G){u.global.onunhandledrejection=G}},rejectionhandled:{before:function(){var G=u.global.onrejectionhandled;return u.global.onrejectionhandled=null,G},after:function(G){u.global.onrejectionhandled=G}}},W=function(){var G=function(q,tt){if(q){var nt;try{return nt=q.before(),!u.global.dispatchEvent(tt)}finally{q.after(nt)}}else return!u.global.dispatchEvent(tt)};try{if(typeof CustomEvent=="function"){var Y=new CustomEvent("CustomEvent");return u.global.dispatchEvent(Y),function(q,tt){q=q.toLowerCase();var nt={detail:tt,cancelable:!0},bt=new CustomEvent(q,nt);return h.defineProperty(bt,"promise",{value:tt.promise}),h.defineProperty(bt,"reason",{value:tt.reason}),G(H[q],bt)}}else if(typeof Event=="function"){var Y=new Event("CustomEvent");return u.global.dispatchEvent(Y),function(tt,nt){tt=tt.toLowerCase();var bt=new Event(tt,{cancelable:!0});return bt.detail=nt,h.defineProperty(bt,"promise",{value:nt.promise}),h.defineProperty(bt,"reason",{value:nt.reason}),G(H[tt],bt)}}else{var Y=document.createEvent("CustomEvent");return Y.initCustomEvent("testingtheevent",!1,!0,{}),u.global.dispatchEvent(Y),function(tt,nt){tt=tt.toLowerCase();var bt=document.createEvent("CustomEvent");return bt.initCustomEvent(tt,!1,!0,nt),G(H[tt],bt)}}}catch{}return function(){return!1}}(),U=function(){return u.isNode?function(){return process.emit.apply(process,arguments)}:u.global?function(G){var Y="on"+G.toLowerCase(),q=u.global[Y];return q?(q.apply(u.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}();function X(G,Y){return{promise:Y}}var ot={promiseCreated:X,promiseFulfilled:X,promiseRejected:X,promiseResolved:X,promiseCancelled:X,promiseChained:function(G,Y,q){return{promise:Y,child:q}},warning:function(G,Y){return{warning:Y}},unhandledRejection:function(G,Y,q){return{reason:Y,promise:q}},rejectionHandled:X},lt=function(G){var Y=!1;try{Y=U.apply(null,arguments)}catch(tt){d.throwLater(tt),Y=!0}var q=!1;try{q=W(G,ot[G].apply(null,arguments))}catch(tt){d.throwLater(tt),q=!0}return q||Y};s.config=function(G){if(G=Object(G),"longStackTraces"in G&&(G.longStackTraces?s.longStackTraces():!G.longStackTraces&&s.hasLongStackTraces()&&Z()),"warnings"in G){var Y=G.warnings;J.warnings=!!Y,F=J.warnings,u.isObject(Y)&&"wForgottenReturn"in Y&&(F=!!Y.wForgottenReturn)}if("cancellation"in G&&G.cancellation&&!J.cancellation){if(d.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");s.prototype._clearCancellationData=It,s.prototype._propagateFrom=dt,s.prototype._onCancel=at,s.prototype._setOnCancel=N,s.prototype._attachCancellationCallback=it,s.prototype._execute=Q,S=dt,J.cancellation=!0}if("monitoring"in G&&(G.monitoring&&!J.monitoring?(J.monitoring=!0,s.prototype._fireEvent=lt):!G.monitoring&&J.monitoring&&(J.monitoring=!1,s.prototype._fireEvent=et)),"asyncHooks"in G&&u.nodeSupportsAsyncResource){var q=J.asyncHooks,tt=!!G.asyncHooks;q!==tt&&(J.asyncHooks=tt,tt?l():c())}return s};function et(){return!1}s.prototype._fireEvent=et,s.prototype._execute=function(G,Y,q){try{G(Y,q)}catch(tt){return tt}},s.prototype._onCancel=function(){},s.prototype._setOnCancel=function(G){},s.prototype._attachCancellationCallback=function(G){},s.prototype._captureStackTrace=function(){},s.prototype._attachExtraTrace=function(){},s.prototype._dereferenceTrace=function(){},s.prototype._clearCancellationData=function(){},s.prototype._propagateFrom=function(G,Y){};function Q(G,Y,q){var tt=this;try{G(Y,q,function(nt){if(typeof nt!="function")throw new TypeError("onCancel must be a function, got: "+u.toString(nt));tt._attachCancellationCallback(nt)})}catch(nt){return nt}}function it(G){if(!this._isCancellable())return this;var Y=this._onCancel();Y!==void 0?u.isArray(Y)?Y.push(G):this._setOnCancel([Y,G]):this._setOnCancel(G)}function at(){return this._onCancelField}function N(G){this._onCancelField=G}function It(){this._cancellationParent=void 0,this._onCancelField=void 0}function dt(G,Y){if(Y&1){this._cancellationParent=G;var q=G._branchesRemainingToCancel;q===void 0&&(q=0),G._branchesRemainingToCancel=q+1}Y&2&&G._isBound()&&this._setBoundTo(G._boundTo)}function D(G,Y){Y&2&&G._isBound()&&this._setBoundTo(G._boundTo)}var S=D;function M(){var G=this._boundTo;return G!==void 0&&G instanceof s?G.isFulfilled()?G.value():void 0:G}function B(){this._trace=new j(this._peekContext())}function z(G,Y){if(f(G)){var q=this._trace;if(q!==void 0&&Y&&(q=q._parent),q!==void 0)q.attachExtraTrace(G);else if(!G.__stackCleaned__){var tt=pe(G);u.notEnumerableProp(G,"stack",tt.message+`
`+tt.stack.join(`
`)),u.notEnumerableProp(G,"__stackCleaned__",!0)}}}function $(){this._trace=void 0}function K(G,Y,q,tt,nt){if(G===void 0&&Y!==null&&F){if(nt!==void 0&&nt._returnedNonUndefined()||!(tt._bitField&65535))return;q&&(q=q+" ");var bt="",St="";if(Y._trace){for(var mt=Y._trace.stack.split(`
`),Ft=qt(mt),Gt=Ft.length-1;Gt>=0;--Gt){var ke=Ft[Gt];if(!v.test(ke)){var We=ke.match(p);We&&(bt="at "+We[1]+":"+We[2]+":"+We[3]+" ");break}}if(Ft.length>0){for(var Um=Ft[0],Gt=0;Gt<mt.length;++Gt)if(mt[Gt]===Um){Gt>0&&(St=`
`+mt[Gt-1]);break}}}var zm="a promise was created in a "+q+"handler "+bt+"but was not returned from it, see http://goo.gl/rRqMUw"+St;tt._warn(zm,!0,Y)}}function st(G,Y){var q=G+" is deprecated and will be removed in a future version.";return Y&&(q+=" Use "+Y+" instead."),gt(q)}function gt(G,Y,q){if(J.warnings){var tt=new g(G),nt;if(Y)q._attachExtraTrace(tt);else if(J.longStackTraces&&(nt=s._peekContext()))nt.attachExtraTrace(tt);else{var bt=pe(tt);tt.stack=bt.message+`
`+bt.stack.join(`
`)}lt("warning",tt)||ie(tt,"",!0)}}function Pt(G,Y){for(var q=0;q<Y.length-1;++q)Y[q].push("From previous event:"),Y[q]=Y[q].join(`
`);return q<Y.length&&(Y[q]=Y[q].join(`
`)),G+`
`+Y.join(`
`)}function xt(G){for(var Y=0;Y<G.length;++Y)(G[Y].length===0||Y+1<G.length&&G[Y][0]===G[Y+1][0])&&(G.splice(Y,1),Y--)}function Lt(G){for(var Y=G[0],q=1;q<G.length;++q){for(var tt=G[q],nt=Y.length-1,bt=Y[nt],St=-1,mt=tt.length-1;mt>=0;--mt)if(tt[mt]===bt){St=mt;break}for(var mt=St;mt>=0;--mt){var Ft=tt[mt];if(Y[nt]===Ft)Y.pop(),nt--;else break}Y=tt}}function qt(G){for(var Y=[],q=0;q<G.length;++q){var tt=G[q],nt=tt==="    (No stack trace)"||_.test(tt),bt=nt&&L(tt);nt&&!bt&&(b&&tt.charAt(0)!==" "&&(tt="    "+tt),Y.push(tt))}return Y}function Se(G){for(var Y=G.stack.replace(/\s+$/g,"").split(`
`),q=0;q<Y.length;++q){var tt=Y[q];if(tt==="    (No stack trace)"||_.test(tt))break}return q>0&&G.name!="SyntaxError"&&(Y=Y.slice(q)),Y}function pe(G){var Y=G.stack,q=G.toString();return Y=typeof Y=="string"&&Y.length>0?Se(G):["    (No stack trace)"],{message:q,stack:G.name=="SyntaxError"?Y:qt(Y)}}function ie(G,Y,q){if(typeof console<"u"){var tt;if(u.isObject(G)){var nt=G.stack;tt=Y+A(nt,G)}else tt=Y+String(G);typeof P=="function"?P(tt,q):(typeof console.log=="function"||typeof console.log=="object")&&console.log(tt)}}function tr(G,Y,q,tt){var nt=!1;try{typeof Y=="function"&&(nt=!0,G==="rejectionHandled"?Y(tt):Y(q,tt))}catch(bt){d.throwLater(bt)}G==="unhandledRejection"?!lt(G,q,tt)&&!nt&&ie(q,"Unhandled rejection "):lt(G,tt)}function po(G){var Y;if(typeof G=="function")Y="[function "+(G.name||"anonymous")+"]";else{Y=G&&typeof G.toString=="function"?G.toString():u.toString(G);var q=/\[object [a-zA-Z0-9$_]+\]/;if(q.test(Y))try{var tt=JSON.stringify(G);Y=tt}catch{}Y.length===0&&(Y="(empty array)")}return"(<"+Be(Y)+">, no stack trace)"}function Be(G){var Y=41;return G.length<Y?G:G.substr(0,Y-3)+"..."}function Vr(){return typeof V=="function"}var L=function(){return!1},w=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function T(G){var Y=G.match(w);if(Y)return{fileName:Y[1],line:parseInt(Y[2],10)}}function O(G,Y){if(Vr()){for(var q=(G.stack||"").split(`
`),tt=(Y.stack||"").split(`
`),nt=-1,bt=-1,St,mt,Ft=0;Ft<q.length;++Ft){var Gt=T(q[Ft]);if(Gt){St=Gt.fileName,nt=Gt.line;break}}for(var Ft=0;Ft<tt.length;++Ft){var Gt=T(tt[Ft]);if(Gt){mt=Gt.fileName,bt=Gt.line;break}}nt<0||bt<0||!St||!mt||St!==mt||nt>=bt||(L=function(ke){if(y.test(ke))return!0;var We=T(ke);return!!(We&&We.fileName===St&&nt<=We.line&&We.line<=bt)})}}function j(G){this._parent=G,this._promisesCreated=0;var Y=this._length=1+(G===void 0?0:G._length);V(this,j),Y>32&&this.uncycle()}u.inherits(j,Error),a.CapturedTrace=j,j.prototype.uncycle=function(){var G=this._length;if(!(G<2)){for(var Y=[],q={},tt=0,nt=this;nt!==void 0;++tt)Y.push(nt),nt=nt._parent;G=this._length=tt;for(var tt=G-1;tt>=0;--tt){var bt=Y[tt].stack;q[bt]===void 0&&(q[bt]=tt)}for(var tt=0;tt<G;++tt){var St=Y[tt].stack,mt=q[St];if(mt!==void 0&&mt!==tt){mt>0&&(Y[mt-1]._parent=void 0,Y[mt-1]._length=1),Y[tt]._parent=void 0,Y[tt]._length=1;var Ft=tt>0?Y[tt-1]:this;mt<G-1?(Ft._parent=Y[mt+1],Ft._parent.uncycle(),Ft._length=Ft._parent._length+1):(Ft._parent=void 0,Ft._length=1);for(var Gt=Ft._length+1,ke=tt-2;ke>=0;--ke)Y[ke]._length=Gt,Gt++;return}}}},j.prototype.attachExtraTrace=function(G){if(!G.__stackCleaned__){this.uncycle();for(var Y=pe(G),q=Y.message,tt=[Y.stack],nt=this;nt!==void 0;)tt.push(qt(nt.stack.split(`
`))),nt=nt._parent;Lt(tt),xt(tt),u.notEnumerableProp(G,"stack",Pt(q,tt)),u.notEnumerableProp(G,"__stackCleaned__",!0)}};var V=function(){var Y=/^\s*at\s*/,q=function(St,mt){return typeof St=="string"?St:mt.name!==void 0&&mt.message!==void 0?mt.toString():po(mt)};if(typeof Error.stackTraceLimit=="number"&&typeof Error.captureStackTrace=="function"){Error.stackTraceLimit+=6,_=Y,A=q;var tt=Error.captureStackTrace;return L=function(St){return y.test(St)},function(St,mt){Error.stackTraceLimit+=6,tt(St,mt),Error.stackTraceLimit-=6}}var nt=new Error;if(typeof nt.stack=="string"&&nt.stack.split(`
`)[0].indexOf("stackDetection@")>=0)return _=/@/,A=q,b=!0,function(mt){mt.stack=new Error().stack};var bt;try{throw new Error}catch(St){bt="stack"in St}return!("stack"in nt)&&bt&&typeof Error.stackTraceLimit=="number"?(_=Y,A=q,function(mt){Error.stackTraceLimit+=6;try{throw new Error}catch(Ft){mt.stack=Ft.stack}Error.stackTraceLimit-=6}):(A=function(St,mt){return typeof St=="string"?St:(typeof mt=="object"||typeof mt=="function")&&mt.name!==void 0&&mt.message!==void 0?mt.toString():po(mt)},null)}();typeof console<"u"&&typeof console.warn<"u"&&(P=function(G){console.warn(G)},u.isNode&&process.stderr.isTTY?P=function(G,Y){var q=Y?"\x1B[33m":"\x1B[31m";console.warn(q+G+`\x1B[0m
`)}:!u.isNode&&typeof new Error().stack=="string"&&(P=function(G,Y){console.warn("%c"+G,Y?"color: darkorange":"color: red")}));var J={warnings:C,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return x&&s.longStackTraces(),{asyncHooks:function(){return J.asyncHooks},longStackTraces:function(){return J.longStackTraces},warnings:function(){return J.warnings},cancellation:function(){return J.cancellation},monitoring:function(){return J.monitoring},propagateFromFunction:function(){return S},boundValueFunction:function(){return M},checkForgottenReturns:K,setBounds:O,warn:gt,deprecated:st,CapturedTrace:j,fireDomEvent:W,fireGlobalEvent:U}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(i,n,o){n.exports=function(s){function a(){return this.value}function l(){throw this.reason}s.prototype.return=s.prototype.thenReturn=function(c){return c instanceof s&&c.suppressUnhandledRejections(),this._then(a,void 0,void 0,{value:c},void 0)},s.prototype.throw=s.prototype.thenThrow=function(c){return this._then(l,void 0,void 0,{reason:c},void 0)},s.prototype.catchThrow=function(c){if(arguments.length<=1)return this._then(void 0,l,void 0,{reason:c},void 0);var d=arguments[1],g=function(){throw d};return this.caught(c,g)},s.prototype.catchReturn=function(c){if(arguments.length<=1)return c instanceof s&&c.suppressUnhandledRejections(),this._then(void 0,a,void 0,{value:c},void 0);var d=arguments[1];d instanceof s&&d.suppressUnhandledRejections();var g=function(){return d};return this.caught(c,g)}}},{}],11:[function(i,n,o){n.exports=function(s,a){var l=s.reduce,c=s.all;function d(){return c(this)}function g(u,h){return l(u,h,a,a)}s.prototype.each=function(u){return l(this,u,a,0)._then(d,void 0,void 0,this,void 0)},s.prototype.mapSeries=function(u){return l(this,u,a,a)},s.each=function(u,h){return l(u,h,a,0)._then(d,void 0,void 0,u,void 0)},s.mapSeries=g}},{}],12:[function(i,n,o){var s=i("./es5"),a=s.freeze,l=i("./util"),c=l.inherits,d=l.notEnumerableProp;function g(P,E){function C(x){if(!(this instanceof C))return new C(x);d(this,"message",typeof x=="string"?x:E),d(this,"name",P),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(C,Error),C}var u,h,f=g("Warning","warning"),I=g("CancellationError","cancellation error"),m=g("TimeoutError","timeout error"),y=g("AggregateError","aggregate error");try{u=TypeError,h=RangeError}catch{u=g("TypeError","type error"),h=g("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),p=0;p<v.length;++p)typeof Array.prototype[v[p]]=="function"&&(y.prototype[v[p]]=Array.prototype[v[p]]);s.defineProperty(y.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),y.prototype.isOperational=!0;var _=0;y.prototype.toString=function(){var P=Array(_*4+1).join(" "),E=`
`+P+`AggregateError of:
`;_++,P=Array(_*4+1).join(" ");for(var C=0;C<this.length;++C){for(var x=this[C]===this?"[Circular AggregateError]":this[C]+"",F=x.split(`
`),R=0;R<F.length;++R)F[R]=P+F[R];x=F.join(`
`),E+=x+`
`}return _--,E};function A(P){if(!(this instanceof A))return new A(P);d(this,"name","OperationalError"),d(this,"message",P),this.cause=P,this.isOperational=!0,P instanceof Error?(d(this,"message",P.message),d(this,"stack",P.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}c(A,Error);var b=Error.__BluebirdErrorTypes__;b||(b=a({CancellationError:I,TimeoutError:m,OperationalError:A,RejectionError:A,AggregateError:y}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),n.exports={Error,TypeError:u,RangeError:h,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:f}},{"./es5":13,"./util":36}],13:[function(i,n,o){var s=function(){return this===void 0}();if(s)n.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:s,propertyIsWritable:function(m,y){var v=Object.getOwnPropertyDescriptor(m,y);return!!(!v||v.writable||v.set)}};else{var a={}.hasOwnProperty,l={}.toString,c={}.constructor.prototype,d=function(m){var y=[];for(var v in m)a.call(m,v)&&y.push(v);return y},g=function(m,y){return{value:m[y]}},u=function(m,y,v){return m[y]=v.value,m},h=function(m){return m},f=function(m){try{return Object(m).constructor.prototype}catch{return c}},I=function(m){try{return l.call(m)==="[object Array]"}catch{return!1}};n.exports={isArray:I,keys:d,names:d,defineProperty:u,getDescriptor:g,freeze:h,getPrototypeOf:f,isES5:s,propertyIsWritable:function(){return!0}}}},{}],14:[function(i,n,o){n.exports=function(s,a){var l=s.map;s.prototype.filter=function(c,d){return l(this,c,d,a)},s.filter=function(c,d,g){return l(c,d,g,a)}}},{}],15:[function(i,n,o){n.exports=function(s,a,l){var c=i("./util"),d=s.CancellationError,g=c.errorObj,u=i("./catch_filter")(l);function h(p,_,A){this.promise=p,this.type=_,this.handler=A,this.called=!1,this.cancelPromise=null}h.prototype.isFinallyHandler=function(){return this.type===0};function f(p){this.finallyHandler=p}f.prototype._resultCancelled=function(){I(this.finallyHandler)};function I(p,_){return p.cancelPromise!=null?(arguments.length>1?p.cancelPromise._reject(_):p.cancelPromise._cancel(),p.cancelPromise=null,!0):!1}function m(){return v.call(this,this.promise._target()._settledValue())}function y(p){if(!I(this,p))return g.e=p,g}function v(p){var _=this.promise,A=this.handler;if(!this.called){this.called=!0;var b=this.isFinallyHandler()?A.call(_._boundValue()):A.call(_._boundValue(),p);if(b===l)return b;if(b!==void 0){_._setReturnedNonUndefined();var P=a(b,_);if(P instanceof s){if(this.cancelPromise!=null)if(P._isCancelled()){var E=new d("late cancellation observer");return _._attachExtraTrace(E),g.e=E,g}else P.isPending()&&P._attachCancellationCallback(new f(this));return P._then(m,y,void 0,this,void 0)}}}return _.isRejected()?(I(this),g.e=p,g):(I(this),p)}return s.prototype._passThrough=function(p,_,A,b){return typeof p!="function"?this.then():this._then(A,b,void 0,new h(this,_,p),void 0)},s.prototype.lastly=s.prototype.finally=function(p){return this._passThrough(p,0,v,v)},s.prototype.tap=function(p){return this._passThrough(p,1,v)},s.prototype.tapCatch=function(p){var _=arguments.length;if(_===1)return this._passThrough(p,1,void 0,v);var A=new Array(_-1),b=0,P;for(P=0;P<_-1;++P){var E=arguments[P];if(c.isObject(E))A[b++]=E;else return s.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+c.classString(E)))}A.length=b;var C=arguments[P];return this._passThrough(u(A,C,this),1,void 0,v)},h}},{"./catch_filter":7,"./util":36}],16:[function(i,n,o){n.exports=function(s,a,l,c,d,g){var u=i("./errors"),h=u.TypeError,f=i("./util"),I=f.errorObj,m=f.tryCatch,y=[];function v(_,A,b){for(var P=0;P<A.length;++P){b._pushContext();var E=m(A[P])(_);if(b._popContext(),E===I){b._pushContext();var C=s.reject(I.e);return b._popContext(),C}var x=c(E,b);if(x instanceof s)return x}return null}function p(_,A,b,P){if(g.cancellation()){var E=new s(l),C=this._finallyPromise=new s(l);this._promise=E.lastly(function(){return C}),E._captureStackTrace(),E._setOnCancel(this)}else{var x=this._promise=new s(l);x._captureStackTrace()}this._stack=P,this._generatorFunction=_,this._receiver=A,this._generator=void 0,this._yieldHandlers=typeof b=="function"?[b].concat(y):y,this._yieldedPromise=null,this._cancellationPhase=!1}f.inherits(p,d),p.prototype._isResolved=function(){return this._promise===null},p.prototype._cleanup=function(){this._promise=this._generator=null,g.cancellation()&&this._finallyPromise!==null&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},p.prototype._promiseCancelled=function(){if(!this._isResolved()){var _=typeof this._generator.return<"u",A;if(_)this._promise._pushContext(),A=m(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var b=new s.CancellationError("generator .return() sentinel");s.coroutine.returnSentinel=b,this._promise._attachExtraTrace(b),this._promise._pushContext(),A=m(this._generator.throw).call(this._generator,b),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(A)}},p.prototype._promiseFulfilled=function(_){this._yieldedPromise=null,this._promise._pushContext();var A=m(this._generator.next).call(this._generator,_);this._promise._popContext(),this._continue(A)},p.prototype._promiseRejected=function(_){this._yieldedPromise=null,this._promise._attachExtraTrace(_),this._promise._pushContext();var A=m(this._generator.throw).call(this._generator,_);this._promise._popContext(),this._continue(A)},p.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof s){var _=this._yieldedPromise;this._yieldedPromise=null,_.cancel()}},p.prototype.promise=function(){return this._promise},p.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},p.prototype._continue=function(_){var A=this._promise;if(_===I)return this._cleanup(),this._cancellationPhase?A.cancel():A._rejectCallback(_.e,!1);var b=_.value;if(_.done===!0)return this._cleanup(),this._cancellationPhase?A.cancel():A._resolveCallback(b);var P=c(b,this._promise);if(!(P instanceof s)&&(P=v(P,this._yieldHandlers,this._promise),P===null)){this._promiseRejected(new h(`A value %s was yielded that could not be treated as a promise

    See http://goo.gl/MqrFmX

`.replace("%s",String(b))+`From coroutine:
`+this._stack.split(`
`).slice(1,-7).join(`
`)));return}P=P._target();var E=P._bitField;E&50397184?E&33554432?s._async.invoke(this._promiseFulfilled,this,P._value()):E&16777216?s._async.invoke(this._promiseRejected,this,P._reason()):this._promiseCancelled():(this._yieldedPromise=P,P._proxy(this,null))},s.coroutine=function(_,A){if(typeof _!="function")throw new h(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var b=Object(A).yieldHandler,P=p,E=new Error().stack;return function(){var C=_.apply(this,arguments),x=new P(void 0,void 0,b,E),F=x.promise();return x._generator=C,x._promiseFulfilled(void 0),F}},s.coroutine.addYieldHandler=function(_){if(typeof _!="function")throw new h("expecting a function but got "+f.classString(_));y.push(_)},s.spawn=function(_){if(g.deprecated("Promise.spawn()","Promise.coroutine()"),typeof _!="function")return a(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var A=new p(_,this),b=A.promise();return A._run(s.spawn),b}}},{"./errors":12,"./util":36}],17:[function(i,n,o){n.exports=function(s,a,l,c,d){var g=i("./util");g.canEvaluate,g.tryCatch,g.errorObj,s.join=function(){var u=arguments.length-1,h;if(u>0&&typeof arguments[u]=="function"){h=arguments[u];var I}var f=[].slice.call(arguments);h&&f.pop();var I=new a(f).promise();return h!==void 0?I.spread(h):I}}},{"./util":36}],18:[function(i,n,o){n.exports=function(s,a,l,c,d,g){var u=i("./util"),h=u.tryCatch,f=u.errorObj,I=s._async;function m(v,p,_,A){this.constructor$(v),this._promise._captureStackTrace();var b=s._getContext();if(this._callback=u.contextBind(b,p),this._preservedValues=A===d?new Array(this.length()):null,this._limit=_,this._inFlight=0,this._queue=[],I.invoke(this._asyncInit,this,void 0),u.isArray(v))for(var P=0;P<v.length;++P){var E=v[P];E instanceof s&&E.suppressUnhandledRejections()}}u.inherits(m,a),m.prototype._asyncInit=function(){this._init$(void 0,-2)},m.prototype._init=function(){},m.prototype._promiseFulfilled=function(v,p){var _=this._values,A=this.length(),b=this._preservedValues,P=this._limit;if(p<0){if(p=p*-1-1,_[p]=v,P>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(P>=1&&this._inFlight>=P)return _[p]=v,this._queue.push(p),!1;b!==null&&(b[p]=v);var E=this._promise,C=this._callback,x=E._boundValue();E._pushContext();var F=h(C).call(x,v,p,A),R=E._popContext();if(g.checkForgottenReturns(F,R,b!==null?"Promise.filter":"Promise.map",E),F===f)return this._reject(F.e),!0;var Z=c(F,this._promise);if(Z instanceof s){Z=Z._target();var H=Z._bitField;if(H&50397184)if(H&33554432)F=Z._value();else return H&16777216?(this._reject(Z._reason()),!0):(this._cancel(),!0);else return P>=1&&this._inFlight++,_[p]=Z,Z._proxy(this,(p+1)*-1),!1}_[p]=F}var W=++this._totalResolved;return W>=A?(b!==null?this._filter(_,b):this._resolve(_),!0):!1},m.prototype._drainQueue=function(){for(var v=this._queue,p=this._limit,_=this._values;v.length>0&&this._inFlight<p;){if(this._isResolved())return;var A=v.pop();this._promiseFulfilled(_[A],A)}},m.prototype._filter=function(v,p){for(var _=p.length,A=new Array(_),b=0,P=0;P<_;++P)v[P]&&(A[b++]=p[P]);A.length=b,this._resolve(A)},m.prototype.preservedValues=function(){return this._preservedValues};function y(v,p,_,A){if(typeof p!="function")return l("expecting a function but got "+u.classString(p));var b=0;if(_!==void 0)if(typeof _=="object"&&_!==null){if(typeof _.concurrency!="number")return s.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(_.concurrency)));b=_.concurrency}else return s.reject(new TypeError("options argument must be an object but it is "+u.classString(_)));return b=typeof b=="number"&&isFinite(b)&&b>=1?b:0,new m(v,p,b,A).promise()}s.prototype.map=function(v,p){return y(this,v,p,null)},s.map=function(v,p,_,A){return y(v,p,_,A)}}},{"./util":36}],19:[function(i,n,o){n.exports=function(s,a,l,c,d){var g=i("./util"),u=g.tryCatch;s.method=function(h){if(typeof h!="function")throw new s.TypeError("expecting a function but got "+g.classString(h));return function(){var f=new s(a);f._captureStackTrace(),f._pushContext();var I=u(h).apply(this,arguments),m=f._popContext();return d.checkForgottenReturns(I,m,"Promise.method",f),f._resolveFromSyncValue(I),f}},s.attempt=s.try=function(h){if(typeof h!="function")return c("expecting a function but got "+g.classString(h));var f=new s(a);f._captureStackTrace(),f._pushContext();var I;if(arguments.length>1){d.deprecated("calling Promise.try with more than 1 argument");var m=arguments[1],y=arguments[2];I=g.isArray(m)?u(h).apply(y,m):u(h).call(y,m)}else I=u(h)();var v=f._popContext();return d.checkForgottenReturns(I,v,"Promise.try",f),f._resolveFromSyncValue(I),f},s.prototype._resolveFromSyncValue=function(h){h===g.errorObj?this._rejectCallback(h.e,!1):this._resolveCallback(h,!0)}}},{"./util":36}],20:[function(i,n,o){var s=i("./util"),a=s.maybeWrapAsError,l=i("./errors"),c=l.OperationalError,d=i("./es5");function g(I){return I instanceof Error&&d.getPrototypeOf(I)===Error.prototype}var u=/^(?:name|message|stack|cause)$/;function h(I){var m;if(g(I)){m=new c(I),m.name=I.name,m.message=I.message,m.stack=I.stack;for(var y=d.keys(I),v=0;v<y.length;++v){var p=y[v];u.test(p)||(m[p]=I[p])}return m}return s.markAsOriginatingFromRejection(I),I}function f(I,m){return function(y,v){if(I!==null){if(y){var p=h(a(y));I._attachExtraTrace(p),I._reject(p)}else if(!m)I._fulfill(v);else{var _=[].slice.call(arguments,1);I._fulfill(_)}I=null}}}n.exports=f},{"./errors":12,"./es5":13,"./util":36}],21:[function(i,n,o){n.exports=function(s){var a=i("./util"),l=s._async,c=a.tryCatch,d=a.errorObj;function g(f,I){var m=this;if(!a.isArray(f))return u.call(m,f,I);var y=c(I).apply(m._boundValue(),[null].concat(f));y===d&&l.throwLater(y.e)}function u(f,I){var m=this,y=m._boundValue(),v=f===void 0?c(I).call(y,null):c(I).call(y,null,f);v===d&&l.throwLater(v.e)}function h(f,I){var m=this;if(!f){var y=new Error(f+"");y.cause=f,f=y}var v=c(I).call(m._boundValue(),f);v===d&&l.throwLater(v.e)}s.prototype.asCallback=s.prototype.nodeify=function(f,I){if(typeof f=="function"){var m=u;I!==void 0&&Object(I).spread&&(m=g),this._then(m,h,void 0,this,f)}return this}}},{"./util":36}],22:[function(i,n,o){n.exports=function(){var s=function(){return new E(`circular promise resolution chain

    See http://goo.gl/MqrFmX
`)},a=function(){return new N.PromiseInspection(this._target())},l=function(S){return N.reject(new E(S))};function c(){}var d={},g=i("./util");g.setReflectHandler(a);var u=function(){var S=process.domain;return S===void 0?null:S},h=function(){return null},f=function(){return{domain:u(),async:null}},I=g.isNode&&g.nodeSupportsAsyncResource?i("async_hooks").AsyncResource:null,m=function(){return{domain:u(),async:new I("Bluebird::Promise")}},y=g.isNode?f:h;g.notEnumerableProp(N,"_getContext",y);var v=function(){y=m,g.notEnumerableProp(N,"_getContext",m)},p=function(){y=f,g.notEnumerableProp(N,"_getContext",f)},_=i("./es5"),A=i("./async"),b=new A;_.defineProperty(N,"_async",{value:b});var P=i("./errors"),E=N.TypeError=P.TypeError;N.RangeError=P.RangeError;var C=N.CancellationError=P.CancellationError;N.TimeoutError=P.TimeoutError,N.OperationalError=P.OperationalError,N.RejectionError=P.OperationalError,N.AggregateError=P.AggregateError;var x=function(){},F={},R={},Z=i("./thenables")(N,x),H=i("./promise_array")(N,x,Z,l,c),W=i("./context")(N),U=W.create,X=i("./debuggability")(N,W,v,p);X.CapturedTrace;var ot=i("./finally")(N,Z,R),lt=i("./catch_filter")(R),et=i("./nodeback"),Q=g.errorObj,it=g.tryCatch;function at(S,M){if(S==null||S.constructor!==N)throw new E(`the promise constructor cannot be invoked directly

    See http://goo.gl/MqrFmX
`);if(typeof M!="function")throw new E("expecting a function but got "+g.classString(M))}function N(S){S!==x&&at(this,S),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(S),this._promiseCreated(),this._fireEvent("promiseCreated",this)}N.prototype.toString=function(){return"[object Promise]"},N.prototype.caught=N.prototype.catch=function(S){var M=arguments.length;if(M>1){var B=new Array(M-1),z=0,$;for($=0;$<M-1;++$){var K=arguments[$];if(g.isObject(K))B[z++]=K;else return l("Catch statement predicate: expecting an object but got "+g.classString(K))}if(B.length=z,S=arguments[$],typeof S!="function")throw new E("The last argument to .catch() must be a function, got "+g.toString(S));return this.then(void 0,lt(B,S,this))}return this.then(void 0,S)},N.prototype.reflect=function(){return this._then(a,a,void 0,this,void 0)},N.prototype.then=function(S,M){if(X.warnings()&&arguments.length>0&&typeof S!="function"&&typeof M!="function"){var B=".then() only accepts functions but was passed: "+g.classString(S);arguments.length>1&&(B+=", "+g.classString(M)),this._warn(B)}return this._then(S,M,void 0,void 0,void 0)},N.prototype.done=function(S,M){var B=this._then(S,M,void 0,void 0,void 0);B._setIsFinal()},N.prototype.spread=function(S){return typeof S!="function"?l("expecting a function but got "+g.classString(S)):this.all()._then(S,void 0,void 0,F,void 0)},N.prototype.toJSON=function(){var S={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(S.fulfillmentValue=this.value(),S.isFulfilled=!0):this.isRejected()&&(S.rejectionReason=this.reason(),S.isRejected=!0),S},N.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new H(this).promise()},N.prototype.error=function(S){return this.caught(g.originatesFromRejection,S)},N.getNewLibraryCopy=n.exports,N.is=function(S){return S instanceof N},N.fromNode=N.fromCallback=function(S){var M=new N(x);M._captureStackTrace();var B=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,z=it(S)(et(M,B));return z===Q&&M._rejectCallback(z.e,!0),M._isFateSealed()||M._setAsyncGuaranteed(),M},N.all=function(S){return new H(S).promise()},N.cast=function(S){var M=Z(S);return M instanceof N||(M=new N(x),M._captureStackTrace(),M._setFulfilled(),M._rejectionHandler0=S),M},N.resolve=N.fulfilled=N.cast,N.reject=N.rejected=function(S){var M=new N(x);return M._captureStackTrace(),M._rejectCallback(S,!0),M},N.setScheduler=function(S){if(typeof S!="function")throw new E("expecting a function but got "+g.classString(S));return b.setScheduler(S)},N.prototype._then=function(S,M,B,z,$){var K=$!==void 0,st=K?$:new N(x),gt=this._target(),Pt=gt._bitField;K||(st._propagateFrom(this,3),st._captureStackTrace(),z===void 0&&this._bitField&2097152&&(Pt&50397184?z=this._boundValue():z=gt===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,st));var xt=y();if(Pt&50397184){var Lt,qt,Se=gt._settlePromiseCtx;Pt&33554432?(qt=gt._rejectionHandler0,Lt=S):Pt&16777216?(qt=gt._fulfillmentHandler0,Lt=M,gt._unsetRejectionIsUnhandled()):(Se=gt._settlePromiseLateCancellationObserver,qt=new C("late cancellation observer"),gt._attachExtraTrace(qt),Lt=M),b.invoke(Se,gt,{handler:g.contextBind(xt,Lt),promise:st,receiver:z,value:qt})}else gt._addCallbacks(S,M,st,z,xt);return st},N.prototype._length=function(){return this._bitField&65535},N.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0},N.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864},N.prototype._setLength=function(S){this._bitField=this._bitField&-65536|S&65535},N.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432,this._fireEvent("promiseFulfilled",this)},N.prototype._setRejected=function(){this._bitField=this._bitField|16777216,this._fireEvent("promiseRejected",this)},N.prototype._setFollowing=function(){this._bitField=this._bitField|67108864,this._fireEvent("promiseResolved",this)},N.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304},N.prototype._isFinal=function(){return(this._bitField&4194304)>0},N.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},N.prototype._setCancelled=function(){this._bitField=this._bitField|65536,this._fireEvent("promiseCancelled",this)},N.prototype._setWillBeCancelled=function(){this._bitField=this._bitField|8388608},N.prototype._setAsyncGuaranteed=function(){if(!b.hasCustomScheduler()){var S=this._bitField;this._bitField=S|(S&536870912)>>2^134217728}},N.prototype._setNoAsyncGuarantee=function(){this._bitField=(this._bitField|536870912)&-134217729},N.prototype._receiverAt=function(S){var M=S===0?this._receiver0:this[S*4-4+3];if(M!==d)return M===void 0&&this._isBound()?this._boundValue():M},N.prototype._promiseAt=function(S){return this[S*4-4+2]},N.prototype._fulfillmentHandlerAt=function(S){return this[S*4-4+0]},N.prototype._rejectionHandlerAt=function(S){return this[S*4-4+1]},N.prototype._boundValue=function(){},N.prototype._migrateCallback0=function(S){S._bitField;var M=S._fulfillmentHandler0,B=S._rejectionHandler0,z=S._promise0,$=S._receiverAt(0);$===void 0&&($=d),this._addCallbacks(M,B,z,$,null)},N.prototype._migrateCallbackAt=function(S,M){var B=S._fulfillmentHandlerAt(M),z=S._rejectionHandlerAt(M),$=S._promiseAt(M),K=S._receiverAt(M);K===void 0&&(K=d),this._addCallbacks(B,z,$,K,null)},N.prototype._addCallbacks=function(S,M,B,z,$){var K=this._length();if(K>=65531&&(K=0,this._setLength(0)),K===0)this._promise0=B,this._receiver0=z,typeof S=="function"&&(this._fulfillmentHandler0=g.contextBind($,S)),typeof M=="function"&&(this._rejectionHandler0=g.contextBind($,M));else{var st=K*4-4;this[st+2]=B,this[st+3]=z,typeof S=="function"&&(this[st+0]=g.contextBind($,S)),typeof M=="function"&&(this[st+1]=g.contextBind($,M))}return this._setLength(K+1),K},N.prototype._proxy=function(S,M){this._addCallbacks(void 0,void 0,M,S,null)},N.prototype._resolveCallback=function(S,M){if(!(this._bitField&117506048)){if(S===this)return this._rejectCallback(s(),!1);var B=Z(S,this);if(!(B instanceof N))return this._fulfill(S);M&&this._propagateFrom(B,2);var z=B._target();if(z===this){this._reject(s());return}var $=z._bitField;if($&50397184)if($&33554432)this._fulfill(z._value());else if($&16777216)this._reject(z._reason());else{var gt=new C("late cancellation observer");z._attachExtraTrace(gt),this._reject(gt)}else{var K=this._length();K>0&&z._migrateCallback0(this);for(var st=1;st<K;++st)z._migrateCallbackAt(this,st);this._setFollowing(),this._setLength(0),this._setFollowee(B)}}},N.prototype._rejectCallback=function(S,M,B){var z=g.ensureErrorObject(S),$=z===S;if(!$&&!B&&X.warnings()){var K="a promise was rejected with a non-error: "+g.classString(S);this._warn(K,!0)}this._attachExtraTrace(z,M?$:!1),this._reject(S)},N.prototype._resolveFromExecutor=function(S){if(S!==x){var M=this;this._captureStackTrace(),this._pushContext();var B=!0,z=this._execute(S,function($){M._resolveCallback($)},function($){M._rejectCallback($,B)});B=!1,this._popContext(),z!==void 0&&M._rejectCallback(z,!0)}},N.prototype._settlePromiseFromHandler=function(S,M,B,z){var $=z._bitField;if(!($&65536)){z._pushContext();var K;M===F?!B||typeof B.length!="number"?(K=Q,K.e=new E("cannot .spread() a non-array: "+g.classString(B))):K=it(S).apply(this._boundValue(),B):K=it(S).call(M,B);var st=z._popContext();$=z._bitField,!($&65536)&&(K===R?z._reject(B):K===Q?z._rejectCallback(K.e,!1):(X.checkForgottenReturns(K,st,"",z,this),z._resolveCallback(K)))}},N.prototype._target=function(){for(var S=this;S._isFollowing();)S=S._followee();return S},N.prototype._followee=function(){return this._rejectionHandler0},N.prototype._setFollowee=function(S){this._rejectionHandler0=S},N.prototype._settlePromise=function(S,M,B,z){var $=S instanceof N,K=this._bitField,st=(K&134217728)!==0;K&65536?($&&S._invokeInternalOnCancel(),B instanceof ot&&B.isFinallyHandler()?(B.cancelPromise=S,it(M).call(B,z)===Q&&S._reject(Q.e)):M===a?S._fulfill(a.call(B)):B instanceof c?B._promiseCancelled(S):$||S instanceof H?S._cancel():B.cancel()):typeof M=="function"?$?(st&&S._setAsyncGuaranteed(),this._settlePromiseFromHandler(M,B,z,S)):M.call(B,z,S):B instanceof c?B._isResolved()||(K&33554432?B._promiseFulfilled(z,S):B._promiseRejected(z,S)):$&&(st&&S._setAsyncGuaranteed(),K&33554432?S._fulfill(z):S._reject(z))},N.prototype._settlePromiseLateCancellationObserver=function(S){var M=S.handler,B=S.promise,z=S.receiver,$=S.value;typeof M=="function"?B instanceof N?this._settlePromiseFromHandler(M,z,$,B):M.call(z,$,B):B instanceof N&&B._reject($)},N.prototype._settlePromiseCtx=function(S){this._settlePromise(S.promise,S.handler,S.receiver,S.value)},N.prototype._settlePromise0=function(S,M,B){var z=this._promise0,$=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(z,S,$,M)},N.prototype._clearCallbackDataAtIndex=function(S){var M=S*4-4;this[M+2]=this[M+3]=this[M+0]=this[M+1]=void 0},N.prototype._fulfill=function(S){var M=this._bitField;if(!((M&117506048)>>>16)){if(S===this){var B=s();return this._attachExtraTrace(B),this._reject(B)}this._setFulfilled(),this._rejectionHandler0=S,(M&65535)>0&&(M&134217728?this._settlePromises():b.settlePromises(this),this._dereferenceTrace())}},N.prototype._reject=function(S){var M=this._bitField;if(!((M&117506048)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=S,this._isFinal())return b.fatalError(S,g.isNode);(M&65535)>0?b.settlePromises(this):this._ensurePossibleRejectionHandled()}},N.prototype._fulfillPromises=function(S,M){for(var B=1;B<S;B++){var z=this._fulfillmentHandlerAt(B),$=this._promiseAt(B),K=this._receiverAt(B);this._clearCallbackDataAtIndex(B),this._settlePromise($,z,K,M)}},N.prototype._rejectPromises=function(S,M){for(var B=1;B<S;B++){var z=this._rejectionHandlerAt(B),$=this._promiseAt(B),K=this._receiverAt(B);this._clearCallbackDataAtIndex(B),this._settlePromise($,z,K,M)}},N.prototype._settlePromises=function(){var S=this._bitField,M=S&65535;if(M>0){if(S&16842752){var B=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,B,S),this._rejectPromises(M,B)}else{var z=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,z,S),this._fulfillPromises(M,z)}this._setLength(0)}this._clearCancellationData()},N.prototype._settledValue=function(){var S=this._bitField;if(S&33554432)return this._rejectionHandler0;if(S&16777216)return this._fulfillmentHandler0},typeof Symbol<"u"&&Symbol.toStringTag&&_.defineProperty(N.prototype,Symbol.toStringTag,{get:function(){return"Object"}});function It(S){this.promise._resolveCallback(S)}function dt(S){this.promise._rejectCallback(S,!1)}N.defer=N.pending=function(){X.deprecated("Promise.defer","new Promise");var S=new N(x);return{promise:S,resolve:It,reject:dt}},g.notEnumerableProp(N,"_makeSelfResolutionError",s),i("./method")(N,x,Z,l,X),i("./bind")(N,x,Z,X),i("./cancel")(N,H,l,X),i("./direct_resolve")(N),i("./synchronous_inspection")(N),i("./join")(N,H,Z,x,b),N.Promise=N,N.version="3.7.2",i("./call_get.js")(N),i("./generators.js")(N,l,x,Z,c,X),i("./map.js")(N,H,l,Z,x,X),i("./nodeify.js")(N),i("./promisify.js")(N,x),i("./props.js")(N,H,Z,l),i("./race.js")(N,x,Z,l),i("./reduce.js")(N,H,l,Z,x,X),i("./settle.js")(N,H,X),i("./some.js")(N,H,l),i("./timers.js")(N,x,X),i("./using.js")(N,l,Z,U,x,X),i("./any.js")(N),i("./each.js")(N,x),i("./filter.js")(N,x),g.toFastProperties(N),g.toFastProperties(N.prototype);function D(S){var M=new N(x);M._fulfillmentHandler0=S,M._rejectionHandler0=S,M._promise0=S,M._receiver0=S}return D({a:1}),D({b:2}),D({c:3}),D(1),D(function(){}),D(void 0),D(!1),D(new N(x)),X.setBounds(A.firstLineError,g.lastLineError),N}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(i,n,o){n.exports=function(s,a,l,c,d){var g=i("./util");g.isArray;function u(f){switch(f){case-2:return[];case-3:return{};case-6:return new Map}}function h(f){var I=this._promise=new s(a);f instanceof s&&(I._propagateFrom(f,3),f.suppressUnhandledRejections()),I._setOnCancel(this),this._values=f,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return g.inherits(h,d),h.prototype.length=function(){return this._length},h.prototype.promise=function(){return this._promise},h.prototype._init=function f(I,m){var y=l(this._values,this._promise);if(y instanceof s){y=y._target();var v=y._bitField;if(this._values=y,v&50397184)if(v&33554432)y=y._value();else return v&16777216?this._reject(y._reason()):this._cancel();else return this._promise._setAsyncGuaranteed(),y._then(f,this._reject,void 0,this,m)}if(y=g.asArray(y),y===null){var p=c("expecting an array or an iterable object but got "+g.classString(y)).reason();this._promise._rejectCallback(p,!1);return}if(y.length===0){m===-5?this._resolveEmptyArray():this._resolve(u(m));return}this._iterate(y)},h.prototype._iterate=function(f){var I=this.getActualLength(f.length);this._length=I,this._values=this.shouldCopyValues()?new Array(I):this._values;for(var m=this._promise,y=!1,v=null,p=0;p<I;++p){var _=l(f[p],m);_ instanceof s?(_=_._target(),v=_._bitField):v=null,y?v!==null&&_.suppressUnhandledRejections():v!==null?v&50397184?v&33554432?y=this._promiseFulfilled(_._value(),p):v&16777216?y=this._promiseRejected(_._reason(),p):y=this._promiseCancelled(p):(_._proxy(this,p),this._values[p]=_):y=this._promiseFulfilled(_,p)}y||m._setAsyncGuaranteed()},h.prototype._isResolved=function(){return this._values===null},h.prototype._resolve=function(f){this._values=null,this._promise._fulfill(f)},h.prototype._cancel=function(){this._isResolved()||!this._promise._isCancellable()||(this._values=null,this._promise._cancel())},h.prototype._reject=function(f){this._values=null,this._promise._rejectCallback(f,!1)},h.prototype._promiseFulfilled=function(f,I){this._values[I]=f;var m=++this._totalResolved;return m>=this._length?(this._resolve(this._values),!0):!1},h.prototype._promiseCancelled=function(){return this._cancel(),!0},h.prototype._promiseRejected=function(f){return this._totalResolved++,this._reject(f),!0},h.prototype._resultCancelled=function(){if(!this._isResolved()){var f=this._values;if(this._cancel(),f instanceof s)f.cancel();else for(var I=0;I<f.length;++I)f[I]instanceof s&&f[I].cancel()}},h.prototype.shouldCopyValues=function(){return!0},h.prototype.getActualLength=function(f){return f},h}},{"./util":36}],24:[function(i,n,o){n.exports=function(s,a){var l={},c=i("./util"),d=i("./nodeback"),g=c.withAppended,u=c.maybeWrapAsError,h=c.canEvaluate,f=i("./errors").TypeError,I="Async",m={__isPromisified__:!0},y=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],v=new RegExp("^(?:"+y.join("|")+")$"),p=function(W){return c.isIdentifier(W)&&W.charAt(0)!=="_"&&W!=="constructor"};function _(W){return!v.test(W)}function A(W){try{return W.__isPromisified__===!0}catch{return!1}}function b(W,U,X){var ot=c.getDataPropertyOrDefault(W,U+X,m);return ot?A(ot):!1}function P(W,U,X){for(var ot=0;ot<W.length;ot+=2){var lt=W[ot];if(X.test(lt)){for(var et=lt.replace(X,""),Q=0;Q<W.length;Q+=2)if(W[Q]===et)throw new f(`Cannot promisify an API that has normal methods with '%s'-suffix

    See http://goo.gl/MqrFmX
`.replace("%s",U))}}}function E(W,U,X,ot){for(var lt=c.inheritedDataKeys(W),et=[],Q=0;Q<lt.length;++Q){var it=lt[Q],at=W[it],N=ot===p?!0:p(it);typeof at=="function"&&!A(at)&&!b(W,it,U)&&ot(it,at,W,N)&&et.push(it,at)}return P(et,U,X),et}var C=function(W){return W.replace(/([$])/,"\\$")},x;function F(W,U,X,ot,lt,et){var Q=function(){return this}(),it=W;typeof it=="string"&&(W=ot);function at(){var N=U;U===l&&(N=this);var It=new s(a);It._captureStackTrace();var dt=typeof it=="string"&&this!==Q?this[it]:W,D=d(It,et);try{dt.apply(N,g(arguments,D))}catch(S){It._rejectCallback(u(S),!0,!0)}return It._isFateSealed()||It._setAsyncGuaranteed(),It}return c.notEnumerableProp(at,"__isPromisified__",!0),at}var R=h?x:F;function Z(W,U,X,ot,lt){for(var et=new RegExp(C(U)+"$"),Q=E(W,U,et,X),it=0,at=Q.length;it<at;it+=2){var N=Q[it],It=Q[it+1],dt=N+U;if(ot===R)W[dt]=R(N,l,N,It,U,lt);else{var D=ot(It,function(){return R(N,l,N,It,U,lt)});c.notEnumerableProp(D,"__isPromisified__",!0),W[dt]=D}}return c.toFastProperties(W),W}function H(W,U,X){return R(W,U,void 0,W,null,X)}s.promisify=function(W,U){if(typeof W!="function")throw new f("expecting a function but got "+c.classString(W));if(A(W))return W;U=Object(U);var X=U.context===void 0?l:U.context,ot=!!U.multiArgs,lt=H(W,X,ot);return c.copyDescriptors(W,lt,_),lt},s.promisifyAll=function(W,U){if(typeof W!="function"&&typeof W!="object")throw new f(`the target of promisifyAll must be an object or a function

    See http://goo.gl/MqrFmX
`);U=Object(U);var X=!!U.multiArgs,ot=U.suffix;typeof ot!="string"&&(ot=I);var lt=U.filter;typeof lt!="function"&&(lt=p);var et=U.promisifier;if(typeof et!="function"&&(et=R),!c.isIdentifier(ot))throw new RangeError(`suffix must be a valid identifier

    See http://goo.gl/MqrFmX
`);for(var Q=c.inheritedDataKeys(W),it=0;it<Q.length;++it){var at=W[Q[it]];Q[it]!=="constructor"&&c.isClass(at)&&(Z(at.prototype,ot,lt,et,X),Z(at,ot,lt,et,X))}return Z(W,ot,lt,et,X)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(i,n,o){n.exports=function(s,a,l,c){var d=i("./util"),g=d.isObject,u=i("./es5"),h;typeof Map=="function"&&(h=Map);var f=function(){var v=0,p=0;function _(A,b){this[v]=A,this[v+p]=b,v++}return function(b){p=b.size,v=0;var P=new Array(b.size*2);return b.forEach(_,P),P}}(),I=function(v){for(var p=new h,_=v.length/2|0,A=0;A<_;++A){var b=v[_+A],P=v[A];p.set(b,P)}return p};function m(v){var p=!1,_;if(h!==void 0&&v instanceof h)_=f(v),p=!0;else{var A=u.keys(v),b=A.length;_=new Array(b*2);for(var P=0;P<b;++P){var E=A[P];_[P]=v[E],_[P+b]=E}}this.constructor$(_),this._isMap=p,this._init$(void 0,p?-6:-3)}d.inherits(m,a),m.prototype._init=function(){},m.prototype._promiseFulfilled=function(v,p){this._values[p]=v;var _=++this._totalResolved;if(_>=this._length){var A;if(this._isMap)A=I(this._values);else{A={};for(var b=this.length(),P=0,E=this.length();P<E;++P)A[this._values[P+b]]=this._values[P]}return this._resolve(A),!0}return!1},m.prototype.shouldCopyValues=function(){return!1},m.prototype.getActualLength=function(v){return v>>1};function y(v){var p,_=l(v);if(g(_))_ instanceof s?p=_._then(s.props,void 0,void 0,void 0,void 0):p=new m(_).promise();else return c(`cannot await properties of a non-object

    See http://goo.gl/MqrFmX
`);return _ instanceof s&&p._propagateFrom(_,2),p}s.prototype.props=function(){return y(this)},s.props=function(v){return y(v)}}},{"./es5":13,"./util":36}],26:[function(i,n,o){function s(l,c,d,g,u){for(var h=0;h<u;++h)d[h+g]=l[h+c],l[h+c]=void 0}function a(l){this._capacity=l,this._length=0,this._front=0}a.prototype._willBeOverCapacity=function(l){return this._capacity<l},a.prototype._pushOne=function(l){var c=this.length();this._checkCapacity(c+1);var d=this._front+c&this._capacity-1;this[d]=l,this._length=c+1},a.prototype.push=function(l,c,d){var g=this.length()+3;if(this._willBeOverCapacity(g)){this._pushOne(l),this._pushOne(c),this._pushOne(d);return}var u=this._front+g-3;this._checkCapacity(g);var h=this._capacity-1;this[u+0&h]=l,this[u+1&h]=c,this[u+2&h]=d,this._length=g},a.prototype.shift=function(){var l=this._front,c=this[l];return this[l]=void 0,this._front=l+1&this._capacity-1,this._length--,c},a.prototype.length=function(){return this._length},a.prototype._checkCapacity=function(l){this._capacity<l&&this._resizeTo(this._capacity<<1)},a.prototype._resizeTo=function(l){var c=this._capacity;this._capacity=l;var d=this._front,g=this._length,u=d+g&c-1;s(this,0,this,c,u)},n.exports=a},{}],27:[function(i,n,o){n.exports=function(s,a,l,c){var d=i("./util"),g=function(h){return h.then(function(f){return u(f,h)})};function u(h,f){var I=l(h);if(I instanceof s)return g(I);if(h=d.asArray(h),h===null)return c("expecting an array or an iterable object but got "+d.classString(h));var m=new s(a);f!==void 0&&m._propagateFrom(f,3);for(var y=m._fulfill,v=m._reject,p=0,_=h.length;p<_;++p){var A=h[p];A===void 0&&!(p in h)||s.cast(A)._then(y,v,void 0,m,null)}return m}s.race=function(h){return u(h,void 0)},s.prototype.race=function(){return u(this,void 0)}}},{"./util":36}],28:[function(i,n,o){n.exports=function(s,a,l,c,d,g){var u=i("./util"),h=u.tryCatch;function f(p,_,A,b){this.constructor$(p);var P=s._getContext();this._fn=u.contextBind(P,_),A!==void 0&&(A=s.resolve(A),A._attachCancellationCallback(this)),this._initialValue=A,this._currentCancellable=null,b===d?this._eachValues=Array(this._length):b===0?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}u.inherits(f,a),f.prototype._gotAccum=function(p){this._eachValues!==void 0&&this._eachValues!==null&&p!==d&&this._eachValues.push(p)},f.prototype._eachComplete=function(p){return this._eachValues!==null&&this._eachValues.push(p),this._eachValues},f.prototype._init=function(){},f.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==void 0?this._eachValues:this._initialValue)},f.prototype.shouldCopyValues=function(){return!1},f.prototype._resolve=function(p){this._promise._resolveCallback(p),this._values=null},f.prototype._resultCancelled=function(p){if(p===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof s&&this._currentCancellable.cancel(),this._initialValue instanceof s&&this._initialValue.cancel())},f.prototype._iterate=function(p){this._values=p;var _,A,b=p.length;this._initialValue!==void 0?(_=this._initialValue,A=0):(_=s.resolve(p[0]),A=1),this._currentCancellable=_;for(var P=A;P<b;++P){var E=p[P];E instanceof s&&E.suppressUnhandledRejections()}if(!_.isRejected())for(;A<b;++A){var C={accum:null,value:p[A],index:A,length:b,array:this};_=_._then(y,void 0,void 0,C,void 0),A&127||_._setNoAsyncGuarantee()}this._eachValues!==void 0&&(_=_._then(this._eachComplete,void 0,void 0,this,void 0)),_._then(I,I,void 0,_,this)},s.prototype.reduce=function(p,_){return m(this,p,_,null)},s.reduce=function(p,_,A,b){return m(p,_,A,b)};function I(p,_){this.isFulfilled()?_._resolve(p):_._reject(p)}function m(p,_,A,b){if(typeof _!="function")return l("expecting a function but got "+u.classString(_));var P=new f(p,_,A,b);return P.promise()}function y(p){this.accum=p,this.array._gotAccum(p);var _=c(this.value,this.array._promise);return _ instanceof s?(this.array._currentCancellable=_,_._then(v,void 0,void 0,this,void 0)):v.call(this,_)}function v(p){var _=this.array,A=_._promise,b=h(_._fn);A._pushContext();var P;_._eachValues!==void 0?P=b.call(A._boundValue(),p,this.index,this.length):P=b.call(A._boundValue(),this.accum,p,this.index,this.length),P instanceof s&&(_._currentCancellable=P);var E=A._popContext();return g.checkForgottenReturns(P,E,_._eachValues!==void 0?"Promise.each":"Promise.reduce",A),P}}},{"./util":36}],29:[function(i,n,o){var s=i("./util"),a,l=function(){throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)},c=s.getNativePromise();if(s.isNode&&typeof MutationObserver>"u"){var d=k.setImmediate,g=process.nextTick;a=s.isRecentNode?function(h){d.call(k,h)}:function(h){g.call(process,h)}}else if(typeof c=="function"&&typeof c.resolve=="function"){var u=c.resolve();a=function(h){u.then(h)}}else typeof MutationObserver<"u"&&!(typeof window<"u"&&window.navigator&&(window.navigator.standalone||window.cordova))&&"classList"in document.documentElement?a=function(){var h=document.createElement("div"),f={attributes:!0},I=!1,m=document.createElement("div"),y=new MutationObserver(function(){h.classList.toggle("foo"),I=!1});y.observe(m,f);var v=function(){I||(I=!0,m.classList.toggle("foo"))};return function(_){var A=new MutationObserver(function(){A.disconnect(),_()});A.observe(h,f),v()}}():typeof setImmediate<"u"?a=function(h){setImmediate(h)}:typeof setTimeout<"u"?a=function(h){setTimeout(h,0)}:a=l;n.exports=a},{"./util":36}],30:[function(i,n,o){n.exports=function(s,a,l){var c=s.PromiseInspection,d=i("./util");function g(u){this.constructor$(u)}d.inherits(g,a),g.prototype._promiseResolved=function(u,h){this._values[u]=h;var f=++this._totalResolved;return f>=this._length?(this._resolve(this._values),!0):!1},g.prototype._promiseFulfilled=function(u,h){var f=new c;return f._bitField=33554432,f._settledValueField=u,this._promiseResolved(h,f)},g.prototype._promiseRejected=function(u,h){var f=new c;return f._bitField=16777216,f._settledValueField=u,this._promiseResolved(h,f)},s.settle=function(u){return l.deprecated(".settle()",".reflect()"),new g(u).promise()},s.allSettled=function(u){return new g(u).promise()},s.prototype.settle=function(){return s.settle(this)}}},{"./util":36}],31:[function(i,n,o){n.exports=function(s,a,l){var c=i("./util"),d=i("./errors").RangeError,g=i("./errors").AggregateError,u=c.isArray,h={};function f(m){this.constructor$(m),this._howMany=0,this._unwrap=!1,this._initialized=!1}c.inherits(f,a),f.prototype._init=function(){if(this._initialized){if(this._howMany===0){this._resolve([]);return}this._init$(void 0,-5);var m=u(this._values);!this._isResolved()&&m&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},f.prototype.init=function(){this._initialized=!0,this._init()},f.prototype.setUnwrap=function(){this._unwrap=!0},f.prototype.howMany=function(){return this._howMany},f.prototype.setHowMany=function(m){this._howMany=m},f.prototype._promiseFulfilled=function(m){return this._addFulfilled(m),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),this.howMany()===1&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},f.prototype._promiseRejected=function(m){return this._addRejected(m),this._checkOutcome()},f.prototype._promiseCancelled=function(){return this._values instanceof s||this._values==null?this._cancel():(this._addRejected(h),this._checkOutcome())},f.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var m=new g,y=this.length();y<this._values.length;++y)this._values[y]!==h&&m.push(this._values[y]);return m.length>0?this._reject(m):this._cancel(),!0}return!1},f.prototype._fulfilled=function(){return this._totalResolved},f.prototype._rejected=function(){return this._values.length-this.length()},f.prototype._addRejected=function(m){this._values.push(m)},f.prototype._addFulfilled=function(m){this._values[this._totalResolved++]=m},f.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},f.prototype._getRangeError=function(m){var y="Input array must contain at least "+this._howMany+" items but contains only "+m+" items";return new d(y)},f.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function I(m,y){if((y|0)!==y||y<0)return l(`expecting a positive integer

    See http://goo.gl/MqrFmX
`);var v=new f(m),p=v.promise();return v.setHowMany(y),v.init(),p}s.some=function(m,y){return I(m,y)},s.prototype.some=function(m){return I(this,m)},s._SomePromiseArray=f}},{"./errors":12,"./util":36}],32:[function(i,n,o){n.exports=function(s){function a(f){f!==void 0?(f=f._target(),this._bitField=f._bitField,this._settledValueField=f._isFateSealed()?f._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}a.prototype._settledValue=function(){return this._settledValueField};var l=a.prototype.value=function(){if(!this.isFulfilled())throw new TypeError(`cannot get fulfillment value of a non-fulfilled promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},c=a.prototype.error=a.prototype.reason=function(){if(!this.isRejected())throw new TypeError(`cannot get rejection reason of a non-rejected promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},d=a.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0},g=a.prototype.isRejected=function(){return(this._bitField&16777216)!==0},u=a.prototype.isPending=function(){return(this._bitField&50397184)===0},h=a.prototype.isResolved=function(){return(this._bitField&50331648)!==0};a.prototype.isCancelled=function(){return(this._bitField&8454144)!==0},s.prototype.__isCancelled=function(){return(this._bitField&65536)===65536},s.prototype._isCancelled=function(){return this._target().__isCancelled()},s.prototype.isCancelled=function(){return(this._target()._bitField&8454144)!==0},s.prototype.isPending=function(){return u.call(this._target())},s.prototype.isRejected=function(){return g.call(this._target())},s.prototype.isFulfilled=function(){return d.call(this._target())},s.prototype.isResolved=function(){return h.call(this._target())},s.prototype.value=function(){return l.call(this._target())},s.prototype.reason=function(){var f=this._target();return f._unsetRejectionIsUnhandled(),c.call(f)},s.prototype._value=function(){return this._settledValue()},s.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},s.PromiseInspection=a}},{}],33:[function(i,n,o){n.exports=function(s,a){var l=i("./util"),c=l.errorObj,d=l.isObject;function g(y,v){if(d(y)){if(y instanceof s)return y;var p=h(y);if(p===c){v&&v._pushContext();var _=s.reject(p.e);return v&&v._popContext(),_}else if(typeof p=="function"){if(I(y)){var _=new s(a);return y._then(_._fulfill,_._reject,void 0,_,null),_}return m(y,p,v)}}return y}function u(y){return y.then}function h(y){try{return u(y)}catch(v){return c.e=v,c}}var f={}.hasOwnProperty;function I(y){try{return f.call(y,"_promise0")}catch{return!1}}function m(y,v,p){var _=new s(a),A=_;p&&p._pushContext(),_._captureStackTrace(),p&&p._popContext();var b=!0,P=l.tryCatch(v).call(y,E,C);b=!1,_&&P===c&&(_._rejectCallback(P.e,!0,!0),_=null);function E(x){_&&(_._resolveCallback(x),_=null)}function C(x){_&&(_._rejectCallback(x,b,!0),_=null)}return A}return g}},{"./util":36}],34:[function(i,n,o){n.exports=function(s,a,l){var c=i("./util"),d=s.TimeoutError;function g(y){this.handle=y}g.prototype._resultCancelled=function(){clearTimeout(this.handle)};var u=function(y){return h(+this).thenReturn(y)},h=s.delay=function(y,v){var p,_;return v!==void 0?(p=s.resolve(v)._then(u,null,null,y,void 0),l.cancellation()&&v instanceof s&&p._setOnCancel(v)):(p=new s(a),_=setTimeout(function(){p._fulfill()},+y),l.cancellation()&&p._setOnCancel(new g(_)),p._captureStackTrace()),p._setAsyncGuaranteed(),p};s.prototype.delay=function(y){return h(y,this)};var f=function(y,v,p){var _;typeof v!="string"?v instanceof Error?_=v:_=new d("operation timed out"):_=new d(v),c.markAsOriginatingFromRejection(_),y._attachExtraTrace(_),y._reject(_),p?.cancel()};function I(y){return clearTimeout(this.handle),y}function m(y){throw clearTimeout(this.handle),y}s.prototype.timeout=function(y,v){y=+y;var p,_,A=new g(setTimeout(function(){p.isPending()&&f(p,v,_)},y));return l.cancellation()?(_=this.then(),p=_._then(I,m,void 0,A,void 0),p._setOnCancel(A)):p=this._then(I,m,void 0,A,void 0),p}}},{"./util":36}],35:[function(i,n,o){n.exports=function(s,a,l,c,d,g){var u=i("./util"),h=i("./errors").TypeError,f=i("./util").inherits,I=u.errorObj,m=u.tryCatch,y={};function v(C){setTimeout(function(){throw C},0)}function p(C){var x=l(C);return x!==C&&typeof C._isDisposable=="function"&&typeof C._getDisposer=="function"&&C._isDisposable()&&x._setDisposable(C._getDisposer()),x}function _(C,x){var F=0,R=C.length,Z=new s(d);function H(){if(F>=R)return Z._fulfill();var W=p(C[F++]);if(W instanceof s&&W._isDisposable()){try{W=l(W._getDisposer().tryDispose(x),C.promise)}catch(U){return v(U)}if(W instanceof s)return W._then(H,v,null,null,null)}H()}return H(),Z}function A(C,x,F){this._data=C,this._promise=x,this._context=F}A.prototype.data=function(){return this._data},A.prototype.promise=function(){return this._promise},A.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():y},A.prototype.tryDispose=function(C){var x=this.resource(),F=this._context;F!==void 0&&F._pushContext();var R=x!==y?this.doDispose(x,C):null;return F!==void 0&&F._popContext(),this._promise._unsetDisposable(),this._data=null,R},A.isDisposer=function(C){return C!=null&&typeof C.resource=="function"&&typeof C.tryDispose=="function"};function b(C,x,F){this.constructor$(C,x,F)}f(b,A),b.prototype.doDispose=function(C,x){var F=this.data();return F.call(C,C,x)};function P(C){return A.isDisposer(C)?(this.resources[this.index]._setDisposable(C),C.promise()):C}function E(C){this.length=C,this.promise=null,this[C-1]=null}E.prototype._resultCancelled=function(){for(var C=this.length,x=0;x<C;++x){var F=this[x];F instanceof s&&F.cancel()}},s.using=function(){var C=arguments.length;if(C<2)return a("you must pass at least 2 arguments to Promise.using");var x=arguments[C-1];if(typeof x!="function")return a("expecting a function but got "+u.classString(x));var F,R=!0;C===2&&Array.isArray(arguments[0])?(F=arguments[0],C=F.length,R=!1):(F=arguments,C--);for(var Z=new E(C),H=0;H<C;++H){var W=F[H];if(A.isDisposer(W)){var U=W;W=W.promise(),W._setDisposable(U)}else{var X=l(W);X instanceof s&&(W=X._then(P,null,null,{resources:Z,index:H},void 0))}Z[H]=W}for(var ot=new Array(Z.length),H=0;H<ot.length;++H)ot[H]=s.resolve(Z[H]).reflect();var lt=s.all(ot).then(function(Q){for(var it=0;it<Q.length;++it){var at=Q[it];if(at.isRejected())return I.e=at.error(),I;if(!at.isFulfilled()){lt.cancel();return}Q[it]=at.value()}et._pushContext(),x=m(x);var N=R?x.apply(void 0,Q):x(Q),It=et._popContext();return g.checkForgottenReturns(N,It,"Promise.using",et),N}),et=lt.lastly(function(){var Q=new s.PromiseInspection(lt);return _(Z,Q)});return Z.promise=et,et._setOnCancel(Z),et},s.prototype._setDisposable=function(C){this._bitField=this._bitField|131072,this._disposer=C},s.prototype._isDisposable=function(){return(this._bitField&131072)>0},s.prototype._getDisposer=function(){return this._disposer},s.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},s.prototype.disposer=function(C){if(typeof C=="function")return new b(C,this,c());throw new h}}},{"./errors":12,"./util":36}],36:[function(i,n,o){var s=i("./es5"),a=typeof navigator>"u",l={e:{}},c,d=typeof self<"u"?self:typeof window<"u"?window:typeof k<"u"?k:this!==void 0?this:null;function g(){try{var M=c;return c=null,M.apply(this,arguments)}catch(B){return l.e=B,l}}function u(M){return c=M,g}var h=function(M,B){var z={}.hasOwnProperty;function $(){this.constructor=M,this.constructor$=B;for(var K in B.prototype)z.call(B.prototype,K)&&K.charAt(K.length-1)!=="$"&&(this[K+"$"]=B.prototype[K])}return $.prototype=B.prototype,M.prototype=new $,M.prototype};function f(M){return M==null||M===!0||M===!1||typeof M=="string"||typeof M=="number"}function I(M){return typeof M=="function"||typeof M=="object"&&M!==null}function m(M){return f(M)?new Error(R(M)):M}function y(M,B){var z=M.length,$=new Array(z+1),K;for(K=0;K<z;++K)$[K]=M[K];return $[K]=B,$}function v(M,B,z){if(s.isES5){var $=Object.getOwnPropertyDescriptor(M,B);if($!=null)return $.get==null&&$.set==null?$.value:z}else return{}.hasOwnProperty.call(M,B)?M[B]:void 0}function p(M,B,z){if(f(M))return M;var $={value:z,configurable:!0,enumerable:!1,writable:!0};return s.defineProperty(M,B,$),M}function _(M){throw M}var A=function(){var M=[Array.prototype,Object.prototype,Function.prototype],B=function(K){for(var st=0;st<M.length;++st)if(M[st]===K)return!0;return!1};if(s.isES5){var z=Object.getOwnPropertyNames;return function(K){for(var st=[],gt=Object.create(null);K!=null&&!B(K);){var Pt;try{Pt=z(K)}catch{return st}for(var xt=0;xt<Pt.length;++xt){var Lt=Pt[xt];if(!gt[Lt]){gt[Lt]=!0;var qt=Object.getOwnPropertyDescriptor(K,Lt);qt!=null&&qt.get==null&&qt.set==null&&st.push(Lt)}}K=s.getPrototypeOf(K)}return st}}else{var $={}.hasOwnProperty;return function(K){if(B(K))return[];var st=[];t:for(var gt in K)if($.call(K,gt))st.push(gt);else{for(var Pt=0;Pt<M.length;++Pt)if($.call(M[Pt],gt))continue t;st.push(gt)}return st}}}(),b=/this\s*\.\s*\S+\s*=/;function P(M){try{if(typeof M=="function"){var B=s.names(M.prototype),z=s.isES5&&B.length>1,$=B.length>0&&!(B.length===1&&B[0]==="constructor"),K=b.test(M+"")&&s.names(M).length>0;if(z||$||K)return!0}return!1}catch{return!1}}function E(M){function B(){}B.prototype=M;var z=new B;function $(){return typeof z.foo}return $(),$(),M}var C=/^[a-z$_][a-z$_0-9]*$/i;function x(M){return C.test(M)}function F(M,B,z){for(var $=new Array(M),K=0;K<M;++K)$[K]=B+K+z;return $}function R(M){try{return M+""}catch{return"[no string representation]"}}function Z(M){return M instanceof Error||M!==null&&typeof M=="object"&&typeof M.message=="string"&&typeof M.name=="string"}function H(M){try{p(M,"isOperational",!0)}catch{}}function W(M){return M==null?!1:M instanceof Error.__BluebirdErrorTypes__.OperationalError||M.isOperational===!0}function U(M){return Z(M)&&s.propertyIsWritable(M,"stack")}var X=function(){return"stack"in new Error?function(M){return U(M)?M:new Error(R(M))}:function(M){if(U(M))return M;try{throw new Error(R(M))}catch(B){return B}}}();function ot(M){return{}.toString.call(M)}function lt(M,B,z){for(var $=s.names(M),K=0;K<$.length;++K){var st=$[K];if(z(st))try{s.defineProperty(B,st,s.getDescriptor(M,st))}catch{}}}var et=function(M){return s.isArray(M)?M:null};if(typeof Symbol<"u"&&Symbol.iterator){var Q=typeof Array.from=="function"?function(M){return Array.from(M)}:function(M){for(var B=[],z=M[Symbol.iterator](),$;!($=z.next()).done;)B.push($.value);return B};et=function(M){return s.isArray(M)?M:M!=null&&typeof M[Symbol.iterator]=="function"?Q(M):null}}var it=typeof process<"u"&&ot(process).toLowerCase()==="[object process]",at=typeof process<"u"&&typeof e<"u";function N(M){return at?e[M]:void 0}function It(){if(typeof Promise=="function")try{var M=new Promise(function(){});if(ot(M)==="[object Promise]")return Promise}catch{}}var dt;function D(M,B){if(M===null||typeof B!="function"||B===dt)return B;M.domain!==null&&(B=M.domain.bind(B));var z=M.async;if(z!==null){var $=B;B=function(){var K=new Array(2).concat([].slice.call(arguments));return K[0]=$,K[1]=this,z.runInAsyncScope.apply(z,K)}}return B}var S={setReflectHandler:function(M){dt=M},isClass:P,isIdentifier:x,inheritedDataKeys:A,getDataPropertyOrDefault:v,thrower:_,isArray:s.isArray,asArray:et,notEnumerableProp:p,isPrimitive:f,isObject:I,isError:Z,canEvaluate:a,errorObj:l,tryCatch:u,inherits:h,withAppended:y,maybeWrapAsError:m,toFastProperties:E,filledRange:F,toString:R,canAttachTrace:U,ensureErrorObject:X,originatesFromRejection:W,markAsOriginatingFromRejection:H,classString:ot,copyDescriptors:lt,isNode:it,hasEnvVariables:at,env:N,global:d,getNativePromise:It,contextBind:D};S.isRecentNode=S.isNode&&function(){var M;return process.versions&&process.versions.node?M=process.versions.node.split(".").map(Number):process.version&&(M=process.version.split(".").map(Number)),M[0]===0&&M[1]>10||M[0]>0}(),S.nodeSupportsAsyncResource=S.isNode&&function(){var M=!1;try{var B=i("async_hooks").AsyncResource;M=typeof B.prototype.runInAsyncScope=="function"}catch{M=!1}return M}(),S.isNode&&S.toFastProperties(process);try{throw new Error}catch(M){S.lastLineError=M}n.exports=S},{"./es5":13,async_hooks:void 0}]},{},[4])(4)}),typeof window<"u"&&window!==null?window.P=window.Promise:typeof self<"u"&&self!==null&&(self.P=self.Promise)})(jm);var ZE=jm.exports,Aa={},ba={};Object.defineProperty(ba,"__esModule",{value:!0});ba.animationXml=void 0;ba.animationXml="PGFuaW1hdGlvblNldD4KCiAgICA8YWN0aW9uIGlkPSJNb3ZlIj4KCiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJiZCI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMiIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIzIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgPC9wYXJ0PgoKICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImJkcyI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMiIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIzIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgPC9wYXJ0PgoKICAgICAgICAgPHBhcnQgc2V0LXR5cGU9InNzIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIyIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjMiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICA8L3BhcnQ+CgogICAgICAgICA8cGFydCBzZXQtdHlwZT0ibGciPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMyIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgIDwvcGFydD4KCiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJzaCI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMiIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIzIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgPC9wYXJ0PgoKICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImxoIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIyIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjMiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICA8L3BhcnQ+CgogICAgICAgICA8cGFydCBzZXQtdHlwZT0ibGhzIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIyIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjMiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICA8L3BhcnQ+CgogICAgICAgICA8cGFydCBzZXQtdHlwZT0ibHMiPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMyIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgIDwvcGFydD4KCgkJIDxwYXJ0IHNldC10eXBlPSJsYyI+CgkJCSA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KCQkJIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgoJCQkgPGZyYW1lIG51bWJlcj0iMiIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CgkJCSA8ZnJhbWUgbnVtYmVyPSIzIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KCQkgPC9wYXJ0PgoKICAgICAgICAgPHBhcnQgc2V0LXR5cGU9InJoIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIyIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjMiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICA8L3BhcnQ+CgogICAgICAgICA8cGFydCBzZXQtdHlwZT0icmhzIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIyIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjMiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICA8L3BhcnQ+CgkJCgkJPHBhcnQgc2V0LXR5cGU9InJzIj4KCQkJPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CgkJCTxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgoJCQk8ZnJhbWUgbnVtYmVyPSIyIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KCQkJPGZyYW1lIG51bWJlcj0iMyIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CgkJPC9wYXJ0PgoKCQk8cGFydCBzZXQtdHlwZT0icmMiPgoJCQk8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KCQkJPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CgkJCTxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgoJCQk8ZnJhbWUgbnVtYmVyPSIzIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KCQk8L3BhcnQ+CgogICAgICAgIDxwYXJ0IHNldC10eXBlPSJjaCI+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMiIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjMiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgIDwvcGFydD4KCiAgICA8L2FjdGlvbj4KCiAgICA8YWN0aW9uIGlkPSJXYXZlIj4KCiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJsaCI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3YXYiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249IndhdiIvPgogICAgICAgICA8L3BhcnQ+CgogICAgICAgICA8cGFydCBzZXQtdHlwZT0ibGhzIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndhdiIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2F2Ii8+CiAgICAgICAgIDwvcGFydD4KCiAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImxzIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndhdiIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2F2Ii8+CiAgICAgICAgIDwvcGFydD4KCgkJPHBhcnQgc2V0LXR5cGU9ImxjIj4KCQkJIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndhdiIvPgoJCQkgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2F2Ii8+CgkJIDwvcGFydD4KCiAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImNoIj4KICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2F2Ii8+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249IndhdiIvPgogICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIyIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3YXYiLz4KICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMyIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2F2Ii8+CiAgICAgICAgPC9wYXJ0PgoKICAgIDwvYWN0aW9uPgoKICAgIDxhY3Rpb24gaWQ9IlRhbGsiPgoKICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImhkIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249InNwayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3BrIi8+CiAgICAgICAgIDwvcGFydD4KCiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJmYyI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzcGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InNwayIvPgogICAgICAgICA8L3BhcnQ+CgogICAgICAgICA8cGFydCBzZXQtdHlwZT0iZmEiPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3BrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzcGsiLz4KICAgICAgICAgPC9wYXJ0PgoKICAgIDwvYWN0aW9uPgoKCiAgICA8YWN0aW9uIGlkPSJTd2ltIj4KCiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJiZHMiPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dtIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd20iLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249InN3bSIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMyIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dtIi8+CiAgICAgICAgIDwvcGFydD4KCiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJzcyI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd20iLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3bSIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMiIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dtIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIzIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd20iLz4KICAgICAgICAgPC9wYXJ0PgoKICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImxocyI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd20iLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3bSIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMiIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dtIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIzIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd20iLz4KICAgICAgICAgPC9wYXJ0PgoKICAgICAgICAgPHBhcnQgc2V0LXR5cGU9InJocyI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd20iLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3bSIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMiIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dtIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIzIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd20iLz4KICAgICAgICAgPC9wYXJ0PgoKICAgIDwvYWN0aW9uPgoKCiAgICA8YWN0aW9uIGlkPSJGbG9hdCI+CgogICAgICAgICA8cGFydCBzZXQtdHlwZT0iYmRzIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjMiIGFzc2V0cGFydGRlZmluaXRpb249InN3cyIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMyIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dzIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIyIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3cyIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dzIi8+CiAgICAgICAgIDwvcGFydD4KCiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJzcyI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiLz4KICAgICAgICAgPC9wYXJ0PgoKICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImxocyI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249InN3cyIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dzIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249InN3cyIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMyIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dzIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIzIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249InN3cyIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dzIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiLz4KICAgICAgICAgPC9wYXJ0PgoKICAgICAgICAgPHBhcnQgc2V0LXR5cGU9InJocyI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249InN3cyIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dzIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249InN3cyIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMyIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dzIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIzIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249InN3cyIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dzIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiLz4KICAgICAgICAgPC9wYXJ0PgoKICAgIDwvYWN0aW9uPgoKICAgIDxhY3Rpb24gaWQ9IlNpZ24iPgogICAgICAgIDxwYXJ0IHNldC10eXBlPSJsaCI+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249InNpZyIvPgogICAgICAgIDwvcGFydD4KICAgICAgICA8cGFydCBzZXQtdHlwZT0ibGkiPgogICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzaWciLz4KICAgICAgICA8L3BhcnQ+CiAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImxzIj4KICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2F2Ii8+CiAgICAgICAgPC9wYXJ0PgogICAgICAgIDxwYXJ0IHNldC10eXBlPSJsYyI+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndhdiIvPgogICAgICAgIDwvcGFydD4KICAgIDwvYWN0aW9uPgoKICAgIDxhY3Rpb24gaWQ9IlJlc3BlY3QiPgogICAgICAgIDxwYXJ0IHNldC10eXBlPSJsaCI+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249InJlc3BlY3QiIHJlcGVhdHM9IjE1Ii8+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InJlc3BlY3QiIHJlcGVhdHM9IjE1Ii8+CiAgICAgICAgPC9wYXJ0PgogICAgICAgIDxwYXJ0IHNldC10eXBlPSJscyI+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndhdiIgcmVwZWF0cz0iMTUiLz4KICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2F2IiByZXBlYXRzPSIxNSIvPgogICAgICAgIDwvcGFydD4KICAgICAgICA8cGFydCBzZXQtdHlwZT0ibGMiPgogICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3YXYiIHJlcGVhdHM9IjE1Ii8+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249IndhdiIgcmVwZWF0cz0iMTUiLz4KICAgICAgICA8L3BhcnQ+CiAgICA8L2FjdGlvbj4KCgk8YWN0aW9uIGlkPSJCbG93Ij4KCiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJyaCI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJibHciIHJlcGVhdHM9IjEwIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJibHciIHJlcGVhdHM9IjEwIi8+CiAgICAgICAgIDwvcGFydD4KCiAgICAgICAgPHBhcnQgc2V0LXR5cGU9InJzIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249ImRyayIvPgogICAgICAgIDwvcGFydD4KCgkJPHBhcnQgc2V0LXR5cGU9InJjIj4KCQkJIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249ImRyayIvPgoJCTwvcGFydD4KCgkJPHBhcnQgc2V0LXR5cGU9InJpIj4KCQkJIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IiIvPgoJCTwvcGFydD4KCgkJPHBhcnQgc2V0LXR5cGU9ImV5Ij4KCQkJPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3RkIiByZXBlYXRzPSIxMCIvPgoJCQk8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJleWIiIHJlcGVhdHM9IjEwIi8+CgkJPC9wYXJ0PgoKCQk8cGFydCBzZXQtdHlwZT0iZmMiPgoJCQk8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzdGQiIHJlcGVhdHM9IjEwIi8+CgkJCTxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249ImJsdyIgcmVwZWF0cz0iMTAiLz4KCQk8L3BhcnQ+CiAgICA8L2FjdGlvbj4KCiAgICA8YWN0aW9uIGlkPSJMYXVnaCI+CgogICAgICAgICA8cGFydCBzZXQtdHlwZT0icmgiPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0iYmx3Ii8+CiAgICAgICAgIDwvcGFydD4KCiAgICAgICAgPHBhcnQgc2V0LXR5cGU9InJzIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249ImRyayIvPgogICAgICAgIDwvcGFydD4KCiAgICAgICAgPHBhcnQgc2V0LXR5cGU9InJjIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249ImRyayIvPgogICAgICAgIDwvcGFydD4KCiAgICAgICAgPHBhcnQgc2V0LXR5cGU9InJpIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IiIvPgogICAgICAgIDwvcGFydD4KCiAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImV5Ij4KICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3RkIiByZXBlYXRzPSIyIi8+CiAgICAgICAgPC9wYXJ0PgoKICAgICAgICA8cGFydCBzZXQtdHlwZT0iZmMiPgogICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzbWwiLz4KICAgICAgICA8L3BhcnQ+CgogICAgICAgIDxvZmZzZXRzPgogICAgICAgICAgICA8ZnJhbWUgaWQ9IjAiPgogICAgICAgICAgICAgICAgPGRpcmVjdGlvbnM+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iMCI+PGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iMCIgZHk9IjEiLz48L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSIxIj48Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMSIvPjwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjIiPjxib2R5cGFydCBpZD0iaGVhZCIgZHg9IjAiIGR5PSIxIi8+PC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iMyI+PGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iMCIgZHk9IjEiLz48L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI0Ij48Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMSIvPjwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjUiPjxib2R5cGFydCBpZD0iaGVhZCIgZHg9IjAiIGR5PSIxIi8+PC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iNiI+PGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iMCIgZHk9IjEiLz48L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI3Ij48Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMSIvPjwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgPC9kaXJlY3Rpb25zPgogICAgICAgICAgICA8L2ZyYW1lPgoKICAgICAgICAgICAgPGZyYW1lIGlkPSIxIj4KICAgICAgICAgICAgICAgIDxkaXJlY3Rpb25zPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjAiPjxib2R5cGFydCBpZD0iaGVhZCIgZHg9IjAiIGR5PSIwIi8+PC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iMSI+PGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iMCIgZHk9IjAiLz48L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSIyIj48Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMCIvPjwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjMiPjxib2R5cGFydCBpZD0iaGVhZCIgZHg9IjAiIGR5PSIwIi8+PC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iNCI+PGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iMCIgZHk9IjAiLz48L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI1Ij48Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMCIvPjwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjYiPjxib2R5cGFydCBpZD0iaGVhZCIgZHg9IjAiIGR5PSIwIi8+PC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iNyI+PGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iMCIgZHk9IjAiLz48L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9ucz4KICAgICAgICAgICAgPC9mcmFtZT4KCiAgICAgICAgPC9vZmZzZXRzPgogICAgPC9hY3Rpb24+CgkKCQogICAgPGFjdGlvbiBpZD0iU25vd1dhclJ1biI+CgogICAgICAgICA8cGFydCBzZXQtdHlwZT0iY2giPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMyIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dydW4iLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249InN3cnVuIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3J1biIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dydW4iLz4KICAgICAgICAgPC9wYXJ0PgoKICAgIDwvYWN0aW9uPgoKICAgIDxhY3Rpb24gaWQ9IlNub3dXYXJEaWVGcm9udCI+CgogICAgICAgIDxwYXJ0IHNldC10eXBlPSJjaCI+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249InN3ZGllIi8+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249InN3ZGllIi8+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3ZGllIi8+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3ZGllIiByZXBlYXRzPSIxMDAiLz4KICAgICAgICAgPC9wYXJ0PgoKICAgICAgICA8b2Zmc2V0cz4KICAgICAgICAgICAgPGZyYW1lIGlkPSIwIj4KICAgICAgICAgICAgICAgIDxkaXJlY3Rpb25zPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjAiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIxMCIgZHk9IjQiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSIyIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iMTAiIGR5PSI1Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iNCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI2Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwIiBkeT0iNCIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgPC9kaXJlY3Rpb25zPgogICAgICAgICAgICA8L2ZyYW1lPgogICAgICAgICAgICA8ZnJhbWUgaWQ9IjEiPgogICAgICAgICAgICAgICAgPGRpcmVjdGlvbnM+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iMCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9IjEwIiBkeT0iNCIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjIiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIxMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwIiBkeT0iNSIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjYiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSItMTAiIGR5PSI0Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbnM+CiAgICAgICAgICAgIDwvZnJhbWU+CiAgICAgICAgICAgIDxmcmFtZSBpZD0iMiI+CiAgICAgICAgICAgICAgICA8ZGlyZWN0aW9ucz4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSIwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSIyIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI2Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9ucz4KICAgICAgICAgICAgPC9mcmFtZT4KICAgICAgICAgICAgPGZyYW1lIGlkPSIzIiByZXBlYXRzPSIxMDAiPgogICAgICAgICAgICAgICAgPGRpcmVjdGlvbnM+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iMCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMDAiIGR5PSI1Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iMiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMDAiIGR5PSI1Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iNCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMDAiIGR5PSI1Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iNiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMDAiIGR5PSI1Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbnM+CiAgICAgICAgICAgIDwvZnJhbWU+CiAgICAgICAgPC9vZmZzZXRzPgoKCiAgICA8L2FjdGlvbj4KCiAgICA8YWN0aW9uIGlkPSJTbm93V2FyRGllQmFjayI+CgogICAgICAgIDxwYXJ0IHNldC10eXBlPSJjaCI+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249InN3ZGllIi8+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249InN3ZGllIi8+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjMiIGFzc2V0cGFydGRlZmluaXRpb249InN3ZGllIi8+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjMiIGFzc2V0cGFydGRlZmluaXRpb249InN3ZGllIiByZXBlYXRzPSIxMDAiLz4KICAgICAgICAgPC9wYXJ0PgoKICAgICAgICA8b2Zmc2V0cz4KICAgICAgICAgICAgPGZyYW1lIGlkPSIwIj4KICAgICAgICAgICAgICAgIDxkaXJlY3Rpb25zPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjAiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSItMTAiIGR5PSI0Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iMiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iMTAiIGR5PSI1Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iNiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9IjEwIiBkeT0iNCIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgPC9kaXJlY3Rpb25zPgogICAgICAgICAgICA8L2ZyYW1lPgogICAgICAgICAgICA8ZnJhbWUgaWQ9IjEiPgogICAgICAgICAgICAgICAgPGRpcmVjdGlvbnM+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iMCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMCIgZHk9IjQiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSIyIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwIiBkeT0iNSIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjQiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIxMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI2Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iMTAiIGR5PSI0Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbnM+CiAgICAgICAgICAgIDwvZnJhbWU+CiAgICAgICAgICAgIDxmcmFtZSBpZD0iMiI+CiAgICAgICAgICAgICAgICA8ZGlyZWN0aW9ucz4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSIwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSIyIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI2Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9ucz4KICAgICAgICAgICAgPC9mcmFtZT4KICAgICAgICAgICAgPGZyYW1lIGlkPSIzIiByZXBlYXRzPSIxMDAiPgogICAgICAgICAgICAgICAgPGRpcmVjdGlvbnM+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iMCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMDAiIGR5PSI1Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iMiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMDAiIGR5PSI1Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iNCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMDAiIGR5PSI1Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iNiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMDAiIGR5PSI1Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbnM+CiAgICAgICAgICAgIDwvZnJhbWU+CiAgICAgICAgPC9vZmZzZXRzPgoKICAgIDwvYWN0aW9uPgoKICAgIDxhY3Rpb24gaWQ9IlNub3dXYXJQaWNrIj4KCiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJjaCI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3BpY2siLz4KICAgICAgICAgPC9wYXJ0PgoKICAgICAgICA8b2Zmc2V0cz4KICAgICAgICAgICAgPGZyYW1lIGlkPSIwIj4KICAgICAgICAgICAgICAgIDxkaXJlY3Rpb25zPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjAiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMyIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjEiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMyIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjIiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMyIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjMiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMyIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjQiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMyIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjUiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMyIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjYiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMyIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjciPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMyIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgPC9kaXJlY3Rpb25zPgogICAgICAgICAgICA8L2ZyYW1lPgogICAgICAgIDwvb2Zmc2V0cz4KCiAgICA8L2FjdGlvbj4KCiAgICA8YWN0aW9uIGlkPSJTbm93V2FyVGhyb3ciPgoKICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImNoIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249InN3dGhyb3ciLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249InN3dGhyb3ciLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3dGhyb3ciLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3dGhyb3ciLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3dGhyb3ciLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3dGhyb3ciLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3dGhyb3ciLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3dGhyb3ciLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249InN3dGhyb3ciIHJlcGVhdHM9IjEwMCIvPgogICAgICAgICA8L3BhcnQ+CgogICAgPC9hY3Rpb24+CjwvYW5pbWF0aW9uU2V0Pg==";Object.defineProperty(Aa,"__esModule",{value:!0});Aa.AvatarAnimationData=void 0;const GE=ba;class _s{constructor(t){this._animationFrames=new Map,this._animationFramesCount=new Map,new DOMParser().parseFromString(t,"text/xml").querySelectorAll("action").forEach(i=>{const n=i.getAttribute("id");if(n==null)return;i.querySelectorAll("part").forEach(l=>{const c=l.getAttribute("set-type");if(c==null)return;const d=[];l.querySelectorAll("frame").forEach(g=>{const u=this._getAnimationFrameFromElement(g);d.push(u)}),this._animationFrames.set(`${n}_${c}`,d)});const o=i.querySelectorAll("part:first-child frame").length,s=i.querySelectorAll("offsets frame").length,a=Math.max(o,s);this._animationFramesCount.set(n,a),i.querySelectorAll("offsets frame").forEach(l=>{l.getAttribute("id")!=null&&l.querySelectorAll("directions direction").forEach(d=>{d.getAttribute("id")!=null&&d.querySelectorAll("bodypart").forEach(u=>{u.getAttribute("id")!=null})})})})}static async fromUrl(t){const i=await(await fetch(t)).text();return new _s(i)}static default(){return new _s(atob(GE.animationXml))}getAnimationFrame(t,e,i){const n=this._animationFrames.get(`${t}_${e}`);if(n==null)return;const o=n[i];if(o!=null)return o}getAnimationFrames(t,e){var i;const n=`${t}_${e}`;return(i=this._animationFrames.get(n))!==null&&i!==void 0?i:[]}getAnimationFramesCount(t){var e;return(e=this._animationFramesCount.get(t))!==null&&e!==void 0?e:0}getAnimationOffset(t,e,i,n){}_getAnimationOffsetFromElement(t){if(t==null)return{x:0,y:0};const e=Number(t.getAttribute("dx")),i=Number(t.getAttribute("dy"));return isNaN(e)||isNaN(i)?{x:0,y:0}:{x:e,y:i}}_getAnimationFrameFromElement(t){const e=Number(t.getAttribute("number"));if(isNaN(e))throw new Error("number was NaN");const i=t.getAttribute("repeats");let n=2;i!=null&&(n=Number(i));const o=t.getAttribute("assetpartdefinition");if(o==null)throw new Error("assetpartdefinition was null");return{number:e,assetpartdefinition:o,repeats:n}}}Aa.AvatarAnimationData=_s;var wa={},Ki={};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.AvatarData=void 0;class NE{constructor(t){this.document=new DOMParser().parseFromString(t,"text/xml")}querySelectorAll(t){return Array.from(this.document.querySelectorAll(t))}querySelector(t){return this.document.querySelector(t)}}Ki.AvatarData=NE;Object.defineProperty(wa,"__esModule",{value:!0});wa.FigureMapData=void 0;const jE=Ki;function yp(r,t){return`${r}_${t}`}class $c extends jE.AvatarData{constructor(t){super(t),this._libraryForPartMap=new Map,this._allLibraries=[],this._cacheData()}static async fromUrl(t){const i=await(await fetch(t)).text();return new $c(i)}getLibraryOfPart(t,e){const i=e==="hrb"?"hr":e;return this._libraryForPartMap.get(yp(t,i))}getLibraries(){return this._allLibraries}_cacheData(){this.querySelectorAll("lib").forEach(e=>{const i=e.getAttribute("id");if(i==null)return;this._allLibraries.push(i),Array.from(e.querySelectorAll("part")).forEach(o=>{const s=o.getAttribute("id"),a=o.getAttribute("type");s!=null&&a!=null&&this._libraryForPartMap.set(yp(s,a),i)})})}}wa.FigureMapData=$c;var xa={},Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});Pa.partsetsXml=void 0;Pa.partsetsXml="PHBhcnRTZXRzPgoKICAgIDxwYXJ0U2V0PgogICAgICAgICA8cGFydCBzZXQtdHlwZT0icmkiIGZsaXBwZWQtc2V0LXR5cGU9InJpIi8+CiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJyaCIgZmxpcHBlZC1zZXQtdHlwZT0ibGgiLz4KICAgICAgICAgPHBhcnQgc2V0LXR5cGU9InJocyIgZmxpcHBlZC1zZXQtdHlwZT0ibGhzIi8+CgkJIDxwYXJ0IHNldC10eXBlPSJycyIgc3dpbT0iMCIgZmxpcHBlZC1zZXQtdHlwZT0ibHMiLz4KCQkgPHBhcnQgc2V0LXR5cGU9InJjIiBzd2ltPSIwIiBmbGlwcGVkLXNldC10eXBlPSJsYyIvPgogICAgICAgICA8cGFydCBzZXQtdHlwZT0iYmQiLz4KICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImJkcyIvPgogICAgICAgICA8cGFydCBzZXQtdHlwZT0ic3MiLz4KICAgICAgICAgPHBhcnQgc2V0LXR5cGU9InNoIiBzd2ltPSIwIi8+CiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJsZyIgc3dpbT0iMCIvPgogICAgICAgICA8cGFydCBzZXQtdHlwZT0iY2giLz4KICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImNwIi8+CiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJjYyIvPgogICAgICAgICA8cGFydCBzZXQtdHlwZT0iaGQiLz4KICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImZjIi8+CiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJleSIvPgogICAgICAgICA8cGFydCBzZXQtdHlwZT0iaHIiLz4KICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImhyYiIgcmVtb3ZlLXNldC10eXBlPSJociIvPgogICAgICAgICA8cGFydCBzZXQtdHlwZT0ibGkiIGZsaXBwZWQtc2V0LXR5cGU9ImxpIi8+CiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJsaCIgZmxpcHBlZC1zZXQtdHlwZT0icmgiLz4KICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImxocyIgZmxpcHBlZC1zZXQtdHlwZT0icmhzIi8+CgkJIDxwYXJ0IHNldC10eXBlPSJscyIgc3dpbT0iMCIgZmxpcHBlZC1zZXQtdHlwZT0icnMiLz4KCQkgPHBhcnQgc2V0LXR5cGU9ImxjIiBzd2ltPSIwIiBmbGlwcGVkLXNldC10eXBlPSJyYyIvPgoJCSA8cGFydCBzZXQtdHlwZT0id2EiIHN3aW09IjAiLz4KICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImVhIi8+CiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJjYSIgc3dpbT0iMCIvPgogICAgICAgICA8cGFydCBzZXQtdHlwZT0iZmEiLz4KICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImhhIi8+CiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJoZSIvPgogICAgPC9wYXJ0U2V0PgoKCiAgICA8YWN0aXZlUGFydFNldCBpZD0iZmlndXJlIj4KICAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9InJoIi8+CiAgICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJyaHMiLz4KCQkgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9InJzIi8+CgkJIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJyYyIvPgogICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iYmQiLz4KICAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImJkcyIvPgogICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0ic3MiLz4KICAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9InNoIi8+CiAgICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJsZyIvPgogICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iY2giLz4KICAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImNwIi8+CiAgICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJjYyIvPgogICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0id2EiLz4KICAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImhkIi8+CiAgICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJmYyIvPgogICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iZXkiLz4KICAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImhyIi8+CiAgICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJocmIiLz4KICAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImxoIi8+CiAgICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJsaHMiLz4KCQkgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImxzIi8+CgkJIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJsYyIvPgogICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iZWEiLz4KICAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImNhIi8+CiAgICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJmYSIvPgogICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iaGEiLz4KICAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImhlIi8+CiAgICA8L2FjdGl2ZVBhcnRTZXQ+CgogICAgPGFjdGl2ZVBhcnRTZXQgaWQ9ImhlYWQiPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJoZCIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJmYyIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJleSIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJociIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJocmIiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iZWEiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iZmEiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iaGEiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iaGUiLz4KICAgIDwvYWN0aXZlUGFydFNldD4KCiAgICA8YWN0aXZlUGFydFNldCBpZD0ic3BlYWsiPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJoZCIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJociIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJocmIiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iZmMiLz4KCQk8YWN0aXZlUGFydCBzZXQtdHlwZT0iZmEiLz4KCQk8YWN0aXZlUGFydCBzZXQtdHlwZT0iaGEiLz4JCiAgICA8L2FjdGl2ZVBhcnRTZXQ+CgogICAgPGFjdGl2ZVBhcnRTZXQgaWQ9Imdlc3R1cmUiPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJleSIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJmYyIvPgogICAgPC9hY3RpdmVQYXJ0U2V0PgoKICAgIDxhY3RpdmVQYXJ0U2V0IGlkPSJleWUiPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJleSIvPgogICAgPC9hY3RpdmVQYXJ0U2V0PgoKICAgIDxhY3RpdmVQYXJ0U2V0IGlkPSJoYW5kUmlnaHQiPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJyaCIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJyaHMiLz4KCQk8YWN0aXZlUGFydCBzZXQtdHlwZT0icnMiLz4KCQk8YWN0aXZlUGFydCBzZXQtdHlwZT0icmMiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0icmkiLz4KICAgIDwvYWN0aXZlUGFydFNldD4KCgk8YWN0aXZlUGFydFNldCBpZD0iaGFuZFJpZ2h0QW5kSGVhZCI+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9InJoIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9InJocyIvPgoJCTxhY3RpdmVQYXJ0IHNldC10eXBlPSJycyIvPgoJCTxhY3RpdmVQYXJ0IHNldC10eXBlPSJyYyIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJyaSIvPgoJCTxhY3RpdmVQYXJ0IHNldC10eXBlPSJleSIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJmYyIvPgoJCTxhY3RpdmVQYXJ0IHNldC10eXBlPSJoZCIvPgogICAgPC9hY3RpdmVQYXJ0U2V0PgoKICAgIDxhY3RpdmVQYXJ0U2V0IGlkPSJoYW5kTGVmdCI+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImxoIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImxocyIvPgoJCTxhY3RpdmVQYXJ0IHNldC10eXBlPSJscyIvPgoJCTxhY3RpdmVQYXJ0IHNldC10eXBlPSJsYyIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJsaSIvPgogICAgPC9hY3RpdmVQYXJ0U2V0PgoKICAgIDxhY3RpdmVQYXJ0U2V0IGlkPSJ3YWxrIj4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iYmQiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iYmRzIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9InNzIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImxnIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImxoIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImxocyIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJyaCIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJyaHMiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0ibHMiLz4KCQk8YWN0aXZlUGFydCBzZXQtdHlwZT0ibGMiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0icnMiLz4KCQk8YWN0aXZlUGFydCBzZXQtdHlwZT0icmMiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0ic2giLz4KICAgIDwvYWN0aXZlUGFydFNldD4KCiAgICA8YWN0aXZlUGFydFNldCBpZD0ic2l0Ij4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iYmQiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iYmRzIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9InNzIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImxnIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9InNoIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImNjIi8+CiAgICA8L2FjdGl2ZVBhcnRTZXQ+CgogICAgPGFjdGl2ZVBhcnRTZXQgaWQ9Iml0ZW1SaWdodCI+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9InJpIi8+CiAgICA8L2FjdGl2ZVBhcnRTZXQ+CgogICAgPGFjdGl2ZVBhcnRTZXQgaWQ9InN3aW0iPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJiZHMiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0ic3MiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0ibGhzIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9InJocyIvPgogICAgPC9hY3RpdmVQYXJ0U2V0PgoJCgk8YWN0aXZlUGFydFNldCBpZD0ic25vd3dhcnJ1biI+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImNoIi8+CiAgICA8L2FjdGl2ZVBhcnRTZXQ+CgogICAgPGFjdGl2ZVBhcnRTZXQgaWQ9InNub3d3YXJwaWNrIj4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iY2giLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iaGQiLz4KICAgIDwvYWN0aXZlUGFydFNldD4KCiAgICA8YWN0aXZlUGFydFNldCBpZD0ic25vd3dhcmRpZWZyb250Ij4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iY2giLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iaGQiLz4KICAgIDwvYWN0aXZlUGFydFNldD4KCiAgICA8YWN0aXZlUGFydFNldCBpZD0ic25vd3dhcmRpZWJhY2siPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJjaCIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJoZCIvPgogICAgPC9hY3RpdmVQYXJ0U2V0PgoKICAgIDxhY3RpdmVQYXJ0U2V0IGlkPSJzbm93d2FydGhyb3ciPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJjaCIvPgogICAgPC9hY3RpdmVQYXJ0U2V0Pgo8L3BhcnRTZXRzPg==";Object.defineProperty(xa,"__esModule",{value:!0});xa.AvatarPartSetsData=void 0;const kE=Ki,WE=Pa;class Cs extends kE.AvatarData{constructor(t){super(t)}static async fromUrl(t){const i=await(await fetch(t)).text();return new Cs(i)}static default(){return new Cs(atob(WE.partsetsXml))}getPartInfo(t){var e,i;const n=this.querySelector(`partSet part[set-type="${t}"]`);if(n!=null)return{flippedSetType:(e=n.getAttribute("flipped-set-type"))!==null&&e!==void 0?e:void 0,removeSetType:(i=n.getAttribute("remove-set-type"))!==null&&i!==void 0?i:void 0}}getActivePartSet(t){const e=this.querySelectorAll(`activePartSet[id="${t}"] activePart`);return new Set(e.map(i=>{const n=i.getAttribute("set-type");if(n==null)throw new Error("Invalid set type");return n}))}}xa.AvatarPartSetsData=Cs;var Sa={};Object.defineProperty(Sa,"__esModule",{value:!0});Sa.FigureData=void 0;const XE=Ki,_p=(r,t)=>`${r}_${t}`,Ho=(r,t)=>`${r}_${t}`;class Kc extends XE.AvatarData{constructor(t){super(t),this._parts=new Map,this._paletteIdForSetType=new Map,this._colors=new Map,this._hiddenLayers=new Map,this._cacheData()}static async fromUrl(t){const i=await(await fetch(t)).text();return new Kc(i)}getColor(t,e){const i=this._paletteIdForSetType.get(t);if(i!=null)return this._colors.get(_p(i,e))}getParts(t,e){return this._parts.get(Ho(t,e))}getHiddenLayers(t,e){var i;return(i=this._hiddenLayers.get(Ho(t,e)))!==null&&i!==void 0?i:[]}_cacheData(){const t=this.querySelectorAll("sets settype");this.querySelectorAll("colors palette").forEach(i=>{const n=i.getAttribute("id");if(n==null)return;Array.from(i.querySelectorAll("color")).forEach(s=>{const a=s.getAttribute("id");a!=null&&this._colors.set(_p(n,a),s.innerHTML)})}),t.forEach(i=>{const n=i.getAttribute("type"),o=i.getAttribute("paletteid"),s=this.querySelectorAll("set");n!=null&&(o!=null&&this._paletteIdForSetType.set(n,o),s.forEach(a=>{const l=a.getAttribute("id");if(l==null)return;const c=Array.from(a.querySelectorAll("part")),d=[],g=[];a.querySelectorAll("hiddenlayers layer").forEach(u=>{const h=u.getAttribute("parttype");h!=null&&g.push(h)}),this._hiddenLayers.set(Ho(n,l),g),c.map(u=>{const h=u.getAttribute("id"),f=u.getAttribute("type"),I=u.getAttribute("colorable");let m=Number(u.getAttribute("index"));if(isNaN(m)&&(m=0),h==null)throw new Error("Invalid id");if(f==null)throw new Error("Invalid type");return{id:h,type:f,colorable:I==="1",index:m}}).forEach(u=>{d.push(u)}),this._parts.set(Ho(n,l),d)}))})}}Sa.FigureData=Kc;var Ta={},Ea={};Object.defineProperty(Ea,"__esModule",{value:!0});Ea.actionsXml=void 0;Ea.actionsXml="PD94bWwgdmVyc2lvbj0iMS4wIj8+CjxhY3Rpb25zPgoKICAgIDwhLS0gTWFpbiBhY3Rpb25zIC0tPgogICAgPGFjdGlvbiAgaWQ9IkxheSIgc3RhdGU9ImxheSIgcHJlY2VkZW5jZT0iMTAwIiBtYWluPSIxIiBnZW9tZXRyeXR5cGU9Imhvcml6b250YWwiIGFjdGl2ZXBhcnRzZXQ9ImZpZ3VyZSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ibGF5IiBwcmV2ZW50cz0iZnguMSxmeC4yLGZ4LjMsZnguNSxmeC42LGZ4LjE0LGZ4LjE1LGZ4LjE2LGZ4LjE3LGZ4LjE4LGZ4LjE5LGZ4LjIwLGZ4LjIxLGZ4LjIyLGZ4LjI2LGZ4LjI3LGZ4LjMxLGZ4LjMyLGZ4LjMzLGZ4LjM0LGZ4LjM1LGZ4LjM2LGZ4LjM4LGZ4LjM5LGZ4LjQ1LGZ4LjQ2LGZ4LjQ3LGZ4LjQ4LGZ4LjUzLGZ4LjU0LGZ4LjU1LGZ4LjU2LGZ4LjU3LGZ4LjU4LGZ4LjYwLGZ4LjYxLGZ4LjYyLGZ4LjYzLGZ4LjY0LGZ4LjY1LGZ4LjY2LGZ4LjY3LGZ4LjY5LGZ4LjcwLGZ4LjcxLGZ4LjcyLGZ4LjczLGZ4Ljc0LGZ4Ljc1LGZ4Ljc2LGZ4Ljc4LGZ4Ljc5LGZ4LjgwLGZ4LjgxLGZ4LjgyLGZ4LjgzLGZ4Ljg0LGZ4Ljg1LGZ4Ljg2LGZ4Ljg3LGZ4Ljg4LGZ4Ljg5LGZ4LjkwLGZ4LjkxLGZ4LjkyLGZ4LjkzLGZ4Ljk0LGZ4Ljk3LGZ4Ljk5LGZ4LjEwMCxmeC4xMDEsZnguMTA0LGZ4LjEwNSxmeC4xMDYsZnguMTA3LGZ4LjEwOCxmeC4xMDksZnguMTEwLGZ4LjExMSxmeC4xMTIsZnguMTEzLGZ4LjExNCxmeC4xMTUsZnguMTE2LGZ4LjExNyxmeC4xMTgsZnguMTE5LGZ4LjEyMCxmeC4xMjEsZnguMTIyLGZ4LjEyMyxmeC4xMjQsZnguMTI1LGZ4LjEyNixmeC4xMjcsZnguMTI4LGZ4LjEyOSxmeC4xMzAsZnguMTMxLGZ4LjEzMixmeC4xMzMsZnguMTM0LGZ4LjEzNSxmeC4xMzYsZnguMTM3LGZ4LjEzOCxmeC4xMzksZnguMTQwLGZ4LjE0MSxmeC4xNDIsZnguMTQzLGZ4LjE0NCxmeC4xNDUsZnguMTQ2LGZ4LjE0NyxmeC4xNDgsZnguMTQ5LGZ4LjE1MCxmeC4xNTEsZnguMTUyLGZ4LjE1MyxmeC4xNTQsZnguMTU1LGZ4LjE1NixmeC4xNTcsZnguMTU4LGZ4LjE1OSxmeC4xNjAsZnguMTYxLGZ4LjE2MixmeC4xNjQsZnguMTY1LGZ4LjE2NixmeC4xNjcsZnguMTY4LGZ4LjE2OSxmeC4xNzEsZnguMTcyLGZ4LjE3MyxmeC4xNzQsZnguMTc1LGZ4LjE3NixmeC4xNzcsZnguMTc5LGZ4LjE4MCxmeC4xODEsZnguMTgyLGZ4LjE4MyxmeC4xODQsZnguMTg1LGZ4LjE4NixmeC4xODgsZnguMTg5LGZ4LjE5MCxmeC4xOTEsZnguMTkyLGZ4LjE5MyxmeC4xOTQsZnguMTk1LGZ4LjE5NixmeDE5NyxmeDE5OCxmeDE5OSxzcGssZ2VzdCxzbWwsc2FkLGFncixzcnAsdXNlaSxjcmksYmxvdyIvPgogICAgPGFjdGlvbiAgaWQ9IkZsb2F0IiBzdGF0ZT0iZmxvYXQiIHByZWNlZGVuY2U9IjEwMSIgbWFpbj0iMSIgZ2VvbWV0cnl0eXBlPSJzd2ltIiBhY3RpdmVwYXJ0c2V0PSJzd2ltIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiIHByZXZlbnRzPSJmeC4yLGZ4LjMsZnguNSxmeC42LGZ4LjE0LGZ4LjE1LGZ4LjE2LGZ4LjE3LGZ4LjE4LGZ4LjE5LGZ4LjIwLGZ4LjIxLGZ4LjIyLGZ4LjIzLGZ4LjI2LGZ4LjI3LGZ4LjMxLGZ4LjMyLGZ4LjMzLGZ4LjM0LGZ4LjM1LGZ4LjM2LGZ4LjM4LGZ4LjM5LGZ4LjQ1LGZ4LjQ2LGZ4LjQ4LGZ4LjU0LGZ4LjU1LGZ4LjU2LGZ4LjU3LGZ4LjU4LGZ4LjYzLGZ4LjY1LGZ4LjY2LGZ4LjY5LGZ4LjcxLGZ4LjcyLGZ4Ljc0LGZ4Ljc1LGZ4Ljc2LGZ4Ljg5LGZ4LjkwLGZ4LjkxLGZ4LjkyLGZ4Ljk0LGZ4Ljk3LGZ4Ljk5LGZ4LjEwMCxmeC4xMDEsZnguMTA0LGZ4LjEwNSxmeC4xMDYsZnguMTA3LGZ4LjEwOSxmeC4xMTAsZnguMTExLGZ4LjExMyxmeC4xMTQsZnguMTE1LGZ4LjExNixmeC4xMTcsZnguMTE4LGZ4LjExOSxmeC4xMjAsZnguMTIxLGZ4LjEyMixmeC4xMjMsZnguMTI0LGZ4LjEyNSxmeC4xMjcsZnguMTI5LGZ4LjEzMCxmeC4xMzEsZnguMTMyLGZ4LjEzNCxmeC4xMzUsZnguMTM2LGZ4LjEzOSxmeC4xNDAsZnguMTQxLGZ4LjE0MixmeC4xNDMsZnguMTQ0LGZ4LjE0NSxmeC4xNDYsZnguMTQ3LGZ4LjE0OCxmeC4xNDksZnguMTUwLGZ4LjE1MSxmeC4xNTIsZnguMTUzLGZ4LjE1NCxmeC4xNTUsZnguMTU2LGZ4LjE1NyxmeC4xNTgsZnguMTU5LGZ4LjE2MCxmeC4xNjEsZnguMTYyLGZ4LjE2NCxmeC4xNjUsZnguMTY2LGZ4LjE2NyxmeC4xNjgsZnguMTY5LGZ4LjE3MCxmeC4xNzEsZnguMTcyLGZ4LjE3MyxmeC4xNzQsZnguMTc1LGZ4LjE3NixmeC4xNzcsZnguMTAyLGZ4LjE3OCxmeC4xNzksZnguMTgwLGZ4LjE4MSxmeC4xODIsZnguMTgzLGZ4LjE4NixmeC4xODgsZnguMTg5LGZ4LjE5MCxmeC4xOTEsZnguMTkyLGZ4LjE5MyxmeC4xOTQsZnguMTk1LGZ4LjE5NixmeDE5NyxmeDE5OCxmeDE5OSxkYW5jZSx1c2VpLGNyaSxzaWduIi8+CiAgICA8YWN0aW9uICBpZD0iU3dpbSIgc3RhdGU9InN3aW0iIHByZWNlZGVuY2U9IjEwMiIgbWFpbj0iMSIgZ2VvbWV0cnl0eXBlPSJzd2ltIiBhY3RpdmVwYXJ0c2V0PSJzd2ltIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd20iIHByZXZlbnRzPSJmeC4yLGZ4LjMsZnguNSxmeC42LGZ4LjE0LGZ4LjE1LGZ4LjE2LGZ4LjE3LGZ4LjE4LGZ4LjE5LGZ4LjIwLGZ4LjIxLGZ4LjIyLGZ4LjIzLGZ4LjI2LGZ4LjI3LGZ4LjMyLGZ4LjMzLGZ4LjM0LGZ4LjM1LGZ4LjM2LGZ4LjM4LGZ4LjM5LGZ4LjQ1LGZ4LjQ2LGZ4LjQ4LGZ4LjU0LGZ4LjU1LGZ4LjU2LGZ4LjU3LGZ4LjU4LGZ4LjYzLGZ4LjY1LGZ4LjY2LGZ4LjY5LGZ4LjcxLGZ4LjcyLGZ4Ljc0LGZ4Ljc1LGZ4Ljc2LGZ4Ljg5LGZ4LjkwLGZ4LjkxLGZ4LjkyLGZ4Ljk0LGZ4Ljk3LGZ4LjEwMCxmeC4xMDEsZnguMTA0LGZ4LjEwNSxmeC4xMDYsZnguMTA3LGZ4LjEwOSxmeC4xMTAsZnguMTExLGZ4LjExMyxmeC4xMTQsZnguMTE1LGZ4LjExNixmeC4xMTcsZnguMTE4LGZ4LjExOSxmeC4xMjAsZnguMTIxLGZ4LjEyMixmeC4xMjMsZnguMTI0LGZ4LjEyNSxmeC4xMjcsZnguMTI5LGZ4LjEzMCxmeC4xMzEsZnguMTMyLGZ4LjEzNCxmeC4xMzUsZnguMTM2LGZ4LjEzOSxmeC4xNDAsZnguMTQxLGZ4LjE0MixmeC4xNDMsZnguMTQ0LGZ4LjE0NSxmeC4xNDYsZnguMTQ3LGZ4LjE0OCxmeC4xNDksZnguMTUwLGZ4LjE1MSxmeC4xNTIsZnguMTUzLGZ4LjE1NCxmeC4xNTUsZnguMTU2LGZ4LjE1NyxmeC4xNTgsZnguMTU5LGZ4LjE2MCxmeC4xNjEsZnguMTYyLGZ4LjE2NCxmeC4xNjUsZnguMTY2LGZ4LjE2NyxmeC4xNjgsZnguMTY4LGZ4LjE3MCxmeC4xNzEsZnguMTcyLGZ4LjE3MyxmeC4xNzQsZnguMTc1LGZ4LjE3NixmeC4xNzcsZnguMTAyLGZ4LjE3OCxmeC4xNzksZnguMTgwLGZ4LjE4MSxmeC4xODIsZnguMTgzLGZ4LjE4NixmeC4xODgsZnguMTg5LGZ4LjE5MCxmeC4xOTEsZnguMTkyLGZ4LjE5MyxmeC4xOTQsZnguMTk1LGZ4LjE5NixmeDE5NyxmeDE5OCxmeDE5OSxkYW5jZSx1c2VpLGNyaSxzaWduIi8+CiAgICA8YWN0aW9uICBpZD0iU2l0IiBzdGF0ZT0ic2l0IiBwcmVjZWRlbmNlPSIxMDMiIG1haW49IjEiIGdlb21ldHJ5dHlwZT0ic2l0dGluZyIgYWN0aXZlcGFydHNldD0ic2l0IiBhc3NldHBhcnRkZWZpbml0aW9uPSJzaXQiIHByZXZlbnRzPSJmeC4yLGZ4LjMsZnguNixmeC4xNCxmeC4xNSxmeC4xNyxmeC4xOCxmeC4xOSxmeC4yMCxmeC4yMSxmeC4yMixmeC4zMyxmeC4zNCxmeC4zNSxmeC4zNixmeC4zOCxmeC4zOSxmeC40OCxmeC41NCxmeC41NSxmeC41NixmeC42OSxmeC43MSxmeC43MixmeC45MixmeC45NCxmeC45NyxmeC4xMDAsZnguMTA0LGZ4LjExNSxmeC4xMTcsZnguMTMyLGZ4LjEzNCxmeC4xMzUsZnguMTM2LGZ4LjE0MCxmeC4xNTYsZnguMTc0LGZ4LjE3NSxmeC4xNzYsZnguMTg4LGZ4LjE4OSxmeC4xOTAsZnguMTkxLGZ4LjE5MyxmeC4xOTQsZnguMTk1LGZ4MTk3LGZ4MTk4LGZ4MTk5LGRhbmNlIi8+CgogICAgPGFjdGlvbiAgaWQ9IlNub3dib2FyZDM2MCIgc3RhdGU9InNiMzYwIiBwcmVjZWRlbmNlPSIxNDAiIGFuaW1hdGlvbj0iMSIgbWFpbj0iMSIgZ2VvbWV0cnl0eXBlPSJ2ZXJ0aWNhbCIgYWN0aXZlcGFydHNldD0iZmlndXJlIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzYjM2MCIgc3RhcnRmcm9tZnJhbWV6ZXJvPSJ0cnVlIiBwcmV2ZW50cz0idXNlaSxjcmksd2F2ZSxzaWduIi8+CiAgICA8YWN0aW9uICBpZD0iU25vd2JvYXJkT2xsaWUiIHN0YXRlPSJzYm9sbGllIiBwcmVjZWRlbmNlPSIxNDEiIGFuaW1hdGlvbj0iMSIgbWFpbj0iMSIgZ2VvbWV0cnl0eXBlPSJ2ZXJ0aWNhbCIgYWN0aXZlcGFydHNldD0iZmlndXJlIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzYm9sbGllIiBzdGFydGZyb21mcmFtZXplcm89InRydWUiIHByZXZlbnRzPSJ1c2VpLGNyaSx3YXZlLHNpZ24iLz4KICAgIDxhY3Rpb24gIGlkPSJTbm93Ym9hcmRVcCIgc3RhdGU9InNidXAiIHByZWNlZGVuY2U9IjE0MiIgYW5pbWF0aW9uPSIxIiBtYWluPSIxIiBnZW9tZXRyeXR5cGU9InZlcnRpY2FsIiBhY3RpdmVwYXJ0c2V0PSJmaWd1cmUiIGFzc2V0cGFydGRlZmluaXRpb249InN0ZCIgc3RhcnRmcm9tZnJhbWV6ZXJvPSJ0cnVlIiAvPgogICAgPGFjdGlvbiAgaWQ9IlNub3dib2FyZFNxdWF0IiBzdGF0ZT0ic2JzcSIgcHJlY2VkZW5jZT0iMTQzIiBhbmltYXRpb249IjEiIG1haW49IjEiIGdlb21ldHJ5dHlwZT0idmVydGljYWwiIGFjdGl2ZXBhcnRzZXQ9ImZpZ3VyZSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3RkIiBzdGFydGZyb21mcmFtZXplcm89InRydWUiIC8+CgogICAgPGFjdGlvbiAgaWQ9IlJpZGVKdW1wIiBzdGF0ZT0icmlkZWp1bXAiIHByZWNlZGVuY2U9IjE0NCIgYW5pbWF0aW9uPSIxIiBtYWluPSIxIiBnZW9tZXRyeXR5cGU9InZlcnRpY2FsIiBhY3RpdmVwYXJ0c2V0PSJmaWd1cmUiIGFzc2V0cGFydGRlZmluaXRpb249InN0ZCIgc3RhcnRmcm9tZnJhbWV6ZXJvPSJ0cnVlIiAvPgoKICAgIDxhY3Rpb24gIGlkPSJSZXNwZWN0IiBzdGF0ZT0icmVzcGVjdCIgcHJlY2VkZW5jZT0iMjA0IiBnZW9tZXRyeXR5cGU9InZlcnRpY2FsIiBhY3RpdmVwYXJ0c2V0PSJoYW5kTGVmdCIgc3RhcnRmcm9tZnJhbWV6ZXJvPSJ0cnVlIiBhc3NldHBhcnRkZWZpbml0aW9uPSJyZXNwZWN0IiBwcmV2ZW50cz0iZGFuY2UiLz4KICAgIDxhY3Rpb24gIGlkPSJXYXZlIiBzdGF0ZT0id2F2ZSIgcHJlY2VkZW5jZT0iMjA1IiBnZW9tZXRyeXR5cGU9InZlcnRpY2FsIiBhY3RpdmVwYXJ0c2V0PSJoYW5kTGVmdCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2F2IiBwcmV2ZW50cz0iZGFuY2UiLz4KICAgIDxhY3Rpb24gIGlkPSJTaWduIiBzdGF0ZT0ic2lnbiIgcHJlY2VkZW5jZT0iMjEwIiBnZW9tZXRyeXR5cGU9InZlcnRpY2FsIiBhY3RpdmVwYXJ0c2V0PSJoYW5kTGVmdCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic2lnIiBwcmV2ZW50cz0iZGFuY2UiLz4KICAgIDxhY3Rpb24gIGlkPSJCbG93IiBzdGF0ZT0iYmxvdyIgcHJlY2VkZW5jZT0iMjExIiBnZW9tZXRyeXR5cGU9InZlcnRpY2FsIiBhY3RpdmVwYXJ0c2V0PSJoYW5kUmlnaHRBbmRIZWFkIiBhc3NldHBhcnRkZWZpbml0aW9uPSJibHciIHN0YXJ0ZnJvbWZyYW1lemVybz0idHJ1ZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIiBwcmV2ZW50cz0iZGFuY2UiLz4KICAgIDxhY3Rpb24gIGlkPSJMYXVnaCIgc3RhdGU9ImxhdWdoIiBwcmVjZWRlbmNlPSIyMTEiIGdlb21ldHJ5dHlwZT0idmVydGljYWwiIGFjdGl2ZXBhcnRzZXQ9ImhhbmRSaWdodEFuZEhlYWQiIGFzc2V0cGFydGRlZmluaXRpb249ImxnaCIgc3RhcnRmcm9tZnJhbWV6ZXJvPSJ0cnVlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiIHByZXZlbnRzPSJkYW5jZSIvPgogICAgPGFjdGlvbiAgaWQ9IklkbGUiIHN0YXRlPSJpZGxlIiBwcmVjZWRlbmNlPSIyMTEiIGdlb21ldHJ5dHlwZT0idmVydGljYWwiIGFjdGl2ZXBhcnRzZXQ9ImhlYWQiIGFzc2V0cGFydGRlZmluaXRpb249ImlkbCIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIiBwcmV2ZW50cz0iZGFuY2UiLz4KCiAgICA8YWN0aW9uICBpZD0iQXZhdGFyRWZmZWN0IiBzdGF0ZT0iZngiIHByZWNlZGVuY2U9IjIyMCIgZ2VvbWV0cnl0eXBlPSJ2ZXJ0aWNhbCIgYW5pbWF0aW9uPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzdGQiIHByZXZlbnRzPSJkYW5jZSxibG93LGxhdWdoIj4KICAgICAgICA8dHlwZSBpZD0iMSIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI1IiBwcmV2ZW50cz0idXNlaSxjcmkiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjExIiBhbmltYXRlZD0iZmFsc2UiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjEyIiBhbmltYXRlZD0iZmFsc2UiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjEzIiBhbmltYXRlZD0iZmFsc2UiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjE2IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRzPSJ1c2VpLGNyaSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTkiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMjAiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMjEiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMjIiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMjYiIHByZXZlbnRzPSJ1c2VpLGNyaSIgLz4KICAgICAgICA8dHlwZSBpZD0iMjciIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMjgiIHByZXZlbnRzPSJ1c2VpLGNyaSx3YXZlLHNpZ24iLz4KICAgICAgICA8dHlwZSBpZD0iMjkiIHByZXZlbnRzPSJ1c2VpLGNyaSx3YXZlLHNpZ24iLz4KICAgICAgICA8dHlwZSBpZD0iMzEiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMzIiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjMzIiBwcmV2ZW50aGVhZHR1cm49InRydWUiIHByZXZlbnRzPSJTbGVlcCxnZXN0LHNtbCxzYWQsYWdyLHNycCIvPgogICAgICAgIDx0eXBlIGlkPSIzNCIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIiBwcmV2ZW50cz0iU2xlZXAsZ2VzdCxzbWwsc2FkLGFncixzcnAiLz4KICAgICAgICA8dHlwZSBpZD0iMzUiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIgcHJldmVudHM9IlNsZWVwLGdlc3Qsc21sLHNhZCxhZ3Isc3JwIi8+CiAgICAgICAgPHR5cGUgaWQ9IjM2IiBwcmV2ZW50aGVhZHR1cm49InRydWUiIHByZXZlbnRzPSJTbGVlcCxnZXN0LHNtbCxzYWQsYWdyLHNycCIvPgogICAgICAgIDx0eXBlIGlkPSIzOCIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSIzOSIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI0MCIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI0MSIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI0MiIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI0MyIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI0NyIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI0OCIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI1NSIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI1NiIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI1NyIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI1OCIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI2MCIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI2NCIgcHJldmVudHM9InVzZWksY3JpIiAvPgogICAgICAgIDx0eXBlIGlkPSI2OSIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI3MSIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI3MiIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI3NCIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI3NSIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI3NiIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI3OSIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iODAiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjgxIiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSI4MiIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iODMiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9Ijg0IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSI4NSIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iODYiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9Ijg3IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSI4OCIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iODkiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iOTAiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iOTEiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iOTQiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iOTciIC8+CiAgICAgICAgPHR5cGUgaWQ9IjEwMCIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSIxMDEiIGFuaW1hdGVkPSJ0cnVlIiBwcmV2ZW50cz0idXNlaSxjcmkiLz4KICAgICAgICA8dHlwZSBpZD0iMTAyIiBhbmltYXRlZD0idHJ1ZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTA0IiBhbmltYXRlZD0iZmFsc2UiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjEwNSIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSIxMDYiIHByZXZlbnRzPSJ1c2VpLGNyaSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTA3IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRzPSJ1c2VpLGNyaSx3YXZlIiAvPgogICAgICAgIDx0eXBlIGlkPSIxMDgiIGFuaW1hdGVkPSJ0cnVlIiBwcmV2ZW50cz0id2F2ZSxzaWduLHNpdCxTd2ltIiAvPgogICAgICAgIDx0eXBlIGlkPSIxMDkiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTEwIiBhbmltYXRlZD0iZmFsc2UiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjExMSIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSIxMTQiIHByZXZlbnRzPSJ1c2VpLGNyaSx3YXZlLHNpZ24iIC8+CiAgICAgICAgPHR5cGUgaWQ9IjExNSIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiIHByZXZlbnRzPSJ1c2VpLGNyaSx3YXZlLHNpZ24sU2xlZXAsZ2VzdCxzbWwsc2FkLGFncixzcnAiLz4KICAgICAgICA8dHlwZSBpZD0iMTE2IiBhbmltYXRlZD0iZmFsc2UiLz4KICAgICAgICA8dHlwZSBpZD0iMTE3IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxMTgiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjExOSIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iMTIwIiBhbmltYXRlZD0idHJ1ZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjEyMSIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iMTIyIiBhbmltYXRlZD0idHJ1ZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjEyMyIgYW5pbWF0ZWQ9InRydWUiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxMjQiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjEyNSIgYW5pbWF0ZWQ9InRydWUiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxMjYiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjEyNyIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iMTI4IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxMjkiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTMwIiBhbmltYXRlZD0iZmFsc2UiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjEzMSIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSIxMzIiIGFuaW1hdGVkPSJ0cnVlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iMTM0IiBhbmltYXRlZD0iZmFsc2UiLz4KICAgICAgICA8dHlwZSBpZD0iMTM1IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxMzYiIGFuaW1hdGVkPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjEzNyIgYW5pbWF0ZWQ9ImZhbHNlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjEzOCIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iMTM5IiBhbmltYXRlZD0idHJ1ZSIgcHJldmVudHM9InVzZWksY3JpIiAvPgogICAgICAgIDx0eXBlIGlkPSIxNDAiIGFuaW1hdGVkPSJ0cnVlIiAvPgogICAgICAgIDx0eXBlIGlkPSIxNDEiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjE0MiIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iMTQzIiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxNDQiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjE0NSIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iMTQ2IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxNDciIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjE0OCIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iMTQ5IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxNTAiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjE1MSIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iMTUyIiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxNTMiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjE1NCIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSIxNTUiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTU2IiBhbmltYXRlZD0idHJ1ZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTU3IiBhbmltYXRlZD0idHJ1ZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjE1OCIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50cz0idXNlaSxjcmkiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxNTkiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTYwIiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIgcHJldmVudHM9InVzZWkiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjE2MSIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiIHByZXZlbnRzPSJ1c2VpLGNyaSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTYyIiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRzPSJ1c2VpLGNyaSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTY0IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRzPSJ1c2VpLGNyaSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTY1IiBhbmltYXRlZD0idHJ1ZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTY2IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxNjciIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjE2OCIgYW5pbWF0ZWQ9InRydWUiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjE2OSIgYW5pbWF0ZWQ9InRydWUiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjE3MCIgYW5pbWF0ZWQ9InRydWUiIHByZXZlbnRzPSJ1c2VpLGNyaSx3YXZlLHNpZ24iIC8+CiAgICAgICAgPHR5cGUgaWQ9IjE3MSIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiIHByZXZlbnRzPSJ1c2VpIiAvPgogICAgICAgIDx0eXBlIGlkPSIxNzIiIGFuaW1hdGVkPSJ0cnVlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiIHByZXZlbnRzPSJ1c2VpIiAvPgogICAgICAgIDx0eXBlIGlkPSIxNzMiIGFuaW1hdGVkPSJ0cnVlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiIHByZXZlbnRzPSJ1c2VpIiAvPgogICAgICAgIDx0eXBlIGlkPSIxNzUiIGFuaW1hdGVkPSJ0cnVlIiAvPgogICAgICAgIDx0eXBlIGlkPSIxNzYiIGFuaW1hdGVkPSJ0cnVlIiAvPgogICAgICAgIDx0eXBlIGlkPSIxNzciIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIiBwcmV2ZW50cz0idXNlaSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTc4IiBhbmltYXRlZD0idHJ1ZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTc5IiBhbmltYXRlZD0idHJ1ZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIiBwcmV2ZW50cz0idXNlaSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTgwIiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxODEiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjE4MiIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50cz0idXNlaSxjcmkiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjE4MyIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50cz0idXNlaSxjcmkiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjE4NCIgYW5pbWF0ZWQ9InRydWUiIHByZXZlbnRzPSJ1c2VpLGNyaSx3YXZlLHNpZ24iLz4KICAgICAgICA8dHlwZSBpZD0iMTg1IiBhbmltYXRlZD0idHJ1ZSIgcHJldmVudHM9InVzZWksY3JpLHdhdmUsc2lnbiIvPgogICAgICAgIDx0eXBlIGlkPSIxODYiIGFuaW1hdGVkPSJ0cnVlIiBwcmV2ZW50cz0idXNlaSxjcmkiLz4KICAgICAgICA8dHlwZSBpZD0iMTg3IiBhbmltYXRlZD0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxODgiIGFuaW1hdGVkPSJ0cnVlIiBwcmV2ZW50cz0idXNlaSxjcmksd2F2ZSxzaWduIi8+CiAgICAgICAgPHR5cGUgaWQ9IjE4OSIgYW5pbWF0ZWQ9InRydWUiIHByZXZlbnRzPSJ1c2VpLGNyaSx3YXZlLHNpZ24scmVzcGVjdCIvPgogICAgICAgIDx0eXBlIGlkPSIxOTAiIGFuaW1hdGVkPSJ0cnVlIiBwcmV2ZW50cz0idXNlaSxjcmksd2F2ZSxzaWduLHJlc3BlY3QiLz4KICAgICAgICA8dHlwZSBpZD0iMTkxIiBhbmltYXRlZD0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxOTIiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudHM9InVzZWksY3JpIiAvPgogICAgICAgIDx0eXBlIGlkPSIxOTMiIGFuaW1hdGVkPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjE5NCIgYW5pbWF0ZWQ9InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iMTk1IiBhbmltYXRlZD0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxOTYiIGFuaW1hdGVkPSJ0cnVlIiBwcmV2ZW50cz0idXNlaSxjcmkiIC8+Lz4KICAgICAgICA8dHlwZSBpZD0iMTk4IiBhbmltYXRlZD0idHJ1ZSIgcHJldmVudHM9InVzZWksY3JpLHdhdmUsc2lnbixyZXNwZWN0Ii8+CgoKCgoKCgoKCiAgICA8L2FjdGlvbj4KCiAgICA8YWN0aW9uICBpZD0iRGFuY2UiIHN0YXRlPSJkYW5jZSIgcHJlY2VkZW5jZT0iMjMwIiBnZW9tZXRyeXR5cGU9InZlcnRpY2FsIiBhY3RpdmVwYXJ0c2V0PSJmaWd1cmUiIGFuaW1hdGlvbj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3RkIiBwcmV2ZW50cz0iY3JpLHVzZWkiLz4KCiAgICA8IS0tIEhhbmQgYWN0aW9ucyAtLT4KICAgIDxhY3Rpb24gIGlkPSJVc2VJdGVtIiBzdGF0ZT0idXNlaSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIiBwcmVjZWRlbmNlPSIyMDAiIGdlb21ldHJ5dHlwZT0idmVydGljYWwiIGFjdGl2ZXBhcnRzZXQ9ImhhbmRSaWdodCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0iZHJrIj4KICAgICAgICA8cGFyYW0gaWQ9ImRlZmF1bHQiIHZhbHVlPSIxIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxIiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMiIgdmFsdWU9IjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjMiIHZhbHVlPSIyIi8+CiAgICAgICAgPHBhcmFtIGlkPSI0IiB2YWx1ZT0iMyIvPgogICAgICAgIDxwYXJhbSBpZD0iOCIgdmFsdWU9IjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjkiIHZhbHVlPSI2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMCIgdmFsdWU9IjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjExIiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTIiIHZhbHVlPSI2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMyIgdmFsdWU9IjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjE0IiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTUiIHZhbHVlPSI2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxNiIgdmFsdWU9IjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjE3IiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTgiIHZhbHVlPSIxIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxOSIgdmFsdWU9IjUiLz4KICAgICAgICA8cGFyYW0gaWQ9IjIwIiB2YWx1ZT0iNzUiLz4KICAgICAgICA8cGFyYW0gaWQ9IjIxIiB2YWx1ZT0iNCIvPgogICAgICAgIDxwYXJhbSBpZD0iMjIiIHZhbHVlPSI3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIyMyIgdmFsdWU9IjgiLz4KICAgICAgICA8cGFyYW0gaWQ9IjI0IiB2YWx1ZT0iNjY3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIyNSIgdmFsdWU9IjkiLz4KICAgICAgICA8cGFyYW0gaWQ9IjI2IiB2YWx1ZT0iMzMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjI3IiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMjgiIHZhbHVlPSI0MiIvPgogICAgICAgIDxwYXJhbSBpZD0iMjkiIHZhbHVlPSI0MyIvPgogICAgICAgIDxwYXJhbSBpZD0iMzAiIHZhbHVlPSI0NCIvPgogICAgICAgIDxwYXJhbSBpZD0iMzEiIHZhbHVlPSI0NSIvPgogICAgICAgIDxwYXJhbSBpZD0iMzIiIHZhbHVlPSI0NSIvPgogICAgICAgIDxwYXJhbSBpZD0iMzMiIHZhbHVlPSI1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIzNCIgdmFsdWU9IjQ2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIzNSIgdmFsdWU9IjQ3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIzNiIgdmFsdWU9IjUwIi8+CiAgICAgICAgPHBhcmFtIGlkPSIzNyIgdmFsdWU9IjUxIi8+CiAgICAgICAgPHBhcmFtIGlkPSIzOCIgdmFsdWU9IjUyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIzOSIgdmFsdWU9IjUzIi8+CiAgICAgICAgPHBhcmFtIGlkPSI0MCIgdmFsdWU9IjU0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI0MSIgdmFsdWU9IjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjQyIiB2YWx1ZT0iNDgiLz4KICAgICAgICA8cGFyYW0gaWQ9IjQzIiB2YWx1ZT0iNTUiLz4KICAgICAgICA8cGFyYW0gaWQ9IjQ0IiB2YWx1ZT0iNTYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjQ1IiB2YWx1ZT0iNTciLz4KICAgICAgICA8cGFyYW0gaWQ9IjQ2IiB2YWx1ZT0iNTgiLz4KICAgICAgICA8cGFyYW0gaWQ9IjQ3IiB2YWx1ZT0iNTkiLz4KICAgICAgICA8cGFyYW0gaWQ9IjQ4IiB2YWx1ZT0iNjAiLz4KICAgICAgICA8cGFyYW0gaWQ9IjQ5IiB2YWx1ZT0iNjEiLz4KICAgICAgICA8cGFyYW0gaWQ9IjUwIiB2YWx1ZT0iNjIiLz4KICAgICAgICA8cGFyYW0gaWQ9IjUxIiB2YWx1ZT0iNjMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjUyIiB2YWx1ZT0iNjQiLz4KICAgICAgICA8cGFyYW0gaWQ9IjUzIiB2YWx1ZT0iNjUiLz4KICAgICAgICA8cGFyYW0gaWQ9IjU0IiB2YWx1ZT0iNjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjU1IiB2YWx1ZT0iNjciLz4KICAgICAgICA8cGFyYW0gaWQ9IjU2IiB2YWx1ZT0iNjQiLz4KICAgICAgICA8cGFyYW0gaWQ9IjU3IiB2YWx1ZT0iNDMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjU4IiB2YWx1ZT0iNjgiLz4KICAgICAgICA8cGFyYW0gaWQ9IjU5IiB2YWx1ZT0iNjkiLz4KICAgICAgICA8cGFyYW0gaWQ9IjYwIiB2YWx1ZT0iNzAiLz4KICAgICAgICA8cGFyYW0gaWQ9IjYxIiB2YWx1ZT0iNzEiLz4KICAgICAgICA8cGFyYW0gaWQ9IjYyIiB2YWx1ZT0iNzIiLz4KICAgICAgICA8cGFyYW0gaWQ9IjYzIiB2YWx1ZT0iNzMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjY0IiB2YWx1ZT0iNDQiLz4KCiAgICAgICAgPHBhcmFtIGlkPSI2NiIgdmFsdWU9Ijc1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI2NyIgdmFsdWU9IjkyIi8+CiAgICAgICAgPHBhcmFtIGlkPSI2OCIgdmFsdWU9IjkzIi8+CiAgICAgICAgPHBhcmFtIGlkPSI2OSIgdmFsdWU9Ijk0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI3MCIgdmFsdWU9IjEwNSIvPgogICAgICAgIDxwYXJhbSBpZD0iNzEiIHZhbHVlPSIxMDYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjcyIiB2YWx1ZT0iMTA5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI3MyIgdmFsdWU9IjEyNiIvPgogICAgICAgIDxwYXJhbSBpZD0iNzQiIHZhbHVlPSIxMjciLz4KICAgICAgICA8cGFyYW0gaWQ9Ijc1IiB2YWx1ZT0iMTI4Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI3NiIgdmFsdWU9IjEyOSIvPgogICAgICAgIDxwYXJhbSBpZD0iNzciIHZhbHVlPSIxMzAiLz4KICAgICAgICA8cGFyYW0gaWQ9Ijc5IiB2YWx1ZT0iMTMyIi8+CiAgICAgICAgPHBhcmFtIGlkPSI4MCIgdmFsdWU9IjEzMyIvPgogICAgICAgIDxwYXJhbSBpZD0iODEiIHZhbHVlPSIxMzQiLz4KICAgICAgICA8cGFyYW0gaWQ9IjgyIiB2YWx1ZT0iMTM2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI4MyIgdmFsdWU9IjEzNyIvPgogICAgICAgIDxwYXJhbSBpZD0iODQiIHZhbHVlPSIxMzkiLz4KICAgICAgICA8cGFyYW0gaWQ9Ijg1IiB2YWx1ZT0iMTQ0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI4NiIgdmFsdWU9IjE0NSIvPgogICAgICAgIDxwYXJhbSBpZD0iODciIHZhbHVlPSIxNTIiLz4KICAgICAgICA8cGFyYW0gaWQ9Ijg4IiB2YWx1ZT0iMTUzIi8+CiAgICAgICAgPHBhcmFtIGlkPSI4OSIgdmFsdWU9IjE1OSIvPgogICAgICAgIDxwYXJhbSBpZD0iOTAiIHZhbHVlPSIxNjAiLz4KICAgICAgICA8cGFyYW0gaWQ9IjkxIiB2YWx1ZT0iMTY0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI5MiIgdmFsdWU9IjE2OCIvPgogICAgICAgIDxwYXJhbSBpZD0iOTMiIHZhbHVlPSIxNjkiLz4KICAgICAgICA8cGFyYW0gaWQ9Ijk0IiB2YWx1ZT0iMTcwIi8+CiAgICAgICAgPHBhcmFtIGlkPSI5NSIgdmFsdWU9IjE3MSIvPgogICAgICAgIDxwYXJhbSBpZD0iOTYiIHZhbHVlPSIxNzgiLz4KICAgICAgICA8cGFyYW0gaWQ9Ijk3IiB2YWx1ZT0iMTc5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI5OCIgdmFsdWU9IjE4MCIvPiAgICAgCiAgICAgICAgPHBhcmFtIGlkPSI5OSIgdmFsdWU9IjE4MSIvPiAgICAgCiAgICAgICAgPHBhcmFtIGlkPSIxMDAiIHZhbHVlPSIxODIiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwMSIgdmFsdWU9IjE4MyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAyIiB2YWx1ZT0iMTg1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDMiIHZhbHVlPSIxODYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwNCIgdmFsdWU9IjE4NyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1IiB2YWx1ZT0iMTg4Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDYiIHZhbHVlPSIxODkiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwNyIgdmFsdWU9IjE5MCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA4IiB2YWx1ZT0iMTkxIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDkiIHZhbHVlPSIxOTIiLz4KICAgICAgICA8cGFyYW0gaWQ9IjExMCIgdmFsdWU9IjE5MyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTExIiB2YWx1ZT0iMTk0Ii8+ICAKICAgICAgICA8cGFyYW0gaWQ9IjExMiIgdmFsdWU9IjE5NiIvPiAKICAgICAgICA8cGFyYW0gaWQ9IjExMyIgdmFsdWU9IjE5NyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTE0IiB2YWx1ZT0iMTk4Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMTUiIHZhbHVlPSIxOTkiLz4KICAgICAgICA8cGFyYW0gaWQ9IjExNiIgdmFsdWU9IjIwMCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTE3IiB2YWx1ZT0iMjAxIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMTgiIHZhbHVlPSIyMDIiLz4KICAgICAgICA8cGFyYW0gaWQ9IjExOSIgdmFsdWU9IjIwMyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTIwIiB2YWx1ZT0iMjA2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMjEiIHZhbHVlPSIyMDciLz4KICAgICAgICA8cGFyYW0gaWQ9IjEyMiIgdmFsdWU9IjIwOCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTIzIiB2YWx1ZT0iMjA5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMjQiIHZhbHVlPSIyMTAiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEyNSIgdmFsdWU9IjIxMSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTI2IiB2YWx1ZT0iMjEyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMjciIHZhbHVlPSIyMTMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEyOCIgdmFsdWU9IjIxNCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTI5IiB2YWx1ZT0iMjE4Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMzAiIHZhbHVlPSIyMTkiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEzMSIgdmFsdWU9IjIyMCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTMyIiB2YWx1ZT0iMjIxIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMzMiIHZhbHVlPSIyMjIiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEzNCIgdmFsdWU9IjIyMyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTM1IiB2YWx1ZT0iMjI1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMzYiIHZhbHVlPSIyMjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEzNyIgdmFsdWU9IjIzMSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTM4IiB2YWx1ZT0iMjMyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxNDIiIHZhbHVlPSIyMzQiLz4KICAgICAgICA8cGFyYW0gaWQ9IjE0MyIgdmFsdWU9IjIzOCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTQ0IiB2YWx1ZT0iMjM5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxNDUiIHZhbHVlPSIyNDMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjE0NiIgdmFsdWU9IjI0NSIvPgoKCgogICAgICAgIAogICAgPC9hY3Rpb24+CiAgICA8YWN0aW9uICBpZD0iQ2FycnlJdGVtIiBzdGF0ZT0iY3JpIiBwcmVjZWRlbmNlPSIyMDUiIGdlb21ldHJ5dHlwZT0idmVydGljYWwiIGFjdGl2ZXBhcnRzZXQ9ImhhbmRSaWdodCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0iY3JyIj4KICAgICAgICA8cGFyYW0gaWQ9ImRlZmF1bHQiIHZhbHVlPSIxIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxIiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMyIgdmFsdWU9IjIiLz4KICAgICAgICA8cGFyYW0gaWQ9IjQiIHZhbHVlPSIzIi8+CiAgICAgICAgPHBhcmFtIGlkPSI4IiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iOSIgdmFsdWU9IjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwIiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTEiIHZhbHVlPSI2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMiIgdmFsdWU9IjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEzIiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTQiIHZhbHVlPSI2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxNSIgdmFsdWU9IjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjE2IiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTciIHZhbHVlPSI2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxOCIgdmFsdWU9IjEiLz4KICAgICAgICA8cGFyYW0gaWQ9IjE5IiB2YWx1ZT0iNSIvPgogICAgICAgIDxwYXJhbSBpZD0iMjAiIHZhbHVlPSI3NSIvPgogICAgICAgIDxwYXJhbSBpZD0iMjEiIHZhbHVlPSI0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIyMiIgdmFsdWU9IjciLz4KICAgICAgICA8cGFyYW0gaWQ9IjIzIiB2YWx1ZT0iOCIvPgogICAgICAgIDxwYXJhbSBpZD0iMjQiIHZhbHVlPSI2NjciLz4KICAgICAgICA8cGFyYW0gaWQ9IjI1IiB2YWx1ZT0iOSIvPgogICAgICAgIDxwYXJhbSBpZD0iMjYiIHZhbHVlPSIzMyIvPgogICAgICAgIDxwYXJhbSBpZD0iMjciIHZhbHVlPSI2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIyOCIgdmFsdWU9IjQyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIyOSIgdmFsdWU9IjQzIi8+CiAgICAgICAgPHBhcmFtIGlkPSIzMCIgdmFsdWU9IjQ0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIzMSIgdmFsdWU9IjQ1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIzMiIgdmFsdWU9IjQ1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIzMyIgdmFsdWU9IjUiLz4KICAgICAgICA8cGFyYW0gaWQ9IjM0IiB2YWx1ZT0iNDYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjM1IiB2YWx1ZT0iNDciLz4KICAgICAgICA8cGFyYW0gaWQ9IjM2IiB2YWx1ZT0iNTAiLz4KICAgICAgICA8cGFyYW0gaWQ9IjM3IiB2YWx1ZT0iNTEiLz4KICAgICAgICA8cGFyYW0gaWQ9IjM4IiB2YWx1ZT0iNTIiLz4KICAgICAgICA8cGFyYW0gaWQ9IjM5IiB2YWx1ZT0iNTMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjQwIiB2YWx1ZT0iNTQiLz4KICAgICAgICA8cGFyYW0gaWQ9IjQxIiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iNDIiIHZhbHVlPSI0OCIvPgogICAgICAgIDxwYXJhbSBpZD0iNDMiIHZhbHVlPSI1NSIvPgogICAgICAgIDxwYXJhbSBpZD0iNDQiIHZhbHVlPSI1NiIvPgogICAgICAgIDxwYXJhbSBpZD0iNDUiIHZhbHVlPSI1NyIvPgogICAgICAgIDxwYXJhbSBpZD0iNDYiIHZhbHVlPSI1OCIvPgogICAgICAgIDxwYXJhbSBpZD0iNDciIHZhbHVlPSI1OSIvPgogICAgICAgIDxwYXJhbSBpZD0iNDgiIHZhbHVlPSI2MCIvPgogICAgICAgIDxwYXJhbSBpZD0iNDkiIHZhbHVlPSI2MSIvPgogICAgICAgIDxwYXJhbSBpZD0iNTAiIHZhbHVlPSI2MiIvPgogICAgICAgIDxwYXJhbSBpZD0iNTEiIHZhbHVlPSI2MyIvPgogICAgICAgIDxwYXJhbSBpZD0iNTIiIHZhbHVlPSI2NCIvPgogICAgICAgIDxwYXJhbSBpZD0iNTMiIHZhbHVlPSI2NSIvPgogICAgICAgIDxwYXJhbSBpZD0iNTQiIHZhbHVlPSI2NiIvPgogICAgICAgIDxwYXJhbSBpZD0iNTUiIHZhbHVlPSI2NyIvPgogICAgICAgIDxwYXJhbSBpZD0iNTYiIHZhbHVlPSI2NCIvPgogICAgICAgIDxwYXJhbSBpZD0iNTciIHZhbHVlPSI0MyIvPgogICAgICAgIDxwYXJhbSBpZD0iNTgiIHZhbHVlPSI2OCIvPgogICAgICAgIDxwYXJhbSBpZD0iNTkiIHZhbHVlPSI2OSIvPgogICAgICAgIDxwYXJhbSBpZD0iNjAiIHZhbHVlPSI3MCIvPgogICAgICAgIDxwYXJhbSBpZD0iNjEiIHZhbHVlPSI3MSIvPgogICAgICAgIDxwYXJhbSBpZD0iNjIiIHZhbHVlPSI3MiIvPgogICAgICAgIDxwYXJhbSBpZD0iNjMiIHZhbHVlPSI3MyIvPgogICAgICAgIDxwYXJhbSBpZD0iNjQiIHZhbHVlPSI0NCIvPgogICAgICAgIDxwYXJhbSBpZD0iNjYiIHZhbHVlPSI3NSIvPgogICAgICAgIDxwYXJhbSBpZD0iNjciIHZhbHVlPSI5MiIvPgogICAgICAgIDxwYXJhbSBpZD0iNjgiIHZhbHVlPSI5MyIvPgogICAgICAgIDxwYXJhbSBpZD0iNjkiIHZhbHVlPSI5NCIvPgogICAgICAgIDxwYXJhbSBpZD0iNzAiIHZhbHVlPSIxMDUiLz4KICAgICAgICA8cGFyYW0gaWQ9IjcxIiB2YWx1ZT0iMTA2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI3MiIgdmFsdWU9IjEwOSIvPgogICAgICAgIDxwYXJhbSBpZD0iNzMiIHZhbHVlPSIxMjYiLz4KICAgICAgICA8cGFyYW0gaWQ9Ijc0IiB2YWx1ZT0iMTI3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI3NSIgdmFsdWU9IjEyOCIvPgogICAgICAgIDxwYXJhbSBpZD0iNzYiIHZhbHVlPSIxMjkiLz4KICAgICAgICA8cGFyYW0gaWQ9Ijc3IiB2YWx1ZT0iMTMwIi8+CiAgICAgICAgPHBhcmFtIGlkPSI3OSIgdmFsdWU9IjEzMiIvPgogICAgICAgIDxwYXJhbSBpZD0iODAiIHZhbHVlPSIxMzMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjgxIiB2YWx1ZT0iMTM0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI4MiIgdmFsdWU9IjEzNiIvPgogICAgICAgIDxwYXJhbSBpZD0iODMiIHZhbHVlPSIxMzciLz4KICAgICAgICA8cGFyYW0gaWQ9Ijg0IiB2YWx1ZT0iMTM5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI4NSIgdmFsdWU9IjE0NCIvPgogICAgICAgIDxwYXJhbSBpZD0iODYiIHZhbHVlPSIxNDUiLz4KICAgICAgICA8cGFyYW0gaWQ9Ijg3IiB2YWx1ZT0iMTUyIi8+CiAgICAgICAgPHBhcmFtIGlkPSI4OCIgdmFsdWU9IjE1MyIvPgogICAgICAgIDxwYXJhbSBpZD0iODkiIHZhbHVlPSIxNTkiLz4KICAgICAgICA8cGFyYW0gaWQ9IjkwIiB2YWx1ZT0iMTYwIi8+CiAgICAgICAgPHBhcmFtIGlkPSI5MSIgdmFsdWU9IjE2NCIvPgogICAgICAgIDxwYXJhbSBpZD0iOTIiIHZhbHVlPSIxNjgiLz4KICAgICAgICA8cGFyYW0gaWQ9IjkzIiB2YWx1ZT0iMTY5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI5NCIgdmFsdWU9IjE3MCIvPgogICAgICAgIDxwYXJhbSBpZD0iOTUiIHZhbHVlPSIxNzEiLz4KICAgICAgICA8cGFyYW0gaWQ9Ijk2IiB2YWx1ZT0iMTc4Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI5NyIgdmFsdWU9IjE3OSIvPgogICAgICAgIDxwYXJhbSBpZD0iOTgiIHZhbHVlPSIxODAiLz4gICAgIAogICAgICAgIDxwYXJhbSBpZD0iOTkiIHZhbHVlPSIxODEiLz4gICAgIAogICAgICAgIDxwYXJhbSBpZD0iMTAwIiB2YWx1ZT0iMTgyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDEiIHZhbHVlPSIxODMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwMiIgdmFsdWU9IjE4NSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzIiB2YWx1ZT0iMTg2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDQiIHZhbHVlPSIxODciLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwNSIgdmFsdWU9IjE4OCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA2IiB2YWx1ZT0iMTg5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDciIHZhbHVlPSIxOTAiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwOCIgdmFsdWU9IjE5MSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA5IiB2YWx1ZT0iMTkyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMTAiIHZhbHVlPSIxOTMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjExMSIgdmFsdWU9IjE5NCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTEyIiB2YWx1ZT0iMTk2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMTMiIHZhbHVlPSIxOTciLz4KICAgICAgICA8cGFyYW0gaWQ9IjExNCIgdmFsdWU9IjE5OCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTE1IiB2YWx1ZT0iMTk5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMTYiIHZhbHVlPSIyMDAiLz4KICAgICAgICA8cGFyYW0gaWQ9IjExNyIgdmFsdWU9IjIwMSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTE4IiB2YWx1ZT0iMjAyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMTkiIHZhbHVlPSIyMDMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEyMCIgdmFsdWU9IjIwNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTIxIiB2YWx1ZT0iMjA3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMjIiIHZhbHVlPSIyMDgiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEyMyIgdmFsdWU9IjIwOSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTI0IiB2YWx1ZT0iMjEwIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMjUiIHZhbHVlPSIyMTEiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEyNiIgdmFsdWU9IjIxMiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTI3IiB2YWx1ZT0iMjEzIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMjgiIHZhbHVlPSIyMTQiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEyOSIgdmFsdWU9IjIxOCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTMwIiB2YWx1ZT0iMjE5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMzEiIHZhbHVlPSIyMjAiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEzMiIgdmFsdWU9IjIyMSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTMzIiB2YWx1ZT0iMjIyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMzQiIHZhbHVlPSIyMjMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEzNSIgdmFsdWU9IjIyNSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTM2IiB2YWx1ZT0iMjI2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMzciIHZhbHVlPSIyMzEiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEzOCIgdmFsdWU9IjIzMiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTQyIiB2YWx1ZT0iMjM0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxNDMiIHZhbHVlPSIyMzgiLz4KICAgICAgICA8cGFyYW0gaWQ9IjE0NCIgdmFsdWU9IjIzOSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTQ1IiB2YWx1ZT0iMjQzIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxNDYiIHZhbHVlPSIyNDUiLz4KCiAgIAogICAgICAgIDxwYXJhbSBpZD0iMTAwMCIgdmFsdWU9Ijc2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDAxIiB2YWx1ZT0iNzciLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwMDIiIHZhbHVlPSI3OCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAwMyIgdmFsdWU9Ijc5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDA0IiB2YWx1ZT0iODAiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwMDUiIHZhbHVlPSI4MSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAwNiIgdmFsdWU9IjgyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDA3IiB2YWx1ZT0iODMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwMDgiIHZhbHVlPSI4NCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAwOSIgdmFsdWU9Ijg1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDExIiB2YWx1ZT0iODciLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwMTMiIHZhbHVlPSI4OSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAxNCIgdmFsdWU9IjkwIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDE1IiB2YWx1ZT0iOTEiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwMTkiIHZhbHVlPSI5NSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAyMSIgdmFsdWU9Ijk3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDIyIiB2YWx1ZT0iOTgiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwMjMiIHZhbHVlPSI5OSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAyNCIgdmFsdWU9IjEwMCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAyNSIgdmFsdWU9IjEwMSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAyNiIgdmFsdWU9IjEwMiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAyNyIgdmFsdWU9IjEwMyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAyOCIgdmFsdWU9IjEwNyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAyOSIgdmFsdWU9IjEwOCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzMCIgdmFsdWU9IjExMCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzMSIgdmFsdWU9IjExMSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzMiIgdmFsdWU9IjExMiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzMyIgdmFsdWU9IjExMyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzNCIgdmFsdWU9IjExNCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzNSIgdmFsdWU9IjExNSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzNiIgdmFsdWU9IjExNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzNyIgdmFsdWU9IjExNyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzOCIgdmFsdWU9IjExOCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzOSIgdmFsdWU9IjExOSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA0MCIgdmFsdWU9IjEyMCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA0MSIgdmFsdWU9IjEyMSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA0MiIgdmFsdWU9IjEyMiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA0MyIgdmFsdWU9IjEyMyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA0NCIgdmFsdWU9IjEyNCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA0NSIgdmFsdWU9IjEyNSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA0NiIgdmFsdWU9IjEzMSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA0NyIgdmFsdWU9IjEzNSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA0OCIgdmFsdWU9IjEzOCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA0OSIgdmFsdWU9IjE0MCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1MCIgdmFsdWU9IjE0MSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1MSIgdmFsdWU9IjE0MiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1MiIgdmFsdWU9IjE0MyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1MyIgdmFsdWU9IjE0NiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1NCIgdmFsdWU9IjE0NyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1NSIgdmFsdWU9IjE0OCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1NiIgdmFsdWU9IjE0OSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1NyIgdmFsdWU9IjE1MCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1OCIgdmFsdWU9IjE1MSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1OSIgdmFsdWU9IjE1NCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA2MCIgdmFsdWU9Ijc0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDYxIiB2YWx1ZT0iMTU1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDYyIiB2YWx1ZT0iMTU2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDYzIiB2YWx1ZT0iMTU3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDY0IiB2YWx1ZT0iMTU4Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDY1IiB2YWx1ZT0iMTYxIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDY2IiB2YWx1ZT0iMTYyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDY3IiB2YWx1ZT0iMTYzIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDY4IiB2YWx1ZT0iMTY1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDY5IiB2YWx1ZT0iMTY2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDcwIiB2YWx1ZT0iMTY3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDcxIiB2YWx1ZT0iMTcyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDcyIiB2YWx1ZT0iMTczIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDczIiB2YWx1ZT0iMTc0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDc0IiB2YWx1ZT0iMTc1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDc1IiB2YWx1ZT0iMTc2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDc2IiB2YWx1ZT0iMTc3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDc3IiB2YWx1ZT0iMTg0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDc4IiB2YWx1ZT0iMTk1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDc5IiB2YWx1ZT0iMjA0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDgwIiB2YWx1ZT0iMjA1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDgxIiB2YWx1ZT0iMjE1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDgyIiB2YWx1ZT0iMjE2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDgzIiB2YWx1ZT0iMjE3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDg0IiB2YWx1ZT0iMjI0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDg1IiB2YWx1ZT0iMjI3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDg2IiB2YWx1ZT0iMjI4Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDg3IiB2YWx1ZT0iMjI5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDg4IiB2YWx1ZT0iMjMwIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDg5IiB2YWx1ZT0iMjMzIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDkwIiB2YWx1ZT0iMjM1Ii8+Cgk8cGFyYW0gaWQ9IjEwOTEiIHZhbHVlPSIyMzYiLz4KCTxwYXJhbSBpZD0iMTA5MiIgdmFsdWU9IjIzNyIvPgoJPHBhcmFtIGlkPSIxMDkzIiB2YWx1ZT0iMjQwIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDk0IiB2YWx1ZT0iMjQxIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDk1IiB2YWx1ZT0iMjQyIi8+Cgk8cGFyYW0gaWQ9IjEwOTYiIHZhbHVlPSIyNDQiLz4KCgogICAgICAgIDxwYXJhbSBpZD0iOTk5OTk5OTk5IiB2YWx1ZT0iLTEiLz48IS0tIFNjcmF0Y2hpbmcgLS0+CgogICAgPC9hY3Rpb24+CiAgICAKICAgIDwhLS0gRmFjZSBhY3Rpb25zIC0tPgogICAgPGFjdGlvbiAgaWQ9IlRhbGsiIHN0YXRlPSJ0YWxrIiBwcmVjZWRlbmNlPSI1MDAiIGdlb21ldHJ5dHlwZT0idmVydGljYWwiIGFjdGl2ZXBhcnRzZXQ9InNwZWFrIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzcGsiIGxheT0ibHNwIi8+CiAgICAKICAgIDxhY3Rpb24gIGlkPSJHZXN0dXJlIiBzdGF0ZT0iZ2VzdCIgcHJlY2VkZW5jZT0iNTEwIiBnZW9tZXRyeXR5cGU9InZlcnRpY2FsIiBhY3RpdmVwYXJ0c2V0PSJnZXN0dXJlIiBhc3NldHBhcnRkZWZpbml0aW9uPSJVU0VfUEFSQU1FVEVSIi8+CiAgICA8YWN0aW9uICBpZD0iR2VzdHVyZVNtaWxlIiBzdGF0ZT0ic21sIiBwcmVjZWRlbmNlPSI1MTAiIGdlb21ldHJ5dHlwZT0idmVydGljYWwiIGFjdGl2ZXBhcnRzZXQ9Imdlc3R1cmUiIGFzc2V0cGFydGRlZmluaXRpb249InNtbCIgbGF5PSJsc20iLz4KICAgIDxhY3Rpb24gIGlkPSJHZXN0dXJlU2FkIiBzdGF0ZT0ic2FkIiBwcmVjZWRlbmNlPSI1MTAiIGdlb21ldHJ5dHlwZT0idmVydGljYWwiIGFjdGl2ZXBhcnRzZXQ9Imdlc3R1cmUiIGFzc2V0cGFydGRlZmluaXRpb249InNhZCIgbGF5PSJsc2EiLz4KICAgIDxhY3Rpb24gIGlkPSJHZXN0dXJlQW5ncnkiIHN0YXRlPSJhZ3IiIHByZWNlZGVuY2U9IjUxMCIgZ2VvbWV0cnl0eXBlPSJ2ZXJ0aWNhbCIgYWN0aXZlcGFydHNldD0iZ2VzdHVyZSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0iYWdyIiBsYXk9ImxhZyIvPgogICAgPGFjdGlvbiAgaWQ9Ikdlc3R1cmVTdXJwcmlzZWQiIHN0YXRlPSJzcnAiIHByZWNlZGVuY2U9IjUxMCIgZ2VvbWV0cnl0eXBlPSJ2ZXJ0aWNhbCIgYWN0aXZlcGFydHNldD0iZ2VzdHVyZSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3JwIiBsYXk9ImxzciIvPgoKICAgIDxhY3Rpb24gIGlkPSJTbGVlcCIgc3RhdGU9IlNsZWVwIiBwcmVjZWRlbmNlPSI1MjAiIGdlb21ldHJ5dHlwZT0idmVydGljYWwiIGFjdGl2ZXBhcnRzZXQ9ImV5ZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIiBhc3NldHBhcnRkZWZpbml0aW9uPSJleWIiIGxheT0ibGV5Ii8+CgogICAgPCEtLSBMb3dlciBwcmlvcml0eSBmdWxsIGJvZHkgYWN0aW9ucyAtLT4KICAgIDxhY3Rpb24gIGlkPSJNb3ZlIiBzdGF0ZT0ibXYiIHByZWNlZGVuY2U9IjYwMCIgZ2VvbWV0cnl0eXBlPSJ2ZXJ0aWNhbCIgYWN0aXZlcGFydHNldD0id2FsayIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIiBwcmV2ZW50cz0iU2xlZXAiLz4KICAgIDxhY3Rpb24gIGlkPSJEZWZhdWx0IiBwcmVjZWRlbmNlPSIxMDAwIiBzdGF0ZT0ic3RkIiBtYWluPSIxIiBpc2RlZmF1bHQ9IjEiIGdlb21ldHJ5dHlwZT0idmVydGljYWwiIGFjdGl2ZXBhcnRzZXQ9ImZpZ3VyZSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3RkIi8+Cgo8L2FjdGlvbnM+Cg==";Object.defineProperty(Ta,"__esModule",{value:!0});Ta.AvatarActionsData=void 0;const HE=Ea;class As{constructor(t){this._map=new Map,this._handItems=new Map,new DOMParser().parseFromString(t,"text/xml").querySelectorAll("action").forEach(i=>{const n=i.getAttribute("id");if(n==null)return;const o=YE(i);this._map.set(n,o),i.querySelectorAll("param").forEach(s=>{const a=s.getAttribute("id");if(a==null)return;const l=Number(s?.getAttribute("value"));isNaN(l)||this._handItems.set(`${n}_${a}`,l)})})}static async fromUrl(t){const i=await(await fetch(t)).text();return new As(i)}static default(){return new As(atob(HE.actionsXml))}getHandItemId(t,e){return this._handItems.get(`${t}_${e}`)}getActions(){return Array.from(this._map.values())}getAction(t){return this._map.get(t)}}Ta.AvatarActionsData=As;function YE(r){var t;const e=r.getAttribute("id"),i=r.getAttribute("state"),n=r.getAttribute("precedence"),o=r.getAttribute("geometrytype"),s=r.getAttribute("activepartset"),a=r.getAttribute("assetpartdefinition"),l=r.getAttribute("prevents"),c=r.getAttribute("animation"),d=r.getAttribute("main"),g=r.getAttribute("isdefault");if(e==null)throw new Error("Invalid id");if(i==null)throw new Error("Invalid state");if(n==null)throw new Error("Invalid precedence");if(o==null)throw new Error("Invalid geometry type");if(a==null)throw new Error("Invalid asset part definition");const u=(t=l?.split(","))!==null&&t!==void 0?t:[],h=Number(n);if(isNaN(h))throw new Error("Invalid precedence");return{id:e,state:i,precedence:h,geometrytype:o,activepartset:s,assetpartdefinition:a,prevents:u,animation:c==="1",main:d==="1",isdefault:g==="1"}}var Fa={},ao={};Object.defineProperty(ao,"__esModule",{value:!0});ao.getNumberFromAttribute=void 0;function UE(r){if(r==null)return;const t=Number(r);if(!isNaN(t))return t}ao.getNumberFromAttribute=UE;var Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});Ma.geometryXml=void 0;Ma.geometryXml="PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGdlb21ldHJ5IGRpcmVjdGlvbj0iMCIgPgoKCTxjYW1lcmE+CgkJPHg+MDwveD4KCQk8eT4wPC95PgoJCTx6PjEwPC96PgoJPC9jYW1lcmE+CgkKCTxjYW52YXMgc2NhbGU9ImgiPgoJCTwhLS0gZHggYW5kIGR5IHZhbHVlcyBhcmUgb2Zmc2V0cyBmb3IgZmlndXJlIHBhcnRzIGluIGNhbnZhcywgdXNlZCBieSBBdmF0YXJJbWFnZSwgbWFpbmx5IGZvciBsYXkgYW5kIHN3aW0gLS0+CgkJPGdlb21ldHJ5IGlkPSJ2ZXJ0aWNhbCIgd2lkdGg9IjkwIiBoZWlnaHQ9IjEzMCIgZHk9IjAiIGR4PSIwIi8+CiAgICAgICAgPGdlb21ldHJ5IGlkPSJzaXR0aW5nIiB3aWR0aD0iOTAiIGhlaWdodD0iMTMwIiBkeT0iMCIgZHg9IjAiLz4KCQk8Z2VvbWV0cnkgaWQ9Imhvcml6b250YWwiIHdpZHRoPSIxMjgiIGhlaWdodD0iODAiIGR5PSIwIiBkeD0iMzAiLz4KCQk8Z2VvbWV0cnkgaWQ9InN3aG9yaXpvbnRhbCIgd2lkdGg9IjE5MiIgaGVpZ2h0PSIxMjAiIGR5PSItNDAiIGR4PSIwIi8+Cgk8L2NhbnZhcz4KCgk8Y2FudmFzIHNjYWxlPSJzaCI+CgkJPGdlb21ldHJ5IGlkPSJ2ZXJ0aWNhbCIgd2lkdGg9IjQ1IiBoZWlnaHQ9IjcyIiBkeT0iMCIgZHg9IjAiLz4KICAgICAgICA8Z2VvbWV0cnkgaWQ9InNpdHRpbmciIHdpZHRoPSI0NSIgaGVpZ2h0PSI3MiIgZHk9IjAiIGR4PSIwIi8+CgkJPGdlb21ldHJ5IGlkPSJob3Jpem9udGFsIiB3aWR0aD0iNjQiIGhlaWdodD0iNTAiIGR5PSItMTAiIGR4PSIxNSIvPgoJCTxnZW9tZXRyeSBpZD0ic3dob3Jpem9udGFsIiB3aWR0aD0iOTYiIGhlaWdodD0iNzAiIGR5PSItMjAiIGR4PSIwIi8+CgkJPGdlb21ldHJ5IGlkPSJzd2ltIiB3aWR0aD0iNjQiIGhlaWdodD0iNzAiIGR5PSIxMCIgZHg9IjI1Ii8+Cgk8L2NhbnZhcz4KCgk8YXZhdGFyc2V0IGlkPSJmdWxsIj4KCQk8YXZhdGFyc2V0IGlkPSJib2R5IiBtYWluPSIxIj4KCQkJPGJvZHlwYXJ0IGlkPSJ0b3AiIC8+CgkJCTxib2R5cGFydCBpZD0iYm90dG9tIiAvPgoJCQk8Ym9keXBhcnQgaWQ9ImJlaGluZCIgLz4KCQkJPGJvZHlwYXJ0IGlkPSJ0b3JzbyIgLz4KCQkJPGJvZHlwYXJ0IGlkPSJsZWZ0aXRlbSIgLz4KICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJyaWdodGl0ZW0iIC8+CgkJCTxib2R5cGFydCBpZD0ibGVmdGFybSIgLz4KCQkJPGJvZHlwYXJ0IGlkPSJyaWdodGFybSIgLz4KCQk8L2F2YXRhcnNldD4KCQk8YXZhdGFyc2V0IGlkPSJoZWFkIj4KCQkJPGJvZHlwYXJ0IGlkPSJoZWFkIiAvPgoJCTwvYXZhdGFyc2V0PgoJPC9hdmF0YXJzZXQ+CgkKCTx0eXBlIGlkPSJ2ZXJ0aWNhbCIgPgoJCTxib2R5cGFydCBpZD0idG9wIiB4PSIwIiB5PSIwIiB6PSIwLjAiIHJhZGl1cz0iMi4wIiAvPgoJCTxib2R5cGFydCBpZD0iYm90dG9tIiB4PSIwIiB5PSIwIiB6PSIwLjAiIHJhZGl1cz0iMC4wMDEiIC8+CgkJPGJvZHlwYXJ0IGlkPSJiZWhpbmQiIHg9IjAiIHk9IjAiIHo9IjAuMiIgcmFkaXVzPSIwLjMiIC8+CgkJPGJvZHlwYXJ0IGlkPSJ0b3JzbyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjQiID4KCQkJPCEtLSA8Ym91bmRhcnkgdHlwZT0iY2lyY2xlL3NwaGVyZS9ib3gvY3lsaW5kZXIiIHJhZGl1cz0iMC40IiAvPiAtLT4KCQkJPGl0ZW0gaWQ9ImJkIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMSIgLz4KCQkJPGl0ZW0gaWQ9ImJkcyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMSIgLz4KCQkJPGl0ZW0gaWQ9ImNoIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA0IiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9InNoIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAyIiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImxnIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAzIiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9InNzIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA0IiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KICAgICAgICAgICAgPGl0ZW0gaWQ9ImNwIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA0NSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KICAgICAgICAgICAgPGl0ZW0gaWQ9IndhIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA1IiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImNjIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA2IiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KICAgICAgICAgICAgPGl0ZW0gaWQ9ImNhIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA3IiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQk8L2JvZHlwYXJ0PgoJCTxib2R5cGFydCBpZD0ibGVmdGl0ZW0iIHg9IjAiIHk9IjAiIHo9Ii0wLjI5IiByYWRpdXM9IjAuMyI+CgkJCTxpdGVtIGlkPSJsaSIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCTwvYm9keXBhcnQ+CiAgICAgICAgPGJvZHlwYXJ0IGlkPSJyaWdodGl0ZW0iIHg9IjAiIHk9IjAiIHo9Ii0wLjI5IiByYWRpdXM9IjAuMyI+CgkJCTxpdGVtIGlkPSJyaSIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCTwvYm9keXBhcnQ+CgkJPGJvZHlwYXJ0IGlkPSJsZWZ0YXJtIiB4PSItMSIgeT0iMCIgej0iLTAuNTEiIHJhZGl1cz0iMC41Ij4KCQkJPGl0ZW0gaWQ9ImxoIiAgeD0iMCIgeT0iMCIgej0iMCIgIHJhZGl1cz0iMC4wMSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImxocyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0ibHMiICB4PSIwIiB5PSIwIiB6PSIwIiAgcmFkaXVzPSIwLjAyIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0ibGMiICB4PSIwIiB5PSIwIiB6PSIwIiAgcmFkaXVzPSIwLjAyNSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQk8L2JvZHlwYXJ0PgoJCTxib2R5cGFydCBpZD0icmlnaHRhcm0iIHg9IjEiIHk9IjAiIHo9Ii0wLjUxIiByYWRpdXM9IjAuNSI+CgkJCTxpdGVtIGlkPSJyaCIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0icmhzIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJycyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAyIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0icmMiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMjUiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJPC9ib2R5cGFydD4KCQk8Ym9keXBhcnQgaWQ9ImhlYWQiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC41Ij4KCQkJPGl0ZW0gaWQ9ImhkIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgoJCQk8aXRlbSBpZD0iZmMiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDIiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJleSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMyIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImhyIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA0IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgoJCQk8aXRlbSBpZD0iaHJiIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDUiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjEiIC8+CgkJCTxpdGVtIGlkPSJmYSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wNiIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImVhIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA3IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0iaGEiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDgiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJoZSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wOSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQk8L2JvZHlwYXJ0PgoJPC90eXBlPgoKICAgIDx0eXBlIGlkPSJzaXR0aW5nIiA+CiAgICAgICAgPGJvZHlwYXJ0IGlkPSJ0b3AiIHg9IjAiIHk9IjAiIHo9IjAuMCIgcmFkaXVzPSIyLjAiIC8+CiAgICAgICAgPGJvZHlwYXJ0IGlkPSJib3R0b20iIHg9IjAiIHk9IjAiIHo9IjAuMCIgcmFkaXVzPSIwLjAwMSIgLz4KICAgICAgICA8Ym9keXBhcnQgaWQ9ImJlaGluZCIgeD0iMCIgeT0iMCIgej0iMC4yIiByYWRpdXM9IjAuMyIgLz4KICAgICAgICA8Ym9keXBhcnQgaWQ9InRvcnNvIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuNCIgPgogICAgICAgICAgICA8IS0tIDxib3VuZGFyeSB0eXBlPSJjaXJjbGUvc3BoZXJlL2JveC9jeWxpbmRlciIgcmFkaXVzPSIwLjQiIC8+IC0tPgogICAgICAgICAgICA8aXRlbSBpZD0iYmQiIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDEiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0iYmRzIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0iY2giIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDMiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0ic2giIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDQiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0ibGciIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDIiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0ic3MiIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDQiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0iY3AiIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDQ1IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0id2EiIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDUiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0iY2MiIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDYiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0iY2EiIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDciICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgIDwvYm9keXBhcnQ+CiAgICAgICAgPGJvZHlwYXJ0IGlkPSJsZWZ0aXRlbSIgeD0iMCIgeT0iMCIgej0iLTAuMjkiIHJhZGl1cz0iMC4zIj4KICAgICAgICAgICAgPGl0ZW0gaWQ9ImxpIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CiAgICAgICAgPC9ib2R5cGFydD4KICAgICAgICA8Ym9keXBhcnQgaWQ9InJpZ2h0aXRlbSIgeD0iMCIgeT0iMCIgej0iLTAuMjkiIHJhZGl1cz0iMC4zIj4KICAgICAgICAgICAgPGl0ZW0gaWQ9InJpIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CiAgICAgICAgPC9ib2R5cGFydD4KICAgICAgICA8Ym9keXBhcnQgaWQ9ImxlZnRhcm0iIHg9Ii0xIiB5PSIwIiB6PSItMC41MSIgcmFkaXVzPSIwLjUiPgogICAgICAgICAgICA8aXRlbSBpZD0ibGgiICB4PSIwIiB5PSIwIiB6PSIwIiAgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0ibGhzIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CiAgICAgICAgICAgIDxpdGVtIGlkPSJscyIgIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDIiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CiAgICAgICAgICAgIDxpdGVtIGlkPSJsYyIgIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDI1IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgIDwvYm9keXBhcnQ+CiAgICAgICAgPGJvZHlwYXJ0IGlkPSJyaWdodGFybSIgeD0iMSIgeT0iMCIgej0iLTAuNTEiIHJhZGl1cz0iMC41Ij4KICAgICAgICAgICAgPGl0ZW0gaWQ9InJoIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CiAgICAgICAgICAgIDxpdGVtIGlkPSJyaHMiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KICAgICAgICAgICAgPGl0ZW0gaWQ9InJzIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDIiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CiAgICAgICAgICAgIDxpdGVtIGlkPSJyYyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAyNSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KICAgICAgICA8L2JvZHlwYXJ0PgogICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjUiPgogICAgICAgICAgICA8aXRlbSBpZD0iaGQiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjEiIC8+CiAgICAgICAgICAgIDxpdGVtIGlkPSJmYyIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMiIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KICAgICAgICAgICAgPGl0ZW0gaWQ9ImV5IiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAzIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0iaHIiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDQiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjEiIC8+CiAgICAgICAgICAgIDxpdGVtIGlkPSJocmIiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wNSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMSIgLz4KICAgICAgICAgICAgPGl0ZW0gaWQ9ImZhIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA2IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0iZWEiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDciIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CiAgICAgICAgICAgIDxpdGVtIGlkPSJoYSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wOCIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KICAgICAgICAgICAgPGl0ZW0gaWQ9ImhlIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA5IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgIDwvYm9keXBhcnQ+CiAgICA8L3R5cGU+CgoKCTx0eXBlIGlkPSJob3Jpem9udGFsIiA+CgkJPGJvZHlwYXJ0IGlkPSJ0b3JzbyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjQiID4KCQkJPCEtLSA8Ym91bmRhcnkgdHlwZT0iY2lyY2xlL3NwaGVyZS9ib3gvY3lsaW5kZXIiIHJhZGl1cz0iMC40IiAvPiAtLT4KCQkJPGl0ZW0gaWQ9ImJkIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMSIgLz4KCQkJPGl0ZW0gaWQ9ImJkcyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMSIgLz4KCQkJPGl0ZW0gaWQ9ImNoIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAyIiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KICAgICAgICAgICAgPGl0ZW0gaWQ9ImNwIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAyNSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9InNoIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA0IiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImxnIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAzIiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9InNzIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAzIiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9IndhIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA1IiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImNjIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA2IiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KICAgICAgICAgICAgPGl0ZW0gaWQ9ImNhIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA3IiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQk8L2JvZHlwYXJ0PgoJCTxib2R5cGFydCBpZD0ibGVmdGl0ZW0iIHg9IjAiIHk9IjAiIHo9Ii0wLjI5IiByYWRpdXM9IjAuMyI+CgkJCTxpdGVtIGlkPSJsaSIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCTwvYm9keXBhcnQ+CiAgICAgICAgPGJvZHlwYXJ0IGlkPSJyaWdodGl0ZW0iIHg9IjAiIHk9IjAiIHo9Ii0wLjI5IiByYWRpdXM9IjAuMyI+CgkJCTxpdGVtIGlkPSJyaSIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCTwvYm9keXBhcnQ+CgkJPGJvZHlwYXJ0IGlkPSJsZWZ0YXJtIiB4PSItMSIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjYiPgoJCQk8aXRlbSBpZD0ibGgiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImxocyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0ibHMiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMiIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImxjIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDI1IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCTwvYm9keXBhcnQ+CgkJPGJvZHlwYXJ0IGlkPSJyaWdodGFybSIgeD0iMSIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjYiPgoJCQk8aXRlbSBpZD0icmgiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9InJocyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0icnMiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMiIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9InJjIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDI1IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCTwvYm9keXBhcnQ+CgkJPGJvZHlwYXJ0IGlkPSJoZWFkIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuNSI+CgkJCTxpdGVtIGlkPSJoZCIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMSIgLz4KCQkJPGl0ZW0gaWQ9ImZjIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAyIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0iZXkiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDMiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJociIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wNCIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMSIgLz4KCQkJPGl0ZW0gaWQ9ImhyYiIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA1IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgoJCQk8aXRlbSBpZD0iZmEiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDYiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJlYSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wNyIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImhhIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA4IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0iaGUiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDkiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJPC9ib2R5cGFydD4KCTwvdHlwZT4KCQkKCTx0eXBlIGlkPSJzd2hvcml6b250YWwiID4KCQk8Ym9keXBhcnQgaWQ9InRvcnNvIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuNCIgPgoJCQk8IS0tIDxib3VuZGFyeSB0eXBlPSJjaXJjbGUvc3BoZXJlL2JveC9jeWxpbmRlciIgcmFkaXVzPSIwLjQiIC8+IC0tPgoJCQk8aXRlbSBpZD0iYmQiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgoJCQk8aXRlbSBpZD0iYmRzIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgoJCQk8aXRlbSBpZD0iY2giICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDIiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0iY3AiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDI1IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0ic2giICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDQiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0ibGciICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDMiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0ic3MiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDMiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0id2EiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDUiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0iY2MiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDYiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0iY2EiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDciICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCTwvYm9keXBhcnQ+CgkJPGJvZHlwYXJ0IGlkPSJsZWZ0aXRlbSIgeD0iMCIgeT0iMCIgej0iLTAuMjkiIHJhZGl1cz0iMC4zIj4KCQkJPGl0ZW0gaWQ9ImxpIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJPC9ib2R5cGFydD4KICAgICAgICA8Ym9keXBhcnQgaWQ9InJpZ2h0aXRlbSIgeD0iMCIgeT0iMCIgej0iLTAuMjkiIHJhZGl1cz0iMC4zIj4KCQkJPGl0ZW0gaWQ9InJpIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJPC9ib2R5cGFydD4KCQk8Ym9keXBhcnQgaWQ9ImxlZnRhcm0iIHg9Ii0xIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuNiI+CgkJCTxpdGVtIGlkPSJsaCIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0ibGhzIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJscyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAyIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0ibGMiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMjUiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJPC9ib2R5cGFydD4KCQk8Ym9keXBhcnQgaWQ9InJpZ2h0YXJtIiB4PSIxIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuNiI+CgkJCTxpdGVtIGlkPSJyaCIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0icmhzIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJycyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAyIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0icmMiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMjUiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJPC9ib2R5cGFydD4KCQk8Ym9keXBhcnQgaWQ9ImhlYWQiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC41Ij4KCQkJPGl0ZW0gaWQ9ImhkIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgoJCQk8aXRlbSBpZD0iZmMiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDIiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJleSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMyIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImhyIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA0IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgoJCQk8aXRlbSBpZD0iaHJiIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDUiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjEiIC8+CgkJCTxpdGVtIGlkPSJmYSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wNiIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImVhIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA3IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0iaGEiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDgiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJoZSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wOSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQk8L2JvZHlwYXJ0PgoJPC90eXBlPgoKCTx0eXBlIGlkPSJzd2ltIiA+CgkJPGJvZHlwYXJ0IGlkPSJ0b3JzbyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjQiID4KCQkJPGl0ZW0gaWQ9ImJkcyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgoJCQk8aXRlbSBpZD0ic3MiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMyIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQk8L2JvZHlwYXJ0PgoJCTxib2R5cGFydCBpZD0ibGVmdGFybSIgeD0iLTEiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC42Ij4KCQkJPGl0ZW0gaWQ9ImxocyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCTwvYm9keXBhcnQ+CgkJPGJvZHlwYXJ0IGlkPSJyaWdodGFybSIgeD0iMSIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjYiPgoJCQk8aXRlbSBpZD0icmhzIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJPC9ib2R5cGFydD4KCQk8Ym9keXBhcnQgaWQ9ImhlYWQiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC41Ij4KCQkJPGl0ZW0gaWQ9ImhkIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgoJCQk8aXRlbSBpZD0iZmMiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDIiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJleSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMyIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImhyIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA0IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgoJCQk8aXRlbSBpZD0iaHJiIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDUiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjEiIC8+CgkJCTxpdGVtIGlkPSJmYSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wNiIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImVhIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA3IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0iaGEiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDgiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJoZSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wOSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQk8L2JvZHlwYXJ0PgoJPC90eXBlPgoKPC9nZW9tZXRyeT4K";Object.defineProperty(Fa,"__esModule",{value:!0});Fa.AvatarGeometryData=void 0;const Cp=ao,zE=Ma;class bs{constructor(t){this._bodypartMap=new Map,this._avatarSetMap=new Map,this._geometries=new Map,this._bodyPartItemMap=new Map;const e=new DOMParser().parseFromString(t,"text/xml");e.querySelectorAll('canvas[scale="h"] geometry').forEach(i=>{const n=this._getGeometryFromElement(i);this._geometries.set(n.id,n)}),e.querySelectorAll("avatarset").forEach(i=>{const n=i.getAttribute("id");if(n==null)return;i.querySelectorAll("bodypart").forEach(s=>{var a;const l=s.getAttribute("id");if(l!=null){const c=(a=this._avatarSetMap.get(n))!==null&&a!==void 0?a:[];this._avatarSetMap.set(n,[...c,l])}})}),e.querySelectorAll("type").forEach(i=>{const n=i.getAttribute("id");n!=null&&i.querySelectorAll("bodypart").forEach(o=>{const s=this._getBodyPartFromElement(o);if(s==null)return;const a=[];o.querySelectorAll("item").forEach(l=>{const c=this._getBodyPartItemFromElement(l);c!=null&&(a.push(c),this._bodyPartItemMap.set(`${n}_${s.id}_${c.id}`,c))}),this._bodypartMap.set(`${n}_${s.id}`,{...s,items:a})})})}static async fromUrl(t){const i=await(await fetch(t)).text();return new bs(i)}static default(){return new bs(atob(zE.geometryXml))}getBodyPartItem(t,e,i){return this._bodyPartItemMap.get(`${t}_${e}_${i}`)}getBodyPart(t,e){return this._bodypartMap.get(`${t}_${e}`)}getBodyParts(t){var e;return(e=this._avatarSetMap.get(t))!==null&&e!==void 0?e:[]}getGeometry(t){return this._geometries.get(t)}_getGeometryFromElement(t){const e=t.getAttribute("id"),i=Number(t.getAttribute("width")),n=Number(t.getAttribute("height")),o=Number(t.getAttribute("dx")),s=Number(t.getAttribute("dy"));if(e==null)throw new Error("Invalid id");return{id:e,width:i,height:n,dx:o,dy:s}}_getBodyPartFromElement(t){const e=t.getAttribute("id"),i=Number(t.getAttribute("z"));if(e!=null&&!isNaN(i))return{id:e,z:i}}_getBodyPartItemFromElement(t){const e=t.getAttribute("id"),i=Cp.getNumberFromAttribute(t.getAttribute("z")),n=Cp.getNumberFromAttribute(t.getAttribute("radius"));if(e!=null&&i!=null&&n!=null)return{id:e,z:i,radius:n}}}Fa.AvatarGeometryData=bs;var uo={};Object.defineProperty(uo,"__esModule",{value:!0});uo.LegacyAssetBundle=void 0;class VE{constructor(t){this._folderUrl=t,this._blobs=new Map,this._strings=new Map}async getBlob(t){const e=this._blobs.get(t);if(e!=null)return e;const i=`${this._folderUrl}/${t}`,n=fetch(i).then(o=>o.blob());return this._blobs.set(t,n),n}async getString(t){const e=this._strings.get(t);if(e!=null)return e;const i=`${this._folderUrl}/${t}`,n=fetch(i).then(o=>o.text());return this._strings.set(t,n),n}}uo.LegacyAssetBundle=VE;var lo={};function km(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Wm={exports:{}},Gl={exports:{}},Ap;function JE(){return Ap||(Ap=1,function(r){/**
 * @license long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/long.js for details
 */(function(t,e){typeof km=="function"&&r&&r.exports?r.exports=e():(t.dcodeIO=t.dcodeIO||{}).Long=e()})(k,function(){function t(x,F,R){this.low=x|0,this.high=F|0,this.unsigned=!!R}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1});function e(x){return(x&&x.__isLong__)===!0}t.isLong=e;var i={},n={};function o(x,F){var R,Z,H;return F?(x>>>=0,(H=0<=x&&x<256)&&(Z=n[x],Z)?Z:(R=a(x,(x|0)<0?-1:0,!0),H&&(n[x]=R),R)):(x|=0,(H=-128<=x&&x<128)&&(Z=i[x],Z)?Z:(R=a(x,x<0?-1:0,!1),H&&(i[x]=R),R))}t.fromInt=o;function s(x,F){if(isNaN(x)||!isFinite(x))return F?v:y;if(F){if(x<0)return v;if(x>=f)return P}else{if(x<=-I)return E;if(x+1>=I)return b}return x<0?s(-x,F).neg():a(x%h|0,x/h|0,F)}t.fromNumber=s;function a(x,F,R){return new t(x,F,R)}t.fromBits=a;var l=Math.pow;function c(x,F,R){if(x.length===0)throw Error("empty string");if(x==="NaN"||x==="Infinity"||x==="+Infinity"||x==="-Infinity")return y;if(typeof F=="number"?(R=F,F=!1):F=!!F,R=R||10,R<2||36<R)throw RangeError("radix");var Z;if((Z=x.indexOf("-"))>0)throw Error("interior hyphen");if(Z===0)return c(x.substring(1),F,R).neg();for(var H=s(l(R,8)),W=y,U=0;U<x.length;U+=8){var X=Math.min(8,x.length-U),ot=parseInt(x.substring(U,U+X),R);if(X<8){var lt=s(l(R,X));W=W.mul(lt).add(s(ot))}else W=W.mul(H),W=W.add(s(ot))}return W.unsigned=F,W}t.fromString=c;function d(x){return x instanceof t?x:typeof x=="number"?s(x):typeof x=="string"?c(x):a(x.low,x.high,x.unsigned)}t.fromValue=d;var g=65536,u=1<<24,h=g*g,f=h*h,I=f/2,m=o(u),y=o(0);t.ZERO=y;var v=o(0,!0);t.UZERO=v;var p=o(1);t.ONE=p;var _=o(1,!0);t.UONE=_;var A=o(-1);t.NEG_ONE=A;var b=a(-1,2147483647,!1);t.MAX_VALUE=b;var P=a(-1,-1,!0);t.MAX_UNSIGNED_VALUE=P;var E=a(0,-2147483648,!1);t.MIN_VALUE=E;var C=t.prototype;return C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},C.toString=function(F){if(F=F||10,F<2||36<F)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(E)){var R=s(F),Z=this.div(R),H=Z.mul(R).sub(this);return Z.toString(F)+H.toInt().toString(F)}else return"-"+this.neg().toString(F);for(var W=s(l(F,6),this.unsigned),U=this,X="";;){var ot=U.div(W),lt=U.sub(ot.mul(W)).toInt()>>>0,et=lt.toString(F);if(U=ot,U.isZero())return et+X;for(;et.length<6;)et="0"+et;X=""+et+X}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(E)?64:this.neg().getNumBitsAbs();for(var F=this.high!=0?this.high:this.low,R=31;R>0&&!(F&1<<R);R--);return this.high!=0?R+33:R+1},C.isZero=function(){return this.high===0&&this.low===0},C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return(this.low&1)===1},C.isEven=function(){return(this.low&1)===0},C.equals=function(F){return e(F)||(F=d(F)),this.unsigned!==F.unsigned&&this.high>>>31===1&&F.high>>>31===1?!1:this.high===F.high&&this.low===F.low},C.eq=C.equals,C.notEquals=function(F){return!this.eq(F)},C.neq=C.notEquals,C.lessThan=function(F){return this.comp(F)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(F){return this.comp(F)<=0},C.lte=C.lessThanOrEqual,C.greaterThan=function(F){return this.comp(F)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(F){return this.comp(F)>=0},C.gte=C.greaterThanOrEqual,C.compare=function(F){if(e(F)||(F=d(F)),this.eq(F))return 0;var R=this.isNegative(),Z=F.isNegative();return R&&!Z?-1:!R&&Z?1:this.unsigned?F.high>>>0>this.high>>>0||F.high===this.high&&F.low>>>0>this.low>>>0?-1:1:this.sub(F).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(E)?E:this.not().add(p)},C.neg=C.negate,C.add=function(F){e(F)||(F=d(F));var R=this.high>>>16,Z=this.high&65535,H=this.low>>>16,W=this.low&65535,U=F.high>>>16,X=F.high&65535,ot=F.low>>>16,lt=F.low&65535,et=0,Q=0,it=0,at=0;return at+=W+lt,it+=at>>>16,at&=65535,it+=H+ot,Q+=it>>>16,it&=65535,Q+=Z+X,et+=Q>>>16,Q&=65535,et+=R+U,et&=65535,a(it<<16|at,et<<16|Q,this.unsigned)},C.subtract=function(F){return e(F)||(F=d(F)),this.add(F.neg())},C.sub=C.subtract,C.multiply=function(F){if(this.isZero()||(e(F)||(F=d(F)),F.isZero()))return y;if(this.eq(E))return F.isOdd()?E:y;if(F.eq(E))return this.isOdd()?E:y;if(this.isNegative())return F.isNegative()?this.neg().mul(F.neg()):this.neg().mul(F).neg();if(F.isNegative())return this.mul(F.neg()).neg();if(this.lt(m)&&F.lt(m))return s(this.toNumber()*F.toNumber(),this.unsigned);var R=this.high>>>16,Z=this.high&65535,H=this.low>>>16,W=this.low&65535,U=F.high>>>16,X=F.high&65535,ot=F.low>>>16,lt=F.low&65535,et=0,Q=0,it=0,at=0;return at+=W*lt,it+=at>>>16,at&=65535,it+=H*lt,Q+=it>>>16,it&=65535,it+=W*ot,Q+=it>>>16,it&=65535,Q+=Z*lt,et+=Q>>>16,Q&=65535,Q+=H*ot,et+=Q>>>16,Q&=65535,Q+=W*X,et+=Q>>>16,Q&=65535,et+=R*lt+Z*ot+H*X+W*U,et&=65535,a(it<<16|at,et<<16|Q,this.unsigned)},C.mul=C.multiply,C.divide=function(F){if(e(F)||(F=d(F)),F.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?v:y;var R,Z,H;if(this.unsigned){if(F.unsigned||(F=F.toUnsigned()),F.gt(this))return v;if(F.gt(this.shru(1)))return _;H=v}else{if(this.eq(E)){if(F.eq(p)||F.eq(A))return E;if(F.eq(E))return p;var W=this.shr(1);return R=W.div(F).shl(1),R.eq(y)?F.isNegative()?p:A:(Z=this.sub(F.mul(R)),H=R.add(Z.div(F)),H)}else if(F.eq(E))return this.unsigned?v:y;if(this.isNegative())return F.isNegative()?this.neg().div(F.neg()):this.neg().div(F).neg();if(F.isNegative())return this.div(F.neg()).neg();H=y}for(Z=this;Z.gte(F);){R=Math.max(1,Math.floor(Z.toNumber()/F.toNumber()));for(var U=Math.ceil(Math.log(R)/Math.LN2),X=U<=48?1:l(2,U-48),ot=s(R),lt=ot.mul(F);lt.isNegative()||lt.gt(Z);)R-=X,ot=s(R,this.unsigned),lt=ot.mul(F);ot.isZero()&&(ot=p),H=H.add(ot),Z=Z.sub(lt)}return H},C.div=C.divide,C.modulo=function(F){return e(F)||(F=d(F)),this.sub(this.div(F).mul(F))},C.mod=C.modulo,C.not=function(){return a(~this.low,~this.high,this.unsigned)},C.and=function(F){return e(F)||(F=d(F)),a(this.low&F.low,this.high&F.high,this.unsigned)},C.or=function(F){return e(F)||(F=d(F)),a(this.low|F.low,this.high|F.high,this.unsigned)},C.xor=function(F){return e(F)||(F=d(F)),a(this.low^F.low,this.high^F.high,this.unsigned)},C.shiftLeft=function(F){return e(F)&&(F=F.toInt()),(F&=63)===0?this:F<32?a(this.low<<F,this.high<<F|this.low>>>32-F,this.unsigned):a(0,this.low<<F-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(F){return e(F)&&(F=F.toInt()),(F&=63)===0?this:F<32?a(this.low>>>F|this.high<<32-F,this.high>>F,this.unsigned):a(this.high>>F-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(F){if(e(F)&&(F=F.toInt()),F&=63,F===0)return this;var R=this.high;if(F<32){var Z=this.low;return a(Z>>>F|R<<32-F,R>>>F,this.unsigned)}else return F===32?a(R,0,this.unsigned):a(R>>>F-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?a(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:a(this.low,this.high,!0)},C.toBytes=function(x){return x?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var x=this.high,F=this.low;return[F&255,F>>>8&255,F>>>16&255,F>>>24&255,x&255,x>>>8&255,x>>>16&255,x>>>24&255]},C.toBytesBE=function(){var x=this.high,F=this.low;return[x>>>24&255,x>>>16&255,x>>>8&255,x&255,F>>>24&255,F>>>16&255,F>>>8&255,F&255]},t})}(Gl)),Gl.exports}(function(r){/**
 * @license bytebuffer.js (c) 2015 Daniel Wirtz <dcode@dcode.io>
 * Backing buffer: ArrayBuffer, Accessor: Uint8Array
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/bytebuffer.js for details
 */(function(t,e){typeof km=="function"&&r&&r.exports?r.exports=function(){var i;try{i=JE()}catch{}return e(i)}():(t.dcodeIO=t.dcodeIO||{}).ByteBuffer=e(t.dcodeIO.Long)})(k,function(t){var e=function(u,h,f){if(typeof u>"u"&&(u=e.DEFAULT_CAPACITY),typeof h>"u"&&(h=e.DEFAULT_ENDIAN),typeof f>"u"&&(f=e.DEFAULT_NOASSERT),!f){if(u=u|0,u<0)throw RangeError("Illegal capacity");h=!!h,f=!!f}this.buffer=u===0?n:new ArrayBuffer(u),this.view=u===0?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=u,this.littleEndian=h,this.noAssert=f};e.VERSION="5.0.1",e.LITTLE_ENDIAN=!0,e.BIG_ENDIAN=!1,e.DEFAULT_CAPACITY=16,e.DEFAULT_ENDIAN=e.BIG_ENDIAN,e.DEFAULT_NOASSERT=!1,e.Long=t||null;var i=e.prototype;i.__isByteBuffer__,Object.defineProperty(i,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var n=new ArrayBuffer(0),o=String.fromCharCode;function s(u){var h=0;return function(){return h<u.length?u.charCodeAt(h++):null}}function a(){var u=[],h=[];return function(){if(arguments.length===0)return h.join("")+o.apply(String,u);u.length+arguments.length>1024&&(h.push(o.apply(String,u)),u.length=0),Array.prototype.push.apply(u,arguments)}}e.accessor=function(){return Uint8Array},e.allocate=function(u,h,f){return new e(u,h,f)},e.concat=function(u,h,f,I){(typeof h=="boolean"||typeof h!="string")&&(I=f,f=h,h=void 0);for(var m=0,y=0,v=u.length,p;y<v;++y)e.isByteBuffer(u[y])||(u[y]=e.wrap(u[y],h)),p=u[y].limit-u[y].offset,p>0&&(m+=p);if(m===0)return new e(0,f,I);var _=new e(m,f,I),A;for(y=0;y<v;)A=u[y++],p=A.limit-A.offset,!(p<=0)&&(_.view.set(A.view.subarray(A.offset,A.limit),_.offset),_.offset+=p);return _.limit=_.offset,_.offset=0,_},e.isByteBuffer=function(u){return(u&&u.__isByteBuffer__)===!0},e.type=function(){return ArrayBuffer},e.wrap=function(u,h,f,I){if(typeof h!="string"&&(I=f,f=h,h=void 0),typeof u=="string")switch(typeof h>"u"&&(h="utf8"),h){case"base64":return e.fromBase64(u,f);case"hex":return e.fromHex(u,f);case"binary":return e.fromBinary(u,f);case"utf8":return e.fromUTF8(u,f);case"debug":return e.fromDebug(u,f);default:throw Error("Unsupported encoding: "+h)}if(u===null||typeof u!="object")throw TypeError("Illegal buffer");var m;if(e.isByteBuffer(u))return m=i.clone.call(u),m.markedOffset=-1,m;if(u instanceof Uint8Array)m=new e(0,f,I),u.length>0&&(m.buffer=u.buffer,m.offset=u.byteOffset,m.limit=u.byteOffset+u.byteLength,m.view=new Uint8Array(u.buffer));else if(u instanceof ArrayBuffer)m=new e(0,f,I),u.byteLength>0&&(m.buffer=u,m.offset=0,m.limit=u.byteLength,m.view=u.byteLength>0?new Uint8Array(u):null);else if(Object.prototype.toString.call(u)==="[object Array]"){m=new e(u.length,f,I),m.limit=u.length;for(var y=0;y<u.length;++y)m.view[y]=u[y]}else throw TypeError("Illegal buffer");return m},i.writeBitSet=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(!(u instanceof Array))throw TypeError("Illegal BitSet: Not an array");if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}var I=h,m=u.length,y=m>>3,v=0,p;for(h+=this.writeVarint32(m,h);y--;)p=!!u[v++]&1|(!!u[v++]&1)<<1|(!!u[v++]&1)<<2|(!!u[v++]&1)<<3|(!!u[v++]&1)<<4|(!!u[v++]&1)<<5|(!!u[v++]&1)<<6|(!!u[v++]&1)<<7,this.writeByte(p,h++);if(v<m){var _=0;for(p=0;v<m;)p=p|(!!u[v++]&1)<<_++;this.writeByte(p,h++)}return f?(this.offset=h,this):h-I},i.readBitSet=function(u){var h=typeof u>"u";h&&(u=this.offset);var f=this.readVarint32(u),I=f.value,m=I>>3,y=0,v=[],p;for(u+=f.length;m--;)p=this.readByte(u++),v[y++]=!!(p&1),v[y++]=!!(p&2),v[y++]=!!(p&4),v[y++]=!!(p&8),v[y++]=!!(p&16),v[y++]=!!(p&32),v[y++]=!!(p&64),v[y++]=!!(p&128);if(y<I){var _=0;for(p=this.readByte(u++);y<I;)v[y++]=!!(p>>_++&1)}return h&&(this.offset=u),v},i.readBytes=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+u>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+"+u+") <= "+this.buffer.byteLength)}var I=this.slice(h,h+u);return f&&(this.offset+=u),I},i.writeBytes=i.append,i.writeInt8=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal value: "+u+" (not an integer)");if(u|=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}h+=1;var I=this.buffer.byteLength;return h>I&&this.resize((I*=2)>h?I:h),h-=1,this.view[h]=u,f&&(this.offset+=1),this},i.writeByte=i.writeInt8,i.readInt8=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+1) <= "+this.buffer.byteLength)}var f=this.view[u];return(f&128)===128&&(f=-(255-f+1)),h&&(this.offset+=1),f},i.readByte=i.readInt8,i.writeUint8=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal value: "+u+" (not an integer)");if(u>>>=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}h+=1;var I=this.buffer.byteLength;return h>I&&this.resize((I*=2)>h?I:h),h-=1,this.view[h]=u,f&&(this.offset+=1),this},i.writeUInt8=i.writeUint8,i.readUint8=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+1) <= "+this.buffer.byteLength)}var f=this.view[u];return h&&(this.offset+=1),f},i.readUInt8=i.readUint8,i.writeInt16=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal value: "+u+" (not an integer)");if(u|=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}h+=2;var I=this.buffer.byteLength;return h>I&&this.resize((I*=2)>h?I:h),h-=2,this.littleEndian?(this.view[h+1]=(u&65280)>>>8,this.view[h]=u&255):(this.view[h]=(u&65280)>>>8,this.view[h+1]=u&255),f&&(this.offset+=2),this},i.writeShort=i.writeInt16,i.readInt16=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+2) <= "+this.buffer.byteLength)}var f=0;return this.littleEndian?(f=this.view[u],f|=this.view[u+1]<<8):(f=this.view[u]<<8,f|=this.view[u+1]),(f&32768)===32768&&(f=-(65535-f+1)),h&&(this.offset+=2),f},i.readShort=i.readInt16,i.writeUint16=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal value: "+u+" (not an integer)");if(u>>>=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}h+=2;var I=this.buffer.byteLength;return h>I&&this.resize((I*=2)>h?I:h),h-=2,this.littleEndian?(this.view[h+1]=(u&65280)>>>8,this.view[h]=u&255):(this.view[h]=(u&65280)>>>8,this.view[h+1]=u&255),f&&(this.offset+=2),this},i.writeUInt16=i.writeUint16,i.readUint16=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+2) <= "+this.buffer.byteLength)}var f=0;return this.littleEndian?(f=this.view[u],f|=this.view[u+1]<<8):(f=this.view[u]<<8,f|=this.view[u+1]),h&&(this.offset+=2),f},i.readUInt16=i.readUint16,i.writeInt32=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal value: "+u+" (not an integer)");if(u|=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}h+=4;var I=this.buffer.byteLength;return h>I&&this.resize((I*=2)>h?I:h),h-=4,this.littleEndian?(this.view[h+3]=u>>>24&255,this.view[h+2]=u>>>16&255,this.view[h+1]=u>>>8&255,this.view[h]=u&255):(this.view[h]=u>>>24&255,this.view[h+1]=u>>>16&255,this.view[h+2]=u>>>8&255,this.view[h+3]=u&255),f&&(this.offset+=4),this},i.writeInt=i.writeInt32,i.readInt32=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+4) <= "+this.buffer.byteLength)}var f=0;return this.littleEndian?(f=this.view[u+2]<<16,f|=this.view[u+1]<<8,f|=this.view[u],f+=this.view[u+3]<<24>>>0):(f=this.view[u+1]<<16,f|=this.view[u+2]<<8,f|=this.view[u+3],f+=this.view[u]<<24>>>0),f|=0,h&&(this.offset+=4),f},i.readInt=i.readInt32,i.writeUint32=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal value: "+u+" (not an integer)");if(u>>>=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}h+=4;var I=this.buffer.byteLength;return h>I&&this.resize((I*=2)>h?I:h),h-=4,this.littleEndian?(this.view[h+3]=u>>>24&255,this.view[h+2]=u>>>16&255,this.view[h+1]=u>>>8&255,this.view[h]=u&255):(this.view[h]=u>>>24&255,this.view[h+1]=u>>>16&255,this.view[h+2]=u>>>8&255,this.view[h+3]=u&255),f&&(this.offset+=4),this},i.writeUInt32=i.writeUint32,i.readUint32=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+4) <= "+this.buffer.byteLength)}var f=0;return this.littleEndian?(f=this.view[u+2]<<16,f|=this.view[u+1]<<8,f|=this.view[u],f+=this.view[u+3]<<24>>>0):(f=this.view[u+1]<<16,f|=this.view[u+2]<<8,f|=this.view[u+3],f+=this.view[u]<<24>>>0),h&&(this.offset+=4),f},i.readUInt32=i.readUint32,t&&(i.writeInt64=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u=="number")u=t.fromNumber(u);else if(typeof u=="string")u=t.fromString(u);else if(!(u&&u instanceof t))throw TypeError("Illegal value: "+u+" (not an integer or Long)");if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}typeof u=="number"?u=t.fromNumber(u):typeof u=="string"&&(u=t.fromString(u)),h+=8;var I=this.buffer.byteLength;h>I&&this.resize((I*=2)>h?I:h),h-=8;var m=u.low,y=u.high;return this.littleEndian?(this.view[h+3]=m>>>24&255,this.view[h+2]=m>>>16&255,this.view[h+1]=m>>>8&255,this.view[h]=m&255,h+=4,this.view[h+3]=y>>>24&255,this.view[h+2]=y>>>16&255,this.view[h+1]=y>>>8&255,this.view[h]=y&255):(this.view[h]=y>>>24&255,this.view[h+1]=y>>>16&255,this.view[h+2]=y>>>8&255,this.view[h+3]=y&255,h+=4,this.view[h]=m>>>24&255,this.view[h+1]=m>>>16&255,this.view[h+2]=m>>>8&255,this.view[h+3]=m&255),f&&(this.offset+=8),this},i.writeLong=i.writeInt64,i.readInt64=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+8) <= "+this.buffer.byteLength)}var f=0,I=0;this.littleEndian?(f=this.view[u+2]<<16,f|=this.view[u+1]<<8,f|=this.view[u],f+=this.view[u+3]<<24>>>0,u+=4,I=this.view[u+2]<<16,I|=this.view[u+1]<<8,I|=this.view[u],I+=this.view[u+3]<<24>>>0):(I=this.view[u+1]<<16,I|=this.view[u+2]<<8,I|=this.view[u+3],I+=this.view[u]<<24>>>0,u+=4,f=this.view[u+1]<<16,f|=this.view[u+2]<<8,f|=this.view[u+3],f+=this.view[u]<<24>>>0);var m=new t(f,I,!1);return h&&(this.offset+=8),m},i.readLong=i.readInt64,i.writeUint64=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u=="number")u=t.fromNumber(u);else if(typeof u=="string")u=t.fromString(u);else if(!(u&&u instanceof t))throw TypeError("Illegal value: "+u+" (not an integer or Long)");if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}typeof u=="number"?u=t.fromNumber(u):typeof u=="string"&&(u=t.fromString(u)),h+=8;var I=this.buffer.byteLength;h>I&&this.resize((I*=2)>h?I:h),h-=8;var m=u.low,y=u.high;return this.littleEndian?(this.view[h+3]=m>>>24&255,this.view[h+2]=m>>>16&255,this.view[h+1]=m>>>8&255,this.view[h]=m&255,h+=4,this.view[h+3]=y>>>24&255,this.view[h+2]=y>>>16&255,this.view[h+1]=y>>>8&255,this.view[h]=y&255):(this.view[h]=y>>>24&255,this.view[h+1]=y>>>16&255,this.view[h+2]=y>>>8&255,this.view[h+3]=y&255,h+=4,this.view[h]=m>>>24&255,this.view[h+1]=m>>>16&255,this.view[h+2]=m>>>8&255,this.view[h+3]=m&255),f&&(this.offset+=8),this},i.writeUInt64=i.writeUint64,i.readUint64=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+8) <= "+this.buffer.byteLength)}var f=0,I=0;this.littleEndian?(f=this.view[u+2]<<16,f|=this.view[u+1]<<8,f|=this.view[u],f+=this.view[u+3]<<24>>>0,u+=4,I=this.view[u+2]<<16,I|=this.view[u+1]<<8,I|=this.view[u],I+=this.view[u+3]<<24>>>0):(I=this.view[u+1]<<16,I|=this.view[u+2]<<8,I|=this.view[u+3],I+=this.view[u]<<24>>>0,u+=4,f=this.view[u+1]<<16,f|=this.view[u+2]<<8,f|=this.view[u+3],f+=this.view[u]<<24>>>0);var m=new t(f,I,!0);return h&&(this.offset+=8),m},i.readUInt64=i.readUint64);function l(u,h,f,I,m){var y,v,p=m*8-I-1,_=(1<<p)-1,A=_>>1,b=-7,P=f?m-1:0,E=f?-1:1,C=u[h+P];for(P+=E,y=C&(1<<-b)-1,C>>=-b,b+=p;b>0;y=y*256+u[h+P],P+=E,b-=8);for(v=y&(1<<-b)-1,y>>=-b,b+=I;b>0;v=v*256+u[h+P],P+=E,b-=8);if(y===0)y=1-A;else{if(y===_)return v?NaN:(C?-1:1)*(1/0);v=v+Math.pow(2,I),y=y-A}return(C?-1:1)*v*Math.pow(2,y-I)}function c(u,h,f,I,m,y){var v,p,_,A=y*8-m-1,b=(1<<A)-1,P=b>>1,E=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,C=I?0:y-1,x=I?1:-1,F=h<0||h===0&&1/h<0?1:0;for(h=Math.abs(h),isNaN(h)||h===1/0?(p=isNaN(h)?1:0,v=b):(v=Math.floor(Math.log(h)/Math.LN2),h*(_=Math.pow(2,-v))<1&&(v--,_*=2),v+P>=1?h+=E/_:h+=E*Math.pow(2,1-P),h*_>=2&&(v++,_/=2),v+P>=b?(p=0,v=b):v+P>=1?(p=(h*_-1)*Math.pow(2,m),v=v+P):(p=h*Math.pow(2,P-1)*Math.pow(2,m),v=0));m>=8;u[f+C]=p&255,C+=x,p/=256,m-=8);for(v=v<<m|p,A+=m;A>0;u[f+C]=v&255,C+=x,v/=256,A-=8);u[f+C-x]|=F*128}i.writeFloat32=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="number")throw TypeError("Illegal value: "+u+" (not a number)");if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}h+=4;var I=this.buffer.byteLength;return h>I&&this.resize((I*=2)>h?I:h),h-=4,c(this.view,u,h,this.littleEndian,23,4),f&&(this.offset+=4),this},i.writeFloat=i.writeFloat32,i.readFloat32=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+4) <= "+this.buffer.byteLength)}var f=l(this.view,u,this.littleEndian,23,4);return h&&(this.offset+=4),f},i.readFloat=i.readFloat32,i.writeFloat64=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="number")throw TypeError("Illegal value: "+u+" (not a number)");if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}h+=8;var I=this.buffer.byteLength;return h>I&&this.resize((I*=2)>h?I:h),h-=8,c(this.view,u,h,this.littleEndian,52,8),f&&(this.offset+=8),this},i.writeDouble=i.writeFloat64,i.readFloat64=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+8) <= "+this.buffer.byteLength)}var f=l(this.view,u,this.littleEndian,52,8);return h&&(this.offset+=8),f},i.readDouble=i.readFloat64,e.MAX_VARINT32_BYTES=5,e.calculateVarint32=function(u){return u=u>>>0,u<128?1:u<16384?2:u<1<<21?3:u<1<<28?4:5},e.zigZagEncode32=function(u){return((u|=0)<<1^u>>31)>>>0},e.zigZagDecode32=function(u){return u>>>1^-(u&1)|0},i.writeVarint32=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal value: "+u+" (not an integer)");if(u|=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}var I=e.calculateVarint32(u),m;h+=I;var y=this.buffer.byteLength;for(h>y&&this.resize((y*=2)>h?y:h),h-=I,u>>>=0;u>=128;)m=u&127|128,this.view[h++]=m,u>>>=7;return this.view[h++]=u,f?(this.offset=h,this):I},i.writeVarint32ZigZag=function(u,h){return this.writeVarint32(e.zigZagEncode32(u),h)},i.readVarint32=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+1) <= "+this.buffer.byteLength)}var f=0,I=0,m;do{if(!this.noAssert&&u>this.limit){var y=Error("Truncated");throw y.truncated=!0,y}m=this.view[u++],f<5&&(I|=(m&127)<<7*f),++f}while(m&128);return I|=0,h?(this.offset=u,I):{value:I,length:f}},i.readVarint32ZigZag=function(u){var h=this.readVarint32(u);return typeof h=="object"?h.value=e.zigZagDecode32(h.value):h=e.zigZagDecode32(h),h},t&&(e.MAX_VARINT64_BYTES=10,e.calculateVarint64=function(u){typeof u=="number"?u=t.fromNumber(u):typeof u=="string"&&(u=t.fromString(u));var h=u.toInt()>>>0,f=u.shiftRightUnsigned(28).toInt()>>>0,I=u.shiftRightUnsigned(56).toInt()>>>0;return I==0?f==0?h<16384?h<128?1:2:h<1<<21?3:4:f<16384?f<128?5:6:f<1<<21?7:8:I<128?9:10},e.zigZagEncode64=function(u){return typeof u=="number"?u=t.fromNumber(u,!1):typeof u=="string"?u=t.fromString(u,!1):u.unsigned!==!1&&(u=u.toSigned()),u.shiftLeft(1).xor(u.shiftRight(63)).toUnsigned()},e.zigZagDecode64=function(u){return typeof u=="number"?u=t.fromNumber(u,!1):typeof u=="string"?u=t.fromString(u,!1):u.unsigned!==!1&&(u=u.toSigned()),u.shiftRightUnsigned(1).xor(u.and(t.ONE).toSigned().negate()).toSigned()},i.writeVarint64=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u=="number")u=t.fromNumber(u);else if(typeof u=="string")u=t.fromString(u);else if(!(u&&u instanceof t))throw TypeError("Illegal value: "+u+" (not an integer or Long)");if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}typeof u=="number"?u=t.fromNumber(u,!1):typeof u=="string"?u=t.fromString(u,!1):u.unsigned!==!1&&(u=u.toSigned());var I=e.calculateVarint64(u),m=u.toInt()>>>0,y=u.shiftRightUnsigned(28).toInt()>>>0,v=u.shiftRightUnsigned(56).toInt()>>>0;h+=I;var p=this.buffer.byteLength;switch(h>p&&this.resize((p*=2)>h?p:h),h-=I,I){case 10:this.view[h+9]=v>>>7&1;case 9:this.view[h+8]=I!==9?v|128:v&127;case 8:this.view[h+7]=I!==8?y>>>21|128:y>>>21&127;case 7:this.view[h+6]=I!==7?y>>>14|128:y>>>14&127;case 6:this.view[h+5]=I!==6?y>>>7|128:y>>>7&127;case 5:this.view[h+4]=I!==5?y|128:y&127;case 4:this.view[h+3]=I!==4?m>>>21|128:m>>>21&127;case 3:this.view[h+2]=I!==3?m>>>14|128:m>>>14&127;case 2:this.view[h+1]=I!==2?m>>>7|128:m>>>7&127;case 1:this.view[h]=I!==1?m|128:m&127}return f?(this.offset+=I,this):I},i.writeVarint64ZigZag=function(u,h){return this.writeVarint64(e.zigZagEncode64(u),h)},i.readVarint64=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+1) <= "+this.buffer.byteLength)}var f=u,I=0,m=0,y=0,v=0;if(v=this.view[u++],I=v&127,v&128&&(v=this.view[u++],I|=(v&127)<<7,(v&128||this.noAssert&&typeof v>"u")&&(v=this.view[u++],I|=(v&127)<<14,(v&128||this.noAssert&&typeof v>"u")&&(v=this.view[u++],I|=(v&127)<<21,(v&128||this.noAssert&&typeof v>"u")&&(v=this.view[u++],m=v&127,(v&128||this.noAssert&&typeof v>"u")&&(v=this.view[u++],m|=(v&127)<<7,(v&128||this.noAssert&&typeof v>"u")&&(v=this.view[u++],m|=(v&127)<<14,(v&128||this.noAssert&&typeof v>"u")&&(v=this.view[u++],m|=(v&127)<<21,(v&128||this.noAssert&&typeof v>"u")&&(v=this.view[u++],y=v&127,(v&128||this.noAssert&&typeof v>"u")&&(v=this.view[u++],y|=(v&127)<<7,v&128||this.noAssert&&typeof v>"u"))))))))))throw Error("Buffer overrun");var p=t.fromBits(I|m<<28,m>>>4|y<<24,!1);return h?(this.offset=u,p):{value:p,length:u-f}},i.readVarint64ZigZag=function(u){var h=this.readVarint64(u);return h&&h.value instanceof t?h.value=e.zigZagDecode64(h.value):h=e.zigZagDecode64(h),h}),i.writeCString=function(u,h){var f=typeof h>"u";f&&(h=this.offset);var I,m=u.length;if(!this.noAssert){if(typeof u!="string")throw TypeError("Illegal str: Not a string");for(I=0;I<m;++I)if(u.charCodeAt(I)===0)throw RangeError("Illegal str: Contains NULL-characters");if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}m=g.calculateUTF16asUTF8(s(u))[1],h+=m+1;var y=this.buffer.byteLength;return h>y&&this.resize((y*=2)>h?y:h),h-=m+1,g.encodeUTF16toUTF8(s(u),function(v){this.view[h++]=v}.bind(this)),this.view[h++]=0,f?(this.offset=h,this):m},i.readCString=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+1) <= "+this.buffer.byteLength)}var f=u,I,m=-1;return g.decodeUTF8toUTF16(function(){if(m===0)return null;if(u>=this.limit)throw RangeError("Illegal range: Truncated data, "+u+" < "+this.limit);return m=this.view[u++],m===0?null:m}.bind(this),I=a(),!0),h?(this.offset=u,I()):{string:I(),length:u-f}},i.writeIString=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="string")throw TypeError("Illegal str: Not a string");if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}var I=h,m;m=g.calculateUTF16asUTF8(s(u),this.noAssert)[1],h+=4+m;var y=this.buffer.byteLength;if(h>y&&this.resize((y*=2)>h?y:h),h-=4+m,this.littleEndian?(this.view[h+3]=m>>>24&255,this.view[h+2]=m>>>16&255,this.view[h+1]=m>>>8&255,this.view[h]=m&255):(this.view[h]=m>>>24&255,this.view[h+1]=m>>>16&255,this.view[h+2]=m>>>8&255,this.view[h+3]=m&255),h+=4,g.encodeUTF16toUTF8(s(u),function(v){this.view[h++]=v}.bind(this)),h!==I+4+m)throw RangeError("Illegal range: Truncated data, "+h+" == "+(h+4+m));return f?(this.offset=h,this):h-I},i.readIString=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+4) <= "+this.buffer.byteLength)}var f=u,I=this.readUint32(u),m=this.readUTF8String(I,e.METRICS_BYTES,u+=4);return u+=m.length,h?(this.offset=u,m.string):{string:m.string,length:u-f}},e.METRICS_CHARS="c",e.METRICS_BYTES="b",i.writeUTF8String=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}var I,m=h;I=g.calculateUTF16asUTF8(s(u))[1],h+=I;var y=this.buffer.byteLength;return h>y&&this.resize((y*=2)>h?y:h),h-=I,g.encodeUTF16toUTF8(s(u),function(v){this.view[h++]=v}.bind(this)),f?(this.offset=h,this):h-m},i.writeString=i.writeUTF8String,e.calculateUTF8Chars=function(u){return g.calculateUTF16asUTF8(s(u))[0]},e.calculateUTF8Bytes=function(u){return g.calculateUTF16asUTF8(s(u))[1]},e.calculateString=e.calculateUTF8Bytes,i.readUTF8String=function(u,h,f){typeof h=="number"&&(f=h,h=void 0);var I=typeof f>"u";if(I&&(f=this.offset),typeof h>"u"&&(h=e.METRICS_CHARS),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal length: "+u+" (not an integer)");if(u|=0,typeof f!="number"||f%1!==0)throw TypeError("Illegal offset: "+f+" (not an integer)");if(f>>>=0,f<0||f+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+f+" (+0) <= "+this.buffer.byteLength)}var m=0,y=f,v;if(h===e.METRICS_CHARS){if(v=a(),g.decodeUTF8(function(){return m<u&&f<this.limit?this.view[f++]:null}.bind(this),function(_){++m,g.UTF8toUTF16(_,v)}),m!==u)throw RangeError("Illegal range: Truncated data, "+m+" == "+u);return I?(this.offset=f,v()):{string:v(),length:f-y}}else if(h===e.METRICS_BYTES){if(!this.noAssert){if(typeof f!="number"||f%1!==0)throw TypeError("Illegal offset: "+f+" (not an integer)");if(f>>>=0,f<0||f+u>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+f+" (+"+u+") <= "+this.buffer.byteLength)}var p=f+u;if(g.decodeUTF8toUTF16(function(){return f<p?this.view[f++]:null}.bind(this),v=a(),this.noAssert),f!==p)throw RangeError("Illegal range: Truncated data, "+f+" == "+p);return I?(this.offset=f,v()):{string:v(),length:f-y}}else throw TypeError("Unsupported metrics: "+h)},i.readString=i.readUTF8String,i.writeVString=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="string")throw TypeError("Illegal str: Not a string");if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}var I=h,m,y;m=g.calculateUTF16asUTF8(s(u),this.noAssert)[1],y=e.calculateVarint32(m),h+=y+m;var v=this.buffer.byteLength;if(h>v&&this.resize((v*=2)>h?v:h),h-=y+m,h+=this.writeVarint32(m,h),g.encodeUTF16toUTF8(s(u),function(p){this.view[h++]=p}.bind(this)),h!==I+m+y)throw RangeError("Illegal range: Truncated data, "+h+" == "+(h+m+y));return f?(this.offset=h,this):h-I},i.readVString=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+1) <= "+this.buffer.byteLength)}var f=u,I=this.readVarint32(u),m=this.readUTF8String(I.value,e.METRICS_BYTES,u+=I.length);return u+=m.length,h?(this.offset=u,m.string):{string:m.string,length:u-f}},i.append=function(u,h,f){(typeof h=="number"||typeof h!="string")&&(f=h,h=void 0);var I=typeof f>"u";if(I&&(f=this.offset),!this.noAssert){if(typeof f!="number"||f%1!==0)throw TypeError("Illegal offset: "+f+" (not an integer)");if(f>>>=0,f<0||f+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+f+" (+0) <= "+this.buffer.byteLength)}u instanceof e||(u=e.wrap(u,h));var m=u.limit-u.offset;if(m<=0)return this;f+=m;var y=this.buffer.byteLength;return f>y&&this.resize((y*=2)>f?y:f),f-=m,this.view.set(u.view.subarray(u.offset,u.limit),f),u.offset+=m,I&&(this.offset+=m),this},i.appendTo=function(u,h){return u.append(this,h),this},i.assert=function(u){return this.noAssert=!u,this},i.capacity=function(){return this.buffer.byteLength},i.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},i.clone=function(u){var h=new e(0,this.littleEndian,this.noAssert);return u?(h.buffer=new ArrayBuffer(this.buffer.byteLength),h.view=new Uint8Array(h.buffer)):(h.buffer=this.buffer,h.view=this.view),h.offset=this.offset,h.markedOffset=this.markedOffset,h.limit=this.limit,h},i.compact=function(u,h){if(typeof u>"u"&&(u=this.offset),typeof h>"u"&&(h=this.limit),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal begin: Not an integer");if(u>>>=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal end: Not an integer");if(h>>>=0,u<0||u>h||h>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+u+" <= "+h+" <= "+this.buffer.byteLength)}if(u===0&&h===this.buffer.byteLength)return this;var f=h-u;if(f===0)return this.buffer=n,this.view=null,this.markedOffset>=0&&(this.markedOffset-=u),this.offset=0,this.limit=0,this;var I=new ArrayBuffer(f),m=new Uint8Array(I);return m.set(this.view.subarray(u,h)),this.buffer=I,this.view=m,this.markedOffset>=0&&(this.markedOffset-=u),this.offset=0,this.limit=f,this},i.copy=function(u,h){if(typeof u>"u"&&(u=this.offset),typeof h>"u"&&(h=this.limit),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal begin: Not an integer");if(u>>>=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal end: Not an integer");if(h>>>=0,u<0||u>h||h>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+u+" <= "+h+" <= "+this.buffer.byteLength)}if(u===h)return new e(0,this.littleEndian,this.noAssert);var f=h-u,I=new e(f,this.littleEndian,this.noAssert);return I.offset=0,I.limit=f,I.markedOffset>=0&&(I.markedOffset-=u),this.copyTo(I,0,u,h),I},i.copyTo=function(u,h,f,I){var m,y;if(!this.noAssert&&!e.isByteBuffer(u))throw TypeError("Illegal target: Not a ByteBuffer");if(h=(y=typeof h>"u")?u.offset:h|0,f=(m=typeof f>"u")?this.offset:f|0,I=typeof I>"u"?this.limit:I|0,h<0||h>u.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+h+" <= "+u.buffer.byteLength);if(f<0||I>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+f+" <= "+this.buffer.byteLength);var v=I-f;return v===0?u:(u.ensureCapacity(h+v),u.view.set(this.view.subarray(f,I),h),m&&(this.offset+=v),y&&(u.offset+=v),this)},i.ensureCapacity=function(u){var h=this.buffer.byteLength;return h<u?this.resize((h*=2)>u?h:u):this},i.fill=function(u,h,f){var I=typeof h>"u";if(I&&(h=this.offset),typeof u=="string"&&u.length>0&&(u=u.charCodeAt(0)),typeof h>"u"&&(h=this.offset),typeof f>"u"&&(f=this.limit),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal value: "+u+" (not an integer)");if(u|=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal begin: Not an integer");if(h>>>=0,typeof f!="number"||f%1!==0)throw TypeError("Illegal end: Not an integer");if(f>>>=0,h<0||h>f||f>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+h+" <= "+f+" <= "+this.buffer.byteLength)}if(h>=f)return this;for(;h<f;)this.view[h++]=u;return I&&(this.offset=h),this},i.flip=function(){return this.limit=this.offset,this.offset=0,this},i.mark=function(u){if(u=typeof u>"u"?this.offset:u,!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=u,this},i.order=function(u){if(!this.noAssert&&typeof u!="boolean")throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!u,this},i.LE=function(u){return this.littleEndian=typeof u<"u"?!!u:!0,this},i.BE=function(u){return this.littleEndian=typeof u<"u"?!u:!1,this},i.prepend=function(u,h,f){(typeof h=="number"||typeof h!="string")&&(f=h,h=void 0);var I=typeof f>"u";if(I&&(f=this.offset),!this.noAssert){if(typeof f!="number"||f%1!==0)throw TypeError("Illegal offset: "+f+" (not an integer)");if(f>>>=0,f<0||f+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+f+" (+0) <= "+this.buffer.byteLength)}u instanceof e||(u=e.wrap(u,h));var m=u.limit-u.offset;if(m<=0)return this;var y=m-f;if(y>0){var v=new ArrayBuffer(this.buffer.byteLength+y),p=new Uint8Array(v);p.set(this.view.subarray(f,this.buffer.byteLength),m),this.buffer=v,this.view=p,this.offset+=y,this.markedOffset>=0&&(this.markedOffset+=y),this.limit+=y,f+=y}else new Uint8Array(this.buffer);return this.view.set(u.view.subarray(u.offset,u.limit),f-m),u.offset=u.limit,I&&(this.offset-=m),this},i.prependTo=function(u,h){return u.prepend(this,h),this},i.printDebug=function(u){typeof u!="function"&&(u=console.log.bind(console)),u(this.toString()+`
-------------------------------------------------------------------
`+this.toDebug(!0))},i.remaining=function(){return this.limit-this.offset},i.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},i.resize=function(u){if(!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal capacity: "+u+" (not an integer)");if(u|=0,u<0)throw RangeError("Illegal capacity: 0 <= "+u)}if(this.buffer.byteLength<u){var h=new ArrayBuffer(u),f=new Uint8Array(h);f.set(this.view),this.buffer=h,this.view=f}return this},i.reverse=function(u,h){if(typeof u>"u"&&(u=this.offset),typeof h>"u"&&(h=this.limit),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal begin: Not an integer");if(u>>>=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal end: Not an integer");if(h>>>=0,u<0||u>h||h>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+u+" <= "+h+" <= "+this.buffer.byteLength)}return u===h?this:(Array.prototype.reverse.call(this.view.subarray(u,h)),this)},i.skip=function(u){if(!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal length: "+u+" (not an integer)");u|=0}var h=this.offset+u;if(!this.noAssert&&(h<0||h>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+u+" <= "+this.buffer.byteLength);return this.offset=h,this},i.slice=function(u,h){if(typeof u>"u"&&(u=this.offset),typeof h>"u"&&(h=this.limit),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal begin: Not an integer");if(u>>>=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal end: Not an integer");if(h>>>=0,u<0||u>h||h>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+u+" <= "+h+" <= "+this.buffer.byteLength)}var f=this.clone();return f.offset=u,f.limit=h,f},i.toBuffer=function(u){var h=this.offset,f=this.limit;if(!this.noAssert){if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: Not an integer");if(h>>>=0,typeof f!="number"||f%1!==0)throw TypeError("Illegal limit: Not an integer");if(f>>>=0,h<0||h>f||f>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+h+" <= "+f+" <= "+this.buffer.byteLength)}if(!u&&h===0&&f===this.buffer.byteLength)return this.buffer;if(h===f)return n;var I=new ArrayBuffer(f-h);return new Uint8Array(I).set(new Uint8Array(this.buffer).subarray(h,f),0),I},i.toArrayBuffer=i.toBuffer,i.toString=function(u,h,f){if(typeof u>"u")return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch(typeof u=="number"&&(u="utf8",h=u,f=h),u){case"utf8":return this.toUTF8(h,f);case"base64":return this.toBase64(h,f);case"hex":return this.toHex(h,f);case"binary":return this.toBinary(h,f);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+u)}};var d=function(){for(var u={},h=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],f=[],I=0,m=h.length;I<m;++I)f[h[I]]=I;return u.encode=function(y,v){for(var p,_;(p=y())!==null;)v(h[p>>2&63]),_=(p&3)<<4,(p=y())!==null?(_|=p>>4&15,v(h[(_|p>>4&15)&63]),_=(p&15)<<2,(p=y())!==null?(v(h[(_|p>>6&3)&63]),v(h[p&63])):(v(h[_&63]),v(61))):(v(h[_&63]),v(61),v(61))},u.decode=function(y,v){var p,_,A;function b(P){throw Error("Illegal character code: "+P)}for(;(p=y())!==null;)if(_=f[p],typeof _>"u"&&b(p),(p=y())!==null&&(A=f[p],typeof A>"u"&&b(p),v(_<<2>>>0|(A&48)>>4),(p=y())!==null)){if(_=f[p],typeof _>"u"){if(p===61)break;b(p)}if(v((A&15)<<4>>>0|(_&60)>>2),(p=y())!==null){if(A=f[p],typeof A>"u"){if(p===61)break;b(p)}v((_&3)<<6>>>0|A)}}},u.test=function(y){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(y)},u}();i.toBase64=function(u,h){if(typeof u>"u"&&(u=this.offset),typeof h>"u"&&(h=this.limit),u=u|0,h=h|0,u<0||h>this.capacity||u>h)throw RangeError("begin, end");var f;return d.encode(function(){return u<h?this.view[u++]:null}.bind(this),f=a()),f()},e.fromBase64=function(u,h){if(typeof u!="string")throw TypeError("str");var f=new e(u.length/4*3,h),I=0;return d.decode(s(u),function(m){f.view[I++]=m}),f.limit=I,f},e.btoa=function(u){return e.fromBinary(u).toBase64()},e.atob=function(u){return e.fromBase64(u).toBinary()},i.toBinary=function(u,h){if(typeof u>"u"&&(u=this.offset),typeof h>"u"&&(h=this.limit),u|=0,h|=0,u<0||h>this.capacity()||u>h)throw RangeError("begin, end");if(u===h)return"";for(var f=[],I=[];u<h;)f.push(this.view[u++]),f.length>=1024&&(I.push(String.fromCharCode.apply(String,f)),f=[]);return I.join("")+String.fromCharCode.apply(String,f)},e.fromBinary=function(u,h){if(typeof u!="string")throw TypeError("str");for(var f=0,I=u.length,m,y=new e(I,h);f<I;){if(m=u.charCodeAt(f),m>255)throw RangeError("illegal char code: "+m);y.view[f++]=m}return y.limit=I,y},i.toDebug=function(u){for(var h=-1,f=this.buffer.byteLength,I,m="",y="",v="";h<f;){if(h!==-1&&(I=this.view[h],I<16?m+="0"+I.toString(16).toUpperCase():m+=I.toString(16).toUpperCase(),u&&(y+=I>32&&I<127?String.fromCharCode(I):".")),++h,u&&h>0&&h%16===0&&h!==f){for(;m.length<3*16+3;)m+=" ";v+=m+y+`
`,m=y=""}h===this.offset&&h===this.limit?m+=h===this.markedOffset?"!":"|":h===this.offset?m+=h===this.markedOffset?"[":"<":h===this.limit?m+=h===this.markedOffset?"]":">":m+=h===this.markedOffset?"'":u||h!==0&&h!==f?" ":""}if(u&&m!==" "){for(;m.length<3*16+3;)m+=" ";v+=m+y+`
`}return u?v:m},e.fromDebug=function(u,h,f){for(var I=u.length,m=new e((I+1)/3|0,h,f),y=0,v=0,p,_,A=!1,b=!1,P=!1,E=!1,C=!1;y<I;){switch(p=u.charAt(y++)){case"!":if(!f){if(b||P||E){C=!0;break}b=P=E=!0}m.offset=m.markedOffset=m.limit=v,A=!1;break;case"|":if(!f){if(b||E){C=!0;break}b=E=!0}m.offset=m.limit=v,A=!1;break;case"[":if(!f){if(b||P){C=!0;break}b=P=!0}m.offset=m.markedOffset=v,A=!1;break;case"<":if(!f){if(b){C=!0;break}b=!0}m.offset=v,A=!1;break;case"]":if(!f){if(E||P){C=!0;break}E=P=!0}m.limit=m.markedOffset=v,A=!1;break;case">":if(!f){if(E){C=!0;break}E=!0}m.limit=v,A=!1;break;case"'":if(!f){if(P){C=!0;break}P=!0}m.markedOffset=v,A=!1;break;case" ":A=!1;break;default:if(!f&&A){C=!0;break}if(_=parseInt(p+u.charAt(y++),16),!f&&(isNaN(_)||_<0||_>255))throw TypeError("Illegal str: Not a debug encoded string");m.view[v++]=_,A=!0}if(C)throw TypeError("Illegal str: Invalid symbol at "+y)}if(!f){if(!b||!E)throw TypeError("Illegal str: Missing offset or limit");if(v<m.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+v+" < "+I)}return m},i.toHex=function(u,h){if(u=typeof u>"u"?this.offset:u,h=typeof h>"u"?this.limit:h,!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal begin: Not an integer");if(u>>>=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal end: Not an integer");if(h>>>=0,u<0||u>h||h>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+u+" <= "+h+" <= "+this.buffer.byteLength)}for(var f=new Array(h-u),I;u<h;)I=this.view[u++],I<16?f.push("0",I.toString(16)):f.push(I.toString(16));return f.join("")},e.fromHex=function(u,h,f){if(!f){if(typeof u!="string")throw TypeError("Illegal str: Not a string");if(u.length%2!==0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var I=u.length,m=new e(I/2|0,h),y,v=0,p=0;v<I;v+=2){if(y=parseInt(u.substring(v,v+2),16),!f&&(!isFinite(y)||y<0||y>255))throw TypeError("Illegal str: Contains non-hex characters");m.view[p++]=y}return m.limit=p,m};var g=function(){var u={};return u.MAX_CODEPOINT=1114111,u.encodeUTF8=function(h,f){var I=null;for(typeof h=="number"&&(I=h,h=function(){return null});I!==null||(I=h())!==null;)I<128?f(I&127):I<2048?(f(I>>6&31|192),f(I&63|128)):I<65536?(f(I>>12&15|224),f(I>>6&63|128),f(I&63|128)):(f(I>>18&7|240),f(I>>12&63|128),f(I>>6&63|128),f(I&63|128)),I=null},u.decodeUTF8=function(h,f){for(var I,m,y,v,p=function(_){_=_.slice(0,_.indexOf(null));var A=Error(_.toString());throw A.name="TruncatedError",A.bytes=_,A};(I=h())!==null;)if(!(I&128))f(I);else if((I&224)===192)(m=h())===null&&p([I,m]),f((I&31)<<6|m&63);else if((I&240)===224)((m=h())===null||(y=h())===null)&&p([I,m,y]),f((I&15)<<12|(m&63)<<6|y&63);else if((I&248)===240)((m=h())===null||(y=h())===null||(v=h())===null)&&p([I,m,y,v]),f((I&7)<<18|(m&63)<<12|(y&63)<<6|v&63);else throw RangeError("Illegal starting byte: "+I)},u.UTF16toUTF8=function(h,f){for(var I,m=null;(I=m!==null?m:h())!==null;){if(I>=55296&&I<=57343&&(m=h())!==null&&m>=56320&&m<=57343){f((I-55296)*1024+m-56320+65536),m=null;continue}f(I)}m!==null&&f(m)},u.UTF8toUTF16=function(h,f){var I=null;for(typeof h=="number"&&(I=h,h=function(){return null});I!==null||(I=h())!==null;)I<=65535?f(I):(I-=65536,f((I>>10)+55296),f(I%1024+56320)),I=null},u.encodeUTF16toUTF8=function(h,f){u.UTF16toUTF8(h,function(I){u.encodeUTF8(I,f)})},u.decodeUTF8toUTF16=function(h,f){u.decodeUTF8(h,function(I){u.UTF8toUTF16(I,f)})},u.calculateCodePoint=function(h){return h<128?1:h<2048?2:h<65536?3:4},u.calculateUTF8=function(h){for(var f,I=0;(f=h())!==null;)I+=f<128?1:f<2048?2:f<65536?3:4;return I},u.calculateUTF16asUTF8=function(h){var f=0,I=0;return u.UTF16toUTF8(h,function(m){++f,I+=m<128?1:m<2048?2:m<65536?3:4}),[f,I]},u}();return i.toUTF8=function(u,h){if(typeof u>"u"&&(u=this.offset),typeof h>"u"&&(h=this.limit),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal begin: Not an integer");if(u>>>=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal end: Not an integer");if(h>>>=0,u<0||u>h||h>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+u+" <= "+h+" <= "+this.buffer.byteLength)}var f;try{g.decodeUTF8toUTF16(function(){return u<h?this.view[u++]:null}.bind(this),f=a())}catch{if(u!==h)throw RangeError("Illegal range: Truncated data, "+u+" != "+h)}return f()},e.fromUTF8=function(u,h,f){if(!f&&typeof u!="string")throw TypeError("Illegal str: Not a string");var I=new e(g.calculateUTF16asUTF8(s(u),!0)[1],h,f),m=0;return g.encodeUTF16toUTF8(s(u),function(y){I.view[m++]=y}),I.limit=m,I},e})})(Wm);var QE=Wm.exports,$E=k&&k.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(lo,"__esModule",{value:!0});lo.ShroomAssetBundle=void 0;const bp=$E(QE);class vr{constructor(t=[]){this._files=new Map,this._blobs=new Map,this._strings=new Map,t.forEach(e=>this._files.set(e.fileName,e.buffer))}get files(){return Array.from(this._files.entries())}static async fromUrl(t){const e=await fetch(t);if(e.status>=400)throw new Error(`Failed to load: ${t} - ${e.status}`);const i=await e.arrayBuffer();return vr.fromBuffer(i)}static fromBuffer(t){const e=bp.default.wrap(t),i=()=>{const s=e.readUint16(),a=e.readString(s),l=e.readUint32(),c=e.readBytes(l);return{fileName:a,buffer:c.toArrayBuffer()}};e.readByte();const n=e.readUint16(),o=[];for(let s=0;s<n;s++){const a=i();o.push(a)}return new vr(o)}addFile(t,e){this._files.set(t,e)}toBuffer(){const t=new bp.default;return t.writeByte(vr.VERSION),t.writeUint16(this._files.size),this._files.forEach((e,i)=>{t.writeUint16(i.length),t.writeString(i),t.writeUint32(e.byteLength),t.append(e)}),t.flip().toBuffer()}async getBlob(t){const e=this._blobs.get(t);if(e!=null)return e;const i=this._files.get(t);if(i==null)throw new Error(`Couldn't find ${t}.`);const n=new Blob([i]);return this._blobs.set(t,n),n}async getString(t){const e=this._strings.get(t);if(e!=null)return e;const i=this._files.get(t);if(i==null)throw new Error(`Couldn't find ${t}.`);const o=new TextDecoder().decode(i);return this._strings.set(t,o),o}}lo.ShroomAssetBundle=vr;vr.VERSION=1;var Da={};Object.defineProperty(Da,"__esModule",{value:!0});Da.AvatarEffectMap=void 0;class KE{constructor(t){this._effects=new Map,this._effectsArray=[],new DOMParser().parseFromString(t,"text/xml").querySelectorAll("effect").forEach(i=>{const n=this._getEffectFromElement(i);this._effects.set(n.id,n),this._effectsArray.push(n)})}getEffects(){return this._effectsArray}getEffectInfo(t){return this._effects.get(t)}_getEffectFromElement(t){const e=t.getAttribute("id"),i=t.getAttribute("lib"),n=t.getAttribute("type");if(i==null)throw new Error("Invalid lib for effect");if(n==null)throw new Error("Invalid type for effect");if(e==null)throw new Error("Invalid id");return{id:e,lib:i,type:n}}}Da.AvatarEffectMap=KE;var La={},qi={},ho={};Object.defineProperty(ho,"__esModule",{value:!0});ho.loadImageFromBlob=void 0;async function qE(r){const t=new FileReader;return await new Promise(i=>{t.readAsDataURL(r),t.onloadend=()=>{i(t.result)}})}ho.loadImageFromBlob=qE;var tF=k&&k.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),eF=k&&k.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),iF=k&&k.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&tF(t,r,e);return eF(t,r),t};Object.defineProperty(qi,"__esModule",{value:!0});qi.HitTexture=void 0;const rF=iF(Zt),nF=io,oF=ho;class dn{constructor(t){this._texture=t,nF.applyTextureProperties(this._texture)}get texture(){return this._texture}static async fromSpriteSheet(t,e){const i=t.textures[e];return new dn(i)}static async fromBlob(t){const e=await oF.loadImageFromBlob(t);return dn.fromUrl(e)}static async fromUrl(t){const e=new Image;e.crossOrigin="anonymous",e.src=t,await new Promise((n,o)=>{e.onload=()=>{n({width:e.width,height:e.height})},e.onerror=s=>o(s)});const i=rF.Texture.from(e);return new dn(i)}getHitMap(){return this._getHitMap()}hits(t,e,i,n={mirrorHorizonally:!1}){n.mirrorHorizonally?t=-(t-i.x):t=t-i.x,e=e-i.y;const o=this._texture.baseTexture,s=this._getHitMap(),a=Math.round(this._texture.orig.x+t*o.resolution),l=Math.round(this._texture.orig.y+e*o.resolution),c=a+l*o.realWidth,d=c%32,g=c/32|0;return(s[g]&1<<d)!==0}_getHitMap(){var t;return this._cachedHitmap==null&&(this._cachedHitmap=sF(this._texture.baseTexture.resource.source)),(t=this._cachedHitmap)!==null&&t!==void 0?t:new Uint8ClampedArray}}qi.HitTexture=dn;function sF(r){const t=document.createElement("canvas");t.width=r.width,t.height=r.height;const e=t.getContext("2d");if(e==null)throw new Error("Invalid context 2d");const i=25,n=t.width,o=t.height;e.drawImage(r,0,0);const s=e.getImageData(0,0,n,o),a=new Uint32Array(Math.ceil(n*o/32));for(let l=0;l<n*o;l++){const c=l%32,d=l/32|0;s.data[l*4+3]>=i&&(a[d]=a[d]|1<<c)}return a}var Ba={};Object.defineProperty(Ba,"__esModule",{value:!0});Ba.AvatarEffectData=void 0;const ae=ao;class qc{constructor(t){this._frameBodyParts=new Map,this._frameFxParts=new Map,this._sprites=new Map,this._additions=new Map,this._spriteDirections=new Map,this._frameBodyPartsById=new Map,this._frameBodyPartByBase=new Map,this._frameFxPartsById=new Map;const e=new DOMParser().parseFromString(t,"text/xml"),i=e.querySelectorAll("animation > frame");i.forEach((o,s)=>{o.querySelectorAll("bodypart").forEach(a=>{var l;const c=this._getFrameBodyPartFromElement(a),d=(l=this._frameBodyParts.get(s))!==null&&l!==void 0?l:[];this._frameBodyParts.set(s,[...d,c]),this._frameBodyPartsById.set(`${a.id}_${s}`,c),c.base!=null&&this._frameBodyPartByBase.set(`${c.base}_${s}`,c)}),o.querySelectorAll("fx").forEach(a=>{var l;const c=this._getFXPartFromElement(a),d=(l=this._frameFxParts.get(s))!==null&&l!==void 0?l:[];c!=null&&(this._frameFxParts.set(s,[...d,c]),this._frameFxPartsById.set(`${c.id}_${s}`,c))})}),e.querySelectorAll("sprite").forEach(o=>{const s=this._getEffectSpriteFromElement(o);this._sprites.set(s.id,s),o.querySelectorAll("direction").forEach(a=>{const l=this._getDirectionSpriteFromElement(a);this._spriteDirections.set(`${s.id}_${l.id}`,l)})}),e.querySelectorAll("add").forEach(o=>{const s=this._getFXAddition(o);this._additions.set(s.id,s)});const n=e.querySelector("animation > direction");n!=null&&(this._direction=this._getDirectionFromElement(n)),this._frameCount=i.length}static async fromUrl(t){const i=await(await fetch(t)).text();return new qc(i)}getFrameBodyPartByBase(t,e){return this._frameBodyPartByBase.get(`${t}_${e}`)}getFrameEffectPart(t,e){return this._frameFxPartsById.get(`${t}_${e}`)}getFrameBodyPart(t,e){return this._frameBodyPartsById.get(`${t}_${e}`)}getAddtions(){return Array.from(this._additions.values())}getFrameEffectParts(t){var e;return(e=this._frameFxParts.get(t))!==null&&e!==void 0?e:[]}getDirection(){return this._direction}getFrameBodyParts(t){var e;return(e=this._frameBodyParts.get(t))!==null&&e!==void 0?e:[]}getFrameCount(){return this._frameCount}getSprites(){return Array.from(this._sprites.values())}getSpriteDirection(t,e){return this._spriteDirections.get(`${t}_${e}`)}_getFXAddition(t){var e,i,n;const o=(e=t.getAttribute("id"))!==null&&e!==void 0?e:void 0,s=(i=t.getAttribute("align"))!==null&&i!==void 0?i:void 0,a=(n=t.getAttribute("base"))!==null&&n!==void 0?n:void 0;if(o==null)throw new Error("Invalid id");return{id:o,align:s,base:a}}_getFXPartFromElement(t){const e=t.getAttribute("action"),i=ae.getNumberFromAttribute(t.getAttribute("frame")),n=ae.getNumberFromAttribute(t.getAttribute("dx")),o=ae.getNumberFromAttribute(t.getAttribute("dy")),s=ae.getNumberFromAttribute(t.getAttribute("dd")),a=t.getAttribute("id");if(a==null)throw new Error("Invalid id");return{id:a,action:e??void 0,frame:i,dx:n,dy:o,dd:s}}_getDirectionFromElement(t){const e=ae.getNumberFromAttribute(t.getAttribute("offset"));if(e!=null)return{offset:e}}_getDirectionSpriteFromElement(t){const e=ae.getNumberFromAttribute(t.getAttribute("id")),i=ae.getNumberFromAttribute(t.getAttribute("dz")),n=ae.getNumberFromAttribute(t.getAttribute("dx")),o=ae.getNumberFromAttribute(t.getAttribute("dy"));if(e==null)throw new Error("Invalid id");return{id:e,dz:i,dx:n,dy:o}}_getEffectSpriteFromElement(t){var e;const i=t.getAttribute("id"),n=ae.getNumberFromAttribute(t.getAttribute("ink")),o=(e=t.getAttribute("member"))!==null&&e!==void 0?e:void 0,s=ae.getNumberFromAttribute(t.getAttribute("staticY")),a=t.getAttribute("directions")==="1";if(i==null)throw new Error("Invalid id");return{id:i,ink:n,member:o,staticY:s,directions:a}}_getFrameBodyPartFromElement(t){var e,i;const n=(e=t.getAttribute("action"))!==null&&e!==void 0?e:void 0,o=t.getAttribute("id"),s=ae.getNumberFromAttribute(t.getAttribute("frame")),a=ae.getNumberFromAttribute(t.getAttribute("dx")),l=ae.getNumberFromAttribute(t.getAttribute("dy")),c=ae.getNumberFromAttribute(t.getAttribute("dd")),d=(i=t.getAttribute("base"))!==null&&i!==void 0?i:void 0;if(o==null)throw new Error("Invalid id");return{action:n,frame:s,id:o,dx:a,dy:l,dd:c,base:d}}}Ba.AvatarEffectData=qc;var co={};Object.defineProperty(co,"__esModule",{value:!0});co.AvatarManifestData=void 0;const aF=Ki;class uF extends aF.AvatarData{constructor(t){super(t),this._assets=[],this._assetbyName=new Map,this._aliases=[],this._cacheData()}getAliases(){return this._aliases}getAssets(){return this._assets}getAssetByName(t){return this._assetbyName.get(t)}_cacheData(){const t=this.querySelectorAll("assets asset"),e=this.querySelectorAll("aliases alias");for(const i of t){const n=i.querySelector('param[key="offset"]'),o=n?.getAttribute("value"),s=i.getAttribute("name");if(o!=null&&s!=null){const a=o.split(","),l=Number(a[0]),c=Number(a[1]),d={name:s,x:l,y:c,flipH:!1,flipV:!1};this._assets.push(d),this._assetbyName.set(s,d)}}for(const i of e){const n=i.getAttribute("name"),o=i.getAttribute("link"),s=i.getAttribute("fliph")==="1",a=i.getAttribute("flipv")==="1";if(n!=null&&o!=null){const l={name:n,link:o,fliph:s,flipv:a};this._aliases.push(l)}}}}co.AvatarManifestData=uF;Object.defineProperty(La,"__esModule",{value:!0});La.AvatarEffectBundle=void 0;const lF=qi,hF=Ba,cF=co;class fF{constructor(t){this._bundle=t,this._textures=new Map,this._data=t.getString("animation.bin").then(e=>new hF.AvatarEffectData(e)),this._manifest=t.getString("manifest.bin").then(e=>new cF.AvatarManifestData(e))}async getData(){return this._data}async getTexture(t){const e=this._textures.get(t);if(e!=null)return e;const i=await this._bundle.getBlob(`${t}.png`),n=lF.HitTexture.fromBlob(i);return this._textures.set(t,n),n}async getManifest(){return this._manifest}}La.AvatarEffectBundle=fF;var Ra={};Object.defineProperty(Ra,"__esModule",{value:!0});Ra.getLibrariesForLook=void 0;function dF(r,{figureMap:t,figureData:e}){var i;const n=new Set,o=Array.from(r).flatMap(([s,{setId:a}])=>{var l,c;return(c=(l=e.getParts(s,a.toString()))===null||l===void 0?void 0:l.map(d=>({...d,setId:a,setType:s})))!==null&&c!==void 0?c:[]});for(const s of o){let a=t.getLibraryOfPart(s.id,s.type);if(a!=null){const l=(i=e.getParts(s.setType,s.setId.toString()))!==null&&i!==void 0?i:[];for(const c of l)if(a=t.getLibraryOfPart(c.id,c.type),a!=null)break}a!=null&&n.add(a)}return n.add("hh_human_face"),n.add("hh_human_item"),n.add("hh_human_body"),n}Ra.getLibrariesForLook=dF;var Oa={};Object.defineProperty(Oa,"__esModule",{value:!0});Oa.AvatarAssetLibraryCollection=void 0;const Nl=Symbol("NO_ASSET");class gF{constructor(){this._assets=new Map,this._libraries=new Map,this._opened=new Set,this._loadTextures=new Map,this._textures=new Map}async open(t){if(this._opened.has(t))return;this._opened.add(t);const e=await t.getManifest();await Promise.all(e.getAssets().map(async i=>{this._assets.set(i.name,i),this._libraries.set(i.name,t)})),await Promise.all(e.getAliases().map(i=>{const n=e.getAssetByName(i.link);n!=null&&(this._assets.set(i.name,{...n,flipH:i.fliph,flipV:i.flipv}),this._libraries.set(i.name,t))}))}async loadTextures(t){return Promise.all(t.map(e=>this._loadTexture(e)))}getOffsets(t){const e=this._assets.get(t);if(e!=null)return{offsetX:e.x,offsetY:e.y}}getTexture(t){const e=this._textures.get(t);if(e!==Nl)return e}_loadTexture(t){var e,i;const n=this._loadTextures.get(t);if(n!=null)return n;const o=(i=(e=this._assets.get(t))===null||e===void 0?void 0:e.name)!==null&&i!==void 0?i:t,s=this._libraries.get(t);if(s==null)throw new Error(`Couldn't find library for ${t}`);const a=s.getTexture(o).then(l=>(this._textures.set(t,l??Nl),l??Nl));return this._loadTextures.set(t,a),a}}Oa.AvatarAssetLibraryCollection=gF;var Za={};Object.defineProperty(Za,"__esModule",{value:!0});Za.ManifestLibrary=void 0;const pF=qi,IF=co;class vF{constructor(t){this._bundle=t,this._map=new Map,this._manifest=t.getString("manifest.bin").then(e=>new IF.AvatarManifestData(e))}async getManifest(){return this._manifest}async getTexture(t){const e=this._map.get(t);if(e!=null)return e;const i=this._bundle.getBlob(`${t}.png`).then(n=>pF.HitTexture.fromBlob(n)).catch(()=>{});return this._map.set(t,i),i}}Za.ManifestLibrary=vF;var mF=k&&k.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(oo,"__esModule",{value:!0});oo.AvatarLoader=void 0;const yF=Rm,_F=mF(ZE),CF=Aa,AF=wa,bF=xa,wF=Sa,xF=Ta,PF=Fa,SF=uo,jl=lo,wp=Da,xp=La,TF=Ra,EF=so,FF=Oa,MF=Za;function DF(r){const t=[];if(r.actions.size>0){const e=Array.from(r.actions).map(i=>i).join(",");t.push(`actions(${e})`)}return t.push(`direction(${r.direction})`),t.push(`headdirection(${r.headDirection})`),r.item!=null&&t.push(`item(${r.item})`),r.look!=null&&t.push(`look(${r.look})`),r.effect!=null&&t.push(`effect(${r.effect})`),t.join(",")}class ws{constructor(t){this._options=t,this._effectCache=new Map,this._lookOptionsCache=new Map,this._assetBundles=new Map,this._offsets=new FF.AvatarAssetLibraryCollection,this._dependencies=this._options.createDependencies(),this._lookServer=this._dependencies.then(async e=>yF.createLookServer({...e,offsetsData:this._offsets})).then(async e=>(await this._getAvatarDrawDefinition(e,{direction:0,headDirection:0,actions:new Set,look:"hd-99999-99999"}),e)),this._effectMap=this._options.getEffectMap()}static create(t=""){return new ws({createDependencies:()=>Pp(t),getAssetBundle:async e=>new SF.LegacyAssetBundle(`${t}/figure/${e}`),getEffectMap:async()=>{const i=await(await fetch(`${t}/effectmap.xml`)).text();return new wp.AvatarEffectMap(i)},getEffectBundle:async e=>{const i=await jl.ShroomAssetBundle.fromUrl(`${t}/effects/${e.lib}.shroom`);return new xp.AvatarEffectBundle(i)}})}static createForAssetBundle(t=""){return new ws({createDependencies:()=>Pp(t),getAssetBundle:async e=>jl.ShroomAssetBundle.fromUrl(`${t}/figure/${e}.shroom`),getEffectMap:async()=>{const i=await(await fetch(`${t}/effectmap.xml`)).text();return new wp.AvatarEffectMap(i)},getEffectBundle:async e=>{const i=await jl.ShroomAssetBundle.fromUrl(`${t}/effects/${e.lib}.shroom`);return new xp.AvatarEffectBundle(i)}})}async getAvatarDrawDefinition(t){const e=await this._lookServer;return this._getAvatarDrawDefinition(e,t)}async _getAvatarDrawDefinition(t,e){var i;const{effect:n}=e;let o,s;if(n!=null){const g=await this._loadEffectCached(n);g!=null&&(o=g.effectData,s=g.effectBundle)}const{figureData:a,figureMap:l}=await this._dependencies;s!=null&&await this._offsets.open(s);const c=TF.getLibrariesForLook(EF.parseLookString(e.look),{figureData:a,figureMap:l});await Promise.all(Array.from(c).map(g=>this._getAssetBundle(g).then(u=>this._offsets.open(u))));const d=(i=t(e,o))===null||i===void 0?void 0:i.getDrawDefinition().flatMap(g=>g.assets).map(g=>g.fileId);return d!=null&&await this._offsets.loadTextures(d),{getDrawDefinition:g=>{const u=this._getDrawDefinitionCached(t,g,o);if(u==null)throw new Error("Invalid look");return u},getTexture:g=>{const u=this._offsets.getTexture(g);if(u==null)throw console.error("Texture not found in",this._offsets),new Error(`Invalid texture: ${g}`);return u}}}async _loadEffectCached(t){const e=this._effectCache.get(t);if(e!=null)return e;const i=this._loadEffect(t);return this._effectCache.set(t,i),i}async _loadEffect(t){const i=(await this._effectMap).getEffectInfo(t);if(i!=null){const n=await this._options.getEffectBundle(i),o=await n.getData();return{effectBundle:n,effectData:o}}}async _getAssetBundle(t){const e=this._assetBundles.get(t);if(e!=null)return e;const i=this._options.getAssetBundle(t).then(n=>new MF.ManifestLibrary(n));return this._assetBundles.set(t,i),i}_getDrawDefinitionCached(t,e,i){const n=DF(e),o=this._lookOptionsCache.get(n);if(o!=null)return o;const s=t(e,i);if(s!=null)return this._lookOptionsCache.set(n,s),s}}oo.AvatarLoader=ws;async function Pp(r){const{animationData:t,figureMap:e,figureData:i,partSetsData:n,actionsData:o,geometry:s}=await _F.default.props({animationData:CF.AvatarAnimationData.default(),figureData:wF.FigureData.fromUrl(`${r}/figuredata.xml`),figureMap:AF.FigureMapData.fromUrl(`${r}/figuremap.xml`),partSetsData:bF.AvatarPartSetsData.default(),actionsData:xF.AvatarActionsData.default(),geometry:PF.AvatarGeometryData.default()});return{animationData:t,figureData:i,figureMap:e,partSetsData:n,actionsData:o,geometry:s}}var fo={},Ga={},Na={};Object.defineProperty(Na,"__esModule",{value:!0});Na.loadImageFromUrl=void 0;async function LF(r){const t=new Image;return t.src=r,await new Promise((e,i)=>{t.onload=()=>{e({width:t.width,height:t.height})},t.onerror=n=>i(n)}),t}Na.loadImageFromUrl=LF;var ja={};Object.defineProperty(ja,"__esModule",{value:!0});ja.JsonFurnitureAssetsData=void 0;const BF=oi;class RF{constructor(t){this._assets=t}getAsset(t){return this._assets[t]}getAssets(){return Object.values(this._assets).filter(BF.notNullOrUndefined)}}ja.JsonFurnitureAssetsData=RF;var ka={};Object.defineProperty(ka,"__esModule",{value:!0});ka.JsonFurnitureVisualizationData=void 0;class OF{constructor(t){this._furniture=t}getLayerCount(t){return this._getVisualization(t).layerCount}getLayer(t,e){return this._getVisualization(t).layers[e.toString()]}getDirections(t){return Object.keys(this._getVisualization(t).directions).map(e=>Number(e))}getDirectionLayer(t,e,i){var n;return(n=this._getVisualization(t).directions[e.toString()])===null||n===void 0?void 0:n.layers[i.toString()]}getAnimationLayer(t,e,i){var n;return(n=this._getVisualization(t).animations[e.toString()])===null||n===void 0?void 0:n.layers[i.toString()]}getFrameCountWithoutRepeat(t,e){var i;let n=1;return Object.values((i=this._getVisualization(t).animations[e.toString()])!==null&&i!==void 0?i:{}).forEach(o=>{Object.values(o??{}).forEach(s=>{var a;const c=(a=s?.frames.length)!==null&&a!==void 0?a:0;c>n&&(n=c)})}),n}getFrameCount(t,e){var i;let n=1;return Object.values((i=this._getVisualization(t).animations[e.toString()])!==null&&i!==void 0?i:{}).forEach(o=>{Object.values(o??{}).forEach(s=>{var a,l;const c=(a=s?.frames.length)!==null&&a!==void 0?a:0,d=(l=s?.frameRepeat)!==null&&l!==void 0?l:1,g=c*d;g>n&&(n=g)})}),n}getColor(t,e,i){var n,o;return(o=(n=this._getVisualization(t).colors[e.toString()])===null||n===void 0?void 0:n.layers[i.toString()])===null||o===void 0?void 0:o.color}getAnimation(t,e){const i=this._getVisualization(t).animations[e.toString()];if(i!=null)return{transitionTo:i.transitionTo,id:e}}getTransitionForAnimation(t,e){const n=Object.entries(this._getVisualization(t).animations).find(([o,s])=>s?.transitionTo===e);if(n!=null)return{id:Number(n[0]),transitionTo:e}}_getVisualization(t){const e=this._furniture[t.toString()];if(e==null)throw new Error("Invalid visualization");return e}}ka.JsonFurnitureVisualizationData=OF;var ZF=k&&k.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),GF=k&&k.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),NF=k&&k.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&ZF(t,r,e);return GF(t,r),t};Object.defineProperty(Ga,"__esModule",{value:!0});Ga.JsonFurnitureAssetBundle=void 0;const Sp=NF(Zt),jF=ho,kF=Na,WF=qi,XF=ja,HF=ka;class YF{constructor(t){this._assetBundle=t,this._data=this._load()}async getAssets(){const{assets:t}=await this._data;return t}async getVisualization(){const{visualization:t}=await this._data;return t}async getTexture(t){const{spritesheet:e}=await this._data;return WF.HitTexture.fromSpriteSheet(e,t)}async getIndex(){const{index:t}=await this._data;return t}async _load(){const t=JSON.parse(await this._assetBundle.getString("index.json")),e=await this._assetBundle.getBlob("spritesheet.png"),i=await jF.loadImageFromBlob(e),n=await kF.loadImageFromUrl(i),o=Sp.BaseTexture.from(n),s=new Sp.Spritesheet(o,t.spritesheet);return await new Promise(a=>{s.parse(()=>{a()})}),{assets:new XF.JsonFurnitureAssetsData(t.assets),visualization:new HF.JsonFurnitureVisualizationData(t.visualization),index:t.index,spritesheet:s}}}Ga.JsonFurnitureAssetBundle=YF;var Wa={},Xa={},Xm={},Ha={},Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});Ya.parseAnimations=void 0;function UF(r,t){const e=r.animations?r.animations[0].animation:void 0;e?.forEach(i=>{const n=i.$.id,o=i.animationLayer,s=new Map;let a=1;o.forEach(l=>{const c=l.$.id;if(l.frameSequence!=null){const g=l.frameSequence[0].frame.map(h=>h.$.id),u=l.$.frameRepeat;s.set(c,{frames:g,frameRepeat:u!=null?Number(u):void 0}),g.length>a&&(a=g.length)}}),t(n,{frameCount:a,layerToFrames:s})})}Ya.parseAnimations=UF;var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.parseColors=void 0;function zF(r,t){const e=r.colors&&r.colors[0].color;e?.forEach(i=>{const n=i.$.id,o=new Map;i.colorLayer.forEach(a=>{const l=a.$.id,c=a.$.color;o.set(l,c)}),t(n,o)})}Ua.parseColors=zF;var za={};Object.defineProperty(za,"__esModule",{value:!0});za.parseDirections=void 0;function VF(r,t){const e=r.directions[0].direction,i=[];for(let n=0;n<e.length;n++){const o=new Map,s=Number(e[n].$.id),a=e[n].layer||[];i.push(s);for(let l=0;l<a.length;l++){const c=a[l].$;o.set(c.id,{zIndex:c!=null&&c.z!=null?Number(c.z):void 0,tag:void 0,ink:void 0,alpha:void 0,ignoreMouse:void 0})}t(s,o)}return{validDirections:i}}za.parseDirections=VF;var Va={};Object.defineProperty(Va,"__esModule",{value:!0});Va.parseLayers=void 0;function JF(r,t){if(r.layers!=null){const e=r.layers[0].layer,i=e==null?0:e.length;for(let n=0;n<i;n++){const o=e[n].$;t(o.id,{zIndex:o!=null&&o.z!=null?Number(o.z):0,tag:o.tag,ink:o.ink,alpha:o.alpha!=null?Number(o.alpha):void 0,ignoreMouse:o.ignoreMouse})}}}Va.parseLayers=JF;Object.defineProperty(Ha,"__esModule",{value:!0});Ha.parseVisualization=void 0;const QF=Ya,$F=Ua,KF=za,qF=Va;function tM(r){const t=r.visualizationData.graphics[0].visualization;let e=[];for(let i=0;i<t.length;i++){const n=t[i];if(n.$.size=="64"){const o=new Map,s=new Map,a=new Map,l=new Map,{validDirections:c}=KF.parseDirections(n,(d,g)=>l.set(d,g));return e=c,QF.parseAnimations(n,(d,g)=>a.set(d,g)),$F.parseColors(n,(d,g)=>s.set(d,g)),qF.parseLayers(n,(d,g)=>o.set(d,g)),{layerCount:Number(n.$.layerCount),getColor:(d,g)=>{var u;return(u=s?.get(d))===null||u===void 0?void 0:u.get(g)},getAnimation:(d,g)=>{var u,h;return(h=(u=a.get(d))===null||u===void 0?void 0:u.layerToFrames)===null||h===void 0?void 0:h.get(g)},getFrameCount:d=>{var g;return(g=a.get(d))===null||g===void 0?void 0:g.frameCount},getLayer:d=>o.get(d),getDirectionLayerOverride:(d,g)=>{var u;return(u=l.get(d))===null||u===void 0?void 0:u.get(g)},getAnimationDatas:()=>Array.from(a).map(([d,g])=>({id:d,data:g})),directions:e}}}throw new Error("No visualization found")}Ha.parseVisualization=tM;(function(r){var t=k&&k.__createBinding||(Object.create?function(n,o,s,a){a===void 0&&(a=s),Object.defineProperty(n,a,{enumerable:!0,get:function(){return o[s]}})}:function(n,o,s,a){a===void 0&&(a=s),n[a]=o[s]}),e=k&&k.__exportStar||function(n,o){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&t(o,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),r.getCharFromLayerIndex=void 0,e(Ha,r);function i(n){return String.fromCharCode(97+n)}r.getCharFromLayerIndex=i})(Xm);Object.defineProperty(Xa,"__esModule",{value:!0});Xa.getFurniDrawDefinition=void 0;const eM=Xm;function iM({type:r,direction:t,animation:e},{visualizationData:i,assetsData:n}){var o;const s=r.split("*"),a=s[0],l=(o=s[1])!==null&&o!==void 0?o:"0",c=64,d=[],g=e!=null?Number(e):void 0,u=i.getLayerCount(c),h=(m,y)=>`${a}_${c}_${m}_${t}_${y}`,f=n.getAsset(h("sd",0));f!=null&&d.push({assets:[f],frameRepeat:1,shadow:!0,layer:void 0,layerIndex:-1});const I=n.getAsset(`${a}_${c}_${t}_mask`);I!=null&&d.push({assets:[I],frameRepeat:1,layer:void 0,shadow:!1,mask:!0,layerIndex:-2});for(let m=0;m<u;m++){const y=i.getDirectionLayer(c,t,m),v=i.getLayer(c,m),p=eM.getCharFromLayerIndex(m),_=g!=null?i.getAnimationLayer(c,g,m):void 0,A=l!=null?i.getColor(c,Number(l),m):void 0;d.push(rM({layer:v,directionLayer:y,animation:_,assetsData:n,color:A,getAssetName:b=>h(p,b),layerIndex:m}))}return{parts:d}}Xa.getFurniDrawDefinition=iM;function rM({layerIndex:r,layer:t,animation:e,directionLayer:i,assetsData:n,color:o,getAssetName:s}){var a,l,c,d,g;const u=(l=(a=i?.z)!==null&&a!==void 0?a:t?.z)!==null&&l!==void 0?l:0,h=(c=i?.x)!==null&&c!==void 0?c:0,f=(d=i?.y)!==null&&d!==void 0?d:0,I=n.getAsset(s(0));let m;return e!=null&&(m=e.frames.flatMap(v=>new Array(1).fill(v)).map(v=>{const p=n.getAsset(s(v));return p==null?{x:0,y:0,flipH:!1,name:"unknown",valid:!0}:{...p,x:p.x+(p.flipH?h:-h),y:p.y-f}})),(m==null||m.length===0)&&I!=null&&(m=[I]),m==null&&(m=[]),{mask:!1,shadow:!1,frameRepeat:(g=e?.frameRepeat)!==null&&g!==void 0?g:1,layer:t,z:u,tint:o,assets:m,loopCount:e?.loopCount,layerIndex:r}}Object.defineProperty(Wa,"__esModule",{value:!0});Wa.loadFurni=void 0;const nM=oi,oM=Xa;async function sM(r,t){const e=await t.getAssets(),i=await t.getIndex(),n=await t.getVisualization(),s=[...n.getDirections(64)].sort((d,g)=>d-g),a=e.getAssets(),c=await(async()=>{const d=Array.from(a).filter(u=>u.source==null||u.source===u.name),g=await Promise.all(d.map(async u=>{try{const h=await t.getTexture(u.name);return[u.name,h]}catch(h){return console.warn(`Failed to load furniture asset: ${u.name}`,h),null}}));return new Map(g.filter(nM.notNullOrUndefined))})();return{getDrawDefinition:(d,g)=>oM.getFurniDrawDefinition({type:r,direction:d,animation:g},{assetsData:e,visualizationData:n}),getTexture:d=>c.get(d),getExtraData:()=>i,visualizationData:n,directions:s}}Wa.loadFurni=sM;var Ja={},Qa={},go={};Object.defineProperty(go,"__esModule",{value:!0});go.XmlData=void 0;class aM{constructor(t){this.document=new DOMParser().parseFromString(t,"text/xml")}querySelectorAll(t){return Array.from(this.document.querySelectorAll(t))}querySelector(t){return this.document.querySelector(t)}}go.XmlData=aM;Object.defineProperty(Qa,"__esModule",{value:!0});Qa.FurnitureAssetsData=void 0;const uM=go;class tf extends uM.XmlData{constructor(t){super(t),this._assets=new Map,this.querySelectorAll("asset").forEach(e=>{const i=e.getAttribute("name"),n=Number(e.getAttribute("x")),o=Number(e.getAttribute("y")),s=e.getAttribute("source"),a=e.getAttribute("flipH")==="1";if(i==null)throw new Error("Invalid name");if(isNaN(n))throw new Error("x is not a number");if(isNaN(o))throw new Error("y is not a number");this._assets.set(i,{x:n,y:o,source:s??void 0,flipH:a,name:i,valid:!0})})}static async fromUrl(t){const i=await(await fetch(t)).text();return new tf(i)}toJson(){const t=this.getAssets(),e={};return t.forEach(i=>{e[i.name]=i}),e}getAsset(t){return this._assets.get(t)}getAssets(){return Array.from(this._assets.values())}}Qa.FurnitureAssetsData=tf;var $a={};Object.defineProperty($a,"__esModule",{value:!0});$a.FurnitureIndexData=void 0;class ef{constructor(t){var e,i;const o=new DOMParser().parseFromString(t,"text/xml").querySelector("object");this._visualization=(e=o?.getAttribute("visualization"))!==null&&e!==void 0?e:void 0,this._logic=(i=o?.getAttribute("logic"))!==null&&i!==void 0?i:void 0}get visualization(){return this._visualization}get logic(){return this._logic}static async fromUrl(t){const i=await(await fetch(t)).text();return new ef(i)}toJson(){return this.toObject()}toObject(){return{visualization:this.visualization,logic:this.logic}}}$a.FurnitureIndexData=ef;var Ka={};Object.defineProperty(Ka,"__esModule",{value:!0});Ka.FurnitureVisualizationData=void 0;const lM=go,Yo=oi;class rf extends lM.XmlData{constructor(t){super(t)}static async fromUrl(t){const i=await(await fetch(t)).text();return new rf(i)}getFrameCountWithoutRepeat(t,e){const i=this.querySelectorAll(`visualization[size="${t}"] animation[id="${e}"] frameSequence`);let n;return i.forEach(o=>{const s=o.children.length;(n==null||s>n)&&(n=s)}),n}getTransitionForAnimation(t,e){var i;const n=this.querySelector(`visualization[size="${t}"] animations animation[transitionTo="${e}"]`),o=Number((i=n?.getAttribute("id"))!==null&&i!==void 0?i:void 0);if(!isNaN(o))return{id:o,transitionTo:e}}getAnimation(t,e){var i;const n=this.querySelector(`visualization[size="${t}"] animations animation[id="${e}"]`);if(n==null)return;const o=Number((i=n?.getAttribute("transitionTo"))!==null&&i!==void 0?i:void 0);return{id:e,transitionTo:isNaN(o)?void 0:o}}getColor(t,e,i){var n;const o=this.querySelector(`visualization[size="${t}"] colors color[id="${e}"] colorLayer[id="${i}"]`);return(n=o?.getAttribute("color"))!==null&&n!==void 0?n:void 0}getFrameCount(t,e){const i=this.querySelectorAll(`visualization[size="${t}"] animation[id="${e}"] frameSequence`);let n;return i.forEach(o=>{var s;const a=o.parentElement,l=Number((s=a?.getAttribute("frameRepeat"))!==null&&s!==void 0?s:"1"),c=o.children.length*l;(n==null||c>n)&&(n=c)}),n}getAnimationIds(t){return this.querySelectorAll(`visualization[size="${t}"] animations animation`).map(i=>i.getAttribute("id")).filter(Yo.notNullOrUndefined).map(i=>Number(i))}getAnimationLayer(t,e,i){var n,o;const s=this.querySelector(`visualization[size="${t}"] animations animation[id="${e}"] animationLayer[id="${i}"]`);if(s==null)return;const a=Number((n=s.getAttribute("frameRepeat"))!==null&&n!==void 0?n:void 0),l=Number((o=s.getAttribute("loopCount"))!==null&&o!==void 0?o:void 0),c=Array.from(s.querySelectorAll("frameSequence frame"));return{id:e,frames:c.map(d=>{var g;return Number((g=d.getAttribute("id"))!==null&&g!==void 0?g:void 0)}),frameRepeat:isNaN(a)?void 0:a,loopCount:isNaN(l)?void 0:l}}getDirections(t){return this.querySelectorAll(`visualization[size="${t}"] directions direction`).map(i=>{var n;const o=(n=i.getAttribute("id"))!==null&&n!==void 0?n:void 0;return Number(o)})}getDirectionLayer(t,e,i){const n=this.querySelector(`visualization[size="${t}"] directions direction[id="${e}"] layer[id="${i}"]`);if(n==null)return;const o=this._getNumberFromAttributeValue(n.getAttribute("z")),s=this._getNumberFromAttributeValue(n.getAttribute("x")),a=this._getNumberFromAttributeValue(n.getAttribute("y"));return{z:o,x:s,y:a}}getLayerCount(t){var e;const i=this.querySelector(`visualization[size="${t}"]`);if(i==null)throw new Error("Invalid visualization");return Number((e=i.getAttribute("layerCount"))!==null&&e!==void 0?e:void 0)}getLayer(t,e){var i,n,o,s,a,l;const c=this.querySelector(`visualization[size="${t}"] layers layer[id="${e}"]`);if(c==null)return;const d=(i=c.getAttribute("id"))!==null&&i!==void 0?i:void 0,g=(n=c.getAttribute("z"))!==null&&n!==void 0?n:void 0,u=(o=c.getAttribute("tag"))!==null&&o!==void 0?o:void 0,h=(s=c.getAttribute("alpha"))!==null&&s!==void 0?s:void 0,f=(a=c.getAttribute("ink"))!==null&&a!==void 0?a:void 0,I=(l=c.getAttribute("ignoreMouse"))!==null&&l!==void 0?l:void 0,m=Number(d),y=Number(g),v=Number(h);if(isNaN(m))throw new Error("Invalid layer id");return{id:m,z:isNaN(y)?0:y,alpha:isNaN(v)?void 0:v,tag:u??void 0,ink:f??void 0,ignoreMouse:I!=null?I==="1":void 0}}toJson(){return{...this._getJsonForSize(64)}}_toJsonMap(t,e){const i={};return t.forEach(n=>{const o=e(n);o!=null&&(i[o]=n)}),i}_getJsonAnimations(t){const e=Array.from(this.document.querySelectorAll(`visualization[size="${t}"] animations animation`)).map(i=>{const n=Array.from(i.querySelectorAll("animationLayer")).map(a=>{const l=this._getNumberFromAttributeValue(a.getAttribute("id")),c=Array.from(a.querySelectorAll("frame")).map(h=>h.getAttribute("id")).filter(Yo.notNullOrUndefined).map(h=>Number(h)),d=this._getNumberFromAttributeValue(a.getAttribute("frameRepeat")),g=this._getNumberFromAttributeValue(a.getAttribute("loopCount")),u=this._getNumberFromAttributeValue(a.getAttribute("random"))===1;if(l!=null)return{id:l,frames:c,frameRepeat:d,loopCount:g,random:u}}).filter(Yo.notNullOrUndefined),o=this._getNumberFromAttributeValue(i.getAttribute("id")),s=this._getNumberFromAttributeValue(i.getAttribute("transitionTo"));return o==null?null:{id:o,layers:this._toJsonMap(n,a=>a.id.toString()),transitionTo:s}}).filter(Yo.notNullOrUndefined);return this._toJsonMap(e,i=>i.id.toString())}_getJsonColors(t){const e=Array.from(this.document.querySelectorAll(`visualization[size="${t}"] colors color`)).map(i=>{const n=i.getAttribute("id"),o=Array.from(i.querySelectorAll("colorLayer")).map(s=>{const a=s.getAttribute("id"),l=s.getAttribute("color");if(l==null)throw new Error("Invalid color");return{id:a,color:l}});return{id:n,layers:this._toJsonMap(o,s=>s.id)}});return this._toJsonMap(e,i=>i.id)}_getDirections(t){const e=Array.from(this.document.querySelectorAll(`visualization[size="${t}"] directions direction`)).map(i=>{const n=i.getAttribute("id"),o=Array.from(i.querySelectorAll("layer")).map(s=>{const a=s.getAttribute("id"),l=this._getNumberFromAttributeValue(s.getAttribute("x")),c=this._getNumberFromAttributeValue(s.getAttribute("y")),d=this._getNumberFromAttributeValue(s.getAttribute("z"));return{id:a,x:l,y:c,z:d}});return{id:n,layers:this._toJsonMap(o,s=>s.id)}});return this._toJsonMap(e,i=>i.id)}_getLayers(t){const e=Array.from(this.document.querySelectorAll(`visualization[size="${t}"] layers layer`)).map(i=>{var n,o;const s=this._getNumberFromAttributeValue(i.getAttribute("id")),a=(n=i.getAttribute("ink"))!==null&&n!==void 0?n:void 0,l=this._getNumberFromAttributeValue(i.getAttribute("alpha")),c=this._getNumberFromAttributeValue(i.getAttribute("z")),d=this._getNumberFromAttributeValue(i.getAttribute("ignoreMouse"))===1,g=(o=i.getAttribute("tag"))!==null&&o!==void 0?o:void 0;if(s==null)throw new Error("Invalid id");return{id:s,z:c??0,alpha:l,ignoreMouse:d,ink:a,tag:g}});return this._toJsonMap(e,i=>i.id.toString())}_getJsonForSize(t){return{[t.toString()]:{layerCount:this.getLayerCount(t),animations:this._getJsonAnimations(t),colors:this._getJsonColors(t),directions:this._getDirections(t),layers:this._getLayers(t)}}}_getNumberFromAttributeValue(t){if(t==null)return;const e=Number(t);if(!isNaN(e))return e}}Ka.FurnitureVisualizationData=rf;Object.defineProperty(Ja,"__esModule",{value:!0});Ja.XmlFurnitureAssetBundle=void 0;const hM=qi,cM=Qa,fM=$a,dM=Ka;class gM{constructor(t,e){this._type=t,this._assetBundle=e}async getAssets(){const t=await this._assetBundle.getString(`${this._type}_assets.bin`);return new cM.FurnitureAssetsData(t)}async getVisualization(){const t=await this._assetBundle.getString(`${this._type}_visualization.bin`);return new dM.FurnitureVisualizationData(t)}async getTexture(t){const e=await this._assetBundle.getBlob(`${t}.png`);return hM.HitTexture.fromBlob(e)}async getIndex(){const t=await this._assetBundle.getString("index.bin");return new fM.FurnitureIndexData(t)}}Ja.XmlFurnitureAssetBundle=gM;Object.defineProperty(fo,"__esModule",{value:!0});fo.FurnitureLoader=void 0;const pM=uo,IM=lo,vM=Ga,mM=Wa,yM=Ja;class xs{constructor(t){this._options=t,this._furnitureCache=new Map,this._assetBundles=new Map}get delay(){return this._artificalDelay}set delay(t){this._artificalDelay=t}static create(t,e=""){return new xs({furnitureData:t,getAssetBundle:async(i,n)=>{const o=new pM.LegacyAssetBundle(`${e}/hof_furni/${Tp(n,i)}`);return new yM.XmlFurnitureAssetBundle(i,o)}})}static createForJson(t,e=""){return new xs({furnitureData:t,getAssetBundle:async(i,n)=>{const o=await IM.ShroomAssetBundle.fromUrl(`${e}/hof_furni/${Tp(n,i)}.shroom`);return new vM.JsonFurnitureAssetBundle(o)}})}async loadFurni(t){this.delay!=null&&await new Promise(a=>setTimeout(a,this.delay));let e;if(t.kind==="id"){const a=await this._options.furnitureData.getTypeById(t.id,t.placementType);if(a==null)throw new Error("Couldn't determine type for furniture.");e=a}else e=t.type;const n=e.split("*")[0],o=await this._options.furnitureData.getRevisionForType(e);let s=this._furnitureCache.get(e);return s!=null||(s=mM.loadFurni(e,await this._getAssetBundle(n,o)),this._furnitureCache.set(n,s)),s}_getAssetBundle(t,e){const i=`${t}_${e}`,n=this._assetBundles.get(i);if(n!=null)return n;const o=this._options.getAssetBundle(t,e);return this._assetBundles.set(i,o),o}}fo.FurnitureLoader=xs;const Tp=(r,t)=>r==null?t:`${r}/${t}`;Object.defineProperty(ca,"__esModule",{value:!0});ca.Shroom=void 0;const _M=no,CM=oo,AM=fo,bM=ro;class nf{constructor(t){this.dependencies=t}static create(t){return this.createShared(t).for(t.application)}static createShared({resourcePath:t,configuration:e,animationTicker:i,avatarLoader:n,furnitureData:o,furnitureLoader:s}){const a=o??bM.FurnitureData.create(t),l=n??CM.AvatarLoader.createForAssetBundle(t),c=s??AM.FurnitureLoader.createForJson(a,t),d=e??{};return{for:g=>{const h={animationTicker:i??_M.AnimationTicker.create(g),avatarLoader:l,furnitureLoader:c,configuration:d,furnitureData:a,application:g};return new nf(h)}}}}ca.Shroom=nf;var qa={},wM=k&&k.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),xM=k&&k.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),PM=k&&k.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&wM(t,r,e);return xM(t,r),t};Object.defineProperty(qa,"__esModule",{value:!0});qa.Landscape=void 0;const Ee=PM(Zt),SM=Ai,TM=$n;class EM extends SM.RoomObject{constructor(){super(),this._wallHeight=0,this._wallHeightWithZ=0,this._masks=new Map,this._unsubscribe=void 0}get color(){return this._color}set color(t){this._color=t,this._updateLandscapeImages()}get leftTexture(){return this._leftTexturePromise}set leftTexture(t){this._leftTexturePromise=t,Promise.resolve(this._leftTexturePromise).then(e=>{this._leftTexture=e,this._updateLandscapeImages()})}get rightTexture(){return this._rightTexturePromise}set rightTexture(t){this._rightTexturePromise=t,Promise.resolve(this._rightTexturePromise).then(e=>{this._rightTexture=e,this._updateLandscapeImages()})}update(t){this._masks=t.masks,this._wallHeightWithZ=t.wallHeight,this._updateLandscapeImages()}destroyed(){var t,e;this._unsubscribe&&this._unsubscribe(),(t=this._container)===null||t===void 0||t.destroy(),(e=this._partNode)===null||e===void 0||e.remove()}registered(){this._partNode=this.roomVisualization.addPart(this),this._updateLandscapeImages()}_createDefaultMask(){return new Ee.Graphics}_getMask(t,e,i){const n=TM.getMaskId(t,e,i);if(n!=null){const o=this._masks.get(n);if(o!=null)return o}return this._createDefaultMask()}_updateLandscapeImages(){var t;if(!this.mounted)return;const e=FM(this.tilemap.getParsedTileTypes());(t=this._container)===null||t===void 0||t.destroy();const i=new Ee.Container;let n=0,o=0;e.forEach(s=>{const a=Math.abs(s.end-s.start)*32,l=new Ee.Container,c=new Ee.TilingSprite(Ee.Texture.WHITE,a,this._wallHeightWithZ);if(this.color!=null?c.tint=parseInt(this.color.slice(1),16):c.tint=16777215,c.y=-this._wallHeightWithZ,l.addChild(c),s.type==="rowWall"){const d=this.landscapeContainer.getMaskLevel(s.level,0),g=this._getMask(2,d.roomX,0);l.mask=g;const u=this.geometry.getPosition(s.level+1,s.start,0);if(l.transform.setFromMatrix(new Ee.Matrix(1,-.5,0,1)),l.x=u.x,l.y=u.y+16,this._leftTexture!=null){const h=new Ee.TilingSprite(this._leftTexture,a,this._leftTexture.height);h.tilePosition=new Ee.Point(n,0),h.texture=this._leftTexture,h.x=0,h.y=-this._leftTexture.height,l.addChild(h)}n+=a}else if(s.type==="colWall"){const d=this.landscapeContainer.getMaskLevel(0,s.level),g=this._getMask(4,0,d.roomY);l.mask=g;const u=this.geometry.getPosition(s.start+1,s.level+1,0);if(l.transform.setFromMatrix(new Ee.Matrix(1,.5,0,1)),l.x=u.x+32,l.y=u.y,this._rightTexture!=null){const h=new Ee.TilingSprite(this._rightTexture,a,this._rightTexture.height);h.texture=this._rightTexture,h.x=0,h.y=-this._rightTexture.height,h.tilePosition=new Ee.Point(o,0),l.addChild(h)}o+=a}i.addChild(l)}),this._container=i,this.roomVisualization.landscapeContainer.addChild(i)}}qa.Landscape=EM;const is=(r,t,e)=>{const i=r[e];if(i!=null)return i[t]};function FM(r){const{x:t,y:e}=MM(r);let i=t,n=e,o=!1,s;const a=[];for(;;){const l=is(r,i,n),c={x:i,y:n-1},d={x:i+1,y:n},g=is(r,c.x,c.y),u=is(r,d.x,d.y);if(l==null||l.type!=="wall"&&l.type!=="door")break;const h=f=>{if(s==null){s=f;return}if(s!=null&&s.type!==f.type){a.push(s),s=f;return}s={...s,level:f.level,end:f.end}};if(l.type==="wall")switch(l.kind){case"rowWall":case"innerCorner":h({type:"rowWall",start:n,end:n-1,level:i});break;case"colWall":case"outerCorner":h({type:"colWall",start:i,end:i+(o?0:1),level:n});break}else l.type==="door"&&h({type:"rowWall",start:n,end:n-1,level:i});if(o){s!=null&&a.push(s);break}g!=null&&(g.type==="wall"||g.type==="door")?(i=c.x,n=c.y):u!=null&&u.type==="wall"?(i=d.x,n=d.y):o=!0}return a}function MM(r){const t=r.length-1;let e=t,i=0;for(;;){const n=is(r,i,e);if(n!=null&&n.type==="wall")return{x:i,y:e};e--,e<0&&(e=t,i++)}}var tu={};Object.defineProperty(tu,"__esModule",{value:!0});tu.FurnitureRoomVisualization=void 0;class of{constructor(t){this._container=t}get container(){return this._container}static fromContainer(t){return new of(t)}addMask(){return{remove:()=>{},update:()=>{},sprite:null}}}tu.FurnitureRoomVisualization=of;var eu={},iu={};Object.defineProperty(iu,"__esModule",{value:!0});iu.getIntFromHex=void 0;function DM(r){return parseInt(r.replace(/^#/,""),16)}iu.getIntFromHex=DM;Object.defineProperty(eu,"__esModule",{value:!0});eu.FurnitureGuildCustomizedVisualization=void 0;const Ep=iu,LM=Qi,BM=bi;class Dr extends BM.FurnitureVisualization{constructor(t={}){super(),this._base=new LM.AnimatedFurnitureVisualization,this._refreshModifier=!1,this.primaryColor=this._normalizeColor(t.primaryColor),this.secondaryColor=this._normalizeColor(t.secondaryColor)}get primaryColor(){return this._primaryColor}set primaryColor(t){this._primaryColor=t,this._refreshModifier=!0}get secondaryColor(){return this._secondaryColor}set secondaryColor(t){this._secondaryColor=t,this._refreshModifier=!0}isAnimated(){return!0}update(){this._base.update()}setView(t){super.setView(t),this._base.setView(t)}destroy(){this._base.destroy()}updateFrame(t){this._refreshModifier&&(this._refreshModifier=!1,this._updateModifier()),this._base.updateFrame(t)}updateDirection(t){this._base.updateDirection(t)}updateAnimation(t){this._base.updateAnimation(t)}_updateModifier(){this._base.modifier=t=>this._modifyPart(t)}_normalizeColor(t){if(!(t==null||t.length===0))return t[0]==="#"?t.slice(1):t}_modifyPart(t){switch(t.tag){case Dr.PRIMARY_COLOR_TAG:this._primaryColor!=null&&t.setColor(Ep.getIntFromHex(this._primaryColor));break;case Dr.SECONDARY_COLOR_TAG:this._secondaryColor!=null&&t.setColor(Ep.getIntFromHex(this._secondaryColor));break}return t}}eu.FurnitureGuildCustomizedVisualization=Dr;Dr.PRIMARY_COLOR_TAG="COLOR1";Dr.SECONDARY_COLOR_TAG="COLOR2";var Lr={};Object.defineProperty(Lr,"__esModule",{value:!0});Lr.BasicFurnitureVisualization=Lr.StaticFurnitureVisualization=void 0;const RM=bi;class Hm extends RM.FurnitureVisualization{constructor(){super(...arguments),this._sprites=[],this._refreshFurniture=!1}setView(t){super.setView(t),this._update()}updateDirection(t){this._currentDirection!==t&&(this._currentDirection=t,this._update())}updateAnimation(t){this._animationId!==t&&(this._animationId=t,this._update())}updateFrame(){this.mounted&&this._refreshFurniture&&(this._refreshFurniture=!1,this._update())}update(){this._update()}destroy(){}_update(){this._currentDirection!=null&&(this.view.setDisplayAnimation(this._animationId),this.view.setDisplayDirection(this._currentDirection),this.view.updateDisplay(),this.view.getLayers().forEach(t=>t.setCurrentFrameIndex(0)))}}Lr.StaticFurnitureVisualization=Hm;Lr.BasicFurnitureVisualization=Hm;var ru={};Object.defineProperty(ru,"__esModule",{value:!0});ru.FurnitureBottleVisualization=void 0;const OM=Qi,ZM=bi;class Qe extends ZM.FurnitureVisualization{constructor(){super(...arguments),this._base=new OM.AnimatedFurnitureVisualization,this._stateQueue=[],this._running=!1}isAnimated(){return!0}destroy(){this._base.destroy()}update(){this._base.update()}setView(t){super.setView(t),this._base.setView(t)}updateFrame(t){if(this._stateQueue.length>0&&this._base.isLastFramePlayedForLayer(0)){const e=this._stateQueue.shift();e!=null&&this._base.setCurrentAnimation(e)}this._base.updateFrame(t)}updateDirection(t){this._base.updateDirection(t)}updateAnimation(t){if(t===Qe.ANIMATION_ID_ROLL.toString()&&!this._running){this._running=!0,this._stateQueue.push(Qe.ANIMATION_ID_ROLL);return}const e=Number(t);if(e>=0&&e<=7){if(this._running){this._running=!1,this._stateQueue.push(Qe.ANIMATION_ID_OFFSET_SLOW1),this._stateQueue.push(Qe.ANIMATION_ID_OFFSET_SLOW2+e),this._stateQueue.push(e);return}this._base.updateAnimation(t)}}}ru.FurnitureBottleVisualization=Qe;Qe.ANIMATION_ID_OFFSET_SLOW1=20;Qe.ANIMATION_ID_OFFSET_SLOW2=9;Qe.ANIMATION_ID_ROLL=-1;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.FURNITURE=r.TILE_CURSOR=r.AVATAR=r.RoomModelVisualization=r.WallRight=r.WallLeft=r.FurnitureVisualization=r.FurnitureBottleVisualization=r.BasicFurnitureVisualization=r.StaticFurnitureVisualization=r.FurnitureGuildCustomizedVisualization=r.AnimatedFurnitureVisualization=r.BaseAvatar=r.BaseFurniture=r.FurnitureRoomVisualization=r.AvatarAction=r.AvatarLoader=r.FurnitureLoader=r.AnimationTicker=r.Landscape=r.Shroom=r.FurnitureData=r.parseTileMapString=r.loadRoomTexture=r.RoomCamera=r.Room=r.WallFurniture=r.FloorFurniture=r.Avatar=r.RoomObject=void 0;var t=Ai;Object.defineProperty(r,"RoomObject",{enumerable:!0,get:function(){return t.RoomObject}});var e=Bs;Object.defineProperty(r,"Avatar",{enumerable:!0,get:function(){return e.Avatar}});var i=Gs;Object.defineProperty(r,"FloorFurniture",{enumerable:!0,get:function(){return i.FloorFurniture}});var n=ks;Object.defineProperty(r,"WallFurniture",{enumerable:!0,get:function(){return n.WallFurniture}});var o=Xs;Object.defineProperty(r,"Room",{enumerable:!0,get:function(){return o.Room}});var s=aa;Object.defineProperty(r,"RoomCamera",{enumerable:!0,get:function(){return s.RoomCamera}});var a=ua;Object.defineProperty(r,"loadRoomTexture",{enumerable:!0,get:function(){return a.loadRoomTexture}});var l=qn;Object.defineProperty(r,"parseTileMapString",{enumerable:!0,get:function(){return l.parseTileMapString}});var c=ro;Object.defineProperty(r,"FurnitureData",{enumerable:!0,get:function(){return c.FurnitureData}});var d=ca;Object.defineProperty(r,"Shroom",{enumerable:!0,get:function(){return d.Shroom}});var g=qa;Object.defineProperty(r,"Landscape",{enumerable:!0,get:function(){return g.Landscape}});var u=no;Object.defineProperty(r,"AnimationTicker",{enumerable:!0,get:function(){return u.AnimationTicker}});var h=fo;Object.defineProperty(r,"FurnitureLoader",{enumerable:!0,get:function(){return h.FurnitureLoader}});var f=oo;Object.defineProperty(r,"AvatarLoader",{enumerable:!0,get:function(){return f.AvatarLoader}});var I=Yr;Object.defineProperty(r,"AvatarAction",{enumerable:!0,get:function(){return I.AvatarAction}});var m=tu;Object.defineProperty(r,"FurnitureRoomVisualization",{enumerable:!0,get:function(){return m.FurnitureRoomVisualization}});var y=Ur;Object.defineProperty(r,"BaseFurniture",{enumerable:!0,get:function(){return y.BaseFurniture}});var v=Zn;Object.defineProperty(r,"BaseAvatar",{enumerable:!0,get:function(){return v.BaseAvatar}});var p=Qi;Object.defineProperty(r,"AnimatedFurnitureVisualization",{enumerable:!0,get:function(){return p.AnimatedFurnitureVisualization}});var _=eu;Object.defineProperty(r,"FurnitureGuildCustomizedVisualization",{enumerable:!0,get:function(){return _.FurnitureGuildCustomizedVisualization}});var A=Lr;Object.defineProperty(r,"StaticFurnitureVisualization",{enumerable:!0,get:function(){return A.StaticFurnitureVisualization}}),Object.defineProperty(r,"BasicFurnitureVisualization",{enumerable:!0,get:function(){return A.BasicFurnitureVisualization}});var b=ru;Object.defineProperty(r,"FurnitureBottleVisualization",{enumerable:!0,get:function(){return b.FurnitureBottleVisualization}});var P=bi;Object.defineProperty(r,"FurnitureVisualization",{enumerable:!0,get:function(){return P.FurnitureVisualization}});var E=zr;Object.defineProperty(r,"WallLeft",{enumerable:!0,get:function(){return E.WallLeft}});var C=eo;Object.defineProperty(r,"WallRight",{enumerable:!0,get:function(){return C.WallRight}});var x=to;Object.defineProperty(r,"RoomModelVisualization",{enumerable:!0,get:function(){return x.RoomModelVisualization}});var F=ge;Object.defineProperty(r,"AVATAR",{enumerable:!0,get:function(){return F.AVATAR}}),Object.defineProperty(r,"TILE_CURSOR",{enumerable:!0,get:function(){return F.TILE_CURSOR}}),Object.defineProperty(r,"FURNITURE",{enumerable:!0,get:function(){return F.FURNITURE}})})(de);const Wh={us:"www.habbo.com",br:"www.habbo.com.br",es:"www.habbo.es",nl:"www.habbo.nl",de:"www.habbo.de",fi:"www.habbo.fi",tr:"www.habbo.com.tr",it:"www.habbo.it",fr:"www.habbo.fr",s1:"s2.habbo.com",s2:"s2.habbo.com"};async function Fp(r,t="hd-99999-99999"){return"figureString"in r?{figureString:r.figureString}:r.hotel in Wh?fetch(`https://${Wh[r.hotel]}/api/public/users?name=${r.nick}`).then(e=>e.json()).then(e=>({figureString:e.figureString})).catch(e=>(console.error(e),{figureString:t})):{figureString:t}}let Ps=En();window.addEventListener("storage",r=>{Ps=En();for(const t in Ps)sf(t)});class Tt{static ROOM;static GRID;static DEFAULT_LOOK;ownAvatar=new de.Avatar({look:Tt.DEFAULT_LOOK,direction:0,roomX:0,roomY:0,roomZ:0});path=[];twitchUser;readyRes=()=>{};ready;constructor(t,e){if(typeof Tt.ROOM>"u"||typeof Tt.GRID>"u"||typeof Tt.DEFAULT_LOOK>"u")throw new Error("MiniAvatar isn't configured correctly.");this.ready=new Promise(i=>this.readyRes=i),this.twitchUser=t,this.initAvatar(e),setInterval(()=>{const i=this.path[0];i!=null&&(this.ownAvatar.walk(i.roomX,i.roomY,i.roomZ,{direction:i.direction}),this.path.shift())},500)}static posX=13;static posY=18;async initAvatar(t){const e=await Fp(t,Tt.DEFAULT_LOOK),i=Tt.getRandomTile();this.ownAvatar=new de.Avatar({look:e.figureString,direction:4,roomX:i.roomX,roomY:i.roomY,roomZ:0}),Tt.ROOM.addRoomObject(this.ownAvatar),this.initMovement(),this.readyRes()}movInterval=0;idleTimeout=0;exitTimeout=0;initMovement(){this.movInterval=window.setInterval(async()=>{if(this.path.length)return;const t=Tt.__unsafe__getRandomTile();!t||Math.sqrt((this.ownAvatar.roomX-t.roomX)**2+(this.ownAvatar.roomY-t.roomY)**2)>10||(this.path=await this.findPath(t))},500),this.ownAvatar.removeAction(de.AvatarAction.Sleep),this.ownAvatar.removeAction(de.AvatarAction.Sit),this.ownAvatar.roomZ=Tt.GRID[this.ownAvatar.roomX][this.ownAvatar.roomY],this.ownAvatar.effect="dance.1",this.refreshIdle()}stopMovement(){clearInterval(this.movInterval),this.path=[],this.ownAvatar.addAction(de.AvatarAction.Sleep),this.ownAvatar.addAction(de.AvatarAction.Sit),this.ownAvatar.roomZ-=.5,this.ownAvatar.effect=void 0,this.ownAvatar.direction%2!==0&&(this.ownAvatar.direction=(this.ownAvatar.direction+1)%8),this.exitTimeout=window.setTimeout(()=>{Tt.ROOM.removeRoomObject(this.ownAvatar),delete Ps[this.twitchUser]},1*60*60*1e3)}refreshIdle(t,e,i){clearTimeout(this.idleTimeout),clearTimeout(this.exitTimeout),this.idleTimeout=window.setTimeout(()=>{this.stopMovement()},15*60*1e3),this.ownAvatar.effect==null&&this.initMovement(),t&&e&&Fp({hotel:t,nick:e}).then(n=>{if(this.ownAvatar.look===n.figureString)return;Tt.ROOM.removeRoomObject(this.ownAvatar);const o=this.ownAvatar.effect;this.ownAvatar=new de.Avatar({look:n.figureString,direction:this.ownAvatar.direction,roomX:this.ownAvatar.roomX,roomY:this.ownAvatar.roomY,roomZ:this.ownAvatar.roomZ}),this.ownAvatar.effect=o,Tt.ROOM.addRoomObject(this.ownAvatar)})}static __unsafe__getRandomTile(){let t=Math.floor(Math.random()*Tt.GRID.length);if(!Tt.GRID[t])return;let e=Math.floor(Math.random()*Tt.GRID[t].length);if(Tt.GRID[t][e]!=-1)return{roomX:t,roomY:e,tile:Tt.GRID[t][e]}}static getRandomTile(){let t;do t=Tt.__unsafe__getRandomTile();while(!t);return t}static getAvatarDirectionFromDiff(t,e){const i=Math.sign(t),n=Math.sign(e);switch(i){case-1:switch(n){case-1:return 7;case 0:return 6;case 1:return 5}break;case 0:switch(n){case-1:return 0;case 1:return 4}break;case 1:switch(n){case-1:return 1;case 0:return 2;case 1:return 3}break}}findPath(t){return new Promise(e=>{const i=new Aw.js;i.setGrid(Tt.GRID),i.setAcceptableTiles([1,0]),i.enableDiagonals(),i.findPath(this.ownAvatar.roomX,this.ownAvatar.roomY,t.roomX,t.roomY,n=>{let o={x:this.ownAvatar.roomX,y:this.ownAvatar.roomY};const s=[];n.forEach((a,l)=>{if(l===0)return;const c=Tt.getAvatarDirectionFromDiff(a.x-o.x,a.y-o.y),d=Tt.ROOM.getTileAtPosition(a.x,a.y);if(d!=null){const g=()=>d.type==="tile"?d.z:d.type==="stairs"?d.z+.5:0;s.push({roomX:a.x,roomY:a.y,roomZ:g(),direction:c}),o={x:a.x,y:a.y}}}),e(s)}),i.calculate()})}async setEffect(t){await this.ready,this.ownAvatar.effect=t}}const gn={};function GM(r,t,e,i){if(gn[e]){gn[e].refreshIdle(r,t,i);return}const n=i?{figureString:i}:{hotel:r,nick:t};gn[e]=new Tt(e,n)}function Xh(r){r.action==="addPlayer"?GM(r.host,r.name,r.twitchUser,r.figureString):r.action==="setEffect"?(gn[r.twitchUser]||sf(r.twitchUser),gn[r.twitchUser].setEffect(r.effectId)):console.error("unimplemented action",r)}function sf(r){const t=Ps[r];t&&(t.hotel||t.figureString)?Xh({action:"addPlayer",host:t.hotel,name:t.nick,twitchUser:r,figureString:t.figureString}):Xh({action:"addPlayer",twitchUser:r})}function NM(r,t){Xh({action:"setEffect",twitchUser:r,effectId:t})}const jM=["/textures/floor/tile.png"];function kM(r,t){Tt.DEFAULT_LOOK=r.defaultLook??"hd-190-7-.ch-210-66-.lg-270-82-.sh-290-80-.ha-1015-61-61",ht.SCALE_MODE=Me.NEAREST;const e=30,i=r.tilemap??`
	${"00".padStart(e+1,"x")}
	${"000".padStart(e+1,"x")}
	${new Array(e-2).fill(null).map((l,c,d)=>("x".repeat(d.length-c-1)+"0000").padEnd(e+3,"x")).join(`
`)}
	${"00".padEnd(e+3,"x")}
`,n=de.parseTileMapString(i).map(l=>l.map(c=>c!=="x"?Number(c):-1));Tt.GRID=n;const o=new Nr({view:t,antialias:!1,resolution:window.devicePixelRatio,autoDensity:!0,width:r.width??1920,height:r.height??500,transparent:!0}),s=de.Shroom.create({application:o,resourcePath:"/resources"}),a=de.Room.create(s,{tilemap:i});return Tt.ROOM=a,a.x=-32,a.y=410,a.hideWalls=!!(r.hideWalls??!0),a.floorColor=r.floorColor??"#4d98e4",a.floorTexture=de.loadRoomTexture(jM[r.floorTexture??0]),o.stage.addChild(de.RoomCamera.forScreen(a)),{updateAvatar:sf,setEffect:NM}}const _e=Vm();console.log("Received options:",_e);if(!_e.userId||!_e.userName){const r="User name and user id are required.";throw window.alert(r),new Error(r)}const WM=document.querySelector("#chat-container"),{createChatMessage:XM}=Py(_e,WM),HM=document.querySelector("#room-container"),{updateAvatar:Ym,setEffect:Mp}=kM(_e,HM),Uo={visual:(r,t)=>{const e=t.trim().split(" ").filter(i=>!!i);e.length&&(e[1]?e[0]in Wh&&yf(r,{hotel:e[0],nick:e[1]}):yf(r,{figureString:e[0]}),Ym(r))},estilo:(r,t)=>{const e=t.trim().split(" ").filter(i=>!!i);e.length&&yy(r,e[0])},efeito:(r,t)=>{const e=t.trim().split(" ").filter(i=>!!i);e.length&&Mp(r,e[0])},"efeito:custom":(r,t)=>{Mp(r,t)}};Iy(_e,{onChatMessage(r,t){XM(r,t),Ym(r)}});my(_e,{onRewardRedeemed(r,t,e){const i=Object.keys(Uo).find(n=>_e[n]===t||n.includes(":")&&Object.keys(_e).find(o=>n.split(":")[0]===o.split(":")[0]&&_e[o]===t));if(i&&typeof Uo[i]=="function")if(i.includes(":")){const n=Object.keys(_e).find(o=>_e[o]===t).split(":")[1];Uo[i](r,n)}else Uo[i](r,e)}});
