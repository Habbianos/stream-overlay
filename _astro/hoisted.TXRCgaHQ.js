import{p as ly}from"./parseQuery.DTh2umxD.js";import{c as W,g as vn,r as hy,a as Kg}from"./___vite-browser-external_commonjs-proxy.E2dCRMl2.js";import{g as qg}from"./chatHistory.DzodbqSy.js";const Nc={us:"www.habbo.com",br:"www.habbo.com.br",es:"www.habbo.es",nl:"www.habbo.nl",de:"www.habbo.de",fi:"www.habbo.fi",tr:"www.habbo.com.tr",it:"www.habbo.it",fr:"www.habbo.fr",s1:"s2.habbo.com",s2:"s2.habbo.com"};async function jc(i,t="hd-99999-99999"){return"figureString"in i?{figureString:i.figureString}:i.hotel in Nc?fetch(`https://${Nc[i.hotel]}/api/public/users?name=${i.nick}`).then(e=>e.json()).then(e=>({figureString:e.figureString})).catch(e=>(console.error(e),{figureString:t})):{figureString:t}}var tp={};(function(i){(function(t){var e=t.Promise,r=e&&"resolve"in e&&"reject"in e&&"all"in e&&"race"in e&&function(){var C;return new e(function(T){C=T}),typeof C=="function"}();i?(i.Promise=r?e:E,i.Polyfill=E):r||(t.Promise=E);var n="pending",o="sealed",s="fulfilled",a="rejected",l=function(){};function c(C){return Object.prototype.toString.call(C)==="[object Array]"}var d=typeof setImmediate<"u"?setImmediate:setTimeout,g=[],u;function h(){for(var C=0;C<g.length;C++)g[C][0](g[C][1]);g=[],u=!1}function f(C,T){g.push([C,T]),u||(u=!0,d(h,0))}function v(C,T){function F(O){I(T,O)}function Z(O){_(T,O)}try{C(F,Z)}catch(O){Z(O)}}function m(C){var T=C.owner,F=T.state_,Z=T.data_,O=C[F],H=C.then;if(typeof O=="function"){F=s;try{Z=O(Z)}catch(X){_(H,X)}}y(H,Z)||(F===s&&I(H,Z),F===a&&_(H,Z))}function y(C,T){var F;try{if(C===T)throw new TypeError("A promises callback cannot return that same promise.");if(T&&(typeof T=="function"||typeof T=="object")){var Z=T.then;if(typeof Z=="function")return Z.call(T,function(O){F||(F=!0,T!==O?I(C,O):p(C,O))},function(O){F||(F=!0,_(C,O))}),!0}}catch(O){return F||_(C,O),!0}return!1}function I(C,T){(C===T||!y(C,T))&&p(C,T)}function p(C,T){C.state_===n&&(C.state_=o,C.data_=T,f(b,C))}function _(C,T){C.state_===n&&(C.state_=o,C.data_=T,f(P,C))}function A(C){var T=C.then_;C.then_=void 0;for(var F=0;F<T.length;F++)m(T[F])}function b(C){C.state_=s,A(C)}function P(C){C.state_=a,A(C)}function E(C){if(typeof C!="function")throw new TypeError("Promise constructor takes a function argument");if(!(this instanceof E))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],v(C,this)}E.prototype={constructor:E,state_:n,then_:null,data_:void 0,then:function(C,T){var F={owner:this,then:new this.constructor(l),fulfilled:C,rejected:T};return this.state_===s||this.state_===a?f(m,F):this.then_.push(F),F.then},catch:function(C){return this.then(null,C)}},E.all=function(C){var T=this;if(!c(C))throw new TypeError("You must pass an array to Promise.all().");return new T(function(F,Z){var O=[],H=0;function X(ot){return H++,function(lt){O[ot]=lt,--H||F(O)}}for(var U=0,k;U<C.length;U++)k=C[U],k&&typeof k.then=="function"?k.then(X(U),Z):O[U]=k;H||F(O)})},E.race=function(C){var T=this;if(!c(C))throw new TypeError("You must pass an array to Promise.race().");return new T(function(F,Z){for(var O=0,H;O<C.length;O++)H=C[O],H&&typeof H.then=="function"?H.then(F,Z):F(H)})},E.resolve=function(C){var T=this;return C&&typeof C=="object"&&C.constructor===T?C:new T(function(F){F(C)})},E.reject=function(C){var T=this;return new T(function(F,Z){Z(C)})}})(typeof window<"u"?window:typeof W<"u"?W:typeof self<"u"?self:W)})(tp);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Wc=Object.getOwnPropertySymbols,cy=Object.prototype.hasOwnProperty,fy=Object.prototype.propertyIsEnumerable;function dy(i){if(i==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(i)}function gy(){try{if(!Object.assign)return!1;var i=new String("abc");if(i[5]="de",Object.getOwnPropertyNames(i)[0]==="5")return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;var r=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(r.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(o){n[o]=o}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var py=gy()?Object.assign:function(i,t){for(var e,r=dy(i),n,o=1;o<arguments.length;o++){e=Object(arguments[o]);for(var s in e)cy.call(e,s)&&(r[s]=e[s]);if(Wc){n=Wc(e);for(var a=0;a<n.length;a++)fy.call(e,n[a])&&(r[n[a]]=e[n[a]])}}return r};const Iy=vn(py);/*!
 * @pixi/polyfill - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */window.Promise||(window.Promise=tp.Polyfill);Object.assign||(Object.assign=Iy);var vy=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(window.performance&&window.performance.now)){var yy=Date.now();window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-yy}}var Wa=Date.now(),Xc=["ms","moz","webkit","o"];for(var Xa=0;Xa<Xc.length&&!window.requestAnimationFrame;++Xa){var ka=Xc[Xa];window.requestAnimationFrame=window[ka+"RequestAnimationFrame"],window.cancelAnimationFrame=window[ka+"CancelAnimationFrame"]||window[ka+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(i){if(typeof i!="function")throw new TypeError(i+"is not a function");var t=Date.now(),e=vy+Wa-t;return e<0&&(e=0),Wa=t,window.setTimeout(function(){Wa=Date.now(),i(performance.now())},e)});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(i){return clearTimeout(i)});Math.sign||(Math.sign=function(t){return t=Number(t),t===0||isNaN(t)?t:t>0?1:-1});Number.isInteger||(Number.isInteger=function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t});window.ArrayBuffer||(window.ArrayBuffer=Array);window.Float32Array||(window.Float32Array=Array);window.Uint32Array||(window.Uint32Array=Array);window.Uint16Array||(window.Uint16Array=Array);window.Uint8Array||(window.Uint8Array=Array);window.Int32Array||(window.Int32Array=Array);var Ha=/iPhone/i,kc=/iPod/i,Hc=/iPad/i,Yc=/\biOS-universal(?:.+)Mac\b/i,Ya=/\bAndroid(?:.+)Mobile\b/i,Uc=/Android/i,Jr=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,io=/Silk/i,Ne=/Windows Phone/i,zc=/\bWindows(?:.+)ARM\b/i,Vc=/BlackBerry/i,Jc=/BB10/i,Qc=/Opera Mini/i,$c=/\b(CriOS|Chrome)(?:.+)Mobile/i,Kc=/Mobile(?:.+)Firefox\b/i,qc=function(i){return typeof i<"u"&&i.platform==="MacIntel"&&typeof i.maxTouchPoints=="number"&&i.maxTouchPoints>1&&typeof MSStream>"u"};function my(i){return function(t){return t.test(i)}}function _y(i){var t={userAgent:"",platform:"",maxTouchPoints:0};!i&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof i=="string"?t.userAgent=i:i&&i.userAgent&&(t={userAgent:i.userAgent,platform:i.platform,maxTouchPoints:i.maxTouchPoints||0});var e=t.userAgent,r=e.split("[FBAN");typeof r[1]<"u"&&(e=r[0]),r=e.split("Twitter"),typeof r[1]<"u"&&(e=r[0]);var n=my(e),o={apple:{phone:n(Ha)&&!n(Ne),ipod:n(kc),tablet:!n(Ha)&&(n(Hc)||qc(t))&&!n(Ne),universal:n(Yc),device:(n(Ha)||n(kc)||n(Hc)||n(Yc)||qc(t))&&!n(Ne)},amazon:{phone:n(Jr),tablet:!n(Jr)&&n(io),device:n(Jr)||n(io)},android:{phone:!n(Ne)&&n(Jr)||!n(Ne)&&n(Ya),tablet:!n(Ne)&&!n(Jr)&&!n(Ya)&&(n(io)||n(Uc)),device:!n(Ne)&&(n(Jr)||n(io)||n(Ya)||n(Uc))||n(/\bokhttp\b/i)},windows:{phone:n(Ne),tablet:n(zc),device:n(Ne)||n(zc)},other:{blackberry:n(Vc),blackberry10:n(Jc),opera:n(Qc),firefox:n(Kc),chrome:n($c),device:n(Vc)||n(Jc)||n(Qc)||n(Kc)||n($c)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}/*!
 * @pixi/settings - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ve=_y(window.navigator);function Cy(i){var t=!0;if(ve.tablet||ve.phone){if(ve.apple.device){var e=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(e){var r=parseInt(e[1],10);r<11&&(t=!1)}}if(ve.android.device){var e=navigator.userAgent.match(/Android\s([0-9.]*)/);if(e){var r=parseInt(e[1],10);r<7&&(t=!1)}}}return t?i:4}function Ay(){return!ve.apple.device}var ht={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:Cy(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:ve.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:Ay(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},ep={exports:{}};(function(i){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function n(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function o(l,c,d,g,u){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new n(d,g||l,u),f=e?e+c:c;return l._events[f]?l._events[f].fn?l._events[f]=[l._events[f],h]:l._events[f].push(h):(l._events[f]=h,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],d,g;if(this._eventsCount===0)return c;for(g in d=this._events)t.call(d,g)&&c.push(e?g.slice(1):g);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},a.prototype.listeners=function(c){var d=e?e+c:c,g=this._events[d];if(!g)return[];if(g.fn)return[g.fn];for(var u=0,h=g.length,f=new Array(h);u<h;u++)f[u]=g[u].fn;return f},a.prototype.listenerCount=function(c){var d=e?e+c:c,g=this._events[d];return g?g.fn?1:g.length:0},a.prototype.emit=function(c,d,g,u,h,f){var v=e?e+c:c;if(!this._events[v])return!1;var m=this._events[v],y=arguments.length,I,p;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,d),!0;case 3:return m.fn.call(m.context,d,g),!0;case 4:return m.fn.call(m.context,d,g,u),!0;case 5:return m.fn.call(m.context,d,g,u,h),!0;case 6:return m.fn.call(m.context,d,g,u,h,f),!0}for(p=1,I=new Array(y-1);p<y;p++)I[p-1]=arguments[p];m.fn.apply(m.context,I)}else{var _=m.length,A;for(p=0;p<_;p++)switch(m[p].once&&this.removeListener(c,m[p].fn,void 0,!0),y){case 1:m[p].fn.call(m[p].context);break;case 2:m[p].fn.call(m[p].context,d);break;case 3:m[p].fn.call(m[p].context,d,g);break;case 4:m[p].fn.call(m[p].context,d,g,u);break;default:if(!I)for(A=1,I=new Array(y-1);A<y;A++)I[A-1]=arguments[A];m[p].fn.apply(m[p].context,I)}}return!0},a.prototype.on=function(c,d,g){return o(this,c,d,g,!1)},a.prototype.once=function(c,d,g){return o(this,c,d,g,!0)},a.prototype.removeListener=function(c,d,g,u){var h=e?e+c:c;if(!this._events[h])return this;if(!d)return s(this,h),this;var f=this._events[h];if(f.fn)f.fn===d&&(!u||f.once)&&(!g||f.context===g)&&s(this,h);else{for(var v=0,m=[],y=f.length;v<y;v++)(f[v].fn!==d||u&&!f[v].once||g&&f[v].context!==g)&&m.push(f[v]);m.length?this._events[h]=m.length===1?m[0]:m:s(this,h)}return this},a.prototype.removeAllListeners=function(c){var d;return c?(d=e?e+c:c,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,i.exports=a})(ep);var by=ep.exports;const xi=vn(by);var wh={exports:{}};wh.exports=hs;wh.exports.default=hs;function hs(i,t,e){e=e||2;var r=t&&t.length,n=r?t[0]*e:i.length,o=rp(i,0,n,e,!0),s=[];if(!o||o.next===o.prev)return s;var a,l,c,d,g,u,h;if(r&&(o=Ty(i,t,o,e)),i.length>80*e){a=c=i[0],l=d=i[1];for(var f=e;f<n;f+=e)g=i[f],u=i[f+1],g<a&&(a=g),u<l&&(l=u),g>c&&(c=g),u>d&&(d=u);h=Math.max(c-a,d-l),h=h!==0?32767/h:0}return on(o,s,e,a,l,h,0),s}function rp(i,t,e,r,n){var o,s;if(n===wl(i,t,e,r)>0)for(o=t;o<e;o+=r)s=tf(o,i[o],i[o+1],s);else for(o=e-r;o>=t;o-=r)s=tf(o,i[o],i[o+1],s);return s&&cs(s,s.next)&&(an(s),s=s.next),s}function Lr(i,t){if(!i)return i;t||(t=i);var e=i,r;do if(r=!1,!e.steiner&&(cs(e,e.next)||Bt(e.prev,e,e.next)===0)){if(an(e),e=t=e.prev,e===e.next)break;r=!0}else e=e.next;while(r||e!==t);return t}function on(i,t,e,r,n,o,s){if(i){!s&&o&&By(i,r,n,o);for(var a=i,l,c;i.prev!==i.next;){if(l=i.prev,c=i.next,o?xy(i,r,n,o):wy(i)){t.push(l.i/e|0),t.push(i.i/e|0),t.push(c.i/e|0),an(i),i=c.next,a=c.next;continue}if(i=c,i===a){s?s===1?(i=Py(Lr(i),t,e),on(i,t,e,r,n,o,2)):s===2&&Sy(i,t,e,r,n,o):on(Lr(i),t,e,r,n,o,1);break}}}}function wy(i){var t=i.prev,e=i,r=i.next;if(Bt(t,e,r)>=0)return!1;for(var n=t.x,o=e.x,s=r.x,a=t.y,l=e.y,c=r.y,d=n<o?n<s?n:s:o<s?o:s,g=a<l?a<c?a:c:l<c?l:c,u=n>o?n>s?n:s:o>s?o:s,h=a>l?a>c?a:c:l>c?l:c,f=r.next;f!==t;){if(f.x>=d&&f.x<=u&&f.y>=g&&f.y<=h&&ri(n,a,o,l,s,c,f.x,f.y)&&Bt(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function xy(i,t,e,r){var n=i.prev,o=i,s=i.next;if(Bt(n,o,s)>=0)return!1;for(var a=n.x,l=o.x,c=s.x,d=n.y,g=o.y,u=s.y,h=a<l?a<c?a:c:l<c?l:c,f=d<g?d<u?d:u:g<u?g:u,v=a>l?a>c?a:c:l>c?l:c,m=d>g?d>u?d:u:g>u?g:u,y=Al(h,f,t,e,r),I=Al(v,m,t,e,r),p=i.prevZ,_=i.nextZ;p&&p.z>=y&&_&&_.z<=I;){if(p.x>=h&&p.x<=v&&p.y>=f&&p.y<=m&&p!==n&&p!==s&&ri(a,d,l,g,c,u,p.x,p.y)&&Bt(p.prev,p,p.next)>=0||(p=p.prevZ,_.x>=h&&_.x<=v&&_.y>=f&&_.y<=m&&_!==n&&_!==s&&ri(a,d,l,g,c,u,_.x,_.y)&&Bt(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;p&&p.z>=y;){if(p.x>=h&&p.x<=v&&p.y>=f&&p.y<=m&&p!==n&&p!==s&&ri(a,d,l,g,c,u,p.x,p.y)&&Bt(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;_&&_.z<=I;){if(_.x>=h&&_.x<=v&&_.y>=f&&_.y<=m&&_!==n&&_!==s&&ri(a,d,l,g,c,u,_.x,_.y)&&Bt(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function Py(i,t,e){var r=i;do{var n=r.prev,o=r.next.next;!cs(n,o)&&ip(n,r,r.next,o)&&sn(n,o)&&sn(o,n)&&(t.push(n.i/e|0),t.push(r.i/e|0),t.push(o.i/e|0),an(r),an(r.next),r=i=o),r=r.next}while(r!==i);return Lr(r)}function Sy(i,t,e,r,n,o){var s=i;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Zy(s,a)){var l=np(s,a);s=Lr(s,s.next),l=Lr(l,l.next),on(s,t,e,r,n,o,0),on(l,t,e,r,n,o,0);return}a=a.next}s=s.next}while(s!==i)}function Ty(i,t,e,r){var n=[],o,s,a,l,c;for(o=0,s=t.length;o<s;o++)a=t[o]*r,l=o<s-1?t[o+1]*r:i.length,c=rp(i,a,l,r,!1),c===c.next&&(c.steiner=!0),n.push(Ry(c));for(n.sort(Ey),o=0;o<n.length;o++)e=Fy(n[o],e);return e}function Ey(i,t){return i.x-t.x}function Fy(i,t){var e=My(i,t);if(!e)return t;var r=np(e,i);return Lr(r,r.next),Lr(e,e.next)}function My(i,t){var e=t,r=i.x,n=i.y,o=-1/0,s;do{if(n<=e.y&&n>=e.next.y&&e.next.y!==e.y){var a=e.x+(n-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(a<=r&&a>o&&(o=a,s=e.x<e.next.x?e:e.next,a===r))return s}e=e.next}while(e!==t);if(!s)return null;var l=s,c=s.x,d=s.y,g=1/0,u;e=s;do r>=e.x&&e.x>=c&&r!==e.x&&ri(n<d?r:o,n,c,d,n<d?o:r,n,e.x,e.y)&&(u=Math.abs(n-e.y)/(r-e.x),sn(e,i)&&(u<g||u===g&&(e.x>s.x||e.x===s.x&&Dy(s,e)))&&(s=e,g=u)),e=e.next;while(e!==l);return s}function Dy(i,t){return Bt(i.prev,i,t.prev)<0&&Bt(t.next,i,i.next)<0}function By(i,t,e,r){var n=i;do n.z===0&&(n.z=Al(n.x,n.y,t,e,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==i);n.prevZ.nextZ=null,n.prevZ=null,Ly(n)}function Ly(i){var t,e,r,n,o,s,a,l,c=1;do{for(e=i,i=null,o=null,s=0;e;){for(s++,r=e,a=0,t=0;t<c&&(a++,r=r.nextZ,!!r);t++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||e.z<=r.z)?(n=e,e=e.nextZ,a--):(n=r,r=r.nextZ,l--),o?o.nextZ=n:i=n,n.prevZ=o,o=n;e=r}o.nextZ=null,c*=2}while(s>1);return i}function Al(i,t,e,r,n){return i=(i-e)*n|0,t=(t-r)*n|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,i|t<<1}function Ry(i){var t=i,e=i;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==i);return e}function ri(i,t,e,r,n,o,s,a){return(n-s)*(t-a)>=(i-s)*(o-a)&&(i-s)*(r-a)>=(e-s)*(t-a)&&(e-s)*(o-a)>=(n-s)*(r-a)}function Zy(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!Oy(i,t)&&(sn(i,t)&&sn(t,i)&&Gy(i,t)&&(Bt(i.prev,i,t.prev)||Bt(i,t.prev,t))||cs(i,t)&&Bt(i.prev,i,i.next)>0&&Bt(t.prev,t,t.next)>0)}function Bt(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function cs(i,t){return i.x===t.x&&i.y===t.y}function ip(i,t,e,r){var n=oo(Bt(i,t,e)),o=oo(Bt(i,t,r)),s=oo(Bt(e,r,i)),a=oo(Bt(e,r,t));return!!(n!==o&&s!==a||n===0&&no(i,e,t)||o===0&&no(i,r,t)||s===0&&no(e,i,r)||a===0&&no(e,t,r))}function no(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function oo(i){return i>0?1:i<0?-1:0}function Oy(i,t){var e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&ip(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}function sn(i,t){return Bt(i.prev,i,i.next)<0?Bt(i,t,i.next)>=0&&Bt(i,i.prev,t)>=0:Bt(i,t,i.prev)<0||Bt(i,i.next,t)<0}function Gy(i,t){var e=i,r=!1,n=(i.x+t.x)/2,o=(i.y+t.y)/2;do e.y>o!=e.next.y>o&&e.next.y!==e.y&&n<(e.next.x-e.x)*(o-e.y)/(e.next.y-e.y)+e.x&&(r=!r),e=e.next;while(e!==i);return r}function np(i,t){var e=new bl(i.i,i.x,i.y),r=new bl(t.i,t.x,t.y),n=i.next,o=t.prev;return i.next=t,t.prev=i,e.next=n,n.prev=e,r.next=e,e.prev=r,o.next=r,r.prev=o,r}function tf(i,t,e,r){var n=new bl(i,t,e);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function an(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function bl(i,t,e){this.i=i,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}hs.deviation=function(i,t,e,r){var n=t&&t.length,o=n?t[0]*e:i.length,s=Math.abs(wl(i,0,o,e));if(n)for(var a=0,l=t.length;a<l;a++){var c=t[a]*e,d=a<l-1?t[a+1]*e:i.length;s-=Math.abs(wl(i,c,d,e))}var g=0;for(a=0;a<r.length;a+=3){var u=r[a]*e,h=r[a+1]*e,f=r[a+2]*e;g+=Math.abs((i[u]-i[f])*(i[h+1]-i[u+1])-(i[u]-i[h])*(i[f+1]-i[u+1]))}return s===0&&g===0?0:Math.abs((g-s)/s)};function wl(i,t,e,r){for(var n=0,o=t,s=e-r;o<e;o+=r)n+=(i[s]-i[o])*(i[o+1]+i[s+1]),s=o;return n}hs.flatten=function(i){for(var t=i[0][0].length,e={vertices:[],holes:[],dimensions:t},r=0,n=0;n<i.length;n++){for(var o=0;o<i[n].length;o++)for(var s=0;s<t;s++)e.vertices.push(i[n][o][s]);n>0&&(r+=i[n-1].length,e.holes.push(r))}return e};var Ny=wh.exports;const xh=vn(Ny);var Xr={},Wo={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */Wo.exports;(function(i,t){(function(e){var r=t&&!t.nodeType&&t,n=i&&!i.nodeType&&i,o=typeof W=="object"&&W;(o.global===o||o.window===o||o.self===o)&&(e=o);var s,a=2147483647,l=36,c=1,d=26,g=38,u=700,h=72,f=128,v="-",m=/^xn--/,y=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=l-c,A=Math.floor,b=String.fromCharCode,P;function E(et){throw new RangeError(p[et])}function C(et,Q){for(var rt=et.length,at=[];rt--;)at[rt]=Q(et[rt]);return at}function T(et,Q){var rt=et.split("@"),at="";rt.length>1&&(at=rt[0]+"@",et=rt[1]),et=et.replace(I,".");var N=et.split("."),pt=C(N,Q).join(".");return at+pt}function F(et){for(var Q=[],rt=0,at=et.length,N,pt;rt<at;)N=et.charCodeAt(rt++),N>=55296&&N<=56319&&rt<at?(pt=et.charCodeAt(rt++),(pt&64512)==56320?Q.push(((N&1023)<<10)+(pt&1023)+65536):(Q.push(N),rt--)):Q.push(N);return Q}function Z(et){return C(et,function(Q){var rt="";return Q>65535&&(Q-=65536,rt+=b(Q>>>10&1023|55296),Q=56320|Q&1023),rt+=b(Q),rt}).join("")}function O(et){return et-48<10?et-22:et-65<26?et-65:et-97<26?et-97:l}function H(et,Q){return et+22+75*(et<26)-((Q!=0)<<5)}function X(et,Q,rt){var at=0;for(et=rt?A(et/u):et>>1,et+=A(et/Q);et>_*d>>1;at+=l)et=A(et/_);return A(at+(_+1)*et/(et+g))}function U(et){var Q=[],rt=et.length,at,N=0,pt=f,dt=h,D,x,M,L,z,$,K,st,gt;for(D=et.lastIndexOf(v),D<0&&(D=0),x=0;x<D;++x)et.charCodeAt(x)>=128&&E("not-basic"),Q.push(et.charCodeAt(x));for(M=D>0?D+1:0;M<rt;){for(L=N,z=1,$=l;M>=rt&&E("invalid-input"),K=O(et.charCodeAt(M++)),(K>=l||K>A((a-N)/z))&&E("overflow"),N+=K*z,st=$<=dt?c:$>=dt+d?d:$-dt,!(K<st);$+=l)gt=l-st,z>A(a/gt)&&E("overflow"),z*=gt;at=Q.length+1,dt=X(N-L,at,L==0),A(N/at)>a-pt&&E("overflow"),pt+=A(N/at),N%=at,Q.splice(N++,0,pt)}return Z(Q)}function k(et){var Q,rt,at,N,pt,dt,D,x,M,L,z,$=[],K,st,gt,xt;for(et=F(et),K=et.length,Q=f,rt=0,pt=h,dt=0;dt<K;++dt)z=et[dt],z<128&&$.push(b(z));for(at=N=$.length,N&&$.push(v);at<K;){for(D=a,dt=0;dt<K;++dt)z=et[dt],z>=Q&&z<D&&(D=z);for(st=at+1,D-Q>A((a-rt)/st)&&E("overflow"),rt+=(D-Q)*st,Q=D,dt=0;dt<K;++dt)if(z=et[dt],z<Q&&++rt>a&&E("overflow"),z==Q){for(x=rt,M=l;L=M<=pt?c:M>=pt+d?d:M-pt,!(x<L);M+=l)xt=x-L,gt=l-L,$.push(b(H(L+xt%gt,0))),x=A(xt/gt);$.push(b(H(x,0))),pt=X(rt,st,at==N),rt=0,++at}++rt,++Q}return $.join("")}function ot(et){return T(et,function(Q){return m.test(Q)?U(Q.slice(4).toLowerCase()):Q})}function lt(et){return T(et,function(Q){return y.test(Q)?"xn--"+k(Q):Q})}if(s={version:"1.4.1",ucs2:{decode:F,encode:Z},decode:U,encode:k,toASCII:lt,toUnicode:ot},r&&n)if(i.exports==r)n.exports=s;else for(P in s)s.hasOwnProperty(P)&&(r[P]=s[P]);else e.punycode=s})(W)})(Wo,Wo.exports);var jy=Wo.exports,Wy=Error,Xy=EvalError,ky=RangeError,Hy=ReferenceError,op=SyntaxError,yn=TypeError,Yy=URIError,Uy=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),r=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var n=42;t[e]=n;for(e in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,e);if(s.value!==n||s.enumerable!==!0)return!1}return!0},ef=typeof Symbol<"u"&&Symbol,zy=Uy,Vy=function(){return typeof ef!="function"||typeof Symbol!="function"||typeof ef("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:zy()},Ua={__proto__:null,foo:{}},Jy=Object,Qy=function(){return{__proto__:Ua}.foo===Ua.foo&&!(Ua instanceof Jy)},$y="Function.prototype.bind called on incompatible ",Ky=Object.prototype.toString,qy=Math.max,tm="[object Function]",rf=function(t,e){for(var r=[],n=0;n<t.length;n+=1)r[n]=t[n];for(var o=0;o<e.length;o+=1)r[o+t.length]=e[o];return r},em=function(t,e){for(var r=[],n=e||0,o=0;n<t.length;n+=1,o+=1)r[o]=t[n];return r},rm=function(i,t){for(var e="",r=0;r<i.length;r+=1)e+=i[r],r+1<i.length&&(e+=t);return e},im=function(t){var e=this;if(typeof e!="function"||Ky.apply(e)!==tm)throw new TypeError($y+e);for(var r=em(arguments,1),n,o=function(){if(this instanceof n){var d=e.apply(this,rf(r,arguments));return Object(d)===d?d:this}return e.apply(t,rf(r,arguments))},s=qy(0,e.length-r.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(n=Function("binder","return function ("+rm(a,",")+"){ return binder.apply(this,arguments); }")(o),e.prototype){var c=function(){};c.prototype=e.prototype,n.prototype=new c,c.prototype=null}return n},nm=im,Ph=Function.prototype.bind||nm,om=Function.prototype.call,sm=Object.prototype.hasOwnProperty,am=Ph,um=am.call(om,sm),Ct,lm=Wy,hm=Xy,cm=ky,fm=Hy,li=op,ni=yn,dm=Yy,sp=Function,za=function(i){try{return sp('"use strict"; return ('+i+").constructor;")()}catch{}},Mr=Object.getOwnPropertyDescriptor;if(Mr)try{Mr({},"")}catch{Mr=null}var Va=function(){throw new ni},gm=Mr?function(){try{return arguments.callee,Va}catch{try{return Mr(arguments,"callee").get}catch{return Va}}}():Va,Qr=Vy(),pm=Qy(),Yt=Object.getPrototypeOf||(pm?function(i){return i.__proto__}:null),ei={},Im=typeof Uint8Array>"u"||!Yt?Ct:Yt(Uint8Array),Dr={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Ct:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ct:ArrayBuffer,"%ArrayIteratorPrototype%":Qr&&Yt?Yt([][Symbol.iterator]()):Ct,"%AsyncFromSyncIteratorPrototype%":Ct,"%AsyncFunction%":ei,"%AsyncGenerator%":ei,"%AsyncGeneratorFunction%":ei,"%AsyncIteratorPrototype%":ei,"%Atomics%":typeof Atomics>"u"?Ct:Atomics,"%BigInt%":typeof BigInt>"u"?Ct:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ct:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ct:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ct:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":lm,"%eval%":eval,"%EvalError%":hm,"%Float32Array%":typeof Float32Array>"u"?Ct:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ct:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ct:FinalizationRegistry,"%Function%":sp,"%GeneratorFunction%":ei,"%Int8Array%":typeof Int8Array>"u"?Ct:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ct:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ct:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Qr&&Yt?Yt(Yt([][Symbol.iterator]())):Ct,"%JSON%":typeof JSON=="object"?JSON:Ct,"%Map%":typeof Map>"u"?Ct:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Qr||!Yt?Ct:Yt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ct:Promise,"%Proxy%":typeof Proxy>"u"?Ct:Proxy,"%RangeError%":cm,"%ReferenceError%":fm,"%Reflect%":typeof Reflect>"u"?Ct:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ct:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Qr||!Yt?Ct:Yt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ct:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Qr&&Yt?Yt(""[Symbol.iterator]()):Ct,"%Symbol%":Qr?Symbol:Ct,"%SyntaxError%":li,"%ThrowTypeError%":gm,"%TypedArray%":Im,"%TypeError%":ni,"%Uint8Array%":typeof Uint8Array>"u"?Ct:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ct:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ct:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ct:Uint32Array,"%URIError%":dm,"%WeakMap%":typeof WeakMap>"u"?Ct:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ct:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ct:WeakSet};if(Yt)try{null.error}catch(i){var vm=Yt(Yt(i));Dr["%Error.prototype%"]=vm}var ym=function i(t){var e;if(t==="%AsyncFunction%")e=za("async function () {}");else if(t==="%GeneratorFunction%")e=za("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=za("async function* () {}");else if(t==="%AsyncGenerator%"){var r=i("%AsyncGeneratorFunction%");r&&(e=r.prototype)}else if(t==="%AsyncIteratorPrototype%"){var n=i("%AsyncGenerator%");n&&Yt&&(e=Yt(n.prototype))}return Dr[t]=e,e},nf={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},mn=Ph,Xo=um,mm=mn.call(Function.call,Array.prototype.concat),_m=mn.call(Function.apply,Array.prototype.splice),of=mn.call(Function.call,String.prototype.replace),ko=mn.call(Function.call,String.prototype.slice),Cm=mn.call(Function.call,RegExp.prototype.exec),Am=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,bm=/\\(\\)?/g,wm=function(t){var e=ko(t,0,1),r=ko(t,-1);if(e==="%"&&r!=="%")throw new li("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&e!=="%")throw new li("invalid intrinsic syntax, expected opening `%`");var n=[];return of(t,Am,function(o,s,a,l){n[n.length]=a?of(l,bm,"$1"):s||o}),n},xm=function(t,e){var r=t,n;if(Xo(nf,r)&&(n=nf[r],r="%"+n[0]+"%"),Xo(Dr,r)){var o=Dr[r];if(o===ei&&(o=ym(r)),typeof o>"u"&&!e)throw new ni("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new li("intrinsic "+t+" does not exist!")},Pi=function(t,e){if(typeof t!="string"||t.length===0)throw new ni("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new ni('"allowMissing" argument must be a boolean');if(Cm(/^%?[^%]*%?$/,t)===null)throw new li("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=wm(t),n=r.length>0?r[0]:"",o=xm("%"+n+"%",e),s=o.name,a=o.value,l=!1,c=o.alias;c&&(n=c[0],_m(r,mm([0,1],c)));for(var d=1,g=!0;d<r.length;d+=1){var u=r[d],h=ko(u,0,1),f=ko(u,-1);if((h==='"'||h==="'"||h==="`"||f==='"'||f==="'"||f==="`")&&h!==f)throw new li("property names with quotes must have matching quotes");if((u==="constructor"||!g)&&(l=!0),n+="."+u,s="%"+n+"%",Xo(Dr,s))a=Dr[s];else if(a!=null){if(!(u in a)){if(!e)throw new ni("base intrinsic for "+t+" exists, but the property is not available.");return}if(Mr&&d+1>=r.length){var v=Mr(a,u);g=!!v,g&&"get"in v&&!("originalValue"in v.get)?a=v.get:a=a[u]}else g=Xo(a,u),a=a[u];g&&!l&&(Dr[s]=a)}}return a},ap={exports:{}},Ja,sf;function Sh(){if(sf)return Ja;sf=1;var i=Pi,t=i("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return Ja=t,Ja}var Pm=Pi,Bo=Pm("%Object.getOwnPropertyDescriptor%",!0);if(Bo)try{Bo([],"length")}catch{Bo=null}var up=Bo,af=Sh(),Sm=op,$r=yn,uf=up,Tm=function(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new $r("`obj` must be an object or a function`");if(typeof e!="string"&&typeof e!="symbol")throw new $r("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new $r("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new $r("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new $r("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new $r("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!uf&&uf(t,e);if(af)af(t,e,{configurable:s===null&&l?l.configurable:!s,enumerable:n===null&&l?l.enumerable:!n,value:r,writable:o===null&&l?l.writable:!o});else if(a||!n&&!o&&!s)t[e]=r;else throw new Sm("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},xl=Sh(),lp=function(){return!!xl};lp.hasArrayLengthDefineBug=function(){if(!xl)return null;try{return xl([],"length",{value:1}).length!==1}catch{return!0}};var Em=lp,Fm=Pi,lf=Tm,Mm=Em(),hf=up,cf=yn,Dm=Fm("%Math.floor%"),Bm=function(t,e){if(typeof t!="function")throw new cf("`fn` is not a function");if(typeof e!="number"||e<0||e>4294967295||Dm(e)!==e)throw new cf("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,o=!0;if("length"in t&&hf){var s=hf(t,"length");s&&!s.configurable&&(n=!1),s&&!s.writable&&(o=!1)}return(n||o||!r)&&(Mm?lf(t,"length",e,!0,!0):lf(t,"length",e)),t};(function(i){var t=Ph,e=Pi,r=Bm,n=yn,o=e("%Function.prototype.apply%"),s=e("%Function.prototype.call%"),a=e("%Reflect.apply%",!0)||t.call(s,o),l=Sh(),c=e("%Math.max%");i.exports=function(u){if(typeof u!="function")throw new n("a function is required");var h=a(t,s,arguments);return r(h,1+c(0,u.length-(arguments.length-1)),!0)};var d=function(){return a(t,o,arguments)};l?l(i.exports,"apply",{value:d}):i.exports.apply=d})(ap);var Lm=ap.exports,hp=Pi,cp=Lm,Rm=cp(hp("String.prototype.indexOf")),Zm=function(t,e){var r=hp(t,!!e);return typeof r=="function"&&Rm(t,".prototype.")>-1?cp(r):r},Th=typeof Map=="function"&&Map.prototype,Qa=Object.getOwnPropertyDescriptor&&Th?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Ho=Th&&Qa&&typeof Qa.get=="function"?Qa.get:null,ff=Th&&Map.prototype.forEach,Eh=typeof Set=="function"&&Set.prototype,$a=Object.getOwnPropertyDescriptor&&Eh?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Yo=Eh&&$a&&typeof $a.get=="function"?$a.get:null,df=Eh&&Set.prototype.forEach,Om=typeof WeakMap=="function"&&WeakMap.prototype,Qi=Om?WeakMap.prototype.has:null,Gm=typeof WeakSet=="function"&&WeakSet.prototype,$i=Gm?WeakSet.prototype.has:null,Nm=typeof WeakRef=="function"&&WeakRef.prototype,gf=Nm?WeakRef.prototype.deref:null,jm=Boolean.prototype.valueOf,Wm=Object.prototype.toString,Xm=Function.prototype.toString,km=String.prototype.match,Fh=String.prototype.slice,or=String.prototype.replace,Hm=String.prototype.toUpperCase,pf=String.prototype.toLowerCase,fp=RegExp.prototype.test,If=Array.prototype.concat,Be=Array.prototype.join,Ym=Array.prototype.slice,vf=Math.floor,Pl=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Ka=Object.getOwnPropertySymbols,Sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hi=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ie=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hi||!0)?Symbol.toStringTag:null,dp=Object.prototype.propertyIsEnumerable,yf=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(i){return i.__proto__}:null);function mf(i,t){if(i===1/0||i===-1/0||i!==i||i&&i>-1e3&&i<1e3||fp.call(/e/,t))return t;var e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof i=="number"){var r=i<0?-vf(-i):vf(i);if(r!==i){var n=String(r),o=Fh.call(t,n.length+1);return or.call(n,e,"$&_")+"."+or.call(or.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return or.call(t,e,"$&_")}var Tl=hy,_f=Tl.custom,Cf=pp(_f)?_f:null,Um=function i(t,e,r,n){var o=e||{};if(rr(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(rr(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=rr(o,"customInspect")?o.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(rr(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(rr(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return vp(t,o);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var l=String(t);return a?mf(t,l):l}if(typeof t=="bigint"){var c=String(t)+"n";return a?mf(t,c):c}var d=typeof o.depth>"u"?5:o.depth;if(typeof r>"u"&&(r=0),r>=d&&d>0&&typeof t=="object")return El(t)?"[Array]":"[Object]";var g=h0(o,r);if(typeof n>"u")n=[];else if(Ip(n,t)>=0)return"[Circular]";function u(O,H,X){if(H&&(n=Ym.call(n),n.push(H)),X){var U={depth:o.depth};return rr(o,"quoteStyle")&&(U.quoteStyle=o.quoteStyle),i(O,U,r+1,n)}return i(O,o,r+1,n)}if(typeof t=="function"&&!Af(t)){var h=e0(t),f=so(t,u);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(f.length>0?" { "+Be.call(f,", ")+" }":"")}if(pp(t)){var v=hi?or.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Sl.call(t);return typeof t=="object"&&!hi?Ni(v):v}if(a0(t)){for(var m="<"+pf.call(String(t.nodeName)),y=t.attributes||[],I=0;I<y.length;I++)m+=" "+y[I].name+"="+gp(zm(y[I].value),"double",o);return m+=">",t.childNodes&&t.childNodes.length&&(m+="..."),m+="</"+pf.call(String(t.nodeName))+">",m}if(El(t)){if(t.length===0)return"[]";var p=so(t,u);return g&&!l0(p)?"["+Fl(p,g)+"]":"[ "+Be.call(p,", ")+" ]"}if(Jm(t)){var _=so(t,u);return!("cause"in Error.prototype)&&"cause"in t&&!dp.call(t,"cause")?"{ ["+String(t)+"] "+Be.call(If.call("[cause]: "+u(t.cause),_),", ")+" }":_.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+Be.call(_,", ")+" }"}if(typeof t=="object"&&s){if(Cf&&typeof t[Cf]=="function"&&Tl)return Tl(t,{depth:d-r});if(s!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(r0(t)){var A=[];return ff&&ff.call(t,function(O,H){A.push(u(H,t,!0)+" => "+u(O,t))}),bf("Map",Ho.call(t),A,g)}if(o0(t)){var b=[];return df&&df.call(t,function(O){b.push(u(O,t))}),bf("Set",Yo.call(t),b,g)}if(i0(t))return qa("WeakMap");if(s0(t))return qa("WeakSet");if(n0(t))return qa("WeakRef");if($m(t))return Ni(u(Number(t)));if(qm(t))return Ni(u(Pl.call(t)));if(Km(t))return Ni(jm.call(t));if(Qm(t))return Ni(u(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===W)return"{ [object globalThis] }";if(!Vm(t)&&!Af(t)){var P=so(t,u),E=yf?yf(t)===Object.prototype:t instanceof Object||t.constructor===Object,C=t instanceof Object?"":"null prototype",T=!E&&ie&&Object(t)===t&&ie in t?Fh.call(gr(t),8,-1):C?"Object":"",F=E||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",Z=F+(T||C?"["+Be.call(If.call([],T||[],C||[]),": ")+"] ":"");return P.length===0?Z+"{}":g?Z+"{"+Fl(P,g)+"}":Z+"{ "+Be.call(P,", ")+" }"}return String(t)};function gp(i,t,e){var r=(e.quoteStyle||t)==="double"?'"':"'";return r+i+r}function zm(i){return or.call(String(i),/"/g,"&quot;")}function El(i){return gr(i)==="[object Array]"&&(!ie||!(typeof i=="object"&&ie in i))}function Vm(i){return gr(i)==="[object Date]"&&(!ie||!(typeof i=="object"&&ie in i))}function Af(i){return gr(i)==="[object RegExp]"&&(!ie||!(typeof i=="object"&&ie in i))}function Jm(i){return gr(i)==="[object Error]"&&(!ie||!(typeof i=="object"&&ie in i))}function Qm(i){return gr(i)==="[object String]"&&(!ie||!(typeof i=="object"&&ie in i))}function $m(i){return gr(i)==="[object Number]"&&(!ie||!(typeof i=="object"&&ie in i))}function Km(i){return gr(i)==="[object Boolean]"&&(!ie||!(typeof i=="object"&&ie in i))}function pp(i){if(hi)return i&&typeof i=="object"&&i instanceof Symbol;if(typeof i=="symbol")return!0;if(!i||typeof i!="object"||!Sl)return!1;try{return Sl.call(i),!0}catch{}return!1}function qm(i){if(!i||typeof i!="object"||!Pl)return!1;try{return Pl.call(i),!0}catch{}return!1}var t0=Object.prototype.hasOwnProperty||function(i){return i in this};function rr(i,t){return t0.call(i,t)}function gr(i){return Wm.call(i)}function e0(i){if(i.name)return i.name;var t=km.call(Xm.call(i),/^function\s*([\w$]+)/);return t?t[1]:null}function Ip(i,t){if(i.indexOf)return i.indexOf(t);for(var e=0,r=i.length;e<r;e++)if(i[e]===t)return e;return-1}function r0(i){if(!Ho||!i||typeof i!="object")return!1;try{Ho.call(i);try{Yo.call(i)}catch{return!0}return i instanceof Map}catch{}return!1}function i0(i){if(!Qi||!i||typeof i!="object")return!1;try{Qi.call(i,Qi);try{$i.call(i,$i)}catch{return!0}return i instanceof WeakMap}catch{}return!1}function n0(i){if(!gf||!i||typeof i!="object")return!1;try{return gf.call(i),!0}catch{}return!1}function o0(i){if(!Yo||!i||typeof i!="object")return!1;try{Yo.call(i);try{Ho.call(i)}catch{return!0}return i instanceof Set}catch{}return!1}function s0(i){if(!$i||!i||typeof i!="object")return!1;try{$i.call(i,$i);try{Qi.call(i,Qi)}catch{return!0}return i instanceof WeakSet}catch{}return!1}function a0(i){return!i||typeof i!="object"?!1:typeof HTMLElement<"u"&&i instanceof HTMLElement?!0:typeof i.nodeName=="string"&&typeof i.getAttribute=="function"}function vp(i,t){if(i.length>t.maxStringLength){var e=i.length-t.maxStringLength,r="... "+e+" more character"+(e>1?"s":"");return vp(Fh.call(i,0,t.maxStringLength),t)+r}var n=or.call(or.call(i,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,u0);return gp(n,"single",t)}function u0(i){var t=i.charCodeAt(0),e={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return e?"\\"+e:"\\x"+(t<16?"0":"")+Hm.call(t.toString(16))}function Ni(i){return"Object("+i+")"}function qa(i){return i+" { ? }"}function bf(i,t,e,r){var n=r?Fl(e,r):Be.call(e,", ");return i+" ("+t+") {"+n+"}"}function l0(i){for(var t=0;t<i.length;t++)if(Ip(i[t],`
`)>=0)return!1;return!0}function h0(i,t){var e;if(i.indent==="	")e="	";else if(typeof i.indent=="number"&&i.indent>0)e=Be.call(Array(i.indent+1)," ");else return null;return{base:e,prev:Be.call(Array(t+1),e)}}function Fl(i,t){if(i.length===0)return"";var e=`
`+t.prev+t.base;return e+Be.call(i,","+e)+`
`+t.prev}function so(i,t){var e=El(i),r=[];if(e){r.length=i.length;for(var n=0;n<i.length;n++)r[n]=rr(i,n)?t(i[n],i):""}var o=typeof Ka=="function"?Ka(i):[],s;if(hi){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var l in i)rr(i,l)&&(e&&String(Number(l))===l&&l<i.length||hi&&s["$"+l]instanceof Symbol||(fp.call(/[^\w$]/,l)?r.push(t(l,i)+": "+t(i[l],i)):r.push(l+": "+t(i[l],i))));if(typeof Ka=="function")for(var c=0;c<o.length;c++)dp.call(i,o[c])&&r.push("["+t(o[c])+"]: "+t(i[o[c]],i));return r}var yp=Pi,Si=Zm,c0=Um,f0=yn,ao=yp("%WeakMap%",!0),uo=yp("%Map%",!0),d0=Si("WeakMap.prototype.get",!0),g0=Si("WeakMap.prototype.set",!0),p0=Si("WeakMap.prototype.has",!0),I0=Si("Map.prototype.get",!0),v0=Si("Map.prototype.set",!0),y0=Si("Map.prototype.has",!0),Mh=function(i,t){for(var e=i,r;(r=e.next)!==null;e=r)if(r.key===t)return e.next=r.next,r.next=i.next,i.next=r,r},m0=function(i,t){var e=Mh(i,t);return e&&e.value},_0=function(i,t,e){var r=Mh(i,t);r?r.value=e:i.next={key:t,next:i.next,value:e}},C0=function(i,t){return!!Mh(i,t)},A0=function(){var t,e,r,n={assert:function(o){if(!n.has(o))throw new f0("Side channel does not contain "+c0(o))},get:function(o){if(ao&&o&&(typeof o=="object"||typeof o=="function")){if(t)return d0(t,o)}else if(uo){if(e)return I0(e,o)}else if(r)return m0(r,o)},has:function(o){if(ao&&o&&(typeof o=="object"||typeof o=="function")){if(t)return p0(t,o)}else if(uo){if(e)return y0(e,o)}else if(r)return C0(r,o);return!1},set:function(o,s){ao&&o&&(typeof o=="object"||typeof o=="function")?(t||(t=new ao),g0(t,o,s)):uo?(e||(e=new uo),v0(e,o,s)):(r||(r={key:{},next:null}),_0(r,o,s))}};return n},b0=String.prototype.replace,w0=/%20/g,tu={RFC1738:"RFC1738",RFC3986:"RFC3986"},Dh={default:tu.RFC3986,formatters:{RFC1738:function(i){return b0.call(i,w0,"+")},RFC3986:function(i){return String(i)}},RFC1738:tu.RFC1738,RFC3986:tu.RFC3986},x0=Dh,eu=Object.prototype.hasOwnProperty,Tr=Array.isArray,Me=function(){for(var i=[],t=0;t<256;++t)i.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return i}(),P0=function(t){for(;t.length>1;){var e=t.pop(),r=e.obj[e.prop];if(Tr(r)){for(var n=[],o=0;o<r.length;++o)typeof r[o]<"u"&&n.push(r[o]);e.obj[e.prop]=n}}},mp=function(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)typeof t[n]<"u"&&(r[n]=t[n]);return r},S0=function i(t,e,r){if(!e)return t;if(typeof e!="object"){if(Tr(t))t.push(e);else if(t&&typeof t=="object")(r&&(r.plainObjects||r.allowPrototypes)||!eu.call(Object.prototype,e))&&(t[e]=!0);else return[t,e];return t}if(!t||typeof t!="object")return[t].concat(e);var n=t;return Tr(t)&&!Tr(e)&&(n=mp(t,r)),Tr(t)&&Tr(e)?(e.forEach(function(o,s){if(eu.call(t,s)){var a=t[s];a&&typeof a=="object"&&o&&typeof o=="object"?t[s]=i(a,o,r):t.push(o)}else t[s]=o}),t):Object.keys(e).reduce(function(o,s){var a=e[s];return eu.call(o,s)?o[s]=i(o[s],a,r):o[s]=a,o},n)},T0=function(t,e){return Object.keys(e).reduce(function(r,n){return r[n]=e[n],r},t)},E0=function(i,t,e){var r=i.replace(/\+/g," ");if(e==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},F0=function(t,e,r,n,o){if(t.length===0)return t;var s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),r==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});for(var a="",l=0;l<s.length;++l){var c=s.charCodeAt(l);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||o===x0.RFC1738&&(c===40||c===41)){a+=s.charAt(l);continue}if(c<128){a=a+Me[c];continue}if(c<2048){a=a+(Me[192|c>>6]+Me[128|c&63]);continue}if(c<55296||c>=57344){a=a+(Me[224|c>>12]+Me[128|c>>6&63]+Me[128|c&63]);continue}l+=1,c=65536+((c&1023)<<10|s.charCodeAt(l)&1023),a+=Me[240|c>>18]+Me[128|c>>12&63]+Me[128|c>>6&63]+Me[128|c&63]}return a},M0=function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],n=0;n<e.length;++n)for(var o=e[n],s=o.obj[o.prop],a=Object.keys(s),l=0;l<a.length;++l){var c=a[l],d=s[c];typeof d=="object"&&d!==null&&r.indexOf(d)===-1&&(e.push({obj:s,prop:c}),r.push(d))}return P0(e),t},D0=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},B0=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},L0=function(t,e){return[].concat(t,e)},R0=function(t,e){if(Tr(t)){for(var r=[],n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)},_p={arrayToObject:mp,assign:T0,combine:L0,compact:M0,decode:E0,encode:F0,isBuffer:B0,isRegExp:D0,maybeMap:R0,merge:S0},Cp=A0,Lo=_p,Ki=Dh,Z0=Object.prototype.hasOwnProperty,Ap={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},De=Array.isArray,O0=Array.prototype.push,bp=function(i,t){O0.apply(i,De(t)?t:[t])},G0=Date.prototype.toISOString,wf=Ki.default,kt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Lo.encode,encodeValuesOnly:!1,format:wf,formatter:Ki.formatters[wf],indices:!1,serializeDate:function(t){return G0.call(t)},skipNulls:!1,strictNullHandling:!1},N0=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},ru={},j0=function i(t,e,r,n,o,s,a,l,c,d,g,u,h,f,v,m,y,I){for(var p=t,_=I,A=0,b=!1;(_=_.get(ru))!==void 0&&!b;){var P=_.get(t);if(A+=1,typeof P<"u"){if(P===A)throw new RangeError("Cyclic object value");b=!0}typeof _.get(ru)>"u"&&(A=0)}if(typeof d=="function"?p=d(e,p):p instanceof Date?p=h(p):r==="comma"&&De(p)&&(p=Lo.maybeMap(p,function(et){return et instanceof Date?h(et):et})),p===null){if(s)return c&&!m?c(e,kt.encoder,y,"key",f):e;p=""}if(N0(p)||Lo.isBuffer(p)){if(c){var E=m?e:c(e,kt.encoder,y,"key",f);return[v(E)+"="+v(c(p,kt.encoder,y,"value",f))]}return[v(e)+"="+v(String(p))]}var C=[];if(typeof p>"u")return C;var T;if(r==="comma"&&De(p))m&&c&&(p=Lo.maybeMap(p,c)),T=[{value:p.length>0?p.join(",")||null:void 0}];else if(De(d))T=d;else{var F=Object.keys(p);T=g?F.sort(g):F}var Z=l?e.replace(/\./g,"%2E"):e,O=n&&De(p)&&p.length===1?Z+"[]":Z;if(o&&De(p)&&p.length===0)return O+"[]";for(var H=0;H<T.length;++H){var X=T[H],U=typeof X=="object"&&typeof X.value<"u"?X.value:p[X];if(!(a&&U===null)){var k=u&&l?X.replace(/\./g,"%2E"):X,ot=De(p)?typeof r=="function"?r(O,k):O:O+(u?"."+k:"["+k+"]");I.set(t,A);var lt=Cp();lt.set(ru,I),bp(C,i(U,ot,r,n,o,s,a,l,r==="comma"&&m&&De(p)?null:c,d,g,u,h,f,v,m,y,lt))}}return C},W0=function(t){if(!t)return kt;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var e=t.charset||kt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=Ki.default;if(typeof t.format<"u"){if(!Z0.call(Ki.formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}var n=Ki.formatters[r],o=kt.filter;(typeof t.filter=="function"||De(t.filter))&&(o=t.filter);var s;if(t.arrayFormat in Ap?s=t.arrayFormat:"indices"in t?s=t.indices?"indices":"repeat":s=kt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof t.allowDots>"u"?t.encodeDotInKeys===!0?!0:kt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:kt.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:kt.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:kt.charsetSentinel,commaRoundTrip:t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?kt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:kt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:kt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:kt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:kt.encodeValuesOnly,filter:o,format:r,formatter:n,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:kt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:kt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:kt.strictNullHandling}},X0=function(i,t){var e=i,r=W0(t),n,o;typeof r.filter=="function"?(o=r.filter,e=o("",e)):De(r.filter)&&(o=r.filter,n=o);var s=[];if(typeof e!="object"||e===null)return"";var a=Ap[r.arrayFormat],l=a==="comma"&&r.commaRoundTrip;n||(n=Object.keys(e)),r.sort&&n.sort(r.sort);for(var c=Cp(),d=0;d<n.length;++d){var g=n[d];r.skipNulls&&e[g]===null||bp(s,j0(e[g],g,a,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}var u=s.join(r.delimiter),h=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),u.length>0?h+u:""},ci=_p,Ml=Object.prototype.hasOwnProperty,k0=Array.isArray,Rt={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!0,decoder:ci.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},H0=function(i){return i.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},wp=function(i,t){return i&&typeof i=="string"&&t.comma&&i.indexOf(",")>-1?i.split(","):i},Y0="utf8=%26%2310003%3B",U0="utf8=%E2%9C%93",z0=function(t,e){var r={__proto__:null},n=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,o=e.parameterLimit===1/0?void 0:e.parameterLimit,s=n.split(e.delimiter,o),a=-1,l,c=e.charset;if(e.charsetSentinel)for(l=0;l<s.length;++l)s[l].indexOf("utf8=")===0&&(s[l]===U0?c="utf-8":s[l]===Y0&&(c="iso-8859-1"),a=l,l=s.length);for(l=0;l<s.length;++l)if(l!==a){var d=s[l],g=d.indexOf("]="),u=g===-1?d.indexOf("="):g+1,h,f;u===-1?(h=e.decoder(d,Rt.decoder,c,"key"),f=e.strictNullHandling?null:""):(h=e.decoder(d.slice(0,u),Rt.decoder,c,"key"),f=ci.maybeMap(wp(d.slice(u+1),e),function(m){return e.decoder(m,Rt.decoder,c,"value")})),f&&e.interpretNumericEntities&&c==="iso-8859-1"&&(f=H0(f)),d.indexOf("[]=")>-1&&(f=k0(f)?[f]:f);var v=Ml.call(r,h);v&&e.duplicates==="combine"?r[h]=ci.combine(r[h],f):(!v||e.duplicates==="last")&&(r[h]=f)}return r},V0=function(i,t,e,r){for(var n=r?t:wp(t,e),o=i.length-1;o>=0;--o){var s,a=i[o];if(a==="[]"&&e.parseArrays)s=e.allowEmptyArrays&&n===""?[]:[].concat(n);else{s=e.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,c=e.decodeDotInKeys?l.replace(/%2E/g,"."):l,d=parseInt(c,10);!e.parseArrays&&c===""?s={0:n}:!isNaN(d)&&a!==c&&String(d)===c&&d>=0&&e.parseArrays&&d<=e.arrayLimit?(s=[],s[d]=n):c!=="__proto__"&&(s[c]=n)}n=s}return n},J0=function(t,e,r,n){if(t){var o=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,s=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=r.depth>0&&s.exec(o),c=l?o.slice(0,l.index):o,d=[];if(c){if(!r.plainObjects&&Ml.call(Object.prototype,c)&&!r.allowPrototypes)return;d.push(c)}for(var g=0;r.depth>0&&(l=a.exec(o))!==null&&g<r.depth;){if(g+=1,!r.plainObjects&&Ml.call(Object.prototype,l[1].slice(1,-1))&&!r.allowPrototypes)return;d.push(l[1])}return l&&d.push("["+o.slice(l.index)+"]"),V0(d,e,r,n)}},Q0=function(t){if(!t)return Rt;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys<"u"&&typeof t.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(t.decoder!==null&&typeof t.decoder<"u"&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=typeof t.charset>"u"?Rt.charset:t.charset,r=typeof t.duplicates>"u"?Rt.duplicates:t.duplicates;if(r!=="combine"&&r!=="first"&&r!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var n=typeof t.allowDots>"u"?t.decodeDotInKeys===!0?!0:Rt.allowDots:!!t.allowDots;return{allowDots:n,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Rt.allowEmptyArrays,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:Rt.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:Rt.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:Rt.arrayLimit,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Rt.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:Rt.comma,decodeDotInKeys:typeof t.decodeDotInKeys=="boolean"?t.decodeDotInKeys:Rt.decodeDotInKeys,decoder:typeof t.decoder=="function"?t.decoder:Rt.decoder,delimiter:typeof t.delimiter=="string"||ci.isRegExp(t.delimiter)?t.delimiter:Rt.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:Rt.depth,duplicates:r,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:Rt.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:Rt.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:Rt.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Rt.strictNullHandling}},$0=function(i,t){var e=Q0(t);if(i===""||i===null||typeof i>"u")return e.plainObjects?Object.create(null):{};for(var r=typeof i=="string"?z0(i,e):i,n=e.plainObjects?Object.create(null):{},o=Object.keys(r),s=0;s<o.length;++s){var a=o[s],l=J0(a,r[a],e,typeof i=="string");n=ci.merge(n,l,e)}return e.allowSparse===!0?n:ci.compact(n)},K0=X0,q0=$0,t_=Dh,e_={formats:t_,parse:q0,stringify:K0},r_=jy;function me(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var i_=/^([a-z0-9.+-]+:)/i,n_=/:[0-9]*$/,o_=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,s_=["<",">",'"',"`"," ","\r",`
`,"	"],a_=["{","}","|","\\","^","`"].concat(s_),Dl=["'"].concat(a_),xf=["%","/","?",";","#"].concat(Dl),Pf=["/","?","#"],u_=255,Sf=/^[+a-z0-9A-Z_-]{0,63}$/,l_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,h_={javascript:!0,"javascript:":!0},Bl={javascript:!0,"javascript:":!0},oi={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Ll=e_;function _n(i,t,e){if(i&&typeof i=="object"&&i instanceof me)return i;var r=new me;return r.parse(i,t,e),r}me.prototype.parse=function(i,t,e){if(typeof i!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof i);var r=i.indexOf("?"),n=r!==-1&&r<i.indexOf("#")?"?":"#",o=i.split(n),s=/\\/g;o[0]=o[0].replace(s,"/"),i=o.join(n);var a=i;if(a=a.trim(),!e&&i.split("#").length===1){var l=o_.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=Ll.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var c=i_.exec(a);if(c){c=c[0];var d=c.toLowerCase();this.protocol=d,a=a.substr(c.length)}if(e||c||a.match(/^\/\/[^@/]+@[^@/]+/)){var g=a.substr(0,2)==="//";g&&!(c&&Bl[c])&&(a=a.substr(2),this.slashes=!0)}if(!Bl[c]&&(g||c&&!oi[c])){for(var u=-1,h=0;h<Pf.length;h++){var f=a.indexOf(Pf[h]);f!==-1&&(u===-1||f<u)&&(u=f)}var v,m;u===-1?m=a.lastIndexOf("@"):m=a.lastIndexOf("@",u),m!==-1&&(v=a.slice(0,m),a=a.slice(m+1),this.auth=decodeURIComponent(v)),u=-1;for(var h=0;h<xf.length;h++){var f=a.indexOf(xf[h]);f!==-1&&(u===-1||f<u)&&(u=f)}u===-1&&(u=a.length),this.host=a.slice(0,u),a=a.slice(u),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var I=this.hostname.split(/\./),h=0,p=I.length;h<p;h++){var _=I[h];if(_&&!_.match(Sf)){for(var A="",b=0,P=_.length;b<P;b++)_.charCodeAt(b)>127?A+="x":A+=_[b];if(!A.match(Sf)){var E=I.slice(0,h),C=I.slice(h+1),T=_.match(l_);T&&(E.push(T[1]),C.unshift(T[2])),C.length&&(a="/"+C.join(".")+a),this.hostname=E.join(".");break}}}this.hostname.length>u_?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=r_.toASCII(this.hostname));var F=this.port?":"+this.port:"",Z=this.hostname||"";this.host=Z+F,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!h_[d])for(var h=0,p=Dl.length;h<p;h++){var O=Dl[h];if(a.indexOf(O)!==-1){var H=encodeURIComponent(O);H===O&&(H=escape(O)),a=a.split(O).join(H)}}var X=a.indexOf("#");X!==-1&&(this.hash=a.substr(X),a=a.slice(0,X));var U=a.indexOf("?");if(U!==-1?(this.search=a.substr(U),this.query=a.substr(U+1),t&&(this.query=Ll.parse(this.query)),a=a.slice(0,U)):t&&(this.search="",this.query={}),a&&(this.pathname=a),oi[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",k=this.search||"";this.path=F+k}return this.href=this.format(),this};function c_(i){return typeof i=="string"&&(i=_n(i)),i instanceof me?i.format():me.prototype.format.call(i)}me.prototype.format=function(){var i=this.auth||"";i&&(i=encodeURIComponent(i),i=i.replace(/%3A/i,":"),i+="@");var t=this.protocol||"",e=this.pathname||"",r=this.hash||"",n=!1,o="";this.host?n=i+this.host:this.hostname&&(n=i+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(o=Ll.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var s=this.search||o&&"?"+o||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||oi[t])&&n!==!1?(n="//"+(n||""),e&&e.charAt(0)!=="/"&&(e="/"+e)):n||(n=""),r&&r.charAt(0)!=="#"&&(r="#"+r),s&&s.charAt(0)!=="?"&&(s="?"+s),e=e.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),s=s.replace("#","%23"),t+n+e+s+r};function f_(i,t){return _n(i,!1,!0).resolve(t)}me.prototype.resolve=function(i){return this.resolveObject(_n(i,!1,!0)).format()};function d_(i,t){return i?_n(i,!1,!0).resolveObject(t):t}me.prototype.resolveObject=function(i){if(typeof i=="string"){var t=new me;t.parse(i,!1,!0),i=t}for(var e=new me,r=Object.keys(this),n=0;n<r.length;n++){var o=r[n];e[o]=this[o]}if(e.hash=i.hash,i.href==="")return e.href=e.format(),e;if(i.slashes&&!i.protocol){for(var s=Object.keys(i),a=0;a<s.length;a++){var l=s[a];l!=="protocol"&&(e[l]=i[l])}return oi[e.protocol]&&e.hostname&&!e.pathname&&(e.pathname="/",e.path=e.pathname),e.href=e.format(),e}if(i.protocol&&i.protocol!==e.protocol){if(!oi[i.protocol]){for(var c=Object.keys(i),d=0;d<c.length;d++){var g=c[d];e[g]=i[g]}return e.href=e.format(),e}if(e.protocol=i.protocol,!i.host&&!Bl[i.protocol]){for(var p=(i.pathname||"").split("/");p.length&&!(i.host=p.shift()););i.host||(i.host=""),i.hostname||(i.hostname=""),p[0]!==""&&p.unshift(""),p.length<2&&p.unshift(""),e.pathname=p.join("/")}else e.pathname=i.pathname;if(e.search=i.search,e.query=i.query,e.host=i.host||"",e.auth=i.auth,e.hostname=i.hostname||i.host,e.port=i.port,e.pathname||e.search){var u=e.pathname||"",h=e.search||"";e.path=u+h}return e.slashes=e.slashes||i.slashes,e.href=e.format(),e}var f=e.pathname&&e.pathname.charAt(0)==="/",v=i.host||i.pathname&&i.pathname.charAt(0)==="/",m=v||f||e.host&&i.pathname,y=m,I=e.pathname&&e.pathname.split("/")||[],p=i.pathname&&i.pathname.split("/")||[],_=e.protocol&&!oi[e.protocol];if(_&&(e.hostname="",e.port=null,e.host&&(I[0]===""?I[0]=e.host:I.unshift(e.host)),e.host="",i.protocol&&(i.hostname=null,i.port=null,i.host&&(p[0]===""?p[0]=i.host:p.unshift(i.host)),i.host=null),m=m&&(p[0]===""||I[0]==="")),v)e.host=i.host||i.host===""?i.host:e.host,e.hostname=i.hostname||i.hostname===""?i.hostname:e.hostname,e.search=i.search,e.query=i.query,I=p;else if(p.length)I||(I=[]),I.pop(),I=I.concat(p),e.search=i.search,e.query=i.query;else if(i.search!=null){if(_){e.host=I.shift(),e.hostname=e.host;var A=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;A&&(e.auth=A.shift(),e.hostname=A.shift(),e.host=e.hostname)}return e.search=i.search,e.query=i.query,(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!I.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var b=I.slice(-1)[0],P=(e.host||i.host||I.length>1)&&(b==="."||b==="..")||b==="",E=0,C=I.length;C>=0;C--)b=I[C],b==="."?I.splice(C,1):b===".."?(I.splice(C,1),E++):E&&(I.splice(C,1),E--);if(!m&&!y)for(;E--;E)I.unshift("..");m&&I[0]!==""&&(!I[0]||I[0].charAt(0)!=="/")&&I.unshift(""),P&&I.join("/").substr(-1)!=="/"&&I.push("");var T=I[0]===""||I[0]&&I[0].charAt(0)==="/";if(_){e.hostname=T?"":I.length?I.shift():"",e.host=e.hostname;var A=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;A&&(e.auth=A.shift(),e.hostname=A.shift(),e.host=e.hostname)}return m=m||e.host&&I.length,m&&!T&&I.unshift(""),I.length>0?e.pathname=I.join("/"):(e.pathname=null,e.path=null),(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=i.auth||e.auth,e.slashes=e.slashes||i.slashes,e.href=e.format(),e};me.prototype.parseHost=function(){var i=this.host,t=n_.exec(i);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),i=i.substr(0,i.length-t.length)),i&&(this.hostname=i)};var g_=Xr.parse=_n;Xr.resolve=f_;Xr.resolveObject=d_;Xr.format=c_;Xr.Url=me;/*!
 * @pixi/constants - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Re;(function(i){i[i.WEBGL_LEGACY=0]="WEBGL_LEGACY",i[i.WEBGL=1]="WEBGL",i[i.WEBGL2=2]="WEBGL2"})(Re||(Re={}));var fi;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.WEBGL=1]="WEBGL",i[i.CANVAS=2]="CANVAS"})(fi||(fi={}));var un;(function(i){i[i.COLOR=16384]="COLOR",i[i.DEPTH=256]="DEPTH",i[i.STENCIL=1024]="STENCIL"})(un||(un={}));var ct;(function(i){i[i.NORMAL=0]="NORMAL",i[i.ADD=1]="ADD",i[i.MULTIPLY=2]="MULTIPLY",i[i.SCREEN=3]="SCREEN",i[i.OVERLAY=4]="OVERLAY",i[i.DARKEN=5]="DARKEN",i[i.LIGHTEN=6]="LIGHTEN",i[i.COLOR_DODGE=7]="COLOR_DODGE",i[i.COLOR_BURN=8]="COLOR_BURN",i[i.HARD_LIGHT=9]="HARD_LIGHT",i[i.SOFT_LIGHT=10]="SOFT_LIGHT",i[i.DIFFERENCE=11]="DIFFERENCE",i[i.EXCLUSION=12]="EXCLUSION",i[i.HUE=13]="HUE",i[i.SATURATION=14]="SATURATION",i[i.COLOR=15]="COLOR",i[i.LUMINOSITY=16]="LUMINOSITY",i[i.NORMAL_NPM=17]="NORMAL_NPM",i[i.ADD_NPM=18]="ADD_NPM",i[i.SCREEN_NPM=19]="SCREEN_NPM",i[i.NONE=20]="NONE",i[i.SRC_OVER=0]="SRC_OVER",i[i.SRC_IN=21]="SRC_IN",i[i.SRC_OUT=22]="SRC_OUT",i[i.SRC_ATOP=23]="SRC_ATOP",i[i.DST_OVER=24]="DST_OVER",i[i.DST_IN=25]="DST_IN",i[i.DST_OUT=26]="DST_OUT",i[i.DST_ATOP=27]="DST_ATOP",i[i.ERASE=26]="ERASE",i[i.SUBTRACT=28]="SUBTRACT",i[i.XOR=29]="XOR"})(ct||(ct={}));var ye;(function(i){i[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(ye||(ye={}));var di;(function(i){i[i.RGBA=6408]="RGBA",i[i.RGB=6407]="RGB",i[i.ALPHA=6406]="ALPHA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(di||(di={}));var sr;(function(i){i[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(sr||(sr={}));var Gt;(function(i){i[i.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",i[i.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",i[i.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",i[i.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",i[i.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",i[i.FLOAT=5126]="FLOAT",i[i.HALF_FLOAT=36193]="HALF_FLOAT"})(Gt||(Gt={}));var Se;(function(i){i[i.NEAREST=0]="NEAREST",i[i.LINEAR=1]="LINEAR"})(Se||(Se={}));var ze;(function(i){i[i.CLAMP=33071]="CLAMP",i[i.REPEAT=10497]="REPEAT",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(ze||(ze={}));var gi;(function(i){i[i.OFF=0]="OFF",i[i.POW2=1]="POW2",i[i.ON=2]="ON"})(gi||(gi={}));var Je;(function(i){i[i.NPM=0]="NPM",i[i.UNPACK=1]="UNPACK",i[i.PMA=2]="PMA",i[i.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",i[i.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",i[i.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(Je||(Je={}));var Pe;(function(i){i[i.NO=0]="NO",i[i.YES=1]="YES",i[i.AUTO=2]="AUTO",i[i.BLEND=0]="BLEND",i[i.CLEAR=1]="CLEAR",i[i.BLIT=2]="BLIT"})(Pe||(Pe={}));var Uo;(function(i){i[i.AUTO=0]="AUTO",i[i.MANUAL=1]="MANUAL"})(Uo||(Uo={}));var Te;(function(i){i.LOW="lowp",i.MEDIUM="mediump",i.HIGH="highp"})(Te||(Te={}));var oe;(function(i){i[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE"})(oe||(oe={}));var Rr;(function(i){i[i.NONE=0]="NONE",i[i.LOW=2]="LOW",i[i.MEDIUM=4]="MEDIUM",i[i.HIGH=8]="HIGH"})(Rr||(Rr={}));/*!
 * @pixi/utils - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ht.RETINA_PREFIX=/@([0-9\.]+)x/;ht.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var Rl=!1,Tf="5.3.3";function p_(){Rl=!0}function xp(i){var t;if(!Rl){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=[`
 %c %c %c PixiJS `+Tf+" -  "+i+`   %c  %c  http://www.pixijs.com/  %c %c %c%c 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(t=window.console).log.apply(t,e)}else window.console&&window.console.log("PixiJS "+Tf+" - "+i+" - http://www.pixijs.com/");Rl=!0}}var iu;function Pp(){return typeof iu>"u"&&(iu=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:ht.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!!(r&&r.getContextAttributes().stencil);if(r){var o=r.getExtension("WEBGL_lose_context");o&&o.loseContext()}return r=null,n}catch{return!1}}()),iu}function Zr(i,t){return t===void 0&&(t=[]),t[0]=(i>>16&255)/255,t[1]=(i>>8&255)/255,t[2]=(i&255)/255,t}function Bh(i){var t=i.toString(16);return t="000000".substr(0,6-t.length)+t,"#"+t}function Lh(i){return typeof i=="string"&&i[0]==="#"&&(i=i.substr(1)),parseInt(i,16)}function I_(i){return(i[0]*255<<16)+(i[1]*255<<8)+(i[2]*255|0)}function v_(){for(var i=[],t=[],e=0;e<32;e++)i[e]=e,t[e]=e;i[ct.NORMAL_NPM]=ct.NORMAL,i[ct.ADD_NPM]=ct.ADD,i[ct.SCREEN_NPM]=ct.SCREEN,t[ct.NORMAL]=ct.NORMAL_NPM,t[ct.ADD]=ct.ADD_NPM,t[ct.SCREEN]=ct.SCREEN_NPM;var r=[];return r.push(t),r.push(i),r}var Rh=v_();function Zh(i,t){return Rh[t?1:0][i]}function Sp(i,t,e,r){return e=e||new Float32Array(4),r||r===void 0?(e[0]=i[0]*t,e[1]=i[1]*t,e[2]=i[2]*t):(e[0]=i[0],e[1]=i[1],e[2]=i[2]),e[3]=t,e}function fs(i,t){if(t===1)return(t*255<<24)+i;if(t===0)return 0;var e=i>>16&255,r=i>>8&255,n=i&255;return e=e*t+.5|0,r=r*t+.5|0,n=n*t+.5|0,(t*255<<24)+(e<<16)+(r<<8)+n}function Oh(i,t,e,r){return e=e||new Float32Array(4),e[0]=(i>>16&255)/255,e[1]=(i>>8&255)/255,e[2]=(i&255)/255,(r||r===void 0)&&(e[0]*=t,e[1]*=t,e[2]*=t),e[3]=t,e}function Tp(i,t){t===void 0&&(t=null);var e=i*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error("Out buffer length is incorrect, got "+t.length+" and expected "+e);for(var r=0,n=0;r<e;r+=6,n+=4)t[r+0]=n+0,t[r+1]=n+1,t[r+2]=n+2,t[r+3]=n+0,t[r+4]=n+2,t[r+5]=n+3;return t}function Ep(i){if(i.BYTES_PER_ELEMENT===4)return i instanceof Float32Array?"Float32Array":i instanceof Uint32Array?"Uint32Array":"Int32Array";if(i.BYTES_PER_ELEMENT===2){if(i instanceof Uint16Array)return"Uint16Array"}else if(i.BYTES_PER_ELEMENT===1&&i instanceof Uint8Array)return"Uint8Array";return null}var y_={Float32Array,Uint32Array,Int32Array,Uint8Array};function m_(i,t){for(var e=0,r=0,n={},o=0;o<i.length;o++)r+=t[o],e+=i[o].length;for(var s=new ArrayBuffer(e*4),a=null,l=0,o=0;o<i.length;o++){var c=t[o],d=i[o],g=Ep(d);n[g]||(n[g]=new y_[g](s)),a=n[g];for(var u=0;u<d.length;u++){var h=(u/c|0)*r+l,f=u%c;a[h+f]=d[u]}l+=c}return new Float32Array(s)}function ln(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1}function Zl(i){return!(i&i-1)&&!!i}function Ol(i){var t=(i>65535?1:0)<<4;i>>>=t;var e=(i>255?1:0)<<3;return i>>>=e,t|=e,e=(i>15?1:0)<<2,i>>>=e,t|=e,e=(i>3?1:0)<<1,i>>>=e,t|=e,t|i>>1}function Br(i,t,e){var r=i.length,n;if(!(t>=r||e===0)){e=t+e>r?r-t:e;var o=r-e;for(n=t;n<o;++n)i[n]=i[n+e];i.length=o}}function Er(i){return i===0?0:i<0?-1:1}var __=0;function Or(){return++__}var Ef={};function it(i,t,e){if(e===void 0&&(e=3),!Ef[t]){var r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+i):(r=r.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+`
Deprecated since v`+i),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+i),console.warn(r))),Ef[t]=!0}}var Gl={},se=Object.create(null),pe=Object.create(null);function C_(){var i;for(i in se)se[i].destroy();for(i in pe)pe[i].destroy()}function A_(){var i;for(i in se)delete se[i];for(i in pe)delete pe[i]}var Nl=function(){function i(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||ht.RESOLUTION,this.resize(t,e)}return i.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},i.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},i.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(i.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0}),i}();function Fp(i){var t=i.width,e=i.height,r=i.getContext("2d"),n=r.getImageData(0,0,t,e),o=n.data,s=o.length,a={top:null,left:null,right:null,bottom:null},l=null,c,d,g;for(c=0;c<s;c+=4)o[c+3]!==0&&(d=c/4%t,g=~~(c/4/t),a.top===null&&(a.top=g),(a.left===null||d<a.left)&&(a.left=d),(a.right===null||a.right<d)&&(a.right=d+1),(a.bottom===null||a.bottom<g)&&(a.bottom=g));return a.top!==null&&(t=a.right-a.left,e=a.bottom-a.top+1,l=r.getImageData(a.left,a.top,t,e)),{height:e,width:t,data:l}}var Mp=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function b_(i){var t=Mp.exec(i);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}}var lo;function Dp(i,t){if(t===void 0&&(t=window.location),i.indexOf("data:")===0)return"";t=t||window.location,lo||(lo=document.createElement("a")),lo.href=i;var e=g_(lo.href),r=!e.port&&t.port===""||e.port===t.port;return e.hostname!==t.hostname||!r||e.protocol!==t.protocol?"anonymous":""}function hn(i,t){var e=ht.RETINA_PREFIX.exec(i);return e?parseFloat(e[1]):t!==void 0?t:1}const w_=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:pe,CanvasRenderTarget:Nl,DATA_URI:Mp,EventEmitter:xi,ProgramCache:Gl,TextureCache:se,clearTextureCache:A_,correctBlendMode:Zh,createIndicesForQuads:Tp,decomposeDataUri:b_,deprecation:it,destroyTextureCache:C_,determineCrossOrigin:Dp,earcut:xh,getBufferType:Ep,getResolutionOfUrl:hn,hex2rgb:Zr,hex2string:Bh,interleaveTypedArrays:m_,isMobile:ve,isPow2:Zl,isWebGLSupported:Pp,log2:Ol,nextPow2:ln,premultiplyBlendMode:Rh,premultiplyRgba:Sp,premultiplyTint:fs,premultiplyTintToRgba:Oh,removeItems:Br,rgb2hex:I_,sayHello:xp,sign:Er,skipHello:p_,string2hex:Lh,trimCanvas:Fp,uid:Or,url:Xr},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/math - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var pi=Math.PI*2,Bp=180/Math.PI,Lp=Math.PI/180,Lt;(function(i){i[i.POLY=0]="POLY",i[i.RECT=1]="RECT",i[i.CIRC=2]="CIRC",i[i.ELIP=3]="ELIP",i[i.RREC=4]="RREC"})(Lt||(Lt={}));var bt=function(){function i(t,e,r,n){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(n),this.type=Lt.RECT}return Object.defineProperty(i.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(i,"EMPTY",{get:function(){return new i(0,0,0,0)},enumerable:!1,configurable:!0}),i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},i.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},i.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},i.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},i.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),o=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=n,this.height=Math.max(o-n,0),this},i.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=n-this.y,this},i.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),o=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=n,this.height=o-n,this},i}(),Rp=function(){function i(t,e,r){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),this.x=t,this.y=e,this.radius=r,this.type=Lt.CIRC}return i.prototype.clone=function(){return new i(this.x,this.y,this.radius)},i.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,n=this.x-t,o=this.y-e;return n*=n,o*=o,n+o<=r},i.prototype.getBounds=function(){return new bt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},i}(),Zp=function(){function i(t,e,r,n){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),this.x=t,this.y=e,this.width=r,this.height=n,this.type=Lt.ELIP}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,n=(e-this.y)/this.height;return r*=r,n*=n,r+n<=1},i.prototype.getBounds=function(){return new bt(this.x-this.width,this.y-this.height,this.width,this.height)},i}(),si=function(){function i(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var n=Array.isArray(e[0])?e[0]:e;if(typeof n[0]!="number"){for(var o=[],s=0,a=n.length;s<a;s++)o.push(n[s].x,n[s].y);n=o}this.points=n,this.type=Lt.POLY,this.closeStroke=!0}return i.prototype.clone=function(){var t=this.points.slice(),e=new i(t);return e.closeStroke=this.closeStroke,e},i.prototype.contains=function(t,e){for(var r=!1,n=this.points.length/2,o=0,s=n-1;o<n;s=o++){var a=this.points[o*2],l=this.points[o*2+1],c=this.points[s*2],d=this.points[s*2+1],g=l>e!=d>e&&t<(c-a)*((e-l)/(d-l))+a;g&&(r=!r)}return r},i}(),Op=function(){function i(t,e,r,n,o){t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),o===void 0&&(o=20),this.x=t,this.y=e,this.width=r,this.height=n,this.radius=o,this.type=Lt.RREC}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.radius)},i.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),n=e-(this.y+this.radius),o=this.radius*this.radius;if(r*r+n*n<=o||(r=t-(this.x+this.width-this.radius),r*r+n*n<=o)||(n=e-(this.y+this.height-this.radius),r*r+n*n<=o)||(r=t-(this.x+this.radius),r*r+n*n<=o))return!0}return!1},i}(),Qt=function(){function i(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=t,this.y=e}return i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},i.prototype.copyTo=function(t){return t.set(this.x,this.y),t},i.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},i.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},i}(),Fr=function(){function i(t,e,r,n){r===void 0&&(r=0),n===void 0&&(n=0),this._x=r,this._y=n,this.cb=t,this.scope=e}return i.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new i(t,e,this._x,this._y)},i.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},i.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},i.prototype.copyTo=function(t){return t.set(this._x,this._y),t},i.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(i.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),i}(),Nt=function(){function i(t,e,r,n,o,s){t===void 0&&(t=1),e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=1),o===void 0&&(o=0),s===void 0&&(s=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=n,this.tx=o,this.ty=s}return i.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},i.prototype.set=function(t,e,r,n,o,s){return this.a=t,this.b=e,this.c=r,this.d=n,this.tx=o,this.ty=s,this},i.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},i.prototype.apply=function(t,e){e=e||new Qt;var r=t.x,n=t.y;return e.x=this.a*r+this.c*n+this.tx,e.y=this.b*r+this.d*n+this.ty,e},i.prototype.applyInverse=function(t,e){e=e||new Qt;var r=1/(this.a*this.d+this.c*-this.b),n=t.x,o=t.y;return e.x=this.d*r*n+-this.c*r*o+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*o+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,e},i.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},i.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},i.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),n=this.a,o=this.c,s=this.tx;return this.a=n*e-this.b*r,this.b=n*r+this.b*e,this.c=o*e-this.d*r,this.d=o*r+this.d*e,this.tx=s*e-this.ty*r,this.ty=s*r+this.ty*e,this},i.prototype.append=function(t){var e=this.a,r=this.b,n=this.c,o=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*o,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*o,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*o+this.ty,this},i.prototype.setTransform=function(t,e,r,n,o,s,a,l,c){return this.a=Math.cos(a+c)*o,this.b=Math.sin(a+c)*o,this.c=-Math.sin(a-l)*s,this.d=Math.cos(a-l)*s,this.tx=t-(r*this.a+n*this.c),this.ty=e-(r*this.b+n*this.d),this},i.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var r=this.a,n=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},i.prototype.decompose=function(t){var e=this.a,r=this.b,n=this.c,o=this.d,s=-Math.atan2(-n,o),a=Math.atan2(r,e),l=Math.abs(s+a);return l<1e-5||Math.abs(pi-l)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(n*n+o*o),t.position.x=this.tx,t.position.y=this.ty,t},i.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,n=this.d,o=this.tx,s=t*n-e*r;return this.a=n/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-n*o)/s,this.ty=-(t*this.ty-e*o)/s,this},i.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},i.prototype.clone=function(){var t=new i;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},i.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},i.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(i,"IDENTITY",{get:function(){return new i},enumerable:!1,configurable:!0}),Object.defineProperty(i,"TEMP_MATRIX",{get:function(){return new i},enumerable:!1,configurable:!0}),i}(),wr=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],xr=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Pr=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Sr=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],jl=[],Gp=[],ho=Math.sign;function x_(){for(var i=0;i<16;i++){var t=[];jl.push(t);for(var e=0;e<16;e++)for(var r=ho(wr[i]*wr[e]+Pr[i]*xr[e]),n=ho(xr[i]*wr[e]+Sr[i]*xr[e]),o=ho(wr[i]*Pr[e]+Pr[i]*Sr[e]),s=ho(xr[i]*Pr[e]+Sr[i]*Sr[e]),a=0;a<16;a++)if(wr[a]===r&&xr[a]===n&&Pr[a]===o&&Sr[a]===s){t.push(a);break}}for(var i=0;i<16;i++){var l=new Nt;l.set(wr[i],xr[i],Pr[i],Sr[i],0,0),Gp.push(l)}}x_();var Mt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(i){return wr[i]},uY:function(i){return xr[i]},vX:function(i){return Pr[i]},vY:function(i){return Sr[i]},inv:function(i){return i&8?i&15:-i&7},add:function(i,t){return jl[i][t]},sub:function(i,t){return jl[i][Mt.inv(t)]},rotate180:function(i){return i^4},isVertical:function(i){return(i&3)===2},byDirection:function(i,t){return Math.abs(i)*2<=Math.abs(t)?t>=0?Mt.S:Mt.N:Math.abs(t)*2<=Math.abs(i)?i>0?Mt.E:Mt.W:t>0?i>0?Mt.SE:Mt.SW:i>0?Mt.NE:Mt.NW},matrixAppendRotationInv:function(i,t,e,r){e===void 0&&(e=0),r===void 0&&(r=0);var n=Gp[Mt.inv(t)];n.tx=e,n.ty=r,i.append(n)}},Gh=function(){function i(){this.worldTransform=new Nt,this.localTransform=new Nt,this.position=new Fr(this.onChange,this,0,0),this.scale=new Fr(this.onChange,this,1,1),this.pivot=new Fr(this.onChange,this,0,0),this.skew=new Fr(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return i.prototype.onChange=function(){this._localID++},i.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},i.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},i.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}},i.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(i.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),i.IDENTITY=new i,i}();/*!
 * @pixi/display - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ht.SORTABLE_CHILDREN=!1;var cn=function(){function i(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return i.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},i.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},i.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?bt.EMPTY:(t=t||new bt(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},i.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},i.prototype.addQuad=function(t){var e=this.minX,r=this.minY,n=this.maxX,o=this.maxY,s=t[0],a=t[1];e=s<e?s:e,r=a<r?a:r,n=s>n?s:n,o=a>o?a:o,s=t[2],a=t[3],e=s<e?s:e,r=a<r?a:r,n=s>n?s:n,o=a>o?a:o,s=t[4],a=t[5],e=s<e?s:e,r=a<r?a:r,n=s>n?s:n,o=a>o?a:o,s=t[6],a=t[7],e=s<e?s:e,r=a<r?a:r,n=s>n?s:n,o=a>o?a:o,this.minX=e,this.minY=r,this.maxX=n,this.maxY=o},i.prototype.addFrame=function(t,e,r,n,o){this.addFrameMatrix(t.worldTransform,e,r,n,o)},i.prototype.addFrameMatrix=function(t,e,r,n,o){var s=t.a,a=t.b,l=t.c,c=t.d,d=t.tx,g=t.ty,u=this.minX,h=this.minY,f=this.maxX,v=this.maxY,m=s*e+l*r+d,y=a*e+c*r+g;u=m<u?m:u,h=y<h?y:h,f=m>f?m:f,v=y>v?y:v,m=s*n+l*r+d,y=a*n+c*r+g,u=m<u?m:u,h=y<h?y:h,f=m>f?m:f,v=y>v?y:v,m=s*e+l*o+d,y=a*e+c*o+g,u=m<u?m:u,h=y<h?y:h,f=m>f?m:f,v=y>v?y:v,m=s*n+l*o+d,y=a*n+c*o+g,u=m<u?m:u,h=y<h?y:h,f=m>f?m:f,v=y>v?y:v,this.minX=u,this.minY=h,this.maxX=f,this.maxY=v},i.prototype.addVertexData=function(t,e,r){for(var n=this.minX,o=this.minY,s=this.maxX,a=this.maxY,l=e;l<r;l+=2){var c=t[l],d=t[l+1];n=c<n?c:n,o=d<o?d:o,s=c>s?c:s,a=d>a?d:a}this.minX=n,this.minY=o,this.maxX=s,this.maxY=a},i.prototype.addVertices=function(t,e,r,n){this.addVerticesMatrix(t.worldTransform,e,r,n)},i.prototype.addVerticesMatrix=function(t,e,r,n,o,s){o===void 0&&(o=0),s===void 0&&(s=o);for(var a=t.a,l=t.b,c=t.c,d=t.d,g=t.tx,u=t.ty,h=this.minX,f=this.minY,v=this.maxX,m=this.maxY,y=r;y<n;y+=2){var I=e[y],p=e[y+1],_=a*I+c*p+g,A=d*p+l*I+u;h=Math.min(h,_-o),v=Math.max(v,_+o),f=Math.min(f,A-s),m=Math.max(m,A+s)}this.minX=h,this.minY=f,this.maxX=v,this.maxY=m},i.prototype.addBounds=function(t){var e=this.minX,r=this.minY,n=this.maxX,o=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>o?t.maxY:o},i.prototype.addBoundsMask=function(t,e){var r=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,o=t.maxX<e.maxX?t.maxX:e.maxX,s=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=o&&n<=s){var a=this.minX,l=this.minY,c=this.maxX,d=this.maxY;this.minX=r<a?r:a,this.minY=n<l?n:l,this.maxX=o>c?o:c,this.maxY=s>d?s:d}},i.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},i.prototype.addBoundsArea=function(t,e){var r=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,s=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=o&&n<=s){var a=this.minX,l=this.minY,c=this.maxX,d=this.maxY;this.minX=r<a?r:a,this.minY=n<l?n:l,this.maxX=o>c?o:c,this.maxY=s>d?s:d}},i.prototype.pad=function(t,e){t===void 0&&(t=0),e===void 0&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},i.prototype.addFramePad=function(t,e,r,n,o,s){t-=o,e-=s,r+=o,n+=s,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n},i}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Wl=function(i,t){return Wl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},Wl(i,t)};function Nh(i,t){Wl(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var jt=function(i){Nh(t,i);function t(){var e=i.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new Gh,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new cn,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return t.mixin=function(e){for(var r=Object.keys(e),n=0;n<r.length;++n){var o=r[n];Object.defineProperty(t.prototype,o,Object.getOwnPropertyDescriptor(e,o))}},t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(e,r){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new bt),r=this._boundsRect),this._bounds.getRectangle(r)},t.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new bt),e=this._localBoundsRect),this._localBounds||(this._localBounds=new cn);var r=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,s=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,e);return this.parent=n,this.transform=r,this._bounds=o,this._bounds.updateID+=this._boundsID-s,a},t.prototype.toGlobal=function(e,r,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,r)},t.prototype.toLocal=function(e,r,n,o){return r&&(e=r.toGlobal(e,n,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(e,r,n,o,s,a,l,c,d){return e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=1),o===void 0&&(o=1),s===void 0&&(s=0),a===void 0&&(a=0),l===void 0&&(l=0),c===void 0&&(c=0),d===void 0&&(d=0),this.position.x=e,this.position.y=r,this.scale.x=n||1,this.scale.y=o||1,this.rotation=s,this.skew.x=a,this.skew.y=l,this.pivot.x=c,this.pivot.y=d,this},t.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new jh),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},t.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*Bp},set:function(e){this.transform.rotation=e*Lp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){if(this._mask){var r=this._mask.maskObject||this._mask;r.renderable=!0,r.isMask=!1}if(this._mask=e,this._mask){var r=this._mask.maskObject||this._mask;r.renderable=!1,r.isMask=!0}},enumerable:!1,configurable:!0}),t}(xi),jh=function(i){Nh(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.sortDirty=null,e}return t}(jt);jt.prototype.displayObjectUpdateTransform=jt.prototype.updateTransform;function P_(i,t){return i.zIndex===t.zIndex?i._lastSortedIndex-t._lastSortedIndex:i.zIndex-t.zIndex}var Ee=function(i){Nh(t,i);function t(){var e=i.call(this)||this;return e.children=[],e.sortableChildren=ht.SORTABLE_CHILDREN,e.sortDirty=!1,e}return t.prototype.onChildrenChange=function(e){},t.prototype.addChild=function(){for(var e=arguments,r=[],n=0;n<arguments.length;n++)r[n]=e[n];if(r.length>1)for(var o=0;o<r.length;o++)this.addChild(r[o]);else{var s=r[0];s.parent&&s.parent.removeChild(s),s.parent=this,this.sortDirty=!0,s.transform._parentID=-1,this.children.push(s),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",s,this,this.children.length-1),s.emit("added",this)}return r[0]},t.prototype.addChildAt=function(e,r){if(r<0||r>this.children.length)throw new Error(e+"addChildAt: The index "+r+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(r,0,e),this._boundsID++,this.onChildrenChange(r),e.emit("added",this),this.emit("childAdded",e,this,r),e},t.prototype.swapChildren=function(e,r){if(e!==r){var n=this.getChildIndex(e),o=this.getChildIndex(r);this.children[n]=r,this.children[o]=e,this.onChildrenChange(n<o?n:o)}},t.prototype.getChildIndex=function(e){var r=this.children.indexOf(e);if(r===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return r},t.prototype.setChildIndex=function(e,r){if(r<0||r>=this.children.length)throw new Error("The index "+r+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(e);Br(this.children,n,1),this.children.splice(r,0,e),this.onChildrenChange(r)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(){for(var e=arguments,r=[],n=0;n<arguments.length;n++)r[n]=e[n];if(r.length>1)for(var o=0;o<r.length;o++)this.removeChild(r[o]);else{var s=r[0],a=this.children.indexOf(s);if(a===-1)return null;s.parent=null,s.transform._parentID=-1,Br(this.children,a,1),this._boundsID++,this.onChildrenChange(a),s.emit("removed",this),this.emit("childRemoved",s,this,a)}return r[0]},t.prototype.removeChildAt=function(e){var r=this.getChildAt(e);return r.parent=null,r.transform._parentID=-1,Br(this.children,e,1),this._boundsID++,this.onChildrenChange(e),r.emit("removed",this),this.emit("childRemoved",r,this,e),r},t.prototype.removeChildren=function(e,r){e===void 0&&(e=0),r===void 0&&(r=this.children.length);var n=e,o=r,s=o-n,a;if(s>0&&s<=o){a=this.children.splice(n,s);for(var l=0;l<a.length;++l)a[l].parent=null,a[l].transform&&(a[l].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var l=0;l<a.length;++l)a[l].emit("removed",this),this.emit("childRemoved",a[l],this,l);return a}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var e=!1,r=0,n=this.children.length;r<n;++r){var o=this.children[r];o._lastSortedIndex=r,!e&&o.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(P_),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,r=this.children.length;e<r;++e){var n=this.children[e];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var r=this.children[e];if(!(!r.visible||!r.renderable))if(r.calculateBounds(),r._mask){var n=r._mask.maskObject||r._mask;n.calculateBounds(),this._bounds.addBoundsMask(r._bounds,n._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(e,r){r===void 0&&(r=!1);var n=i.prototype.getLocalBounds.call(this,e);if(!r)for(var o=0,s=this.children.length;o<s;++o){var a=this.children[o];a.visible&&a.updateTransform()}return n},t.prototype._calculateBounds=function(){},t.prototype.render=function(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else{this._render(e);for(var r=0,n=this.children.length;r<n;++r)this.children[r].render(e)}},t.prototype.renderAdvanced=function(e){e.batch.flush();var r=this.filters,n=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<r.length;o++)r[o].enabled&&this._enabledFilters.push(r[o]);this._enabledFilters.length&&e.filter.push(this,this._enabledFilters)}n&&e.mask.push(this,this._mask),this._render(e);for(var o=0,s=this.children.length;o<s;o++)this.children[o].render(e);e.batch.flush(),n&&e.mask.pop(this),r&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},t.prototype._render=function(e){},t.prototype.destroy=function(e){i.prototype.destroy.call(this),this.sortDirty=!1;var r=typeof e=="boolean"?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(r)for(var o=0;o<n.length;++o)n[o].destroy(e)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var r=this.getLocalBounds().width;r!==0?this.scale.x=e/r:this.scale.x=1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var r=this.getLocalBounds().height;r!==0?this.scale.y=e/r:this.scale.y=1,this._height=e},enumerable:!1,configurable:!0}),t}(jt);Ee.prototype.containerUpdateTransform=Ee.prototype.updateTransform;/*!
 * @pixi/accessibility - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Np={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};jt.mixin(Np);var S_=9,co=100,T_=0,E_=0,Ff=2,Mf=1,F_=-1e3,M_=-1e3,D_=2,jp=function(){function i(t){this._hookDiv=null,(ve.tablet||ve.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width=co+"px",e.style.height=co+"px",e.style.position="absolute",e.style.top=T_+"px",e.style.left=E_+"px",e.style.zIndex=Ff.toString(),this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(i.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),i.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width=Mf+"px",e.style.height=Mf+"px",e.style.position="absolute",e.style.top=F_+"px",e.style.left=M_+"px",e.style.zIndex=D_.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessability for this content",e.addEventListener("focus",function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e},i.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},i.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},i.prototype.deactivate=function(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},i.prototype.updateAccessibleObjects=function(t){if(!(!t.visible||!t.accessibleChildren)){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,r=0;r<e.length;r++)this.updateAccessibleObjects(e[r])}},i.prototype.update=function(){var t=performance.now();if(!(ve.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),r=this.renderer.resolution,n=e.width/this.renderer.width*r,o=e.height/this.renderer.height*r,s=this.div;s.style.left=e.left+"px",s.style.top=e.top+"px",s.style.width=this.renderer.width+"px",s.style.height=this.renderer.height+"px";for(var a=0;a<this.children.length;a++){var l=this.children[a];if(l.renderId!==this.renderId)l._accessibleActive=!1,Br(this.children,a,1),this.div.removeChild(l._accessibleDiv),this.pool.push(l._accessibleDiv),l._accessibleDiv=null,a--;else{s=l._accessibleDiv;var c=l.hitArea,d=l.worldTransform;l.hitArea?(s.style.left=(d.tx+c.x*d.a)*n+"px",s.style.top=(d.ty+c.y*d.d)*o+"px",s.style.width=c.width*d.a*n+"px",s.style.height=c.height*d.d*o+"px"):(c=l.getBounds(),this.capHitArea(c),s.style.left=c.x*n+"px",s.style.top=c.y*o+"px",s.style.width=c.width*n+"px",s.style.height=c.height*o+"px",s.title!==l.accessibleTitle&&l.accessibleTitle!==null&&(s.title=l.accessibleTitle),s.getAttribute("aria-label")!==l.accessibleHint&&l.accessibleHint!==null&&s.setAttribute("aria-label",l.accessibleHint)),(l.accessibleTitle!==s.title||l.tabIndex!==s.tabIndex)&&(s.title=l.accessibleTitle,s.tabIndex=l.tabIndex,this.debug&&this.updateDebugHTML(s))}}this.renderId++}},i.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},i.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},i.prototype.addChild=function(t){var e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=co+"px",e.style.height=co+"px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=Ff.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title="displayObject "+t.tabIndex),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},i.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData),e.dispatchEvent(t.target.displayObject,"pointertap",e.eventData),e.dispatchEvent(t.target.displayObject,"tap",e.eventData)},i.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},i.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},i.prototype._onKeyDown=function(t){t.keyCode===S_&&this.activate()},i.prototype._onMouseMove=function(t){t.movementX===0&&t.movementY===0||this.deactivate()},i.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},i}();/*!
 * @pixi/ticker - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ht.TARGET_FPMS=.06;var Ze;(function(i){i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY"})(Ze||(Ze={}));var nu=function(){function i(t,e,r,n){e===void 0&&(e=null),r===void 0&&(r=0),n===void 0&&(n=!1),this.fn=t,this.context=e,this.priority=r,this.once=n,this.next=null,this.previous=null,this._destroyed=!1}return i.prototype.match=function(t,e){return e===void 0&&(e=null),this.fn===t&&this.context===e},i.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},i.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},i.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},i}(),Jt=function(){function i(){var t=this;this._head=new nu(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/ht.TARGET_FPMS,this.elapsedMS=1/ht.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return i.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},i.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},i.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},i.prototype.add=function(t,e,r){return r===void 0&&(r=Ze.NORMAL),this._addListener(new nu(t,e,r))},i.prototype.addOnce=function(t,e,r){return r===void 0&&(r=Ze.NORMAL),this._addListener(new nu(t,e,r,!0))},i.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(!e)t.connect(r);else{for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}return this._startIfPossible(),this},i.prototype.remove=function(t,e){for(var r=this._head.next;r;)r.match(t,e)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(i.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),i.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},i.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},i.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},i.prototype.update=function(t){t===void 0&&(t=performance.now());var e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var r=t-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=t-r%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*ht.TARGET_FPMS;for(var n=this._head,o=n.next;o;)o=o.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(i.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,e)/1e3,ht.TARGET_FPMS);this._maxElapsedMS=1/r},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"shared",{get:function(){if(!i._shared){var t=i._shared=new i;t.autoStart=!0,t._protected=!0}return i._shared},enumerable:!1,configurable:!0}),Object.defineProperty(i,"system",{get:function(){if(!i._system){var t=i._system=new i;t.autoStart=!0,t._protected=!0}return i._system},enumerable:!1,configurable:!0}),i}(),Wp=function(){function i(){}return i.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,Ze.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Jt.shared:new Jt,t.autoStart&&this.start()},i.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},i}();/*!
 * @pixi/interaction - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Xl=function(){function i(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Qt,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(i.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),i.prototype.getLocalPosition=function(t,e,r){return t.worldTransform.applyInverse(r||this.global,e)},i.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},i.prototype.reset=function(){this.isPrimary=!1},i}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var kl=function(i,t){return kl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},kl(i,t)};function B_(i,t){kl(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Xp=function(){function i(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return i.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},i.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},i}(),Ro=function(){function i(t){this._pointerId=t,this._flags=i.FLAGS.NONE}return i.prototype._doSet=function(t,e){e?this._flags=this._flags|t:this._flags=this._flags&~t},Object.defineProperty(i.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"none",{get:function(){return this._flags===i.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"over",{get:function(){return(this._flags&i.FLAGS.OVER)!==0},set:function(t){this._doSet(i.FLAGS.OVER,t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightDown",{get:function(){return(this._flags&i.FLAGS.RIGHT_DOWN)!==0},set:function(t){this._doSet(i.FLAGS.RIGHT_DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftDown",{get:function(){return(this._flags&i.FLAGS.LEFT_DOWN)!==0},set:function(t){this._doSet(i.FLAGS.LEFT_DOWN,t)},enumerable:!1,configurable:!0}),i.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),i}(),L_=function(){function i(){this._tempPoint=new Qt}return i.prototype.recursiveFindHit=function(t,e,r,n,o){if(!e||!e.visible)return!1;var s=t.data.global;o=e.interactive||o;var a=!1,l=o,c=!0;if(e.hitArea?(n&&(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(n=!1,c=!1)),l=!1):e._mask&&n&&(e._mask.containsPoint&&e._mask.containsPoint(s)||(n=!1)),c&&e.interactiveChildren&&e.children)for(var d=e.children,g=d.length-1;g>=0;g--){var u=d[g],h=this.recursiveFindHit(t,u,r,n,l);if(h){if(!u.parent)continue;l=!1,h&&(t.target&&(n=!1),a=!0)}}return o&&(n&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(s)&&(a=!0),e.interactive&&(a&&!t.target&&(t.target=e),r&&r(t,e,!!a))),a},i.prototype.findHit=function(t,e,r,n){this.recursiveFindHit(t,e,r,n,!1)},i}(),kp={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(i){i?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};jt.mixin(kp);var fo=1,go={target:null,data:{global:null}},Hp=function(i){B_(t,i);function t(e,r){var n=i.call(this)||this;return r=r||{},n.renderer=e,n.autoPreventDefault=r.autoPreventDefault!==void 0?r.autoPreventDefault:!0,n.interactionFrequency=r.interactionFrequency||10,n.mouse=new Xl,n.mouse.identifier=fo,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[fo]=n.mouse,n.interactionDataPool=[],n.eventData=new Xp,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.tickerAdded=!1,n.mouseOverRenderer=!1,n.supportsTouchEvents="ontouchstart"in window,n.supportsPointerEvents=!!window.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n.resolution=1,n.delayedEvents=[],n.search=new L_,n._tempDisplayObject=new jh,n._useSystemTicker=r.useSystemTicker!==void 0?r.useSystemTicker:!0,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return Object.defineProperty(t.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(e){this._useSystemTicker=e,e?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(e,r){return go.target=null,go.data.global=e,r||(r=this.lastObjectRendered),this.processInteractive(go,r,null,!0),go.target},t.prototype.setTargetElement=function(e,r){r===void 0&&(r=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=e,this.resolution=r,this.addEvents(),this.addTickerListener()},t.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(Jt.system.add(this.tickerUpdate,this,Ze.INTERACTION),this.tickerAdded=!0)},t.prototype.removeTickerListener=function(){this.tickerAdded&&(Jt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},t.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var e=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},t.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var e=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},t.prototype.tickerUpdate=function(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},t.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var e in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var r=this.activeInteractionData[e];if(r.originalEvent&&r.pointerType!=="touch"){var n=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(e){if(e=e||"default",this.currentCursorMode!==e){this.currentCursorMode=e;var r=this.cursorStyles[e];if(r)switch(typeof r){case"string":this.interactionDOMElement.style.cursor=r;break;case"function":r(e);break;case"object":Object.assign(this.interactionDOMElement.style,r);break}else typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.interactionDOMElement.style.cursor=e)}},t.prototype.dispatchEvent=function(e,r,n){(!n.stopPropagationHint||e===n.stopsPropagatingAt)&&(n.currentTarget=e,n.type=r,e.emit(r,n),e[r]&&e[r](n))},t.prototype.delayDispatchEvent=function(e,r,n){this.delayedEvents.push({displayObject:e,eventString:r,eventData:n})},t.prototype.mapPositionToPoint=function(e,r,n){var o;this.interactionDOMElement.parentElement?o=this.interactionDOMElement.getBoundingClientRect():o={x:0,y:0,width:0,height:0};var s=1/this.resolution;e.x=(r-o.left)*(this.interactionDOMElement.width/o.width)*s,e.y=(n-o.top)*(this.interactionDOMElement.height/o.height)*s},t.prototype.processInteractive=function(e,r,n,o){var s=this.search.findHit(e,r,n,o),a=this.delayedEvents;if(!a.length)return s;e.stopPropagationHint=!1;var l=a.length;this.delayedEvents=[];for(var c=0;c<l;c++){var d=a[c],g=d.displayObject,u=d.eventString,h=d.eventData;h.stopsPropagatingAt===g&&(h.stopPropagationHint=!0),this.dispatchEvent(g,u,h)}return s},t.prototype.onPointerDown=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var r=this.normalizeToPointerData(e);if(this.autoPreventDefault&&r[0].isNormalized){var n=e.cancelable||!("cancelable"in e);n&&e.preventDefault()}for(var o=r.length,s=0;s<o;s++){var a=r[s],l=this.getInteractionDataForPointerId(a),c=this.configureInteractionEventForDOMEvent(this.eventData,a,l);if(c.data.originalEvent=e,this.processInteractive(c,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",c),a.pointerType==="touch")this.emit("touchstart",c);else if(a.pointerType==="mouse"||a.pointerType==="pen"){var d=a.button===2;this.emit(d?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(e,r,n){var o=e.data,s=e.data.identifier;if(n){if(r.trackedPointers[s]||(r.trackedPointers[s]=new Ro(s)),this.dispatchEvent(r,"pointerdown",e),o.pointerType==="touch")this.dispatchEvent(r,"touchstart",e);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var a=o.button===2;a?r.trackedPointers[s].rightDown=!0:r.trackedPointers[s].leftDown=!0,this.dispatchEvent(r,a?"rightdown":"mousedown",e)}}},t.prototype.onPointerComplete=function(e,r,n){for(var o=this.normalizeToPointerData(e),s=o.length,a=e.target!==this.interactionDOMElement?"outside":"",l=0;l<s;l++){var c=o[l],d=this.getInteractionDataForPointerId(c),g=this.configureInteractionEventForDOMEvent(this.eventData,c,d);if(g.data.originalEvent=e,this.processInteractive(g,this.lastObjectRendered,n,r||!a),this.emit(r?"pointercancel":"pointerup"+a,g),c.pointerType==="mouse"||c.pointerType==="pen"){var u=c.button===2;this.emit(u?"rightup"+a:"mouseup"+a,g)}else c.pointerType==="touch"&&(this.emit(r?"touchcancel":"touchend"+a,g),this.releaseInteractionDataForPointerId(c.pointerId))}},t.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&e.pointerType==="touch"||this.onPointerComplete(e,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(e,r){var n=e.data,o=e.data.identifier;r.trackedPointers[o]!==void 0&&(delete r.trackedPointers[o],this.dispatchEvent(r,"pointercancel",e),n.pointerType==="touch"&&this.dispatchEvent(r,"touchcancel",e))},t.prototype.onPointerUp=function(e){this.supportsTouchEvents&&e.pointerType==="touch"||this.onPointerComplete(e,!1,this.processPointerUp)},t.prototype.processPointerUp=function(e,r,n){var o=e.data,s=e.data.identifier,a=r.trackedPointers[s],l=o.pointerType==="touch",c=o.pointerType==="mouse"||o.pointerType==="pen",d=!1;if(c){var g=o.button===2,u=Ro.FLAGS,h=g?u.RIGHT_DOWN:u.LEFT_DOWN,f=a!==void 0&&a.flags&h;n?(this.dispatchEvent(r,g?"rightup":"mouseup",e),f&&(this.dispatchEvent(r,g?"rightclick":"click",e),d=!0)):f&&this.dispatchEvent(r,g?"rightupoutside":"mouseupoutside",e),a&&(g?a.rightDown=!1:a.leftDown=!1)}n?(this.dispatchEvent(r,"pointerup",e),l&&this.dispatchEvent(r,"touchend",e),a&&((!c||d)&&this.dispatchEvent(r,"pointertap",e),l&&(this.dispatchEvent(r,"tap",e),a.over=!1))):a&&(this.dispatchEvent(r,"pointerupoutside",e),l&&this.dispatchEvent(r,"touchendoutside",e)),a&&a.none&&delete r.trackedPointers[s]},t.prototype.onPointerMove=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var r=this.normalizeToPointerData(e);(r[0].pointerType==="mouse"||r[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var n=r.length,o=0;o<n;o++){var s=r[o],a=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,a);l.data.originalEvent=e,this.processInteractive(l,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",l),s.pointerType==="touch"&&this.emit("touchmove",l),(s.pointerType==="mouse"||s.pointerType==="pen")&&this.emit("mousemove",l)}r[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(e,r,n){var o=e.data,s=o.pointerType==="touch",a=o.pointerType==="mouse"||o.pointerType==="pen";a&&this.processPointerOverOut(e,r,n),(!this.moveWhenInside||n)&&(this.dispatchEvent(r,"pointermove",e),s&&this.dispatchEvent(r,"touchmove",e),a&&this.dispatchEvent(r,"mousemove",e))},t.prototype.onPointerOut=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var r=this.normalizeToPointerData(e),n=r[0];n.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);s.data.originalEvent=n,this.processInteractive(s,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",s),n.pointerType==="mouse"||n.pointerType==="pen"?this.emit("mouseout",s):this.releaseInteractionDataForPointerId(o.identifier)}},t.prototype.processPointerOverOut=function(e,r,n){var o=e.data,s=e.data.identifier,a=o.pointerType==="mouse"||o.pointerType==="pen",l=r.trackedPointers[s];n&&!l&&(l=r.trackedPointers[s]=new Ro(s)),l!==void 0&&(n&&this.mouseOverRenderer?(l.over||(l.over=!0,this.delayDispatchEvent(r,"pointerover",e),a&&this.delayDispatchEvent(r,"mouseover",e)),a&&this.cursor===null&&(this.cursor=r.cursor)):l.over&&(l.over=!1,this.dispatchEvent(r,"pointerout",this.eventData),a&&this.dispatchEvent(r,"mouseout",e),l.none&&delete r.trackedPointers[s]))},t.prototype.onPointerOver=function(e){var r=this.normalizeToPointerData(e),n=r[0],o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);s.data.originalEvent=n,n.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",s),(n.pointerType==="mouse"||n.pointerType==="pen")&&this.emit("mouseover",s)},t.prototype.getInteractionDataForPointerId=function(e){var r=e.pointerId,n;return r===fo||e.pointerType==="mouse"?n=this.mouse:this.activeInteractionData[r]?n=this.activeInteractionData[r]:(n=this.interactionDataPool.pop()||new Xl,n.identifier=r,this.activeInteractionData[r]=n),n.copyEvent(e),n},t.prototype.releaseInteractionDataForPointerId=function(e){var r=this.activeInteractionData[e];r&&(delete this.activeInteractionData[e],r.reset(),this.interactionDataPool.push(r))},t.prototype.configureInteractionEventForDOMEvent=function(e,r,n){return e.data=n,this.mapPositionToPoint(n.global,r.clientX,r.clientY),r.pointerType==="touch"&&(r.globalX=n.global.x,r.globalY=n.global.y),n.originalEvent=r,e.reset(),e},t.prototype.normalizeToPointerData=function(e){var r=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var n=0,o=e.changedTouches.length;n<o;n++){var s=e.changedTouches[n];typeof s.button>"u"&&(s.button=e.touches.length?1:0),typeof s.buttons>"u"&&(s.buttons=e.touches.length?1:0),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,r.push(s)}else if(e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof window.PointerEvent))){var a=e;typeof a.isPrimary>"u"&&(a.isPrimary=!0),typeof a.width>"u"&&(a.width=1),typeof a.height>"u"&&(a.height=1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="mouse"),typeof a.pointerId>"u"&&(a.pointerId=fo),typeof a.pressure>"u"&&(a.pressure=.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),a.isNormalized=!0,r.push(a)}else r.push(e);return r},t.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},t}(xi);/*!
 * @pixi/runner - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var qt=function(){function i(t){this.items=[],this._name=t,this._aliasCount=0}return i.prototype.emit=function(t,e,r,n,o,s,a,l){if(arguments.length>8)throw new Error("max arguments reached");var c=this,d=c.name,g=c.items;this._aliasCount++;for(var u=0,h=g.length;u<h;u++)g[u][d](t,e,r,n,o,s,a,l);return g===this.items&&this._aliasCount--,this},i.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},i.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},i.prototype.remove=function(t){var e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},i.prototype.contains=function(t){return this.items.indexOf(t)!==-1},i.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},i.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(i.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),i}();Object.defineProperties(qt.prototype,{dispatch:{value:qt.prototype.emit},run:{value:qt.prototype.emit}});/*!
 * @pixi/core - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ht.PREFER_ENV=ve.any?Re.WEBGL:Re.WEBGL2;ht.STRICT_TEXTURE_CACHE=!1;var zo=[];function Wh(i,t){if(!i)return null;var e="";if(typeof i=="string"){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(i);r&&(e=r[1].toLowerCase())}for(var n=zo.length-1;n>=0;--n){var o=zo[n];if(o.test&&o.test(i,e))return new o(i,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Hl=function(i,t){return Hl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},Hl(i,t)};function yt(i,t){Hl(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Ii=function(){function i(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new qt("setRealSize"),this.onUpdate=new qt("update"),this.onError=new qt("onError")}return i.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},i.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},i.prototype.resize=function(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(i.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),i.prototype.update=function(){this.destroyed||this.onUpdate.emit()},i.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),i.prototype.style=function(t,e,r){return!1},i.prototype.dispose=function(){},i.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},i.test=function(t,e){return!1},i}(),ds=function(i){yt(t,i);function t(e,r){var n=this,o=r||{},s=o.width,a=o.height;if(!s||!a)throw new Error("BufferResource width or height invalid");return n=i.call(this,s,a)||this,n.data=e,n}return t.prototype.upload=function(e,r,n){var o=e.gl;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Je.UNPACK),n.width===r.width&&n.height===r.height?o.texSubImage2D(r.target,0,0,0,r.width,r.height,r.format,r.type,this.data):(n.width=r.width,n.height=r.height,o.texImage2D(r.target,0,n.internalFormat,r.width,r.height,0,r.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(Ii),R_={scaleMode:Se.NEAREST,format:di.RGBA,alphaMode:Je.NPM},Tt=function(i){yt(t,i);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=null);var n=i.call(this)||this;r=r||{};var o=r.alphaMode,s=r.mipmap,a=r.anisotropicLevel,l=r.scaleMode,c=r.width,d=r.height,g=r.wrapMode,u=r.format,h=r.type,f=r.target,v=r.resolution,m=r.resourceOptions;return e&&!(e instanceof Ii)&&(e=Wh(e,m),e.internal=!0),n.width=c||0,n.height=d||0,n.resolution=v||ht.RESOLUTION,n.mipmap=s!==void 0?s:ht.MIPMAP_TEXTURES,n.anisotropicLevel=a!==void 0?a:ht.ANISOTROPIC_LEVEL,n.wrapMode=g||ht.WRAP_MODE,n.scaleMode=l!==void 0?l:ht.SCALE_MODE,n.format=u||di.RGBA,n.type=h||Gt.UNSIGNED_BYTE,n.target=f||sr.TEXTURE_2D,n.alphaMode=o!==void 0?o:Je.UNPACK,r.premultiplyAlpha!==void 0&&(n.premultiplyAlpha=r.premultiplyAlpha),n.uid=Or(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=c>0&&d>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,r){var n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),r!==void 0&&r!==this.mipmap&&(this.mipmap=r,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,r,n){return this.resolution=n||this.resolution,this.width=e,this.height=r,this._refreshPOT(),this.update(),this},t.prototype.setRealSize=function(e,r,n){return this.resolution=n||this.resolution,this.width=e/this.resolution,this.height=r/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=Zl(this.realWidth)&&Zl(this.realHeight)},t.prototype.setResolution=function(e){var r=this.resolution;return r===e?this:(this.resolution=e,this.valid&&(this.width=this.width*r/e,this.height=this.height*r/e,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete pe[this.cacheId],delete se[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,r,n){n===void 0&&(n=ht.STRICT_TEXTURE_CACHE);var o=typeof e=="string",s=null;o?s=e:(e._pixiId||(e._pixiId="pixiid_"+Or()),s=e._pixiId);var a=pe[s];if(o&&n&&!a)throw new Error('The cacheId "'+s+'" does not exist in BaseTextureCache.');return a||(a=new t(e,r),a.cacheId=s,t.addToCache(a,s)),a},t.fromBuffer=function(e,r,n,o){e=e||new Float32Array(r*n*4);var s=new ds(e,{width:r,height:n}),a=e instanceof Float32Array?Gt.FLOAT:Gt.UNSIGNED_BYTE;return new t(s,Object.assign(R_,o||{width:r,height:n,type:a}))},t.addToCache=function(e,r){r&&(e.textureCacheIds.indexOf(r)===-1&&e.textureCacheIds.push(r),pe[r]&&console.warn("BaseTexture added to the cache with an id ["+r+"] that already had an entry"),pe[r]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var r=pe[e];if(r){var n=r.textureCacheIds.indexOf(e);return n>-1&&r.textureCacheIds.splice(n,1),delete pe[e],r}}else if(e&&e.textureCacheIds){for(var o=0;o<e.textureCacheIds.length;++o)delete pe[e.textureCacheIds[o]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(xi),Xh=function(i){yt(t,i);function t(e,r){var n=this,o=r||{},s=o.width,a=o.height;n=i.call(this,s,a)||this,n.items=[],n.itemDirtyIds=[];for(var l=0;l<e;l++){var c=new Tt;n.items.push(c),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return t.prototype.initFromArray=function(e,r){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof Ii?this.addResourceAt(e[n],n):this.addResourceAt(Wh(e[n],r),n))},t.prototype.dispose=function(){for(var e=0,r=this.length;e<r;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,r){if(!this.items[r])throw new Error("Index "+r+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[r].setResource(e),this},t.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");i.prototype.bind.call(this,e);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=e,this.items[r].on("update",e.update,e)},t.prototype.unbind=function(e){i.prototype.unbind.call(this,e);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",e.update,e)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.items.map(function(o){return o.resource}).filter(function(o){return o}),n=r.map(function(o){return o.load()});return this._load=Promise.all(n).then(function(){var o=e.items[0],s=o.realWidth,a=o.realHeight;return e.resize(s,a),Promise.resolve(e)}),this._load},t}(Ii),Yp=function(i){yt(t,i);function t(e,r){var n=this,o=r||{},s=o.width,a=o.height,l,c;return Array.isArray(e)?(l=e,c=e.length):c=e,n=i.call(this,c,{width:s,height:a})||this,l&&n.initFromArray(l,r),n}return t.prototype.addBaseTextureAt=function(e,r){if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(e){i.prototype.bind.call(this,e),e.target=sr.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,r,n){var o=this,s=o.length,a=o.itemDirtyIds,l=o.items,c=e.gl;n.dirtyId<0&&c.texImage3D(c.TEXTURE_2D_ARRAY,0,r.format,this._width,this._height,s,0,r.format,r.type,null);for(var d=0;d<s;d++){var g=l[d];a[d]<g.dirtyId&&(a[d]=g.dirtyId,g.valid&&c.texSubImage3D(c.TEXTURE_2D_ARRAY,0,0,0,d,g.resource.width,g.resource.height,1,r.format,r.type,g.resource.source))}return!0},t}(Xh),Qe=function(i){yt(t,i);function t(e){var r=this,n=e,o=n.naturalWidth||n.videoWidth||n.width,s=n.naturalHeight||n.videoHeight||n.height;return r=i.call(this,o,s)||this,r.source=e,r.noSubImage=!1,r}return t.crossOrigin=function(e,r,n){n===void 0&&r.indexOf("data:")!==0?e.crossOrigin=Dp(r):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")},t.prototype.upload=function(e,r,n,o){var s=e.gl,a=r.realWidth,l=r.realHeight;return o=o||this.source,s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Je.UNPACK),!this.noSubImage&&r.target===s.TEXTURE_2D&&n.width===a&&n.height===l?s.texSubImage2D(s.TEXTURE_2D,0,0,0,r.format,r.type,o):(n.width=a,n.height=l,s.texImage2D(r.target,0,r.format,r.format,r.type,o)),!0},t.prototype.update=function(){if(!this.destroyed){var e=this.source,r=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(r,n),i.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(Ii),kh=function(i){yt(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.test=function(e){var r=window.OffscreenCanvas;return r&&e instanceof r?!0:e instanceof HTMLCanvasElement},t}(Qe),Up=function(i){yt(t,i);function t(e,r){var n=this,o=r||{},s=o.width,a=o.height,l=o.autoLoad,c=o.linkBaseTexture;if(e&&e.length!==t.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");n=i.call(this,6,{width:s,height:a})||this;for(var d=0;d<t.SIDES;d++)n.items[d].target=sr.TEXTURE_CUBE_MAP_POSITIVE_X+d;return n.linkBaseTexture=c!==!1,e&&n.initFromArray(e,r),l!==!1&&n.load(),n}return t.prototype.bind=function(e){i.prototype.bind.call(this,e),e.target=sr.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,r,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[r])throw new Error("Index "+r+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=sr.TEXTURE_CUBE_MAP_POSITIVE_X+r,e.parentTextureArray=this.baseTexture,this.items[r]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[r]=e,this},t.prototype.upload=function(e,r,n){for(var o=this.itemDirtyIds,s=0;s<t.SIDES;s++){var a=this.items[s];o[s]<a.dirtyId&&(a.valid&&a.resource?(a.resource.upload(e,a,n),o[s]=a.dirtyId):o[s]<-1&&(e.gl.texImage2D(a.target,0,n.internalFormat,r.realWidth,r.realHeight,0,r.format,n.type,null),o[s]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(Xh),Hh=function(i){yt(t,i);function t(e,r){var n=this;if(r=r||{},!(e instanceof HTMLImageElement)){var o=new Image;Qe.crossOrigin(o,e,r.crossorigin),o.src=e,e=o}return n=i.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(r.createBitmap!==void 0?r.createBitmap:ht.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,n.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,r.premultiplyAlpha!==void 0&&(n.premultiplyAlpha=r.premultiplyAlpha),n.bitmap=null,n._load=null,r.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(e){var r=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(n,o){var s=r.source;r.url=s.src;var a=function(){r.destroyed||(s.onload=null,s.onerror=null,r.resize(s.width,s.height),r._load=null,r.createBitmap?n(r.process()):n(r))};s.complete&&s.src?a():(s.onload=a,s.onerror=function(l){o(l),r.onError.emit(l)})}),this._load)},t.prototype.process=function(){var e=this,r=this.source;return this._process!==null?this._process:this.bitmap!==null||!window.createImageBitmap?Promise.resolve(this):(this._process=window.createImageBitmap(r,0,0,r.width,r.height,{premultiplyAlpha:this.alphaMode===Je.UNPACK?"premultiply":"none"}).then(function(n){return e.destroyed?Promise.reject():(e.bitmap=n,e.update(),e._process=null,Promise.resolve(e))}),this._process)},t.prototype.upload=function(e,r,n){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return i.prototype.upload.call(this,e,r,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(i.prototype.upload.call(this,e,r,n,this.bitmap),!this.preserveBitmap){var o=!0,s=r._glTextures;for(var a in s){var l=s[a];if(l!==n&&l.dirtyId!==r.dirtyId){o=!1;break}}o&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,i.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},t}(Qe),zp=function(i){yt(t,i);function t(e,r){var n=this;return r=r||{},n=i.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=e,n.scale=r.scale||1,n._overrideWidth=r.width,n._overrideHeight=r.height,n._resolve=null,n._crossorigin=r.crossorigin,n._load=null,r.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(r){if(e._resolve=function(){e.resize(e.source.width,e.source.height),r(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var e=this,r=new Image;Qe.crossOrigin(r,this.svg,this._crossorigin),r.src=this.svg,r.onerror=function(n){e._resolve&&(r.onerror=null,e.onError.emit(n))},r.onload=function(){if(e._resolve){var n=r.width,o=r.height;if(!n||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var s=n*e.scale,a=o*e.scale;(e._overrideWidth||e._overrideHeight)&&(s=e._overrideWidth||e._overrideHeight/o*n,a=e._overrideHeight||e._overrideWidth/n*o),s=Math.round(s),a=Math.round(a);var l=e.source;l.width=s,l.height=a,l._pixiId="canvas_"+Or(),l.getContext("2d").drawImage(r,0,0,n,o,0,0,s,a),e._resolve(),e._resolve=null}}},t.getSize=function(e){var r=t.SVG_SIZE.exec(e),n={};return r&&(n[r[1]]=Math.round(parseFloat(r[3])),n[r[5]]=Math.round(parseFloat(r[7]))),n},t.prototype.dispose=function(){i.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,r){return r==="svg"||typeof e=="string"&&e.indexOf("data:image/svg+xml;base64")===0||typeof e=="string"&&e.indexOf("<svg")===0},t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(Qe),Vp=function(i){yt(t,i);function t(e,r){var n=this;if(r=r||{},!(e instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var s=e[0].src||e[0];Qe.crossOrigin(o,s,r.crossorigin);for(var a=0;a<e.length;++a){var l=document.createElement("source"),c=e[a],d=c.src,g=c.mime;d=d||e[a];var u=d.split("?").shift().toLowerCase(),h=u.substr(u.lastIndexOf(".")+1);g=g||t.MIME_TYPES[h]||"video/"+h,l.src=d,l.type=g,o.appendChild(l)}e=o}return n=i.call(this,e)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=r.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=r.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),r.autoLoad!==!1&&n.load(),n}return t.prototype.update=function(e){if(!this.destroyed){var r=Jt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r),(!this._updateFPS||this._msToNextUpdate<=0)&&(i.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){e.valid?n(e):(e._resolve=n,r.load())}),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&e.paused===!1&&e.ended===!1&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return e.readyState===3||e.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Jt.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Jt.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var r=this.valid;this.resize(e.videoWidth,e.videoHeight),!r&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&Jt.shared.remove(this.update,this);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),i.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Jt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Jt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,r){return e instanceof HTMLVideoElement||t.TYPES.indexOf(r)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(Qe),Jp=function(i){yt(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.test=function(e){return!!window.createImageBitmap&&e instanceof ImageBitmap},t}(Qe);zo.push(Hh,Jp,kh,Vp,zp,ds,Up,Yp);var Z_={Resource:Ii,BaseImageResource:Qe,INSTALLED:zo,autoDetectResource:Wh,AbstractMultiResource:Xh,ArrayResource:Yp,BufferResource:ds,CanvasResource:kh,CubeResource:Up,ImageResource:Hh,SVGResource:zp,VideoResource:Vp,ImageBitmapResource:Jp},le=function(){function i(t){this.renderer=t}return i.prototype.destroy=function(){this.renderer=null},i}(),O_=function(i){yt(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.upload=function(e,r,n){var o=e.gl;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Je.UNPACK),n.width===r.width&&n.height===r.height?o.texSubImage2D(r.target,0,0,0,r.width,r.height,r.format,r.type,this.data):(n.width=r.width,n.height=r.height,o.texImage2D(r.target,0,e.context.webGLVersion===1?o.DEPTH_COMPONENT:o.DEPTH_COMPONENT16,r.width,r.height,0,r.format,r.type,this.data)),!0},t}(ds),Vo=function(){function i(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new qt("disposeFramebuffer"),this.multisample=Rr.NONE}return Object.defineProperty(i.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),i.prototype.addColorTexture=function(t,e){return t===void 0&&(t=0),this.colorTextures[t]=e||new Tt(null,{scaleMode:Se.NEAREST,resolution:1,mipmap:gi.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},i.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Tt(new O_(null,{width:this.width,height:this.height}),{scaleMode:Se.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:gi.OFF,format:di.DEPTH_COMPONENT,type:Gt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},i.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},i.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},i.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var n=this.colorTextures[r],o=n.resolution;n.setSize(t/o,e/o)}if(this.depthTexture){var o=this.depthTexture.resolution;this.depthTexture.setSize(t/o,e/o)}}},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},i}(),qi=function(i){yt(t,i);function t(e){var r=this;if(typeof e=="number"){var n=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];e={width:n,height:o,scaleMode:s,resolution:a}}r=i.call(this,null,e)||this;var l=e||{},c=l.width,d=l.height;return r.mipmap=0,r.width=Math.ceil(c)||100,r.height=Math.ceil(d)||100,r.valid=!0,r.clearColor=[0,0,0,0],r.framebuffer=new Vo(r.width*r.resolution,r.height*r.resolution).addColorTexture(0,r),r.maskStack=[],r.filterStack=[{}],r}return t.prototype.resize=function(e,r){e=Math.ceil(e),r=Math.ceil(r),this.framebuffer.resize(e*this.resolution,r*this.resolution)},t.prototype.dispose=function(){this.framebuffer.dispose(),i.prototype.dispose.call(this)},t.prototype.destroy=function(){i.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(Tt),Yh=function(){function i(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return i.prototype.set=function(t,e,r){var n=e.width,o=e.height;if(r){var s=t.width/2/n,a=t.height/2/o,l=t.x/n+s,c=t.y/o+a;r=Mt.add(r,Mt.NW),this.x0=l+s*Mt.uX(r),this.y0=c+a*Mt.uY(r),r=Mt.add(r,2),this.x1=l+s*Mt.uX(r),this.y1=c+a*Mt.uY(r),r=Mt.add(r,2),this.x2=l+s*Mt.uX(r),this.y2=c+a*Mt.uY(r),r=Mt.add(r,2),this.x3=l+s*Mt.uX(r),this.y3=c+a*Mt.uY(r)}else this.x0=t.x/n,this.y0=t.y/o,this.x1=(t.x+t.width)/n,this.y1=t.y/o,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/o,this.x3=t.x/n,this.y3=(t.y+t.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},i}(),Df=new Yh,It=function(i){yt(t,i);function t(e,r,n,o,s,a){var l=i.call(this)||this;if(l.noFrame=!1,r||(l.noFrame=!0,r=new bt(0,0,1,1)),e instanceof t&&(e=e.baseTexture),l.baseTexture=e,l._frame=r,l.trim=o,l.valid=!1,l._uvs=Df,l.uvMatrix=null,l.orig=n||r,l._rotate=Number(s||0),s===!0)l._rotate=2;else if(l._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=a?new Qt(a.x,a.y):new Qt(0,0),l._updateID=0,l.textureCacheIds=[],e.valid?l.noFrame?e.valid&&l.onBaseTextureUpdated(e):l.frame=r:e.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&e.on("update",l.onBaseTextureUpdated,l),l}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var r=this.baseTexture;r&&r.url&&se[r.url]&&t.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){return new t(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},t.prototype.updateUvs=function(){this._uvs===Df&&(this._uvs=new Yh),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,r,n){r===void 0&&(r={}),n===void 0&&(n=ht.STRICT_TEXTURE_CACHE);var o=typeof e=="string",s=null;o?s=e:(e._pixiId||(e._pixiId="pixiid_"+Or()),s=e._pixiId);var a=se[s];if(o&&n&&!a)throw new Error('The cacheId "'+s+'" does not exist in TextureCache.');return a||(r.resolution||(r.resolution=hn(e)),a=new t(new Tt(e,r)),a.baseTexture.cacheId=s,Tt.addToCache(a.baseTexture,s),t.addToCache(a,s)),a},t.fromURL=function(e,r){var n=Object.assign({autoLoad:!1},r?.resourceOptions),o=t.from(e,Object.assign({resourceOptions:n},r),!1),s=o.baseTexture.resource;return o.baseTexture.valid?Promise.resolve(o):s.load().then(function(){return Promise.resolve(o)})},t.fromBuffer=function(e,r,n,o){return new t(Tt.fromBuffer(e,r,n,o))},t.fromLoader=function(e,r,n){var o=new Hh(e);o.url=r;var s=new Tt(o,{scaleMode:ht.SCALE_MODE,resolution:hn(r)}),a=new t(s);return n||(n=r),Tt.addToCache(a.baseTexture,n),t.addToCache(a,n),n!==r&&(Tt.addToCache(a.baseTexture,r),t.addToCache(a,r)),a},t.addToCache=function(e,r){r&&(e.textureCacheIds.indexOf(r)===-1&&e.textureCacheIds.push(r),se[r]&&console.warn("Texture added to the cache with an id ["+r+"] that already had an entry"),se[r]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var r=se[e];if(r){var n=r.textureCacheIds.indexOf(e);return n>-1&&r.textureCacheIds.splice(n,1),delete se[e],r}}else if(e&&e.textureCacheIds){for(var o=0;o<e.textureCacheIds.length;++o)se[e.textureCacheIds[o]]===e&&delete se[e.textureCacheIds[o]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var r=e.x,n=e.y,o=e.width,s=e.height,a=r+o>this.baseTexture.width,l=n+s>this.baseTexture.height;if(a||l){var c=a&&l?"and":"or",d="X: "+r+" + "+o+" = "+(r+o)+" > "+this.baseTexture.width,g="Y: "+n+" + "+s+" = "+(n+s)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(d+" "+c+" "+g))}this.valid=o&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(xi);function G_(){var i=document.createElement("canvas");i.width=16,i.height=16;var t=i.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new It(new Tt(new kh(i)))}function gs(i){i.destroy=function(){},i.on=function(){},i.once=function(){},i.emit=function(){}}It.EMPTY=new It(new Tt);gs(It.EMPTY);gs(It.EMPTY.baseTexture);It.WHITE=G_();gs(It.WHITE);gs(It.WHITE.baseTexture);var Gr=function(i){yt(t,i);function t(e,r){var n=this,o=null;if(!(e instanceof qi)){var s=arguments[1],a=arguments[2],l=arguments[3],c=arguments[4];console.warn("Please use RenderTexture.create("+s+", "+a+") instead of the ctor directly."),o=arguments[0],r=null,e=new qi({width:s,height:a,scaleMode:l,resolution:c})}return n=i.call(this,e,r)||this,n.legacyRenderer=o,n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,r,n){n===void 0&&(n=!0),e=Math.ceil(e),r=Math.ceil(r),this.valid=e>0&&r>0,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=r,n&&this.baseTexture.resize(e,r),this.updateUvs()},t.prototype.setResolution=function(e){var r=this.baseTexture;r.resolution!==e&&(r.setResolution(e),this.resize(r.width,r.height,!1))},t.create=function(e){return typeof e=="number"&&(e={width:e,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new t(new qi(e))},t}(It),Qp=function(){function i(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return i.prototype.createTexture=function(t,e){var r=new qi(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new Gr(r)},i.prototype.getOptimalTexture=function(t,e,r){r===void 0&&(r=1);var n=i.SCREEN_KEY;t*=r,e*=r,(!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight)&&(t=ln(t),e=ln(e),n=(t&65535)<<16|e&65535),this.texturePool[n]||(this.texturePool[n]=[]);var o=this.texturePool[n].pop();return o||(o=this.createTexture(t,e)),o.filterPoolKey=n,o.setResolution(r),o},i.prototype.getFilterTexture=function(t,e){var r=this.getOptimalTexture(t.width,t.height,e||t.resolution);return r.filterFrame=t.filterFrame,r},i.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},i.prototype.returnFilterTexture=function(t){this.returnTexture(t)},i.prototype.clear=function(t){if(t=t!==!1,t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var n=0;n<r.length;n++)r[n].destroy(!0)}this.texturePool={}},i.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){var e=i.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=t.width>0&&t.height>0,r)for(var n=0;n<r.length;n++)r[n].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},i.SCREEN_KEY="screen",i}(),Yl=function(){function i(t,e,r,n,o,s,a){e===void 0&&(e=0),r===void 0&&(r=!1),n===void 0&&(n=5126),this.buffer=t,this.size=e,this.normalized=r,this.type=n,this.stride=o,this.start=s,this.instance=a}return i.prototype.destroy=function(){this.buffer=null},i.from=function(t,e,r,n,o){return new i(t,e,r,n,o)},i}(),N_=0,Vt=function(){function i(t,e,r){e===void 0&&(e=!0),r===void 0&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=N_++,this.disposeRunner=new qt("disposeBuffer")}return i.prototype.update=function(t){this.data=t||this.data,this._updateID++},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroy=function(){this.dispose(),this.data=null},i.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new i(t)},i}();function $p(i){if(i.BYTES_PER_ELEMENT===4)return i instanceof Float32Array?"Float32Array":i instanceof Uint32Array?"Uint32Array":"Int32Array";if(i.BYTES_PER_ELEMENT===2){if(i instanceof Uint16Array)return"Uint16Array"}else if(i.BYTES_PER_ELEMENT===1&&i instanceof Uint8Array)return"Uint8Array";return null}var j_={Float32Array,Uint32Array,Int32Array,Uint8Array};function W_(i,t){for(var e=0,r=0,n={},o=0;o<i.length;o++)r+=t[o],e+=i[o].length;for(var s=new ArrayBuffer(e*4),a=null,l=0,o=0;o<i.length;o++){var c=t[o],d=i[o],g=$p(d);n[g]||(n[g]=new j_[g](s)),a=n[g];for(var u=0;u<d.length;u++){var h=(u/c|0)*r+l,f=u%c;a[h+f]=d[u]}l+=c}return new Float32Array(s)}var Bf={5126:4,5123:2,5121:1},X_=0,k_={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Ti=function(){function i(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=X_++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new qt("disposeGeometry"),this.refCount=0}return i.prototype.addAttribute=function(t,e,r,n,o,s,a,l){if(r===void 0&&(r=0),n===void 0&&(n=!1),l===void 0&&(l=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Vt||(e instanceof Array&&(e=new Float32Array(e)),e=new Vt(e));var c=t.split("|");if(c.length>1){for(var d=0;d<c.length;d++)this.addAttribute(c[d],e,r,n,o);return this}var g=this.buffers.indexOf(e);return g===-1&&(this.buffers.push(e),g=this.buffers.length-1),this.attributes[t]=new Yl(g,r,n,o,s,a,l),this.instanced=this.instanced||l,this},i.prototype.getAttribute=function(t){return this.attributes[t]},i.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},i.prototype.addIndex=function(t){return t instanceof Vt||(t instanceof Array&&(t=new Uint16Array(t)),t=new Vt(t)),t.index=!0,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},i.prototype.getIndex=function(){return this.indexBuffer},i.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],e=[],r=new Vt,n;for(n in this.attributes){var o=this.attributes[n],s=this.buffers[o.buffer];t.push(s.data),e.push(o.size*Bf[o.type]/4),o.buffer=0}for(r.data=W_(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},i.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t],r=this.buffers[e.buffer];return r.data.length/(e.stride/4||e.size)}return 0},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},i.prototype.clone=function(){for(var t=new i,e=0;e<this.buffers.length;e++)t.buffers[e]=new Vt(this.buffers[e].data.slice(0));for(var e in this.attributes){var r=this.attributes[e];t.attributes[e]=new Yl(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},i.merge=function(t){for(var e=new i,r=[],n=[],o=[],s,a=0;a<t.length;a++){s=t[a];for(var l=0;l<s.buffers.length;l++)n[l]=n[l]||0,n[l]+=s.buffers[l].data.length,o[l]=0}for(var a=0;a<s.buffers.length;a++)r[a]=new k_[$p(s.buffers[a].data)](n[a]),e.buffers[a]=new Vt(r[a]);for(var a=0;a<t.length;a++){s=t[a];for(var l=0;l<s.buffers.length;l++)r[l].set(s.buffers[l].data,o[l]),o[l]+=s.buffers[l].data.length}if(e.attributes=s.attributes,s.indexBuffer){e.indexBuffer=e.buffers[s.buffers.indexOf(s.indexBuffer)],e.indexBuffer.index=!0;for(var c=0,d=0,g=0,u=0,a=0;a<s.buffers.length;a++)if(s.buffers[a]!==s.indexBuffer){u=a;break}for(var a in s.attributes){var h=s.attributes[a];(h.buffer|0)===u&&(d+=h.size*Bf[h.type]/4)}for(var a=0;a<t.length;a++){for(var f=t[a].indexBuffer.data,l=0;l<f.length;l++)e.indexBuffer.data[l+g]+=c;c+=s.buffers[u].data.length/d,g+=f.length}}return e},i}(),Kp=function(i){yt(t,i);function t(){var e=i.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return t}(Ti),Uh=function(i){yt(t,i);function t(){var e=i.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Vt(e.vertices),e.uvBuffer=new Vt(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return t.prototype.map=function(e,r){var n=0,o=0;return this.uvs[0]=n,this.uvs[1]=o,this.uvs[2]=n+r.width/e.width,this.uvs[3]=o,this.uvs[4]=n+r.width/e.width,this.uvs[5]=o+r.height/e.height,this.uvs[6]=n,this.uvs[7]=o+r.height/e.height,n=r.x,o=r.y,this.vertices[0]=n,this.vertices[1]=o,this.vertices[2]=n+r.width,this.vertices[3]=o,this.vertices[4]=n+r.width,this.vertices[5]=o+r.height,this.vertices[6]=n,this.vertices[7]=o+r.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(Ti),H_=0,ar=function(){function i(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=H_++,this.static=!!e}return i.prototype.update=function(){this.dirtyId++},i.prototype.add=function(t,e,r){this.uniforms[t]=new i(e,r)},i.from=function(t,e){return new i(t,e)},i}(),qp=function(){function i(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new bt,this.destinationFrame=new bt,this.filters=[]}return i.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},i}(),tI=function(i){yt(t,i);function t(e){var r=i.call(this,e)||this;return r.defaultFilterStack=[{}],r.texturePool=new Qp,r.texturePool.setScreenSize(e.view),r.statePool=[],r.quad=new Kp,r.quadUv=new Uh,r.tempRect=new bt,r.activeState={},r.globalUniforms=new ar({outputFrame:r.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),r.forceClear=!1,r.useMaxPadding=!1,r}return t.prototype.push=function(e,r){for(var n=this.renderer,o=this.defaultFilterStack,s=this.statePool.pop()||new qp,a=r[0].resolution,l=r[0].padding,c=r[0].autoFit,d=r[0].legacy,g=1;g<r.length;g++){var u=r[g];a=Math.min(a,u.resolution),l=this.useMaxPadding?Math.max(l,u.padding):l+u.padding,c=c||u.autoFit,d=d||u.legacy}o.length===1&&(this.defaultFilterStack[0].renderTexture=n.renderTexture.current),o.push(s),s.resolution=a,s.legacy=d,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(l),c&&s.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),s.sourceFrame.ceil(a),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,a),s.filters=r,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var h=this.tempRect;h.width=s.sourceFrame.width,h.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,n.renderTexture.bind(s.renderTexture,s.sourceFrame,h),n.renderTexture.clear()},t.prototype.pop=function(){var e=this.defaultFilterStack,r=e.pop(),n=r.filters;this.activeState=r;var o=this.globalUniforms.uniforms;o.outputFrame=r.sourceFrame,o.resolution=r.resolution;var s=o.inputSize,a=o.inputPixel,l=o.inputClamp;if(s[0]=r.destinationFrame.width,s[1]=r.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=s[0]*r.resolution,a[1]=s[1]*r.resolution,a[2]=1/a[0],a[3]=1/a[1],l[0]=.5*a[2],l[1]=.5*a[3],l[2]=r.sourceFrame.width*s[2]-.5*a[2],l[3]=r.sourceFrame.height*s[3]-.5*a[3],r.legacy){var c=o.filterArea;c[0]=r.destinationFrame.width,c[1]=r.destinationFrame.height,c[2]=r.sourceFrame.x,c[3]=r.sourceFrame.y,o.filterClamp=o.inputClamp}this.globalUniforms.update();var d=e[e.length-1];if(r.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,r.renderTexture,d.renderTexture,Pe.BLEND,r),this.returnFilterTexture(r.renderTexture);else{var g=r.renderTexture,u=this.getOptimalFilterTexture(g.width,g.height,r.resolution);u.filterFrame=g.filterFrame;var h=0;for(h=0;h<n.length-1;++h){n[h].apply(this,g,u,Pe.CLEAR,r);var f=g;g=u,u=f}n[h].apply(this,g,d.renderTexture,Pe.BLEND,r),this.returnFilterTexture(g),this.returnFilterTexture(u)}r.clear(),this.statePool.push(r)},t.prototype.bindAndClear=function(e,r){if(r===void 0&&(r=Pe.CLEAR),e&&e.filterFrame){var n=this.tempRect;n.width=e.filterFrame.width,n.height=e.filterFrame.height,this.renderer.renderTexture.bind(e,e.filterFrame,n)}else this.renderer.renderTexture.bind(e);typeof r=="boolean"&&(r=r?Pe.CLEAR:Pe.BLEND,it("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(r===Pe.CLEAR||r===Pe.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},t.prototype.applyFilter=function(e,r,n,o){var s=this.renderer;this.bindAndClear(n,o),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,s.state.set(e.state),s.shader.bind(e),e.legacy?(this.quadUv.map(r._frame,r.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(ye.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(ye.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(e,r){var n=this.activeState,o=n.sourceFrame,s=n.destinationFrame,a=r._texture.orig,l=e.set(s.width,0,0,s.height,o.x,o.y),c=r.worldTransform.copyTo(Nt.TEMP_MATRIX);return c.invert(),l.prepend(c),l.scale(1/a.width,1/a.height),l.translate(r.anchor.x,r.anchor.y),l},t.prototype.destroy=function(){this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(e,r,n){return n===void 0&&(n=1),this.texturePool.getOptimalTexture(e,r,n)},t.prototype.getFilterTexture=function(e,r){if(typeof e=="number"){var n=e;e=r,r=n}e=e||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(e.width,e.height,r||e.resolution);return o.filterFrame=e.filterFrame,o},t.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t}(le),Cn=function(){function i(t){this.renderer=t}return i.prototype.flush=function(){},i.prototype.destroy=function(){this.renderer=null},i.prototype.start=function(){},i.prototype.stop=function(){this.flush()},i.prototype.render=function(t){},i}(),eI=function(i){yt(t,i);function t(e){var r=i.call(this,e)||this;return r.emptyRenderer=new Cn(e),r.currentRenderer=r.emptyRenderer,r}return t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(e,r){for(var n=this.renderer.texture.boundTextures,o=r-1;o>=0;--o)e[o]=n[o]||null,e[o]&&(e[o]._batchLocation=o)},t.prototype.boundArray=function(e,r,n,o){for(var s=e.elements,a=e.ids,l=e.count,c=0,d=0;d<l;d++){var g=s[d],u=g._batchLocation;if(u>=0&&u<o&&r[u]===g){a[d]=u;continue}for(;c<o;){var h=r[c];if(h&&h._batchEnabled===n&&h._batchLocation===c){c++;continue}a[d]=c,g._batchLocation=c,r[c]=g;break}}},t}(le),Lf=0,rI=function(i){yt(t,i);function t(e){var r=i.call(this,e)||this;return r.webGLVersion=1,r.extensions={},r.supports={uint32Indices:!1},r.handleContextLost=r.handleContextLost.bind(r),r.handleContextRestored=r.handleContextRestored.bind(r),e.view.addEventListener("webglcontextlost",r.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",r.handleContextRestored,!1),r}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=Lf++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=Lf++,this.renderer.runners.contextChange.emit(e)},t.prototype.initFromOptions=function(e){var r=this.createContext(this.renderer.view,e);this.initFromContext(r)},t.prototype.createContext=function(e,r){var n;if(ht.PREFER_ENV>=Re.WEBGL2&&(n=e.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var e=this.gl;this.webGLVersion===1?Object.assign(this.extensions,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,{anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:e.getExtension("EXT_color_buffer_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear")})},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var e=this.renderer.view;e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(e){var r=e.getContextAttributes();r.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n="WebGL2RenderingContext"in window&&e instanceof window.WebGL2RenderingContext||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(le),iI=function(){function i(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=Rr.NONE,this.msaaBuffer=null,this.blitFramebuffer=null}return i}(),Y_=new bt,nI=function(i){yt(t,i);function t(e){var r=i.call(this,e)||this;return r.managedFramebuffers=[],r.unknownFramebuffer=new Vo(10,10),r.msaaSamples=null,r}return t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new bt,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;ht.PREFER_ENV===Re.WEBGL_LEGACY&&(r=null,n=null),r?e.drawBuffers=function(o){return r.drawBuffersWEBGL(o)}:(this.hasMRT=!1,e.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},t.prototype.bind=function(e,r){var n=this.gl;if(e){var o=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,n.bindFramebuffer(n.FRAMEBUFFER,o.framebuffer)),o.dirtyId!==e.dirtyId&&(o.dirtyId=e.dirtyId,o.dirtyFormat!==e.dirtyFormat?(o.dirtyFormat=e.dirtyFormat,this.updateFramebuffer(e)):o.dirtySize!==e.dirtySize&&(o.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var s=0;s<e.colorTextures.length;s++){var a=e.colorTextures[s];this.renderer.texture.unbind(a.parentTextureArray||a)}e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,e.width,e.height)}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(e,r,n,o){var s=this.viewport;(s.width!==n||s.height!==o||s.x!==e||s.y!==r)&&(s.x=e,s.y=r,s.width=n,s.height=o,this.gl.viewport(e,r,n,o))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(e,r,n,o,s){s===void 0&&(s=un.COLOR|un.DEPTH);var a=this.gl;a.clearColor(e,r,n,o),a.clear(s)},t.prototype.initFramebuffer=function(e){var r=this.gl,n=new iI(r.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n},t.prototype.resizeFramebuffer=function(e){var r=this.gl,n=e.glFramebuffers[this.CONTEXT_UID];n.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height));for(var o=e.colorTextures,s=0;s<o.length;s++)this.renderer.texture.bind(o[s],0);e.depthTexture&&this.renderer.texture.bind(e.depthTexture,0)},t.prototype.updateFramebuffer=function(e){var r=this.gl,n=e.glFramebuffers[this.CONTEXT_UID],o=e.colorTextures,s=o.length;r.drawBuffers||(s=Math.min(s,1)),n.multisample>1&&(n.msaaBuffer=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.RGBA8,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,n.msaaBuffer));for(var a=[],l=0;l<s;l++)if(!(l===0&&n.multisample>1)){var c=e.colorTextures[l],d=c.parentTextureArray||c;this.renderer.texture.bind(d,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+l,c.target,d._glTextures[this.CONTEXT_UID].texture,0),a.push(r.COLOR_ATTACHMENT0+l)}if(a.length>1&&r.drawBuffers(a),e.depthTexture){var g=this.writeDepthTexture;if(g){var u=e.depthTexture;this.renderer.texture.bind(u,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,u._glTextures[this.CONTEXT_UID].texture,0)}}!n.stencil&&(e.stencil||e.depth)&&(n.stencil=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height),e.depthTexture||r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n.stencil))},t.prototype.detectSamples=function(e){var r=this.msaaSamples,n=Rr.NONE;if(e<=1||r===null)return n;for(var o=0;o<r.length;o++)if(r[o]<=e){n=r[o];break}return n===1&&(n=Rr.NONE),n},t.prototype.blit=function(e,r,n){var o=this,s=o.current,a=o.renderer,l=o.gl,c=o.CONTEXT_UID;if(a.context.webGLVersion===2&&s){var d=s.glFramebuffers[c];if(d){if(!e){if(d.multisample<=1)return;d.blitFramebuffer||(d.blitFramebuffer=new Vo(s.width,s.height),d.blitFramebuffer.addColorTexture(0,s.colorTextures[0])),e=d.blitFramebuffer,e.width=s.width,e.height=s.height}r||(r=Y_,r.width=s.width,r.height=s.height),n||(n=r);var g=r.width===n.width&&r.height===n.height;this.bind(e),l.bindFramebuffer(l.READ_FRAMEBUFFER,d.framebuffer),l.blitFramebuffer(r.x,r.y,r.width,r.height,n.x,n.y,n.width,n.height,l.COLOR_BUFFER_BIT,g?l.NEAREST:l.LINEAR)}}},t.prototype.disposeFramebuffer=function(e,r){var n=e.glFramebuffers[this.CONTEXT_UID],o=this.gl;if(n){delete e.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),r||(o.deleteFramebuffer(n.framebuffer),n.stencil&&o.deleteRenderbuffer(n.stencil))}},t.prototype.disposeAll=function(e){var r=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<r.length;n++)this.disposeFramebuffer(r[n],e)},t.prototype.forceStencil=function(){var e=this.current;if(e){var r=e.glFramebuffers[this.CONTEXT_UID];if(!(!r||r.stencil)){e.enableStencil();var n=e.width,o=e.height,s=this.gl,a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,n,o),r.stencil=a,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new bt},t}(le),U_=function(){function i(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return i}(),ou={5126:4,5123:2,5121:1},oI=function(i){yt(t,i);function t(e){var r=i.call(this,e)||this;return r._activeGeometry=null,r._activeVao=null,r.hasVao=!0,r.hasInstance=!0,r.canUseUInt32ElementIndex=!1,r.managedGeometries={},r.managedBuffers={},r}return t.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,!e.createVertexArray){var n=this.renderer.context.extensions.vertexArrayObject;ht.PREFER_ENV===Re.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=function(){return n.createVertexArrayOES()},e.bindVertexArray=function(s){return n.bindVertexArrayOES(s)},e.deleteVertexArray=function(s){return n.deleteVertexArrayOES(s)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(!e.vertexAttribDivisor){var o=e.getExtension("ANGLE_instanced_arrays");o?(e.vertexAttribDivisor=function(s,a){return o.vertexAttribDivisorANGLE(s,a)},e.drawElementsInstanced=function(s,a,l,c,d){return o.drawElementsInstancedANGLE(s,a,l,c,d)},e.drawArraysInstanced=function(s,a,l,c){return o.drawArraysInstancedANGLE(s,a,l,c)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex},t.prototype.bind=function(e,r){r=r||this.renderer.shader.shader;var n=this.gl,o=e.glVertexArrayObjects[this.CONTEXT_UID];o||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=o={});var s=o[r.program.id]||this.initGeometryVao(e,r.program);this._activeGeometry=e,this._activeVao!==s&&(this._activeVao=s,this.hasVao?n.bindVertexArray(s):this.activateVao(e,r.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var e=this._activeGeometry,r=this.gl,n=0;n<e.buffers.length;n++){var o=e.buffers[n],s=o._glBuffers[this.CONTEXT_UID];if(o._updateID!==s.updateID){s.updateID=o._updateID;var a=o.index?r.ELEMENT_ARRAY_BUFFER:r.ARRAY_BUFFER;if(r.bindBuffer(a,s.buffer),this._boundBuffer=s,s.byteLength>=o.data.byteLength)r.bufferSubData(a,0,o.data);else{var l=o.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;s.byteLength=o.data.byteLength,r.bufferData(a,o.data,l)}}}},t.prototype.checkCompatibility=function(e,r){var n=e.attributes,o=r.attributeData;for(var s in o)if(!n[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},t.prototype.getSignature=function(e,r){var n=e.attributes,o=r.attributeData,s=["g",e.id];for(var a in n)o[a]&&s.push(a);return s.join("-")},t.prototype.initGeometryVao=function(e,r){this.checkCompatibility(e,r);var n=this.gl,o=this.CONTEXT_UID,s=this.getSignature(e,r),a=e.glVertexArrayObjects[this.CONTEXT_UID],l=a[s];if(l)return a[r.id]=l,l;var c=e.buffers,d=e.attributes,g={},u={};for(var h in c)g[h]=0,u[h]=0;for(var h in d)!d[h].size&&r.attributeData[h]?d[h].size=r.attributeData[h].size:d[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),g[d[h].buffer]+=d[h].size*ou[d[h].type];for(var h in d){var f=d[h],v=f.size;f.stride===void 0&&(g[f.buffer]===v*ou[f.type]?f.stride=0:f.stride=g[f.buffer]),f.start===void 0&&(f.start=u[f.buffer],u[f.buffer]+=v*ou[f.type])}l=n.createVertexArray(),n.bindVertexArray(l);for(var m=0;m<c.length;m++){var y=c[m];y._glBuffers[o]||(y._glBuffers[o]=new U_(n.createBuffer()),this.managedBuffers[y.id]=y,y.disposeRunner.add(this)),y._glBuffers[o].refCount++}return this.activateVao(e,r),this._activeVao=l,a[r.id]=l,a[s]=l,l},t.prototype.disposeBuffer=function(e,r){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var n=e._glBuffers[this.CONTEXT_UID],o=this.gl;e.disposeRunner.remove(this),n&&(r||o.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeGeometry=function(e,r){if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var n=e.glVertexArrayObjects[this.CONTEXT_UID],o=this.gl,s=e.buffers;if(e.disposeRunner.remove(this),!!n){for(var a=0;a<s.length;a++){var l=s[a]._glBuffers[this.CONTEXT_UID];l.refCount--,l.refCount===0&&!r&&this.disposeBuffer(s[a],r)}if(!r){for(var c in n)if(c[0]==="g"){var d=n[c];this._activeVao===d&&this.unbind(),o.deleteVertexArray(d)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(e){for(var r=Object.keys(this.managedGeometries),n=0;n<r.length;n++)this.disposeGeometry(this.managedGeometries[r[n]],e);r=Object.keys(this.managedBuffers);for(var n=0;n<r.length;n++)this.disposeBuffer(this.managedBuffers[r[n]],e)},t.prototype.activateVao=function(e,r){var n=this.gl,o=this.CONTEXT_UID,s=e.buffers,a=e.attributes;e.indexBuffer&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer._glBuffers[o].buffer);var l=null;for(var c in a){var d=a[c],g=s[d.buffer],u=g._glBuffers[o];if(r.attributeData[c]){l!==u&&(n.bindBuffer(n.ARRAY_BUFFER,u.buffer),l=u);var h=r.attributeData[c].location;if(n.enableVertexAttribArray(h),n.vertexAttribPointer(h,d.size,d.type||n.FLOAT,d.normalized,d.stride,d.start),d.instance)if(this.hasInstance)n.vertexAttribDivisor(h,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},t.prototype.draw=function(e,r,n,o){var s=this.gl,a=this._activeGeometry;if(a.indexBuffer){var l=a.indexBuffer.data.BYTES_PER_ELEMENT,c=l===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;l===2||l===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(e,r||a.indexBuffer.data.length,c,(n||0)*l,o||1):s.drawElements(e,r||a.indexBuffer.data.length,c,(n||0)*l):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(e,n,r||a.getSize(),o||1):s.drawArrays(e,n,r||a.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t}(le),sI=function(){function i(t){t===void 0&&(t=null),this.type=oe.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return i.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=oe.NONE,this.autoDetect=!0),this._target=null},i.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},i}();function Rf(i,t,e){var r=i.createShader(t);return i.shaderSource(r,e),i.compileShader(r),r}function aI(i,t,e,r){var n=Rf(i,i.VERTEX_SHADER,t),o=Rf(i,i.FRAGMENT_SHADER,e),s=i.createProgram();if(i.attachShader(s,n),i.attachShader(s,o),r)for(var a in r)i.bindAttribLocation(s,r[a],a);return i.linkProgram(s),i.getProgramParameter(s,i.LINK_STATUS)||(i.getShaderParameter(n,i.COMPILE_STATUS)||(console.warn(t),console.error(i.getShaderInfoLog(n))),i.getShaderParameter(o,i.COMPILE_STATUS)||(console.warn(e),console.error(i.getShaderInfoLog(o))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",i.getProgramParameter(s,i.VALIDATE_STATUS)),console.error("gl.getError()",i.getError()),i.getProgramInfoLog(s)!==""&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",i.getProgramInfoLog(s)),i.deleteProgram(s),s=null),i.deleteShader(n),i.deleteShader(o),s}function su(i){for(var t=new Array(i),e=0;e<t.length;e++)t[e]=!1;return t}function uI(i,t){switch(i){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return!1;case"bvec2":return su(2*t);case"bvec3":return su(3*t);case"bvec4":return su(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var lI={},ji=lI;function hI(){if(ji===lI||ji&&ji.isContextLost()){var i=document.createElement("canvas"),t=void 0;ht.PREFER_ENV>=Re.WEBGL2&&(t=i.getContext("webgl2",{})),t||(t=i.getContext("webgl",{})||i.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),ji=t}return ji}var po;function z_(){if(!po){po=Te.MEDIUM;var i=hI();if(i&&i.getShaderPrecisionFormat){var t=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);po=t.precision?Te.HIGH:Te.MEDIUM}}return po}function Zf(i,t,e){if(i.substring(0,9)!=="precision"){var r=t;return t===Te.HIGH&&e!==Te.HIGH&&(r=Te.MEDIUM),"precision "+r+` float;
`+i}else if(e!==Te.HIGH&&i.substring(0,15)==="precision highp")return i.replace("precision highp","precision mediump");return i}var V_={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function J_(i){return V_[i]}var Io=null,Of={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Gf(i,t){if(!Io){var e=Object.keys(Of);Io={};for(var r=0;r<e.length;++r){var n=e[r];Io[i[n]]=Of[n]}}return Io[t]}var Zo=[{test:function(i){return i.type==="float"&&i.size===1},code:function(i){return`
            if(uv["`+i+'"] !== ud["'+i+`"].value)
            {
                ud["`+i+'"].value = uv["'+i+`"]
                gl.uniform1f(ud["`+i+'"].location, uv["'+i+`"])
            }
            `}},{test:function(i){return(i.type==="sampler2D"||i.type==="samplerCube"||i.type==="sampler2DArray")&&i.size===1&&!i.isArray},code:function(i){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+i+`"], t);

            if(ud["`+i+`"].value !== t)
            {
                ud["`+i+`"].value = t;
                gl.uniform1i(ud["`+i+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(i,t){return i.type==="mat3"&&i.size===1&&t.a!==void 0},code:function(i){return`
            gl.uniformMatrix3fv(ud["`+i+'"].location, false, uv["'+i+`"].toArray(true));
            `}},{test:function(i,t){return i.type==="vec2"&&i.size===1&&t.x!==void 0},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+i+`"].location, v.x, v.y);
                }`}},{test:function(i){return i.type==="vec2"&&i.size===1},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+i+`"].location, v[0], v[1]);
                }
            `}},{test:function(i,t){return i.type==="vec4"&&i.size===1&&t.width!==void 0},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+i+`"].location, v.x, v.y, v.width, v.height)
                }`}},{test:function(i){return i.type==="vec4"&&i.size===1},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+i+`"].location, v[0], v[1], v[2], v[3])
                }`}}],Q_={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},$_={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function K_(i,t){var e=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var r in i.uniforms){var n=t[r];if(!n){i.uniforms[r].group&&e.push(`
                    renderer.shader.syncUniformGroup(uv["`+r+`"], syncData);
                `);continue}for(var o=i.uniforms[r],s=!1,a=0;a<Zo.length;a++)if(Zo[a].test(n,o)){e.push(Zo[a].code(r,o)),s=!0;break}if(!s){var l=n.size===1?Q_:$_,c=l[n.type].replace("location",'ud["'+r+'"].location');e.push(`
            cv = ud["`+r+`"].value;
            v = uv["`+r+`"];
            `+c+";")}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}var q_=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function tC(i){for(var t="",e=0;e<i;++e)e>0&&(t+=`
else `),e<i-1&&(t+="if(test == "+e+".0){}");return t}function cI(i,t){if(i===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=t.createShader(t.FRAGMENT_SHADER);;){var r=q_.replace(/%forloop%/gi,tC(i));if(t.shaderSource(e,r),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))i=i/2|0;else break}return i}var Wi;function eC(){if(typeof Wi=="boolean")return Wi;try{var i=new Function("param1","param2","param3","return param1[param2] === param3;");Wi=i({a:"b"},"a","b")===!0}catch{Wi=!1}return Wi}var rC=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,iC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,nC=0,vo={},An=function(){function i(t,e,r){r===void 0&&(r="pixi-shader"),this.id=nC++,this.vertexSrc=t||i.defaultVertexSrc,this.fragmentSrc=e||i.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),vo[r]?(vo[r]++,r+="-"+vo[r]):vo[r]=1,this.vertexSrc="#define SHADER_NAME "+r+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+`
`+this.fragmentSrc,this.vertexSrc=Zf(this.vertexSrc,ht.PRECISION_VERTEX,Te.HIGH),this.fragmentSrc=Zf(this.fragmentSrc,ht.PRECISION_FRAGMENT,z_())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return i.prototype.extractData=function(t,e){var r=hI();if(r){var n=aI(r,t,e);this.attributeData=this.getAttributeData(n,r),this.uniformData=this.getUniformData(n,r),r.deleteProgram(n)}else this.uniformData={},this.attributeData={}},i.prototype.getAttributeData=function(t,e){for(var r={},n=[],o=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<o;s++){var a=e.getActiveAttrib(t,s),l=Gf(e,a.type),c={type:l,name:a.name,size:J_(l),location:0};r[a.name]=c,n.push(c)}n.sort(function(d,g){return d.name>g.name?1:-1});for(var s=0;s<n.length;s++)n[s].location=s;return r},i.prototype.getUniformData=function(t,e){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),o=0;o<n;o++){var s=e.getActiveUniform(t,o),a=s.name.replace(/\[.*?\]$/,""),l=s.name.match(/\[.*?\]$/),c=Gf(e,s.type);r[a]={type:c,size:s.size,isArray:l,value:uI(c,s.size)}}return r},Object.defineProperty(i,"defaultVertexSrc",{get:function(){return iC},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultFragmentSrc",{get:function(){return rC},enumerable:!1,configurable:!0}),i.from=function(t,e,r){var n=t+e,o=Gl[n];return o||(Gl[n]=o=new i(t,e,r)),o},i}(),ur=function(){function i(t,e){this.program=t,e?e instanceof ar?this.uniformGroup=e:this.uniformGroup=new ar(e):this.uniformGroup=new ar({});for(var r in t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}return i.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){var n=e.uniforms[r];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},i.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(i.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),i.from=function(t,e,r){var n=An.from(t,e);return new i(n,r)},i}(),au=0,uu=1,lu=2,hu=3,cu=4,pr=function(){function i(){this.data=0,this.blendMode=ct.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(i.prototype,"blend",{get:function(){return!!(this.data&1<<au)},set:function(t){!!(this.data&1<<au)!==t&&(this.data^=1<<au)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"offsets",{get:function(){return!!(this.data&1<<uu)},set:function(t){!!(this.data&1<<uu)!==t&&(this.data^=1<<uu)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"culling",{get:function(){return!!(this.data&1<<lu)},set:function(t){!!(this.data&1<<lu)!==t&&(this.data^=1<<lu)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"depthTest",{get:function(){return!!(this.data&1<<hu)},set:function(t){!!(this.data&1<<hu)!==t&&(this.data^=1<<hu)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<cu)},set:function(t){!!(this.data&1<<cu)!==t&&(this.data^=1<<cu)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==ct.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),i.for2d=function(){var t=new i;return t.depthTest=!1,t.blend=!0,t},i}(),oC=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,sC=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,$e=function(i){yt(t,i);function t(e,r,n){var o=this,s=An.from(e||t.defaultVertexSrc,r||t.defaultFragmentSrc);return o=i.call(this,s,n)||this,o.padding=0,o.resolution=ht.FILTER_RESOLUTION,o.enabled=!0,o.autoFit=!0,o.legacy=!!o.program.attributeData.aTextureCoord,o.state=new pr,o}return t.prototype.apply=function(e,r,n,o,s){e.applyFilter(this,r,n,o)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return oC},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return sC},enumerable:!1,configurable:!0}),t}(ur),aC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,uC=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,Nf=new Nt,ps=function(){function i(t,e){this._texture=t,this.mapCoord=new Nt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}return Object.defineProperty(i.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),i.prototype.multiplyUvs=function(t,e){e===void 0&&(e=t);for(var r=this.mapCoord,n=0;n<t.length;n+=2){var o=t[n],s=t[n+1];e[n]=o*r.a+s*r.c+r.tx,e[n+1]=o*r.b+s*r.d+r.ty}return e},i.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var n=e.orig,o=e.trim;o&&(Nf.set(n.width/o.width,0,0,n.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(Nf));var s=e.baseTexture,a=this.uClampFrame,l=this.clampMargin/s.resolution,c=this.clampOffset;return a[0]=(e._frame.x+l+c)/s.width,a[1]=(e._frame.y+l+c)/s.height,a[2]=(e._frame.x+e._frame.width-l+c)/s.width,a[3]=(e._frame.y+e._frame.height-l+c)/s.height,this.uClampOffset[0]=c/s.realWidth,this.uClampOffset[1]=c/s.realHeight,this.isSimple=e._frame.width===s.width&&e._frame.height===s.height&&e.rotate===0,!0},i}(),fI=function(i){yt(t,i);function t(e){var r=this,n=new Nt;return r=i.call(this,aC,uC)||this,e.renderable=!1,r.maskSprite=e,r.maskMatrix=n,r}return t.prototype.apply=function(e,r,n,o){var s=this.maskSprite,a=s._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new ps(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,e.applyFilter(this,r,n,o))},t}($e),dI=function(i){yt(t,i);function t(e){var r=i.call(this,e)||this;return r.enableScissor=!1,r.alphaMaskPool=[],r.maskDataPool=[],r.maskStack=[],r.alphaMaskIndex=0,r}return t.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},t.prototype.push=function(e,r){var n=r;if(!n.isMaskData){var o=this.maskDataPool.pop()||new sI;o.pooled=!0,o.maskObject=r,n=o}switch(n.autoDetect&&this.detect(n),n.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),n._target=e,n.type){case oe.SCISSOR:this.maskStack.push(n),this.renderer.scissor.push(n);break;case oe.STENCIL:this.maskStack.push(n),this.renderer.stencil.push(n);break;case oe.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n),this.maskStack.push(n);break}},t.prototype.pop=function(e){var r=this.maskStack.pop();if(!(!r||r._target!==e)){switch(r.type){case oe.SCISSOR:this.renderer.scissor.pop();break;case oe.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case oe.SPRITE:this.popSpriteMask();break}r.reset(),r.pooled&&this.maskDataPool.push(r)}},t.prototype.detect=function(e){var r=e.maskObject;if(r.isSprite){e.type=oe.SPRITE;return}if(e.type=oe.STENCIL,this.enableScissor&&r.isFastRect&&r.isFastRect()){var n=r.worldTransform,o=Math.atan2(n.b,n.a),s=Math.atan2(n.d,n.c);o=Math.round(o*(180/Math.PI)*100),s=Math.round(s*(180/Math.PI)*100)-o,o=(o%9e3+9e3)%9e3,s=(s%18e3+18e3)%18e3,o===0&&s===9e3&&(e.type=oe.SCISSOR)}},t.prototype.pushSpriteMask=function(e){var r=e.maskObject,n=e._target,o=this.alphaMaskPool[this.alphaMaskIndex];o||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new fI(r)]),o[0].resolution=this.renderer.resolution,o[0].maskSprite=r;var s=n.filterArea;n.filterArea=r.getBounds(!0),this.renderer.filter.push(n,o),n.filterArea=s,this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},t}(le),gI=function(i){yt(t,i);function t(e){var r=i.call(this,e)||this;return r.maskStack=[],r.glConst=0,r}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(e){var r=this.renderer.gl,n=this.getStackLength();this.maskStack=e;var o=this.getStackLength();o!==n&&(o===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){i.prototype.destroy.call(this),this.maskStack=null},t}(le),pI=function(i){yt(t,i);function t(e){var r=i.call(this,e)||this;return r.glConst=WebGLRenderingContext.SCISSOR_TEST,r}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.push=function(e){var r=e.maskObject;r.renderable=!0;var n=e._scissorRect,o=r.getBounds(!0),s=this.renderer.gl;r.renderable=!1,n?o.fit(n):s.enable(s.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=o,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,r=this.renderer.renderTexture.current,n=this.renderer.projection,o=n.transform,s=n.sourceFrame,a=n.destinationFrame,l=r?r.resolution:this.renderer.resolution,c=(e.x-s.x)*l+a.x,d=(e.y-s.y)*l+a.y,g=e.width*l,u=e.height*l;o&&(c+=o.tx*l,d+=o.ty*l),r||(d=this.renderer.height-u-d),this.renderer.gl.scissor(c,d,g,u)},t}(gI),II=function(i){yt(t,i);function t(e){var r=i.call(this,e)||this;return r.glConst=WebGLRenderingContext.STENCIL_TEST,r}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var r=e.maskObject,n=this.renderer.gl,o=e._stencilCounter;o===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,o,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var r=this.renderer.gl;this.getStackLength()===0?(r.disable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),r.clearStencil(0)):(r.colorMask(!1,!1,!1,!1),r.stencilOp(r.KEEP,r.KEEP,r.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(gI),vI=function(i){yt(t,i);function t(e){var r=i.call(this,e)||this;return r.destinationFrame=null,r.sourceFrame=null,r.defaultFrame=null,r.projectionMatrix=new Nt,r.transform=null,r}return t.prototype.update=function(e,r,n,o){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,o),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(e,r,n,o){var s=this.projectionMatrix,a=o?-1:1;s.identity(),s.a=1/r.width*2,s.d=a*(1/r.height*2),s.tx=-1-r.x*s.a,s.ty=-a-r.y*s.d},t.prototype.setTransform=function(e){},t}(le),yr=new bt,Xi=new bt,ki=new bt,yI=function(i){yt(t,i);function t(e){var r=i.call(this,e)||this;return r.clearColor=e._backgroundColorRgba,r.defaultMaskStack=[],r.current=null,r.sourceFrame=new bt,r.destinationFrame=new bt,r}return t.prototype.bind=function(e,r,n){e===void 0&&(e=null);var o=this.renderer;this.current=e;var s,a,l;e?(s=e.baseTexture,l=s.resolution,r||(yr.width=e.frame.width,yr.height=e.frame.height,r=yr),n||(Xi.x=e.frame.x,Xi.y=e.frame.y,Xi.width=r.width,Xi.height=r.height,n=Xi),a=s.framebuffer):(l=o.resolution,r||(yr.width=o.screen.width,yr.height=o.screen.height,r=yr),n||(n=yr,n.width=r.width,n.height=r.height)),ki.x=n.x*l,ki.y=n.y*l,ki.width=n.width*l,ki.height=n.height*l,this.renderer.framebuffer.bind(a,ki),this.renderer.projection.update(n,r,l,!a),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(n)},t.prototype.clear=function(e,r){this.current?e=e||this.current.baseTexture.clearColor:e=e||this.clearColor,this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],r)},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t}(le),lC=function(){function i(){}return i}(),mI=function(){function i(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}return i.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},i}(),hC=0,jf={textureCount:0},_I=function(i){yt(t,i);function t(e){var r=i.call(this,e)||this;return r.destroyed=!1,r.systemCheck(),r.gl=null,r.shader=null,r.program=null,r.cache={},r.id=hC++,r}return t.prototype.systemCheck=function(){if(!eC())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(e){this.gl=e,this.reset()},t.prototype.bind=function(e,r){e.uniforms.globals=this.renderer.globalUniforms;var n=e.program,o=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(o.program)),r||(jf.textureCount=0,this.syncUniformGroup(e.uniformGroup,jf)),o},t.prototype.setUniforms=function(e){var r=this.shader.program,n=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(n.uniformData,e,this.renderer)},t.prototype.syncUniformGroup=function(e,r){var n=this.getglProgram();(!e.static||e.dirtyId!==n.uniformGroups[e.id])&&(n.uniformGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,r))},t.prototype.syncUniforms=function(e,r,n){var o=e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e);o(r.uniformData,e.uniforms,this.renderer,n)},t.prototype.createSyncGroups=function(e){var r=this.getSignature(e,this.shader.program.uniformData);return this.cache[r]||(this.cache[r]=K_(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[r],e.syncUniforms[this.shader.program.id]},t.prototype.getSignature=function(e,r){var n=e.uniforms,o=[];for(var s in n)o.push(s),r[s]&&o.push(r[s].type);return o.join("-")},t.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateShader=function(e){var r=this.gl,n=e.program,o={};for(var s in n.attributeData)o[s]=n.attributeData[s].location;var a=aI(r,n.vertexSrc,n.fragmentSrc,o),l={};for(var s in n.uniformData){var c=n.uniformData[s];l[s]={location:r.getUniformLocation(a,s),value:uI(c.type,c.size)}}var d=new mI(a,l);return n.glPrograms[this.renderer.CONTEXT_UID]=d,d},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.destroyed=!0},t}(le);function cC(i,t){return t===void 0&&(t=[]),t[ct.NORMAL]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[ct.ADD]=[i.ONE,i.ONE],t[ct.MULTIPLY]=[i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],t[ct.SCREEN]=[i.ONE,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],t[ct.OVERLAY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[ct.DARKEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[ct.LIGHTEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[ct.COLOR_DODGE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[ct.COLOR_BURN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[ct.HARD_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[ct.SOFT_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[ct.DIFFERENCE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[ct.EXCLUSION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[ct.HUE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[ct.SATURATION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[ct.COLOR]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[ct.LUMINOSITY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],t[ct.NONE]=[0,0],t[ct.NORMAL_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],t[ct.ADD_NPM]=[i.SRC_ALPHA,i.ONE,i.ONE,i.ONE],t[ct.SCREEN_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],t[ct.SRC_IN]=[i.DST_ALPHA,i.ZERO],t[ct.SRC_OUT]=[i.ONE_MINUS_DST_ALPHA,i.ZERO],t[ct.SRC_ATOP]=[i.DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],t[ct.DST_OVER]=[i.ONE_MINUS_DST_ALPHA,i.ONE],t[ct.DST_IN]=[i.ZERO,i.SRC_ALPHA],t[ct.DST_OUT]=[i.ZERO,i.ONE_MINUS_SRC_ALPHA],t[ct.DST_ATOP]=[i.ONE_MINUS_DST_ALPHA,i.SRC_ALPHA],t[ct.XOR]=[i.ONE_MINUS_DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],t[ct.SUBTRACT]=[i.ONE,i.ONE,i.ONE,i.ONE,i.FUNC_REVERSE_SUBTRACT,i.FUNC_ADD],t}var fC=0,dC=1,gC=2,pC=3,IC=4,CI=function(i){yt(t,i);function t(e){var r=i.call(this,e)||this;return r.gl=null,r.stateId=0,r.polygonOffset=0,r.blendMode=ct.NONE,r._blendEq=!1,r.map=[],r.map[fC]=r.setBlend,r.map[dC]=r.setOffset,r.map[gC]=r.setCullFace,r.map[pC]=r.setDepthTest,r.map[IC]=r.setFrontFace,r.checks=[],r.defaultState=new pr,r.defaultState.blend=!0,r}return t.prototype.contextChange=function(e){this.gl=e,this.blendModes=cC(e),this.set(this.defaultState),this.reset()},t.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var r=this.stateId^e.data,n=0;r;)r&1&&this.map[n].call(this,!!(e.data&1<<n)),r=r>>1,n++;this.stateId=e.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,e)},t.prototype.forceState=function(e){e=e||this.defaultState;for(var r=0;r<this.map.length;r++)this.map[r].call(this,!!(e.data&1<<r));for(var r=0;r<this.checks.length;r++)this.checks[r](this,e);this.stateId=e.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},t.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var r=this.blendModes[e],n=this.gl;r.length===2?n.blendFunc(r[0],r[1]):n.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,n.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},t.prototype.setPolygonOffset=function(e,r){this.gl.polygonOffset(e,r)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(e,r){var n=this.checks.indexOf(e);r&&n===-1?this.checks.push(e):!r&&n!==-1&&this.checks.splice(n,1)},t.checkBlendMode=function(e,r){e.setBlendMode(r.blendMode)},t.checkPolygonOffset=function(e,r){e.setPolygonOffset(1,r.polygonOffset)},t}(le),AI=function(i){yt(t,i);function t(e){var r=i.call(this,e)||this;return r.count=0,r.checkCount=0,r.maxIdle=ht.GC_MAX_IDLE,r.checkCountMax=ht.GC_MAX_CHECK_COUNT,r.mode=ht.GC_MODE,r}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==Uo.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var e=this.renderer.texture,r=e.managedTextures,n=!1,o=0;o<r.length;o++){var s=r[o];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),r[o]=null,n=!0)}if(n){for(var a=0,o=0;o<r.length;o++)r[o]!==null&&(r[a++]=r[o]);r.length=a}},t.prototype.unload=function(e){var r,n=this.renderer.texture;!((r=e._texture)===null||r===void 0)&&r.framebuffer&&n.destroyTexture(e._texture);for(var o=e.children.length-1;o>=0;o--)this.unload(e.children[o])},t}(le),Oo=function(){function i(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121}return i}(),bI=function(i){yt(t,i);function t(e){var r=i.call(this,e)||this;return r.boundTextures=[],r.currentLocation=-1,r.managedTextures=[],r._unknownBoundTextures=!1,r.unknownTexture=new Tt,r}return t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(var n=0;n<r;n++)this.boundTextures[n]=null;this.emptyTextures={};var o=new Oo(e.createTexture());e.bindTexture(e.TEXTURE_2D,o.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=o,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Oo(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(var n=0;n<this.boundTextures.length;n++)this.bind(null,n)},t.prototype.bind=function(e,r){r===void 0&&(r=0);var n=this.gl;if(e){if(e=e.castToBaseTexture(),e.parentTextureArray)return;if(e.valid){e.touched=this.renderer.textureGC.count;var o=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(e.target,o.texture)),o.dirtyId!==e.dirtyId&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),this.updateTexture(e)),this.boundTextures[r]=e}}else this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[r]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},t.prototype.unbind=function(e){var r=this,n=r.gl,o=r.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<o.length;s++)o[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<o.length;s++)o[s]===e&&(this.currentLocation!==s&&(n.activeTexture(n.TEXTURE0+s),this.currentLocation=s),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[e.target].texture),o[s]=null)},t.prototype.initTexture=function(e){var r=new Oo(this.gl.createTexture());return r.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),r},t.prototype.initTextureType=function(e,r){if(r.internalFormat=e.format,r.type=e.type,this.webGLVersion===2){var n=this.renderer.gl;e.type===n.FLOAT&&e.format===n.RGBA&&(r.internalFormat=n.RGBA32F),e.type===Gt.HALF_FLOAT&&(r.type=n.HALF_FLOAT),r.type===n.HALF_FLOAT&&e.format===n.RGBA&&(r.internalFormat=n.RGBA16F)}},t.prototype.updateTexture=function(e){var r=e._glTextures[this.CONTEXT_UID];if(r){var n=this.renderer;if(this.initTextureType(e,r),!(e.resource&&e.resource.upload(n,e,r))){var o=e.realWidth,s=e.realHeight,a=n.gl;(r.width!==o||r.height!==s||r.dirtyId<0)&&(r.width=o,r.height=s,a.texImage2D(e.target,0,r.internalFormat,o,s,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}},t.prototype.destroyTexture=function(e,r){var n=this.gl;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!r)){var o=this.managedTextures.indexOf(e);o!==-1&&Br(this.managedTextures,o,1)}},t.prototype.updateTextureStyle=function(e){var r=e._glTextures[this.CONTEXT_UID];r&&((e.mipmap===gi.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?r.mipmap=!1:r.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?r.wrapMode=ze.CLAMP:r.wrapMode=e.wrapMode,e.resource&&e.resource.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)},t.prototype.setStyle=function(e,r){var n=this.gl;if(r.mipmap&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Se.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var o=this.renderer.context.extensions.anisotropicFiltering;if(o&&e.anisotropicLevel>0&&e.scaleMode===Se.LINEAR){var s=Math.min(e.anisotropicLevel,n.getParameter(o.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,o.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Se.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===Se.LINEAR?n.LINEAR:n.NEAREST)},t}(le),vC={FilterSystem:tI,BatchSystem:eI,ContextSystem:rI,FramebufferSystem:nI,GeometrySystem:oI,MaskSystem:dI,ScissorSystem:pI,StencilSystem:II,ProjectionSystem:vI,RenderTextureSystem:yI,ShaderSystem:_I,StateSystem:CI,TextureGCSystem:AI,TextureSystem:bI},fu=new Nt,wI=function(i){yt(t,i);function t(e,r){e===void 0&&(e=fi.UNKNOWN);var n=i.call(this)||this;return r=Object.assign({},ht.RENDER_OPTIONS,r),r.roundPixels&&(ht.ROUND_PIXELS=r.roundPixels,it("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),n.options=r,n.type=e,n.screen=new bt(0,0,r.width,r.height),n.view=r.view||document.createElement("canvas"),n.resolution=r.resolution||ht.RESOLUTION,n.transparent=r.transparent,n.autoDensity=r.autoDensity||r.autoResize||!1,n.preserveDrawingBuffer=r.preserveDrawingBuffer,n.clearBeforeRender=r.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,0],n._backgroundColorString="#000000",n.backgroundColor=r.backgroundColor||n._backgroundColor,n._lastObjectRendered=null,n.plugins={},n}return t.prototype.initPlugins=function(e){for(var r in e)this.plugins[r]=new e[r](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,r){this.screen.width=e,this.screen.height=r,this.view.width=e*this.resolution,this.view.height=r*this.resolution,this.autoDensity&&(this.view.style.width=e+"px",this.view.style.height=r+"px"),this.emit("resize",e,r)},t.prototype.generateTexture=function(e,r,n,o){o=o||e.getLocalBounds(null,!0),o.width===0&&(o.width=1),o.height===0&&(o.height=1);var s=Gr.create({width:o.width|0,height:o.height|0,scaleMode:r,resolution:n});return fu.tx=-o.x,fu.ty=-o.y,this.render(e,s,!1,fu,!!e.parent),s},t.prototype.destroy=function(e){for(var r in this.plugins)this.plugins[r].destroy(),this.plugins[r]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=fi.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=Bh(e),Zr(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),t}(xi),Ke=function(i){yt(t,i);function t(e){var r=i.call(this,fi.WEBGL,e)||this;return e=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new qt("destroy"),contextChange:new qt("contextChange"),reset:new qt("reset"),update:new qt("update"),postrender:new qt("postrender"),prerender:new qt("prerender"),resize:new qt("resize")},r.globalUniforms=new ar({projectionMatrix:new Nt},!0),r.addSystem(dI,"mask").addSystem(rI,"context").addSystem(CI,"state").addSystem(_I,"shader").addSystem(bI,"texture").addSystem(oI,"geometry").addSystem(nI,"framebuffer").addSystem(pI,"scissor").addSystem(II,"stencil").addSystem(vI,"projection").addSystem(AI,"textureGC").addSystem(tI,"filter").addSystem(yI,"renderTexture").addSystem(eI,"batch"),r.initPlugins(t.__plugins),e.context?r.context.initFromContext(e.context):r.context.initFromOptions({alpha:!!r.transparent,antialias:e.antialias,premultipliedAlpha:r.transparent&&r.transparent!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,xp(r.context.webGLVersion===2?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return t.create=function(e){if(Pp())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.addSystem=function(e,r){r||(r=e.name);var n=new e(this);if(this[r])throw new Error('Whoops! The name "'+r+'" is already in use');this[r]=n;for(var o in this.runners)this.runners[o].add(n);return this},t.prototype.render=function(e,r,n,o,s){if(this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=o,!this.context.isLost){if(r||(this._lastObjectRendered=e),!s){var a=e.enableTempParent();e.updateTransform(),e.disableTempParent(a)}this.renderTexture.bind(r),this.batch.currentRenderer.start(),(n!==void 0?n:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.resize=function(e,r){i.prototype.resize.call(this,e,r),this.runners.resize.emit(e,r)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(e){this.runners.destroy.emit();for(var r in this.runners)this.runners[r].destroy();i.prototype.destroy.call(this,e),this.gl=null},t.registerPlugin=function(e,r){t.__plugins=t.__plugins||{},t.__plugins[e]=r},t}(wI);function xI(i){return Ke.create(i)}var PI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,zh=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Jo=function(){function i(){this.texArray=null,this.blend=0,this.type=ye.TRIANGLES,this.start=0,this.size=0,this.data=null}return i}(),Qo=function(){function i(){this.elements=[],this.ids=[],this.count=0}return i.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},i}(),SI=function(){function i(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(i.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),i.prototype.view=function(t){return this[t+"View"]},i.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},i.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},i}(),TI=function(i){yt(t,i);function t(e){var r=i.call(this,e)||this;return r.shaderGenerator=null,r.geometryClass=null,r.vertexSize=null,r.state=pr.for2d(),r.size=ht.SPRITE_BATCH_SIZE*4,r._vertexCount=0,r._indexCount=0,r._bufferedElements=[],r._bufferedTextures=[],r._bufferSize=0,r._shader=null,r._packedGeometries=[],r._packedGeometryPoolSize=2,r._flushId=0,r._aBuffers={},r._iBuffers={},r.MAX_TEXTURES=1,r.renderer.on("prerender",r.onPrerender,r),e.runners.contextChange.add(r),r._dcIndex=0,r._aIndex=0,r._iIndex=0,r._attributeBuffer=null,r._indexBuffer=null,r._tempBoundTextures=[],r}return t.prototype.contextChange=function(){var e=this.renderer.gl;ht.PREFER_ENV===Re.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),ht.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=cI(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,r=t._textureArrayPool,n=this.size/4,o=Math.floor(n/this.MAX_TEXTURES)+1;e.length<n;)e.push(new Jo);for(;r.length<o;)r.push(new Qo);for(var s=0;s<this.MAX_TEXTURES;s++)this._tempBoundTextures[s]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this,r=e._bufferedTextures,n=e.MAX_TEXTURES,o=t._textureArrayPool,s=this.renderer.batch,a=this._tempBoundTextures,l=this.renderer.textureGC.count,c=++Tt._globalBatch,d=0,g=o[0],u=0;s.copyBoundTextures(a,n);for(var h=0;h<this._bufferSize;++h){var f=r[h];r[h]=null,f._batchEnabled!==c&&(g.count>=n&&(s.boundArray(g,a,c,n),this.buildDrawCalls(g,u,h),u=h,g=o[++d],++c),f._batchEnabled=c,f.touched=l,g.elements[g.count++]=f)}g.count>0&&(s.boundArray(g,a,c,n),this.buildDrawCalls(g,u,this._bufferSize),++d,++c);for(var h=0;h<a.length;h++)a[h]=null;Tt._globalBatch=c},t.prototype.buildDrawCalls=function(e,r,n){var o=this,s=o._bufferedElements,a=o._attributeBuffer,l=o._indexBuffer,c=o.vertexSize,d=t._drawCallPool,g=this._dcIndex,u=this._aIndex,h=this._iIndex,f=d[g];f.start=this._iIndex,f.texArray=e;for(var v=r;v<n;++v){var m=s[v],y=m._texture.baseTexture,I=Rh[y.alphaMode?1:0][m.blendMode];s[v]=null,r<v&&f.blend!==I&&(f.size=h-f.start,r=v,f=d[++g],f.texArray=e,f.start=h),this.packInterleavedGeometry(m,a,l,u,h),u+=m.vertexData.length/2*c,h+=m.indices.length,f.blend=I}r<n&&(f.size=h-f.start,++g),this._dcIndex=g,this._aIndex=u,this._iIndex=h},t.prototype.bindAndClearTexArray=function(e){for(var r=this.renderer.texture,n=0;n<e.count;n++)r.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,r=e._packedGeometries,n=e._attributeBuffer,o=e._indexBuffer;ht.CAN_UPLOAD_SAME_BUFFER?(r[this._flushId]._buffer.update(n.rawBinaryData),r[this._flushId]._indexBuffer.update(o),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,r[this._flushId]=new this.geometryClass),r[this._flushId]._buffer.update(n.rawBinaryData),r[this._flushId]._indexBuffer.update(o),this.renderer.geometry.bind(r[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,r=this.renderer,n=r.gl,o=r.state,s=t._drawCallPool,a=null,l=0;l<e;l++){var c=s[l],d=c.texArray,g=c.type,u=c.size,h=c.start,f=c.blend;a!==d&&(a=d,this.bindAndClearTexArray(d)),this.state.blendMode=f,o.set(this.state),n.drawElements(g,u,n.UNSIGNED_SHORT,h*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),ht.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),i.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var r=ln(Math.ceil(e/8)),n=Ol(r),o=r*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var s=this._aBuffers[o];return s||(this._aBuffers[o]=s=new SI(o*this.vertexSize*4)),s},t.prototype.getIndexBuffer=function(e){var r=ln(Math.ceil(e/12)),n=Ol(r),o=r*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var s=this._iBuffers[n];return s||(this._iBuffers[n]=s=new Uint16Array(o)),s},t.prototype.packInterleavedGeometry=function(e,r,n,o,s){for(var a=r.uint32View,l=r.float32View,c=o/this.vertexSize,d=e.uvs,g=e.indices,u=e.vertexData,h=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),v=f<1&&e._texture.baseTexture.alphaMode?fs(e._tintRGB,f):e._tintRGB+(f*255<<24),m=0;m<u.length;m+=2)l[o++]=u[m],l[o++]=u[m+1],l[o++]=d[m],l[o++]=d[m+1],a[o++]=v,l[o++]=h;for(var m=0;m<g.length;m++)n[s++]=c+g[m]},t._drawCallPool=[],t._textureArrayPool=[],t}(Cn),EI=function(){function i(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return i.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=ar.from({uSamplers:e},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+t),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new An(this.vertexSrc,n)}var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Nt,default:this.defaultGroupCache[t]};return new ur(this.programCache[t],o)},i.prototype.generateSampleSrc=function(t){var e="";e+=`
`,e+=`
`;for(var r=0;r<t;r++)r>0&&(e+=`
else `),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+r+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},i}(),Vh=function(i){yt(t,i);function t(e){e===void 0&&(e=!1);var r=i.call(this)||this;return r._buffer=new Vt(null,e,!1),r._indexBuffer=new Vt(null,e,!0),r.addAttribute("aVertexPosition",r._buffer,2,!1,Gt.FLOAT).addAttribute("aTextureCoord",r._buffer,2,!1,Gt.FLOAT).addAttribute("aColor",r._buffer,4,!0,Gt.UNSIGNED_BYTE).addAttribute("aTextureId",r._buffer,1,!0,Gt.FLOAT).addIndex(r._indexBuffer),r}return t}(Ti),Wf=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,Xf=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,FI=function(){function i(){}return i.create=function(t){var e=Object.assign({vertex:Wf,fragment:Xf,geometryClass:Vh,vertexSize:6},t),r=e.vertex,n=e.fragment,o=e.vertexSize,s=e.geometryClass;return function(a){yt(l,a);function l(c){var d=a.call(this,c)||this;return d.shaderGenerator=new EI(r,n),d.geometryClass=s,d.vertexSize=o,d}return l}(TI)},Object.defineProperty(i,"defaultVertexSrc",{get:function(){return Wf},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultFragmentTemplate",{get:function(){return Xf},enumerable:!1,configurable:!0}),i}(),MI=FI.create();/*!
 * @pixi/app - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ei=function(){function i(t){var e=this;t=Object.assign({forceCanvas:!1},t),this.renderer=xI(t),this.stage=new Ee,i._plugins.forEach(function(r){r.init.call(e,t)})}return i.registerPlugin=function(t){i._plugins.push(t)},i.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(i.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),i.prototype.destroy=function(t,e){var r=this,n=i._plugins.slice(0);n.reverse(),n.forEach(function(o){o.destroy.call(r)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null},i}();Ei._plugins=[];var yC=function(){function i(){}return i.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(r){window.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame(function(){return e.resize()}))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){e.cancelResize();var r,n;if(e._resizeTo===window)r=window.innerWidth,n=window.innerHeight;else{var o=e._resizeTo,s=o.clientWidth,a=o.clientHeight;r=s,n=a}e.renderer.resize(r,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},i.destroy=function(){this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},i}();Ei.registerPlugin(yC);/*!
 * @pixi/extract - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var kf=new bt,Hf=4,DI=function(){function i(t){this.renderer=t,t.extract=this}return i.prototype.image=function(t,e,r){var n=new Image;return n.src=this.base64(t,e,r),n},i.prototype.base64=function(t,e,r){return this.canvas(t).toDataURL(e,r)},i.prototype.canvas=function(t){var e=this.renderer,r,n,o=!1,s,a=!1;t&&(t instanceof Gr?s=t:(s=this.renderer.generateTexture(t),a=!0)),s?(r=s.baseTexture.resolution,n=s.frame,o=!1,e.renderTexture.bind(s)):(r=this.renderer.resolution,o=!0,n=kf,n.width=this.renderer.width,n.height=this.renderer.height,e.renderTexture.bind(null));var l=Math.floor(n.width*r+1e-4),c=Math.floor(n.height*r+1e-4),d=new Nl(l,c,1),g=new Uint8Array(Hf*l*c),u=e.gl;u.readPixels(n.x*r,n.y*r,l,c,u.RGBA,u.UNSIGNED_BYTE,g);var h=d.context.getImageData(0,0,l,c);if(i.arrayPostDivide(g,h.data),d.context.putImageData(h,0,0),o){var f=new Nl(d.width,d.height,1);f.context.scale(1,-1),f.context.drawImage(d.canvas,0,-c),d.destroy(),d=f}return a&&s.destroy(!0),d.canvas},i.prototype.pixels=function(t){var e=this.renderer,r,n,o,s=!1;t&&(t instanceof Gr?o=t:(o=this.renderer.generateTexture(t),s=!0)),o?(r=o.baseTexture.resolution,n=o.frame,e.renderTexture.bind(o)):(r=e.resolution,n=kf,n.width=e.width,n.height=e.height,e.renderTexture.bind(null));var a=n.width*r,l=n.height*r,c=new Uint8Array(Hf*a*l),d=e.gl;return d.readPixels(n.x*r,n.y*r,a,l,d.RGBA,d.UNSIGNED_BYTE,c),s&&o.destroy(!0),i.arrayPostDivide(c,c),c},i.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},i.arrayPostDivide=function(t,e){for(var r=0;r<t.length;r+=4){var n=e[r+3]=t[r+3];n!==0?(e[r]=Math.round(Math.min(t[r]*255/n,255)),e[r+1]=Math.round(Math.min(t[r+1]*255/n,255)),e[r+2]=Math.round(Math.min(t[r+2]*255/n,255))):(e[r]=t[r],e[r+1]=t[r+1],e[r+2]=t[r+2])}},i}(),mC=(i,t={})=>{if(!i)return;const e={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=e.parser[t.strictMode?"strict":"loose"].exec(i),n={};let o=14;for(;o--;)n[e.key[o]]=r[o]||"";return n[e.q.name]={},n[e.key[12]].replace(e.q.parser,function(s,a,l){a&&(n[e.q.name][a]=l)}),n};const BI=vn(mC);class yo{constructor(t,e=!1,r){this._fn=t,this._once=e,this._thisArg=r,this._next=this._prev=this._owner=null}detach(){return this._owner===null?!1:(this._owner.detach(this),!0)}}function Yf(i,t){return i._head?(i._tail._next=t,t._prev=i._tail,i._tail=t):(i._head=t,i._tail=t),t._owner=i,t}class He{constructor(){this._head=this._tail=void 0}handlers(t=!1){let e=this._head;if(t)return!!e;const r=[];for(;e;)r.push(e),e=e._next;return r}has(t){if(!(t instanceof yo))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}dispatch(){let t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}add(t,e=null){if(typeof t!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return Yf(this,new yo(t,!1,e))}once(t,e=null){if(typeof t!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return Yf(this,new yo(t,!0,e))}detach(t){if(!(t instanceof yo))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,t._next===null&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}detachAll(){let t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}/*!
 * resource-loader - v3.0.1
 * https://github.com/pixijs/pixi-sound
 * Compiled Tue, 02 Jul 2019 14:06:18 UTC
 *
 * resource-loader is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */function mr(){}function Uf(i,t,e,r){var n=0,o=i.length;(function s(a){if(a||n===o){e&&e(a);return}r?setTimeout(function(){t(i[n++],s)},1):t(i[n++],s)})()}function _C(i){return function(){if(i===null)throw new Error("Callback was already called.");var e=i;i=null,e.apply(this,arguments)}}function CC(i,t){if(t==null)t=1;else if(t===0)throw new Error("Concurrency must not be zero");var e=0,r={_tasks:[],concurrency:t,saturated:mr,unsaturated:mr,buffer:t/4,empty:mr,drain:mr,error:mr,started:!1,paused:!1,push:function(a,l){n(a,!1,l)},kill:function(){e=0,r.drain=mr,r.started=!1,r._tasks=[]},unshift:function(a,l){n(a,!0,l)},process:function(){for(;!r.paused&&e<r.concurrency&&r._tasks.length;){var a=r._tasks.shift();r._tasks.length===0&&r.empty(),e+=1,e===r.concurrency&&r.saturated(),i(a.data,_C(o(a)))}},length:function(){return r._tasks.length},running:function(){return e},idle:function(){return r._tasks.length+e===0},pause:function(){r.paused!==!0&&(r.paused=!0)},resume:function(){if(r.paused!==!1){r.paused=!1;for(var a=1;a<=r.concurrency;a++)r.process()}}};function n(s,a,l){if(l!=null&&typeof l!="function")throw new Error("task callback must be a function");if(r.started=!0,s==null&&r.idle()){setTimeout(function(){return r.drain()},1);return}var c={data:s,callback:typeof l=="function"?l:mr};a?r._tasks.unshift(c):r._tasks.push(c),setTimeout(function(){return r.process()},1)}function o(s){return function(){e-=1,s.callback.apply(s,arguments),arguments[0]!=null&&r.error(arguments[0],s.data),e<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}}return r}var du={};function AC(i,t){var e=this;du[i.url]?(i.data=du[i.url],i.complete()):i.onComplete.once(function(){return du[e.url]=e.data}),t()}function zf(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function LI(i,t,e){return t&&zf(i.prototype,t),e&&zf(i,e),i}var bC=!!(window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),mo=null,wC=0,Vf=200,xC=204,PC=1223,SC=2;function TC(){}var ft=function(){i.setExtensionLoadType=function(r,n){Jf(i._loadTypeMap,r,n)},i.setExtensionXhrType=function(r,n){Jf(i._xhrTypeMap,r,n)};function i(e,r,n){if(typeof e!="string"||typeof r!="string")throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(i.STATUS_FLAGS.DATA_URL,r.indexOf("data:")===0),this.name=e,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=i.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=TC,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new He,this.onProgress=new He,this.onComplete=new He,this.onAfterMiddleware=new He}var t=i.prototype;return t.complete=function(){this._clearEvents(),this._finish()},t.abort=function(r){if(!this.error){if(this.error=new Error(r),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=i.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.load=function(r){var n=this;if(!this.isLoading){if(this.isComplete){r&&setTimeout(function(){return r(n)},1);return}else r&&this.onComplete.once(r);switch(this._setFlag(i.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case i.LOAD_TYPE.IMAGE:this.type=i.TYPE.IMAGE,this._loadElement("image");break;case i.LOAD_TYPE.AUDIO:this.type=i.TYPE.AUDIO,this._loadSourceElement("audio");break;case i.LOAD_TYPE.VIDEO:this.type=i.TYPE.VIDEO,this._loadSourceElement("video");break;case i.LOAD_TYPE.XHR:default:bC&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},t._hasFlag=function(r){return(this._flags&r)!==0},t._setFlag=function(r,n){this._flags=n?this._flags|r:this._flags&~r},t._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(i.STATUS_FLAGS.COMPLETE,!0),this._setFlag(i.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t._loadElement=function(r){this.metadata.loadElement?this.data=this.metadata.loadElement:r==="image"&&typeof window.Image<"u"?this.data=new Image:this.data=document.createElement(r),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t._loadSourceElement=function(r){if(this.metadata.loadElement?this.data=this.metadata.loadElement:r==="audio"&&typeof window.Audio<"u"?this.data=new Audio:this.data=document.createElement(r),this.data===null){this.abort("Unsupported element: "+r);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var n=this.metadata.mimeType,o=0;o<this.url.length;++o)this.data.appendChild(this._createSource(r,this.url[o],Array.isArray(n)?n[o]:n));else{var s=this.metadata.mimeType;this.data.appendChild(this._createSource(r,this.url,Array.isArray(s)?s[0]:s))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var r=this.xhr=new XMLHttpRequest;r.open("GET",this.url,!0),r.timeout=this.timeout,this.xhrType===i.XHR_RESPONSE_TYPE.JSON||this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT?r.responseType=i.XHR_RESPONSE_TYPE.TEXT:r.responseType=this.xhrType,r.addEventListener("error",this._boundXhrOnError,!1),r.addEventListener("timeout",this._boundXhrOnTimeout,!1),r.addEventListener("abort",this._boundXhrOnAbort,!1),r.addEventListener("progress",this._boundOnProgress,!1),r.addEventListener("load",this._boundXhrOnLoad,!1),r.send()},t._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var r=this.xhr=new XDomainRequest;r.timeout=this.timeout||5e3,r.onerror=this._boundXhrOnError,r.ontimeout=this._boundXhrOnTimeout,r.onprogress=this._boundOnProgress,r.onload=this._boundXhrOnLoad,r.open("GET",this.url,!0),setTimeout(function(){return r.send()},1)},t._createSource=function(r,n,o){o||(o=r+"/"+this._getExtension(n));var s=document.createElement("source");return s.src=n,s.type=o,s},t._onError=function(r){this.abort("Failed to load element using: "+r.target.nodeName)},t._onProgress=function(r){r&&r.lengthComputable&&this.onProgress.dispatch(this,r.loaded/r.total)},t._onTimeout=function(){this.abort("Load timed out.")},t._xhrOnError=function(){var r=this.xhr;this.abort(gu(r)+" Request failed. Status: "+r.status+', text: "'+r.statusText+'"')},t._xhrOnTimeout=function(){var r=this.xhr;this.abort(gu(r)+" Request timed out.")},t._xhrOnAbort=function(){var r=this.xhr;this.abort(gu(r)+" Request was aborted by the user.")},t._xhrOnLoad=function(){var r=this.xhr,n="",o=typeof r.status>"u"?Vf:r.status;(r.responseType===""||r.responseType==="text"||typeof r.responseType>"u")&&(n=r.responseText),o===wC&&(n.length>0||r.responseType===i.XHR_RESPONSE_TYPE.BUFFER)?o=Vf:o===PC&&(o=xC);var s=o/100|0;if(s===SC)if(this.xhrType===i.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=i.TYPE.TEXT;else if(this.xhrType===i.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=i.TYPE.JSON}catch(c){this.abort("Error trying to parse loaded json: "+c);return}else if(this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var a=new DOMParser;this.data=a.parseFromString(n,"text/xml")}else{var l=document.createElement("div");l.innerHTML=n,this.data=l}this.type=i.TYPE.XML}catch(c){this.abort("Error trying to parse loaded xml: "+c);return}else this.data=r.response||n;else{this.abort("["+r.status+"] "+r.statusText+": "+r.responseURL);return}this.complete()},t._determineCrossOrigin=function(r,n){if(r.indexOf("data:")===0)return"";if(window.origin!==window.location.origin)return"anonymous";n=n||window.location,mo||(mo=document.createElement("a")),mo.href=r,r=BI(mo.href,{strictMode:!0});var o=!r.port&&n.port===""||r.port===n.port,s=r.protocol?r.protocol+":":"";return r.host!==n.hostname||!o||s!==n.protocol?"anonymous":""},t._determineXhrType=function(){return i._xhrTypeMap[this.extension]||i.XHR_RESPONSE_TYPE.TEXT},t._determineLoadType=function(){return i._loadTypeMap[this.extension]||i.LOAD_TYPE.XHR},t._getExtension=function(){var r=this.url,n="";if(this.isDataUrl){var o=r.indexOf("/");n=r.substring(o+1,r.indexOf(";",o))}else{var s=r.indexOf("?"),a=r.indexOf("#"),l=Math.min(s>-1?s:r.length,a>-1?a:r.length);r=r.substring(0,l),n=r.substring(r.lastIndexOf(".")+1)}return n.toLowerCase()},t._getMimeFromXhrType=function(r){switch(r){case i.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case i.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case i.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case i.XHR_RESPONSE_TYPE.JSON:return"application/json";case i.XHR_RESPONSE_TYPE.DEFAULT:case i.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},LI(i,[{key:"isDataUrl",get:function(){return this._hasFlag(i.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(i.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(i.STATUS_FLAGS.LOADING)}}]),i}();ft.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4};ft.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6};ft.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};ft.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};ft._loadTypeMap={gif:ft.LOAD_TYPE.IMAGE,png:ft.LOAD_TYPE.IMAGE,bmp:ft.LOAD_TYPE.IMAGE,jpg:ft.LOAD_TYPE.IMAGE,jpeg:ft.LOAD_TYPE.IMAGE,tif:ft.LOAD_TYPE.IMAGE,tiff:ft.LOAD_TYPE.IMAGE,webp:ft.LOAD_TYPE.IMAGE,tga:ft.LOAD_TYPE.IMAGE,svg:ft.LOAD_TYPE.IMAGE,"svg+xml":ft.LOAD_TYPE.IMAGE,mp3:ft.LOAD_TYPE.AUDIO,ogg:ft.LOAD_TYPE.AUDIO,wav:ft.LOAD_TYPE.AUDIO,mp4:ft.LOAD_TYPE.VIDEO,webm:ft.LOAD_TYPE.VIDEO};ft._xhrTypeMap={xhtml:ft.XHR_RESPONSE_TYPE.DOCUMENT,html:ft.XHR_RESPONSE_TYPE.DOCUMENT,htm:ft.XHR_RESPONSE_TYPE.DOCUMENT,xml:ft.XHR_RESPONSE_TYPE.DOCUMENT,tmx:ft.XHR_RESPONSE_TYPE.DOCUMENT,svg:ft.XHR_RESPONSE_TYPE.DOCUMENT,tsx:ft.XHR_RESPONSE_TYPE.DOCUMENT,gif:ft.XHR_RESPONSE_TYPE.BLOB,png:ft.XHR_RESPONSE_TYPE.BLOB,bmp:ft.XHR_RESPONSE_TYPE.BLOB,jpg:ft.XHR_RESPONSE_TYPE.BLOB,jpeg:ft.XHR_RESPONSE_TYPE.BLOB,tif:ft.XHR_RESPONSE_TYPE.BLOB,tiff:ft.XHR_RESPONSE_TYPE.BLOB,webp:ft.XHR_RESPONSE_TYPE.BLOB,tga:ft.XHR_RESPONSE_TYPE.BLOB,json:ft.XHR_RESPONSE_TYPE.JSON,text:ft.XHR_RESPONSE_TYPE.TEXT,txt:ft.XHR_RESPONSE_TYPE.TEXT,ttf:ft.XHR_RESPONSE_TYPE.BUFFER,otf:ft.XHR_RESPONSE_TYPE.BUFFER};ft.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";function Jf(i,t,e){t&&t.indexOf(".")===0&&(t=t.substring(1)),t&&(i[t]=e)}function gu(i){return i.toString().replace("object ","")}var EC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function FC(i){for(var t="",e=0;e<i.length;){for(var r=[0,0,0],n=[0,0,0,0],o=0;o<r.length;++o)e<i.length?r[o]=i.charCodeAt(e++)&255:r[o]=0;n[0]=r[0]>>2,n[1]=(r[0]&3)<<4|r[1]>>4,n[2]=(r[1]&15)<<2|r[2]>>6,n[3]=r[2]&63;var s=e-(i.length-1);switch(s){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64;break}for(var a=0;a<n.length;++a)t+=EC.charAt(n[a])}return t}var Qf=window.URL||window.webkitURL;function MC(i,t){if(!i.data){t();return}if(i.xhr&&i.xhrType===ft.XHR_RESPONSE_TYPE.BLOB){if(!window.Blob||typeof i.data=="string"){var e=i.xhr.getResponseHeader("content-type");if(e&&e.indexOf("image")===0){i.data=new Image,i.data.src="data:"+e+";base64,"+FC(i.xhr.responseText),i.type=ft.TYPE.IMAGE,i.data.onload=function(){i.data.onload=null,t()};return}}else if(i.data.type.indexOf("image")===0){var r=Qf.createObjectURL(i.data);i.blob=i.data,i.data=new Image,i.data.src=r,i.type=ft.TYPE.IMAGE,i.data.onload=function(){Qf.revokeObjectURL(r),i.data.onload=null,t()};return}}t()}var DC={caching:AC,parsing:MC},pu=100,BC=/(#[\w-]+)?$/,Ve=function(){function i(e,r){var n=this;e===void 0&&(e=""),r===void 0&&(r=10),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(a,l){return n._loadResource(a,l)},this._queue=CC(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new He,this.onError=new He,this.onLoad=new He,this.onStart=new He,this.onComplete=new He;for(var o=0;o<i._defaultBeforeMiddleware.length;++o)this.pre(i._defaultBeforeMiddleware[o]);for(var s=0;s<i._defaultAfterMiddleware.length;++s)this.use(i._defaultAfterMiddleware[s])}var t=i.prototype;return t.add=function(r,n,o,s){if(Array.isArray(r)){for(var a=0;a<r.length;++a)this.add(r[a]);return this}if(typeof r=="object"&&(s=n||r.callback||r.onComplete,o=r,n=r.url,r=r.name||r.key||r.url),typeof n!="string"&&(s=o,o=n,n=r),typeof n!="string")throw new Error("No url passed to add resource to loader.");if(typeof o=="function"&&(s=o,o=null),this.loading&&(!o||!o.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[r])throw new Error('Resource named "'+r+'" already exists.');if(n=this._prepareUrl(n),this.resources[r]=new ft(r,n,o),typeof s=="function"&&this.resources[r].onAfterMiddleware.once(s),this.loading){for(var l=o.parentResource,c=[],d=0;d<l.children.length;++d)l.children[d].isComplete||c.push(l.children[d]);var g=l.progressChunk*(c.length+1),u=g/(c.length+2);l.children.push(this.resources[r]),l.progressChunk=u;for(var h=0;h<c.length;++h)c[h].progressChunk=u;this.resources[r].progressChunk=u}return this._queue.push(this.resources[r]),this},t.pre=function(r){return this._beforeMiddleware.push(r),this},t.use=function(r){return this._afterMiddleware.push(r),this},t.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var r in this.resources){var n=this.resources[r];n._onLoadBinding&&n._onLoadBinding.detach(),n.isLoading&&n.abort()}return this.resources={},this},t.load=function(r){if(typeof r=="function"&&this.onComplete.once(r),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var n=this._queue._tasks.length,o=pu/n,s=0;s<this._queue._tasks.length;++s)this._queue._tasks[s].data.progressChunk=o;this._onStart(),this._queue.resume()}return this},t._prepareUrl=function(r){var n=BI(r,{strictMode:!0}),o;if(n.protocol||!n.path||r.indexOf("//")===0?o=r:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&r.charAt(0)!=="/"?o=this.baseUrl+"/"+r:o=this.baseUrl+r,this.defaultQueryString){var s=BC.exec(o)[0];o=o.substr(0,o.length-s.length),o.indexOf("?")!==-1?o+="&"+this.defaultQueryString:o+="?"+this.defaultQueryString,o+=s}return o},t._loadResource=function(r,n){var o=this;r._dequeue=n,Uf(this._beforeMiddleware,function(s,a){s.call(o,r,function(){a(r.isComplete?{}:null)})},function(){r.isComplete?o._onLoad(r):(r._onLoadBinding=r.onComplete.once(o._onLoad,o),r.load())},!0)},t._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t._onComplete=function(){this.progress=pu,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t._onLoad=function(r){var n=this;r._onLoadBinding=null,this._resourcesParsing.push(r),r._dequeue(),Uf(this._afterMiddleware,function(o,s){o.call(n,r,s)},function(){r.onAfterMiddleware.dispatch(r),n.progress=Math.min(pu,n.progress+r.progressChunk),n.onProgress.dispatch(n,r),r.error?n.onError.dispatch(r.error,n,r):n.onLoad.dispatch(n,r),n._resourcesParsing.splice(n._resourcesParsing.indexOf(r),1),n._queue.idle()&&n._resourcesParsing.length===0&&n._onComplete()},!0)},LI(i,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(r){this._queue.concurrency=r}}]),i}();Ve._defaultBeforeMiddleware=[];Ve._defaultAfterMiddleware=[];Ve.pre=function(t){return Ve._defaultBeforeMiddleware.push(t),Ve};Ve.use=function(t){return Ve._defaultAfterMiddleware.push(t),Ve};/*!
 * @pixi/loaders - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var tn=ft;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ul=function(i,t){return Ul=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},Ul(i,t)};function LC(i,t){Ul(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var RI=function(){function i(){}return i.use=function(t,e){t.data&&t.type===ft.TYPE.IMAGE&&(t.texture=It.fromLoader(t.data,t.url,t.name)),e()},i}(),Nr=function(i){LC(t,i);function t(e,r){for(var n=i.call(this,e,r)||this,o=0;o<t._plugins.length;++o){var s=t._plugins[o],a=s.pre,l=s.use;a&&n.pre(a),l&&n.use(l)}return n._protected=!1,n}return t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||(e=new t,e._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return t._plugins.push(e),e.add&&e.add(),t},t._plugins=[],t}(Ve);Nr.registerPlugin({use:DC.parsing});Nr.registerPlugin(RI);var ZI=function(){function i(){}return i.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?Nr.shared:new Nr},i.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},i}();/*!
 * @pixi/particles - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/particles is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var zl=function(i,t){return zl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},zl(i,t)};function OI(i,t){zl(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var RC=function(i){OI(t,i);function t(e,r,n,o){e===void 0&&(e=1500),n===void 0&&(n=16384),o===void 0&&(o=!1);var s=i.call(this)||this,a=16384;return n>a&&(n=a),s._properties=[!1,!0,!1,!1,!1],s._maxSize=e,s._batchSize=n,s._buffers=null,s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=ct.NORMAL,s.autoResize=o,s.roundPixels=!0,s.baseTexture=null,s.setProperties(r),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}return t.prototype.setProperties=function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,Zr(e,this.tintRgb)},enumerable:!1,configurable:!0}),t.prototype.render=function(e){var r=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return r.onChildrenChange(0)})),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},t.prototype.onChildrenChange=function(e){for(var r=Math.floor(e/this._batchSize);this._bufferUpdateIDs.length<r;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[r]=++this._updateID},t.prototype.dispose=function(){if(this._buffers){for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}},t.prototype.destroy=function(e){i.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},t}(Ee),$f=function(){function i(t,e,r){this.geometry=new Ti,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<t.length;++n){var o=t[n];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||Gt.FLOAT,offset:o.offset},e[n]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return i.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new Vt(Tp(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r){var n=this.dynamicProperties[r];n.offset=e,e+=n.size,this.dynamicStride+=n.size}var o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=new Vt(this.dynamicData,!1,!1);var s=0;this.staticStride=0;for(var r=0;r<this.staticProperties.length;++r){var n=this.staticProperties[r];n.offset=s,s+=n.size,this.staticStride+=n.size}var a=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(a),this.staticDataUint32=new Uint32Array(a),this.staticBuffer=new Vt(this.staticData,!0,!1);for(var r=0;r<this.dynamicProperties.length;++r){var n=this.dynamicProperties[r];t.addAttribute(n.attributeName,this.dynamicBuffer,0,n.type===Gt.UNSIGNED_BYTE,n.type,this.dynamicStride*4,n.offset*4)}for(var r=0;r<this.staticProperties.length;++r){var n=this.staticProperties[r];t.addAttribute(n.attributeName,this.staticBuffer,0,n.type===Gt.UNSIGNED_BYTE,n.type,this.staticStride*4,n.offset*4)}},i.prototype.uploadDynamic=function(t,e,r){for(var n=0;n<this.dynamicProperties.length;n++){var o=this.dynamicProperties[n];o.uploadFunction(t,e,r,o.type===Gt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++},i.prototype.uploadStatic=function(t,e,r){for(var n=0;n<this.staticProperties.length;n++){var o=this.staticProperties[n];o.uploadFunction(t,e,r,o.type===Gt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++},i.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},i}(),ZC=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,OC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,GI=function(i){OI(t,i);function t(e){var r=i.call(this,e)||this;return r.shader=null,r.properties=null,r.tempMatrix=new Nt,r.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:r.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:r.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:r.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:r.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Gt.UNSIGNED_BYTE,uploadFunction:r.uploadTint,offset:0}],r.shader=ur.from(OC,ZC,{}),r.state=pr.for2d(),r}return t.prototype.render=function(e){var r=e.children,n=e._maxSize,o=e._batchSize,s=this.renderer,a=r.length;if(a!==0){a>n&&!e.autoResize&&(a=n);var l=e._buffers;l||(l=e._buffers=this.generateBuffers(e));var c=r[0]._texture.baseTexture;this.state.blendMode=Zh(e.blendMode,c.alphaMode),s.state.set(this.state);var d=s.gl,g=e.worldTransform.copyTo(this.tempMatrix);g.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=g.toArray(!0),this.shader.uniforms.uColor=Sp(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,c.alphaMode),this.shader.uniforms.uSampler=c,this.renderer.shader.bind(this.shader);for(var u=!1,h=0,f=0;h<a;h+=o,f+=1){var v=a-h;v>o&&(v=o),f>=l.length&&l.push(this._generateOneMoreBuffer(e));var m=l[f];m.uploadDynamic(r,h,v);var y=e._bufferUpdateIDs[f]||0;u=u||m._updateID<y,u&&(m._updateID=e._updateID,m.uploadStatic(r,h,v)),s.geometry.bind(m.geometry),d.drawElements(d.TRIANGLES,v*6,d.UNSIGNED_SHORT,0)}}},t.prototype.generateBuffers=function(e){for(var r=[],n=e._maxSize,o=e._batchSize,s=e._properties,a=0;a<n;a+=o)r.push(new $f(this.properties,s,o));return r},t.prototype._generateOneMoreBuffer=function(e){var r=e._batchSize,n=e._properties;return new $f(this.properties,n,r)},t.prototype.uploadVertices=function(e,r,n,o,s,a){for(var l=0,c=0,d=0,g=0,u=0;u<n;++u){var h=e[r+u],f=h._texture,v=h.scale.x,m=h.scale.y,y=f.trim,I=f.orig;y?(c=y.x-h.anchor.x*I.width,l=c+y.width,g=y.y-h.anchor.y*I.height,d=g+y.height):(l=I.width*(1-h.anchor.x),c=I.width*-h.anchor.x,d=I.height*(1-h.anchor.y),g=I.height*-h.anchor.y),o[a]=c*v,o[a+1]=g*m,o[a+s]=l*v,o[a+s+1]=g*m,o[a+s*2]=l*v,o[a+s*2+1]=d*m,o[a+s*3]=c*v,o[a+s*3+1]=d*m,a+=s*4}},t.prototype.uploadPosition=function(e,r,n,o,s,a){for(var l=0;l<n;l++){var c=e[r+l].position;o[a]=c.x,o[a+1]=c.y,o[a+s]=c.x,o[a+s+1]=c.y,o[a+s*2]=c.x,o[a+s*2+1]=c.y,o[a+s*3]=c.x,o[a+s*3+1]=c.y,a+=s*4}},t.prototype.uploadRotation=function(e,r,n,o,s,a){for(var l=0;l<n;l++){var c=e[r+l].rotation;o[a]=c,o[a+s]=c,o[a+s*2]=c,o[a+s*3]=c,a+=s*4}},t.prototype.uploadUvs=function(e,r,n,o,s,a){for(var l=0;l<n;++l){var c=e[r+l]._texture._uvs;c?(o[a]=c.x0,o[a+1]=c.y0,o[a+s]=c.x1,o[a+s+1]=c.y1,o[a+s*2]=c.x2,o[a+s*2+1]=c.y2,o[a+s*3]=c.x3,o[a+s*3+1]=c.y3,a+=s*4):(o[a]=0,o[a+1]=0,o[a+s]=0,o[a+s+1]=0,o[a+s*2]=0,o[a+s*2+1]=0,o[a+s*3]=0,o[a+s*3+1]=0,a+=s*4)}},t.prototype.uploadTint=function(e,r,n,o,s,a){for(var l=0;l<n;++l){var c=e[r+l],d=c._texture.baseTexture.alphaMode>0,g=c.alpha,u=g<1&&d?fs(c._tintRGB,g):c._tintRGB+(g*255<<24);o[a]=u,o[a+s]=u,o[a+s*2]=u,o[a+s*3]=u,a+=s*4}},t.prototype.destroy=function(){i.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},t}(Cn);/*!
 * @pixi/graphics - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var jr;(function(i){i.MITER="miter",i.BEVEL="bevel",i.ROUND="round"})(jr||(jr={}));var Ye;(function(i){i.BUTT="butt",i.ROUND="round",i.SQUARE="square"})(Ye||(Ye={}));var vi={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(i,t){if(t===void 0&&(t=20),!this.adaptive||!i||isNaN(i))return t;var e=Math.ceil(i/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}},Jh=function(){function i(){this.color=16777215,this.alpha=1,this.texture=It.WHITE,this.matrix=null,this.visible=!1,this.reset()}return i.prototype.clone=function(){var t=new i;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},i.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=It.WHITE,this.matrix=null,this.visible=!1},i.prototype.destroy=function(){this.texture=null,this.matrix=null},i}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Vl=function(i,t){return Vl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},Vl(i,t)};function Is(i,t){Vl(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Qh={build:function(i){i.points=i.shape.points.slice()},triangulate:function(i,t){var e=i.points,r=i.holes,n=t.points,o=t.indices;if(e.length>=6){for(var s=[],a=0;a<r.length;a++){var l=r[a];s.push(e.length/2),e=e.concat(l.points)}var c=xh(e,s,2);if(!c)return;for(var d=n.length/2,a=0;a<c.length;a+=3)o.push(c[a]+d),o.push(c[a+1]+d),o.push(c[a+2]+d);for(var a=0;a<e.length;a++)n.push(e[a])}}},Jl={build:function(i){var t=i.shape,e=i.points,r=t.x,n=t.y,o,s;if(e.length=0,i.type===Lt.CIRC)o=t.radius,s=t.radius;else{var a=i.shape;o=a.width,s=a.height}if(!(o===0||s===0)){var l=Math.floor(30*Math.sqrt(t.radius))||Math.floor(15*Math.sqrt(o+s));l/=2.3;for(var c=Math.PI*2/l,d=0;d<l-.5;d++)e.push(r+Math.sin(-c*d)*o,n+Math.cos(-c*d)*s);e.push(e[0],e[1])}},triangulate:function(i,t){var e=i.points,r=t.points,n=t.indices,o=r.length/2,s=o,a=i.shape,l=i.matrix,c=a.x,d=a.y;r.push(i.matrix?l.a*c+l.c*d+l.tx:c,i.matrix?l.b*c+l.d*d+l.ty:d);for(var g=0;g<e.length;g+=2)r.push(e[g],e[g+1]),n.push(o++,s,o)}},NI={build:function(i){var t=i.shape,e=t.x,r=t.y,n=t.width,o=t.height,s=i.points;s.length=0,s.push(e,r,e+n,r,e+n,r+o,e,r+o)},triangulate:function(i,t){var e=i.points,r=t.points,n=r.length/2;r.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function Kr(i,t,e){var r=t-i;return i+r*e}function _o(i,t,e,r,n,o,s){s===void 0&&(s=[]);for(var a=20,l=s,c=0,d=0,g=0,u=0,h=0,f=0,v=0,m=0;v<=a;++v)m=v/a,c=Kr(i,e,m),d=Kr(t,r,m),g=Kr(e,n,m),u=Kr(r,o,m),h=Kr(c,g,m),f=Kr(d,u,m),l.push(h,f);return l}var jI={build:function(i){var t=i.shape,e=i.points,r=t.x,n=t.y,o=t.width,s=t.height,a=Math.max(0,Math.min(t.radius,Math.min(o,s)/2));e.length=0,a?(_o(r,n+a,r,n,r+a,n,e),_o(r+o-a,n,r+o,n,r+o,n+a,e),_o(r+o,n+s-a,r+o,n+s,r+o-a,n+s,e),_o(r+a,n+s,r,n+s,r,n+s-a,e)):e.push(r,n,r+o,n,r+o,n+s,r,n+s)},triangulate:function(i,t){for(var e=i.points,r=t.points,n=t.indices,o=r.length/2,s=xh(e,null,2),a=0,l=s.length;a<l;a+=3)n.push(s[a]+o),n.push(s[a+1]+o),n.push(s[a+2]+o);for(var a=0,l=e.length;a<l;a++)r.push(e[a],e[++a])}};function Kf(i,t,e,r,n,o,s,a){var l=i-e*n,c=t-r*n,d=i+e*o,g=t+r*o,u,h;s?(u=r,h=-e):(u=-r,h=e);var f=l+u,v=c+h,m=d+u,y=g+h;return a.push(f,v),a.push(m,y),2}function Co(i,t,e,r,n,o,s,a){var l=e-i,c=r-t,d=Math.atan2(l,c),g=Math.atan2(n-i,o-t);a&&d<g?d+=Math.PI*2:!a&&d>g&&(g+=Math.PI*2);var u=d,h=g-d,f=Math.abs(h),v=Math.sqrt(l*l+c*c),m=(15*f*Math.sqrt(v)/Math.PI>>0)+1,y=h/m;if(u+=y,a){s.push(i,t),s.push(e,r);for(var I=1,p=u;I<m;I++,p+=y)s.push(i,t),s.push(i+Math.sin(p)*v,t+Math.cos(p)*v);s.push(i,t),s.push(n,o)}else{s.push(e,r),s.push(i,t);for(var I=1,p=u;I<m;I++,p+=y)s.push(i+Math.sin(p)*v,t+Math.cos(p)*v),s.push(i,t);s.push(n,o),s.push(i,t)}return m*2}function GC(i,t){var e=i.shape,r=i.points||e.points.slice(),n=t.closePointEps;if(r.length!==0){var o=i.lineStyle,s=new Qt(r[0],r[1]),a=new Qt(r[r.length-2],r[r.length-1]),l=e.type!==Lt.POLY||e.closeStroke,c=Math.abs(s.x-a.x)<n&&Math.abs(s.y-a.y)<n;if(l){r=r.slice(),c&&(r.pop(),r.pop(),a.set(r[r.length-2],r[r.length-1]));var d=(s.x+a.x)*.5,g=(a.y+s.y)*.5;r.unshift(d,g),r.push(d,g)}var u=t.points,h=r.length/2,f=r.length,v=u.length/2,m=o.width/2,y=m*m,I=o.miterLimit*o.miterLimit,p=r[0],_=r[1],A=r[2],b=r[3],P=0,E=0,C=-(_-b),T=p-A,F=0,Z=0,O=Math.sqrt(C*C+T*T);C/=O,T/=O,C*=m,T*=m;var H=o.alignment,X=(1-H)*2,U=H*2;l||(o.cap===Ye.ROUND?f+=Co(p-C*(X-U)*.5,_-T*(X-U)*.5,p-C*X,_-T*X,p+C*U,_+T*U,u,!0)+2:o.cap===Ye.SQUARE&&(f+=Kf(p,_,C,T,X,U,!0,u))),u.push(p-C*X,_-T*X),u.push(p+C*U,_+T*U);for(var k=1;k<h-1;++k){p=r[(k-1)*2],_=r[(k-1)*2+1],A=r[k*2],b=r[k*2+1],P=r[(k+1)*2],E=r[(k+1)*2+1],C=-(_-b),T=p-A,O=Math.sqrt(C*C+T*T),C/=O,T/=O,C*=m,T*=m,F=-(b-E),Z=A-P,O=Math.sqrt(F*F+Z*Z),F/=O,Z/=O,F*=m,Z*=m;var ot=A-p,lt=_-b,et=A-P,Q=E-b,rt=lt*et-Q*ot,at=rt<0;if(Math.abs(rt)<.1){u.push(A-C*X,b-T*X),u.push(A+C*U,b+T*U);continue}var N=(-C+p)*(-T+b)-(-C+A)*(-T+_),pt=(-F+P)*(-Z+b)-(-F+A)*(-Z+E),dt=(ot*pt-et*N)/rt,D=(Q*N-lt*pt)/rt,x=(dt-A)*(dt-A)+(D-b)*(D-b),M=A+(dt-A)*X,L=b+(D-b)*X,z=A-(dt-A)*U,$=b-(D-b)*U;o.join===jr.BEVEL||x/y>I?(at?(u.push(M,L),u.push(A+C*U,b+T*U),u.push(M,L),u.push(A+F*U,b+Z*U)):(u.push(A-C*X,b-T*X),u.push(z,$),u.push(A-F*X,b-Z*X),u.push(z,$)),f+=2):o.join===jr.ROUND?at?(u.push(M,L),u.push(A+C*U,b+T*U),f+=Co(A,b,A+C*U,b+T*U,A+F*U,b+Z*U,u,!0)+4,u.push(M,L),u.push(A+F*U,b+Z*U)):(u.push(A-C*X,b-T*X),u.push(z,$),f+=Co(A,b,A-C*X,b-T*X,A-F*X,b-Z*X,u,!1)+4,u.push(A-F*X,b-Z*X),u.push(z,$)):(u.push(M,L),u.push(z,$))}p=r[(h-2)*2],_=r[(h-2)*2+1],A=r[(h-1)*2],b=r[(h-1)*2+1],C=-(_-b),T=p-A,O=Math.sqrt(C*C+T*T),C/=O,T/=O,C*=m,T*=m,u.push(A-C*X,b-T*X),u.push(A+C*U,b+T*U),l||(o.cap===Ye.ROUND?f+=Co(A-C*(X-U)*.5,b-T*(X-U)*.5,A-C*X,b-T*X,A+C*U,b+T*U,u,!1)+2:o.cap===Ye.SQUARE&&(f+=Kf(A,b,C,T,X,U,!1,u)));for(var K=t.indices,st=vi.epsilon*vi.epsilon,k=v;k<f+v-2;++k)p=u[k*2],_=u[k*2+1],A=u[(k+1)*2],b=u[(k+1)*2+1],P=u[(k+2)*2],E=u[(k+2)*2+1],!(Math.abs(p*(b-E)+A*(E-_)+P*(_-b))<st)&&K.push(k,k+1,k+2)}}function NC(i,t){var e=0,r=i.shape,n=i.points||r.points,o=r.type!==Lt.POLY||r.closeStroke;if(n.length!==0){var s=t.points,a=t.indices,l=n.length/2,c=s.length/2,d=c;for(s.push(n[0],n[1]),e=1;e<l;e++)s.push(n[e*2],n[e*2+1]),a.push(d,d+1),d++;o&&a.push(d,c)}}function Ql(i,t){i.lineStyle.native?NC(i,t):GC(i,t)}var WI=function(i){Is(t,i);function t(e,r,n,o,s,a){a===void 0&&(a=0);var l=this;s=s||o/2;for(var c=-1*Math.PI/2+a,d=n*2,g=pi/d,u=[],h=0;h<d;h++){var f=h%2?s:o,v=h*g+c;u.push(e+f*Math.cos(v),r+f*Math.sin(v))}return l=i.call(this,u)||this,l}return t}(si),$l=function(){function i(){}return i.curveTo=function(t,e,r,n,o,s){var a=s[s.length-2],l=s[s.length-1],c=l-e,d=a-t,g=n-e,u=r-t,h=Math.abs(c*u-d*g);if(h<1e-8||o===0)return(s[s.length-2]!==t||s[s.length-1]!==e)&&s.push(t,e),null;var f=c*c+d*d,v=g*g+u*u,m=c*g+d*u,y=o*Math.sqrt(f)/h,I=o*Math.sqrt(v)/h,p=y*m/f,_=I*m/v,A=y*u+I*d,b=y*g+I*c,P=d*(I+p),E=c*(I+p),C=u*(y+_),T=g*(y+_),F=Math.atan2(E-b,P-A),Z=Math.atan2(T-b,C-A);return{cx:A+t,cy:b+e,radius:o,startAngle:F,endAngle:Z,anticlockwise:d*g>u*c}},i.arc=function(t,e,r,n,o,s,a,l,c){for(var d=a-s,g=vi._segmentsCount(Math.abs(d)*o,Math.ceil(Math.abs(d)/pi)*40),u=d/(g*2),h=u*2,f=Math.cos(u),v=Math.sin(u),m=g-1,y=m%1/m,I=0;I<=m;++I){var p=I+y*I,_=u+s+h*p,A=Math.cos(_),b=-Math.sin(_);c.push((f*A+v*b)*o+r,(f*-b+v*A)*o+n)}},i}(),XI=function(){function i(){}return i.curveLength=function(t,e,r,n,o,s,a,l){for(var c=10,d=0,g=0,u=0,h=0,f=0,v=0,m=0,y=0,I=0,p=0,_=0,A=t,b=e,P=1;P<=c;++P)g=P/c,u=g*g,h=u*g,f=1-g,v=f*f,m=v*f,y=m*t+3*v*g*r+3*f*u*o+h*a,I=m*e+3*v*g*n+3*f*u*s+h*l,p=A-y,_=b-I,A=y,b=I,d+=Math.sqrt(p*p+_*_);return d},i.curveTo=function(t,e,r,n,o,s,a){var l=a[a.length-2],c=a[a.length-1];a.length-=2;var d=vi._segmentsCount(i.curveLength(l,c,t,e,r,n,o,s)),g=0,u=0,h=0,f=0,v=0;a.push(l,c);for(var m=1,y=0;m<=d;++m)y=m/d,g=1-y,u=g*g,h=u*g,f=y*y,v=f*y,a.push(h*l+3*u*y*t+3*g*f*r+v*o,h*c+3*u*y*e+3*g*f*n+v*s)},i}(),kI=function(){function i(){}return i.curveLength=function(t,e,r,n,o,s){var a=t-2*r+o,l=e-2*n+s,c=2*r-2*t,d=2*n-2*e,g=4*(a*a+l*l),u=4*(a*c+l*d),h=c*c+d*d,f=2*Math.sqrt(g+u+h),v=Math.sqrt(g),m=2*g*v,y=2*Math.sqrt(h),I=u/v;return(m*f+v*u*(f-y)+(4*h*g-u*u)*Math.log((2*v+I+f)/(I+y)))/(4*m)},i.curveTo=function(t,e,r,n,o){for(var s=o[o.length-2],a=o[o.length-1],l=vi._segmentsCount(i.curveLength(s,a,t,e,r,n)),c=0,d=0,g=1;g<=l;++g){var u=g/l;c=s+(t-s)*u,d=a+(e-a)*u,o.push(c+(t+(r-t)*u-c)*u,d+(e+(n-e)*u-d)*u)}},i}(),HI=function(){function i(){this.reset()}return i.prototype.begin=function(t,e,r){this.reset(),this.style=t,this.start=e,this.attribStart=r},i.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},i.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},i}(),_r,Go=(_r={},_r[Lt.POLY]=Qh,_r[Lt.CIRC]=Jl,_r[Lt.ELIP]=Jl,_r[Lt.RECT]=NI,_r[Lt.RREC]=jI,_r),Kl=[],Ji=[],jC={buildPoly:Qh,buildCircle:Jl,buildRectangle:NI,buildRoundedRectangle:jI,FILL_COMMANDS:Go,BATCH_POOL:Kl,DRAW_CALL_POOL:Ji,buildLine:Ql,Star:WI,ArcUtils:$l,BezierUtils:XI,QuadraticUtils:kI,BatchPart:HI},ql=function(){function i(t,e,r,n){e===void 0&&(e=null),r===void 0&&(r=null),n===void 0&&(n=null),this.shape=t,this.lineStyle=r,this.fillStyle=e,this.matrix=n,this.type=t.type,this.points=[],this.holes=[]}return i.prototype.clone=function(){return new i(this.shape,this.fillStyle,this.lineStyle,this.matrix)},i.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},i}(),qr=new Qt,WC=new cn,YI=function(i){Is(t,i);function t(){var e=i.call(this)||this;return e.uvsFloat32=null,e.indicesUint16=null,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.dirty=0,e.batchDirty=-1,e.cacheDirty=-1,e.clearDirty=0,e.drawCalls=[],e.batches=[],e.shapeIndex=0,e._bounds=new cn,e.boundsDirty=-1,e.boundsPadding=0,e.batchable=!1,e.indicesUint16=null,e.uvsFloat32=null,e.closePointEps=1e-4,e}return Object.defineProperty(t.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),t.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Ji.push(this.drawCalls[e]);this.drawCalls.length=0;for(var e=0;e<this.batches.length;e++){var r=this.batches[e];r.reset(),Kl.push(r)}this.batches.length=0},t.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},t.prototype.drawShape=function(e,r,n,o){r===void 0&&(r=null),n===void 0&&(n=null),o===void 0&&(o=null);var s=new ql(e,r,n,o);return this.graphicsData.push(s),this.dirty++,this},t.prototype.drawHole=function(e,r){if(r===void 0&&(r=null),!this.graphicsData.length)return null;var n=new ql(e,null,null,r),o=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=o.lineStyle,o.holes.push(n),this.dirty++,this},t.prototype.destroy=function(){i.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},t.prototype.containsPoint=function(e){for(var r=this.graphicsData,n=0;n<r.length;++n){var o=r[n];if(o.fillStyle.visible&&o.shape&&(o.matrix?o.matrix.applyInverse(e,qr):qr.copyFrom(e),o.shape.contains(qr.x,qr.y))){var s=!1;if(o.holes)for(var a=0;a<o.holes.length;a++){var l=o.holes[a];if(l.shape.contains(qr.x,qr.y)){s=!0;break}}if(!s)return!0}}return!1},t.prototype.updateBatches=function(e){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var r=this.uvs,n=this.graphicsData,o=null,s=null;this.batches.length>0&&(o=this.batches[this.batches.length-1],s=o.style);for(var a=this.shapeIndex;a<n.length;a++){this.shapeIndex++;var l=n[a],c=l.fillStyle,d=l.lineStyle,g=Go[l.type];g.build(l),l.matrix&&this.transformPoints(l.points,l.matrix);for(var u=0;u<2;u++){var h=u===0?c:d;if(h.visible){var f=h.texture.baseTexture,v=this.indices.length,m=this.points.length/2;f.wrapMode=ze.REPEAT,u===0?this.processFill(l):this.processLine(l);var y=this.points.length/2-m;y!==0&&(o&&!this._compareStyles(s,h)&&(o.end(v,m),o=null),o||(o=Kl.pop()||new HI,o.begin(h,v,m),this.batches.push(o),s=h),this.addUvs(this.points,r,h.texture,m,y,h.matrix))}}}var I=this.indices.length,p=this.points.length/2;if(o&&o.end(I,p),this.batches.length===0){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var _=p>65535&&e;this.indicesUint16=_?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},t.prototype._compareStyles=function(e,r){return!(!e||!r||e.texture.baseTexture!==r.texture.baseTexture||e.color+e.alpha!==r.color+r.alpha||!!e.native!=!!r.native)},t.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var e=0,r=this.graphicsData.length;e<r;e++){var n=this.graphicsData[e],o=n.fillStyle,s=n.lineStyle;if(o&&!o.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0},t.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var e=this.batches,r=0,n=e.length;r<n;r++)for(var o=e[r],s=0;s<o.size;s++){var a=o.start+s;this.indicesUint16[a]=this.indicesUint16[a]-o.attribStart}},t.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var e=this.batches,r=0;r<e.length;r++)if(e[r].style.native)return!1;return this.points.length<t.BATCHABLE_SIZE*2},t.prototype.buildDrawCalls=function(){for(var e=++Tt._globalBatch,r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),Ji.push(this.drawCalls[r]);this.drawCalls.length=0;var n=this.colors,o=this.textureIds,s=Ji.pop();s||(s=new Jo,s.texArray=new Qo),s.texArray.count=0,s.start=0,s.size=0,s.type=ye.TRIANGLES;var a=0,l=null,c=0,d=!1,g=ye.TRIANGLES,u=0;this.drawCalls.push(s);for(var r=0;r<this.batches.length;r++){var h=this.batches[r],f=8,v=h.style,m=v.texture.baseTexture;d!==!!v.native&&(d=!!v.native,g=d?ye.LINES:ye.TRIANGLES,l=null,a=f,e++),l!==m&&(l=m,m._batchEnabled!==e&&(a===f&&(e++,a=0,s.size>0&&(s=Ji.pop(),s||(s=new Jo,s.texArray=new Qo),this.drawCalls.push(s)),s.start=u,s.size=0,s.texArray.count=0,s.type=g),m.touched=1,m._batchEnabled=e,m._batchLocation=a,m.wrapMode=10497,s.texArray.elements[s.texArray.count++]=m,a++)),s.size+=h.size,u+=h.size,c=m._batchLocation,this.addColors(n,v.color,v.alpha,h.attribSize),this.addTextureIds(o,c,h.attribSize)}Tt._globalBatch=e,this.packAttributes()},t.prototype.packAttributes=function(){for(var e=this.points,r=this.uvs,n=this.colors,o=this.textureIds,s=new ArrayBuffer(e.length*3*4),a=new Float32Array(s),l=new Uint32Array(s),c=0,d=0;d<e.length/2;d++)a[c++]=e[d*2],a[c++]=e[d*2+1],a[c++]=r[d*2],a[c++]=r[d*2+1],l[c++]=n[d],a[c++]=o[d];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)},t.prototype.processFill=function(e){if(e.holes.length)this.processHoles(e.holes),Qh.triangulate(e,this);else{var r=Go[e.type];r.triangulate(e,this)}},t.prototype.processLine=function(e){Ql(e,this);for(var r=0;r<e.holes.length;r++)Ql(e.holes[r],this)},t.prototype.processHoles=function(e){for(var r=0;r<e.length;r++){var n=e[r],o=Go[n.type];o.build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},t.prototype.calculateBounds=function(){var e=this._bounds,r=WC,n=Nt.IDENTITY;this._bounds.clear(),r.clear();for(var o=0;o<this.graphicsData.length;o++){var s=this.graphicsData[o],a=s.shape,l=s.type,c=s.lineStyle,d=s.matrix||Nt.IDENTITY,g=0;if(c&&c.visible){var u=c.alignment;g=c.width,l===Lt.POLY?g=g*(.5+Math.abs(.5-u)):g=g*Math.max(0,u)}if(n!==d&&(r.isEmpty()||(e.addBoundsMatrix(r,n),r.clear()),n=d),l===Lt.RECT||l===Lt.RREC){var h=a;r.addFramePad(h.x,h.y,h.x+h.width,h.y+h.height,g,g)}else if(l===Lt.CIRC){var f=a;r.addFramePad(f.x,f.y,f.x,f.y,f.radius+g,f.radius+g)}else if(l===Lt.ELIP){var v=a;r.addFramePad(v.x,v.y,v.x,v.y,v.width+g,v.height+g)}else{var m=a;e.addVerticesMatrix(n,m.points,0,m.points.length,g,g)}}r.isEmpty()||e.addBoundsMatrix(r,n),e.pad(this.boundsPadding,this.boundsPadding)},t.prototype.transformPoints=function(e,r){for(var n=0;n<e.length/2;n++){var o=e[n*2],s=e[n*2+1];e[n*2]=r.a*o+r.c*s+r.tx,e[n*2+1]=r.b*o+r.d*s+r.ty}},t.prototype.addColors=function(e,r,n,o){for(var s=(r>>16)+(r&65280)+((r&255)<<16),a=fs(s,n);o-- >0;)e.push(a)},t.prototype.addTextureIds=function(e,r,n){for(;n-- >0;)e.push(r)},t.prototype.addUvs=function(e,r,n,o,s,a){a===void 0&&(a=null);for(var l=0,c=r.length,d=n.frame;l<s;){var g=e[(o+l)*2],u=e[(o+l)*2+1];if(a){var h=a.a*g+a.c*u+a.tx;u=a.b*g+a.d*u+a.ty,g=h}l++,r.push(g/d.width,u/d.height)}var f=n.baseTexture;(d.width<f.width||d.height<f.height)&&this.adjustUvs(r,n,c,s)},t.prototype.adjustUvs=function(e,r,n,o){for(var s=r.baseTexture,a=1e-6,l=n+o*2,c=r.frame,d=c.width/s.width,g=c.height/s.height,u=c.x/c.width,h=c.y/c.height,f=Math.floor(e[n]+a),v=Math.floor(e[n+1]+a),m=n+2;m<l;m+=2)f=Math.min(f,Math.floor(e[m]+a)),v=Math.min(v,Math.floor(e[m+1]+a));u-=f,h-=v;for(var m=n;m<l;m+=2)e[m]=(e[m]+u)*d,e[m+1]=(e[m+1]+h)*g},t.BATCHABLE_SIZE=100,t}(Vh),UI=function(i){Is(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=Ye.BUTT,e.join=jr.MITER,e.miterLimit=10,e}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e},t.prototype.reset=function(){i.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},t}(Jh),XC=new Float32Array(3),Iu={},$h=function(i){Is(t,i);function t(e){e===void 0&&(e=null);var r=i.call(this)||this;return r._geometry=e||new YI,r._geometry.refCount++,r.shader=null,r.state=pr.for2d(),r._fillStyle=new Jh,r._lineStyle=new UI,r._matrix=null,r._holeMode=!1,r.currentPath=null,r.batches=[],r.batchTint=-1,r.batchDirty=-1,r.vertexData=null,r.pluginName="batch",r._transformID=-1,r.tint=16777215,r.blendMode=ct.NORMAL,r}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return this.finishPoly(),new t(this._geometry)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),t.prototype.lineStyle=function(e){if(e===void 0&&(e=null),typeof e=="number"){var r=arguments;e={width:r[0]||0,color:r[1]||0,alpha:r[2]!==void 0?r[2]:1,alignment:r[3]!==void 0?r[3]:.5,native:!!r[4]}}return this.lineTextureStyle(e)},t.prototype.lineTextureStyle=function(e){if(typeof e=="number"){it("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var r=arguments,n=r[0],o=r[1],s=r[2],a=r[3],l=r[4],c=r[5],d=r[6];e={width:n,texture:o,color:s,alpha:a,matrix:l,alignment:c,native:d},Object.keys(e).forEach(function(u){return e[u]===void 0&&delete e[u]})}e=Object.assign({width:0,texture:It.WHITE,color:e&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Ye.BUTT,join:jr.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();var g=e.width>0&&e.alpha>0;return g?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:g},e)):this._lineStyle.reset(),this},t.prototype.startPoly=function(){if(this.currentPath){var e=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new si,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[r-2],e[r-1]))}else this.currentPath=new si,this.currentPath.closeStroke=!1},t.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},t.prototype.moveTo=function(e,r){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=r,this},t.prototype.lineTo=function(e,r){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,o=n[n.length-2],s=n[n.length-1];return(o!==e||s!==r)&&n.push(e,r),this},t.prototype._initCurve=function(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,r]):this.moveTo(e,r)},t.prototype.quadraticCurveTo=function(e,r,n,o){this._initCurve();var s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),kI.curveTo(e,r,n,o,s),this},t.prototype.bezierCurveTo=function(e,r,n,o,s,a){return this._initCurve(),XI.curveTo(e,r,n,o,s,a,this.currentPath.points),this},t.prototype.arcTo=function(e,r,n,o,s){this._initCurve(e,r);var a=this.currentPath.points,l=$l.curveTo(e,r,n,o,s,a);if(l){var c=l.cx,d=l.cy,g=l.radius,u=l.startAngle,h=l.endAngle,f=l.anticlockwise;this.arc(c,d,g,u,h,f)}return this},t.prototype.arc=function(e,r,n,o,s,a){if(a===void 0&&(a=!1),o===s)return this;!a&&s<=o?s+=pi:a&&o<=s&&(o+=pi);var l=s-o;if(l===0)return this;var c=e+Math.cos(o)*n,d=r+Math.sin(o)*n,g=this._geometry.closePointEps,u=this.currentPath?this.currentPath.points:null;if(u){var h=Math.abs(u[u.length-2]-c),f=Math.abs(u[u.length-1]-d);h<g&&f<g||u.push(c,d)}else this.moveTo(c,d),u=this.currentPath.points;return $l.arc(c,d,e,r,n,o,s,a,u),this},t.prototype.beginFill=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=1),this.beginTextureFill({texture:It.WHITE,color:e,alpha:r})},t.prototype.beginTextureFill=function(e){if(e instanceof It){it("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var r=arguments,n=r[0],o=r[1],s=r[2],a=r[3];e={texture:n,color:o,alpha:s,matrix:a},Object.keys(e).forEach(function(c){return e[c]===void 0&&delete e[c]})}e=Object.assign({texture:It.WHITE,color:16777215,alpha:1,matrix:null},e),this.currentPath&&this.startPoly();var l=e.alpha>0;return l?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:l},e)):this._fillStyle.reset(),this},t.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},t.prototype.drawRect=function(e,r,n,o){return this.drawShape(new bt(e,r,n,o))},t.prototype.drawRoundedRect=function(e,r,n,o,s){return this.drawShape(new Op(e,r,n,o,s))},t.prototype.drawCircle=function(e,r,n){return this.drawShape(new Rp(e,r,n))},t.prototype.drawEllipse=function(e,r,n,o){return this.drawShape(new Zp(e,r,n,o))},t.prototype.drawPolygon=function(){for(var e=arguments,r=[],n=0;n<arguments.length;n++)r[n]=e[n];var o,s=!0,a=r[0];a.points?(s=a.closeStroke,o=a.points):Array.isArray(r[0])?o=r[0]:o=r;var l=new si(o);return l.closeStroke=s,this.drawShape(l),this},t.prototype.drawShape=function(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},t.prototype.drawStar=function(e,r,n,o,s,a){return a===void 0&&(a=0),this.drawPolygon(new WI(e,r,n,o,s,a))},t.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},t.prototype.isFastRect=function(){var e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Lt.RECT&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)},t.prototype._render=function(e){this.finishPoly();var r=this._geometry,n=e.context.supports.uint32Indices;r.updateBatches(n),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))},t.prototype._populateBatches=function(){var e=this._geometry,r=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(var o=0;o<n;o++){var s=e.batches[o],a=s.style.color,l=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),c=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),d=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),g={vertexData:l,blendMode:r,indices:d,uvs:c,_batchRGB:Zr(a),_tintRGB:a,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[o]=g}},t.prototype._renderBatched=function(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var r=0,n=this.batches.length;r<n;r++){var o=this.batches[r];o.worldAlpha=this.worldAlpha*o.alpha,e.plugins[this.pluginName].render(o)}}},t.prototype._renderDirect=function(e){var r=this._resolveDirectShader(e),n=this._geometry,o=this.tint,s=this.worldAlpha,a=r.uniforms,l=n.drawCalls;a.translationMatrix=this.transform.worldTransform,a.tint[0]=(o>>16&255)/255*s,a.tint[1]=(o>>8&255)/255*s,a.tint[2]=(o&255)/255*s,a.tint[3]=s,e.shader.bind(r),e.geometry.bind(n,r),e.state.set(this.state);for(var c=0,d=l.length;c<d;c++)this._renderDrawCallDirect(e,n.drawCalls[c])},t.prototype._renderDrawCallDirect=function(e,r){for(var n=r.texArray,o=r.type,s=r.size,a=r.start,l=n.count,c=0;c<l;c++)e.texture.bind(n.elements[c],c);e.geometry.draw(o,s,a)},t.prototype._resolveDirectShader=function(e){var r=this.shader,n=this.pluginName;if(!r){if(!Iu[n]){for(var o=new Int32Array(16),s=0;s<16;s++)o[s]=s;var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new Nt,default:ar.from({uSamplers:o},!0)},l=e.plugins[n]._shader.program;Iu[n]=new ur(l,a)}r=Iu[n]}return r},t.prototype._calculateBounds=function(){this.finishPoly();var e=this._geometry;if(e.graphicsData.length){var r=e.bounds,n=r.minX,o=r.minY,s=r.maxX,a=r.maxY;this._bounds.addFrame(this.transform,n,o,s,a)}},t.prototype.containsPoint=function(e){return this.worldTransform.applyInverse(e,t._TEMP_POINT),this._geometry.containsPoint(t._TEMP_POINT)},t.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var e=Zr(this.tint,XC),r=0;r<this.batches.length;r++){var n=this.batches[r],o=n._batchRGB,s=e[0]*o[0]*255,a=e[1]*o[1]*255,l=e[2]*o[2]*255,c=(s<<16)+(a<<8)+(l|0);n._tintRGB=(c>>16)+(c&65280)+((c&255)<<16)}}},t.prototype.calculateVertices=function(){var e=this.transform._worldID;if(this._transformID!==e){this._transformID=e;for(var r=this.transform.worldTransform,n=r.a,o=r.b,s=r.c,a=r.d,l=r.tx,c=r.ty,d=this._geometry.points,g=this.vertexData,u=0,h=0;h<d.length;h+=2){var f=d[h],v=d[h+1];g[u++]=n*f+s*v+l,g[u++]=a*v+o*f+c}}},t.prototype.closePath=function(){var e=this.currentPath;return e&&(e.closeStroke=!0),this},t.prototype.setMatrix=function(e){return this._matrix=e,this},t.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},t.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},t.prototype.destroy=function(e){i.prototype.destroy.call(this,e),this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,i.prototype.destroy.call(this,e)},t._TEMP_POINT=new Qt,t}(Ee);/*!
 * @pixi/sprite - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var th=function(i,t){return th=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},th(i,t)};function kC(i,t){th(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Hi=new Qt,HC=new Uint16Array([0,1,2,0,2,3]),Fi=function(i){kC(t,i);function t(e){var r=i.call(this)||this;return r._anchor=new Fr(r._onAnchorUpdate,r,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=ct.NORMAL,r._cachedTint=16777215,r.uvs=null,r.texture=e||It.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.indices=HC,r.pluginName="batch",r.isSprite=!0,r._roundPixels=ht.ROUND_PIXELS,r}return t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Er(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Er(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){var e=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===e._updateID)){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var r=this.transform.worldTransform,n=r.a,o=r.b,s=r.c,a=r.d,l=r.tx,c=r.ty,d=this.vertexData,g=e.trim,u=e.orig,h=this._anchor,f=0,v=0,m=0,y=0;if(g?(v=g.x-h._x*u.width,f=v+g.width,y=g.y-h._y*u.height,m=y+g.height):(v=-h._x*u.width,f=v+u.width,y=-h._y*u.height,m=y+u.height),d[0]=n*v+s*y+l,d[1]=a*y+o*v+c,d[2]=n*f+s*y+l,d[3]=a*y+o*f+c,d[4]=n*f+s*m+l,d[5]=a*m+o*f+c,d[6]=n*v+s*m+l,d[7]=a*m+o*v+c,this._roundPixels)for(var I=ht.RESOLUTION,p=0;p<d.length;++p)d[p]=Math.round((d[p]*I|0)/I)}},t.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,r=this.vertexTrimmedData,n=e.orig,o=this._anchor,s=this.transform.worldTransform,a=s.a,l=s.b,c=s.c,d=s.d,g=s.tx,u=s.ty,h=-o._x*n.width,f=h+n.width,v=-o._y*n.height,m=v+n.height;r[0]=a*h+c*v+g,r[1]=d*v+l*h+u,r[2]=a*f+c*v+g,r[3]=d*v+l*f+u,r[4]=a*f+c*m+g,r[5]=d*m+l*f+u,r[6]=a*h+c*m+g,r[7]=d*m+l*h+u},t.prototype._render=function(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var e=this._texture.trim,r=this._texture.orig;!e||e.width===r.width&&e.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(e){return this.children.length===0?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new bt),e=this._localBoundsRect),this._bounds.getRectangle(e)):i.prototype.getLocalBounds.call(this,e)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,Hi);var r=this._texture.orig.width,n=this._texture.orig.height,o=-r*this.anchor.x,s=0;return Hi.x>=o&&Hi.x<o+r&&(s=-n*this.anchor.y,Hi.y>=s&&Hi.y<s+n)},t.prototype.destroy=function(e){i.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var r=typeof e=="boolean"?e:e&&e.texture;if(r){var n=typeof e=="boolean"?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null},t.from=function(e,r){var n=e instanceof It?e:It.from(e,r);return new t(n)},Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var r=Er(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var r=Er(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||It.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),t}(Ee);/*!
 * @pixi/text - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var eh=function(i,t){return eh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},eh(i,t)};function YC(i,t){eh(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var yi;(function(i){i[i.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",i[i.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(yi||(yi={}));var vu={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:yi.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},UC=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Wr=function(){function i(t){this.styleID=0,this.reset(),mu(this,t,t)}return i.prototype.clone=function(){var t={};return mu(t,this,vu),new i(t)},i.prototype.reset=function(){mu(this,vu,vu)},Object.defineProperty(i.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=yu(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=yu(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){zC(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=yu(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),i.prototype.toFontString=function(){var t=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var r=e.length-1;r>=0;r--){var n=e[r].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&UC.indexOf(n)<0&&(n='"'+n+'"'),e[r]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},i}();function qf(i){return typeof i=="number"?Bh(i):(typeof i=="string"&&i.indexOf("0x")===0&&(i=i.replace("0x","#")),i)}function yu(i){if(Array.isArray(i)){for(var t=0;t<i.length;++t)i[t]=qf(i[t]);return i}else return qf(i)}function zC(i,t){if(!Array.isArray(i)||!Array.isArray(t)||i.length!==t.length)return!1;for(var e=0;e<i.length;++e)if(i[e]!==t[e])return!1;return!0}function mu(i,t,e){for(var r in e)Array.isArray(t[r])?i[r]=t[r].slice():i[r]=t[r]}var Ce=function(){function i(t,e,r,n,o,s,a,l,c){this.text=t,this.style=e,this.width=r,this.height=n,this.lines=o,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=c}return i.measureText=function(t,e,r,n){n===void 0&&(n=i._canvas),r=r??e.wordWrap;var o=e.toFontString(),s=i.measureFont(o);s.fontSize===0&&(s.fontSize=e.fontSize,s.ascent=e.fontSize);var a=n.getContext("2d");a.font=o;for(var l=r?i.wordWrap(t,e,n):t,c=l.split(/(?:\r\n|\r|\n)/),d=new Array(c.length),g=0,u=0;u<c.length;u++){var h=a.measureText(c[u]).width+(c[u].length-1)*e.letterSpacing;d[u]=h,g=Math.max(g,h)}var f=g+e.strokeThickness;e.dropShadow&&(f+=e.dropShadowDistance);var v=e.lineHeight||s.fontSize+e.strokeThickness,m=Math.max(v,s.fontSize+e.strokeThickness)+(c.length-1)*(v+e.leading);return e.dropShadow&&(m+=e.dropShadowDistance),new i(t,e,f,m,c,d,v+e.leading,g,s)},i.wordWrap=function(t,e,r){r===void 0&&(r=i._canvas);for(var n=r.getContext("2d"),o=0,s="",a="",l={},c=e.letterSpacing,d=e.whiteSpace,g=i.collapseSpaces(d),u=i.collapseNewlines(d),h=!g,f=e.wordWrapWidth+c,v=i.tokenize(t),m=0;m<v.length;m++){var y=v[m];if(i.isNewline(y)){if(!u){a+=i.addLine(s),h=!g,s="",o=0;continue}y=" "}if(g){var I=i.isBreakingSpace(y),p=i.isBreakingSpace(s[s.length-1]);if(I&&p)continue}var _=i.getFromCache(y,c,l,n);if(_>f)if(s!==""&&(a+=i.addLine(s),s="",o=0),i.canBreakWords(y,e.breakWords))for(var A=i.wordWrapSplit(y),b=0;b<A.length;b++){for(var P=A[b],E=1;A[b+E];){var C=A[b+E],T=P[P.length-1];if(!i.canBreakChars(T,C,y,b,e.breakWords))P+=C;else break;E++}b+=P.length-1;var F=i.getFromCache(P,c,l,n);F+o>f&&(a+=i.addLine(s),h=!1,s="",o=0),s+=P,o+=F}else{s.length>0&&(a+=i.addLine(s),s="",o=0);var Z=m===v.length-1;a+=i.addLine(y,!Z),h=!1,s="",o=0}else _+o>f&&(h=!1,a+=i.addLine(s),s="",o=0),(s.length>0||!i.isBreakingSpace(y)||h)&&(s+=y,o+=_)}return a+=i.addLine(s,!1),a},i.addLine=function(t,e){return e===void 0&&(e=!0),t=i.trimRight(t),t=e?t+`
`:t,t},i.getFromCache=function(t,e,r,n){var o=r[t];if(o===void 0){var s=t.length*e;o=n.measureText(t).width+s,r[t]=o}return o},i.collapseSpaces=function(t){return t==="normal"||t==="pre-line"},i.collapseNewlines=function(t){return t==="normal"},i.trimRight=function(t){if(typeof t!="string")return"";for(var e=t.length-1;e>=0;e--){var r=t[e];if(!i.isBreakingSpace(r))break;t=t.slice(0,-1)}return t},i.isNewline=function(t){return typeof t!="string"?!1:i._newlines.indexOf(t.charCodeAt(0))>=0},i.isBreakingSpace=function(t){return typeof t!="string"?!1:i._breakingSpaces.indexOf(t.charCodeAt(0))>=0},i.tokenize=function(t){var e=[],r="";if(typeof t!="string")return e;for(var n=0;n<t.length;n++){var o=t[n];if(i.isBreakingSpace(o)||i.isNewline(o)){r!==""&&(e.push(r),r=""),e.push(o);continue}r+=o}return r!==""&&e.push(r),e},i.canBreakWords=function(t,e){return e},i.canBreakChars=function(t,e,r,n,o){return!0},i.wordWrapSplit=function(t){return t.split("")},i.measureFont=function(t){if(i._fonts[t])return i._fonts[t];var e={ascent:0,descent:0,fontSize:0},r=i._canvas,n=i._context;n.font=t;var o=i.METRICS_STRING+i.BASELINE_SYMBOL,s=Math.ceil(n.measureText(o).width),a=Math.ceil(n.measureText(i.BASELINE_SYMBOL).width),l=2*a;a=a*i.BASELINE_MULTIPLIER|0,r.width=s,r.height=l,n.fillStyle="#f00",n.fillRect(0,0,s,l),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(o,0,a);var c=n.getImageData(0,0,s,l).data,d=c.length,g=s*4,u=0,h=0,f=!1;for(u=0;u<a;++u){for(var v=0;v<g;v+=4)if(c[h+v]!==255){f=!0;break}if(!f)h+=g;else break}for(e.ascent=a-u,h=d-g,f=!1,u=l;u>a;--u){for(var v=0;v<g;v+=4)if(c[h+v]!==255){f=!0;break}if(!f)h-=g;else break}return e.descent=u-a,e.fontSize=e.ascent+e.descent,i._fonts[t]=e,e},i.clearMetrics=function(t){t===void 0&&(t=""),t?delete i._fonts[t]:i._fonts={}},i}(),$o=function(){try{var i=new OffscreenCanvas(0,0),t=i.getContext("2d");return t&&t.measureText?i:document.createElement("canvas")}catch{return document.createElement("canvas")}}();$o.width=$o.height=10;Ce._canvas=$o;Ce._context=$o.getContext("2d");Ce._fonts={};Ce.METRICS_STRING="|q";Ce.BASELINE_SYMBOL="M";Ce.BASELINE_MULTIPLIER=1.4;Ce._newlines=[10,13];Ce._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var VC={texture:!0,children:!1,baseTexture:!0},Kh=function(i){YC(t,i);function t(e,r,n){var o=this,s=!1;n||(n=document.createElement("canvas"),s=!0),n.width=3,n.height=3;var a=It.from(n);return a.orig=new bt,a.trim=new bt,o=i.call(this,a)||this,o._ownCanvas=s,o.canvas=n,o.context=o.canvas.getContext("2d"),o._resolution=ht.RESOLUTION,o._autoResolution=!0,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=e,o.style=r,o.localStyleID=-1,o}return t.prototype.updateText=function(e){var r=this._style;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),!(!this.dirty&&e)){this._font=this._style.toFontString();var n=this.context,o=Ce.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=o.width,a=o.height,l=o.lines,c=o.lineHeight,d=o.lineWidths,g=o.maxLineWidth,u=o.fontProperties;this.canvas.width=Math.ceil((Math.max(1,s)+r.padding*2)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,a)+r.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=r.strokeThickness,n.textBaseline=r.textBaseline,n.lineJoin=r.lineJoin,n.miterLimit=r.miterLimit;for(var h,f,v=r.dropShadow?2:1,m=0;m<v;++m){var y=r.dropShadow&&m===0,I=y?a*2:0,p=I*this.resolution;if(y){n.fillStyle="black",n.strokeStyle="black";var _=r.dropShadowColor,A=Zr(typeof _=="number"?_:Lh(_));n.shadowColor="rgba("+A[0]*255+","+A[1]*255+","+A[2]*255+","+r.dropShadowAlpha+")",n.shadowBlur=r.dropShadowBlur,n.shadowOffsetX=Math.cos(r.dropShadowAngle)*r.dropShadowDistance,n.shadowOffsetY=Math.sin(r.dropShadowAngle)*r.dropShadowDistance+p}else n.fillStyle=this._generateFillStyle(r,l,o),n.strokeStyle=r.stroke,n.shadowColor="0",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;for(var b=0;b<l.length;b++)h=r.strokeThickness/2,f=r.strokeThickness/2+b*c+u.ascent,r.align==="right"?h+=g-d[b]:r.align==="center"&&(h+=(g-d[b])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(l[b],h+r.padding,f+r.padding-I,!0),r.fill&&this.drawLetterSpacing(l[b],h+r.padding,f+r.padding-I)}this.updateTexture()}},t.prototype.drawLetterSpacing=function(e,r,n,o){o===void 0&&(o=!1);var s=this._style,a=s.letterSpacing;if(a===0){o?this.context.strokeText(e,r,n):this.context.fillText(e,r,n);return}for(var l=r,c=Array.from?Array.from(e):e.split(""),d=this.context.measureText(e).width,g=0,u=0;u<c.length;++u){var h=c[u];o?this.context.strokeText(h,l,n):this.context.fillText(h,l,n),g=this.context.measureText(e.substring(u+1)).width,l+=d-g+a,d=g}},t.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var r=Fp(e);r.data&&(e.width=r.width,e.height=r.height,this.context.putImageData(r.data,0,0))}var n=this._texture,o=this._style,s=o.trim?0:o.padding,a=n.baseTexture;n.trim.width=n._frame.width=Math.ceil(e.width/this._resolution),n.trim.height=n._frame.height=Math.ceil(e.height/this._resolution),n.trim.x=-s,n.trim.y=-s,n.orig.width=n._frame.width-s*2,n.orig.height=n._frame.height-s*2,this._onTextureUpdate(),a.setRealSize(e.width,e.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},t.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),i.prototype._render.call(this,e)},t.prototype.getLocalBounds=function(e){return this.updateText(!0),i.prototype.getLocalBounds.call(this,e)},t.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._generateFillStyle=function(e,r,n){var o=e.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;var s,a=e.dropShadow?e.dropShadowDistance:0,l=e.padding||0,c=Math.ceil(this.canvas.width/this._resolution)-a-l*2,d=Math.ceil(this.canvas.height/this._resolution)-a-l*2,g=o.slice(),u=e.fillGradientStops.slice();if(!u.length)for(var h=g.length+1,f=1;f<h;++f)u.push(f/h);if(g.unshift(o[0]),u.unshift(0),g.push(o[o.length-1]),u.push(1),e.fillGradientType===yi.LINEAR_VERTICAL){s=this.context.createLinearGradient(c/2,l,c/2,d+l);for(var v=0,m=n.fontProperties.fontSize+e.strokeThickness,y=m/d,f=0;f<r.length;f++)for(var I=n.lineHeight*f,p=0;p<g.length;p++){var _=0;typeof u[p]=="number"?_=u[p]:_=p/g.length;var A=I/d+_*y,b=Math.max(v,A);b=Math.min(b,1),s.addColorStop(b,g[p]),v=b}}else{s=this.context.createLinearGradient(l,d/2,c+l,d/2);for(var P=g.length+1,E=1,f=0;f<g.length;f++){var C=void 0;typeof u[f]=="number"?C=u[f]:C=E/P,s.addColorStop(C,g[f]),E++}}return s},t.prototype.destroy=function(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},VC,e),i.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var r=Er(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var r=Er(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(e){e=e||{},e instanceof Wr?this._style=e:this._style=new Wr(e),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),t}(Fi);/*!
 * @pixi/prepare - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ht.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var rh=function(i,t){return rh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},rh(i,t)};function JC(i,t){rh(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var zI=function(){function i(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return i.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},i.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},i}();function QC(i,t){var e=!1;if(i&&i._textures&&i._textures.length){for(var r=0;r<i._textures.length;r++)if(i._textures[r]instanceof It){var n=i._textures[r].baseTexture;t.indexOf(n)===-1&&(t.push(n),e=!0)}}return e}function $C(i,t){if(i.baseTexture instanceof Tt){var e=i.baseTexture;return t.indexOf(e)===-1&&t.push(e),!0}return!1}function KC(i,t){if(i._texture&&i._texture instanceof It){var e=i._texture.baseTexture;return t.indexOf(e)===-1&&t.push(e),!0}return!1}function qC(i,t){return t instanceof Kh?(t.updateText(!0),!0):!1}function tA(i,t){if(t instanceof Wr){var e=t.toFontString();return Ce.measureFont(e),!0}return!1}function eA(i,t){if(i instanceof Kh){t.indexOf(i.style)===-1&&t.push(i.style),t.indexOf(i)===-1&&t.push(i);var e=i._texture.baseTexture;return t.indexOf(e)===-1&&t.push(e),!0}return!1}function rA(i,t){return i instanceof Wr?(t.indexOf(i)===-1&&t.push(i),!0):!1}var VI=function(){function i(t){var e=this;this.limiter=new zI(ht.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(eA),this.registerFindHook(rA),this.registerFindHook(QC),this.registerFindHook($C),this.registerFindHook(KC),this.registerUploadHook(qC),this.registerUploadHook(tA)}return i.prototype.upload=function(t,e){typeof t=="function"&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,Jt.system.addOnce(this.tick,this,Ze.UTILITY))):e&&e()},i.prototype.tick=function(){setTimeout(this.delayedTick,0)},i.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed){for(var r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)Jt.system.addOnce(this.tick,this,Ze.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var r=0,n=o.length;r<n;r++)o[r]()}},i.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},i.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},i.prototype.add=function(t){for(var e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](t,this.queue);e++);if(t instanceof Ee)for(var e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},i.prototype.destroy=function(){this.ticking&&Jt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},i}();function JI(i,t){return t instanceof Tt?(t._glTextures[i.CONTEXT_UID]||i.texture.bind(t),!0):!1}function iA(i,t){if(!(t instanceof $h))return!1;var e=t.geometry;t.finishPoly(),e.updateBatches();for(var r=e.batches,n=0;n<r.length;n++){var o=r[n].style.texture;o&&JI(i,o.baseTexture)}return e.batchable||i.geometry.bind(e,t._resolveDirectShader(i)),!0}function nA(i,t){return i instanceof $h?(t.push(i),!0):!1}var QI=function(i){JC(t,i);function t(e){var r=i.call(this,e)||this;return r.uploadHookHelper=r.renderer,r.registerFindHook(nA),r.registerUploadHook(JI),r.registerUploadHook(iA),r}return t}(VI),oA=function(){function i(t){this.maxMilliseconds=t,this.frameStart=0}return i.prototype.beginFrame=function(){this.frameStart=Date.now()},i.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},i}();/*!
 * @pixi/spritesheet - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var $I=function(){function i(t,e,r){r===void 0&&(r=null),this._texture=t instanceof It?t:null,this.baseTexture=t instanceof Tt?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var n=this.baseTexture.resource;this.resolution=this._updateResolution(r||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return i.prototype._updateResolution=function(t){t===void 0&&(t=null);var e=this.data.meta.scale,r=hn(t,null);return r===null&&(r=e!==void 0?parseFloat(e):1),r!==1&&this.baseTexture.setResolution(r),r},i.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=i.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},i.prototype._processFrames=function(t){for(var e=t,r=i.BATCH_SIZE;e-t<r&&e<this._frameKeys.length;){var n=this._frameKeys[e],o=this._frames[n],s=o.frame;if(s){var a=null,l=null,c=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,d=new bt(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);o.rotated?a=new bt(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):a=new bt(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(l=new bt(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[n]=new It(this.baseTexture,a,d,l,o.rotated?2:0,o.anchor),It.addToCache(this.textures[n],n)}e++}},i.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var r=0;r<t[e].length;r++){var n=t[e][r];this.animations[e].push(this.textures[n])}}},i.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},i.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*i.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*i.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},i.prototype.destroy=function(t){var e;t===void 0&&(t=!1);for(var r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)===null||e===void 0||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},i.BATCH_SIZE=1e3,i}(),KI=function(){function i(){}return i.use=function(t,e){var r=this,n=t.name+"_image";if(!t.data||t.type!==tn.TYPE.JSON||!t.data.frames||r.resources[n]){e();return}var o={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},s=i.getResourcePath(t,r.baseUrl);r.add(n,s,o,function(l){if(l.error){e(l.error);return}var c=new $I(l.texture,t.data,t.url);c.parse(function(){t.spritesheet=c,t.textures=c.textures,e()})})},i.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:Xr.resolve(t.url.replace(e,""),t.data.meta.image)},i}();/*!
 * @pixi/sprite-tiling - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ih=function(i,t){return ih=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},ih(i,t)};function qI(i,t){ih(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Yi=new Qt,sA=function(i){qI(t,i);function t(e,r,n){r===void 0&&(r=100),n===void 0&&(n=100);var o=i.call(this,e)||this;return o.tileTransform=new Gh,o._width=r,o._height=n,o.uvMatrix=e.uvMatrix||new ps(e),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}return Object.defineProperty(t.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copyFrom(e)},enumerable:!1,configurable:!0}),t.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},t.prototype._render=function(e){var r=this._texture;!r||!r.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},t.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,r=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),o=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,r,n,o)},t.prototype.getLocalBounds=function(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new bt),e=this._localBoundsRect),this._bounds.getRectangle(e)):i.prototype.getLocalBounds.call(this,e)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,Yi);var r=this._width,n=this._height,o=-r*this.anchor._x;if(Yi.x>=o&&Yi.x<o+r){var s=-n*this.anchor._y;if(Yi.y>=s&&Yi.y<s+n)return!0}return!1},t.prototype.destroy=function(e){i.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},t.from=function(e,r){return typeof r=="number"&&(it("5.3.0","TilingSprite.from use options instead of width and height args"),r={width:r,height:arguments[2]}),new t(It.from(e,r),r.width,r.height)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0}),t}(Fi),td=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,aA=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord - floor(vTextureCoord - uClampOffset);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture2D(uSampler, coord);
    gl_FragColor = texSample * uColor;
}
`,uA=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 sample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = sample * uColor;
}
`,Ao=new Nt,tv=function(i){qI(t,i);function t(e){var r=i.call(this,e)||this,n={globals:r.renderer.globalUniforms};return r.shader=ur.from(td,aA,n),r.simpleShader=ur.from(td,uA,n),r.quad=new Uh,r.state=pr.for2d(),r}return t.prototype.render=function(e){var r=this.renderer,n=this.quad,o=n.vertices;o[0]=o[6]=e._width*-e.anchor.x,o[1]=o[3]=e._height*-e.anchor.y,o[2]=o[4]=e._width*(1-e.anchor.x),o[5]=o[7]=e._height*(1-e.anchor.y),e.uvRespectAnchor&&(o=n.uvs,o[0]=o[6]=-e.anchor.x,o[1]=o[3]=-e.anchor.y,o[2]=o[4]=1-e.anchor.x,o[5]=o[7]=1-e.anchor.y),n.invalidate();var s=e._texture,a=s.baseTexture,l=e.tileTransform.localTransform,c=e.uvMatrix,d=a.isPowerOfTwo&&s.frame.width===a.width&&s.frame.height===a.height;d&&(a._glTextures[r.CONTEXT_UID]?d=a.wrapMode!==ze.CLAMP:a.wrapMode===ze.CLAMP&&(a.wrapMode=ze.REPEAT));var g=d?this.simpleShader:this.shader,u=s.width,h=s.height,f=e._width,v=e._height;Ao.set(l.a*u/f,l.b*u/v,l.c*h/f,l.d*h/v,l.tx/f,l.ty/v),Ao.invert(),d?Ao.prepend(c.mapCoord):(g.uniforms.uMapCoord=c.mapCoord.toArray(!0),g.uniforms.uClampFrame=c.uClampFrame,g.uniforms.uClampOffset=c.uClampOffset),g.uniforms.uTransform=Ao.toArray(!0),g.uniforms.uColor=Oh(e.tint,e.worldAlpha,g.uniforms.uColor,a.alphaMode),g.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),g.uniforms.uSampler=s,r.shader.bind(g),r.geometry.bind(n),this.state.blendMode=Zh(e.blendMode,a.alphaMode),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},t}(Cn);/*!
 * @pixi/mesh - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var nh=function(i,t){return nh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},nh(i,t)};function qh(i,t){nh(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var ev=function(){function i(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return i.prototype.update=function(t){if(!(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},i}(),_u=new Qt,ed=new si,mi=function(i){qh(t,i);function t(e,r,n,o){o===void 0&&(o=ye.TRIANGLES);var s=i.call(this)||this;return s.geometry=e,e.refCount++,s.shader=r,s.state=n||pr.for2d(),s.drawMode=o,s.start=0,s.size=0,s.uvs=null,s.indices=null,s.vertexData=new Float32Array(1),s.vertexDirty=0,s._transformID=-1,s.tint=16777215,s.blendMode=ct.NORMAL,s._roundPixels=ht.ROUND_PIXELS,s.batchUvs=null,s}return Object.defineProperty(t.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this.shader},set:function(e){this.shader=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this.shader.tint},set:function(e){this.shader.tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){this.shader.texture=e},enumerable:!1,configurable:!0}),t.prototype._render=function(e){var r=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===ye.TRIANGLES&&r.length<t.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)},t.prototype._renderDefault=function(e){var r=this.shader;r.alpha=this.worldAlpha,r.update&&r.update(),e.batch.flush(),r.program.uniformData.translationMatrix&&(r.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),e.shader.bind(r),e.state.set(this.state),e.geometry.bind(this.geometry,r),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},t.prototype._renderToBatch=function(e){var r=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=r.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var n=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[n]),e.plugins[n].render(this)},t.prototype.calculateVertices=function(){var e=this.geometry,r=e.buffers[0].data;if(!(e.vertexDirtyId===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==r.length&&(this.vertexData=new Float32Array(r.length));for(var n=this.transform.worldTransform,o=n.a,s=n.b,a=n.c,l=n.d,c=n.tx,d=n.ty,g=this.vertexData,u=0;u<g.length/2;u++){var h=r[u*2],f=r[u*2+1];g[u*2]=o*h+a*f+c,g[u*2+1]=s*h+l*f+d}if(this._roundPixels)for(var v=ht.RESOLUTION,u=0;u<g.length;++u)g[u]=Math.round((g[u]*v|0)/v);this.vertexDirty=e.vertexDirtyId}},t.prototype.calculateUvs=function(){var e=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new ev(e,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,_u);for(var r=this.geometry.getBuffer("aVertexPosition").data,n=ed.points,o=this.geometry.getIndex().data,s=o.length,a=this.drawMode===4?3:1,l=0;l+2<s;l+=a){var c=o[l]*2,d=o[l+1]*2,g=o[l+2]*2;if(n[0]=r[c],n[1]=r[c+1],n[2]=r[d],n[3]=r[d+1],n[4]=r[g],n[5]=r[g+1],ed.contains(_u.x,_u.y))return!0}return!1},t.prototype.destroy=function(e){i.prototype.destroy.call(this,e),this.geometry.refCount--,this.geometry.refCount===0&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},t.BATCHABLE_SIZE=100,t}(Ee),lA=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,hA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,bn=function(i){qh(t,i);function t(e,r){var n=this,o={uSampler:e,alpha:1,uTextureMatrix:Nt.IDENTITY,uColor:new Float32Array([1,1,1,1])};return r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(o,r.uniforms),n=i.call(this,r.program||An.from(hA,lA),o)||this,n._colorDirty=!1,n.uvMatrix=new ps(e),n.batchable=r.program===void 0,n.pluginName=r.pluginName,n.tint=r.tint,n.alpha=r.alpha,n}return Object.defineProperty(t.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(e){this.uniforms.uSampler!==e&&(this.uniforms.uSampler=e,this.uvMatrix.texture=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),t.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var e=this.texture.baseTexture;Oh(this._tint,this._alpha,this.uniforms.uColor,e.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},t}(ur),wn=function(i){qh(t,i);function t(e,r,n){var o=i.call(this)||this,s=new Vt(e),a=new Vt(r,!0),l=new Vt(n,!0,!0);return o.addAttribute("aVertexPosition",s,2,!1,Gt.FLOAT).addAttribute("aTextureCoord",a,2,!1,Gt.FLOAT).addIndex(l),o._updateId=-1,o}return Object.defineProperty(t.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),t}(Ti);/*!
 * @pixi/text-bitmap - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var oh=function(i,t){return oh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},oh(i,t)};function cA(i,t){oh(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var fn=function(){function i(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]}return i}(),fA=function(){function i(){}return i.test=function(t){return typeof t=="string"&&t.indexOf("info face=")===0},i.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[]};for(var n in e){var o=e[n].match(/^[a-z]+/gm)[0],s=e[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var l in s){var c=s[l].split("="),d=c[0],g=c[1].replace(/"/gm,""),u=parseFloat(g),h=isNaN(u)?g:u;a[d]=h}r[o].push(a)}var f=new fn;return r.info.forEach(function(v){return f.info.push({face:v.face,size:parseInt(v.size,10)})}),r.common.forEach(function(v){return f.common.push({lineHeight:parseInt(v.lineHeight,10)})}),r.page.forEach(function(v){return f.page.push({id:parseInt(v.id,10),file:v.file})}),r.char.forEach(function(v){return f.char.push({id:parseInt(v.id,10),page:parseInt(v.page,10),x:parseInt(v.x,10),y:parseInt(v.y,10),width:parseInt(v.width,10),height:parseInt(v.height,10),xoffset:parseInt(v.xoffset,10),yoffset:parseInt(v.yoffset,10),xadvance:parseInt(v.xadvance,10)})}),r.kerning.forEach(function(v){return f.kerning.push({first:parseInt(v.first,10),second:parseInt(v.second,10),amount:parseInt(v.amount,10)})}),f},i}(),dA=function(){function i(){}return i.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},i.parse=function(t){for(var e=new fn,r=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),o=t.getElementsByTagName("page"),s=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),l=0;l<r.length;l++)e.info.push({face:r[l].getAttribute("face"),size:parseInt(r[l].getAttribute("size"),10)});for(var l=0;l<n.length;l++)e.common.push({lineHeight:parseInt(n[l].getAttribute("lineHeight"),10)});for(var l=0;l<o.length;l++)e.page.push({id:parseInt(o[l].getAttribute("id"),10)||0,file:o[l].getAttribute("file")});for(var l=0;l<s.length;l++){var c=s[l];e.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(var l=0;l<a.length;l++)e.kerning.push({first:parseInt(a[l].getAttribute("first"),10),second:parseInt(a[l].getAttribute("second"),10),amount:parseInt(a[l].getAttribute("amount"),10)});return e},i}(),Cu=[fA,dA];function rv(i){for(var t=0;t<Cu.length;t++)if(Cu[t].test(i))return Cu[t];return null}function rd(i,t,e,r,n,o){var s=e.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;var a,l=e.dropShadow?e.dropShadowDistance:0,c=e.padding||0,d=Math.ceil(i.width/r)-l-c*2,g=Math.ceil(i.height/r)-l-c*2,u=s.slice(),h=e.fillGradientStops.slice();if(!h.length)for(var f=u.length+1,v=1;v<f;++v)h.push(v/f);if(u.unshift(s[0]),h.unshift(0),u.push(s[s.length-1]),h.push(1),e.fillGradientType===yi.LINEAR_VERTICAL){a=t.createLinearGradient(d/2,c,d/2,g+c);for(var m=0,y=o.fontProperties.fontSize+e.strokeThickness,I=y/g,v=0;v<n.length;v++)for(var p=o.lineHeight*v,_=0;_<u.length;_++){var A=0;typeof h[_]=="number"?A=h[_]:A=_/u.length;var b=p/g+A*I,P=Math.max(m,b);P=Math.min(P,1),a.addColorStop(P,u[_]),m=P}}else{a=t.createLinearGradient(c,g/2,d+c,g/2);for(var E=u.length+1,C=1,v=0;v<u.length;v++){var T=void 0;typeof h[v]=="number"?T=h[v]:T=C/E,a.addColorStop(T,u[v]),C++}}return a}function gA(i,t,e,r,n,o,s){var a=e.text,l=e.fontProperties;t.translate(r,n),t.scale(o,o);var c=s.strokeThickness/2,d=-(s.strokeThickness/2);t.font=s.toFontString(),t.lineWidth=s.strokeThickness,t.textBaseline=s.textBaseline,t.lineJoin=s.lineJoin,t.miterLimit=s.miterLimit,t.fillStyle=rd(i,t,s,o,[a],e),t.strokeStyle=s.stroke,t.font=s.toFontString(),t.lineWidth=s.strokeThickness,t.textBaseline=s.textBaseline,t.lineJoin=s.lineJoin,t.miterLimit=s.miterLimit,t.fillStyle=rd(i,t,s,o,[a],e),t.strokeStyle=s.stroke;var g=s.dropShadowColor,u=Zr(typeof g=="number"?g:Lh(g));s.dropShadow?(t.shadowColor="rgba("+u[0]*255+","+u[1]*255+","+u[2]*255+","+s.dropShadowAlpha+")",t.shadowBlur=s.dropShadowBlur,t.shadowOffsetX=Math.cos(s.dropShadowAngle)*s.dropShadowDistance,t.shadowOffsetY=Math.sin(s.dropShadowAngle)*s.dropShadowDistance):(t.shadowColor="0",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),s.stroke&&s.strokeThickness&&t.strokeText(a,c,d+e.lineHeight-l.descent),s.fill&&t.fillText(a,c,d+e.lineHeight-l.descent),t.setTransform(),t.fillStyle="rgba(0, 0, 0, 0)"}function pA(i){typeof i=="string"&&(i=[i]);for(var t=[],e=0,r=i.length;e<r;e++){var n=i[e];if(Array.isArray(n)){if(n.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var o=n[0].charCodeAt(0),s=n[1].charCodeAt(0);if(s<o)throw new Error("[BitmapFont]: Invalid character range.");for(var a=o,l=s;a<=l;a++)t.push(String.fromCharCode(a))}else t.push.apply(t,n.split(""))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}var ir=function(){function i(t,e){var r=t.info[0],n=t.common[0],o=t.page[0],s=hn(o.file),a={};this.font=r.face,this.size=r.size,this.lineHeight=n.lineHeight/s,this.chars={},this.pageTextures=a;for(var l=0;l<t.page.length;l++){var c=t.page[l],d=c.id,g=c.file;a[d]=e instanceof Array?e[l]:e[g]}for(var l=0;l<t.char.length;l++){var u=t.char[l],d=u.id,h=u.page,f=t.char[l],v=f.x,m=f.y,y=f.width,I=f.height,p=f.xoffset,_=f.yoffset,A=f.xadvance;v/=s,m/=s,y/=s,I/=s,p/=s,_/=s,A/=s;var b=new bt(v+a[h].frame.x/s,m+a[h].frame.y/s,y,I);this.chars[d]={xOffset:p,yOffset:_,xAdvance:A,kerning:{},texture:new It(a[h].baseTexture,b),page:h}}for(var l=0;l<t.kerning.length;l++){var P=t.kerning[l],E=P.first,C=P.second,T=P.amount;E/=s,C/=s,T/=s,this.chars[C]&&(this.chars[C].kerning[E]=T)}}return i.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},i.install=function(t,e){var r;if(t instanceof fn)r=t;else{var n=rv(t);if(!n)throw new Error("Unrecognized data format for font.");r=n.parse(t)}e instanceof It&&(e=[e]);var o=new i(r,e);return i.available[o.font]=o,o},i.uninstall=function(t){var e=i.available[t];if(!e)throw new Error("No font found named '"+t+"'");e.destroy(),delete i.available[t]},i.from=function(t,e,r){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var n=Object.assign({},i.defaultOptions,r),o=n.chars,s=n.padding,a=n.resolution,l=n.textureWidth,c=n.textureHeight,d=pA(o),g=e instanceof Wr?e:new Wr(e),u=l,h=new fn;h.info[0]={face:g.fontFamily,size:g.fontSize},h.common[0]={lineHeight:g.fontSize};for(var f=0,v=0,m,y,I,p=0,_=[],A=0;A<d.length;A++){m||(m=document.createElement("canvas"),m.width=l,m.height=c,y=m.getContext("2d"),I=new Tt(m,{resolution:a}),_.push(new It(I)),h.page.push({id:_.length-1,file:""}));var b=Ce.measureText(d[A],g,!1,m),P=b.width,E=Math.ceil(b.height),C=Math.ceil((g.fontStyle==="italic"?2:1)*P);if(v>=c-E*a){if(v===0)throw new Error("[BitmapFont] textureHeight "+c+"px is "+("too small for "+g.fontSize+"px fonts"));--A,m=null,y=null,I=null,v=0,f=0,p=0;continue}if(p=Math.max(E+b.fontProperties.descent,p),C*a+f>=u){--A,v+=p*a,v=Math.ceil(v),f=0,p=0;continue}gA(m,y,b,f,v,a,g);var T=b.text.charCodeAt(0);h.char.push({id:T,page:_.length-1,x:f/a,y:v/a,width:C,height:E,xoffset:0,yoffset:0,xadvance:Math.ceil(P-(g.dropShadow?g.dropShadowDistance:0)-(g.stroke?g.strokeThickness:0))}),f+=(C+2*s)*a,f=Math.ceil(f)}var F=new i(h,_);return i.available[t]!==void 0&&i.uninstall(t),i.available[t]=F,F},i.ALPHA=[["a","z"],["A","Z"]," "],i.NUMERIC=[["0","9"]],i.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],i.ASCII=[[" ","~"]],i.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:i.ALPHANUMERIC},i.available={},i}(),id=[],nd=[],IA=function(i){cA(t,i);function t(e,r){r===void 0&&(r={});var n=i.call(this)||this;n._tint=16777215,r.font&&(it("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),n._upgradeStyle(r));var o=Object.assign({},t.styleDefaults,r),s=o.align,a=o.tint,l=o.maxWidth,c=o.letterSpacing,d=o.fontName,g=o.fontSize;if(!ir.available[d])throw new Error('Missing BitmapFont "'+d+'"');return n._activePagesMeshData=[],n._textWidth=0,n._textHeight=0,n._align=s,n._tint=a,n._fontName=d,n._fontSize=g||ir.available[d].size,n._text=e,n._maxWidth=l,n._maxLineHeight=0,n._letterSpacing=c,n._anchor=new Fr(function(){n.dirty=!0},n,0,0),n.roundPixels=ht.ROUND_PIXELS,n.dirty=!0,n}return t.prototype.updateText=function(){for(var e,r=ir.available[this._fontName],n=this._fontSize/r.size,o=new Qt,s=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=l.length,d=this._maxWidth*r.size/this._fontSize,g=null,u=0,h=0,f=0,v=-1,m=0,y=0,I=0,p=0;p<c;p++){var _=l.charCodeAt(p),A=l.charAt(p);if(/(?:\s)/.test(A)&&(v=p,m=u),A==="\r"||A===`
`){a.push(u),h=Math.max(h,u),++f,++y,o.x=0,o.y+=r.lineHeight,g=null;continue}var b=r.chars[_];if(b){g&&b.kerning[g]&&(o.x+=b.kerning[g]);var P=nd.pop()||{texture:It.EMPTY,line:0,charCode:0,position:new Qt};P.texture=b.texture,P.line=f,P.charCode=_,P.position.x=o.x+b.xOffset+this._letterSpacing/2,P.position.y=o.y+b.yOffset,s.push(P),o.x+=b.xAdvance+this._letterSpacing,u=o.x,I=Math.max(I,b.yOffset+b.texture.height),g=_,v!==-1&&d>0&&o.x>d&&(++y,Br(s,1+v-y,1+p-v),p=v,v=-1,a.push(m),h=Math.max(h,m),f++,o.x=0,o.y+=r.lineHeight,g=null)}}var E=l.charAt(l.length-1);E!=="\r"&&E!==`
`&&(/(?:\s)/.test(E)&&(u=m),a.push(u),h=Math.max(h,u));for(var C=[],p=0;p<=f;p++){var T=0;this._align==="right"?T=h-a[p]:this._align==="center"&&(T=(h-a[p])/2),C.push(T)}for(var F=s.length,Z={},O=[],H=this._activePagesMeshData,p=0;p<H.length;p++)id.push(H[p]);for(var p=0;p<F;p++){var X=s[p].texture,U=X.baseTexture.uid;if(!Z[U]){var k=id.pop();if(!k){var ot=new wn,lt=new bn(It.EMPTY),et=new mi(ot,lt);k={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:et,vertices:null,uvs:null,indices:null}}k.index=0,k.indexCount=0,k.vertexCount=0,k.uvsCount=0,k.total=0,k.mesh.texture=new It(X.baseTexture),k.mesh.tint=this._tint,O.push(k),Z[U]=k}Z[U].total++}for(var p=0;p<H.length;p++)O.indexOf(H[p])===-1&&this.removeChild(H[p].mesh);for(var p=0;p<O.length;p++)O[p].mesh.parent!==this&&this.addChild(O[p].mesh);this._activePagesMeshData=O;for(var p in Z){var k=Z[p],Q=k.total;(!(((e=k.indices)===null||e===void 0?void 0:e.length)>6*Q)||k.vertices.length<mi.BATCHABLE_SIZE*2)&&(k.vertices=new Float32Array(4*2*Q),k.uvs=new Float32Array(4*2*Q),k.indices=new Uint16Array(6*Q)),k.mesh.size=6*Q}for(var p=0;p<F;p++){var A=s[p],rt=(A.position.x+C[A.line])*n,at=A.position.y*n,X=A.texture,N=Z[X.baseTexture.uid],pt=X.frame,dt=X._uvs,D=N.index++;N.indices[D*6+0]=0+D*4,N.indices[D*6+1]=1+D*4,N.indices[D*6+2]=2+D*4,N.indices[D*6+3]=0+D*4,N.indices[D*6+4]=2+D*4,N.indices[D*6+5]=3+D*4,N.vertices[D*8+0]=rt,N.vertices[D*8+1]=at,N.vertices[D*8+2]=rt+pt.width*n,N.vertices[D*8+3]=at,N.vertices[D*8+4]=rt+pt.width*n,N.vertices[D*8+5]=at+pt.height*n,N.vertices[D*8+6]=rt,N.vertices[D*8+7]=at+pt.height*n,N.uvs[D*8+0]=dt.x0,N.uvs[D*8+1]=dt.y0,N.uvs[D*8+2]=dt.x1,N.uvs[D*8+3]=dt.y1,N.uvs[D*8+4]=dt.x2,N.uvs[D*8+5]=dt.y2,N.uvs[D*8+6]=dt.x3,N.uvs[D*8+7]=dt.y3}this._textWidth=h*n,this._textHeight=(o.y+r.lineHeight)*n;for(var p in Z){var k=Z[p];if(this.anchor.x!==0||this.anchor.y!==0)for(var x=0,M=this._textWidth*this.anchor.x,L=this._textHeight*this.anchor.y,z=0;z<k.total;z++)k.vertices[x++]-=M,k.vertices[x++]-=L,k.vertices[x++]-=M,k.vertices[x++]-=L,k.vertices[x++]-=M,k.vertices[x++]-=L,k.vertices[x++]-=M,k.vertices[x++]-=L;this._maxLineHeight=I*n;var $=k.mesh.geometry.getBuffer("aVertexPosition"),K=k.mesh.geometry.getBuffer("aTextureCoord"),st=k.mesh.geometry.getIndex();$.data=k.vertices,K.data=k.uvs,st.data=k.indices,$.update(),K.update(),st.update()}for(var p=0;p<s.length;p++)nd.push(s[p])},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype.getLocalBounds=function(){return this.validate(),i.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){if(this._tint!==e){this._tint=e;for(var r=0;r<this._activePagesMeshData.length;r++)this._activePagesMeshData[r].mesh.tint=e}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontName",{get:function(){return this._fontName},set:function(e){if(!ir.available[e])throw new Error('Missing BitmapFont "'+e+'"');this._fontName!==e&&(this._fontName=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),t.prototype._upgradeStyle=function(e){if(typeof e.font=="string"){var r=e.font.split(" ");e.fontName=r.length===1?r[0]:r.slice(1).join(" "),r.length>=2&&(e.fontSize=parseInt(r[0],10))}else e.fontName=e.font.name,e.fontSize=typeof e.font.size=="number"?e.font.size:parseInt(e.font.size,10)},t.registerFont=function(e,r){return it("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),ir.install(e,r)},Object.defineProperty(t,"fonts",{get:function(){return it("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),ir.available},enumerable:!1,configurable:!0}),t.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},t}(Ee),iv=function(){function i(){}return i.add=function(){tn.setExtensionXhrType("fnt",tn.XHR_RESPONSE_TYPE.DOCUMENT)},i.use=function(t,e){var r=rv(t.data);if(!r){e();return}for(var n=i.getBaseUrl(this,t),o=r.parse(t.data),s={},a=function(v){s[v.metadata.pageFile]=v.texture,Object.keys(s).length===o.page.length&&(t.bitmapFont=ir.install(o,s),e())},l=0;l<o.page.length;++l){var c=o.page[l].file,d=n+c,g=!1;for(var u in this.resources){var h=this.resources[u];if(h.url===d){h.metadata.pageFile=c,h.texture?a(h):h.onAfterMiddleware.add(a),g=!0;break}}if(!g){var f={crossOrigin:t.crossOrigin,loadType:tn.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:c},t.metadata.imageMetadata),parentResource:t};this.add(d,f,a)}}},i.getBaseUrl=function(t,e){var r=e.isDataUrl?"":i.dirname(e.url);return e.isDataUrl&&(r==="."&&(r=""),t.baseUrl&&r&&t.baseUrl.charAt(t.baseUrl.length-1)==="/"&&(r+="/")),r=r.replace(t.baseUrl,""),r&&r.charAt(r.length-1)!=="/"&&(r+="/"),r},i.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":e===""?"/":e},i}();/*!
 * @pixi/filter-alpha - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var sh=function(i,t){return sh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},sh(i,t)};function vA(i,t){sh(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var yA=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,mA=function(i){vA(t,i);function t(e){e===void 0&&(e=1);var r=i.call(this,PI,yA,{uAlpha:1})||this;return r.alpha=e,r}return Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),t}($e);/*!
 * @pixi/filter-blur - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ah=function(i,t){return ah=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},ah(i,t)};function nv(i,t){ah(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var _A=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function CA(i,t){var e=Math.ceil(i/2),r=_A,n="",o;t?o="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":o="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<i;s++){var a=o.replace("%index%",s.toString());a=a.replace("%sampleIndex%",s-(e-1)+".0"),n+=a,n+=`
`}return r=r.replace("%blur%",n),r=r.replace("%size%",i.toString()),r}var AA={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},bA=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function wA(i){for(var t=AA[i],e=t.length,r=bA,n="",o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",s,a=0;a<i;a++){var l=o.replace("%index%",a.toString());s=a,a>=e&&(s=i-a-1),l=l.replace("%value%",t[s].toString()),n+=l,n+=`
`}return r=r.replace("%blur%",n),r=r.replace("%size%",i.toString()),r}var od;(function(i){i[i.WEBGL_LEGACY=0]="WEBGL_LEGACY",i[i.WEBGL=1]="WEBGL",i[i.WEBGL2=2]="WEBGL2"})(od||(od={}));var sd;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.WEBGL=1]="WEBGL",i[i.CANVAS=2]="CANVAS"})(sd||(sd={}));var ad;(function(i){i[i.COLOR=16384]="COLOR",i[i.DEPTH=256]="DEPTH",i[i.STENCIL=1024]="STENCIL"})(ad||(ad={}));var ud;(function(i){i[i.NORMAL=0]="NORMAL",i[i.ADD=1]="ADD",i[i.MULTIPLY=2]="MULTIPLY",i[i.SCREEN=3]="SCREEN",i[i.OVERLAY=4]="OVERLAY",i[i.DARKEN=5]="DARKEN",i[i.LIGHTEN=6]="LIGHTEN",i[i.COLOR_DODGE=7]="COLOR_DODGE",i[i.COLOR_BURN=8]="COLOR_BURN",i[i.HARD_LIGHT=9]="HARD_LIGHT",i[i.SOFT_LIGHT=10]="SOFT_LIGHT",i[i.DIFFERENCE=11]="DIFFERENCE",i[i.EXCLUSION=12]="EXCLUSION",i[i.HUE=13]="HUE",i[i.SATURATION=14]="SATURATION",i[i.COLOR=15]="COLOR",i[i.LUMINOSITY=16]="LUMINOSITY",i[i.NORMAL_NPM=17]="NORMAL_NPM",i[i.ADD_NPM=18]="ADD_NPM",i[i.SCREEN_NPM=19]="SCREEN_NPM",i[i.NONE=20]="NONE",i[i.SRC_OVER=0]="SRC_OVER",i[i.SRC_IN=21]="SRC_IN",i[i.SRC_OUT=22]="SRC_OUT",i[i.SRC_ATOP=23]="SRC_ATOP",i[i.DST_OVER=24]="DST_OVER",i[i.DST_IN=25]="DST_IN",i[i.DST_OUT=26]="DST_OUT",i[i.DST_ATOP=27]="DST_ATOP",i[i.ERASE=26]="ERASE",i[i.SUBTRACT=28]="SUBTRACT",i[i.XOR=29]="XOR"})(ud||(ud={}));var ld;(function(i){i[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(ld||(ld={}));var hd;(function(i){i[i.RGBA=6408]="RGBA",i[i.RGB=6407]="RGB",i[i.ALPHA=6406]="ALPHA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(hd||(hd={}));var cd;(function(i){i[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(cd||(cd={}));var fd;(function(i){i[i.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",i[i.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",i[i.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",i[i.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",i[i.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",i[i.FLOAT=5126]="FLOAT",i[i.HALF_FLOAT=36193]="HALF_FLOAT"})(fd||(fd={}));var dd;(function(i){i[i.NEAREST=0]="NEAREST",i[i.LINEAR=1]="LINEAR"})(dd||(dd={}));var gd;(function(i){i[i.CLAMP=33071]="CLAMP",i[i.REPEAT=10497]="REPEAT",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(gd||(gd={}));var pd;(function(i){i[i.OFF=0]="OFF",i[i.POW2=1]="POW2",i[i.ON=2]="ON"})(pd||(pd={}));var Id;(function(i){i[i.NPM=0]="NPM",i[i.UNPACK=1]="UNPACK",i[i.PMA=2]="PMA",i[i.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",i[i.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",i[i.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(Id||(Id={}));var dn;(function(i){i[i.NO=0]="NO",i[i.YES=1]="YES",i[i.AUTO=2]="AUTO",i[i.BLEND=0]="BLEND",i[i.CLEAR=1]="CLEAR",i[i.BLIT=2]="BLIT"})(dn||(dn={}));var vd;(function(i){i[i.AUTO=0]="AUTO",i[i.MANUAL=1]="MANUAL"})(vd||(vd={}));var yd;(function(i){i.LOW="lowp",i.MEDIUM="mediump",i.HIGH="highp"})(yd||(yd={}));var md;(function(i){i[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE"})(md||(md={}));var _d;(function(i){i[i.NONE=0]="NONE",i[i.LOW=2]="LOW",i[i.MEDIUM=4]="MEDIUM",i[i.HIGH=8]="HIGH"})(_d||(_d={}));var uh=function(i){nv(t,i);function t(e,r,n,o,s){r===void 0&&(r=8),n===void 0&&(n=4),o===void 0&&(o=ht.RESOLUTION),s===void 0&&(s=5);var a=this,l=CA(s,e),c=wA(s);return a=i.call(this,l,c)||this,a.horizontal=e,a.resolution=o,a._quality=0,a.quality=n,a.blur=r,a}return t.prototype.apply=function(e,r,n,o){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/r.width):this.uniforms.strength=1/n.height*(n.height/r.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/r.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,r,n,o);else{var s=e.getFilterTexture(),a=e.renderer,l=r,c=s;this.state.blend=!1,e.applyFilter(this,l,c,dn.CLEAR);for(var d=1;d<this.passes-1;d++){e.bindAndClear(l,dn.BLIT),this.uniforms.uSampler=c;var g=c;c=l,l=g,a.shader.bind(this),a.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,c,n,o),e.returnFilterTexture(s)}},Object.defineProperty(t.prototype,"blur",{get:function(){return this.strength},set:function(e){this.padding=1+Math.abs(e)*2,this.strength=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e},enumerable:!1,configurable:!0}),t}($e),xA=function(i){nv(t,i);function t(e,r,n,o){e===void 0&&(e=8),r===void 0&&(r=4),n===void 0&&(n=ht.RESOLUTION),o===void 0&&(o=5);var s=i.call(this)||this;return s.blurXFilter=new uh(!0,e,r,n,o),s.blurYFilter=new uh(!1,e,r,n,o),s.resolution=n,s.quality=r,s.blur=e,s.repeatEdgePixels=!1,s}return t.prototype.apply=function(e,r,n,o){var s=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(s&&a){var l=e.getFilterTexture();this.blurXFilter.apply(e,r,l,dn.CLEAR),this.blurYFilter.apply(e,l,n,o),e.returnFilterTexture(l)}else a?this.blurYFilter.apply(e,r,n,o):this.blurXFilter.apply(e,r,n,o)},t.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(t.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(e){this.blurYFilter.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(e){this._repeatEdgePixels=e,this.updatePadding()},enumerable:!1,configurable:!0}),t}($e);/*!
 * @pixi/filter-color-matrix - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var lh=function(i,t){return lh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},lh(i,t)};function PA(i,t){lh(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var SA=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,hh=function(i){PA(t,i);function t(){var e=this,r={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return e=i.call(this,zh,SA,r)||this,e.alpha=1,e}return t.prototype._loadMatrix=function(e,r){r===void 0&&(r=!1);var n=e;r&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n},t.prototype._multiply=function(e,r,n){return e[0]=r[0]*n[0]+r[1]*n[5]+r[2]*n[10]+r[3]*n[15],e[1]=r[0]*n[1]+r[1]*n[6]+r[2]*n[11]+r[3]*n[16],e[2]=r[0]*n[2]+r[1]*n[7]+r[2]*n[12]+r[3]*n[17],e[3]=r[0]*n[3]+r[1]*n[8]+r[2]*n[13]+r[3]*n[18],e[4]=r[0]*n[4]+r[1]*n[9]+r[2]*n[14]+r[3]*n[19]+r[4],e[5]=r[5]*n[0]+r[6]*n[5]+r[7]*n[10]+r[8]*n[15],e[6]=r[5]*n[1]+r[6]*n[6]+r[7]*n[11]+r[8]*n[16],e[7]=r[5]*n[2]+r[6]*n[7]+r[7]*n[12]+r[8]*n[17],e[8]=r[5]*n[3]+r[6]*n[8]+r[7]*n[13]+r[8]*n[18],e[9]=r[5]*n[4]+r[6]*n[9]+r[7]*n[14]+r[8]*n[19]+r[9],e[10]=r[10]*n[0]+r[11]*n[5]+r[12]*n[10]+r[13]*n[15],e[11]=r[10]*n[1]+r[11]*n[6]+r[12]*n[11]+r[13]*n[16],e[12]=r[10]*n[2]+r[11]*n[7]+r[12]*n[12]+r[13]*n[17],e[13]=r[10]*n[3]+r[11]*n[8]+r[12]*n[13]+r[13]*n[18],e[14]=r[10]*n[4]+r[11]*n[9]+r[12]*n[14]+r[13]*n[19]+r[14],e[15]=r[15]*n[0]+r[16]*n[5]+r[17]*n[10]+r[18]*n[15],e[16]=r[15]*n[1]+r[16]*n[6]+r[17]*n[11]+r[18]*n[16],e[17]=r[15]*n[2]+r[16]*n[7]+r[17]*n[12]+r[18]*n[17],e[18]=r[15]*n[3]+r[16]*n[8]+r[17]*n[13]+r[18]*n[18],e[19]=r[15]*n[4]+r[16]*n[9]+r[17]*n[14]+r[18]*n[19]+r[19],e},t.prototype._colorMatrix=function(e){var r=new Float32Array(e);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r},t.prototype.brightness=function(e,r){var n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.greyscale=function(e,r){var n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.blackAndWhite=function(e){var r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,e)},t.prototype.hue=function(e,r){e=(e||0)/180*Math.PI;var n=Math.cos(e),o=Math.sin(e),s=Math.sqrt,a=1/3,l=s(a),c=n+(1-n)*a,d=a*(1-n)-l*o,g=a*(1-n)+l*o,u=a*(1-n)+l*o,h=n+a*(1-n),f=a*(1-n)-l*o,v=a*(1-n)-l*o,m=a*(1-n)+l*o,y=n+a*(1-n),I=[c,d,g,0,0,u,h,f,0,0,v,m,y,0,0,0,0,0,1,0];this._loadMatrix(I,r)},t.prototype.contrast=function(e,r){var n=(e||0)+1,o=-.5*(n-1),s=[n,0,0,0,o,0,n,0,0,o,0,0,n,0,o,0,0,0,1,0];this._loadMatrix(s,r)},t.prototype.saturate=function(e,r){e===void 0&&(e=0);var n=e*2/3+1,o=(n-1)*-.5,s=[n,o,o,0,0,o,n,o,0,0,o,o,n,0,0,0,0,0,1,0];this._loadMatrix(s,r)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(e){var r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,e)},t.prototype.sepia=function(e){var r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,e)},t.prototype.technicolor=function(e){var r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,e)},t.prototype.polaroid=function(e){var r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,e)},t.prototype.toBGR=function(e){var r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,e)},t.prototype.kodachrome=function(e){var r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,e)},t.prototype.browni=function(e){var r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,e)},t.prototype.vintage=function(e){var r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,e)},t.prototype.colorTone=function(e,r,n,o,s){e=e||.2,r=r||.15,n=n||16770432,o=o||3375104;var a=(n>>16&255)/255,l=(n>>8&255)/255,c=(n&255)/255,d=(o>>16&255)/255,g=(o>>8&255)/255,u=(o&255)/255,h=[.3,.59,.11,0,0,a,l,c,e,0,d,g,u,r,0,a-d,l-g,c-u,0,0];this._loadMatrix(h,s)},t.prototype.night=function(e,r){e=e||.1;var n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.predator=function(e,r){var n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.lsd=function(e){var r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,e)},t.prototype.reset=function(){var e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)},Object.defineProperty(t.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),t}($e);hh.prototype.grayscale=hh.prototype.greyscale;/*!
 * @pixi/filter-displacement - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ch=function(i,t){return ch=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},ch(i,t)};function TA(i,t){ch(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var EA=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,FA=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,MA=function(i){TA(t,i);function t(e,r){var n=this,o=new Nt;return e.renderable=!1,n=i.call(this,FA,EA,{mapSampler:e._texture,filterMatrix:o,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,n.maskSprite=e,n.maskMatrix=o,r==null&&(r=20),n.scale=new Qt(r,r),n}return t.prototype.apply=function(e,r,n,o){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var s=this.maskSprite.worldTransform,a=Math.sqrt(s.a*s.a+s.b*s.b),l=Math.sqrt(s.c*s.c+s.d*s.d);a!==0&&l!==0&&(this.uniforms.rotation[0]=s.a/a,this.uniforms.rotation[1]=s.b/a,this.uniforms.rotation[2]=s.c/l,this.uniforms.rotation[3]=s.d/l),e.applyFilter(this,r,n,o)},Object.defineProperty(t.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e},enumerable:!1,configurable:!0}),t}($e);/*!
 * @pixi/filter-fxaa - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var fh=function(i,t){return fh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},fh(i,t)};function DA(i,t){fh(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var BA=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputPixel;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,LA=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputPixel;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,RA=function(i){DA(t,i);function t(){return i.call(this,BA,LA)||this}return t}($e);/*!
 * @pixi/filter-noise - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var dh=function(i,t){return dh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},dh(i,t)};function ZA(i,t){dh(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var OA=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,GA=function(i){ZA(t,i);function t(e,r){e===void 0&&(e=.5),r===void 0&&(r=Math.random());var n=i.call(this,zh,OA,{uNoise:0,uSeed:0})||this;return n.noise=e,n.seed=r,n}return Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e},enumerable:!1,configurable:!0}),t}($e);/*!
 * @pixi/mixin-cache-as-bitmap - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ov=new Nt;jt.prototype._cacheAsBitmap=!1;jt.prototype._cacheData=null;var NA=function(){function i(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return i}();Object.defineProperties(jt.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(i){if(this._cacheAsBitmap!==i){this._cacheAsBitmap=i;var t;i?(this._cacheData||(this._cacheData=new NA),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}});jt.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};jt.prototype._initCachedDisplayObject=function(t){if(!(this._cacheData&&this._cacheData.sprite)){var e=this.alpha;this.alpha=1,t.batch.flush();var r=this.getLocalBounds(null,!0).clone();if(this.filters){var n=this.filters[0].padding;r.pad(n)}r.ceil(ht.RESOLUTION);var o=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),a=t.projection.transform,l=Gr.create({width:r.width,height:r.height}),c="cacheAsBitmap_"+Or();this._cacheData.textureCacheId=c,Tt.addToCache(l.baseTexture,c),It.addToCache(l,c);var d=this.transform.localTransform.copyTo(ov).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,l,!0,d,!1),t.projection.transform=a,t.renderTexture.bind(o,s),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var g=new Fi(l);g.transform.worldTransform=this.transform.worldTransform,g.anchor.x=-(r.x/r.width),g.anchor.y=-(r.y/r.height),g.alpha=e,g._bounds=this._bounds,this._cacheData.sprite=g,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=g.containsPoint.bind(g)}};jt.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};jt.prototype._initCachedDisplayObjectCanvas=function(t){if(!(this._cacheData&&this._cacheData.sprite)){var e=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;var n=t.context,o=t._projTransform;e.ceil(ht.RESOLUTION);var s=Gr.create({width:e.width,height:e.height}),a="cacheAsBitmap_"+Or();this._cacheData.textureCacheId=a,Tt.addToCache(s.baseTexture,a),It.addToCache(s,a);var l=ov;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,s,!0,l,!1),t.context=n,t._projTransform=o,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var c=new Fi(s);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(e.x/e.width),c.anchor.y=-(e.y/e.height),c.alpha=r,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)}};jt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};jt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};jt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Tt.removeFromCache(this._cacheData.textureCacheId),It.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};jt.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};/*!
 * @pixi/mixin-get-child-by-name - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */jt.prototype.name=null;Ee.prototype.getChildByName=function(t,e){for(var r=0,n=this.children.length;r<n;r++)if(this.children[r].name===t)return this.children[r];if(e)for(var r=0,n=this.children.length;r<n;r++){var o=this.children[r];if(o.getChildByName){var s=this.children[r].getChildByName(t,!0);if(s)return s}}return null};/*!
 * @pixi/mixin-get-global-position - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */jt.prototype.getGlobalPosition=function(t,e){return t===void 0&&(t=new Qt),e===void 0&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};/*!
 * @pixi/mesh-extras - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var gh=function(i,t){return gh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},gh(i,t)};function Mi(i,t){gh(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var sv=function(i){Mi(t,i);function t(e,r,n,o){e===void 0&&(e=100),r===void 0&&(r=100),n===void 0&&(n=10),o===void 0&&(o=10);var s=i.call(this)||this;return s.segWidth=n,s.segHeight=o,s.width=e,s.height=r,s.build(),s}return t.prototype.build=function(){for(var e=this.segWidth*this.segHeight,r=[],n=[],o=[],s=this.segWidth-1,a=this.segHeight-1,l=this.width/s,c=this.height/a,d=0;d<e;d++){var g=d%this.segWidth,u=d/this.segWidth|0;r.push(g*l,u*c),n.push(g/s,u/a)}for(var h=s*a,d=0;d<h;d++){var f=d%s,v=d/s|0,m=v*this.segWidth+f,y=v*this.segWidth+f+1,I=(v+1)*this.segWidth+f,p=(v+1)*this.segWidth+f+1;o.push(m,y,I,y,p,I)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(o),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},t}(wn),av=function(i){Mi(t,i);function t(e,r,n){e===void 0&&(e=200),n===void 0&&(n=0);var o=i.call(this,new Float32Array(r.length*4),new Float32Array(r.length*4),new Uint16Array((r.length-1)*6))||this;return o.points=r,o._width=e,o.textureScale=n,o.build(),o}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),t.prototype.build=function(){var e=this.points;if(e){var r=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),o=this.getIndex();if(!(e.length<1)){r.data.length/4!==e.length&&(r.data=new Float32Array(e.length*4),n.data=new Float32Array(e.length*4),o.data=new Uint16Array((e.length-1)*6));var s=n.data,a=o.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;for(var l=0,c=e[0],d=this._width*this.textureScale,g=e.length,u=0;u<g;u++){var h=u*4;if(this.textureScale>0){var f=c.x-e[u].x,v=c.y-e[u].y,m=Math.sqrt(f*f+v*v);c=e[u],l+=m/d}else l=u/(g-1);s[h]=l,s[h+1]=0,s[h+2]=l,s[h+3]=1}for(var y=0,u=0;u<g-1;u++){var h=u*2;a[y++]=h,a[y++]=h+1,a[y++]=h+2,a[y++]=h+2,a[y++]=h+1,a[y++]=h+3}n.update(),o.update(),this.updateVertices()}}},t.prototype.updateVertices=function(){var e=this.points;if(!(e.length<1)){for(var r=e[0],n,o=0,s=0,a=this.buffers[0].data,l=e.length,c=0;c<l;c++){var d=e[c],g=c*4;c<e.length-1?n=e[c+1]:n=d,s=-(n.x-r.x),o=n.y-r.y;var u=Math.sqrt(o*o+s*s),h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;o/=u,s/=u,o*=h,s*=h,a[g]=d.x+o,a[g+1]=d.y+s,a[g+2]=d.x-o,a[g+3]=d.y-s,r=d}this.buffers[0].update()}},t.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},t}(wn),jA=function(i){Mi(t,i);function t(e,r,n){n===void 0&&(n=0);var o=this,s=new av(e.height,r,n),a=new bn(e);return n>0&&(e.baseTexture.wrapMode=ze.REPEAT),o=i.call(this,s,a)||this,o.autoUpdate=!0,o}return t.prototype._render=function(e){var r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),i.prototype._render.call(this,e)},t}(mi),uv=function(i){Mi(t,i);function t(e,r,n){var o=this,s=new sv(e.width,e.height,r,n),a=new bn(It.WHITE);return o=i.call(this,s,a)||this,o.texture=e,o}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var e=this.geometry;e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build()},Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),t.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),i.prototype._render.call(this,e)},t}(mi),WA=function(i){Mi(t,i);function t(e,r,n,o,s){e===void 0&&(e=It.EMPTY);var a=this,l=new wn(r,n,o);l.getBuffer("aVertexPosition").static=!1;var c=new bn(e);return a=i.call(this,l,c,null,s)||this,a.autoUpdate=!0,a}return Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),i.prototype._render.call(this,e)},t}(mi),bo=10,XA=function(i){Mi(t,i);function t(e,r,n,o,s){r===void 0&&(r=bo),n===void 0&&(n=bo),o===void 0&&(o=bo),s===void 0&&(s=bo);var a=i.call(this,It.WHITE,4,4)||this;return a._origWidth=e.orig.width,a._origHeight=e.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=r,a._rightWidth=o,a._topHeight=n,a._bottomHeight=s,a.texture=e,a}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype.updateHorizontalVertices=function(){var e=this.vertices,r=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*r,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*r,e[25]=e[27]=e[29]=e[31]=this._height},t.prototype.updateVerticalVertices=function(){var e=this.vertices,r=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*r,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*r,e[6]=e[14]=e[22]=e[30]=this._width},t.prototype._getMinScale=function(){var e=this._leftWidth+this._rightWidth,r=this._width>e?1:this._width/e,n=this._topHeight+this._bottomHeight,o=this._height>n?1:this._height/n,s=Math.min(r,o);return s},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topHeight",{get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()},enumerable:!1,configurable:!0}),t.prototype._refresh=function(){var e=this.texture,r=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var n=1/this._origWidth,o=1/this._origHeight;r[0]=r[8]=r[16]=r[24]=0,r[1]=r[3]=r[5]=r[7]=0,r[6]=r[14]=r[22]=r[30]=1,r[25]=r[27]=r[29]=r[31]=1,r[2]=r[10]=r[18]=r[26]=n*this._leftWidth,r[4]=r[12]=r[20]=r[28]=1-n*this._rightWidth,r[9]=r[11]=r[13]=r[15]=o*this._topHeight,r[17]=r[19]=r[21]=r[23]=1-o*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},t}(uv);/*!
 * @pixi/sprite-animated - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ph=function(i,t){return ph=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},ph(i,t)};function kA(i,t){ph(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var HA=function(i){kA(t,i);function t(e,r){r===void 0&&(r=!0);var n=i.call(this,e[0]instanceof It?e[0]:e[0].texture)||this;return n._textures=null,n._durations=null,n._autoUpdate=r,n._isConnectedToTicker=!1,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n._playing=!1,n._previousFrame=null,n.textures=e,n}return t.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Jt.shared.remove(this.update,this),this._isConnectedToTicker=!1))},t.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Jt.shared.add(this.update,this,Ze.HIGH),this._isConnectedToTicker=!0))},t.prototype.gotoAndStop=function(e){this.stop();var r=this.currentFrame;this._currentTime=e,r!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(e){var r=this.currentFrame;this._currentTime=e,r!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(e){var r=this.animationSpeed*e,n=this.currentFrame;if(this._durations!==null){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=r/60*1e3;o<0;)this._currentTime--,o+=this._durations[this.currentFrame];var s=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n?this.onLoop():this.animationSpeed<0&&this.currentFrame>n&&this.onLoop()),this.updateTexture())},t.prototype.updateTexture=function(){var e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},t.prototype.destroy=function(e){this.stop(),i.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},t.fromFrames=function(e){for(var r=[],n=0;n<e.length;++n)r.push(It.from(e[n]));return new t(r)},t.fromImages=function(e){for(var r=[],n=0;n<e.length;++n)r.push(It.from(e[n]));return new t(r)},Object.defineProperty(t.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textures",{get:function(){return this._textures},set:function(e){if(e[0]instanceof It)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var r=0;r<e.length;r++)this._textures.push(e[r].texture),this._durations.push(e[r].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Jt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Jt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),t}(Fi);/*!
 * pixi.js - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ih=function(i,t){return Ih=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},Ih(i,t)};function Cd(i,t){Ih(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var ut="5.0.0";function YA(){var i=this;Object.defineProperties(i,{SVG_SIZE:{get:function(){return it(ut,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),i.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return it(ut,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),i.Transform}},TransformBase:{get:function(){return it(ut,"PIXI.TransformBase class has been removed, use PIXI.Transform"),i.Transform}},TRANSFORM_MODE:{get:function(){return it(ut,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return it(ut,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),i.Renderer}},CanvasRenderTarget:{get:function(){return it(ut,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),i.utils.CanvasRenderTarget}},loader:{get:function(){return it(ut,"PIXI.loader instance has moved to PIXI.Loader.shared"),i.Loader.shared}},FilterManager:{get:function(){return it(ut,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),i.systems.FilterSystem}},CanvasTinter:{get:function(){return it("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),i.canvasUtils}},GroupD8:{get:function(){return it("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),i.groupD8}}}),i.accessibility={},Object.defineProperties(i.accessibility,{AccessibilityManager:{get:function(){return it("5.3.0","PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager"),i.AccessibilityManager}}}),i.interaction={},Object.defineProperties(i.interaction,{InteractionManager:{get:function(){return it("5.3.0","PIXI.interaction.InteractionManager moved to PIXI.InteractionManager"),i.InteractionManager}},InteractionData:{get:function(){return it("5.3.0","PIXI.interaction.InteractionData moved to PIXI.InteractionData"),i.InteractionData}},InteractionEvent:{get:function(){return it("5.3.0","PIXI.interaction.InteractionEvent moved to PIXI.InteractionEvent"),i.InteractionEvent}}}),i.prepare={},Object.defineProperties(i.prepare,{BasePrepare:{get:function(){return it("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"),i.BasePrepare}},Prepare:{get:function(){return it("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare"),i.Prepare}},CanvasPrepare:{get:function(){return it("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"),i.CanvasPrepare}}}),i.extract={},Object.defineProperties(i.extract,{Extract:{get:function(){return it("5.2.1","PIXI.extract.Extract moved to PIXI.Extract"),i.Extract}},CanvasExtract:{get:function(){return it("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"),i.CanvasExtract}}}),i.extras={},Object.defineProperties(i.extras,{TilingSprite:{get:function(){return it(ut,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),i.TilingSprite}},TilingSpriteRenderer:{get:function(){return it(ut,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),i.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return it(ut,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),i.AnimatedSprite}},BitmapText:{get:function(){return it(ut,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),i.BitmapText}}}),i.TilingSprite.fromFrame=function(u,h,f){return it("5.3.0","TilingSprite.fromFrame is deprecated, use TilingSprite.from"),i.TilingSprite.from(u,{width:h,height:f})},i.TilingSprite.fromImage=function(u,h,f,v){return v===void 0&&(v={}),it("5.3.0","TilingSprite.fromImage is deprecated, use TilingSprite.from"),v&&typeof v!="object"&&(v={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),v.width=h,v.height=f,i.TilingSprite.from(u,v)},Object.defineProperties(i.utils,{getSvgSize:{get:function(){return it(ut,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),i.resources.SVGResource.getSize}}}),i.mesh={},Object.defineProperties(i.mesh,{Mesh:{get:function(){return it(ut,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),i.SimpleMesh}},NineSlicePlane:{get:function(){return it(ut,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),i.NineSlicePlane}},Plane:{get:function(){return it(ut,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),i.SimplePlane}},Rope:{get:function(){return it(ut,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),i.SimpleRope}},RawMesh:{get:function(){return it(ut,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),i.Mesh}},CanvasMeshRenderer:{get:function(){return it(ut,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),i.CanvasMeshRenderer}},MeshRenderer:{get:function(){return it(ut,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),i.MeshRenderer}}}),i.particles={},Object.defineProperties(i.particles,{ParticleContainer:{get:function(){return it(ut,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),i.ParticleContainer}},ParticleRenderer:{get:function(){return it(ut,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),i.ParticleRenderer}}}),i.ticker={},Object.defineProperties(i.ticker,{Ticker:{get:function(){return it(ut,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),i.Ticker}},shared:{get:function(){return it(ut,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),i.Ticker.shared}}}),i.loaders={},Object.defineProperties(i.loaders,{Loader:{get:function(){return it(ut,"PIXI.loaders.Loader class has moved to PIXI.Loader"),i.Loader}},Resource:{get:function(){return it(ut,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),i.LoaderResource}},bitmapFontParser:{get:function(){return it(ut,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),i.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){it(ut,"PIXI.loaders.parseBitmapFontData function has removed")}},spritesheetParser:{get:function(){return it(ut,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),i.SpritesheetLoader.use}},getResourcePath:{get:function(){return it(ut,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),i.SpritesheetLoader.getResourcePath}}}),i.Loader.addPixiMiddleware=function(u){return it(ut,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),i.loaders.Loader.registerPlugin({use:u()})};var t=function(g){return"on"+g.charAt(0).toUpperCase()+g.slice(1)};Object.assign(i.Loader.prototype,{on:function(g){var u=t(g);it(ut,"PIXI.Loader#on is completely deprecated, use PIXI.Loader#"+u+".add")},once:function(g){var u=t(g);it(ut,"PIXI.Loader#once is completely deprecated, use PIXI.Loader#"+u+".once")},off:function(g){var u=t(g);it(ut,"PIXI.Loader#off is completely deprecated, use PIXI.Loader#"+u+".detach")}}),Object.defineProperty(i.extract,"WebGLExtract",{get:function(){return it(ut,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract"),i.Extract}}),Object.defineProperty(i.prepare,"WebGLPrepare",{get:function(){return it(ut,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"),i.Prepare}}),i.Container.prototype._renderWebGL=function(u){it(ut,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(u)},i.Container.prototype.renderWebGL=function(u){it(ut,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(u)},i.DisplayObject.prototype.renderWebGL=function(u){it(ut,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(u)},i.Container.prototype.renderAdvancedWebGL=function(u){it(ut,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(u)},Object.defineProperties(i.settings,{TRANSFORM_MODE:{get:function(){return it(ut,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){it(ut,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var e=i.BaseTexture;e.prototype.loadSource=function(u){it(ut,"PIXI.BaseTexture.loadSource method has been deprecated");var h=i.resources.autoDetectResource(u);h.internal=!0,this.setResource(h),this.update()};var r=!1;Object.defineProperties(e.prototype,{hasLoaded:{get:function(){return it(ut,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){var g;return it(ut,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),(g=this.resource)===null||g===void 0?void 0:g.url},set:function(g){it(ut,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=g)}},source:{get:function(){return it(ut,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource.source},set:function(g){it(ut,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=g)}},premultiplyAlpha:{get:function(){return it("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode!==0},set:function(g){it("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(g)}},_id:{get:function(){return r||(it("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),r=!0),this._batchLocation},set:function(g){this._batchLocation=g}}}),e.fromImage=function(u,h,f,v){it(ut,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");var m={scale:v,crossorigin:h};return e.from(u,{scaleMode:f,resourceOptions:m})},e.fromCanvas=function(u,h){return it(ut,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),e.from(u,{scaleMode:h})},e.fromSVG=function(u,h,f,v){it(ut,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");var m={scale:v,crossorigin:h};return e.from(u,{scaleMode:f,resourceOptions:m})},Object.defineProperties(i.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){return it("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode!==0},set:function(g){it("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(g)}}}),i.Point.prototype.copy=function(u){return it(ut,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(u)},i.ObservablePoint.prototype.copy=function(u){return it(ut,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(u)},i.Rectangle.prototype.copy=function(u){return it(ut,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(u)},i.Matrix.prototype.copy=function(u){return it(ut,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(u)},i.systems.StateSystem.prototype.setState=function(u){return it("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(u)},Object.assign(i.systems.FilterSystem.prototype,{getRenderTarget:function(g,u){return it(ut,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(null,u)},returnRenderTarget:function(g){it(ut,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(g)},calculateScreenSpaceMatrix:function(g){it(ut,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var u=g.identity(),h=this.activeState,f=h.sourceFrame,v=h.destinationFrame;return u.translate(f.x/v.width,f.y/v.height),u.scale(v.width,v.height),u},calculateNormalizedScreenSpaceMatrix:function(g){it(ut,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var u=this.activeState,h=u.sourceFrame,f=u.destinationFrame,v=g.identity();v.translate(h.x/f.width,h.y/f.height);var m=f.width/h.width,y=f.height/h.height;return v.scale(m,y),v}}),Object.defineProperties(i.RenderTexture.prototype,{sourceFrame:{get:function(){return it(ut,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return it(ut,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var n=function(g){Cd(u,g);function u(h,f,v,m){var y=this;return it(ut,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),y=g.call(this,!0,h,f,v,m)||this,y}return u}(i.filters.BlurFilterPass),o=function(g){Cd(u,g);function u(h,f,v,m){var y=this;return it(ut,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),y=g.call(this,!1,h,f,v,m)||this,y}return u}(i.filters.BlurFilterPass);Object.assign(i.filters,{BlurXFilter:n,BlurYFilter:o});var s=i.Sprite,a=i.Texture,l=i.Graphics;l.prototype.generateCanvasTexture||(l.prototype.generateCanvasTexture=function(){it(ut,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(l.prototype,"graphicsData",{get:function(){return it(ut,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}});function c(g,u,h,f){return it(ut,"PIXI.Sprite."+g+" method is deprecated, use PIXI.Sprite.from"),s.from(u,{resourceOptions:{scale:f,crossorigin:h}})}s.fromImage=c.bind(null,"fromImage"),s.fromSVG=c.bind(null,"fromSVG"),s.fromCanvas=c.bind(null,"fromCanvas"),s.fromVideo=c.bind(null,"fromVideo"),s.fromFrame=c.bind(null,"fromFrame");function d(g,u,h,f){return it(ut,"PIXI.Texture."+g+" method is deprecated, use PIXI.Texture.from"),a.from(u,{resourceOptions:{scale:f,crossorigin:h}})}a.fromImage=d.bind(null,"fromImage"),a.fromSVG=d.bind(null,"fromSVG"),a.fromCanvas=d.bind(null,"fromCanvas"),a.fromVideo=d.bind(null,"fromVideo"),a.fromFrame=d.bind(null,"fromFrame"),Object.defineProperty(i.AbstractRenderer.prototype,"autoResize",{get:function(){return it(ut,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(g){it(ut,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=g}}),Object.defineProperty(i.Renderer.prototype,"textureManager",{get:function(){return it(ut,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),i.utils.mixins={mixin:function(){it(ut,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){it(ut,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){it(ut,"PIXI.utils.mixins.performMixins function is no longer available")}},Object.defineProperty(i.BitmapText.prototype,"font",{get:function(){return it("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),{name:this._fontName,size:this._fontSize,tint:this._tint,align:this._align}},set:function(g){if(it("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),!!g){var u={font:g};this._upgradeStyle(u),u.fontSize=u.fontSize||i.BitmapFont.available[u.fontName].size,this._fontName=u.fontName,this._fontSize=u.fontSize,this.dirty=!0}}})}Ke.registerPlugin("accessibility",jp);Ke.registerPlugin("extract",DI);Ke.registerPlugin("interaction",Hp);Ke.registerPlugin("particle",GI);Ke.registerPlugin("prepare",QI);Ke.registerPlugin("batch",MI);Ke.registerPlugin("tilingSprite",tv);Nr.registerPlugin(iv);Nr.registerPlugin(KI);Ei.registerPlugin(Wp);Ei.registerPlugin(ZI);var UA="5.3.3",zA={AlphaFilter:mA,BlurFilter:xA,BlurFilterPass:uh,ColorMatrixFilter:hh,DisplacementFilter:MA,FXAAFilter:RA,NoiseFilter:GA};const VA=Object.freeze(Object.defineProperty({__proto__:null,get ALPHA_MODES(){return Je},AbstractBatchRenderer:TI,AbstractRenderer:wI,AccessibilityManager:jp,AnimatedSprite:HA,AppLoaderPlugin:ZI,Application:Ei,Attribute:Yl,get BLEND_MODES(){return ct},get BUFFER_BITS(){return un},BasePrepare:VI,BaseRenderTexture:qi,BaseTexture:Tt,BatchDrawCall:Jo,BatchGeometry:Vh,BatchPluginFactory:FI,BatchRenderer:MI,BatchShaderGenerator:EI,BatchTextureArray:Qo,BitmapFont:ir,BitmapFontData:fn,BitmapFontLoader:iv,BitmapText:IA,Bounds:cn,Buffer:Vt,get CLEAR_MODES(){return Pe},Circle:Rp,Container:Ee,CountLimiter:zI,DEG_TO_RAD:Lp,get DRAW_MODES(){return ye},DisplayObject:jt,get ENV(){return Re},Ellipse:Zp,Extract:DI,get FORMATS(){return di},FillStyle:Jh,Filter:$e,FilterState:qp,Framebuffer:Vo,get GC_MODES(){return Uo},GLFramebuffer:iI,GLProgram:mI,GLTexture:Oo,GRAPHICS_CURVES:vi,Geometry:Ti,Graphics:$h,GraphicsData:ql,GraphicsGeometry:YI,IGLUniformData:lC,InteractionData:Xl,InteractionEvent:Xp,InteractionManager:Hp,InteractionTrackingData:Ro,get LINE_CAP(){return Ye},get LINE_JOIN(){return jr},LineStyle:UI,Loader:Nr,LoaderResource:tn,get MASK_TYPES(){return oe},get MIPMAP_MODES(){return gi},get MSAA_QUALITY(){return Rr},MaskData:sI,Matrix:Nt,Mesh:mi,MeshBatchUvs:ev,MeshGeometry:wn,MeshMaterial:bn,NineSlicePlane:XA,ObjectRenderer:Cn,ObservablePoint:Fr,PI_2:pi,get PRECISION(){return Te},ParticleContainer:RC,ParticleRenderer:GI,PlaneGeometry:sv,Point:Qt,Polygon:si,Prepare:QI,Program:An,Quad:Kp,QuadUv:Uh,RAD_TO_DEG:Bp,get RENDERER_TYPE(){return fi},Rectangle:bt,RenderTexture:Gr,RenderTexturePool:Qp,Renderer:Ke,RopeGeometry:av,RoundedRectangle:Op,Runner:qt,get SCALE_MODES(){return Se},get SHAPES(){return Lt},Shader:ur,SimpleMesh:WA,SimplePlane:uv,SimpleRope:jA,Sprite:Fi,SpriteMaskFilter:fI,Spritesheet:$I,SpritesheetLoader:KI,State:pr,System:le,get TARGETS(){return sr},get TEXT_GRADIENT(){return yi},get TYPES(){return Gt},TemporaryDisplayObject:jh,Text:Kh,TextMetrics:Ce,TextStyle:Wr,Texture:It,TextureLoader:RI,TextureMatrix:ps,TextureUvs:Yh,Ticker:Jt,TickerPlugin:Wp,TilingSprite:sA,TilingSpriteRenderer:tv,TimeLimiter:oA,Transform:Gh,get UPDATE_PRIORITY(){return Ze},UniformGroup:ar,VERSION:UA,ViewableBuffer:SI,get WRAP_MODES(){return ze},accessibleTarget:Np,autoDetectRenderer:xI,checkMaxIfStatementsInShader:cI,defaultFilterVertex:zh,defaultVertex:PI,filters:zA,graphicsUtils:jC,groupD8:Mt,interactiveTarget:kp,isMobile:ve,resources:Z_,settings:ht,systems:vC,uniformParsers:Zo,useDeprecated:YA,utils:w_},Symbol.toStringTag,{value:"Module"}));var JA=function(){this.pointsToAvoid={},this.startX,this.callback,this.startY,this.endX,this.endY,this.nodeHash={},this.openList},QA=function(i,t,e,r,n){this.parent=i,this.x=t,this.y=e,this.costSoFar=r,this.simpleDistanceToTarget=n,this.bestGuessDistance=function(){return this.costSoFar+this.simpleDistanceToTarget}},lv={exports:{}};(function(i,t){(function(){var e,r,n,o,s,a,l,c,d,g,u,h,f,v,m;n=Math.floor,g=Math.min,r=function(y,I){return y<I?-1:y>I?1:0},d=function(y,I,p,_,A){var b;if(p==null&&(p=0),A==null&&(A=r),p<0)throw new Error("lo must be non-negative");for(_==null&&(_=y.length);p<_;)b=n((p+_)/2),A(I,y[b])<0?_=b:p=b+1;return[].splice.apply(y,[p,p-p].concat(I)),I},a=function(y,I,p){return p==null&&(p=r),y.push(I),v(y,0,y.length-1,p)},s=function(y,I){var p,_;return I==null&&(I=r),p=y.pop(),y.length?(_=y[0],y[0]=p,m(y,0,I)):_=p,_},c=function(y,I,p){var _;return p==null&&(p=r),_=y[0],y[0]=I,m(y,0,p),_},l=function(y,I,p){var _;return p==null&&(p=r),y.length&&p(y[0],I)<0&&(_=[y[0],I],I=_[0],y[0]=_[1],m(y,0,p)),I},o=function(y,I){var p,_,A,b,P,E;for(I==null&&(I=r),b=function(){E=[];for(var C=0,T=n(y.length/2);0<=T?C<T:C>T;0<=T?C++:C--)E.push(C);return E}.apply(this).reverse(),P=[],_=0,A=b.length;_<A;_++)p=b[_],P.push(m(y,p,I));return P},f=function(y,I,p){var _;if(p==null&&(p=r),_=y.indexOf(I),_!==-1)return v(y,0,_,p),m(y,_,p)},u=function(y,I,p){var _,A,b,P,E;if(p==null&&(p=r),A=y.slice(0,I),!A.length)return A;for(o(A,p),E=y.slice(I),b=0,P=E.length;b<P;b++)_=E[b],l(A,_,p);return A.sort(p).reverse()},h=function(y,I,p){var _,A,b,P,E,C,T,F,Z;if(p==null&&(p=r),I*10<=y.length){if(b=y.slice(0,I).sort(p),!b.length)return b;for(A=b[b.length-1],T=y.slice(I),P=0,C=T.length;P<C;P++)_=T[P],p(_,A)<0&&(d(b,_,0,null,p),b.pop(),A=b[b.length-1]);return b}for(o(y,p),Z=[],E=0,F=g(I,y.length);0<=F?E<F:E>F;0<=F?++E:--E)Z.push(s(y,p));return Z},v=function(y,I,p,_){var A,b,P;for(_==null&&(_=r),A=y[p];p>I;){if(P=p-1>>1,b=y[P],_(A,b)<0){y[p]=b,p=P;continue}break}return y[p]=A},m=function(y,I,p){var _,A,b,P,E;for(p==null&&(p=r),A=y.length,E=I,b=y[I],_=2*I+1;_<A;)P=_+1,P<A&&!(p(y[_],y[P])<0)&&(_=P),y[I]=y[_],I=_,_=2*I+1;return y[I]=b,v(y,E,I,p)},e=function(){y.push=a,y.pop=s,y.replace=c,y.pushpop=l,y.heapify=o,y.updateItem=f,y.nlargest=u,y.nsmallest=h;function y(I){this.cmp=I??r,this.nodes=[]}return y.prototype.push=function(I){return a(this.nodes,I,this.cmp)},y.prototype.pop=function(){return s(this.nodes,this.cmp)},y.prototype.peek=function(){return this.nodes[0]},y.prototype.contains=function(I){return this.nodes.indexOf(I)!==-1},y.prototype.replace=function(I){return c(this.nodes,I,this.cmp)},y.prototype.pushpop=function(I){return l(this.nodes,I,this.cmp)},y.prototype.heapify=function(){return o(this.nodes,this.cmp)},y.prototype.updateItem=function(I){return f(this.nodes,I,this.cmp)},y.prototype.clear=function(){return this.nodes=[]},y.prototype.empty=function(){return this.nodes.length===0},y.prototype.size=function(){return this.nodes.length},y.prototype.clone=function(){var I;return I=new y,I.nodes=this.nodes.slice(0),I},y.prototype.toArray=function(){return this.nodes.slice(0)},y.prototype.insert=y.prototype.push,y.prototype.top=y.prototype.peek,y.prototype.front=y.prototype.peek,y.prototype.has=y.prototype.contains,y.prototype.copy=y.prototype.clone,y}(),function(y,I){return i.exports=I()}(this,function(){return e})}).call(W)})(lv);var $A=lv.exports,KA=$A,zt={},qA=JA,tb=QA,eb=KA;const rb=0,ib=1;var nb=zt,ob=1;zt.js=function(){var i=1,t=1.4,e=!1,r={},n,o={},s={},a={},l=!0,c,d={},g=[],u=Number.MAX_VALUE,h,f=!1;this.setAcceptableTiles=function(A){A instanceof Array?h=A:!isNaN(parseFloat(A))&&isFinite(A)&&(h=[A])},this.enableSync=function(){e=!0},this.disableSync=function(){e=!1},this.enableDiagonals=function(){f=!0},this.disableDiagonals=function(){f=!1},this.setGrid=function(A){n=A;for(var b=0;b<n.length;b++)for(var P=0;P<n[0].length;P++)o[n[b][P]]||(o[n[b][P]]=1)},this.setTileCost=function(A,b){o[A]=b},this.setAdditionalPointCost=function(A,b,P){s[b]===void 0&&(s[b]={}),s[b][A]=P},this.removeAdditionalPointCost=function(A,b){s[b]!==void 0&&delete s[b][A]},this.removeAllAdditionalPointCosts=function(){s={}},this.setDirectionalCondition=function(A,b,P){a[b]===void 0&&(a[b]={}),a[b][A]=P},this.removeAllDirectionalConditions=function(){a={}},this.setIterationsPerCalculation=function(A){u=A},this.avoidAdditionalPoint=function(A,b){r[b]===void 0&&(r[b]={}),r[b][A]=1},this.stopAvoidingAdditionalPoint=function(A,b){r[b]!==void 0&&delete r[b][A]},this.enableCornerCutting=function(){l=!0},this.disableCornerCutting=function(){l=!1},this.stopAvoidingAllAdditionalPoints=function(){r={}},this.findPath=function(A,b,P,E,C){var T=function(U){e?C(U):setTimeout(function(){C(U)})};if(h===void 0)throw new Error("You can't set a path without first calling setAcceptableTiles() on EasyStar.");if(n===void 0)throw new Error("You can't set a path without first calling setGrid() on EasyStar.");if(A<0||b<0||P<0||E<0||A>n[0].length-1||b>n.length-1||P>n[0].length-1||E>n.length-1)throw new Error("Your start or end point is outside the scope of your grid.");if(A===P&&b===E){T([]);return}for(var F=n[E][P],Z=!1,O=0;O<h.length;O++)if(F===h[O]){Z=!0;break}if(Z===!1){T(null);return}var H=new qA;H.openList=new eb(function(U,k){return U.bestGuessDistance()-k.bestGuessDistance()}),H.isDoneCalculating=!1,H.nodeHash={},H.startX=A,H.startY=b,H.endX=P,H.endY=E,H.callback=T,H.openList.push(p(H,H.startX,H.startY,null,i));var X=ob++;return d[X]=H,g.push(X),X},this.cancelPath=function(A){return A in d?(delete d[A],!0):!1},this.calculate=function(){if(!(g.length===0||n===void 0||h===void 0))for(c=0;c<u;c++){if(g.length===0)return;e&&(c=0);var A=g[0],b=d[A];if(typeof b>"u"){g.shift();continue}if(b.openList.size()===0){b.callback(null),delete d[A],g.shift();continue}var P=b.openList.pop();if(b.endX===P.x&&b.endY===P.y){var E=[];E.push({x:P.x,y:P.y});for(var C=P.parent;C!=null;)E.push({x:C.x,y:C.y}),C=C.parent;E.reverse();var T=E;b.callback(T),delete d[A],g.shift();continue}P.list=rb,P.y>0&&v(b,P,0,-1,i*I(P.x,P.y-1)),P.x<n[0].length-1&&v(b,P,1,0,i*I(P.x+1,P.y)),P.y<n.length-1&&v(b,P,0,1,i*I(P.x,P.y+1)),P.x>0&&v(b,P,-1,0,i*I(P.x-1,P.y)),f&&(P.x>0&&P.y>0&&(l||m(n,h,P.x,P.y-1,P)&&m(n,h,P.x-1,P.y,P))&&v(b,P,-1,-1,t*I(P.x-1,P.y-1)),P.x<n[0].length-1&&P.y<n.length-1&&(l||m(n,h,P.x,P.y+1,P)&&m(n,h,P.x+1,P.y,P))&&v(b,P,1,1,t*I(P.x+1,P.y+1)),P.x<n[0].length-1&&P.y>0&&(l||m(n,h,P.x,P.y-1,P)&&m(n,h,P.x+1,P.y,P))&&v(b,P,1,-1,t*I(P.x+1,P.y-1)),P.x>0&&P.y<n.length-1&&(l||m(n,h,P.x,P.y+1,P)&&m(n,h,P.x-1,P.y,P))&&v(b,P,-1,1,t*I(P.x-1,P.y+1)))}};var v=function(A,b,P,E,C){var T=b.x+P,F=b.y+E;if((r[F]===void 0||r[F][T]===void 0)&&m(n,h,T,F,b)){var Z=p(A,T,F,b,C);Z.list===void 0?(Z.list=ib,A.openList.push(Z)):b.costSoFar+C<Z.costSoFar&&(Z.costSoFar=b.costSoFar+C,Z.parent=b,A.openList.updateItem(Z))}},m=function(A,b,P,E,C){var T=a[E]&&a[E][P];if(T){var F=y(C.x-P,C.y-E),Z=function(){for(var H=0;H<T.length;H++)if(T[H]===F)return!0;return!1};if(!Z())return!1}for(var O=0;O<b.length;O++)if(A[E][P]===b[O])return!0;return!1},y=function(A,b){if(A===0&&b===-1)return zt.TOP;if(A===1&&b===-1)return zt.TOP_RIGHT;if(A===1&&b===0)return zt.RIGHT;if(A===1&&b===1)return zt.BOTTOM_RIGHT;if(A===0&&b===1)return zt.BOTTOM;if(A===-1&&b===1)return zt.BOTTOM_LEFT;if(A===-1&&b===0)return zt.LEFT;if(A===-1&&b===-1)return zt.TOP_LEFT;throw new Error("These differences are not valid: "+A+", "+b)},I=function(A,b){return s[b]&&s[b][A]||o[n[b][A]]},p=function(A,b,P,E,C){if(A.nodeHash[P]!==void 0){if(A.nodeHash[P][b]!==void 0)return A.nodeHash[P][b]}else A.nodeHash[P]={};var T=_(b,P,A.endX,A.endY);if(E!==null)var F=E.costSoFar+C;else F=0;var Z=new tb(E,b,P,F,T);return A.nodeHash[P][b]=Z,Z},_=function(A,b,P,E){if(f){var C=Math.abs(A-P),T=Math.abs(b-E);return C<T?t*C+T:t*T+C}else{var C=Math.abs(A-P),T=Math.abs(b-E);return C+T}}};zt.TOP="TOP";zt.TOP_RIGHT="TOP_RIGHT";zt.RIGHT="RIGHT";zt.BOTTOM_RIGHT="BOTTOM_RIGHT";zt.BOTTOM="BOTTOM";zt.BOTTOM_LEFT="BOTTOM_LEFT";zt.LEFT="LEFT";zt.TOP_LEFT="TOP_LEFT";const sb=vn(nb);var ae={},Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.RoomObject=void 0;class ab{constructor(){this._isDestroyed=!1}setParent(t){if(this._context!=null)throw new Error("RoomObject already provided with a context.");this._isDestroyed=!1,this._context=t,this.registered()}destroy(){this._isDestroyed||(this._isDestroyed=!0,this.roomObjectContainer.removeRoomObject(this),this._context=void 0,this.destroyed())}getRoomContext(){if(this._context==null)throw new Error("Invalid context");return this._context}get mounted(){return this._context!=null}get room(){return this.getRoomContext().room}get configuration(){return this.getRoomContext().configuration}get furnitureLoader(){return this.getRoomContext().furnitureLoader}get animationTicker(){return this.getRoomContext().animationTicker}get roomVisualization(){return this.getRoomContext().visualization}get geometry(){return this.getRoomContext().geometry}get roomObjectContainer(){return this.getRoomContext().roomObjectContainer}get avatarLoader(){return this.getRoomContext().avatarLoader}get eventManager(){return this.getRoomContext().eventManager}get tilemap(){return this.getRoomContext().tilemap}get landscapeContainer(){return this.getRoomContext().landscapeContainer}get application(){return this.getRoomContext().application}}Ir.RoomObject=ab;var vs={},kr={};Object.defineProperty(kr,"__esModule",{value:!0});kr.getZOrder=void 0;function ub(i,t,e){return i*1e3+t*1e3+e}kr.getZOrder=ub;var xn={};const Zt=Kg(VA);var Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.ClickHandler=void 0;class lb{constructor(){this._map=new Map}get onClick(){return this._onClick}set onClick(t){this._onClick=t}get onDoubleClick(){return this._onDoubleClick}set onDoubleClick(t){this._onDoubleClick=t}get onPointerDown(){return this._onPointerDown}set onPointerDown(t){this._onPointerDown=t}get onPointerUp(){return this._onPointerUp}set onPointerUp(t){this._onPointerUp=t}handleClick(t){this._doubleClickInfo==null?(this.onClick&&this.onClick(t),this.onDoubleClick!=null&&this._startDoubleClick(t)):(t.stopPropagation(),this._performDoubleClick(t))}handlePointerDown(t){this.onPointerDown&&this.onPointerDown(t)}handlePointerUp(t){this.onPointerUp&&this.onPointerUp(t)}_performDoubleClick(t){this._doubleClickInfo!=null&&(this.onDoubleClick&&this.onDoubleClick(this._doubleClickInfo.initialEvent),setTimeout(()=>{this._resetDoubleClick()}))}_resetDoubleClick(){this._doubleClickInfo!=null&&(clearTimeout(this._doubleClickInfo.timeout),this._doubleClickInfo=void 0)}_startDoubleClick(t){this._doubleClickInfo={initialEvent:t,timeout:window.setTimeout(()=>this._resetDoubleClick(),350)}}}Pn.ClickHandler=lb;var Sn={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vh=function(i,t){return vh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},vh(i,t)};function _t(i,t){vh(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function gn(i){return typeof i=="function"}var Ad=!1,Ie={Promise:void 0,set useDeprecatedSynchronousErrorHandling(i){if(i){var t=new Error;""+t.stack}Ad=i},get useDeprecatedSynchronousErrorHandling(){return Ad}};function ii(i){setTimeout(function(){throw i},0)}var Ko={closed:!0,next:function(i){},error:function(i){if(Ie.useDeprecatedSynchronousErrorHandling)throw i;ii(i)},complete:function(){}},_e=function(){return Array.isArray||function(i){return i&&typeof i.length=="number"}}();function tc(i){return i!==null&&typeof i=="object"}var hb=function(){function i(t){return Error.call(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(e,r){return r+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t,this}return i.prototype=Object.create(Error.prototype),i}(),en=hb,Ht=function(){function i(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return i.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this,r=e._parentOrParents,n=e._ctorUnsubscribe,o=e._unsubscribe,s=e._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof i)r.remove(this);else if(r!==null)for(var a=0;a<r.length;++a){var l=r[a];l.remove(this)}if(gn(o)){n&&(this._unsubscribe=void 0);try{o.call(this)}catch(g){t=g instanceof en?bd(g.errors):[g]}}if(_e(s))for(var a=-1,c=s.length;++a<c;){var d=s[a];if(tc(d))try{d.unsubscribe()}catch(u){t=t||[],u instanceof en?t=t.concat(bd(u.errors)):t.push(u)}}if(t)throw new en(t)}},i.prototype.add=function(t){var e=t;if(!t)return i.EMPTY;switch(typeof t){case"function":e=new i(t);case"object":if(e===this||e.closed||typeof e.unsubscribe!="function")return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof i)){var r=e;e=new i,e._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var n=e._parentOrParents;if(n===null)e._parentOrParents=this;else if(n instanceof i){if(n===this)return e;e._parentOrParents=[n,this]}else if(n.indexOf(this)===-1)n.push(this);else return e;var o=this._subscriptions;return o===null?this._subscriptions=[e]:o.push(e),e},i.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);r!==-1&&e.splice(r,1)}},i.EMPTY=function(t){return t.closed=!0,t}(new i),i}();function bd(i){return i.reduce(function(t,e){return t.concat(e instanceof en?e.errors:e)},[])}var qo=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),re=function(i){_t(t,i);function t(e,r,n){var o=i.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=Ko;break;case 1:if(!e){o.destination=Ko;break}if(typeof e=="object"){e instanceof t?(o.syncErrorThrowable=e.syncErrorThrowable,o.destination=e,e.add(o)):(o.syncErrorThrowable=!0,o.destination=new wd(o,e));break}default:o.syncErrorThrowable=!0,o.destination=new wd(o,e,r,n);break}return o}return t.prototype[qo]=function(){return this},t.create=function(e,r,n){var o=new t(e,r,n);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,i.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(Ht),wd=function(i){_t(t,i);function t(e,r,n,o){var s=i.call(this)||this;s._parentSubscriber=e;var a,l=s;return gn(r)?a=r:r&&(a=r.next,n=r.error,o=r.complete,r!==Ko&&(l=Object.create(r),gn(l.unsubscribe)&&s.add(l.unsubscribe.bind(l)),l.unsubscribe=s.unsubscribe.bind(s))),s._context=l,s._next=a,s._error=n,s._complete=o,s}return t.prototype.next=function(e){if(!this.isStopped&&this._next){var r=this._parentSubscriber;!Ie.useDeprecatedSynchronousErrorHandling||!r.syncErrorThrowable?this.__tryOrUnsub(this._next,e):this.__tryOrSetError(r,this._next,e)&&this.unsubscribe()}},t.prototype.error=function(e){if(!this.isStopped){var r=this._parentSubscriber,n=Ie.useDeprecatedSynchronousErrorHandling;if(this._error)!n||!r.syncErrorThrowable?(this.__tryOrUnsub(this._error,e),this.unsubscribe()):(this.__tryOrSetError(r,this._error,e),this.unsubscribe());else if(r.syncErrorThrowable)n?(r.syncErrorValue=e,r.syncErrorThrown=!0):ii(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;ii(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};!Ie.useDeprecatedSynchronousErrorHandling||!r.syncErrorThrowable?(this.__tryOrUnsub(n),this.unsubscribe()):(this.__tryOrSetError(r,n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,r){try{e.call(this._context,r)}catch(n){if(this.unsubscribe(),Ie.useDeprecatedSynchronousErrorHandling)throw n;ii(n)}},t.prototype.__tryOrSetError=function(e,r,n){if(!Ie.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{r.call(this._context,n)}catch(o){return Ie.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=o,e.syncErrorThrown=!0,!0):(ii(o),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(re);function ec(i){for(;i;){var t=i,e=t.closed,r=t.destination,n=t.isStopped;if(e||n)return!1;r&&r instanceof re?i=r:i=null}return!0}function cb(i,t,e){if(i){if(i instanceof re)return i;if(i[qo])return i[qo]()}return!i&&!t&&!e?new re(Ko):new re(i,t,e)}var Di=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function pn(i){return i}function fb(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return hv(i)}function hv(i){return i.length===0?pn:i.length===1?i[0]:function(e){return i.reduce(function(r,n){return n(r)},e)}}var mt=function(){function i(t){this._isScalar=!1,t&&(this._subscribe=t)}return i.prototype.lift=function(t){var e=new i;return e.source=this,e.operator=t,e},i.prototype.subscribe=function(t,e,r){var n=this.operator,o=cb(t,e,r);if(n?o.add(n.call(o,this.source)):o.add(this.source||Ie.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),Ie.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},i.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){Ie.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),ec(t)?t.error(e):console.warn(e)}},i.prototype.forEach=function(t,e){var r=this;return e=xd(e),new e(function(n,o){var s;s=r.subscribe(function(a){try{t(a)}catch(l){o(l),s&&s.unsubscribe()}},o,n)})},i.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},i.prototype[Di]=function(){return this},i.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===0?this:hv(t)(this)},i.prototype.toPromise=function(t){var e=this;return t=xd(t),new t(function(r,n){var o;e.subscribe(function(s){return o=s},function(s){return n(s)},function(){return r(o)})})},i.create=function(t){return new i(t)},i}();function xd(i){if(i||(i=Ie.Promise||Promise),!i)throw new Error("no Promise impl found");return i}var db=function(){function i(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return i.prototype=Object.create(Error.prototype),i}(),nr=db,cv=function(i){_t(t,i);function t(e,r){var n=i.call(this)||this;return n.subject=e,n.subscriber=r,n.closed=!1,n}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,r=e.observers;if(this.subject=null,!(!r||r.length===0||e.isStopped||e.closed)){var n=r.indexOf(this.subscriber);n!==-1&&r.splice(n,1)}}},t}(Ht),fv=function(i){_t(t,i);function t(e){var r=i.call(this,e)||this;return r.destination=e,r}return t}(re),Tn=function(i){_t(t,i);function t(){var e=i.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return t.prototype[qo]=function(){return new fv(this)},t.prototype.lift=function(e){var r=new Pd(this,this);return r.operator=e,r},t.prototype.next=function(e){if(this.closed)throw new nr;if(!this.isStopped)for(var r=this.observers,n=r.length,o=r.slice(),s=0;s<n;s++)o[s].next(e)},t.prototype.error=function(e){if(this.closed)throw new nr;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var r=this.observers,n=r.length,o=r.slice(),s=0;s<n;s++)o[s].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new nr;this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),o=0;o<r;o++)n[o].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(e){if(this.closed)throw new nr;return i.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){if(this.closed)throw new nr;return this.hasError?(e.error(this.thrownError),Ht.EMPTY):this.isStopped?(e.complete(),Ht.EMPTY):(this.observers.push(e),new cv(this,e))},t.prototype.asObservable=function(){var e=new mt;return e.source=this,e},t.create=function(e,r){return new Pd(e,r)},t}(mt),Pd=function(i){_t(t,i);function t(e,r){var n=i.call(this)||this;return n.destination=e,n.source=r,n}return t.prototype.next=function(e){var r=this.destination;r&&r.next&&r.next(e)},t.prototype.error=function(e){var r=this.destination;r&&r.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var r=this.source;return r?this.source.subscribe(e):Ht.EMPTY},t}(Tn);function gb(){return function(t){return t.lift(new pb(t))}}var pb=function(){function i(t){this.connectable=t}return i.prototype.call=function(t,e){var r=this.connectable;r._refCount++;var n=new Ib(t,r),o=e.subscribe(n);return n.closed||(n.connection=r.connect()),o},i}(),Ib=function(i){_t(t,i);function t(e,r){var n=i.call(this,e)||this;return n.connectable=r,n}return t.prototype._unsubscribe=function(){var e=this.connectable;if(!e){this.connection=null;return}this.connectable=null;var r=e._refCount;if(r<=0){this.connection=null;return}if(e._refCount=r-1,r>1){this.connection=null;return}var n=this.connection,o=e._connection;this.connection=null,o&&(!n||o===n)&&o.unsubscribe()},t}(re),vb=function(i){_t(t,i);function t(e,r){var n=i.call(this)||this;return n.source=e,n.subjectFactory=r,n._refCount=0,n._isComplete=!1,n}return t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,e=this._connection=new Ht,e.add(this.source.subscribe(new yb(this.getSubject(),this))),e.closed&&(this._connection=null,e=Ht.EMPTY)),e},t.prototype.refCount=function(){return gb()(this)},t}(mt),yb=function(i){_t(t,i);function t(e,r){var n=i.call(this,e)||this;return n.connectable=r,n}return t.prototype._error=function(e){this._unsubscribe(),i.prototype._error.call(this,e)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),i.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var r=e._connection;e._refCount=0,e._subject=null,e._connection=null,r&&r.unsubscribe()}},t}(fv),mb=function(i){_t(t,i);function t(e,r,n){var o=i.call(this)||this;return o.key=e,o.groupSubject=r,o.refCountSubscription=n,o}return t.prototype._subscribe=function(e){var r=new Ht,n=this,o=n.refCountSubscription,s=n.groupSubject;return o&&!o.closed&&r.add(new _b(o)),r.add(s.subscribe(e)),r},t}(mt),_b=function(i){_t(t,i);function t(e){var r=i.call(this)||this;return r.parent=e,e.count++,r}return t.prototype.unsubscribe=function(){var e=this.parent;!e.closed&&!this.closed&&(i.prototype.unsubscribe.call(this),e.count-=1,e.count===0&&e.attemptedToUnsubscribe&&e.unsubscribe())},t}(Ht),Cb=function(i){_t(t,i);function t(e){var r=i.call(this)||this;return r._value=e,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(e){var r=i.prototype._subscribe.call(this,e);return r&&!r.closed&&e.next(this._value),r},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new nr;return this._value},t.prototype.next=function(e){i.prototype.next.call(this,this._value=e)},t}(Tn),Ab=function(i){_t(t,i);function t(e,r){return i.call(this)||this}return t.prototype.schedule=function(e,r){return this},t}(Ht),En=function(i){_t(t,i);function t(e,r){var n=i.call(this,e,r)||this;return n.scheduler=e,n.work=r,n.pending=!1,n}return t.prototype.schedule=function(e,r){if(r===void 0&&(r=0),this.closed)return this;this.state=e;var n=this.id,o=this.scheduler;return n!=null&&(this.id=this.recycleAsyncId(o,n,r)),this.pending=!0,this.delay=r,this.id=this.id||this.requestAsyncId(o,this.id,r),this},t.prototype.requestAsyncId=function(e,r,n){return n===void 0&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,r,n){if(n===void 0&&(n=0),n!==null&&this.delay===n&&this.pending===!1)return r;clearInterval(r)},t.prototype.execute=function(e,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,r);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,r){var n=!1,o=void 0;try{this.work(e)}catch(s){n=!0,o=!!s&&s||new Error(s)}if(n)return this.unsubscribe(),o},t.prototype._unsubscribe=function(){var e=this.id,r=this.scheduler,n=r.actions,o=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,o!==-1&&n.splice(o,1),e!=null&&(this.id=this.recycleAsyncId(r,e,null)),this.delay=null},t}(Ab),bb=function(i){_t(t,i);function t(e,r){var n=i.call(this,e,r)||this;return n.scheduler=e,n.work=r,n}return t.prototype.schedule=function(e,r){return r===void 0&&(r=0),r>0?i.prototype.schedule.call(this,e,r):(this.delay=r,this.state=e,this.scheduler.flush(this),this)},t.prototype.execute=function(e,r){return r>0||this.closed?i.prototype.execute.call(this,e,r):this._execute(e,r)},t.prototype.requestAsyncId=function(e,r,n){return n===void 0&&(n=0),n!==null&&n>0||n===null&&this.delay>0?i.prototype.requestAsyncId.call(this,e,r,n):e.flush(this)},t}(En),yh=function(){function i(t,e){e===void 0&&(e=i.now),this.SchedulerAction=t,this.now=e}return i.prototype.schedule=function(t,e,r){return e===void 0&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},i.now=function(){return Date.now()},i}(),Fn=function(i){_t(t,i);function t(e,r){r===void 0&&(r=yh.now);var n=i.call(this,e,function(){return t.delegate&&t.delegate!==n?t.delegate.now():r()})||this;return n.actions=[],n.active=!1,n.scheduled=void 0,n}return t.prototype.schedule=function(e,r,n){return r===void 0&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(e,r,n):i.prototype.schedule.call(this,e,r,n)},t.prototype.flush=function(e){var r=this.actions;if(this.active){r.push(e);return}var n;this.active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=r.shift());if(this.active=!1,n){for(;e=r.shift();)e.unsubscribe();throw n}},t}(yh),wb=function(i){_t(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t}(Fn),dv=new wb(bb),gv=dv,_i=new mt(function(i){return i.complete()});function rc(i){return i?xb(i):_i}function xb(i){return new mt(function(t){return i.schedule(function(){return t.complete()})})}function lr(i){return i&&typeof i.schedule=="function"}var pv=function(i){return function(t){for(var e=0,r=i.length;e<r&&!t.closed;e++)t.next(i[e]);t.complete()}};function ic(i,t){return new mt(function(e){var r=new Ht,n=0;return r.add(t.schedule(function(){if(n===i.length){e.complete();return}e.next(i[n++]),e.closed||r.add(this.schedule())})),r})}function Mn(i,t){return t?ic(i,t):new mt(pv(i))}function nc(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var e=i[i.length-1];return lr(e)?(i.pop(),ic(i,e)):Mn(i)}function Iv(i,t){return t?new mt(function(e){return t.schedule(Pb,0,{error:i,subscriber:e})}):new mt(function(e){return e.error(i)})}function Pb(i){var t=i.error,e=i.subscriber;e.error(t)}var mh;mh||(mh={});var No=function(){function i(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue=t==="N"}return i.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},i.prototype.do=function(t,e,r){var n=this.kind;switch(n){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},i.prototype.accept=function(t,e,r){return t&&typeof t.next=="function"?this.observe(t):this.do(t,e,r)},i.prototype.toObservable=function(){var t=this.kind;switch(t){case"N":return nc(this.value);case"E":return Iv(this.error);case"C":return rc()}throw new Error("unexpected notification kind value")},i.createNext=function(t){return typeof t<"u"?new i("N",t):i.undefinedValueNotification},i.createError=function(t){return new i("E",void 0,t)},i.createComplete=function(){return i.completeNotification},i.completeNotification=new i("C"),i.undefinedValueNotification=new i("N",void 0),i}(),Sb=function(i){_t(t,i);function t(e,r,n){n===void 0&&(n=0);var o=i.call(this,e)||this;return o.scheduler=r,o.delay=n,o}return t.dispatch=function(e){var r=e.notification,n=e.destination;r.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){var r=this.destination;r.add(this.scheduler.schedule(t.dispatch,this.delay,new Tb(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(No.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(No.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(No.createComplete()),this.unsubscribe()},t}(re),Tb=function(){function i(t,e){this.notification=t,this.destination=e}return i}(),Eb=function(i){_t(t,i);function t(e,r,n){e===void 0&&(e=Number.POSITIVE_INFINITY),r===void 0&&(r=Number.POSITIVE_INFINITY);var o=i.call(this)||this;return o.scheduler=n,o._events=[],o._infiniteTimeWindow=!1,o._bufferSize=e<1?1:e,o._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(o._infiniteTimeWindow=!0,o.next=o.nextInfiniteTimeWindow):o.next=o.nextTimeWindow,o}return t.prototype.nextInfiniteTimeWindow=function(e){if(!this.isStopped){var r=this._events;r.push(e),r.length>this._bufferSize&&r.shift()}i.prototype.next.call(this,e)},t.prototype.nextTimeWindow=function(e){this.isStopped||(this._events.push(new Fb(this._getNow(),e)),this._trimBufferThenGetEvents()),i.prototype.next.call(this,e)},t.prototype._subscribe=function(e){var r=this._infiniteTimeWindow,n=r?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,s=n.length,a;if(this.closed)throw new nr;if(this.isStopped||this.hasError?a=Ht.EMPTY:(this.observers.push(e),a=new cv(this,e)),o&&e.add(e=new Sb(e,o)),r)for(var l=0;l<s&&!e.closed;l++)e.next(n[l]);else for(var l=0;l<s&&!e.closed;l++)e.next(n[l].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),a},t.prototype._getNow=function(){return(this.scheduler||gv).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),r=this._bufferSize,n=this._windowTime,o=this._events,s=o.length,a=0;a<s&&!(e-o[a].time<n);)a++;return s>r&&(a=Math.max(a,s-r)),a>0&&o.splice(0,a),o},t}(Tn),Fb=function(){function i(t,e){this.time=t,this.value=e}return i}(),Dn=function(i){_t(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return t.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),Ht.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),Ht.EMPTY):i.prototype._subscribe.call(this,e)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(e){this.hasCompleted||i.prototype.error.call(this,e)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&i.prototype.next.call(this,this.value),i.prototype.complete.call(this)},t}(Tn),Mb=1,Db=function(){return Promise.resolve()}(),_h={};function Sd(i){return i in _h?(delete _h[i],!0):!1}var Td={setImmediate:function(i){var t=Mb++;return _h[t]=!0,Db.then(function(){return Sd(t)&&i()}),t},clearImmediate:function(i){Sd(i)}},Bb=function(i){_t(t,i);function t(e,r){var n=i.call(this,e,r)||this;return n.scheduler=e,n.work=r,n}return t.prototype.requestAsyncId=function(e,r,n){return n===void 0&&(n=0),n!==null&&n>0?i.prototype.requestAsyncId.call(this,e,r,n):(e.actions.push(this),e.scheduled||(e.scheduled=Td.setImmediate(e.flush.bind(e,null))))},t.prototype.recycleAsyncId=function(e,r,n){if(n===void 0&&(n=0),n!==null&&n>0||n===null&&this.delay>0)return i.prototype.recycleAsyncId.call(this,e,r,n);e.actions.length===0&&(Td.clearImmediate(r),e.scheduled=void 0)},t}(En),Lb=function(i){_t(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var r=this.actions,n,o=-1,s=r.length;e=e||r.shift();do if(n=e.execute(e.state,e.delay))break;while(++o<s&&(e=r.shift()));if(this.active=!1,n){for(;++o<s&&(e=r.shift());)e.unsubscribe();throw n}},t}(Fn),vv=new Lb(Bb),Rb=vv,yv=new Fn(En),ts=yv,Zb=function(i){_t(t,i);function t(e,r){var n=i.call(this,e,r)||this;return n.scheduler=e,n.work=r,n}return t.prototype.requestAsyncId=function(e,r,n){return n===void 0&&(n=0),n!==null&&n>0?i.prototype.requestAsyncId.call(this,e,r,n):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},t.prototype.recycleAsyncId=function(e,r,n){if(n===void 0&&(n=0),n!==null&&n>0||n===null&&this.delay>0)return i.prototype.recycleAsyncId.call(this,e,r,n);e.actions.length===0&&(cancelAnimationFrame(r),e.scheduled=void 0)},t}(En),Ob=function(i){_t(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var r=this.actions,n,o=-1,s=r.length;e=e||r.shift();do if(n=e.execute(e.state,e.delay))break;while(++o<s&&(e=r.shift()));if(this.active=!1,n){for(;++o<s&&(e=r.shift());)e.unsubscribe();throw n}},t}(Fn),mv=new Ob(Zb),Gb=mv,Nb=function(i){_t(t,i);function t(e,r){e===void 0&&(e=_v),r===void 0&&(r=Number.POSITIVE_INFINITY);var n=i.call(this,e,function(){return n.frame})||this;return n.maxFrames=r,n.frame=0,n.index=-1,n}return t.prototype.flush=function(){for(var e=this,r=e.actions,n=e.maxFrames,o,s;(s=r[0])&&s.delay<=n&&(r.shift(),this.frame=s.delay,!(o=s.execute(s.state,s.delay))););if(o){for(;s=r.shift();)s.unsubscribe();throw o}},t.frameTimeFactor=10,t}(Fn),_v=function(i){_t(t,i);function t(e,r,n){n===void 0&&(n=e.index+=1);var o=i.call(this,e,r)||this;return o.scheduler=e,o.work=r,o.index=n,o.active=!0,o.index=e.index=n,o}return t.prototype.schedule=function(e,r){if(r===void 0&&(r=0),!this.id)return i.prototype.schedule.call(this,e,r);this.active=!1;var n=new t(this.scheduler,this.work);return this.add(n),n.schedule(e,r)},t.prototype.requestAsyncId=function(e,r,n){n===void 0&&(n=0),this.delay=e.frame+n;var o=e.actions;return o.push(this),o.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,r,n){},t.prototype._execute=function(e,r){if(this.active===!0)return i.prototype._execute.call(this,e,r)},t.sortActions=function(e,r){return e.delay===r.delay?e.index===r.index?0:e.index>r.index?1:-1:e.delay>r.delay?1:-1},t}(En);function Cv(){}function jb(i){return!!i&&(i instanceof mt||typeof i.lift=="function"&&typeof i.subscribe=="function")}var Wb=function(){function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return i.prototype=Object.create(Error.prototype),i}(),Xb=Wb,kb=function(){function i(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return i.prototype=Object.create(Error.prototype),i}(),Hb=kb,Yb=function(){function i(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return i.prototype=Object.create(Error.prototype),i}(),Ub=Yb;function Bi(i,t){return function(r){if(typeof i!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new zb(i,t))}}var zb=function(){function i(t,e){this.project=t,this.thisArg=e}return i.prototype.call=function(t,e){return e.subscribe(new Vb(t,this.project,this.thisArg))},i}(),Vb=function(i){_t(t,i);function t(e,r,n){var o=i.call(this,e)||this;return o.project=r,o.count=0,o.thisArg=n||o,o}return t.prototype._next=function(e){var r;try{r=this.project.call(this.thisArg,e,this.count++)}catch(n){this.destination.error(n);return}this.destination.next(r)},t}(re);function Av(i,t,e){if(t)if(lr(t))e=t;else return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return Av(i,e).apply(void 0,r).pipe(Bi(function(o){return _e(o)?t.apply(void 0,o):t(o)}))};return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=this,s,a={context:o,subject:s,callbackFunc:i,scheduler:e};return new mt(function(l){if(e){var d={args:r,subscriber:l,params:a};return e.schedule(Jb,0,d)}else{if(!s){s=new Dn;var c=function(){for(var g=[],u=0;u<arguments.length;u++)g[u]=arguments[u];s.next(g.length<=1?g[0]:g),s.complete()};try{i.apply(o,r.concat([c]))}catch(g){ec(s)?s.error(g):console.warn(g)}}return s.subscribe(l)}})}}function Jb(i){var t=this,e=i.args,r=i.subscriber,n=i.params,o=n.callbackFunc,s=n.context,a=n.scheduler,l=n.subject;if(!l){l=n.subject=new Dn;var c=function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];var u=d.length<=1?d[0]:d;t.add(a.schedule(Qb,0,{value:u,subject:l}))};try{o.apply(s,e.concat([c]))}catch(d){l.error(d)}}this.add(l.subscribe(r))}function Qb(i){var t=i.value,e=i.subject;e.next(t),e.complete()}function bv(i,t,e){if(t)if(lr(t))e=t;else return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return bv(i,e).apply(void 0,r).pipe(Bi(function(o){return _e(o)?t.apply(void 0,o):t(o)}))};return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o={subject:void 0,args:r,callbackFunc:i,scheduler:e,context:this};return new mt(function(s){var a=o.context,l=o.subject;if(e)return e.schedule($b,0,{params:o,subscriber:s,context:a});if(!l){l=o.subject=new Dn;var c=function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];var u=d.shift();if(u){l.error(u);return}l.next(d.length<=1?d[0]:d),l.complete()};try{i.apply(a,r.concat([c]))}catch(d){ec(l)?l.error(d):console.warn(d)}}return l.subscribe(s)})}}function $b(i){var t=this,e=i.params,r=i.subscriber,n=i.context,o=e.callbackFunc,s=e.args,a=e.scheduler,l=e.subject;if(!l){l=e.subject=new Dn;var c=function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];var u=d.shift();if(u)t.add(a.schedule(Ed,0,{err:u,subject:l}));else{var h=d.length<=1?d[0]:d;t.add(a.schedule(Kb,0,{value:h,subject:l}))}};try{o.apply(n,s.concat([c]))}catch(d){this.add(a.schedule(Ed,0,{err:d,subject:l}))}}this.add(l.subscribe(r))}function Kb(i){var t=i.value,e=i.subject;e.next(t),e.complete()}function Ed(i){var t=i.err,e=i.subject;e.error(t)}var wv=function(i){_t(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.notifyNext=function(e,r,n,o,s){this.destination.next(r)},t.prototype.notifyError=function(e,r){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(re),qb=function(i){_t(t,i);function t(e,r,n){var o=i.call(this)||this;return o.parent=e,o.outerValue=r,o.outerIndex=n,o.index=0,o}return t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(re),tw=function(i){return function(t){return i.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,ii),t}};function ew(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var hr=ew(),rw=function(i){return function(t){var e=i[hr]();do{var r=void 0;try{r=e.next()}catch(n){return t.error(n),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}while(!0);return typeof e.return=="function"&&t.add(function(){e.return&&e.return()}),t}},iw=function(i){return function(t){var e=i[Di]();if(typeof e.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)}},xv=function(i){return i&&typeof i.length=="number"&&typeof i!="function"};function Pv(i){return!!i&&typeof i.subscribe!="function"&&typeof i.then=="function"}var In=function(i){if(i&&typeof i[Di]=="function")return iw(i);if(xv(i))return pv(i);if(Pv(i))return tw(i);if(i&&typeof i[hr]=="function")return rw(i);var t=tc(i)?"an invalid object":"'"+i+"'",e="You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(e)};function Sv(i,t,e,r,n){if(n===void 0&&(n=new qb(i,e,r)),!n.closed)return t instanceof mt?t.subscribe(n):In(t)(n)}var Fd={};function nw(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var e=void 0,r=void 0;return lr(i[i.length-1])&&(r=i.pop()),typeof i[i.length-1]=="function"&&(e=i.pop()),i.length===1&&_e(i[0])&&(i=i[0]),Mn(i,r).lift(new ow(e))}var ow=function(){function i(t){this.resultSelector=t}return i.prototype.call=function(t,e){return e.subscribe(new sw(t,this.resultSelector))},i}(),sw=function(i){_t(t,i);function t(e,r){var n=i.call(this,e)||this;return n.resultSelector=r,n.active=0,n.values=[],n.observables=[],n}return t.prototype._next=function(e){this.values.push(Fd),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,r=e.length;if(r===0)this.destination.complete();else{this.active=r,this.toRespond=r;for(var n=0;n<r;n++){var o=e[n];this.add(Sv(this,o,void 0,n))}}},t.prototype.notifyComplete=function(e){(this.active-=1)===0&&this.destination.complete()},t.prototype.notifyNext=function(e,r,n){var o=this.values,s=o[n],a=this.toRespond?s===Fd?--this.toRespond:this.toRespond:0;o[n]=r,a===0&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},t.prototype._tryResultSelector=function(e){var r;try{r=this.resultSelector.apply(this,e)}catch(n){this.destination.error(n);return}this.destination.next(r)},t}(wv);function aw(i,t){return new mt(function(e){var r=new Ht;return r.add(t.schedule(function(){var n=i[Di]();r.add(n.subscribe({next:function(o){r.add(t.schedule(function(){return e.next(o)}))},error:function(o){r.add(t.schedule(function(){return e.error(o)}))},complete:function(){r.add(t.schedule(function(){return e.complete()}))}}))})),r})}function uw(i,t){return new mt(function(e){var r=new Ht;return r.add(t.schedule(function(){return i.then(function(n){r.add(t.schedule(function(){e.next(n),r.add(t.schedule(function(){return e.complete()}))}))},function(n){r.add(t.schedule(function(){return e.error(n)}))})})),r})}function lw(i,t){if(!i)throw new Error("Iterable cannot be null");return new mt(function(e){var r=new Ht,n;return r.add(function(){n&&typeof n.return=="function"&&n.return()}),r.add(t.schedule(function(){n=i[hr](),r.add(t.schedule(function(){if(!e.closed){var o,s;try{var a=n.next();o=a.value,s=a.done}catch(l){e.error(l);return}s?e.complete():(e.next(o),this.schedule())}}))})),r})}function hw(i){return i&&typeof i[Di]=="function"}function cw(i){return i&&typeof i[hr]=="function"}function Tv(i,t){if(i!=null){if(hw(i))return aw(i,t);if(Pv(i))return uw(i,t);if(xv(i))return ic(i,t);if(cw(i)||typeof i=="string")return lw(i,t)}throw new TypeError((i!==null&&typeof i||i)+" is not observable")}function Li(i,t){return t?Tv(i,t):i instanceof mt?i:new mt(In(i))}var Ev=function(i){_t(t,i);function t(e){var r=i.call(this)||this;return r.parent=e,r}return t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(re),Fv=function(i){_t(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(re);function Mv(i,t){if(!t.closed){if(i instanceof mt)return i.subscribe(t);var e;try{e=In(i)(t)}catch(r){t.error(r)}return e}}function Dv(i,t,e){return e===void 0&&(e=Number.POSITIVE_INFINITY),typeof t=="function"?function(r){return r.pipe(Dv(function(n,o){return Li(i(n,o)).pipe(Bi(function(s,a){return t(n,s,o,a)}))},e))}:(typeof t=="number"&&(e=t),function(r){return r.lift(new fw(i,e))})}var fw=function(){function i(t,e){e===void 0&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return i.prototype.call=function(t,e){return e.subscribe(new dw(t,this.project,this.concurrent))},i}(),dw=function(i){_t(t,i);function t(e,r,n){n===void 0&&(n=Number.POSITIVE_INFINITY);var o=i.call(this,e)||this;return o.project=r,o.concurrent=n,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var r,n=this.index++;try{r=this.project(e,n)}catch(o){this.destination.error(o);return}this.active++,this._innerSub(r)},t.prototype._innerSub=function(e){var r=new Ev(this),n=this.destination;n.add(r);var o=Mv(e,r);o!==r&&n.add(o)},t.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},t}(Fv);function Bv(i){return i===void 0&&(i=Number.POSITIVE_INFINITY),Dv(pn,i)}function gw(){return Bv(1)}function pw(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return gw()(nc.apply(void 0,i))}function Lv(i){return new mt(function(t){var e;try{e=i()}catch(n){t.error(n);return}var r=e?Li(e):rc();return r.subscribe(t)})}function Iw(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];if(i.length===1){var e=i[0];if(_e(e))return wo(e,null);if(tc(e)&&Object.getPrototypeOf(e)===Object.prototype){var r=Object.keys(e);return wo(r.map(function(o){return e[o]}),r)}}if(typeof i[i.length-1]=="function"){var n=i.pop();return i=i.length===1&&_e(i[0])?i[0]:i,wo(i,null).pipe(Bi(function(o){return n.apply(void 0,o)}))}return wo(i,null)}function wo(i,t){return new mt(function(e){var r=i.length;if(r===0){e.complete();return}for(var n=new Array(r),o=0,s=0,a=function(c){var d=Li(i[c]),g=!1;e.add(d.subscribe({next:function(u){g||(g=!0,s++),n[c]=u},error:function(u){return e.error(u)},complete:function(){o++,(o===r||!g)&&(s===r&&e.next(t?t.reduce(function(u,h,f){return u[h]=n[f],u},{}):n),e.complete())}}))},l=0;l<r;l++)a(l)})}function Rv(i,t,e,r){return gn(e)&&(r=e,e=void 0),r?Rv(i,t,e).pipe(Bi(function(n){return _e(n)?r.apply(void 0,n):r(n)})):new mt(function(n){function o(s){arguments.length>1?n.next(Array.prototype.slice.call(arguments)):n.next(s)}Zv(i,t,o,n,e)})}function Zv(i,t,e,r,n){var o;if(mw(i)){var s=i;i.addEventListener(t,e,n),o=function(){return s.removeEventListener(t,e,n)}}else if(yw(i)){var a=i;i.on(t,e),o=function(){return a.off(t,e)}}else if(vw(i)){var l=i;i.addListener(t,e),o=function(){return l.removeListener(t,e)}}else if(i&&i.length)for(var c=0,d=i.length;c<d;c++)Zv(i[c],t,e,r,n);else throw new TypeError("Invalid event target");r.add(o)}function vw(i){return i&&typeof i.addListener=="function"&&typeof i.removeListener=="function"}function yw(i){return i&&typeof i.on=="function"&&typeof i.off=="function"}function mw(i){return i&&typeof i.addEventListener=="function"&&typeof i.removeEventListener=="function"}function Ov(i,t,e){return e?Ov(i,t).pipe(Bi(function(r){return _e(r)?e.apply(void 0,r):e(r)})):new mt(function(r){var n=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return r.next(s.length===1?s[0]:s)},o;try{o=i(n)}catch(s){r.error(s);return}if(gn(t))return function(){return t(n,o)}})}function _w(i,t,e,r,n){var o,s;if(arguments.length==1){var a=i;s=a.initialState,t=a.condition,e=a.iterate,o=a.resultSelector||pn,n=a.scheduler}else r===void 0||lr(r)?(s=i,o=pn,n=r):(s=i,o=r);return new mt(function(l){var c=s;if(n)return n.schedule(Cw,0,{subscriber:l,iterate:e,condition:t,resultSelector:o,state:c});do{if(t){var d=void 0;try{d=t(c)}catch(u){l.error(u);return}if(!d){l.complete();break}}var g=void 0;try{g=o(c)}catch(u){l.error(u);return}if(l.next(g),l.closed)break;try{c=e(c)}catch(u){l.error(u);return}}while(!0)})}function Cw(i){var t=i.subscriber,e=i.condition;if(!t.closed){if(i.needIterate)try{i.state=i.iterate(i.state)}catch(o){t.error(o);return}else i.needIterate=!0;if(e){var r=void 0;try{r=e(i.state)}catch(o){t.error(o);return}if(!r){t.complete();return}if(t.closed)return}var n;try{n=i.resultSelector(i.state)}catch(o){t.error(o);return}if(!t.closed&&(t.next(n),!t.closed))return this.schedule(i)}}function Aw(i,t,e){return t===void 0&&(t=_i),e===void 0&&(e=_i),Lv(function(){return i()?t:e})}function Ch(i){return!_e(i)&&i-parseFloat(i)+1>=0}function bw(i,t){return i===void 0&&(i=0),t===void 0&&(t=ts),(!Ch(i)||i<0)&&(i=0),(!t||typeof t.schedule!="function")&&(t=ts),new mt(function(e){return e.add(t.schedule(ww,i,{subscriber:e,counter:0,period:i})),e})}function ww(i){var t=i.subscriber,e=i.counter,r=i.period;t.next(e),this.schedule({subscriber:t,counter:e+1,period:r},r)}function xw(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var e=Number.POSITIVE_INFINITY,r=null,n=i[i.length-1];return lr(n)?(r=i.pop(),i.length>1&&typeof i[i.length-1]=="number"&&(e=i.pop())):typeof n=="number"&&(e=i.pop()),r===null&&i.length===1&&i[0]instanceof mt?i[0]:Bv(e)(Mn(i,r))}var Gv=new mt(Cv);function Pw(){return Gv}function Ah(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];if(i.length===0)return _i;var e=i[0],r=i.slice(1);return i.length===1&&_e(e)?Ah.apply(void 0,e):new mt(function(n){var o=function(){return n.add(Ah.apply(void 0,r).subscribe(n))};return Li(e).subscribe({next:function(s){n.next(s)},error:o,complete:o})})}function Sw(i,t){return t?new mt(function(e){var r=Object.keys(i),n=new Ht;return n.add(t.schedule(Tw,0,{keys:r,index:0,subscriber:e,subscription:n,obj:i})),n}):new mt(function(e){for(var r=Object.keys(i),n=0;n<r.length&&!e.closed;n++){var o=r[n];i.hasOwnProperty(o)&&e.next([o,i[o]])}e.complete()})}function Tw(i){var t=i.keys,e=i.index,r=i.subscriber,n=i.subscription,o=i.obj;if(!r.closed)if(e<t.length){var s=t[e];r.next([s,o[s]]),n.add(this.schedule({keys:t,index:e+1,subscriber:r,subscription:n,obj:o}))}else r.complete()}function Ew(i,t){function e(){return!e.pred.apply(e.thisArg,arguments)}return e.pred=i,e.thisArg=t,e}function Md(i,t){return function(r){return r.lift(new Fw(i,t))}}var Fw=function(){function i(t,e){this.predicate=t,this.thisArg=e}return i.prototype.call=function(t,e){return e.subscribe(new Mw(t,this.predicate,this.thisArg))},i}(),Mw=function(i){_t(t,i);function t(e,r,n){var o=i.call(this,e)||this;return o.predicate=r,o.thisArg=n,o.count=0,o}return t.prototype._next=function(e){var r;try{r=this.predicate.call(this.thisArg,e,this.count++)}catch(n){this.destination.error(n);return}r&&this.destination.next(e)},t}(re);function Dw(i,t,e){return[Md(t,e)(new mt(In(i))),Md(Ew(t,e))(new mt(In(i)))]}function Bw(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];if(i.length===1)if(_e(i[0]))i=i[0];else return i[0];return Mn(i,void 0).lift(new Lw)}var Lw=function(){function i(){}return i.prototype.call=function(t,e){return e.subscribe(new Rw(t))},i}(),Rw=function(i){_t(t,i);function t(e){var r=i.call(this,e)||this;return r.hasFirst=!1,r.observables=[],r.subscriptions=[],r}return t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,r=e.length;if(r===0)this.destination.complete();else{for(var n=0;n<r&&!this.hasFirst;n++){var o=e[n],s=Sv(this,o,void 0,n);this.subscriptions&&this.subscriptions.push(s),this.add(s)}this.observables=null}},t.prototype.notifyNext=function(e,r,n){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(r)},t}(wv);function Zw(i,t,e){return i===void 0&&(i=0),new mt(function(r){t===void 0&&(t=i,i=0);var n=0,o=i;if(e)return e.schedule(Ow,0,{index:n,count:t,start:i,subscriber:r});do{if(n++>=t){r.complete();break}if(r.next(o++),r.closed)break}while(!0)})}function Ow(i){var t=i.start,e=i.index,r=i.count,n=i.subscriber;if(e>=r){n.complete();return}n.next(t),!n.closed&&(i.index=e+1,i.start=t+1,this.schedule(i))}function Gw(i,t,e){i===void 0&&(i=0);var r=-1;return Ch(t)?r=Number(t)<1&&1||Number(t):lr(t)&&(e=t),lr(e)||(e=ts),new mt(function(n){var o=Ch(i)?i:+i-e.now();return e.schedule(Nw,o,{index:0,period:r,subscriber:n})})}function Nw(i){var t=i.index,e=i.period,r=i.subscriber;if(r.next(t),!r.closed){if(e===-1)return r.complete();i.index=t+1,this.schedule(i,e)}}function jw(i,t){return new mt(function(e){var r;try{r=i()}catch(a){e.error(a);return}var n;try{n=t(r)}catch(a){e.error(a);return}var o=n?Li(n):_i,s=o.subscribe(e);return function(){s.unsubscribe(),r&&r.unsubscribe()}})}function Ww(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var e=i[i.length-1];return typeof e=="function"&&i.pop(),Mn(i,void 0).lift(new Xw(e))}var Xw=function(){function i(t){this.resultSelector=t}return i.prototype.call=function(t,e){return e.subscribe(new kw(t,this.resultSelector))},i}(),kw=function(i){_t(t,i);function t(e,r,n){var o=i.call(this,e)||this;return o.resultSelector=r,o.iterators=[],o.active=0,o.resultSelector=typeof r=="function"?r:void 0,o}return t.prototype._next=function(e){var r=this.iterators;_e(e)?r.push(new Yw(e)):typeof e[hr]=="function"?r.push(new Hw(e[hr]())):r.push(new Uw(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,r=e.length;if(this.unsubscribe(),r===0){this.destination.complete();return}this.active=r;for(var n=0;n<r;n++){var o=e[n];if(o.stillUnsubscribed){var s=this.destination;s.add(o.subscribe())}else this.active--}},t.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,r=e.length,n=this.destination,o=0;o<r;o++){var s=e[o];if(typeof s.hasValue=="function"&&!s.hasValue())return}for(var a=!1,l=[],o=0;o<r;o++){var s=e[o],c=s.next();if(s.hasCompleted()&&(a=!0),c.done){n.complete();return}l.push(c.value)}this.resultSelector?this._tryresultSelector(l):n.next(l),a&&n.complete()},t.prototype._tryresultSelector=function(e){var r;try{r=this.resultSelector.apply(this,e)}catch(n){this.destination.error(n);return}this.destination.next(r)},t}(re),Hw=function(){function i(t){this.iterator=t,this.nextResult=t.next()}return i.prototype.hasValue=function(){return!0},i.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},i.prototype.hasCompleted=function(){var t=this.nextResult;return!!(t&&t.done)},i}(),Yw=function(){function i(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return i.prototype[hr]=function(){return this},i.prototype.next=function(t){var e=this.index++,r=this.array;return e<this.length?{value:r[e],done:!1}:{value:null,done:!0}},i.prototype.hasValue=function(){return this.array.length>this.index},i.prototype.hasCompleted=function(){return this.array.length===this.index},i}(),Uw=function(i){_t(t,i);function t(e,r,n){var o=i.call(this,e)||this;return o.parent=r,o.observable=n,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return t.prototype[hr]=function(){return this},t.prototype.next=function(){var e=this.buffer;return e.length===0&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return Mv(this.observable,new Ev(this))},t}(Fv);const zw=Object.freeze(Object.defineProperty({__proto__:null,ArgumentOutOfRangeError:Xb,AsyncSubject:Dn,BehaviorSubject:Cb,ConnectableObservable:vb,EMPTY:_i,EmptyError:Hb,GroupedObservable:mb,NEVER:Gv,Notification:No,get NotificationKind(){return mh},ObjectUnsubscribedError:nr,Observable:mt,ReplaySubject:Eb,Scheduler:yh,Subject:Tn,Subscriber:re,Subscription:Ht,TimeoutError:Ub,UnsubscriptionError:en,VirtualAction:_v,VirtualTimeScheduler:Nb,animationFrame:Gb,animationFrameScheduler:mv,asap:Rb,asapScheduler:vv,async:ts,asyncScheduler:yv,bindCallback:Av,bindNodeCallback:bv,combineLatest:nw,concat:pw,config:Ie,defer:Lv,empty:rc,forkJoin:Iw,from:Li,fromEvent:Rv,fromEventPattern:Ov,generate:_w,identity:pn,iif:Aw,interval:bw,isObservable:jb,merge:xw,never:Pw,noop:Cv,observable:Di,of:nc,onErrorResumeNext:Ah,pairs:Sw,partition:Dw,pipe:fb,queue:gv,queueScheduler:dv,race:Bw,range:Zw,scheduled:Tv,throwError:Iv,timer:Gw,using:jw,zip:Ww},Symbol.toStringTag,{value:"Module"})),oc=Kg(zw);var ys={};Object.defineProperty(ys,"__esModule",{value:!0});ys.EventEmitter=void 0;class Vw{constructor(){this._map=new Map}addEventListener(t,e){var r;const n=t.toString(),o=(r=this._map.get(n))!==null&&r!==void 0?r:new Set;o.add(e),this._map.set(n,o)}removeEventListener(t,e){const r=t.toString(),n=this._map.get(r);n?.delete(e)}trigger(t,e){const r=t.toString(),n=this._map.get(r);n?.forEach(o=>o(e))}}ys.EventEmitter=Vw;var Jw=W&&W.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),Qw=W&&W.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),$w=W&&W.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&Jw(t,i,e);return Qw(t,i),t};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.HitSprite=void 0;const Au=$w(Zt),Kw=oc,qw=ys;class tx extends Au.Sprite{constructor({eventManager:t,mirrored:e=!1,getHitmap:r,tag:n,group:o}){super(),this._ignore=!1,this._ignoreMouse=!1,this._rectangleSubject=new Kw.BehaviorSubject(void 0),this._eventEmitter=new qw.EventEmitter,this._group=o,this._mirrored=e,this._getHitmap=r,this._tag=n,this.mirrored=this._mirrored,this._eventManager=t,t.register(this)}get events(){return this._eventEmitter}getGroup(){return this._group}getRectangleObservable(){return this._rectangleSubject}getEventZOrder(){return this.zIndex}triggerPointerTargetChanged(t){t.tag=this._tag,this._eventEmitter.trigger("pointertargetchanged",t)}triggerClick(t){t.tag=this._tag,this._eventEmitter.trigger("click",t)}triggerPointerDown(t){t.tag=this._tag,this._eventEmitter.trigger("pointerdown",t)}triggerPointerUp(t){t.tag=this._tag,this._eventEmitter.trigger("pointerup",t)}triggerPointerOver(t){t.tag=this._tag,this._eventEmitter.trigger("pointerover",t)}triggerPointerOut(t){t.tag=this._tag,this._eventEmitter.trigger("pointerout",t)}createDebugSprite(){if(this._hitTexture==null||this._hitTexture.getHitMap()==null)return;const e=new Au.TilingSprite(Au.Texture.WHITE,this._hitTexture.texture.width,this._hitTexture.texture.height);return e.alpha=.1,e.x=this.getGlobalPosition().x,e.y=this.getGlobalPosition().y,e}get ignoreMouse(){return this._ignoreMouse}set ignoreMouse(t){this._ignoreMouse=t}get group(){return this._group}get ignore(){return this._ignore}set ignore(t){this._ignore=t}get mirrored(){return this._mirrored}set mirrored(t){this._mirrored=t,this.scale.x=this._mirrored?-1:1}get hitTexture(){return this._hitTexture}set hitTexture(t){t!=null&&(this.texture=t.texture,this._hitTexture=t,this._getHitmap=()=>(e,r,n)=>t.hits(e,r,n,{mirrorHorizonally:this._mirrored}))}getHitDetectionZIndex(){return this.zIndex}destroy(){super.destroy(),this._eventManager.remove(this)}getHitBox(){const t=this.getGlobalPosition();return this._mirrored?{x:t.x-this.texture.width,y:t.y,width:this.texture.width,height:this.texture.height}:{x:t.x,y:t.y,width:this.texture.width,height:this.texture.height}}hits(t,e){if(this._getHitmap==null||this.ignore||this.ignoreMouse)return!1;const r=this.getHitBox(),n=r.x<=t&&t<=r.x+r.width,o=r.y<=e&&e<=r.y+r.height;return n&&o?this._getHitmap()(t,e,{x:this.getGlobalPosition().x,y:this.getGlobalPosition().y}):!1}updateTransform(){super.updateTransform(),this._rectangleSubject.next(this.getHitBox())}}Sn.HitSprite=tx;var ms={};Object.defineProperty(ms,"__esModule",{value:!0});ms.isSetEqual=void 0;function ex(i,t){if(i.size!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;return!0}ms.isSetEqual=ex;var Bn={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.AvatarFigurePartType=void 0,function(t){t.Body="bd",t.Shoes="sh",t.Legs="lg",t.Chest="ch",t.WaistAccessory="wa",t.ChestAccessory="ca",t.Head="hd",t.Hair="hr",t.FaceAccessory="fa",t.EyeAccessory="ea",t.HeadAccessory="ha",t.HeadAccessoryExtra="he",t.CoatChest="cc",t.ChestPrint="cp",t.LeftHandItem="li",t.LeftHand="lh",t.LeftSleeve="ls",t.RightHand="rh",t.RightSleeve="rs",t.Face="fc",t.Eyes="ey",t.HairBig="hrb",t.RightHandItem="ri",t.LeftCoatSleeve="lc",t.RightCoatSleeve="rc"}(i.AvatarFigurePartType||(i.AvatarFigurePartType={}))})(Bn);var cr={},_s={};Object.defineProperty(_s,"__esModule",{value:!0});_s.EventManagerNode=void 0;class rx{constructor(t,e){this.target=t,this._bush=e,this._subscription=t.getRectangleObservable().subscribe(r=>{this._updateRectangle(r)})}get minX(){if(this._rectangle==null)throw new Error("Rectangle wasn't set");return this._rectangle.x}get maxX(){if(this._rectangle==null)throw new Error("Rectangle wasn't set");return this._rectangle.x+this._rectangle.width}get minY(){if(this._rectangle==null)throw new Error("Rectangle wasn't set");return this._rectangle.y}get maxY(){if(this._rectangle==null)throw new Error("Rectangle wasn't set");return this._rectangle.y+this._rectangle.height}destroy(){this._rectangle!=null&&this._bush.remove(this),this._subscription.unsubscribe()}_updateRectangle(t){this._rectangle!=null&&this._bush.remove(this),this._rectangle=t,t!=null&&this._bush.insert(this)}}_s.EventManagerNode=rx;var Nv={exports:{}};(function(i,t){(function(e,r){i.exports=r()})(W,function(){function e(I,p,_,A,b){(function P(E,C,T,F,Z){for(;F>T;){if(F-T>600){var O=F-T+1,H=C-T+1,X=Math.log(O),U=.5*Math.exp(2*X/3),k=.5*Math.sqrt(X*U*(O-U)/O)*(H-O/2<0?-1:1),ot=Math.max(T,Math.floor(C-H*U/O+k)),lt=Math.min(F,Math.floor(C+(O-H)*U/O+k));P(E,C,ot,lt,Z)}var et=E[C],Q=T,rt=F;for(r(E,T,C),Z(E[F],et)>0&&r(E,T,F);Q<rt;){for(r(E,Q,rt),Q++,rt--;Z(E[Q],et)<0;)Q++;for(;Z(E[rt],et)>0;)rt--}Z(E[T],et)===0?r(E,T,rt):r(E,++rt,F),rt<=C&&(T=rt+1),C<=rt&&(F=rt-1)}})(I,p,_||0,A||I.length-1,b||n)}function r(I,p,_){var A=I[p];I[p]=I[_],I[_]=A}function n(I,p){return I<p?-1:I>p?1:0}var o=function(I){I===void 0&&(I=9),this._maxEntries=Math.max(4,I),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function s(I,p,_){if(!_)return p.indexOf(I);for(var A=0;A<p.length;A++)if(_(I,p[A]))return A;return-1}function a(I,p){l(I,0,I.children.length,p,I)}function l(I,p,_,A,b){b||(b=m(null)),b.minX=1/0,b.minY=1/0,b.maxX=-1/0,b.maxY=-1/0;for(var P=p;P<_;P++){var E=I.children[P];c(b,I.leaf?A(E):E)}return b}function c(I,p){return I.minX=Math.min(I.minX,p.minX),I.minY=Math.min(I.minY,p.minY),I.maxX=Math.max(I.maxX,p.maxX),I.maxY=Math.max(I.maxY,p.maxY),I}function d(I,p){return I.minX-p.minX}function g(I,p){return I.minY-p.minY}function u(I){return(I.maxX-I.minX)*(I.maxY-I.minY)}function h(I){return I.maxX-I.minX+(I.maxY-I.minY)}function f(I,p){return I.minX<=p.minX&&I.minY<=p.minY&&p.maxX<=I.maxX&&p.maxY<=I.maxY}function v(I,p){return p.minX<=I.maxX&&p.minY<=I.maxY&&p.maxX>=I.minX&&p.maxY>=I.minY}function m(I){return{children:I,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(I,p,_,A,b){for(var P=[p,_];P.length;)if(!((_=P.pop())-(p=P.pop())<=A)){var E=p+Math.ceil((_-p)/A/2)*A;e(I,E,p,_,b),P.push(p,E,E,_)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(I){var p=this.data,_=[];if(!v(I,p))return _;for(var A=this.toBBox,b=[];p;){for(var P=0;P<p.children.length;P++){var E=p.children[P],C=p.leaf?A(E):E;v(I,C)&&(p.leaf?_.push(E):f(I,C)?this._all(E,_):b.push(E))}p=b.pop()}return _},o.prototype.collides=function(I){var p=this.data;if(!v(I,p))return!1;for(var _=[];p;){for(var A=0;A<p.children.length;A++){var b=p.children[A],P=p.leaf?this.toBBox(b):b;if(v(I,P)){if(p.leaf||f(I,P))return!0;_.push(b)}}p=_.pop()}return!1},o.prototype.load=function(I){if(!I||!I.length)return this;if(I.length<this._minEntries){for(var p=0;p<I.length;p++)this.insert(I[p]);return this}var _=this._build(I.slice(),0,I.length-1,0);if(this.data.children.length)if(this.data.height===_.height)this._splitRoot(this.data,_);else{if(this.data.height<_.height){var A=this.data;this.data=_,_=A}this._insert(_,this.data.height-_.height-1,!0)}else this.data=_;return this},o.prototype.insert=function(I){return I&&this._insert(I,this.data.height-1),this},o.prototype.clear=function(){return this.data=m([]),this},o.prototype.remove=function(I,p){if(!I)return this;for(var _,A,b,P=this.data,E=this.toBBox(I),C=[],T=[];P||C.length;){if(P||(P=C.pop(),A=C[C.length-1],_=T.pop(),b=!0),P.leaf){var F=s(I,P.children,p);if(F!==-1)return P.children.splice(F,1),C.push(P),this._condense(C),this}b||P.leaf||!f(P,E)?A?(_++,P=A.children[_],b=!1):P=null:(C.push(P),T.push(_),_=0,A=P,P=P.children[0])}return this},o.prototype.toBBox=function(I){return I},o.prototype.compareMinX=function(I,p){return I.minX-p.minX},o.prototype.compareMinY=function(I,p){return I.minY-p.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(I){return this.data=I,this},o.prototype._all=function(I,p){for(var _=[];I;)I.leaf?p.push.apply(p,I.children):_.push.apply(_,I.children),I=_.pop();return p},o.prototype._build=function(I,p,_,A){var b,P=_-p+1,E=this._maxEntries;if(P<=E)return a(b=m(I.slice(p,_+1)),this.toBBox),b;A||(A=Math.ceil(Math.log(P)/Math.log(E)),E=Math.ceil(P/Math.pow(E,A-1))),(b=m([])).leaf=!1,b.height=A;var C=Math.ceil(P/E),T=C*Math.ceil(Math.sqrt(E));y(I,p,_,T,this.compareMinX);for(var F=p;F<=_;F+=T){var Z=Math.min(F+T-1,_);y(I,F,Z,C,this.compareMinY);for(var O=F;O<=Z;O+=C){var H=Math.min(O+C-1,Z);b.children.push(this._build(I,O,H,A-1))}}return a(b,this.toBBox),b},o.prototype._chooseSubtree=function(I,p,_,A){for(;A.push(p),!p.leaf&&A.length-1!==_;){for(var b=1/0,P=1/0,E=void 0,C=0;C<p.children.length;C++){var T=p.children[C],F=u(T),Z=(O=I,H=T,(Math.max(H.maxX,O.maxX)-Math.min(H.minX,O.minX))*(Math.max(H.maxY,O.maxY)-Math.min(H.minY,O.minY))-F);Z<P?(P=Z,b=F<b?F:b,E=T):Z===P&&F<b&&(b=F,E=T)}p=E||p.children[0]}var O,H;return p},o.prototype._insert=function(I,p,_){var A=_?I:this.toBBox(I),b=[],P=this._chooseSubtree(A,this.data,p,b);for(P.children.push(I),c(P,A);p>=0&&b[p].children.length>this._maxEntries;)this._split(b,p),p--;this._adjustParentBBoxes(A,b,p)},o.prototype._split=function(I,p){var _=I[p],A=_.children.length,b=this._minEntries;this._chooseSplitAxis(_,b,A);var P=this._chooseSplitIndex(_,b,A),E=m(_.children.splice(P,_.children.length-P));E.height=_.height,E.leaf=_.leaf,a(_,this.toBBox),a(E,this.toBBox),p?I[p-1].children.push(E):this._splitRoot(_,E)},o.prototype._splitRoot=function(I,p){this.data=m([I,p]),this.data.height=I.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(I,p,_){for(var A,b,P,E,C,T,F,Z=1/0,O=1/0,H=p;H<=_-p;H++){var X=l(I,0,H,this.toBBox),U=l(I,H,_,this.toBBox),k=(b=X,P=U,E=void 0,C=void 0,T=void 0,F=void 0,E=Math.max(b.minX,P.minX),C=Math.max(b.minY,P.minY),T=Math.min(b.maxX,P.maxX),F=Math.min(b.maxY,P.maxY),Math.max(0,T-E)*Math.max(0,F-C)),ot=u(X)+u(U);k<Z?(Z=k,A=H,O=ot<O?ot:O):k===Z&&ot<O&&(O=ot,A=H)}return A||_-p},o.prototype._chooseSplitAxis=function(I,p,_){var A=I.leaf?this.compareMinX:d,b=I.leaf?this.compareMinY:g;this._allDistMargin(I,p,_,A)<this._allDistMargin(I,p,_,b)&&I.children.sort(A)},o.prototype._allDistMargin=function(I,p,_,A){I.children.sort(A);for(var b=this.toBBox,P=l(I,0,p,b),E=l(I,_-p,_,b),C=h(P)+h(E),T=p;T<_-p;T++){var F=I.children[T];c(P,I.leaf?b(F):F),C+=h(P)}for(var Z=_-p-1;Z>=p;Z--){var O=I.children[Z];c(E,I.leaf?b(O):O),C+=h(E)}return C},o.prototype._adjustParentBBoxes=function(I,p,_){for(var A=_;A>=0;A--)c(p[A],I)},o.prototype._condense=function(I){for(var p=I.length-1,_=void 0;p>=0;p--)I[p].children.length===0?p>0?(_=I[p-1].children).splice(_.indexOf(I[p]),1):this.clear():a(I[p],this.toBBox)},o})})(Nv);var ix=Nv.exports,ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.TILE_CURSOR=ce.AVATAR=ce.FURNITURE=void 0;ce.FURNITURE=Symbol("FURNITURE");ce.AVATAR=Symbol("AVATAR");ce.TILE_CURSOR=Symbol("TILE_CURSOR");var nx=W&&W.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(cr,"__esModule",{value:!0});cr.NOOP_EVENT_MANAGER=cr.EventManager=void 0;const ox=_s,sx=nx(ix),ax=ce;class ux{constructor(){this._nodes=new Map,this._bush=new sx.default,this._currentOverElements=new Set,this._pointerDownElements=new Set}click(t,e,r){const n=this._performHitTest(e,r);new Cr(t,n.activeNodes,(o,s)=>o.triggerClick(s))}pointerDown(t,e,r){const n=this._performHitTest(e,r);this._pointerDownElements=new Set(n.activeNodes),new Cr(t,n.activeNodes,(o,s)=>o.triggerPointerDown(s))}pointerUp(t,e,r){const n=this._performHitTest(e,r),o=new Set(n.activeNodes),s=new Set;this._pointerDownElements.forEach(a=>{o.has(a)&&s.add(a)}),new Cr(t,n.activeNodes,(a,l)=>a.triggerPointerUp(l)),new Cr(t,Array.from(s),(a,l)=>{a.triggerClick(l)})}move(t,e,r){const n=this._performHitTest(e,r),o=new Set(n.activeNodes.filter((u,h)=>h===0||u.target.getGroup().getEventGroupIdentifier()===ax.TILE_CURSOR)),s=this._currentOverElements,a=new Set;o.forEach(u=>{s.has(u)||a.add(u)});const l=new Set;s.forEach(u=>{o.has(u)||l.add(u)});const c=new Set;a.forEach(u=>{c.add(u.target.getGroup())});const d=new Set,g=new Set;l.forEach(u=>{c.has(u.target.getGroup())&&d.add(u),g.add(u)}),this._currentOverElements=o,new Cr(t,Array.from(d),(u,h)=>{u.triggerPointerTargetChanged(h)}),new Cr(t,Array.from(g),(u,h)=>u.triggerPointerOut(h)),new Cr(t,Array.from(a),(u,h)=>u.triggerPointerOver(h))}register(t){if(this._nodes.has(t))throw new Error("Target already registered");const e=new ox.EventManagerNode(t,this._bush);return this._nodes.set(t,e),e}remove(t){const e=this._nodes.get(t);if(e==null)throw new Error("Target isn't in the event manager");e.destroy()}_performHitTest(t,e){const n=this._bush.search({minX:t,minY:e,maxX:t,maxY:e}).sort((a,l)=>l.target.getEventZOrder()-a.target.getEventZOrder()).filter(a=>a.target.hits(t,e)),o=new Map,s=[];return n.forEach(a=>{const l=a.target.getGroup();l!=null&&o.has(l)||(s.push(a),l!=null&&o.set(l,a))}),{activeNodes:s,activeGroups:o}}}cr.EventManager=ux;class Cr{constructor(t,e,r){this.event=t,this.path=e,this._trigger=r,this._skip=new Set,this._allow=new Set,this._stopped=!1,this._propagate()}_propagate(){const t=this._createEvent();for(let e=0;e<this.path.length;e++){if(this._stopped)return;const r=this.path[e];this._skip.has(r.target.getGroup().getEventGroupIdentifier())&&!this._allow.has(r.target.getGroup().getEventGroupIdentifier())||this._allow.size>0&&!this._allow.has(r.target.getGroup().getEventGroupIdentifier())||this._trigger(this.path[e].target,t)}}_createEvent(){return{interactionEvent:this.event,mouseEvent:this.event.data.originalEvent,stopPropagation:()=>{this._stopped=!0},skip:(...t)=>{const e=r=>{Array.isArray(r)?r.forEach(n=>e(n)):this._skip.add(r)};e(t)},skipExcept:(...t)=>{const e=r=>{Array.isArray(r)?r.forEach(n=>e(n)):this._allow.add(r)};e(t)}}}}cr.NOOP_EVENT_MANAGER={register:()=>({destroy:()=>{}}),remove:()=>{}};var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.EventOverOutHandler=void 0;class lx{constructor(){this._eventEmitters=new Map,this._overElements=new Set,this._hover=!1,this._targetChanged=!1,this._onOver=(t,e)=>{this._overElements.add(t),this._update(e)},this._onOut=(t,e)=>{this._overElements.delete(t),this._update(e)},this._onTargetChanged=(t,e)=>{this._overElements.delete(t),this._targetChanged=!0,this._update(e)}}get onOver(){return this._onOverCallback}set onOver(t){this._onOverCallback=t}get onOut(){return this._onOutCallback}set onOut(t){this._onOutCallback=t}register(t){this._eventEmitters.has(t)||this._eventEmitters.set(t,new hx(t,this._onOver,this._onOut,this._onTargetChanged))}remove(t){const e=this._eventEmitters.get(t);e!=null&&(this._eventEmitters.delete(t),this._overElements.delete(t),e.destroy())}_update(t){this._overElements.size>0&&!this._hover&&(this._hover=!0,this._targetChanged||this.onOver&&this.onOver(t),this._targetChanged=!1),this._overElements.size<1&&this._hover&&(this._hover=!1,this._targetChanged||this.onOut&&this.onOut(t))}}Ln.EventOverOutHandler=lx;class hx{constructor(t,e,r,n){this.emitter=t,this.onOver=e,this.onOut=r,this.onTargetChanged=n,this._handlePointerOut=o=>{this.onOut(this.emitter,o)},this._handlePointerOver=o=>{this.onOver(this.emitter,o)},this._handlePointerTargetChanged=o=>{this.onTargetChanged(this.emitter,o)},t.addEventListener("pointerout",this._handlePointerOut),t.addEventListener("pointerover",this._handlePointerOver),t.addEventListener("pointertargetchanged",this._handlePointerTargetChanged)}destroy(){this.emitter.removeEventListener("pointerout",this._handlePointerOut),this.emitter.removeEventListener("pointerover",this._handlePointerOver),this.emitter.removeEventListener("pointertargetchanged",this._handlePointerTargetChanged)}}var cx=W&&W.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),fx=W&&W.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),dx=W&&W.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&cx(t,i,e);return fx(t,i),t};Object.defineProperty(xn,"__esModule",{value:!0});xn.BaseAvatar=void 0;const bu=dx(Zt),gx=Pn,px=Sn,Ix=ms,he=Bn,vx=cr,yx=ce,mx=Ln,_x=new Set([he.AvatarFigurePartType.Head,he.AvatarFigurePartType.Body,he.AvatarFigurePartType.LeftHand,he.AvatarFigurePartType.RightHand]),Cx=new Set([he.AvatarFigurePartType.Head,he.AvatarFigurePartType.Face,he.AvatarFigurePartType.Eyes,he.AvatarFigurePartType.EyeAccessory,he.AvatarFigurePartType.Hair,he.AvatarFigurePartType.HairBig,he.AvatarFigurePartType.FaceAccessory,he.AvatarFigurePartType.HeadAccessory,he.AvatarFigurePartType.HeadAccessoryExtra]);class sc extends bu.Container{constructor(t){var e,r,n;super(),this._avatarDestroyed=!1,this._currentFrame=0,this._clickHandler=new gx.ClickHandler,this._overOutHandler=new mx.EventOverOutHandler,this._refreshFrame=!1,this._refreshLook=!1,this._sprites=new Map,this._updateId=0,this._spritesZIndex=0,this.x=t.position.x,this.y=t.position.y,this.zIndex=t.zIndex,this.spritesZIndex=t.zIndex,this._nextLookOptions=t.look,this._onLoad=t.onLoad,this._skipBodyParts=(e=t.skipBodyParts)!==null&&e!==void 0?e:!1,this._headOnly=(r=t.headOnly)!==null&&r!==void 0?r:!1,this._skipCaching=(n=t.skipCaching)!==null&&n!==void 0?n:!1}get spritesZIndex(){return this._spritesZIndex}set spritesZIndex(t){this._spritesZIndex=t,this._updateSpritesZIndex()}get dependencies(){if(this._dependencies==null)throw new Error("Invalid dependencies in BaseAvatar");return this._dependencies}set dependencies(t){this._dependencies=t,this._handleDependenciesSet()}get mounted(){return this._dependencies!=null}get onClick(){return this._clickHandler.onClick}set onClick(t){this._clickHandler.onClick=t}get onDoubleClick(){return this._clickHandler.onDoubleClick}set onDoubleClick(t){this._clickHandler.onDoubleClick=t}get onPointerDown(){return this._clickHandler.onPointerDown}set onPointerDown(t){this._clickHandler.onPointerDown=t}get onPointerUp(){return this._clickHandler.onPointerUp}set onPointerUp(t){this._clickHandler.onPointerUp=t}get onPointerOut(){return this._overOutHandler.onOut}set onPointerOut(t){this._overOutHandler.onOut=t}get onPointerOver(){return this._overOutHandler.onOver}set onPointerOver(t){this._overOutHandler.onOver=t}get lookOptions(){if(this._nextLookOptions!=null)return this._nextLookOptions;if(this._lookOptions==null)throw new Error("Invalid look options");return this._lookOptions}set lookOptions(t){this._updateLookOptions(this._lookOptions,t)}get currentFrame(){return this._currentFrame}set currentFrame(t){t!==this._currentFrame&&(this._currentFrame=t,this._refreshFrame=!0)}static fromShroom(t,e){const r=new sc({...e});return r.dependencies={...t.dependencies,eventManager:vx.NOOP_EVENT_MANAGER},r}getEventGroupIdentifier(){return yx.AVATAR}destroy(){super.destroy(),this._destroyAssets(),this._cancelTicker!=null&&this._cancelTicker()}_destroyAssets(){var t;this._sprites.forEach(e=>{this._overOutHandler.remove(e.events),e.destroy()}),this._sprites=new Map,(t=this._container)===null||t===void 0||t.destroy()}_updateSpritesZIndex(){this._sprites.forEach(t=>{t.zIndex=this.spritesZIndex})}_updateLookOptions(t,e){(t==null||!Ix.isSetEqual(t.actions,e.actions)||t.look!=e.look||t.item!=e.item||t.effect!=e.effect||t.direction!=e.direction||t.headDirection!=e.headDirection)&&(this._nextLookOptions=e,this._refreshLook=!0)}_updatePosition(t){this._container!=null&&(this._container.x=0,this._container.y=0)}_updateSprites(){if(this._avatarLoaderResult==null||this._lookOptions==null)return;const t=this._avatarLoaderResult.getDrawDefinition(this._lookOptions);this._avatarDrawDefinition=t,this._updateSpritesWithAvatarDrawDefinition(t,this.currentFrame),this._updatePosition(t)}_updateSpritesWithAvatarDrawDefinition(t,e){var r;if(this._destroyed)throw new Error("BaseAvatar was destroyed already");this.mounted&&(this._sprites.forEach(n=>{n.visible=!1,n.ignore=!0}),(r=this._container)===null||r===void 0||r.destroy(),this._container=new bu.Container,this._container.sortableChildren=!0,t.getDrawDefinition().forEach(n=>{var o,s;if(n.kind==="AVATAR_DRAW_PART"){const a=n.type;if(this._skipBodyParts&&_x.has(a)||this._headOnly&&!Cx.has(a))return;const l=e%n.assets.length,c=n.assets[l];let d=this._sprites.get(c.fileId);if(d==null&&(d=this._createAsset(n,c),d!=null&&this._overOutHandler.register(d.events)),d==null)return;d.x=c.x,d.y=c.y,d.visible=!0,d.mirrored=c.mirror,d.ignore=!1,d.zIndex=this.spritesZIndex+n.z,this._sprites.set(c.fileId,d),(o=this._container)===null||o===void 0||o.addChild(d)}else if(n.kind==="EFFECT_DRAW_PART"){const a=e%n.assets.length,l=n.assets[a];let c=this._sprites.get(l.fileId);if(c==null&&(c=this._createAsset(n,l),c!=null&&this._overOutHandler.register(c.events)),c==null)return;switch(n.ink){case 33:c.blendMode=bu.BLEND_MODES.ADD;break}c.x=l.x+(l.substractWidth!=null&&l.substractWidth?c.texture.width:0),c.y=l.y,c.visible=!0,c.mirrored=l.mirror,c.ignore=!1,c.zIndex=this.spritesZIndex+n.z,this._sprites.set(l.fileId,c),(s=this._container)===null||s===void 0||s.addChild(c)}}),this.addChild(this._container))}_createAsset(t,e){if(this._avatarLoaderResult==null)throw new Error("Cant create asset when avatar loader result not present");const r=this._avatarLoaderResult.getTexture(e.fileId);if(r==null)return;const n=new px.HitSprite({eventManager:this.dependencies.eventManager,mirrored:e.mirror,group:this});return n.hitTexture=r,n.x=e.x,n.y=e.y,n.events.addEventListener("click",o=>{this._clickHandler.handleClick(o)}),n.events.addEventListener("pointerdown",o=>{this._clickHandler.handlePointerDown(o)}),n.events.addEventListener("pointerup",o=>{this._clickHandler.handlePointerUp(o)}),t.kind==="AVATAR_DRAW_PART"&&t.color!=null&&t.mode==="colored"?n.tint=parseInt(t.color.slice(1),16):n.tint=16777215,n}_reloadLook(){if(!this.mounted)return;const t=this._nextLookOptions;if(t!=null){const e=++this._updateId;this.dependencies.avatarLoader.getAvatarDrawDefinition({...t,initial:!0,skipCaching:this._skipCaching}).then(r=>{this._destroyed||e===this._updateId&&(this._avatarLoaderResult=r,this._lookOptions=t,this._nextLookOptions=void 0,this._destroyAssets(),this._updateSprites(),this._onLoad&&this._onLoad())})}}_updateFrame(){this._avatarDrawDefinition!=null&&(this._updateSpritesWithAvatarDrawDefinition(this._avatarDrawDefinition,this.currentFrame),this._updatePosition(this._avatarDrawDefinition))}_handleDependenciesSet(){this._reloadLook(),this._cancelTicker!=null&&this._cancelTicker(),this._cancelTicker!=null&&this._cancelTicker(),this._cancelTicker=this.dependencies.animationTicker.subscribe(()=>{this._refreshLook&&(this._refreshLook=!1,this._reloadLook()),this._refreshFrame&&(this._refreshFrame=!1,this._updateFrame())})}}xn.BaseAvatar=sc;var Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.ObjectAnimation=void 0;class Ax{constructor(t,e,r=500){this._animationTicker=t,this._callbacks=e,this._duration=r,this._start=0,this._enqueued=[]}clear(){return this._enqueued=[],this._nextPosition}move(t,e,r){this._finishCurrent!=null&&(this._finishCurrent(),this._finishCurrent=void 0),this._callbacks.onStart(r),this._current=t,this._diff={roomX:e.roomX-t.roomX,roomY:e.roomY-t.roomY,roomZ:e.roomZ-t.roomZ},this._nextPosition=e,this._start=performance.now();const n=()=>{this._diff=void 0,this._current=void 0;const s=this._enqueued.shift();s!=null?this.move(s.currentPosition,s.newPosition,s.data):this._callbacks.onStop(r),o()};this._finishCurrent=n,this._callbacks.onUpdatePosition({roomX:this._current.roomX,roomY:this._current.roomY,roomZ:this._current.roomZ},r);const o=this._animationTicker.subscribe(()=>{let a=(performance.now()-this._start)/this._duration;const l=this._current,c=this._diff;if(a>1&&(a=1),l!=null&&c!=null&&this._callbacks.onUpdatePosition({roomX:l.roomX+c.roomX*a,roomY:l.roomY+c.roomY*a,roomZ:l.roomZ+c.roomZ*a},r),a>=1){n();return}})}}Rn.ObjectAnimation=Ax;var Ri={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.AvatarAction=void 0,function(t){t.Move="Move",t.Wave="Wave",t.Talk="Talk",t.Swim="Swim",t.Float="Float",t.Sign="Sign",t.Respect="Respect",t.Blow="Blow",t.Laugh="Laugh",t.SnowWarRun="SnowWarRun",t.SnowWarDieFront="SnowWarDieFront",t.SnowWarDieBack="SnowWarDieBack",t.SnowWarPick="SnowWarPick",t.SnowWarThrow="SnowWarThrow",t.Lay="Lay",t.Sit="Sit",t.Idle="Idle",t.Dance="Dance",t.UseItem="UseItem",t.CarryItem="CarryItem",t.Gesture="Gesture",t.GestureSmile="GestureSmile",t.GestureSad="GestureSad",t.GestureAngry="GestureAngry",t.GestureSurprised="GestureSurprised",t.Sleep="Sleep",t.Default="Default"}(i.AvatarAction||(i.AvatarAction={}))})(Ri);Object.defineProperty(vs,"__esModule",{value:!0});vs.Avatar=void 0;const bx=Ir,wx=kr,Dd=xn,xx=Rn,Ui=Ri;class Px extends bx.RoomObject{constructor({look:t,roomX:e,roomY:r,roomZ:n,direction:o,headDirection:s}){super(),this._walking=!1,this._moving=!1,this._frame=0,this._waving=!1,this._direction=0,this._roomX=0,this._roomY=0,this._roomZ=0,this._animatedPosition={roomX:0,roomY:0,roomZ:0},this._actions=new Set,this._loaded=!1,this._onClick=void 0,this._onDoubleClick=void 0,this._onPointerDown=void 0,this._onPointerUp=void 0,this._onPointerOver=void 0,this._onPointerOut=void 0,this._direction=o,this._look=t,this._roomX=e,this._roomY=r,this._roomZ=n,this._headDirection=s,this._placeholderSprites=new Dd.BaseAvatar({look:this._getPlaceholderLookOptions(),zIndex:this._calculateZIndex(),position:{x:0,y:0},onLoad:()=>{this._updateAvatarSprites()}}),this._placeholderSprites.alpha=.5,this._avatarSprites=this._placeholderSprites,this._loadingAvatarSprites=new Dd.BaseAvatar({look:this._getLookOptions(),position:{x:0,y:0},zIndex:this._calculateZIndex(),onLoad:()=>{this._loaded=!0,this._updateAvatarSprites()}})}get look(){return this._look}get onClick(){return this._onClick}set onClick(t){this._onClick=t,this._updateEventHandlers()}get onDoubleClick(){return this._onDoubleClick}set onDoubleClick(t){this._onDoubleClick=t,this._updateEventHandlers()}get onPointerDown(){return this._onPointerDown}set onPointerDown(t){this._onPointerDown=t,this._updateEventHandlers()}get onPointerUp(){return this._onPointerUp}set onPointerUp(t){this._onPointerUp=t,this._updateEventHandlers()}get onPointerOver(){return this._onPointerOver}set onPointerOver(t){this._onPointerOver=t,this._updateEventHandlers()}get onPointerOut(){return this._onPointerOut}set onPointerOut(t){this._onPointerOut=t,this._updateEventHandlers()}get roomX(){return this._roomX}set roomX(t){this._roomX=t,this._updatePosition()}get roomY(){return this._roomY}set roomY(t){this._roomY=t,this._updatePosition()}get roomZ(){return this._roomZ}set roomZ(t){this._roomZ=t,this._updatePosition()}get item(){return this._item}set item(t){this._item=t,this._updateAvatarSprites()}get effect(){return this._effect}set effect(t){this._effect=t,this._updateAvatarSprites()}get direction(){return this._direction}set direction(t){this._direction=t,this._updateAvatarSprites()}get headDirection(){return this._headDirection}set headDirection(t){this._headDirection=t,this._updateAvatarSprites()}get waving(){return this._waving}set waving(t){this._waving=t,this._updateAvatarSprites()}get actions(){return this._actions}set actions(t){this._actions=t,this._updateAvatarSprites()}get screenPosition(){const t=this._avatarSprites.getGlobalPosition();if(t!=null)return{x:t.x,y:t.y}}clearMovement(){var t;const e=(t=this._moveAnimation)===null||t===void 0?void 0:t.clear();e!=null&&(this.roomX=e.roomX,this.roomY=e.roomY,this.roomZ=e.roomZ)}walk(t,e,r,n){var o;(o=this._moveAnimation)===null||o===void 0||o.move({roomX:this.roomX,roomY:this.roomY,roomZ:this.roomZ},{roomX:t,roomY:e,roomZ:r},{direction:n?.direction,headDirection:n?.headDirection,type:"walk"}),this._roomX=t,this._roomY=e,this._roomZ=r}move(t,e,r){var n;(n=this._moveAnimation)===null||n===void 0||n.move({roomX:this.roomX,roomY:this.roomY,roomZ:this.roomZ},{roomX:t,roomY:e,roomZ:r},{type:"move"}),this._roomX=t,this._roomY=e,this._roomZ=r}getScreenPosition(){return{x:this._avatarSprites.x,y:this._avatarSprites.y}}registered(){this._placeholderSprites!=null&&(this._placeholderSprites.dependencies={animationTicker:this.animationTicker,avatarLoader:this.avatarLoader,eventManager:this.eventManager}),this._loadingAvatarSprites.dependencies={animationTicker:this.animationTicker,avatarLoader:this.avatarLoader,eventManager:this.eventManager},this._updateAvatarSprites(),this._moveAnimation=new xx.ObjectAnimation(this.animationTicker,{onUpdatePosition:t=>{this._animatedPosition=t,this._updatePosition()},onStart:t=>{t.type==="walk"?(this._startWalking(t.direction,t.headDirection),this._moving=!1):t.type==="move"&&(this._stopWalking(),this._moving=!0)},onStop:()=>{this._stopWalking(),this._moving=!1}},this.configuration.avatarMovementDuration)}addAction(t){this.actions=new Set(this._actions).add(t)}removeAction(t){const e=new Set(this._actions);e.delete(t),this.actions=e}hasAction(t){return this.actions.has(t)}destroyed(){var t;(t=this._avatarSprites)===null||t===void 0||t.destroy(),this._cancelAnimation!=null&&this._cancelAnimation()}_updateEventHandlers(){this._placeholderSprites!=null&&(this._placeholderSprites.onClick=this._onClick,this._placeholderSprites.onDoubleClick=this._onDoubleClick,this._placeholderSprites.onPointerDown=this._onPointerDown,this._placeholderSprites.onPointerUp=this._onPointerUp,this._placeholderSprites.onPointerOut=this._onPointerOut,this._placeholderSprites.onPointerOver=this._onPointerOver),this._loadingAvatarSprites.onClick=this._onClick,this._loadingAvatarSprites.onDoubleClick=this._onDoubleClick,this._loadingAvatarSprites.onPointerDown=this._onPointerDown,this._loadingAvatarSprites.onPointerUp=this._onPointerUp,this._loadingAvatarSprites.onPointerOut=this._onPointerOut,this._loadingAvatarSprites.onPointerOver=this._onPointerOver}_getPlaceholderLookOptions(){return{actions:new Set,direction:this.direction,headDirection:this.direction,look:"hd-99999-99999",effect:void 0,initial:!1,item:void 0}}_getCurrentLookOptions(){return this._loaded?this._getLookOptions():this._getPlaceholderLookOptions()}_getLookOptions(){const t=new Set(this.actions);return this._walking&&t.add(Ui.AvatarAction.Move),this.waving&&t.add(Ui.AvatarAction.Wave),t.has(Ui.AvatarAction.Lay)&&this._walking&&t.delete(Ui.AvatarAction.Lay),{actions:t,direction:this.direction,headDirection:this.headDirection,look:this._look,item:this.item,effect:this.effect}}_updateAvatarSprites(){if(!this.mounted)return;this._loaded?(this._placeholderSprites!=null&&this._placeholderSprites.destroy(),this._placeholderSprites=void 0,this._avatarSprites=this._loadingAvatarSprites):this._placeholderSprites!=null&&(this._avatarSprites=this._placeholderSprites);const t=this._getCurrentLookOptions();this._startAnimation();const e=this._avatarSprites;e!=null&&(e.lookOptions=t),this._updatePosition(),this._updateEventHandlers()}_updateFrame(){this._avatarSprites.currentFrame=this._frame}_startAnimation(){if(this._cancelAnimation!=null)return;this._frame=0;const t=this.animationTicker.current();this._cancelAnimation=this.animationTicker.subscribe(e=>{this._frame=e-t,this._updateFrame()})}_stopAnimation(){this._frame=0,this._cancelAnimation!=null&&(this._cancelAnimation(),this._cancelAnimation=void 0)}_startWalking(t,e){this._walking=!0,t!=null&&(this.direction=t),e!=null&&(this.headDirection=e),this._updateAvatarSprites()}_stopWalking(){this._walking=!1,this._updateAvatarSprites()}_calculateZIndex(){return this._getZIndexAtPosition(this.roomX,this.roomY,this.roomZ)}_getDisplayRoomPosition(){return this._walking||this._moving?this._animatedPosition:{roomX:this.roomX,roomY:this.roomY,roomZ:this.roomZ}}_getZIndexAtPosition(t,e,r){let n=1;return this._getCurrentLookOptions().actions.has(Ui.AvatarAction.Lay)&&(n+=2e3),wx.getZOrder(t,e,r)+n}_updatePosition(){if(!this.mounted)return;const{roomX:t,roomY:e,roomZ:r}=this._getDisplayRoomPosition(),{x:n,y:o}=this.geometry.getPosition(t,e,r),s=Math.round(t),a=Math.round(e);if(this._avatarSprites!=null){this._avatarSprites.x=Math.round(n),this._avatarSprites.y=Math.round(o);const c=this._getZIndexAtPosition(s,a,this.roomZ);this._avatarSprites.zIndex=c,this._avatarSprites.spritesZIndex=c}const l=this.tilemap.getTileAtPosition(s,a);l?.type==="door"&&(this.roomVisualization.container.removeChild(this._avatarSprites),this.roomVisualization.behindWallContainer.addChild(this._avatarSprites)),(l==null||l.type!=="door")&&(this.roomVisualization.behindWallContainer.removeChild(this._avatarSprites),this.roomVisualization.container.addChild(this._avatarSprites))}}vs.Avatar=Px;var Cs={},Zi={},Zn={},Sx=W&&W.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),Tx=W&&W.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),Ex=W&&W.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&Sx(t,i,e);return Tx(t,i),t};Object.defineProperty(Zn,"__esModule",{value:!0});Zn.HighlightFilter=void 0;const wu=Ex(Zt);class Fx extends wu.Filter{constructor(t,e){super(Mx,Dx),this._backgroundColor=t,this._borderColor=e,this.uniforms.backgroundColor=new Float32Array(4),this.uniforms.borderColor=new Float32Array(4),this.uniforms.backgroundColor=[...wu.utils.hex2rgb(this._backgroundColor),1],this.uniforms.borderColor=[...wu.utils.hex2rgb(this._borderColor),1]}}Zn.HighlightFilter=Fx;const Mx=`
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}
`,Dx=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 backgroundColor;
uniform vec4 borderColor;

void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);

    if (currentColor.a > 0.0) {
        if (currentColor.r == 0.0 && currentColor.g == 0.0 && currentColor.b == 0.0) {
            gl_FragColor = borderColor;
        } else {
            gl_FragColor = backgroundColor;
        }
    }
}
`;var On={};Object.defineProperty(On,"__esModule",{value:!0});On.FurnitureSprite=void 0;const Bx=Sn;class Lx extends Bx.HitSprite{constructor(){super(...arguments),this._baseX=0,this._baseY=0,this._baseZIndex=0,this._offsetX=0,this._offsetY=0,this._offsetZIndex=0}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._update()}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._update()}get offsetZIndex(){return this._offsetZIndex}set offsetZIndex(t){this._offsetZIndex=t,this._update()}get baseX(){return this._baseX}set baseX(t){this._baseX=t,this._update()}get baseY(){return this._baseY}set baseY(t){this._baseY=t,this._update()}get baseZIndex(){return this._baseZIndex}set baseZIndex(t){this._baseZIndex=t,this._update()}get assetName(){return this._assetName}set assetName(t){this._assetName=t}_update(){this.x=this.baseX+this.offsetX,this.y=this.baseY+this.offsetY,this.zIndex=this.baseZIndex+this.offsetZIndex}}On.FurnitureSprite=Lx;var Hr={},vr={};Object.defineProperty(vr,"__esModule",{value:!0});vr.FurnitureVisualization=void 0;class Rx{get view(){if(this._view==null)throw new Error("No view mounted");return this._view}get previousView(){return this._previousView}get mounted(){return this._view!=null}setView(t){this._previousView=this._view,this._view=t}isAnimated(t="0"){return!1}}vr.FurnitureVisualization=Rx;Object.defineProperty(Hr,"__esModule",{value:!0});Hr.AnimatedFurnitureVisualization=void 0;const Zx=vr;class Ox extends Zx.FurnitureVisualization{constructor(){super(),this._animationQueue=[],this._sprites=new Set,this._disableTransitions=!1,this._frame=0,this._changeAnimationCount=0,this._lastFramePlayedMap=new Map,this._refreshFurniture=!1,this._refreshFurniture=!0}get animationId(){return this._overrideAnimation!=null?this._overrideAnimation:this._currentAnimationId}set animationId(t){this._overrideAnimation=t,this._refreshFurniture=!0}get modifier(){return this._modifier}set modifier(t){this._modifier=t,this._updateFurniture()}setCurrentAnimation(t){this._animationQueueStartFrame=void 0,this._animationQueue=this._getAnimationList(this.view.getVisualizationData(),t),this._disableTransitions=this._changeAnimationCount===0,this._changeAnimationCount++,this._update()}updateAnimation(t){this._updateAnimation(this._currentTargetAnimationId,t)}updateDirection(t){this._currentDirection!==t&&(this._currentDirection=t,this._updateFurniture())}isLastFramePlayedForLayer(t){var e;return(e=this._lastFramePlayedMap.get(t))!==null&&e!==void 0?e:!1}destroy(){}update(){this._currentDirection!=null&&(this.view.setDisplayDirection(this._currentDirection),this.view.updateDisplay(),this._update())}updateFrame(t){if(this._refreshFurniture&&(this._refreshFurniture=!1,this._updateFurniture()),this._animationQueueStartFrame==null&&(this._animationQueueStartFrame=t),this._animationQueue.length>0){const e=this._getCurrentProgress(t);let r=0,n,o;for(let s=0;s<this._animationQueue.length;s++){const a=this._animationQueue[s];if(r+=a.frameCount,e<r){n=a.id,o=a.frameCount;break}}if(n==null||o==null||this._disableTransitions){const s=this._animationQueue[this._animationQueue.length-1];n=s.id,o=s.frameCount}this._setAnimation(n),this._animationFrameCount=o,this._frame=e}this._update(!0)}isAnimated(){return!0}_getCurrentProgress(t){return this._animationQueueStartFrame==null?0:t-this._animationQueueStartFrame}_setAnimation(t){this._currentAnimationId!==t&&(this._currentAnimationId=t,this._updateFurniture())}_updateLayers(){if(this.modifier!=null){const t=this.modifier;this.view.getLayers().forEach(e=>t(e))}}_updateFurniture(){var t,e;this.mounted&&(this.view.setDisplayDirection((t=this._currentDirection)!==null&&t!==void 0?t:0),this.view.setDisplayAnimation((e=this.animationId)===null||e===void 0?void 0:e.toString()),this.view.updateDisplay(),this._updateLayers(),this._update())}_update(t=!1){var e;const r=(e=this._animationFrameCount)!==null&&e!==void 0?e:1;this.view.getLayers().forEach(n=>{this.modifier!=null&&(n=this.modifier(n));const o=this._frame%r;let s=Math.floor(o/n.frameRepeat);const a=n.assetCount-1;s>a&&(s=a),o===r-1?this._lastFramePlayedMap.set(n.layerIndex,!0):this._lastFramePlayedMap.set(n.layerIndex,!1),n.setCurrentFrameIndex(s)})}_getAnimationList(t,e){const r=[],n=o=>{var s;const a=t.getTransitionForAnimation(64,o);a!=null&&n(a.id);const l=t.getAnimation(64,o),c=(s=t.getFrameCount(64,o))!==null&&s!==void 0?s:1;l!=null&&r.push({id:l.id,frameCount:c})};return n(e),r.length===0?[{id:0,frameCount:1}]:r}_updateAnimation(t,e){this._currentTargetAnimationId=e,e==null?this.setCurrentAnimation(0):t==e||t!=e&&this.setCurrentAnimation(Number(e))}}Hr.AnimatedFurnitureVisualization=Ox;var As={};Object.defineProperty(As,"__esModule",{value:!0});As.getDirectionForFurniture=void 0;function Gx(i,t){if(t.length<1)return 0;let e=t[0];for(let r=0;r<t.length;r++){const n=t[r];if(n===i)return i;if(n>i)return e;e=n}return e}As.getDirectionForFurniture=Gx;var bs={},Nx=W&&W.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),jx=W&&W.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),Wx=W&&W.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&Nx(t,i,e);return jx(t,i),t};Object.defineProperty(bs,"__esModule",{value:!0});bs.FurnitureVisualizationView=void 0;const Bd=Wx(Zt),Xx=ce,kx=Zn,Hx=On,Yx=new kx.HighlightFilter(10066329,16777215);class Ux{constructor(t,e,r,n,o){this._eventManager=t,this._clickHandler=e,this._overOutHandler=r,this._container=n,this._furniture=o,this._cache=new Map}get x(){if(this._x==null)throw new Error("x not set");return this._x}set x(t){this._x=t}get y(){if(this._y==null)throw new Error("y not set");return this._y}set y(t){this._y=t}get zIndex(){if(this._zIndex==null)throw new Error("zIndex not set");return this._zIndex}set zIndex(t){this._zIndex=t}get alpha(){if(this._alpha==null)throw new Error("alpha not set");return this._alpha}set alpha(t){this._alpha=t}get highlight(){if(this._highlight==null)throw new Error("highlight not set");return this._highlight}set highlight(t){this._highlight=t}getEventGroupIdentifier(){return Xx.FURNITURE}getLayers(){if(this._layers==null)throw new Error("Layers not set yet. Call `updateDisplay` before accessing the layers.");return this._layers}getVisualizationData(){return this._furniture.visualizationData}setDisplayAnimation(t){this._animation=t}setDisplayDirection(t){this._direction=t}updateLayers(){var t;(t=this._layers)===null||t===void 0||t.forEach(e=>{e.x=this.x,e.y=this.y,e.zIndex=this.zIndex,e.alpha=this.alpha,e.highlight=this.highlight,e.update()})}updateDisplay(){var t;if(this._direction==null)throw new Error("Direction was not set");const e=this._direction,r=this._animation;(t=this._layers)===null||t===void 0||t.forEach(n=>n.destroy()),this._layers=this._getDrawDefinition(e,r).parts.map(n=>new zx(this,this._container,n,this._eventManager,this._clickHandler,this._overOutHandler,o=>this._furniture.getTexture(o))),this.updateLayers()}destroy(){var t;(t=this._layers)===null||t===void 0||t.forEach(e=>e.destroy())}_getDrawDefinition(t,e){e=e??"undefined";const r=`${t}_${e}`,n=this._cache.get(r);if(n!=null)return n;const o=this._furniture.getDrawDefinition(t,e);return this._cache.set(r,o),o}}bs.FurnitureVisualizationView=Ux;class zx{constructor(t,e,r,n,o,s,a){this._parent=t,this._container=e,this._part=r,this._eventManager=n,this._clickHandler=o,this._overOutHandler=s,this._getTexture=a,this._sprites=new Map,this._spritePositionChanged=!1,this._spritesChanged=!1,this._frameIndex=0,this._mountedSprites=new Set,this.frameRepeat=r.frameRepeat,this.layerIndex=r.layerIndex,this.assetCount=r.assets.length}get highlight(){if(this._highlight==null)throw new Error("highlight not set");return this._highlight}set highlight(t){t!==this._highlight&&(this._highlight=t,this._spritesChanged=!0)}get alpha(){if(this._alpha==null)throw new Error("alpha not set");return this._alpha}set alpha(t){t!==this._alpha&&(this._alpha=t,this._spritesChanged=!0)}get x(){if(this._x==null)throw new Error("x not set");return this._x}set x(t){t!==this._x&&(this._x=t,this._spritePositionChanged=!0)}get y(){if(this._y==null)throw new Error("y not set");return this._y}set y(t){this._y!==t&&(this._y=t,this._spritePositionChanged=!0)}get zIndex(){if(this._zIndex==null)throw new Error("zIndex not set");return this._zIndex}set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this._spritePositionChanged=!0)}get tag(){var t;return(t=this._part.layer)===null||t===void 0?void 0:t.tag}setColor(t){this._color!==t&&(this._color=t,this._spritesChanged=!0)}setCurrentFrameIndex(t){const e=this._frameIndex;this._frameIndex=t;const r=this._getSprite(e);r!=null&&this._setSpriteVisible(r,!1);const n=this._getSprite(this._frameIndex);n!=null&&(this._setSpriteVisible(n,!0),this._addSprite(n),this._color!=null&&(n.tint=this._color))}update(){this._spritePositionChanged&&(this._spritePositionChanged=!1,this._updateSpritesPosition()),this._spritesChanged&&(this._spritesChanged=!1,this._destroySprites(),this._updateSprites())}destroy(){this._destroySprites()}_updateSpritePosition(t){t.baseX=this.x,t.baseY=this.y,t.baseZIndex=this.zIndex}_addSprite(t){this._mountedSprites.has(t)||(this._mountedSprites.add(t),this._container.addChild(t),this._overOutHandler.register(t.events))}_destroySprites(){this._sprites.forEach(t=>{this._container.removeChild(t),this._overOutHandler.remove(t.events),t.destroy()}),this._sprites=new Map,this._mountedSprites=new Set}_setSpriteVisible(t,e){e?(t.ignore=!1,t.visible=!0):(t.ignore=!0,t.visible=!1)}_updateSprites(){const t=this._frameIndex,e=this._getSprite(t);this._sprites.forEach(r=>this._setSpriteVisible(r,!1)),e!=null&&(this._addSprite(e),this._setSpriteVisible(e,!0))}_updateSpritesPosition(){this._sprites.forEach(t=>{this._updateSpritePosition(t)})}_getSpriteInfo(t){const e=this._part.assets[t];if(e==null)return;const r=this._getTexture(Vx(e));return{asset:e,texture:r}}_getSprite(t){const e=this._sprites.get(t);if(e!=null)return e;const r=this._getSpriteInfo(t);if(r==null)return;const{z:n,layer:o,shadow:s,mask:a,tint:l}=this._part,{asset:c,texture:d}=r,g=n??0,u=new Hx.FurnitureSprite({eventManager:this._eventManager,mirrored:c.flipH,tag:o?.tag,group:this._parent}),h=o?.ignoreMouse!=null&&o.ignoreMouse;u.ignoreMouse=h,u.events.addEventListener("click",p=>{this._clickHandler.handleClick(p)}),u.events.addEventListener("pointerup",p=>{this._clickHandler.handlePointerUp(p)}),u.events.addEventListener("pointerdown",p=>{this._clickHandler.handlePointerDown(p)}),u.hitTexture=d,this._highlight&&o?.ink==null&&!s&&!a?u.filters=[Yx]:u.filters=[];const v=c.flipH?-1:1,m=+(32-c.x*v),y=-c.y+16;u.offsetX=m,u.offsetY=y,u.offsetZIndex=g,u.baseX=this.x,u.baseY=this.y,u.baseZIndex=this.zIndex,s&&(u.baseZIndex=this.zIndex,u.offsetZIndex=-this.zIndex),l!=null&&(u.tint=parseInt(l,16));const I=this._getAlpha({baseAlpha:this.alpha,layerAlpha:o?.alpha});return o!=null&&o.ink!=null&&(this.highlight&&(u.visible=!1),u.blendMode=o.ink==="ADD"?Bd.BLEND_MODES.ADD:Bd.BLEND_MODES.NORMAL),s?this.highlight?(u.visible=!1,u.alpha=0):(u.visible=!0,u.alpha=I/5):(u.visible=!0,u.alpha=I),a&&(u.tint=16777215),this._color!=null&&(u.tint=this._color),this._setSpriteVisible(u,!1),this._sprites.set(t,u),this._overOutHandler.register(u.events),u}_getAlpha({layerAlpha:t,baseAlpha:e}){return t!=null?t/255*e:e}}const Vx=i=>{var t;return(t=i.source)!==null&&t!==void 0?t:i.name};var Jx=W&&W.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),Qx=W&&W.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),$x=W&&W.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&Jx(t,i,e);return Qx(t,i),t};Object.defineProperty(Zi,"__esModule",{value:!0});Zi.BaseFurniture=void 0;const Ld=$x(Zt),Kx=Pn,qx=Zn,tP=On,eP=Hr,rP=As,iP=ce,nP=cr,oP=bs,sP=Ln;new qx.HighlightFilter(10066329,16777215);class es{constructor({type:t,direction:e,animation:r="0",getMaskId:n=()=>{},dependencies:o,onLoad:s}){this._sprites=new Map,this._x=0,this._y=0,this._zIndex=0,this._direction=0,this._clickHandler=new Kx.ClickHandler,this._overOutHandler=new sP.EventOverOutHandler,this._fallbackVisualization=new eP.AnimatedFurnitureVisualization,this._refreshPosition=!1,this._refreshFurniture=!1,this._refreshZIndex=!1,this._highlight=!1,this._alpha=1,this._destroyed=!1,this._maskNodes=[],this._maskSprites=[],this._cancelTicker=void 0,this._onTicker=()=>{this._refreshFurniture&&(this._refreshFurniture=!1,this._updateFurniture()),this._refreshPosition&&(this._refreshPosition=!1,this._updatePosition()),this._refreshZIndex&&(this._refreshZIndex=!1,this._updateZIndex())},this._direction=e,this._animation=r,this._type=t,this._getMaskId=n,this._onLoad=s,o!=null&&(this.dependencies=o),Ld.Ticker.shared.add(this._onTicker),this._loadFurniResultPromise=new Promise(a=>{this._resolveLoadFurniResult=a})}static fromRoomContext(t,e){return new es({dependencies:{placeholder:t.configuration.placeholder,animationTicker:t.animationTicker,furnitureLoader:t.furnitureLoader,visualization:t.visualization,application:t.application,eventManager:t.eventManager},...e})}static fromShroom(t,e,r){return new es({dependencies:{animationTicker:t.dependencies.animationTicker,furnitureLoader:t.dependencies.furnitureLoader,placeholder:t.dependencies.configuration.placeholder,application:t.dependencies.application,eventManager:nP.NOOP_EVENT_MANAGER,visualization:{container:e,addMask:()=>({remove:()=>{},update:()=>{},sprite:null})}},...r})}get dependencies(){if(this._dependencies==null)throw new Error("Invalid dependencies");return this._dependencies}set dependencies(t){this._dependencies=t,this._loadFurniture()}get visualization(){return this._visualization==null?this._fallbackVisualization:this._visualization}set visualization(t){var e;(e=this._visualization)===null||e===void 0||e.destroy(),this._visualization=t,this._updateFurniture()}get mounted(){return this._dependencies!=null}get extradata(){return this._loadFurniResultPromise.then(t=>t.getExtraData())}get validDirections(){return this._loadFurniResultPromise.then(t=>t.directions)}get highlight(){return this._highlight}set highlight(t){this._highlight=t,this._refreshFurniture=!0}get alpha(){return this._alpha}set alpha(t){this._alpha=t,this._refreshFurniture=!0}get onClick(){return this._clickHandler.onClick}set onClick(t){this._clickHandler.onClick=t}get onDoubleClick(){return this._clickHandler.onDoubleClick}set onDoubleClick(t){this._clickHandler.onDoubleClick=t}get onPointerDown(){return this._clickHandler.onPointerDown}set onPointerDown(t){this._clickHandler.onPointerDown=t}get onPointerUp(){return this._clickHandler.onPointerUp}set onPointerUp(t){this._clickHandler.onPointerUp=t}get onPointerOut(){return this._overOutHandler.onOut}set onPointerOut(t){this._overOutHandler.onOut=t}get onPointerOver(){return this._overOutHandler.onOver}set onPointerOver(t){this._overOutHandler.onOver=t}get x(){return this._x}set x(t){t!==this.x&&(this._x=t,this._refreshPosition=!0)}get y(){return this._y}set y(t){t!==this.y&&(this._y=t,this._refreshPosition=!0)}get zIndex(){return this._zIndex}set zIndex(t){t!==this.zIndex&&(this._zIndex=t,this._refreshZIndex=!0)}get direction(){return this._direction}set direction(t){this._direction=t,this._updateDirection()}get animation(){return this._animation}set animation(t){this._animation=t,this.mounted&&(this.visualization.updateAnimation(this.animation),this._handleAnimationChange())}get maskId(){return this._getMaskId}set maskId(t){this._getMaskId=t}getEventGroupIdentifier(){return iP.FURNITURE}destroy(){var t;this._destroySprites(),this._destroyed=!0,Ld.Ticker.shared.remove(this._onTicker),this._cancelTicker&&this._cancelTicker(),this._cancelTicker=void 0,(t=this._view)===null||t===void 0||t.destroy()}_updateDirection(){this.mounted&&this._validDirections!=null&&this.visualization.updateDirection(rP.getDirectionForFurniture(this.direction,this._validDirections))}_updateSprites(t){this._sprites.forEach(t),this._unknownSprite!=null&&t(this._unknownSprite)}_updateZIndex(){this._updateSprites(t=>{t.baseZIndex=this.zIndex})}_updatePosition(){this._updateSprites(t=>{t.baseX=this.x,t.baseY=this.y}),this._view!=null&&(this._view.x=this.x,this._view.y=this.y,this._view.zIndex=this.zIndex,this._view.updateLayers())}_updateFurniture(){this.mounted&&(this._loadFurniResult!=null?this._updateFurnitureSprites(this._loadFurniResult):this._updateUnknown())}_updateUnknown(){this.mounted&&this._unknownSprite==null&&(this._unknownSprite=new tP.FurnitureSprite({eventManager:this.dependencies.eventManager,group:this}),this._unknownSprite.baseX=this.x,this._unknownSprite.baseY=this.y,this._unknownSprite.offsetY=-32,this._unknownTexture!=null&&(this._unknownSprite.texture=this._unknownTexture),this._unknownSprite.zIndex=this.zIndex,this.dependencies.visualization.container.addChild(this._unknownSprite),this._updatePosition())}_createNewView(t){var e,r,n;(e=this._view)===null||e===void 0||e.destroy();const o=new oP.FurnitureVisualizationView(this.dependencies.eventManager,this._clickHandler,this._overOutHandler,this.dependencies.visualization.container,t);return o.x=this.x,o.y=this.y,o.zIndex=this.zIndex,o.alpha=(r=this.alpha)!==null&&r!==void 0?r:1,o.highlight=(n=this.highlight)!==null&&n!==void 0?n:!1,this._view=o,o}_updateFurnitureSprites(t){var e;this.mounted&&(this._maskNodes.forEach(r=>r.remove()),this._maskNodes=[],(e=this._unknownSprite)===null||e===void 0||e.destroy(),this._unknownSprite=void 0,this.visualization.setView(this._createNewView(t)),this.visualization.update(this),this._validDirections=t.directions,this._updateDirection(),this.visualization.updateAnimation(this.animation),this.visualization.updateFrame(this.dependencies.animationTicker.current()),this._handleAnimationChange(),this._updatePosition())}_destroySprites(){var t;this._sprites.forEach(e=>e.destroy()),this._maskNodes.forEach(e=>e.remove()),(t=this._unknownSprite)===null||t===void 0||t.destroy(),this._sprites=new Map}_loadFurniture(){var t;this.mounted&&(this._unknownTexture=(t=this.dependencies.placeholder)!==null&&t!==void 0?t:void 0,this.dependencies.furnitureLoader.loadFurni(this._type).then(e=>{this._destroyed||(this._loadFurniResult=e,this._resolveLoadFurniResult&&this._resolveLoadFurniResult(e),this._updateFurniture(),this._onLoad&&this._onLoad())}),this._updateFurniture())}_handleAnimationChange(){this.visualization.isAnimated(this.animation)&&this._cancelTicker==null&&(this._cancelTicker=this.dependencies.animationTicker.subscribe(t=>{this.visualization.updateFrame(t)}),this.visualization.update(this),this.visualization.updateFrame(this.dependencies.animationTicker.current())),!this.visualization.isAnimated(this.animation)&&this._cancelTicker!=null&&(this._cancelTicker(),this._cancelTicker=void 0,this.visualization.update(this),this.visualization.updateFrame(this.dependencies.animationTicker.current()))}_getAlpha({layerAlpha:t,baseAlpha:e}){return t!=null?t/255*e:e}}Zi.BaseFurniture=es;var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.getFurnitureFetch=void 0;function aP(i,t){if(i.id!=null&&i.type!=null)throw new Error("Both `id` and `type` specified. Please supply only one of the two.");if(i.id!=null)return{kind:"id",id:i.id,placementType:t};if(i.type!=null)return{kind:"type",type:i.type};throw new Error("No `id` or `type` provided for the furniture.")}Gn.getFurnitureFetch=aP;Object.defineProperty(Cs,"__esModule",{value:!0});Cs.FloorFurniture=void 0;const uP=Ir,lP=kr,hP=Zi,cP=Rn,fP=Gn;class dP extends uP.RoomObject{constructor(t){var e;super(),this.placementType="floor",this._animatedPosition={roomX:0,roomY:0,roomZ:0},this._moving=!1,this._highlight=!1,this._type=t.type,this._id=t.id,this._roomX=t.roomX,this._roomY=t.roomY,this._roomZ=t.roomZ,this._direction=t.direction,this._animation=t.animation,"type"in t&&(this._type=t.type),this._baseFurniture=new hP.BaseFurniture({animation:this.animation,direction:this.direction,type:fP.getFurnitureFetch(t,"floor")}),(e=t.behaviors)===null||e===void 0||e.forEach(r=>r.setParent(this))}move(t,e,r){var n;(n=this._moveAnimation)===null||n===void 0||n.move({roomX:this.roomX,roomY:this.roomY,roomZ:this.roomZ},{roomX:t,roomY:e,roomZ:r},void 0),this._roomX=t,this._roomY=e,this._roomZ=r}clearMovement(){var t;const e=(t=this._moveAnimation)===null||t===void 0?void 0:t.clear();e!=null&&(this.roomX=e.roomX,this.roomY=e.roomY,this.roomZ=e.roomZ)}destroyed(){this._baseFurniture.destroy()}registered(){this._baseFurniture.dependencies={animationTicker:this.animationTicker,furnitureLoader:this.furnitureLoader,placeholder:this.configuration.placeholder,visualization:this.roomVisualization,eventManager:this.eventManager},this._moveAnimation=new cP.ObjectAnimation(this.animationTicker,{onStart:()=>{this._moving=!0},onStop:()=>{this._moving=!1},onUpdatePosition:t=>{this._animatedPosition=t,this._updatePosition()}},this.configuration.furnitureMovementDuration),this._updatePosition()}get highlight(){return this._highlight}set highlight(t){this._highlight=t,this._updateHighlight()}get alpha(){return this._baseFurniture.alpha}set alpha(t){this._baseFurniture.alpha=t}get type(){return this._type}get onClick(){return this._onClick}set onClick(t){this._onClick=t,this._baseFurniture.onClick=this.onClick}get onDoubleClick(){return this._onDoubleClick}set onDoubleClick(t){this._onDoubleClick=t,this._baseFurniture.onDoubleClick=this.onDoubleClick}get onPointerDown(){return this._onPointerDown}set onPointerDown(t){this._onPointerDown=t,this._baseFurniture.onPointerDown=this.onPointerDown}get onPointerUp(){return this._onPointerUp}set onPointerUp(t){this._onPointerUp=t,this._baseFurniture.onPointerUp=this.onPointerUp}get onPointerOver(){return this._onPointerOver}set onPointerOver(t){this._onPointerOver=t,this._baseFurniture.onPointerOver=this.onPointerOver}get onPointerOut(){return this._onPointerOut}set onPointerOut(t){this._onPointerOut=t,this._baseFurniture.onPointerOut=this.onPointerOut}get id(){return this._id}get extradata(){return this._baseFurniture.extradata}get validDirections(){return this._baseFurniture.validDirections}get animation(){return this._animation}set animation(t){this._animation=t,this._updateAnimation()}get direction(){return this._direction}set direction(t){this._direction=t,this._updateDirection()}get roomX(){return this._roomX}set roomX(t){this._roomX=t,this._updatePosition()}get roomY(){return this._roomY}set roomY(t){this._roomY=t,this._updatePosition()}get roomZ(){return this._roomZ}set roomZ(t){this._roomZ=t,this._updatePosition()}get visualization(){return this._baseFurniture.visualization}set visualization(t){this._baseFurniture.visualization=t}_updateDirection(){this._baseFurniture.direction=this.direction}_getDisplayRoomPosition(){return this._moving?this._animatedPosition:{roomX:this.roomX,roomY:this.roomY,roomZ:this.roomZ}}_updatePosition(){const{roomX:t,roomY:e,roomZ:r}=this._getDisplayRoomPosition(),{x:n,y:o}=this.geometry.getPosition(t,e,r),s=Math.round(t),a=Math.round(e);this._baseFurniture.x=n,this._baseFurniture.y=o,this._baseFurniture.zIndex=lP.getZOrder(s,a,this.roomZ)}_updateAnimation(){this._baseFurniture.animation=this.animation}_updateHighlight(){this._baseFurniture.highlight=this.highlight}}Cs.FloorFurniture=dP;var ws={},Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.getMaskId=void 0;function gP(i,t,e){switch(i){case 2:case 6:return`x_${t}`;case 0:case 4:return`y_${e}`}}Nn.getMaskId=gP;var xs={};Object.defineProperty(xs,"__esModule",{value:!0});xs.LegacyWallGeometry=void 0;class jn{constructor(t){this._heightmap=t,this._width=t[0].length,this._height=t.length,this._scale=64}getLocation(t,e,r,n,o){let s=t,a=e,l=this.getHeight(t,e);return o==jn.LEFT_WALL?(s=s+(r/(this._scale/2)-.5),a=a+.5,l=l-(n-r/2)/(this._scale/2)):(a=a+((this._scale/2-r)/(this._scale/2)-.5),s=s+.5,l=l-(n-(this._scale/2-r)/2)/(this._scale/2)),{x:s,y:a,z:l}}getHeight(t,e){if(t<0||t>=this._width||e<0||e>=this._height)return 0;const r=this._heightmap[e];if(r==null)return 0;const n=r[t];switch(n.type){case"wall":return n.height;case"stairs":return n.z;case"tile":return n.z}return 0}}xs.LegacyWallGeometry=jn;jn.RIGHT_WALL="l";jn.LEFT_WALL="r";Object.defineProperty(ws,"__esModule",{value:!0});ws.WallFurniture=void 0;const pP=Ir,IP=kr,vP=Zi,Rd=Nn,yP=Gn,mP=xs;class _P extends pP.RoomObject{constructor(t){super(),this.placementType="wall",this._offsetX=0,this._offsetY=0,this._highlight=!1,this._type=t.type,this._id=t.id,this._roomX=t.roomX,this._roomY=t.roomY,this._animation=t.animation,this._direction=t.direction,this._offsetX=t.offsetX,this._offsetY=t.offsetY,this._baseFurniture=new vP.BaseFurniture({animation:this.animation,direction:this.direction,type:yP.getFurnitureFetch(t,"wall"),getMaskId:e=>Rd.getMaskId(e,this.roomX,this.roomY)})}get extradata(){return this._baseFurniture.extradata}get validDirections(){return this._baseFurniture.validDirections}get id(){return this._id}get highlight(){return this._highlight}set highlight(t){this._highlight=t,this._updateHighlight()}get alpha(){return this._baseFurniture.alpha}set alpha(t){this._baseFurniture.alpha=t}get type(){return this._type}get animation(){return this._animation}set animation(t){this._animation=t,this._updateAnimation()}get direction(){return this._direction}set direction(t){this._direction=t,this._updateDirection()}get roomX(){return this._roomX}set roomX(t){this._roomX=t,this._updatePosition()}get roomY(){return this._roomY}set roomY(t){this._roomY=t,this._updatePosition()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._updatePosition()}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._updatePosition()}get visualization(){return this._baseFurniture.visualization}set visualization(t){this._baseFurniture.visualization=t}get onClick(){return this._baseFurniture.onClick}set onClick(t){this._baseFurniture.onClick=t}get onDoubleClick(){return this._baseFurniture.onDoubleClick}set onDoubleClick(t){this._baseFurniture.onDoubleClick=t}get onPointerDown(){return this._baseFurniture.onPointerDown}set onPointerDown(t){this._baseFurniture.onPointerDown=t}get onPointerUp(){return this._baseFurniture.onPointerUp}set onPointerUp(t){this._baseFurniture.onPointerUp=t}destroyed(){this._baseFurniture.destroy()}registered(){this._baseFurniture.dependencies={animationTicker:this.animationTicker,furnitureLoader:this.furnitureLoader,placeholder:void 0,visualization:this.roomVisualization,eventManager:this.eventManager},this._updatePosition()}_updateAnimation(){this._baseFurniture.animation=this.animation}_updateDirection(){this._baseFurniture.direction=this.direction}_updateHighlight(){this._baseFurniture.highlight=this.highlight}_getOffsets(t){const r=new mP.LegacyWallGeometry(this.room.getParsedTileTypes()).getLocation(this.roomX,this.roomY,this._offsetX,this._offsetY,t===2?"l":"r");if(t===2){const n=this.room.getPosition(r.x,r.y,r.z*2-.5);return{x:n.x,y:n.y-this.room.wallHeight}}else{const n=this.room.getPosition(r.x,r.y-.5,r.z*2-.5);return{x:n.x,y:n.y-this.room.wallHeight}}}_updatePosition(){if(this._getOffsets(this.direction)==null)return;const e=this._getOffsets(this.direction);this._baseFurniture.x=e.x,this._baseFurniture.y=e.y,this._baseFurniture.maskId=r=>Rd.getMaskId(r,this.roomX,this.roomY),this._baseFurniture.zIndex=IP.getZOrder(this.roomX,this.roomY,0)-1}}ws.WallFurniture=_P;var Ps={},Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.parseTileMapString=void 0;function CP(i){return i}function AP(i){return i=i.replace(/\r/g,`
`),i=i.replace(/ /g,""),i.split(`
`).map(t=>t.trim()).filter(t=>t.length>0).map(t=>t.split("").map(CP))}Wn.parseTileMapString=AP;var Ss={};Object.defineProperty(Ss,"__esModule",{value:!0});Ss.RoomObjectContainer=void 0;class bP{constructor(){this._roomObjects=new Set}get roomObjects(){return this._roomObjects}get context(){return this._context}set context(t){this._context=t}addRoomObject(t){if(this._context==null)throw new Error("Context wasn't supplied to RoomObjectContainer");this._roomObjects.has(t)||(t.setParent(this._context),this._roomObjects.add(t))}removeRoomObject(t){this._roomObjects.has(t)&&(this._roomObjects.delete(t),t.destroy())}}Ss.RoomObjectContainer=bP;var Xn={},Ts={},wP=W&&W.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),xP=W&&W.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),PP=W&&W.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&wP(t,i,e);return xP(t,i),t};Object.defineProperty(Ts,"__esModule",{value:!0});Ts.EventManagerContainer=void 0;const Zd=PP(Zt);class SP{constructor(t,e){this._application=t,this._eventManager=e,this._updateRectangle=()=>{const n=this._application.renderer,o=n.width/n.resolution,s=n.height/n.resolution;this._box=new Zd.TilingSprite(Zd.Texture.WHITE,o,s),this._box.alpha=.3},this._updateRectangle(),t.ticker.add(this._updateRectangle);const r=this._application.renderer.plugins.interaction;r.addListener("pointermove",n=>{const o=n.data.getLocalPosition(this._application.stage);this._eventManager.move(n,o.x,o.y)},!0),r.addListener("pointerup",n=>{const o=n.data.getLocalPosition(this._application.stage);this._eventManager.pointerUp(n,o.x,o.y)},!0),r.addListener("pointerdown",n=>{const o=n.data.getLocalPosition(this._application.stage);this._eventManager.pointerDown(n,o.x,o.y)},!0)}destroy(){this._application.ticker.remove(this._updateRectangle)}}Ts.EventManagerContainer=SP;var Es={},Le={},Fs={},TP=W&&W.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),EP=W&&W.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),FP=W&&W.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&TP(t,i,e);return EP(t,i),t};Object.defineProperty(Fs,"__esModule",{value:!0});Fs.createPlaneMatrix=void 0;const MP=FP(Zt);function DP(i,{width:t,height:e,x:r,y:n}){let o=i.d.x-i.c.x,s=i.d.y-i.c.y,a=i.b.x-i.c.x,l=i.b.y-i.c.y;Math.abs(a-t)<=1&&(a=t),Math.abs(l-t)<=1&&(l=t),Math.abs(o-e)<=1&&(o=e),Math.abs(s-e)<=1&&(s=e);const c=a/t,d=l/t,g=o/e,u=s/e,h=r+i.c.x,f=n+i.c.y;return new MP.Matrix(c,d,g,u,h,f)}Fs.createPlaneMatrix=DP;Object.defineProperty(Le,"__esModule",{value:!0});Le.getRightMatrix=Le.getLeftMatrix=Le.getFloorMatrix=void 0;const ac=Fs;function BP(i,t){return ac.createPlaneMatrix({c:{x:0,y:16},d:{x:32,y:0},a:{x:64,y:16},b:{x:32,y:32}},{width:32,height:32,x:i,y:t})}Le.getFloorMatrix=BP;function LP(i,t,e){return ac.createPlaneMatrix({b:{x:0,y:16},c:{x:e.width,y:16+e.width/2},d:{x:e.width,y:16+e.width/2+e.height},a:{x:0,y:16+e.height}},{width:e.width,height:e.height,x:i,y:t})}Le.getLeftMatrix=LP;function RP(i,t,e){return ac.createPlaneMatrix({b:{x:32,y:32},c:{x:32+e.width,y:32-e.width/2},d:{x:32+e.width,y:32+e.height-e.width/2},a:{x:32,y:32+e.height}},{width:e.width,height:e.height,x:i,y:t})}Le.getRightMatrix=RP;var ZP=W&&W.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),OP=W&&W.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),GP=W&&W.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&ZP(t,i,e);return OP(t,i),t};Object.defineProperty(Es,"__esModule",{value:!0});Es.Stair=void 0;const je=GP(Zt),ti=Le;class NP extends je.Container{constructor(t){super(),this._props=t,this._tileHeight=0,this._tileLeftColor=0,this._tileRightColor=0,this._tileTopColor=0,this._tileHeight=t.tileHeight,this.updateSprites()}update(t){this._tileHeight=t.tileHeight,this._tileLeftColor=t.tileLeftColor,this._tileRightColor=t.tileRightColor,this._tileTopColor=t.tileTopColor,this._texture=t.tileTexture,this.updateSprites()}updateSprites(){this.removeChildren();const{direction:t}=this._props;for(let e=0;e<4;e++)t===0?this.addChild(...this._createStairBoxDirection0(3-e)):t===2&&this.addChild(...this._createStairBoxDirection2(3-e))}_createStairBoxDirection0(t){const e=+we*t,r=-we*t*1.5,n=this._texture;function o(c,d,g){const u=new je.TilingSprite(n??je.Texture.WHITE);return u.tilePosition=g,u.transform.setFromMatrix(c),u.tint=d,u}const s=o(ti.getFloorMatrix(e,r),this._tileTopColor,new je.Point(0,0));s.width=32,s.height=8;const a=o(ti.getLeftMatrix(e,r,{width:32,height:this._tileHeight}),this._tileLeftColor,new je.Point(0,0));a.width=32,a.height=this._tileHeight;const l=o(ti.getRightMatrix(e,r,{width:8,height:this._tileHeight}),this._tileRightColor,new je.Point(0,0));return l.width=8,l.height=this._tileHeight,[a,l,s]}_createStairBoxDirection2(t){const e=-we*t,r=-we*t*1.5,n=this._texture;function o(c,d){const g=new je.TilingSprite(n??je.Texture.WHITE);return g.tilePosition=new je.Point(0,0),g.transform.setFromMatrix(c),g.tint=d,g}const s=o(ti.getFloorMatrix(e+32-we,r+we*1.5),this._tileTopColor);s.width=we,s.height=32;const a=o(ti.getLeftMatrix(e+32-we,r+we*1.5,{width:we,height:this._tileHeight}),this._tileLeftColor);a.width=we,a.height=this._tileHeight;const l=o(ti.getRightMatrix(e,r,{width:32,height:this._tileHeight}),this._tileRightColor);return l.width=32,l.height=this._tileHeight,[a,l,s]}destroy(){super.destroy(),this.removeChildren()}}Es.Stair=NP;const we=8;var Ms={},jP=W&&W.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),WP=W&&W.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),XP=W&&W.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&jP(t,i,e);return WP(t,i),t};Object.defineProperty(Ms,"__esModule",{value:!0});Ms.StairCorner=void 0;const Xt=XP(Zt),de=Le;class kP extends Xt.Container{constructor(t){super(),this._props=t,this._tileHeight=0,this._tileLeftColor=0,this._tileRightColor=0,this._tileTopColor=0,this.sortableChildren=!0}update(t){this._tileHeight=t.tileHeight,this._tileLeftColor=t.tileLeftColor,this._tileRightColor=t.tileRightColor,this._tileTopColor=t.tileTopColor,this._texture=t.tileTexture,this.updateSprites()}updateSprites(){this.removeChildren();const{type:t}=this._props;for(let e=0;e<4;e++)t==="front"?this.addChild(...this._createStairBoxFront(3-e)):t==="left"?this.addChild(...this._createStairBoxLeft(3-e)):t==="right"&&this.addChild(...this._createStairBoxRight(3-e))}destroySprites(){var t;(t=this._container)===null||t===void 0||t.destroy()}destroy(){super.destroy(),this.destroySprites()}_createStairBoxFront(t){const e=+Kt*t,r=-Kt*t*1.5,n=0,o=-Kt*t*2,s=this._texture;function a(u,h,f){const v=new Xt.TilingSprite(s??Xt.Texture.WHITE);return v.tilePosition=f,v.transform.setFromMatrix(u),v.tint=h,v}const l=a(de.getFloorMatrix(e,r),this._tileTopColor,new Xt.Point);l.width=32-8*t,l.height=8;const c=a(de.getFloorMatrix(n+32-Kt,o+Kt*1.5),this._tileTopColor,new Xt.Point(0,0));c.width=Kt,c.height=32-8*t;const d=a(de.getLeftMatrix(e-8*t,r-8*t*.5,{width:32,height:this._tileHeight}),this._tileLeftColor,new Xt.Point(0,0));d.width=32-8*t,d.height=this._tileHeight;const g=a(de.getRightMatrix(n-Kt*t,-Kt*t*1.5,{width:32,height:this._tileHeight}),this._tileRightColor,new Xt.Point(0,0));return g.width=32-8*t,g.height=this._tileHeight,[d,g,l,c]}_createStairBoxLeft(t){const e=-Kt*t,r=-Kt*t*1.5,n=this._texture;function o(l,c,d){const g=new Xt.TilingSprite(n??Xt.Texture.WHITE);return g.tilePosition=d,g.transform.setFromMatrix(l),g.tint=c,g}const s=o(de.getFloorMatrix(e+32-Kt,r+Kt*1.5),this._tileTopColor,new Xt.Point(0,0));s.width=Kt,s.height=32-8*t,s.zIndex=2;const a=o(de.getRightMatrix(e-Kt*t,-Kt*t,{width:32,height:this._tileHeight}),this._tileRightColor,new Xt.Point(0,0));if(a.width=32-8*t,a.height=this._tileHeight,a.zIndex=1,t==0){const l=o(de.getFloorMatrix(e+40,-4),this._tileTopColor,new Xt.Point(0,0));l.width=8,l.height=8,l.zIndex=0;const c=o(de.getFloorMatrix(e+24,-12),this._tileTopColor,new Xt.Point(0,0));return c.width=8,c.height=8,c.zIndex=0,[s,a,l,c]}else return[s,a]}_createStairBoxRight(t){const e=+Kt*t,r=-Kt*t*1.5,n=this._texture;function o(l,c,d){const g=new Xt.TilingSprite(n??Xt.Texture.WHITE);return g.tilePosition=d,g.transform.setFromMatrix(l),g.tint=c,g}const s=o(de.getFloorMatrix(e+8*t,r+8*t*.5),this._tileTopColor,new Xt.Point(0,0));s.width=32-8*t,s.height=8,s.zIndex=2;const a=o(de.getLeftMatrix(e,r,{width:32,height:this._tileHeight}),this._tileLeftColor,new Xt.Point(0,0));if(a.width=32-8*t,a.height=this._tileHeight,a.zIndex=1,t==0){const l=o(de.getFloorMatrix(e+8,-4),this._tileTopColor,new Xt.Point(0,0));l.width=8,l.height=8,l.zIndex=0;const c=o(de.getFloorMatrix(e+24,-12),this._tileTopColor,new Xt.Point(0,0));return c.width=8,c.height=8,c.zIndex=0,[s,a,l,c]}else return[s,a]}}Ms.StairCorner=kP;const Kt=8;var Ds={},HP=W&&W.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),YP=W&&W.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),UP=W&&W.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&HP(t,i,e);return YP(t,i),t};Object.defineProperty(Ds,"__esModule",{value:!0});Ds.Tile=void 0;const We=UP(Zt),xu=Le;class zP extends We.Container{constructor(t){super(),this.props=t,this._sprites=[],this._tilePositions=new We.Point(0,0),this._texture=t.texture,this._color=t.color,this._tileHeight=t.tileHeight,this._updateSprites()}get color(){return this._color}set color(t){this._color=t,this._updateSprites()}get tilePositions(){return this._tilePositions}set tilePositions(t){this._tilePositions=t,this._updateSprites()}get tileHeight(){return this._tileHeight}set tileHeight(t){this._tileHeight=t,this._updateSprites()}update(t){this.tileHeight=t.tileHeight,this._roomPartData=t,this._texture=t.tileTexture,this._updateSprites()}destroy(){super.destroy(),this._destroySprites()}_destroySprites(){this._sprites.forEach(t=>t.destroy()),this._sprites=[]}_updateSprites(){var t,e,r,n,o,s,a,l,c,d;(t=this._container)===null||t===void 0||t.destroy(),this._container=new We.Container,this._destroySprites();const g=xu.getFloorMatrix(0,0),u=new We.TilingSprite((e=this._texture)!==null&&e!==void 0?e:We.Texture.WHITE);u.tilePosition=this.tilePositions,u.transform.setFromMatrix(g),u.width=32,u.height=32,u.tint=(n=(r=this._roomPartData)===null||r===void 0?void 0:r.tileTopColor)!==null&&n!==void 0?n:0;const h=xu.getLeftMatrix(0,0,{width:32,height:this.tileHeight}),f=xu.getRightMatrix(0,0,{width:32,height:this.tileHeight}),v=new We.TilingSprite((o=this._texture)!==null&&o!==void 0?o:We.Texture.WHITE);v.tilePosition=this.tilePositions,v.transform.setFromMatrix(h),v.width=32,v.height=this.tileHeight,v.tint=(a=(s=this._roomPartData)===null||s===void 0?void 0:s.tileLeftColor)!==null&&a!==void 0?a:0;const m=new We.TilingSprite((l=this._texture)!==null&&l!==void 0?l:We.Texture.WHITE);m.tilePosition=this.tilePositions,m.transform.setFromMatrix(f),m.width=32,m.height=this.tileHeight,m.tint=(d=(c=this._roomPartData)===null||c===void 0?void 0:c.tileRightColor)!==null&&d!==void 0?d:0,this._sprites.push(this._container),this._container.addChild(v),this._container.addChild(m),this._container.addChild(u),this.addChild(this._container)}}Ds.Tile=zP;var Bs={},Ls={};Object.defineProperty(Ls,"__esModule",{value:!0});Ls.isPointInside=void 0;function VP(i,t){const e=i[0],r=i[1];let n=!1;for(let o=0,s=t.length-1;o<t.length;s=o++){const a=t[o][0],l=t[o][1],c=t[s][0],d=t[s][1];l>r!=d>r&&e<(c-a)*(r-l)/(d-l)+a&&(n=!n)}return n}Ls.isPointInside=VP;var JP=W&&W.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),QP=W&&W.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),$P=W&&W.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&JP(t,i,e);return QP(t,i),t};Object.defineProperty(Bs,"__esModule",{value:!0});Bs.TileCursor=void 0;const Od=$P(Zt),KP=oc,qP=Ls,tS=ce;class eS extends Od.Container{constructor(t,e,r,n,o){super(),this._eventManager=t,this._position=e,this.onClick=r,this.onOver=n,this.onOut=o,this._hover=!1,this._subject=new KP.BehaviorSubject(void 0),this._roomX=e.roomX,this._roomY=e.roomY,this._roomZ=e.roomZ,this._graphics=this._createGraphics(),this._updateGraphics(),this.addChild(this._graphics),this._eventManager.register(this)}getEventGroupIdentifier(){return tS.TILE_CURSOR}getGroup(){return this}getRectangleObservable(){return this._subject}getEventZOrder(){return-1e3}triggerPointerTargetChanged(t){}triggerClick(t){this.onClick({roomX:this._roomX,roomY:this._roomY,roomZ:this._roomZ})}triggerPointerDown(t){}triggerPointerUp(t){}triggerPointerOver(t){this._updateHover(!0),this.onOver({roomX:this._roomX,roomY:this._roomY,roomZ:this._roomZ})}triggerPointerOut(t){this._updateHover(!1),this.onOut({roomX:this._roomX,roomY:this._roomY,roomZ:this._roomZ})}createDebugSprite(){}hits(t,e){const r=this.getGlobalPosition(),n=t-r.x,o=e-r.y;return this._pointInside([n,o],[[Ft.p1.x,Ft.p1.y],[Ft.p2.x,Ft.p2.y],[Ft.p3.x,Ft.p3.y],[Ft.p4.x,Ft.p4.y]])}getHitDetectionZIndex(){return-1e3}destroy(){super.destroy(),this._graphics.destroy(),this._eventManager.remove(this)}updateTransform(){super.updateTransform(),this._subject.next(this._getCurrentRectangle())}_getCurrentRectangle(){const t=this.getGlobalPosition();return{x:t.x,y:t.y,width:64,height:32}}_createGraphics(){return new Od.Graphics}_updateGraphics(){const t=this._graphics;t!=null&&(t.clear(),this._hover&&(Pu(t,0,.33,0),Pu(t,10998240,1,-2),Pu(t,16777215,1,-3)))}_updateHover(t){this._hover!==t&&(this._hover=t,this._updateGraphics(),t?this.onOver(this._position):this.onOut(this._position))}_pointInside(t,e){return qP.isPointInside(t,e)}}Bs.TileCursor=eS;const Ft={p1:{x:0,y:16},p2:{x:32,y:0},p3:{x:64,y:16},p4:{x:32,y:32}};function Pu(i,t,e=1,r){i.beginFill(t,e),i.moveTo(Ft.p1.x,Ft.p1.y+r),i.lineTo(Ft.p2.x,Ft.p2.y+r),i.lineTo(Ft.p3.x,Ft.p3.y+r),i.lineTo(Ft.p4.x,Ft.p4.y+r),i.endFill(),i.beginHole(),i.moveTo(Ft.p1.x+6,Ft.p1.y+r),i.lineTo(Ft.p2.x,Ft.p2.y+3+r),i.lineTo(Ft.p3.x-6,Ft.p3.y+r),i.lineTo(Ft.p4.x,Ft.p4.y-3+r),i.endHole()}var Oi={},rS=W&&W.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),iS=W&&W.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),nS=W&&W.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&rS(t,i,e);return iS(t,i),t};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.WallLeft=void 0;const ee=nS(Zt);class oS extends ee.Container{constructor(t){super(),this.props=t,this._offsets={x:0,y:0},this._borderWidth=0,this._wallHeight=0,this._wallWidth=32,this._tileHeight=0,this._wallLeftColor=0,this._wallRightColor=0,this._wallTopColor=0,this._drawHitArea=!1,this._hideBorder=!1,this._roomZ=0,this._hideBorder=t.hideBorder}get roomZ(){return this._roomZ}set roomZ(t){this._roomZ=t,this._update()}get wallY(){return-this._wallHeight}get wallHeight(){return this.props.cutawayHeight!=null?this._wallHeight-this.props.cutawayHeight:this._wallHeight}update(t){this._borderWidth=t.borderWidth,this._wallHeight=t.wallHeight-this.roomZ*32,this._tileHeight=t.tileHeight,this._wallLeftColor=t.wallLeftColor,this._wallRightColor=t.wallRightColor,this._wallTopColor=t.wallTopColor,this._wallTexture=t.wallTexture,this._update()}destroy(){var t;super.destroy(),(t=this._hitAreaElement)===null||t===void 0||t.destroy(),this.removeChildren()}_update(){this._hitAreaElement!=null&&(this.props.hitAreaContainer.removeChild(this._hitAreaElement),this._hitAreaElement=void 0),this.removeChildren();const t=new ee.Polygon(this._getDisplayPoints());this.hitArea=t;const e=this._createPrimarySprite(),r=this._createBorderSprite(),n=this._createTopSprite();this.addChild(e),this._hideBorder||this.addChild(r),this.addChild(n);const o=new ee.Graphics;o.beginFill(16711935),o.drawPolygon(t),o.alpha=this._drawHitArea?1:0,o.endFill();const s=a=>{if(a.target===o){const l=a.data.getLocalPosition(o);this.props.onMouseMove({offsetX:l.x,offsetY:l.y})}};o.addListener("mousemove",s),o.addListener("mouseover",s),o.addListener("mouseout",()=>{this.props.onMouseOut()}),o.interactive=!0,this._hitAreaElement=o,this._hitAreaElement.x=this.x,this._hitAreaElement.y=this.y,this._hitAreaElement.scale=this.scale,this.props.hitAreaContainer.addChild(this._hitAreaElement)}_getDisplayPoints(){var t,e;return[new ee.Point(this._getOffsetX()+this._borderWidth,this._wallWidth/2-((t=this.props.cutawayHeight)!==null&&t!==void 0?t:0)),new ee.Point(this._getOffsetX()+this._wallWidth+this._borderWidth,-((e=this.props.cutawayHeight)!==null&&e!==void 0?e:0)),new ee.Point(this._getOffsetX()+this._wallWidth+this._borderWidth,-this._wallHeight),new ee.Point(this._getOffsetX()+this._borderWidth,-this._wallHeight+this._wallWidth/2)]}_getOffsetX(){return this.scale.x*this._offsets.x-this._borderWidth}_createPrimarySprite(){var t;const e=new ee.TilingSprite((t=this._wallTexture)!==null&&t!==void 0?t:ee.Texture.WHITE,this._wallWidth,this.wallHeight);return e.transform.setFromMatrix(new ee.Matrix(-1,.5,0,1)),e.x=this._getOffsetX()+this._borderWidth+this._wallWidth,e.y=this.wallY,e.tint=this._wallLeftColor,e}_createBorderSprite(){const t=new ee.TilingSprite(ee.Texture.WHITE,this._borderWidth,this._wallHeight+this._tileHeight);return t.transform.setFromMatrix(new ee.Matrix(-1,-.5,0,1)),t.y=this.wallY+this._wallWidth/2,t.x=this._getOffsetX()+this._borderWidth,t.tint=this._wallRightColor,t}_createTopSprite(){const t=new ee.TilingSprite(ee.Texture.WHITE,this._borderWidth,this._wallWidth);return t.transform.setFromMatrix(new ee.Matrix(1,.5,1,-.5)),t.x=this._getOffsetX()+0,t.y=this.wallY+this._wallWidth/2-this._borderWidth/2,t.tint=this._wallTopColor,t}}Oi.WallLeft=oS;var Rs={},sS=W&&W.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),aS=W&&W.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),uS=W&&W.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&sS(t,i,e);return aS(t,i),t};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.WallOuterCorner=void 0;const xo=uS(Zt);class lS extends xo.Container{constructor(){super(),this._borderWidth=0,this._wallHeight=0,this._roomZ=0,this._wallTopColor=0}get roomZ(){return this._roomZ}set roomZ(t){this._roomZ=t,this._update()}get wallY(){return-this._wallHeight}update(t){this._borderWidth=t.borderWidth,this._wallHeight=t.wallHeight,this._wallTopColor=t.wallTopColor,this._update()}_createTopSprite(){const t=new xo.TilingSprite(xo.Texture.WHITE,this._borderWidth,this._borderWidth);return t.transform.setFromMatrix(new xo.Matrix(1,.5,1,-.5)),t.tint=this._wallTopColor,t.x=-this._borderWidth,t.y=-this._wallHeight+this.roomZ*32-32/2+this._borderWidth/2+(32-this._borderWidth),t}_update(){this.removeChildren(),this.addChild(this._createTopSprite())}}Rs.WallOuterCorner=lS;var kn={};Object.defineProperty(kn,"__esModule",{value:!0});kn.WallRight=void 0;const hS=Oi;class cS extends hS.WallLeft{constructor(t){super(t)}_update(){this._offsets={x:this._wallWidth,y:0},this.scale.x=-1;const t=this._wallLeftColor;this._wallLeftColor=this._wallRightColor,this._wallRightColor=t,super._update()}}kn.WallRight=cS;var Zs={},Os={};Object.defineProperty(Os,"__esModule",{value:!0});Os.getPosition=void 0;function fS(i,t,e,r){i=i+r.x,t=t+r.y;const n=32,o=i*n-t*n,s=i*(n/2)+t*(n/2);return{x:o,y:s-e*32}}Os.getPosition=fS;Object.defineProperty(Zs,"__esModule",{value:!0});Zs.getTileMapBounds=void 0;const dS=Os;function gS(i,t){let e,r,n,o;if(i.forEach((s,a)=>{s.forEach((l,c)=>{if(l.type!=="tile")return;const d=dS.getPosition(c,a,l.z,t),g=d.x+64,u=d.y+32;(e==null||d.x<e)&&(e=d.x),(r==null||d.y<r)&&(r=d.y),(n==null||g>n)&&(n=g),(o==null||u>o)&&(o=u)})}),e==null||r==null||n==null||o==null)throw new Error("Couldnt figure out dimensions");return{minX:e,minY:r-32,maxX:n,maxY:o-32}}Zs.getTileMapBounds=gS;var pS=W&&W.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),IS=W&&W.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),vS=W&&W.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&pS(t,i,e);return IS(t,i),t};Object.defineProperty(Xn,"__esModule",{value:!0});Xn.RoomModelVisualization=void 0;const ge=vS(Zt),Su=oc,yS=kr,mS=Ts,_S=Es,CS=Ms,AS=Ds,bS=Bs,wS=Oi,xS=Rs,PS=kn,SS=Zs;class TS extends ge.Container{constructor(t,e,r){super(),this._eventManager=t,this._application=e,this.parsedTileMap=r,this._hideTileCursor=!1,this._hideWalls=!1,this._hideFloor=!1,this._positionalContainer=new ge.Container,this._behindWallLayer=new ge.Container,this._wallLayer=new ge.Container,this._tileLayer=new ge.Container,this._primaryLayer=new ge.Container,this._landscapeLayer=new ge.Container,this._wallHitAreaLayer=new ge.Container,this._masksLayer=new ge.Container,this._walls=[],this._tiles=[],this._tileCursors=[],this._masks=new Map,this._parts=new Set,this._borderWidth=8,this._tileHeight=8,this._wallHeight=116,this._onActiveTileChange=new Su.Subject,this._onActiveWallChange=new Su.Subject,this._onTileClick=new Su.Subject,this._refreshRoom=!1,this._rebuildRoom=!1,this._handleTick=()=>{this._rebuildRoom&&(this._updateHeightmap(),this._rebuildRoom=!1),this._refreshRoom&&(this._updateParts(),this._refreshRoom=!1)},this._tileMapBounds=SS.getTileMapBounds(this.parsedTileMap.parsedTileTypes,{x:this.parsedTileMap.wallOffsets.x,y:this.parsedTileMap.wallOffsets.y}),this._positionalContainer.addChild(this._behindWallLayer),this._positionalContainer.addChild(this._wallLayer),this._positionalContainer.addChild(this._wallHitAreaLayer),this._positionalContainer.addChild(this._tileLayer),this._positionalContainer.addChild(this._landscapeLayer),this._positionalContainer.addChild(this._primaryLayer),this._positionalContainer.addChild(this._masksLayer),this._positionalContainer.x=-this.roomBounds.minX,this._positionalContainer.y=-this.roomBounds.minY,this._primaryLayer.sortableChildren=!0,this._tileLayer.sortableChildren=!0,this.addChild(this._positionalContainer),new mS.EventManagerContainer(this._application,this._eventManager),this._updateHeightmap(),this._application.ticker.add(this._handleTick)}addPart(t){return this._parts.add(t),t.update(this._getCurrentRoomPartData()),{remove:()=>{this._parts.delete(t)}}}getMaskLevel(t,e){return{roomX:t,roomY:e}}get onTileClick(){return this._onTileClick}get hideFloor(){return this._hideFloor}set hideFloor(t){this._hideFloor=t,this._rebuildRoom=!0}get hideWalls(){return this._hideWalls}set hideWalls(t){this._hideWalls=t,this._rebuildRoom=!0}get hideTileCursor(){return this._hideTileCursor}set hideTileCursor(t){this._hideTileCursor=t,this._rebuildRoom=!0}get wallTexture(){return this._wallTexture}set wallTexture(t){this._wallTexture=t,this._refreshRoom=!0}get floorTexture(){return this._floorTexture}set floorTexture(t){this._floorTexture=t,this._refreshRoom=!0}get wallHeight(){return this._wallHeight}set wallHeight(t){this._wallHeight=t,this._refreshRoom=!0}get tileHeight(){return this._tileHeight}set tileHeight(t){this._tileHeight=t,this._refreshRoom=!0}get wallDepth(){return this._borderWidth}set wallDepth(t){this._borderWidth=t,this._refreshRoom=!0}get roomBounds(){const t=this.hideWalls||this.hideFloor,e=t?0:-this._wallHeight-this._borderWidth,r=t?0:-this._borderWidth,n=t?0:this._borderWidth,o=t?0:this._tileHeight;return{minX:this._tileMapBounds.minX+r,maxX:this._tileMapBounds.maxX+n,minY:this._tileMapBounds.minY+e,maxY:this._tileMapBounds.maxY+o}}get rectangle(){return{x:this.x,y:this.y,width:this.roomBounds.maxX-this.roomBounds.minX,height:this.roomBounds.maxY-this.roomBounds.minY}}get wallLeftColor(){return this._wallLeftColor}set wallLeftColor(t){this._wallLeftColor=t,this._refreshRoom=!0}get wallRightColor(){return this._wallRightColor}set wallRightColor(t){this._wallRightColor=t,this._refreshRoom=!0}get wallTopColor(){return this._wallTopColor}set wallTopColor(t){this._wallTopColor=t,this._refreshRoom=!0}get tileLeftColor(){return this._tileLeftColor}set tileLeftColor(t){this._tileLeftColor=t,this._refreshRoom=!0}get tileRightColor(){return this._tileRightColor}set tileRightColor(t){this._tileRightColor=t,this._refreshRoom=!0}get tileTopColor(){return this._tileTopColor}set tileTopColor(t){this._tileTopColor=t,this._refreshRoom=!0}get onActiveTileChange(){return this._onActiveTileChange.asObservable()}get onActiveWallChange(){return this._onActiveWallChange.asObservable()}get container(){return this._primaryLayer}get behindWallContainer(){return this._behindWallLayer}get landscapeContainer(){return this._landscapeLayer}get floorContainer(){return this._tileLayer}get wallContainer(){return this._wallLayer}destroy(){super.destroy(),this._destroyAllSprites()}addMask(t,e){return{update:()=>{},remove:()=>{},sprite:e}}getScreenPosition(t,e,r){return this._getPosition(t,e,r)}_getCurrentRoomPartData(){var t,e,r,n,o,s,a,l;return{borderWidth:this._borderWidth,tileHeight:this._tileHeight,wallHeight:this._getLargestWallHeight(),wallLeftColor:(t=this._wallLeftColor)!==null&&t!==void 0?t:9540767,wallRightColor:(e=this._wallRightColor)!==null&&e!==void 0?e:12304077,wallTopColor:(r=this._wallTopColor)!==null&&r!==void 0?r:7369339,tileLeftColor:(n=this._tileLeftColor)!==null&&n!==void 0?n:8618839,tileRightColor:(o=this._tileRightColor)!==null&&o!==void 0?o:6710852,tileTopColor:(s=this._tileTopColor)!==null&&s!==void 0?s:10000485,tileTexture:(a=this._floorTexture)!==null&&a!==void 0?a:ge.Texture.WHITE,wallTexture:(l=this._wallTexture)!==null&&l!==void 0?l:ge.Texture.WHITE,masks:this._masks}}_setCache(t){[this._tileLayer,this._wallLayer].forEach(e=>e.cacheAsBitmap=t)}_getLargestWallHeight(){return this.parsedTileMap.largestDiff*32+this._wallHeight}_destroyAllSprites(){[...this._tileCursors,...this._tiles,...this._walls].forEach(t=>t.destroy()),this._tileCursors=[],this._tiles=[],this._walls=[]}_updateHeightmap(){this._destroyAllSprites();for(let t=0;t<this.parsedTileMap.parsedTileTypes.length;t++)for(let e=0;e<this.parsedTileMap.parsedTileTypes[t].length;e++){const r=this.parsedTileMap.parsedTileTypes[t][e];this._createHeightmapElement(r,e,t)}this._updateParts(),this._positionalContainer.x=-this.roomBounds.minX,this._positionalContainer.y=-this.roomBounds.minY}_updateParts(){this._setCache(!1),[...this._tiles,...this._walls,...this._parts].forEach(t=>t.update(this._getCurrentRoomPartData())),this._setCache(!0)}_createHeightmapElement(t,e,r){switch(t.type){case"wall":this._createWallElement(t,e,r,t.height);break;case"tile":this._createTileElement(e,r,t.z);break;case"door":this._createDoor(e,r,t.z);break;case"stairs":this._createStair(e,r,t.z,t.kind);break;case"stairCorner":this._createStairCorner(e,r,t.z,t.kind);break}}_createStairCorner(t,e,r,n){const o=new CS.StairCorner({type:n}),s=this._getPosition(t,e,r);o.x=s.x,o.y=s.y,this._tiles.push(o),this._tileLayer.addChild(o),this._createTileCursor(t,e,r),this._createTileCursor(t,e,r+1)}_createStair(t,e,r,n){const o=new _S.Stair({tileHeight:this._tileHeight,direction:n}),s=this._getPosition(t,e,r);o.x=s.x,o.y=s.y,this._tiles.push(o),this._tileLayer.addChild(o),this._createTileCursor(t,e,r),this._createTileCursor(t,e,r+1)}_createDoor(t,e,r){this._createTileElement(t,e,r,this._behindWallLayer),this._createLeftWall(t,e,r,{hideBorder:!1,cutawayHeight:90})}_createTileElement(t,e,r,n){if(this._hideFloor)return;const o=new AS.Tile({color:"#eeeeee",tileHeight:this._tileHeight}),s=t%2===0,a=e%2===0;o.tilePositions=new ge.Point(s?32:0,a?32:0);const l=this._getPosition(t,e,r);o.x=l.x,o.y=l.y,(n??this._tileLayer).addChild(o),this._tiles.push(o),this._createTileCursor(t,e,r,n)}_createTileCursor(t,e,r,n){if(this._hideTileCursor)return;const o={roomX:t,roomY:e,roomZ:r},s=new bS.TileCursor(this._eventManager,o,()=>{this._onTileClick.next(o)},()=>{this._onActiveTileChange.next(o)},()=>{this._onActiveTileChange.next(void 0)}),{x:a,y:l}=this._getPosition(t,e,r);s.x=a,s.y=l,s.zIndex=yS.getZOrder(t,e,r)-1e3,this._tileCursors.push(s),(n??this._primaryLayer).addChild(s)}_createRightWall(t,e,r,n){var o;const s=new PS.WallRight({hideBorder:(o=n.hideBorder)!==null&&o!==void 0?o:!1,onMouseMove:c=>{this._onActiveWallChange.next({roomX:t,roomY:e,offsetX:-c.offsetX-16,offsetY:c.offsetY/2+this._wallHeight/2-c.offsetX/4+r*16-8,wall:"r"})},onMouseOut:()=>{this._onActiveWallChange.next(void 0)},hitAreaContainer:this._wallHitAreaLayer}),{x:a,y:l}=this._getPosition(t,e+1,r);s.x=a+32,s.y=l,s.roomZ=r,this._wallLayer.addChild(s),this._walls.push(s)}_createLeftWall(t,e,r,{hideBorder:n=!1,cutawayHeight:o}){if(this._hideWalls)return;const s=new wS.WallLeft({hideBorder:n,onMouseMove:c=>{this._onActiveWallChange.next({roomX:t,roomY:e,offsetX:c.offsetX,offsetY:c.offsetY/2+this._wallHeight/2-c.offsetX/4+r*16,wall:"l"})},onMouseOut:()=>{this._onActiveWallChange.next(void 0)},hitAreaContainer:this._wallHitAreaLayer,cutawayHeight:o}),{x:a,y:l}=this._getPosition(t+1,e,r);s.x=a,s.y=l,s.roomZ=r,this._wallLayer.addChild(s),this._walls.push(s)}_createOuterBorder(t,e,r){const n=new xS.WallOuterCorner,{x:o,y:s}=this._getPosition(t+1,e,r);n.x=o,n.y=s,n.roomZ=r,this._wallLayer.addChild(n),this._walls.push(n)}_createWallElement(t,e,r,n){if(!(this._hideWalls||this._hideFloor))switch(t.kind){case"colWall":this._createRightWall(e,r,n,{hideBorder:t.hideBorder});break;case"rowWall":this._createLeftWall(e,r,n,{hideBorder:t.hideBorder});break;case"innerCorner":this._createRightWall(e,r,n,{hideBorder:!1}),this._createLeftWall(e,r,n,{hideBorder:!0});break;case"outerCorner":this._createOuterBorder(e,r,n);break}}_getPosition(t,e,r){const n=()=>({x:t,y:e}),{x:o,y:s}=n(),a=32,l=o*a-s*a,c=o*(a/2)+s*(a/2);return{x:l,y:c-r*32}}}Xn.RoomModelVisualization=TS;var Gs={},Ns={},fr={},js={};Object.defineProperty(js,"__esModule",{value:!0});js.isTile=void 0;const ES=i=>!isNaN(Number(i));js.isTile=ES;Object.defineProperty(fr,"__esModule",{value:!0});fr.getTileInfo=fr.getNumberOfTileType=void 0;const Ut=js,Gd={none:{x:0,y:0},top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},topLeft:{x:-1,y:-1},bottomLeft:{x:-1,y:1},right:{x:1,y:0},topRight:{x:1,y:-1},bottomRight:{x:1,y:1}};function jv(i){if(i==="x"||i==null)return"x";const t=Number(i);return isNaN(t)?i.charCodeAt(0)-96+9:t}fr.getNumberOfTileType=jv;const ue=(i,t,e,r="none")=>(t=t+Gd[r].x,e=e+Gd[r].y,i[e]==null||i[e][t]==null?"x":jv(i[e][t]));function FS(i,t,e){const r=ue(i,t,e),n=ue(i,t-1,e),o=ue(i,t,e-1),s=ue(i,t-1,e-1),a=ue(i,t-1,e+1),l=ue(i,t,e+1),c=ue(i,t+1,e),d=o==="x"&&n==="x"&&s==="x"&&l==="x"&&a==="x"&&Ut.isTile(c)&&Ut.isTile(r),g=MS(i,t,e),u=Ut.isTile(r)?r:void 0;return{rowEdge:n==="x"&&Ut.isTile(r),colEdge:o==="x"&&Ut.isTile(r),innerEdge:s==="x"&&Ut.isTile(r)&&Ut.isTile(o)&&Ut.isTile(n),stairs:g,height:u,rowDoor:d}}fr.getTileInfo=FS;function MS(i,t,e){const r=ue(i,t,e),n=ue(i,t,e,"top"),o=ue(i,t,e,"left"),s=ue(i,t,e,"right"),a=ue(i,t,e,"topLeft"),l=ue(i,t,e,"bottomLeft"),c=ue(i,t,e,"topRight");if(Ut.isTile(n)&&Ut.isTile(r)&&Number(n)-Number(r)===1)return{direction:0};if(Ut.isTile(o)&&Ut.isTile(r)&&Number(o)-Number(r)===1)return{direction:2};if(Ut.isTile(l)&&Ut.isTile(r)&&(o==="x"||Number(o)<=Number(r))&&Number(l)-Number(r)===1)return{cornerType:"left",isCorner:!0};if(Ut.isTile(c)&&Ut.isTile(r)&&(s==="x"||Number(s)<=Number(r))&&Number(c)-Number(r)===1)return{cornerType:"right",isCorner:!0};if(Ut.isTile(a)&&Ut.isTile(r)&&(o==="x"||Number(o)<=Number(r))&&Number(a)-Number(r)===1)return{cornerType:"front",isCorner:!0}}var Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.getColumnWalls=void 0;const DS=fr;function BS(i){var t;let e=i[0].length-1,r,n,o;const s=[];for(let a=0;a<i.length;a++)for(let l=e;l>=0;l--){const c=DS.getTileInfo(i,l,a);c.colEdge&&!c.rowDoor?(r==null&&(r=l),n=l,e=l-1,(o==null||((t=c.height)!==null&&t!==void 0?t:0)<o)&&(o=c.height)):r!=null&&n!=null&&(s.push({startX:n,endX:r,y:a-1,height:o??0}),r=void 0,n=void 0,o=void 0)}return s}Ws.getColumnWalls=BS;var Xs={};Object.defineProperty(Xs,"__esModule",{value:!0});Xs.getRowWalls=void 0;const LS=fr;function RS(i){var t;let e=i.length-1,r,n,o;const s=[];for(let a=0;a<i[0].length;a++)for(let l=e;l>=0;l--){const c=LS.getTileInfo(i,a,l);c.rowEdge&&!c.rowDoor?(r==null&&(r=l),n=l,e=l-1,(o==null||((t=c.height)!==null&&t!==void 0?t:0)<o)&&(o=c.height)):r!=null&&n!=null&&(s.push({startY:n,endY:r,x:a-1,height:o??0}),r=void 0,n=void 0,o=void 0)}return s}Xs.getRowWalls=RS;var ks={};Object.defineProperty(ks,"__esModule",{value:!0});ks.padTileMap=void 0;function ZS(i){const t=i[0];if(t==null)throw new Error("Invalid row");let e=0,r=0;return t.some(o=>o!=="x")&&(i=[t.map(()=>"x"),...i],e+=1),i.filter(o=>o[0]!=="x").length>1&&(i=i.map(o=>["x",...o]),r+=1),{tilemap:i,offsetX:r,offsetY:e}}ks.padTileMap=ZS;Object.defineProperty(Ns,"__esModule",{value:!0});Ns.parseTileMap=void 0;const Tu=fr,OS=Ws,GS=Xs,NS=ks;function jS(i){var t;const e=new WS(GS.getRowWalls(i),OS.getColumnWalls(i));NS.padTileMap(i);const r=i.map(d=>d.map(()=>({type:"hidden"})));let n,o,s=!1;function a(d){(o==null||d>o)&&(o=d),(n==null||d<n)&&(n=d)}for(let d=0;d<i.length;d++)for(let g=0;g<i[d].length;g++){const u=g,h=d,f=Tu.getTileInfo(i,g,d),v=Tu.getTileInfo(i,g,d+1),m=Tu.getTileInfo(i,g+1,d),y=e.getWall(g,d);if(y!=null)switch(y.kind){case"column":{const I=v.height!=null?Math.abs(v.height-y.height):0;r[h][u]={kind:"colWall",type:"wall",height:y.height,hideBorder:I>0};break}case"row":{const I=m.height!=null?Math.abs(m.height-y.height):0;r[h][u]={kind:"rowWall",type:"wall",height:y.height,hideBorder:v.rowDoor||I>0};break}case"innerCorner":{r[h][u]={kind:"innerCorner",type:"wall",height:y.height};break}case"outerCorner":{r[h][u]={kind:"outerCorner",type:"wall",height:y.height};break}}!f.rowDoor||s?f.stairs!=null&&f.height!=null?(f.stairs.isCorner?r[h][u]={type:"stairCorner",kind:f.stairs.cornerType,z:f.height}:f.stairs.direction!=null&&(r[h][u]={type:"stairs",kind:f.stairs.direction,z:f.height}),a(f.height)):f.height!=null&&(r[h][u]={type:"tile",z:f.height},a(f.height)):(s=!0,r[h][u]={type:"door",z:(t=f.height)!==null&&t!==void 0?t:0})}let l=0;n!=null&&o!=null&&(l=o-n);const c={x:1,y:1};return{tilemap:r,largestDiff:l,wallOffsets:c,positionOffsets:{x:0,y:0},maskOffsets:{x:-c.x,y:-c.y}}}Ns.parseTileMap=jS;class WS{constructor(t,e){this._rowWalls=new Map,this._colWalls=new Map,t.forEach(r=>{for(let n=r.startY;n<=r.endY;n++)this._rowWalls.set(`${r.x}_${n}`,r)}),e.forEach(r=>{for(let n=r.startX;n<=r.endX;n++)this._colWalls.set(`${n}_${r.y}`,r)})}getWall(t,e){const r=this._getColWall(t+1,e),n=this._getRowWall(t,e+1);if(r!=null&&n!=null)return{kind:"outerCorner",height:Math.min(r.height,n.height)};const o=this._getColWall(t,e),s=this._getRowWall(t,e);if(o!=null&&s!=null)return{kind:"innerCorner",height:Math.min(o.height,s.height)};const a=this._getRowWall(t,e);if(a!=null)return{kind:"row",height:a.height};const l=this._getColWall(t,e);if(l!=null)return{kind:"column",height:l.height}}_getRowWall(t,e){return this._rowWalls.get(`${t}_${e}`)}_getColWall(t,e){return this._colWalls.get(`${t}_${e}`)}}Object.defineProperty(Gs,"__esModule",{value:!0});Gs.ParsedTileMap=void 0;const XS=Ns;class kS{constructor(t){this.tilemap=t,this._data=XS.parseTileMap(t)}get largestDiff(){return this._data.largestDiff}get parsedTileTypes(){return this._data.tilemap}get wallOffsets(){return this._data.wallOffsets}}Gs.ParsedTileMap=kS;var Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.getWallColors=Ci.getTileColors=void 0;function HS(i){const t=ai(i),e=ai(rs(i,-20)),r=ai(rs(i,-40));return{tileTint:t,borderLeftTint:e,borderRightTint:r}}Ci.getTileColors=HS;function YS(i){const t=ai(i),e=ai(rs(i,-103)),r=ai(rs(i,-52));return{topTint:e,leftTint:t,rightTint:r}}Ci.getWallColors=YS;function ai(i){return parseInt(i.replace("#","0x"),16)}function rs(i,t){return"#"+i.replace(/^#/,"").replace(/../g,e=>("0"+Math.min(255,Math.max(0,parseInt(e,16)+t)).toString(16)).substr(-2))}var US=W&&W.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),zS=W&&W.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),VS=W&&W.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&US(t,i,e);return zS(t,i),t};Object.defineProperty(Ps,"__esModule",{value:!0});Ps.Room=void 0;const JS=VS(Zt),QS=Wn,$S=Ss,KS=Xn,qS=Gs,Nd=Ci,tT=cr;class uc extends JS.Container{constructor({animationTicker:t,avatarLoader:e,furnitureLoader:r,tilemap:n,configuration:o,application:s}){super();const a=typeof n=="string"?QS.parseTileMapString(n):n;this._application=s,this._animationTicker=t,this._furnitureLoader=r,this._avatarLoader=e,this._eventManager=new tT.EventManager,this._configuration=o,this.application=s,this._visualization=new KS.RoomModelVisualization(this._eventManager,this.application,new qS.ParsedTileMap(a)),this._roomObjectContainer=new $S.RoomObjectContainer,this._roomObjectContainer.context={geometry:this,visualization:this._visualization,animationTicker:this._animationTicker,furnitureLoader:this._furnitureLoader,roomObjectContainer:this,avatarLoader:this._avatarLoader,eventManager:this._eventManager,configuration:this._configuration,tilemap:this,landscapeContainer:this._visualization,application:this._application,room:this},this.addChild(this._visualization),this._visualization.onTileClick.subscribe(l=>{this.onTileClick&&this.onTileClick(l)})}get onActiveTileChange(){return this._visualization.onActiveTileChange}get onActiveWallChange(){return this._visualization.onActiveWallChange}static create(t,{tilemap:e}){return new uc({...t.dependencies,tilemap:e})}get roomObjects(){return this._roomObjectContainer.roomObjects}get hideWalls(){return this._visualization.hideWalls}set hideWalls(t){this._visualization.hideWalls=t}get hideFloor(){return this._visualization.hideFloor}set hideFloor(t){this._visualization.hideFloor=t}get hideTileCursor(){return this._visualization.hideTileCursor}set hideTileCursor(t){this._visualization.hideTileCursor=t}get wallHeight(){return this._visualization.wallHeight}set wallHeight(t){this._visualization.wallHeight=t}get tileHeight(){return this._visualization.tileHeight}set tileHeight(t){this._visualization.tileHeight=t}get wallDepth(){return this._visualization.wallDepth}set wallDepth(t){this._visualization.wallDepth=t}get onTileClick(){return this._onTileClick}set onTileClick(t){this._onTileClick=t}get wallTexture(){return this._wallTexture}set wallTexture(t){this._wallTexture=t,this._loadWallTextures()}get floorTexture(){return this._floorTexture}set floorTexture(t){this._floorTexture=t,this._loadFloorTextures()}get wallColor(){return this._wallColor}set wallColor(t){this._wallColor=t,this._updateWallColor()}get floorColor(){return this._floorColor}set floorColor(t){this._floorColor=t,this._updateTileColor()}get roomHeight(){return this._visualization.rectangle.height}get roomWidth(){return this._visualization.rectangle.width}getParsedTileTypes(){return this._visualization.parsedTileMap.parsedTileTypes}addRoomObject(t){this._roomObjectContainer.addRoomObject(t)}removeRoomObject(t){this._roomObjectContainer.removeRoomObject(t)}getPosition(t,e,r){return this._visualization.getScreenPosition(t,e,r)}getTileAtPosition(t,e){const{x:r,y:n}=this._getObjectPositionWithOffset(t,e),o=this._visualization.parsedTileMap.parsedTileTypes[n];if(o!=null&&o[r]!=null)return o[r]}destroy(){super.destroy(),this.roomObjects.forEach(t=>this.removeRoomObject(t)),this._visualization.destroy()}_getObjectPositionWithOffset(t,e){return{x:t,y:e}}_loadWallTextures(){Promise.resolve(this.wallTexture).then(t=>{this._currentWallTexture=t,this._visualization.wallTexture=t})}_loadFloorTextures(){Promise.resolve(this.floorTexture).then(t=>{this._visualization.floorTexture=t})}_updateWallColor(){const t=Nd.getWallColors(this._getWallColor());this._visualization.wallLeftColor=t.rightTint,this._visualization.wallRightColor=t.leftTint,this._visualization.wallTopColor=t.topTint}_updateTileColor(){if(this._floorColor!=null){const t=Nd.getTileColors(this._floorColor);this._visualization.tileTopColor=t.tileTint,this._visualization.tileLeftColor=t.borderRightTint,this._visualization.tileRightColor=t.borderLeftTint}else this._visualization.tileTopColor=void 0,this._visualization.tileLeftColor=void 0,this._visualization.tileRightColor=void 0}_getWallColor(){var t;return this.wallColor==null&&this._currentWallTexture!=null?"#ffffff":this.wallColor==null&&this._currentWallTexture==null?"#b6b8c7":(t=this.wallColor)!==null&&t!==void 0?t:"#ffffff"}}Ps.Room=uc;var Hs={},Wv={exports:{}};(function(i,t){var e=e||function(){var r=[];return{getAll:function(){return r},removeAll:function(){r=[]},add:function(n){r.push(n)},remove:function(n){var o=r.indexOf(n);o!==-1&&r.splice(o,1)},update:function(n,o){if(r.length===0)return!1;var s=0;for(n=n!==void 0?n:e.now();s<r.length;)r[s].update(n)||o?s++:r.splice(s,1);return!0}}}();typeof window>"u"&&typeof process<"u"?e.now=function(){var r=process.hrtime();return r[0]*1e3+r[1]/1e6}:typeof window<"u"&&window.performance!==void 0&&window.performance.now!==void 0?e.now=window.performance.now.bind(window.performance):Date.now!==void 0?e.now=Date.now:e.now=function(){return new Date().getTime()},e.Tween=function(r){var n=r,o={},s={},a={},l=1e3,c=0,d,g=!1,u=!1,h=0,f=null,v=e.Easing.Linear.None,m=e.Interpolation.Linear,y=[],I=null,p=!1,_=null,A=null,b=null;this.to=function(P,E){return s=P,E!==void 0&&(l=E),this},this.start=function(P){e.add(this),u=!0,p=!1,f=P!==void 0?P:e.now(),f+=h;for(var E in s){if(s[E]instanceof Array){if(s[E].length===0)continue;s[E]=[n[E]].concat(s[E])}n[E]!==void 0&&(o[E]=n[E],o[E]instanceof Array||(o[E]*=1),a[E]=o[E]||0)}return this},this.stop=function(){return u?(e.remove(this),u=!1,b!==null&&b.call(n,n),this.stopChainedTweens(),this):this},this.end=function(){return this.update(f+l),this},this.stopChainedTweens=function(){for(var P=0,E=y.length;P<E;P++)y[P].stop()},this.delay=function(P){return h=P,this},this.repeat=function(P){return c=P,this},this.repeatDelay=function(P){return d=P,this},this.yoyo=function(P){return g=P,this},this.easing=function(P){return v=P,this},this.interpolation=function(P){return m=P,this},this.chain=function(){return y=arguments,this},this.onStart=function(P){return I=P,this},this.onUpdate=function(P){return _=P,this},this.onComplete=function(P){return A=P,this},this.onStop=function(P){return b=P,this},this.update=function(P){var E,C,T;if(P<f)return!0;p===!1&&(I!==null&&I.call(n,n),p=!0),C=(P-f)/l,C=C>1?1:C,T=v(C);for(E in s)if(o[E]!==void 0){var F=o[E]||0,Z=s[E];Z instanceof Array?n[E]=m(Z,T):(typeof Z=="string"&&(Z.charAt(0)==="+"||Z.charAt(0)==="-"?Z=F+parseFloat(Z):Z=parseFloat(Z)),typeof Z=="number"&&(n[E]=F+(Z-F)*T))}if(_!==null&&_.call(n,T),C===1)if(c>0){isFinite(c)&&c--;for(E in a){if(typeof s[E]=="string"&&(a[E]=a[E]+parseFloat(s[E])),g){var O=a[E];a[E]=s[E],s[E]=O}o[E]=a[E]}return d!==void 0?f=P+d:f=P+h,!0}else{A!==null&&A.call(n,n);for(var H=0,X=y.length;H<X;H++)y[H].start(f+l);return!1}return!0}},e.Easing={Linear:{None:function(r){return r}},Quadratic:{In:function(r){return r*r},Out:function(r){return r*(2-r)},InOut:function(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)}},Cubic:{In:function(r){return r*r*r},Out:function(r){return--r*r*r+1},InOut:function(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)}},Quartic:{In:function(r){return r*r*r*r},Out:function(r){return 1- --r*r*r*r},InOut:function(r){return(r*=2)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2)}},Quintic:{In:function(r){return r*r*r*r*r},Out:function(r){return--r*r*r*r*r+1},InOut:function(r){return(r*=2)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2)}},Sinusoidal:{In:function(r){return 1-Math.cos(r*Math.PI/2)},Out:function(r){return Math.sin(r*Math.PI/2)},InOut:function(r){return .5*(1-Math.cos(Math.PI*r))}},Exponential:{In:function(r){return r===0?0:Math.pow(1024,r-1)},Out:function(r){return r===1?1:1-Math.pow(2,-10*r)},InOut:function(r){return r===0?0:r===1?1:(r*=2)<1?.5*Math.pow(1024,r-1):.5*(-Math.pow(2,-10*(r-1))+2)}},Circular:{In:function(r){return 1-Math.sqrt(1-r*r)},Out:function(r){return Math.sqrt(1- --r*r)},InOut:function(r){return(r*=2)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1)}},Elastic:{In:function(r){return r===0?0:r===1?1:-Math.pow(2,10*(r-1))*Math.sin((r-1.1)*5*Math.PI)},Out:function(r){return r===0?0:r===1?1:Math.pow(2,-10*r)*Math.sin((r-.1)*5*Math.PI)+1},InOut:function(r){return r===0?0:r===1?1:(r*=2,r<1?-.5*Math.pow(2,10*(r-1))*Math.sin((r-1.1)*5*Math.PI):.5*Math.pow(2,-10*(r-1))*Math.sin((r-1.1)*5*Math.PI)+1)}},Back:{In:function(r){var n=1.70158;return r*r*((n+1)*r-n)},Out:function(r){var n=1.70158;return--r*r*((n+1)*r+n)+1},InOut:function(r){var n=2.5949095;return(r*=2)<1?.5*(r*r*((n+1)*r-n)):.5*((r-=2)*r*((n+1)*r+n)+2)}},Bounce:{In:function(r){return 1-e.Easing.Bounce.Out(1-r)},Out:function(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},InOut:function(r){return r<.5?e.Easing.Bounce.In(r*2)*.5:e.Easing.Bounce.Out(r*2-1)*.5+.5}}},e.Interpolation={Linear:function(r,n){var o=r.length-1,s=o*n,a=Math.floor(s),l=e.Interpolation.Utils.Linear;return n<0?l(r[0],r[1],s):n>1?l(r[o],r[o-1],o-s):l(r[a],r[a+1>o?o:a+1],s-a)},Bezier:function(r,n){for(var o=0,s=r.length-1,a=Math.pow,l=e.Interpolation.Utils.Bernstein,c=0;c<=s;c++)o+=a(1-n,s-c)*a(n,c)*r[c]*l(s,c);return o},CatmullRom:function(r,n){var o=r.length-1,s=o*n,a=Math.floor(s),l=e.Interpolation.Utils.CatmullRom;return r[0]===r[o]?(n<0&&(a=Math.floor(s=o*(1+n))),l(r[(a-1+o)%o],r[a],r[(a+1)%o],r[(a+2)%o],s-a)):n<0?r[0]-(l(r[0],r[0],r[1],r[1],-s)-r[0]):n>1?r[o]-(l(r[o],r[o],r[o-1],r[o-1],s-o)-r[o]):l(r[a?a-1:0],r[a],r[o<a+1?o:a+1],r[o<a+2?o:a+2],s-a)},Utils:{Linear:function(r,n,o){return(n-r)*o+r},Bernstein:function(r,n){var o=e.Interpolation.Utils.Factorial;return o(r)/o(n)/o(r-n)},Factorial:function(){var r=[1];return function(n){var o=1;if(r[n])return r[n];for(var s=n;s>1;s--)o*=s;return r[n]=o,o}}(),CatmullRom:function(r,n,o,s,a){var l=(o-r)*.5,c=(s-n)*.5,d=a*a,g=a*d;return(2*n-2*o+l+c)*g+(-3*n+3*o-2*l-c)*d+l*a+n}}},function(r){i.exports=e}()})(Wv);var eT=Wv.exports,rT=W&&W.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),iT=W&&W.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),nT=W&&W.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&rT(t,i,e);return iT(t,i),t};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.RoomCamera=void 0;const Po=nT(Zt),Eu=eT;class lc extends Po.Container{constructor(t,e,r){var n,o;super(),this._room=t,this._parentBounds=e,this._options=r,this._state={type:"WAITING"},this._offsets={x:0,y:0},this._animatedOffsets={x:0,y:0},this._handlePointerUp=l=>{if(this._state.type==="WAITING"||this._state.type==="ANIMATE_ZERO"||this._state.pointerId!==l.pointerId)return;let c=!1;this._state.type==="DRAGGING"&&(c=this._stopDragging(this._state)),c||this._resetDrag()},this._handlePointerDown=l=>{const c=l.data.getLocalPosition(this.parent);this._state.type==="WAITING"?this._enterWaitingForDistance(c,l.data.pointerId):this._state.type==="ANIMATE_ZERO"&&this._changingDragWhileAnimating(c,l.data.pointerId)},this._handlePointerMove=l=>{const c=this._room.application.view.getBoundingClientRect(),d=new Po.Point(l.clientX-c.x-this.parent.worldTransform.tx,l.clientY-c.y-this.parent.worldTransform.tx);switch(this._state.type){case"WAIT_FOR_DISTANCE":{this._tryUpgradeWaitForDistance(this._state,d,l.pointerId);break}case"DRAGGING":{this._updateDragging(this._state,d,l.pointerId);break}}};const s=(o=(n=this._options)===null||n===void 0?void 0:n.target)!==null&&o!==void 0?o:window;this._target=s,this._parentContainer=new Po.Container,this._parentContainer.hitArea=this._parentBounds(),this._parentContainer.interactive=!0,this._container=new Po.Container,this._container.addChild(this._room),this._parentContainer.addChild(this._container),this.addChild(this._parentContainer),this._parentContainer.addListener("pointerdown",this._handlePointerDown),this._target.addEventListener("pointermove",this._handlePointerMove),this._target.addEventListener("pointerup",this._handlePointerUp);let a;this._room.application.ticker.add(()=>{a==null&&(a=performance.now());const l=performance.now()-a;Eu.update(l)})}static forScreen(t,e){return new lc(t,()=>t.application.screen,e)}destroy(){this._parentContainer.removeListener("pointerdown",this._handlePointerDown),this._target.removeEventListener("pointermove",this._handlePointerMove),this._target.removeEventListener("pointerup",this._handlePointerUp)}_updatePosition(){switch(this._state.type){case"DRAGGING":{const t=this._state.currentX-this._state.startX,e=this._state.currentY-this._state.startY;this._container.x=this._offsets.x+t,this._container.y=this._offsets.y+e;break}case"ANIMATE_ZERO":{this._container.x=this._animatedOffsets.x,this._container.y=this._animatedOffsets.y;break}default:this._container.x=this._offsets.x,this._container.y=this._offsets.y}}_isOutOfBounds(t){const e=this.parent.transform.position.x+this._room.x,r=this.parent.transform.position.y+this._room.y;return e+this._room.roomWidth+t.x<=0||e+t.x>=this._parentBounds().width||r+this._room.roomHeight+t.y<=0||r+t.y>=this._parentBounds().height}_returnToZero(t,e){var r,n;this._state={...t,type:"ANIMATE_ZERO"};const o=(n=(r=this._options)===null||r===void 0?void 0:r.duration)!==null&&n!==void 0?n:500;this._animatedOffsets=e,this._offsets={x:0,y:0};const s={...this._animatedOffsets},a=new Eu.Tween(s).to({x:0,y:0},o).easing(Eu.Easing.Quadratic.Out).onUpdate(l=>{this._animatedOffsets=s,l>=1&&(this._state={type:"WAITING"}),this._updatePosition()}).start();this._tween=a,this._updatePosition()}_stopDragging(t){const e=t.currentX-t.startX,r=t.currentY-t.startY,n={x:this._offsets.x+e,y:this._offsets.y+r};return this._isOutOfBounds(n)||t.skipBoundsCheck!=null&&t.skipBoundsCheck?(this._returnToZero(t,n),!0):(this._offsets=n,!1)}_resetDrag(){this._state={type:"WAITING"},this._updatePosition()}_changingDragWhileAnimating(t,e){this._offsets=this._animatedOffsets,this._animatedOffsets={x:0,y:0},this._tween.stop(),this._state={currentX:t.x,currentY:t.y,startX:t.x,startY:t.y,pointerId:e,type:"DRAGGING",skipBoundsCheck:!0},this._updatePosition()}_enterWaitingForDistance(t,e){this._state={type:"WAIT_FOR_DISTANCE",pointerId:e,startX:t.x,startY:t.y}}_tryUpgradeWaitForDistance(t,e,r){if(t.pointerId!==r)return;Math.sqrt((e.x-t.startX)**2+(e.y-t.startY)**2)>=10&&(this._state={currentX:e.x,currentY:e.y,startX:e.x,startY:e.y,pointerId:r,type:"DRAGGING"},this._updatePosition())}_updateDragging(t,e,r){t.pointerId===r&&(this._state={...t,currentX:e.x,currentY:e.y},this._updatePosition())}}Hs.RoomCamera=lc;var Ys={},Hn={},oT=W&&W.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),sT=W&&W.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),aT=W&&W.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&oT(t,i,e);return sT(t,i),t};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.applyTextureProperties=void 0;const uT=aT(Zt);function lT(i){i.baseTexture.scaleMode=uT.SCALE_MODES.NEAREST}Hn.applyTextureProperties=lT;var hT=W&&W.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),cT=W&&W.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),fT=W&&W.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&hT(t,i,e);return cT(t,i),t};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.loadRoomTexture=void 0;const dT=fT(Zt),gT=Hn;async function pT(i){const t=new Image;t.crossOrigin="anonymous",t.src=i,await new Promise(r=>{t.onload=()=>{r()}});const e=dT.Texture.from(t);return gT.applyTextureProperties(e),e}Ys.loadRoomTexture=pT;var Yn={},er={},Fu={},jd;function hc(){return jd||(jd=1,function(){Fu.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}.call(W)),Fu}var Mu={},Xe={},ke={},Wd;function qe(){return Wd||(Wd=1,function(){var i,t,e,r,n,o,s,a=[].slice,l={}.hasOwnProperty;i=function(){var c,d,g,u,h,f;if(f=arguments[0],h=2<=arguments.length?a.call(arguments,1):[],n(Object.assign))Object.assign.apply(null,arguments);else for(c=0,g=h.length;c<g;c++)if(u=h[c],u!=null)for(d in u)l.call(u,d)&&(f[d]=u[d]);return f},n=function(c){return!!c&&Object.prototype.toString.call(c)==="[object Function]"},o=function(c){var d;return!!c&&((d=typeof c)=="function"||d==="object")},e=function(c){return n(Array.isArray)?Array.isArray(c):Object.prototype.toString.call(c)==="[object Array]"},r=function(c){var d;if(e(c))return!c.length;for(d in c)if(l.call(c,d))return!1;return!0},s=function(c){var d,g;return o(c)&&(g=Object.getPrototypeOf(c))&&(d=g.constructor)&&typeof d=="function"&&d instanceof d&&Function.prototype.toString.call(d)===Function.prototype.toString.call(Object)},t=function(c){return n(c.valueOf)?c.valueOf():c},ke.assign=i,ke.isFunction=n,ke.isObject=o,ke.isArray=e,ke.isEmpty=r,ke.isPlainObject=s,ke.getValue=t}.call(W)),ke}var Du={exports:{}},Xd;function Xv(){return Xd||(Xd=1,function(){Du.exports=function(){function i(){}return i.prototype.hasFeature=function(t,e){return!0},i.prototype.createDocumentType=function(t,e,r){throw new Error("This DOM method is not implemented.")},i.prototype.createDocument=function(t,e,r){throw new Error("This DOM method is not implemented.")},i.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},i.prototype.getFeature=function(t,e){throw new Error("This DOM method is not implemented.")},i}()}.call(W)),Du.exports}var Bu={exports:{}},Lu={exports:{}},Ru={exports:{}},kd;function IT(){return kd||(kd=1,function(){Ru.exports=function(){function i(){}return i.prototype.handleError=function(t){throw new Error(t)},i}()}.call(W)),Ru.exports}var Zu={exports:{}},Hd;function vT(){return Hd||(Hd=1,function(){Zu.exports=function(){function i(t){this.arr=t||[]}return Object.defineProperty(i.prototype,"length",{get:function(){return this.arr.length}}),i.prototype.item=function(t){return this.arr[t]||null},i.prototype.contains=function(t){return this.arr.indexOf(t)!==-1},i}()}.call(W)),Zu.exports}var Yd;function yT(){return Yd||(Yd=1,function(){var i,t;i=IT(),t=vT(),Lu.exports=function(){function e(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new i,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(e.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),e.prototype.getParameter=function(r){return this.params.hasOwnProperty(r)?this.params[r]:null},e.prototype.canSetParameter=function(r,n){return!0},e.prototype.setParameter=function(r,n){return n!=null?this.params[r]=n:delete this.params[r]},e}()}.call(W)),Lu.exports}var Ou={exports:{}},Gu={exports:{}},Nu={exports:{}},Ud;function Wt(){return Ud||(Ud=1,function(){Nu.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}.call(W)),Nu.exports}var ju={exports:{}},zd;function kv(){return zd||(zd=1,function(){var i;i=Wt(),Ae(),ju.exports=function(){function t(e,r,n){if(this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),r==null)throw new Error("Missing attribute name. "+this.debugInfo(r));this.name=this.stringify.name(r),this.value=this.stringify.attValue(n),this.type=i.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(t.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(t.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(t.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(t.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"specified",{get:function(){return!0}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(e){return this.options.writer.attribute(this,this.options.writer.filterOptions(e))},t.prototype.debugInfo=function(e){return e=e||this.name,e==null?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"},t.prototype.isEqualNode=function(e){return!(e.namespaceURI!==this.namespaceURI||e.prefix!==this.prefix||e.localName!==this.localName||e.value!==this.value)},t}()}.call(W)),ju.exports}var Wu={exports:{}},Vd;function cc(){return Vd||(Vd=1,function(){Wu.exports=function(){function i(t){this.nodes=t}return Object.defineProperty(i.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),i.prototype.clone=function(){return this.nodes=null},i.prototype.getNamedItem=function(t){return this.nodes[t]},i.prototype.setNamedItem=function(t){var e;return e=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,e||null},i.prototype.removeNamedItem=function(t){var e;return e=this.nodes[t],delete this.nodes[t],e||null},i.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},i.prototype.getNamedItemNS=function(t,e){throw new Error("This DOM method is not implemented.")},i.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},i.prototype.removeNamedItemNS=function(t,e){throw new Error("This DOM method is not implemented.")},i}()}.call(W)),Wu.exports}var Jd;function fc(){return Jd||(Jd=1,function(){var i,t,e,r,n,o,s,a,l=function(d,g){for(var u in g)c.call(g,u)&&(d[u]=g[u]);function h(){this.constructor=d}return h.prototype=g.prototype,d.prototype=new h,d.__super__=g.prototype,d},c={}.hasOwnProperty;a=qe(),s=a.isObject,o=a.isFunction,n=a.getValue,r=Ae(),i=Wt(),t=kv(),e=cc(),Gu.exports=function(d){l(g,d);function g(u,h,f){var v,m,y,I;if(g.__super__.constructor.call(this,u),h==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(h),this.type=i.Element,this.attribs={},this.schemaTypeInfo=null,f!=null&&this.attribute(f),u.type===i.Document&&(this.isRoot=!0,this.documentObject=u,u.rootObject=this,u.children)){for(I=u.children,m=0,y=I.length;m<y;m++)if(v=I[m],v.type===i.DocType){v.name=this.name;break}}}return Object.defineProperty(g.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(g.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(g.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(g.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(g.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(g.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(g.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(g.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new e(this.attribs)),this.attributeMap}}),g.prototype.clone=function(){var u,h,f,v;f=Object.create(this),f.isRoot&&(f.documentObject=null),f.attribs={},v=this.attribs;for(h in v)c.call(v,h)&&(u=v[h],f.attribs[h]=u.clone());return f.children=[],this.children.forEach(function(m){var y;return y=m.clone(),y.parent=f,f.children.push(y)}),f},g.prototype.attribute=function(u,h){var f,v;if(u!=null&&(u=n(u)),s(u))for(f in u)c.call(u,f)&&(v=u[f],this.attribute(f,v));else o(h)&&(h=h.apply()),this.options.keepNullAttributes&&h==null?this.attribs[u]=new t(this,u,""):h!=null&&(this.attribs[u]=new t(this,u,h));return this},g.prototype.removeAttribute=function(u){var h,f,v;if(u==null)throw new Error("Missing attribute name. "+this.debugInfo());if(u=n(u),Array.isArray(u))for(f=0,v=u.length;f<v;f++)h=u[f],delete this.attribs[h];else delete this.attribs[u];return this},g.prototype.toString=function(u){return this.options.writer.element(this,this.options.writer.filterOptions(u))},g.prototype.att=function(u,h){return this.attribute(u,h)},g.prototype.a=function(u,h){return this.attribute(u,h)},g.prototype.getAttribute=function(u){return this.attribs.hasOwnProperty(u)?this.attribs[u].value:null},g.prototype.setAttribute=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getAttributeNode=function(u){return this.attribs.hasOwnProperty(u)?this.attribs[u]:null},g.prototype.setAttributeNode=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.removeAttributeNode=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagName=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getAttributeNS=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setAttributeNS=function(u,h,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.removeAttributeNS=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getAttributeNodeNS=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setAttributeNodeNS=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagNameNS=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.hasAttribute=function(u){return this.attribs.hasOwnProperty(u)},g.prototype.hasAttributeNS=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setIdAttribute=function(u,h){return this.attribs.hasOwnProperty(u)?this.attribs[u].isId:h},g.prototype.setIdAttributeNS=function(u,h,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setIdAttributeNode=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagName=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByTagNameNS=function(u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getElementsByClassName=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.isEqualNode=function(u){var h,f,v;if(!g.__super__.isEqualNode.apply(this,arguments).isEqualNode(u)||u.namespaceURI!==this.namespaceURI||u.prefix!==this.prefix||u.localName!==this.localName||u.attribs.length!==this.attribs.length)return!1;for(h=f=0,v=this.attribs.length-1;0<=v?f<=v:f>=v;h=0<=v?++f:--f)if(!this.attribs[h].isEqualNode(u.attribs[h]))return!1;return!0},g}(r)}.call(W)),Gu.exports}var Xu={exports:{}},ku={exports:{}},Qd;function Us(){return Qd||(Qd=1,function(){var i,t=function(r,n){for(var o in n)e.call(n,o)&&(r[o]=n[o]);function s(){this.constructor=r}return s.prototype=n.prototype,r.prototype=new s,r.__super__=n.prototype,r},e={}.hasOwnProperty;i=Ae(),ku.exports=function(r){t(n,r);function n(o){n.__super__.constructor.call(this,o),this.value=""}return Object.defineProperty(n.prototype,"data",{get:function(){return this.value},set:function(o){return this.value=o||""}}),Object.defineProperty(n.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(n.prototype,"textContent",{get:function(){return this.value},set:function(o){return this.value=o||""}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.substringData=function(o,s){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.appendData=function(o){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.insertData=function(o,s){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.deleteData=function(o,s){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.replaceData=function(o,s,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.isEqualNode=function(o){return!(!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(o)||o.data!==this.data)},n}(i)}.call(W)),ku.exports}var $d;function dc(){return $d||($d=1,function(){var i,t,e=function(n,o){for(var s in o)r.call(o,s)&&(n[s]=o[s]);function a(){this.constructor=n}return a.prototype=o.prototype,n.prototype=new a,n.__super__=o.prototype,n},r={}.hasOwnProperty;i=Wt(),t=Us(),Xu.exports=function(n){e(o,n);function o(s,a){if(o.__super__.constructor.call(this,s),a==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=i.CData,this.value=this.stringify.cdata(a)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(s){return this.options.writer.cdata(this,this.options.writer.filterOptions(s))},o}(t)}.call(W)),Xu.exports}var Hu={exports:{}},Kd;function gc(){return Kd||(Kd=1,function(){var i,t,e=function(n,o){for(var s in o)r.call(o,s)&&(n[s]=o[s]);function a(){this.constructor=n}return a.prototype=o.prototype,n.prototype=new a,n.__super__=o.prototype,n},r={}.hasOwnProperty;i=Wt(),t=Us(),Hu.exports=function(n){e(o,n);function o(s,a){if(o.__super__.constructor.call(this,s),a==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=i.Comment,this.value=this.stringify.comment(a)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(s){return this.options.writer.comment(this,this.options.writer.filterOptions(s))},o}(t)}.call(W)),Hu.exports}var Yu={exports:{}},qd;function pc(){return qd||(qd=1,function(){var i,t,e,r=function(o,s){for(var a in s)n.call(s,a)&&(o[a]=s[a]);function l(){this.constructor=o}return l.prototype=s.prototype,o.prototype=new l,o.__super__=s.prototype,o},n={}.hasOwnProperty;e=qe().isObject,t=Ae(),i=Wt(),Yu.exports=function(o){r(s,o);function s(a,l,c,d){var g;s.__super__.constructor.call(this,a),e(l)&&(g=l,l=g.version,c=g.encoding,d=g.standalone),l||(l="1.0"),this.type=i.Declaration,this.version=this.stringify.xmlVersion(l),c!=null&&(this.encoding=this.stringify.xmlEncoding(c)),d!=null&&(this.standalone=this.stringify.xmlStandalone(d))}return s.prototype.toString=function(a){return this.options.writer.declaration(this,this.options.writer.filterOptions(a))},s}(t)}.call(W)),Yu.exports}var Uu={exports:{}},zu={exports:{}},tg;function Ic(){return tg||(tg=1,function(){var i,t,e=function(n,o){for(var s in o)r.call(o,s)&&(n[s]=o[s]);function a(){this.constructor=n}return a.prototype=o.prototype,n.prototype=new a,n.__super__=o.prototype,n},r={}.hasOwnProperty;t=Ae(),i=Wt(),zu.exports=function(n){e(o,n);function o(s,a,l,c,d,g){if(o.__super__.constructor.call(this,s),a==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(l==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(a));if(!c)throw new Error("Missing DTD attribute type. "+this.debugInfo(a));if(!d)throw new Error("Missing DTD attribute default. "+this.debugInfo(a));if(d.indexOf("#")!==0&&(d="#"+d),!d.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(a));if(g&&!d.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(a));this.elementName=this.stringify.name(a),this.type=i.AttributeDeclaration,this.attributeName=this.stringify.name(l),this.attributeType=this.stringify.dtdAttType(c),g&&(this.defaultValue=this.stringify.dtdAttDefault(g)),this.defaultValueType=d}return o.prototype.toString=function(s){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(s))},o}(t)}.call(W)),zu.exports}var Vu={exports:{}},eg;function vc(){return eg||(eg=1,function(){var i,t,e,r=function(o,s){for(var a in s)n.call(s,a)&&(o[a]=s[a]);function l(){this.constructor=o}return l.prototype=s.prototype,o.prototype=new l,o.__super__=s.prototype,o},n={}.hasOwnProperty;e=qe().isObject,t=Ae(),i=Wt(),Vu.exports=function(o){r(s,o);function s(a,l,c,d){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD entity name. "+this.debugInfo(c));if(d==null)throw new Error("Missing DTD entity value. "+this.debugInfo(c));if(this.pe=!!l,this.name=this.stringify.name(c),this.type=i.EntityDeclaration,!e(d))this.value=this.stringify.dtdEntityValue(d),this.internal=!0;else{if(!d.pubID&&!d.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(c));if(d.pubID&&!d.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(c));if(this.internal=!1,d.pubID!=null&&(this.pubID=this.stringify.dtdPubID(d.pubID)),d.sysID!=null&&(this.sysID=this.stringify.dtdSysID(d.sysID)),d.nData!=null&&(this.nData=this.stringify.dtdNData(d.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(c))}}return Object.defineProperty(s.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(s.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(s.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(s.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(s.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(s.prototype,"xmlVersion",{get:function(){return null}}),s.prototype.toString=function(a){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(a))},s}(t)}.call(W)),Vu.exports}var Ju={exports:{}},rg;function yc(){return rg||(rg=1,function(){var i,t,e=function(n,o){for(var s in o)r.call(o,s)&&(n[s]=o[s]);function a(){this.constructor=n}return a.prototype=o.prototype,n.prototype=new a,n.__super__=o.prototype,n},r={}.hasOwnProperty;t=Ae(),i=Wt(),Ju.exports=function(n){e(o,n);function o(s,a,l){if(o.__super__.constructor.call(this,s),a==null)throw new Error("Missing DTD element name. "+this.debugInfo());l||(l="(#PCDATA)"),Array.isArray(l)&&(l="("+l.join(",")+")"),this.name=this.stringify.name(a),this.type=i.ElementDeclaration,this.value=this.stringify.dtdElementValue(l)}return o.prototype.toString=function(s){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(s))},o}(t)}.call(W)),Ju.exports}var Qu={exports:{}},ig;function mc(){return ig||(ig=1,function(){var i,t,e=function(n,o){for(var s in o)r.call(o,s)&&(n[s]=o[s]);function a(){this.constructor=n}return a.prototype=o.prototype,n.prototype=new a,n.__super__=o.prototype,n},r={}.hasOwnProperty;t=Ae(),i=Wt(),Qu.exports=function(n){e(o,n);function o(s,a,l){if(o.__super__.constructor.call(this,s),a==null)throw new Error("Missing DTD notation name. "+this.debugInfo(a));if(!l.pubID&&!l.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(a));this.name=this.stringify.name(a),this.type=i.NotationDeclaration,l.pubID!=null&&(this.pubID=this.stringify.dtdPubID(l.pubID)),l.sysID!=null&&(this.sysID=this.stringify.dtdSysID(l.sysID))}return Object.defineProperty(o.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(o.prototype,"systemId",{get:function(){return this.sysID}}),o.prototype.toString=function(s){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(s))},o}(t)}.call(W)),Qu.exports}var ng;function _c(){return ng||(ng=1,function(){var i,t,e,r,n,o,s,a,l=function(d,g){for(var u in g)c.call(g,u)&&(d[u]=g[u]);function h(){this.constructor=d}return h.prototype=g.prototype,d.prototype=new h,d.__super__=g.prototype,d},c={}.hasOwnProperty;a=qe().isObject,s=Ae(),i=Wt(),t=Ic(),r=vc(),e=yc(),n=mc(),o=cc(),Uu.exports=function(d){l(g,d);function g(u,h,f){var v,m,y,I,p,_;if(g.__super__.constructor.call(this,u),this.type=i.DocType,u.children){for(I=u.children,m=0,y=I.length;m<y;m++)if(v=I[m],v.type===i.Element){this.name=v.name;break}}this.documentObject=u,a(h)&&(p=h,h=p.pubID,f=p.sysID),f==null&&(_=[h,f],f=_[0],h=_[1]),h!=null&&(this.pubID=this.stringify.dtdPubID(h)),f!=null&&(this.sysID=this.stringify.dtdSysID(f))}return Object.defineProperty(g.prototype,"entities",{get:function(){var u,h,f,v,m;for(v={},m=this.children,h=0,f=m.length;h<f;h++)u=m[h],u.type===i.EntityDeclaration&&!u.pe&&(v[u.name]=u);return new o(v)}}),Object.defineProperty(g.prototype,"notations",{get:function(){var u,h,f,v,m;for(v={},m=this.children,h=0,f=m.length;h<f;h++)u=m[h],u.type===i.NotationDeclaration&&(v[u.name]=u);return new o(v)}}),Object.defineProperty(g.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(g.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(g.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),g.prototype.element=function(u,h){var f;return f=new e(this,u,h),this.children.push(f),this},g.prototype.attList=function(u,h,f,v,m){var y;return y=new t(this,u,h,f,v,m),this.children.push(y),this},g.prototype.entity=function(u,h){var f;return f=new r(this,!1,u,h),this.children.push(f),this},g.prototype.pEntity=function(u,h){var f;return f=new r(this,!0,u,h),this.children.push(f),this},g.prototype.notation=function(u,h){var f;return f=new n(this,u,h),this.children.push(f),this},g.prototype.toString=function(u){return this.options.writer.docType(this,this.options.writer.filterOptions(u))},g.prototype.ele=function(u,h){return this.element(u,h)},g.prototype.att=function(u,h,f,v,m){return this.attList(u,h,f,v,m)},g.prototype.ent=function(u,h){return this.entity(u,h)},g.prototype.pent=function(u,h){return this.pEntity(u,h)},g.prototype.not=function(u,h){return this.notation(u,h)},g.prototype.up=function(){return this.root()||this.documentObject},g.prototype.isEqualNode=function(u){return!(!g.__super__.isEqualNode.apply(this,arguments).isEqualNode(u)||u.name!==this.name||u.publicId!==this.publicId||u.systemId!==this.systemId)},g}(s)}.call(W)),Uu.exports}var $u={exports:{}},og;function Cc(){return og||(og=1,function(){var i,t,e=function(n,o){for(var s in o)r.call(o,s)&&(n[s]=o[s]);function a(){this.constructor=n}return a.prototype=o.prototype,n.prototype=new a,n.__super__=o.prototype,n},r={}.hasOwnProperty;i=Wt(),t=Ae(),$u.exports=function(n){e(o,n);function o(s,a){if(o.__super__.constructor.call(this,s),a==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=i.Raw,this.value=this.stringify.raw(a)}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(s){return this.options.writer.raw(this,this.options.writer.filterOptions(s))},o}(t)}.call(W)),$u.exports}var Ku={exports:{}},sg;function Ac(){return sg||(sg=1,function(){var i,t,e=function(n,o){for(var s in o)r.call(o,s)&&(n[s]=o[s]);function a(){this.constructor=n}return a.prototype=o.prototype,n.prototype=new a,n.__super__=o.prototype,n},r={}.hasOwnProperty;i=Wt(),t=Us(),Ku.exports=function(n){e(o,n);function o(s,a){if(o.__super__.constructor.call(this,s),a==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=i.Text,this.value=this.stringify.text(a)}return Object.defineProperty(o.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(o.prototype,"wholeText",{get:function(){var s,a,l;for(l="",a=this.previousSibling;a;)l=a.data+l,a=a.previousSibling;for(l+=this.data,s=this.nextSibling;s;)l=l+s.data,s=s.nextSibling;return l}}),o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(s){return this.options.writer.text(this,this.options.writer.filterOptions(s))},o.prototype.splitText=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},o.prototype.replaceWholeText=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},o}(t)}.call(W)),Ku.exports}var qu={exports:{}},ag;function bc(){return ag||(ag=1,function(){var i,t,e=function(n,o){for(var s in o)r.call(o,s)&&(n[s]=o[s]);function a(){this.constructor=n}return a.prototype=o.prototype,n.prototype=new a,n.__super__=o.prototype,n},r={}.hasOwnProperty;i=Wt(),t=Us(),qu.exports=function(n){e(o,n);function o(s,a,l){if(o.__super__.constructor.call(this,s),a==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=i.ProcessingInstruction,this.target=this.stringify.insTarget(a),this.name=this.target,l&&(this.value=this.stringify.insValue(l))}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(s){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(s))},o.prototype.isEqualNode=function(s){return!(!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(s)||s.target!==this.target)},o}(t)}.call(W)),qu.exports}var tl={exports:{}},ug;function Hv(){return ug||(ug=1,function(){var i,t,e=function(n,o){for(var s in o)r.call(o,s)&&(n[s]=o[s]);function a(){this.constructor=n}return a.prototype=o.prototype,n.prototype=new a,n.__super__=o.prototype,n},r={}.hasOwnProperty;t=Ae(),i=Wt(),tl.exports=function(n){e(o,n);function o(s){o.__super__.constructor.call(this,s),this.type=i.Dummy}return o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(s){return""},o}(t)}.call(W)),tl.exports}var el={exports:{}},lg;function mT(){return lg||(lg=1,function(){el.exports=function(){function i(t){this.nodes=t}return Object.defineProperty(i.prototype,"length",{get:function(){return this.nodes.length||0}}),i.prototype.clone=function(){return this.nodes=null},i.prototype.item=function(t){return this.nodes[t]||null},i}()}.call(W)),el.exports}var rl={exports:{}},hg;function _T(){return hg||(hg=1,function(){rl.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}.call(W)),rl.exports}var cg;function Ae(){return cg||(cg=1,function(){var i,t,e,r,n,o,s,a,l,c,d,g,u,h,f,v,m,y={}.hasOwnProperty;m=qe(),v=m.isObject,f=m.isFunction,h=m.isEmpty,u=m.getValue,a=null,e=null,r=null,n=null,o=null,d=null,g=null,c=null,s=null,t=null,l=null,i=null,Ou.exports=function(){function I(p){this.parent=p,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,a||(a=fc(),e=dc(),r=gc(),n=pc(),o=_c(),d=Cc(),g=Ac(),c=bc(),s=Hv(),t=Wt(),l=mT(),cc(),i=_T())}return Object.defineProperty(I.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(I.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(I.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(I.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(I.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new l(this.children)),this.childNodeList}}),Object.defineProperty(I.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(I.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(I.prototype,"previousSibling",{get:function(){var p;return p=this.parent.children.indexOf(this),this.parent.children[p-1]||null}}),Object.defineProperty(I.prototype,"nextSibling",{get:function(){var p;return p=this.parent.children.indexOf(this),this.parent.children[p+1]||null}}),Object.defineProperty(I.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(I.prototype,"textContent",{get:function(){var p,_,A,b,P;if(this.nodeType===t.Element||this.nodeType===t.DocumentFragment){for(P="",b=this.children,_=0,A=b.length;_<A;_++)p=b[_],p.textContent&&(P+=p.textContent);return P}else return null},set:function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),I.prototype.setParent=function(p){var _,A,b,P,E;for(this.parent=p,p&&(this.options=p.options,this.stringify=p.stringify),P=this.children,E=[],A=0,b=P.length;A<b;A++)_=P[A],E.push(_.setParent(this));return E},I.prototype.element=function(p,_,A){var b,P,E,C,T,F,Z,O,H,X,U;if(F=null,_===null&&A==null&&(H=[{},null],_=H[0],A=H[1]),_==null&&(_={}),_=u(_),v(_)||(X=[_,A],A=X[0],_=X[1]),p!=null&&(p=u(p)),Array.isArray(p))for(E=0,Z=p.length;E<Z;E++)P=p[E],F=this.element(P);else if(f(p))F=this.element(p.apply());else if(v(p)){for(T in p)if(y.call(p,T))if(U=p[T],f(U)&&(U=U.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&T.indexOf(this.stringify.convertAttKey)===0)F=this.attribute(T.substr(this.stringify.convertAttKey.length),U);else if(!this.options.separateArrayItems&&Array.isArray(U)&&h(U))F=this.dummy();else if(v(U)&&h(U))F=this.element(T);else if(!this.options.keepNullNodes&&U==null)F=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(U))for(C=0,O=U.length;C<O;C++)P=U[C],b={},b[T]=P,F=this.element(b);else v(U)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&T.indexOf(this.stringify.convertTextKey)===0?F=this.element(U):(F=this.element(T),F.element(U)):F=this.element(T,U)}else!this.options.keepNullNodes&&A===null?F=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&p.indexOf(this.stringify.convertTextKey)===0?F=this.text(A):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&p.indexOf(this.stringify.convertCDataKey)===0?F=this.cdata(A):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&p.indexOf(this.stringify.convertCommentKey)===0?F=this.comment(A):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&p.indexOf(this.stringify.convertRawKey)===0?F=this.raw(A):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&p.indexOf(this.stringify.convertPIKey)===0?F=this.instruction(p.substr(this.stringify.convertPIKey.length),A):F=this.node(p,_,A);if(F==null)throw new Error("Could not create any elements with: "+p+". "+this.debugInfo());return F},I.prototype.insertBefore=function(p,_,A){var b,P,E,C,T;if(p?.type)return E=p,C=_,E.setParent(this),C?(P=children.indexOf(C),T=children.splice(P),children.push(E),Array.prototype.push.apply(children,T)):children.push(E),E;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(p));return P=this.parent.children.indexOf(this),T=this.parent.children.splice(P),b=this.parent.element(p,_,A),Array.prototype.push.apply(this.parent.children,T),b},I.prototype.insertAfter=function(p,_,A){var b,P,E;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(p));return P=this.parent.children.indexOf(this),E=this.parent.children.splice(P+1),b=this.parent.element(p,_,A),Array.prototype.push.apply(this.parent.children,E),b},I.prototype.remove=function(){var p;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return p=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[p,p-p+1].concat([])),this.parent},I.prototype.node=function(p,_,A){var b,P;return p!=null&&(p=u(p)),_||(_={}),_=u(_),v(_)||(P=[_,A],A=P[0],_=P[1]),b=new a(this,p,_),A!=null&&b.text(A),this.children.push(b),b},I.prototype.text=function(p){var _;return v(p)&&this.element(p),_=new g(this,p),this.children.push(_),this},I.prototype.cdata=function(p){var _;return _=new e(this,p),this.children.push(_),this},I.prototype.comment=function(p){var _;return _=new r(this,p),this.children.push(_),this},I.prototype.commentBefore=function(p){var _,A;return _=this.parent.children.indexOf(this),A=this.parent.children.splice(_),this.parent.comment(p),Array.prototype.push.apply(this.parent.children,A),this},I.prototype.commentAfter=function(p){var _,A;return _=this.parent.children.indexOf(this),A=this.parent.children.splice(_+1),this.parent.comment(p),Array.prototype.push.apply(this.parent.children,A),this},I.prototype.raw=function(p){var _;return _=new d(this,p),this.children.push(_),this},I.prototype.dummy=function(){var p;return p=new s(this),p},I.prototype.instruction=function(p,_){var A,b,P,E,C;if(p!=null&&(p=u(p)),_!=null&&(_=u(_)),Array.isArray(p))for(E=0,C=p.length;E<C;E++)A=p[E],this.instruction(A);else if(v(p))for(A in p)y.call(p,A)&&(b=p[A],this.instruction(A,b));else f(_)&&(_=_.apply()),P=new c(this,p,_),this.children.push(P);return this},I.prototype.instructionBefore=function(p,_){var A,b;return A=this.parent.children.indexOf(this),b=this.parent.children.splice(A),this.parent.instruction(p,_),Array.prototype.push.apply(this.parent.children,b),this},I.prototype.instructionAfter=function(p,_){var A,b;return A=this.parent.children.indexOf(this),b=this.parent.children.splice(A+1),this.parent.instruction(p,_),Array.prototype.push.apply(this.parent.children,b),this},I.prototype.declaration=function(p,_,A){var b,P;return b=this.document(),P=new n(b,p,_,A),b.children.length===0?b.children.unshift(P):b.children[0].type===t.Declaration?b.children[0]=P:b.children.unshift(P),b.root()||b},I.prototype.dtd=function(p,_){var A,b,P,E,C,T,F,Z,O,H;for(b=this.document(),P=new o(b,p,_),O=b.children,E=C=0,F=O.length;C<F;E=++C)if(A=O[E],A.type===t.DocType)return b.children[E]=P,P;for(H=b.children,E=T=0,Z=H.length;T<Z;E=++T)if(A=H[E],A.isRoot)return b.children.splice(E,0,P),P;return b.children.push(P),P},I.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},I.prototype.root=function(){var p;for(p=this;p;){if(p.type===t.Document)return p.rootObject;if(p.isRoot)return p;p=p.parent}},I.prototype.document=function(){var p;for(p=this;p;){if(p.type===t.Document)return p;p=p.parent}},I.prototype.end=function(p){return this.document().end(p)},I.prototype.prev=function(){var p;if(p=this.parent.children.indexOf(this),p<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[p-1]},I.prototype.next=function(){var p;if(p=this.parent.children.indexOf(this),p===-1||p===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[p+1]},I.prototype.importDocument=function(p){var _;return _=p.root().clone(),_.parent=this,_.isRoot=!1,this.children.push(_),this},I.prototype.debugInfo=function(p){var _,A;return p=p||this.name,p==null&&!((_=this.parent)!=null&&_.name)?"":p==null?"parent: <"+this.parent.name+">":(A=this.parent)!=null&&A.name?"node: <"+p+">, parent: <"+this.parent.name+">":"node: <"+p+">"},I.prototype.ele=function(p,_,A){return this.element(p,_,A)},I.prototype.nod=function(p,_,A){return this.node(p,_,A)},I.prototype.txt=function(p){return this.text(p)},I.prototype.dat=function(p){return this.cdata(p)},I.prototype.com=function(p){return this.comment(p)},I.prototype.ins=function(p,_){return this.instruction(p,_)},I.prototype.doc=function(){return this.document()},I.prototype.dec=function(p,_,A){return this.declaration(p,_,A)},I.prototype.e=function(p,_,A){return this.element(p,_,A)},I.prototype.n=function(p,_,A){return this.node(p,_,A)},I.prototype.t=function(p){return this.text(p)},I.prototype.d=function(p){return this.cdata(p)},I.prototype.c=function(p){return this.comment(p)},I.prototype.r=function(p){return this.raw(p)},I.prototype.i=function(p,_){return this.instruction(p,_)},I.prototype.u=function(){return this.up()},I.prototype.importXMLBuilder=function(p){return this.importDocument(p)},I.prototype.replaceChild=function(p,_){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.removeChild=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.appendChild=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.hasChildNodes=function(){return this.children.length!==0},I.prototype.cloneNode=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.isSupported=function(p,_){return!0},I.prototype.hasAttributes=function(){return this.attribs.length!==0},I.prototype.compareDocumentPosition=function(p){var _,A;return _=this,_===p?0:this.document()!==p.document()?(A=i.Disconnected|i.ImplementationSpecific,Math.random()<.5?A|=i.Preceding:A|=i.Following,A):_.isAncestor(p)?i.Contains|i.Preceding:_.isDescendant(p)?i.Contains|i.Following:_.isPreceding(p)?i.Preceding:i.Following},I.prototype.isSameNode=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.lookupPrefix=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.isDefaultNamespace=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.lookupNamespaceURI=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.isEqualNode=function(p){var _,A,b;if(p.nodeType!==this.nodeType||p.children.length!==this.children.length)return!1;for(_=A=0,b=this.children.length-1;0<=b?A<=b:A>=b;_=0<=b?++A:--A)if(!this.children[_].isEqualNode(p.children[_]))return!1;return!0},I.prototype.getFeature=function(p,_){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.setUserData=function(p,_,A){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.getUserData=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},I.prototype.contains=function(p){return p?p===this||this.isDescendant(p):!1},I.prototype.isDescendant=function(p){var _,A,b,P,E;for(E=this.children,b=0,P=E.length;b<P;b++)if(_=E[b],p===_||(A=_.isDescendant(p),A))return!0;return!1},I.prototype.isAncestor=function(p){return p.isDescendant(this)},I.prototype.isPreceding=function(p){var _,A;return _=this.treePosition(p),A=this.treePosition(this),_===-1||A===-1?!1:_<A},I.prototype.isFollowing=function(p){var _,A;return _=this.treePosition(p),A=this.treePosition(this),_===-1||A===-1?!1:_>A},I.prototype.treePosition=function(p){var _,A;return A=0,_=!1,this.foreachTreeNode(this.document(),function(b){if(A++,!_&&b===p)return _=!0}),_?A:-1},I.prototype.foreachTreeNode=function(p,_){var A,b,P,E,C;for(p||(p=this.document()),E=p.children,b=0,P=E.length;b<P;b++){if(A=E[b],C=_(A))return C;if(C=this.foreachTreeNode(A,_),C)return C}},I}()}.call(W)),Ou.exports}var il={exports:{}},fg;function Yv(){return fg||(fg=1,function(){var i=function(e,r){return function(){return e.apply(r,arguments)}},t={}.hasOwnProperty;il.exports=function(){function e(r){this.assertLegalName=i(this.assertLegalName,this),this.assertLegalChar=i(this.assertLegalChar,this);var n,o,s;r||(r={}),this.options=r,this.options.version||(this.options.version="1.0"),o=r.stringify||{};for(n in o)t.call(o,n)&&(s=o[n],this[n]=s)}return e.prototype.name=function(r){return this.options.noValidation?r:this.assertLegalName(""+r||"")},e.prototype.text=function(r){return this.options.noValidation?r:this.assertLegalChar(this.textEscape(""+r||""))},e.prototype.cdata=function(r){return this.options.noValidation?r:(r=""+r||"",r=r.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(r))},e.prototype.comment=function(r){if(this.options.noValidation)return r;if(r=""+r||"",r.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+r);return this.assertLegalChar(r)},e.prototype.raw=function(r){return this.options.noValidation?r:""+r||""},e.prototype.attValue=function(r){return this.options.noValidation?r:this.assertLegalChar(this.attEscape(r=""+r||""))},e.prototype.insTarget=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},e.prototype.insValue=function(r){if(this.options.noValidation)return r;if(r=""+r||"",r.match(/\?>/))throw new Error("Invalid processing instruction value: "+r);return this.assertLegalChar(r)},e.prototype.xmlVersion=function(r){if(this.options.noValidation)return r;if(r=""+r||"",!r.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+r);return r},e.prototype.xmlEncoding=function(r){if(this.options.noValidation)return r;if(r=""+r||"",!r.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+r);return this.assertLegalChar(r)},e.prototype.xmlStandalone=function(r){return this.options.noValidation?r:r?"yes":"no"},e.prototype.dtdPubID=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},e.prototype.dtdSysID=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},e.prototype.dtdElementValue=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},e.prototype.dtdAttType=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},e.prototype.dtdAttDefault=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},e.prototype.dtdEntityValue=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},e.prototype.dtdNData=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},e.prototype.convertAttKey="@",e.prototype.convertPIKey="?",e.prototype.convertTextKey="#text",e.prototype.convertCDataKey="#cdata",e.prototype.convertCommentKey="#comment",e.prototype.convertRawKey="#raw",e.prototype.assertLegalChar=function(r){var n,o;if(this.options.noValidation)return r;if(n="",this.options.version==="1.0"){if(n=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,o=r.match(n))throw new Error("Invalid character in string: "+r+" at index "+o.index)}else if(this.options.version==="1.1"&&(n=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,o=r.match(n)))throw new Error("Invalid character in string: "+r+" at index "+o.index);return r},e.prototype.assertLegalName=function(r){var n;if(this.options.noValidation)return r;if(this.assertLegalChar(r),n=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!r.match(n))throw new Error("Invalid character in name");return r},e.prototype.textEscape=function(r){var n;return this.options.noValidation?r:(n=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,r.replace(n,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},e.prototype.attEscape=function(r){var n;return this.options.noValidation?r:(n=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,r.replace(n,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},e}()}.call(W)),il.exports}var nl={exports:{}},ol={exports:{}},sl={exports:{}},dg;function zs(){return dg||(dg=1,function(){sl.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}.call(W)),sl.exports}var gg;function Uv(){return gg||(gg=1,function(){var i,t,e,r={}.hasOwnProperty;e=qe().assign,i=Wt(),pc(),_c(),dc(),gc(),fc(),Cc(),Ac(),bc(),Hv(),Ic(),yc(),vc(),mc(),t=zs(),ol.exports=function(){function n(o){var s,a,l;o||(o={}),this.options=o,a=o.writer||{};for(s in a)r.call(a,s)&&(l=a[s],this["_"+s]=this[s],this[s]=l)}return n.prototype.filterOptions=function(o){var s,a,l,c,d,g,u,h;return o||(o={}),o=e({},this.options,o),s={writer:this},s.pretty=o.pretty||!1,s.allowEmpty=o.allowEmpty||!1,s.indent=(a=o.indent)!=null?a:"  ",s.newline=(l=o.newline)!=null?l:`
`,s.offset=(c=o.offset)!=null?c:0,s.dontPrettyTextNodes=(d=(g=o.dontPrettyTextNodes)!=null?g:o.dontprettytextnodes)!=null?d:0,s.spaceBeforeSlash=(u=(h=o.spaceBeforeSlash)!=null?h:o.spacebeforeslash)!=null?u:"",s.spaceBeforeSlash===!0&&(s.spaceBeforeSlash=" "),s.suppressPrettyCount=0,s.user={},s.state=t.None,s},n.prototype.indent=function(o,s,a){var l;return!s.pretty||s.suppressPrettyCount?"":s.pretty&&(l=(a||0)+s.offset+1,l>0)?new Array(l).join(s.indent):""},n.prototype.endline=function(o,s,a){return!s.pretty||s.suppressPrettyCount?"":s.newline},n.prototype.attribute=function(o,s,a){var l;return this.openAttribute(o,s,a),l=" "+o.name+'="'+o.value+'"',this.closeAttribute(o,s,a),l},n.prototype.cdata=function(o,s,a){var l;return this.openNode(o,s,a),s.state=t.OpenTag,l=this.indent(o,s,a)+"<![CDATA[",s.state=t.InsideTag,l+=o.value,s.state=t.CloseTag,l+="]]>"+this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),l},n.prototype.comment=function(o,s,a){var l;return this.openNode(o,s,a),s.state=t.OpenTag,l=this.indent(o,s,a)+"<!-- ",s.state=t.InsideTag,l+=o.value,s.state=t.CloseTag,l+=" -->"+this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),l},n.prototype.declaration=function(o,s,a){var l;return this.openNode(o,s,a),s.state=t.OpenTag,l=this.indent(o,s,a)+"<?xml",s.state=t.InsideTag,l+=' version="'+o.version+'"',o.encoding!=null&&(l+=' encoding="'+o.encoding+'"'),o.standalone!=null&&(l+=' standalone="'+o.standalone+'"'),s.state=t.CloseTag,l+=s.spaceBeforeSlash+"?>",l+=this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),l},n.prototype.docType=function(o,s,a){var l,c,d,g,u;if(a||(a=0),this.openNode(o,s,a),s.state=t.OpenTag,g=this.indent(o,s,a),g+="<!DOCTYPE "+o.root().name,o.pubID&&o.sysID?g+=' PUBLIC "'+o.pubID+'" "'+o.sysID+'"':o.sysID&&(g+=' SYSTEM "'+o.sysID+'"'),o.children.length>0){for(g+=" [",g+=this.endline(o,s,a),s.state=t.InsideTag,u=o.children,c=0,d=u.length;c<d;c++)l=u[c],g+=this.writeChildNode(l,s,a+1);s.state=t.CloseTag,g+="]"}return s.state=t.CloseTag,g+=s.spaceBeforeSlash+">",g+=this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),g},n.prototype.element=function(o,s,a){var l,c,d,g,u,h,f,v,m,y,I,p,_,A;a||(a=0),y=!1,I="",this.openNode(o,s,a),s.state=t.OpenTag,I+=this.indent(o,s,a)+"<"+o.name,p=o.attribs;for(m in p)r.call(p,m)&&(l=p[m],I+=this.attribute(l,s,a));if(d=o.children.length,g=d===0?null:o.children[0],d===0||o.children.every(function(b){return(b.type===i.Text||b.type===i.Raw)&&b.value===""}))s.allowEmpty?(I+=">",s.state=t.CloseTag,I+="</"+o.name+">"+this.endline(o,s,a)):(s.state=t.CloseTag,I+=s.spaceBeforeSlash+"/>"+this.endline(o,s,a));else if(s.pretty&&d===1&&(g.type===i.Text||g.type===i.Raw)&&g.value!=null)I+=">",s.state=t.InsideTag,s.suppressPrettyCount++,y=!0,I+=this.writeChildNode(g,s,a+1),s.suppressPrettyCount--,y=!1,s.state=t.CloseTag,I+="</"+o.name+">"+this.endline(o,s,a);else{if(s.dontPrettyTextNodes){for(_=o.children,u=0,f=_.length;u<f;u++)if(c=_[u],(c.type===i.Text||c.type===i.Raw)&&c.value!=null){s.suppressPrettyCount++,y=!0;break}}for(I+=">"+this.endline(o,s,a),s.state=t.InsideTag,A=o.children,h=0,v=A.length;h<v;h++)c=A[h],I+=this.writeChildNode(c,s,a+1);s.state=t.CloseTag,I+=this.indent(o,s,a)+"</"+o.name+">",y&&s.suppressPrettyCount--,I+=this.endline(o,s,a),s.state=t.None}return this.closeNode(o,s,a),I},n.prototype.writeChildNode=function(o,s,a){switch(o.type){case i.CData:return this.cdata(o,s,a);case i.Comment:return this.comment(o,s,a);case i.Element:return this.element(o,s,a);case i.Raw:return this.raw(o,s,a);case i.Text:return this.text(o,s,a);case i.ProcessingInstruction:return this.processingInstruction(o,s,a);case i.Dummy:return"";case i.Declaration:return this.declaration(o,s,a);case i.DocType:return this.docType(o,s,a);case i.AttributeDeclaration:return this.dtdAttList(o,s,a);case i.ElementDeclaration:return this.dtdElement(o,s,a);case i.EntityDeclaration:return this.dtdEntity(o,s,a);case i.NotationDeclaration:return this.dtdNotation(o,s,a);default:throw new Error("Unknown XML node type: "+o.constructor.name)}},n.prototype.processingInstruction=function(o,s,a){var l;return this.openNode(o,s,a),s.state=t.OpenTag,l=this.indent(o,s,a)+"<?",s.state=t.InsideTag,l+=o.target,o.value&&(l+=" "+o.value),s.state=t.CloseTag,l+=s.spaceBeforeSlash+"?>",l+=this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),l},n.prototype.raw=function(o,s,a){var l;return this.openNode(o,s,a),s.state=t.OpenTag,l=this.indent(o,s,a),s.state=t.InsideTag,l+=o.value,s.state=t.CloseTag,l+=this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),l},n.prototype.text=function(o,s,a){var l;return this.openNode(o,s,a),s.state=t.OpenTag,l=this.indent(o,s,a),s.state=t.InsideTag,l+=o.value,s.state=t.CloseTag,l+=this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),l},n.prototype.dtdAttList=function(o,s,a){var l;return this.openNode(o,s,a),s.state=t.OpenTag,l=this.indent(o,s,a)+"<!ATTLIST",s.state=t.InsideTag,l+=" "+o.elementName+" "+o.attributeName+" "+o.attributeType,o.defaultValueType!=="#DEFAULT"&&(l+=" "+o.defaultValueType),o.defaultValue&&(l+=' "'+o.defaultValue+'"'),s.state=t.CloseTag,l+=s.spaceBeforeSlash+">"+this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),l},n.prototype.dtdElement=function(o,s,a){var l;return this.openNode(o,s,a),s.state=t.OpenTag,l=this.indent(o,s,a)+"<!ELEMENT",s.state=t.InsideTag,l+=" "+o.name+" "+o.value,s.state=t.CloseTag,l+=s.spaceBeforeSlash+">"+this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),l},n.prototype.dtdEntity=function(o,s,a){var l;return this.openNode(o,s,a),s.state=t.OpenTag,l=this.indent(o,s,a)+"<!ENTITY",s.state=t.InsideTag,o.pe&&(l+=" %"),l+=" "+o.name,o.value?l+=' "'+o.value+'"':(o.pubID&&o.sysID?l+=' PUBLIC "'+o.pubID+'" "'+o.sysID+'"':o.sysID&&(l+=' SYSTEM "'+o.sysID+'"'),o.nData&&(l+=" NDATA "+o.nData)),s.state=t.CloseTag,l+=s.spaceBeforeSlash+">"+this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),l},n.prototype.dtdNotation=function(o,s,a){var l;return this.openNode(o,s,a),s.state=t.OpenTag,l=this.indent(o,s,a)+"<!NOTATION",s.state=t.InsideTag,l+=" "+o.name,o.pubID&&o.sysID?l+=' PUBLIC "'+o.pubID+'" "'+o.sysID+'"':o.pubID?l+=' PUBLIC "'+o.pubID+'"':o.sysID&&(l+=' SYSTEM "'+o.sysID+'"'),s.state=t.CloseTag,l+=s.spaceBeforeSlash+">"+this.endline(o,s,a),s.state=t.None,this.closeNode(o,s,a),l},n.prototype.openNode=function(o,s,a){},n.prototype.closeNode=function(o,s,a){},n.prototype.openAttribute=function(o,s,a){},n.prototype.closeAttribute=function(o,s,a){},n}()}.call(W)),ol.exports}var pg;function wc(){return pg||(pg=1,function(){var i,t=function(r,n){for(var o in n)e.call(n,o)&&(r[o]=n[o]);function s(){this.constructor=r}return s.prototype=n.prototype,r.prototype=new s,r.__super__=n.prototype,r},e={}.hasOwnProperty;i=Uv(),nl.exports=function(r){t(n,r);function n(o){n.__super__.constructor.call(this,o)}return n.prototype.document=function(o,s){var a,l,c,d,g;for(s=this.filterOptions(s),d="",g=o.children,l=0,c=g.length;l<c;l++)a=g[l],d+=this.writeChildNode(a,s,0);return s.pretty&&d.slice(-s.newline.length)===s.newline&&(d=d.slice(0,-s.newline.length)),d},n}(i)}.call(W)),nl.exports}var Ig;function zv(){return Ig||(Ig=1,function(){var i,t,e,r,n,o,s,a=function(c,d){for(var g in d)l.call(d,g)&&(c[g]=d[g]);function u(){this.constructor=c}return u.prototype=d.prototype,c.prototype=new u,c.__super__=d.prototype,c},l={}.hasOwnProperty;s=qe().isPlainObject,e=Xv(),t=yT(),r=Ae(),i=Wt(),o=Yv(),n=wc(),Bu.exports=function(c){a(d,c);function d(g){d.__super__.constructor.call(this,null),this.name="#document",this.type=i.Document,this.documentURI=null,this.domConfig=new t,g||(g={}),g.writer||(g.writer=new n),this.options=g,this.stringify=new o(g)}return Object.defineProperty(d.prototype,"implementation",{value:new e}),Object.defineProperty(d.prototype,"doctype",{get:function(){var g,u,h,f;for(f=this.children,u=0,h=f.length;u<h;u++)if(g=f[u],g.type===i.DocType)return g;return null}}),Object.defineProperty(d.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(d.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(d.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(d.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===i.Declaration?this.children[0].encoding:null}}),Object.defineProperty(d.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===i.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(d.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===i.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(d.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(d.prototype,"origin",{get:function(){return null}}),Object.defineProperty(d.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(d.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(d.prototype,"contentType",{get:function(){return null}}),d.prototype.end=function(g){var u;return u={},g?s(g)&&(u=g,g=this.options.writer):g=this.options.writer,g.document(this,g.filterOptions(u))},d.prototype.toString=function(g){return this.options.writer.document(this,this.options.writer.filterOptions(g))},d.prototype.createElement=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createTextNode=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createComment=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createCDATASection=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createProcessingInstruction=function(g,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createAttribute=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createEntityReference=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagName=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.importNode=function(g,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createElementNS=function(g,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createAttributeNS=function(g,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagNameNS=function(g,u){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementById=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.adoptNode=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.renameNode=function(g,u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByClassName=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createEvent=function(g){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createNodeIterator=function(g,u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.createTreeWalker=function(g,u,h){throw new Error("This DOM method is not implemented."+this.debugInfo())},d}(r)}.call(W)),Bu.exports}var al={exports:{}},vg;function CT(){return vg||(vg=1,function(){var i,t,e,r,n,o,s,a,l,c,d,g,u,h,f,v,m,y,I,p,_,A,b,P={}.hasOwnProperty;b=qe(),_=b.isObject,p=b.isFunction,A=b.isPlainObject,I=b.getValue,i=Wt(),g=zv(),u=fc(),r=dc(),n=gc(),f=Cc(),y=Ac(),h=bc(),c=pc(),d=_c(),o=Ic(),a=vc(),s=yc(),l=mc(),e=kv(),m=Yv(),v=wc(),t=zs(),al.exports=function(){function E(C,T,F){var Z;this.name="?xml",this.type=i.Document,C||(C={}),Z={},C.writer?A(C.writer)&&(Z=C.writer,C.writer=new v):C.writer=new v,this.options=C,this.writer=C.writer,this.writerOptions=this.writer.filterOptions(Z),this.stringify=new m(C),this.onDataCallback=T||function(){},this.onEndCallback=F||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return E.prototype.createChildNode=function(C){var T,F,Z,O,H,X,U,k;switch(C.type){case i.CData:this.cdata(C.value);break;case i.Comment:this.comment(C.value);break;case i.Element:Z={},U=C.attribs;for(F in U)P.call(U,F)&&(T=U[F],Z[F]=T.value);this.node(C.name,Z);break;case i.Dummy:this.dummy();break;case i.Raw:this.raw(C.value);break;case i.Text:this.text(C.value);break;case i.ProcessingInstruction:this.instruction(C.target,C.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+C.constructor.name)}for(k=C.children,H=0,X=k.length;H<X;H++)O=k[H],this.createChildNode(O),O.type===i.Element&&this.up();return this},E.prototype.dummy=function(){return this},E.prototype.node=function(C,T,F){var Z;if(C==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(C));return this.openCurrent(),C=I(C),T==null&&(T={}),T=I(T),_(T)||(Z=[T,F],F=Z[0],T=Z[1]),this.currentNode=new u(this,C,T),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,F!=null&&this.text(F),this},E.prototype.element=function(C,T,F){var Z,O,H,X,U,k;if(this.currentNode&&this.currentNode.type===i.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(C)||_(C)||p(C))for(X=this.options.noValidation,this.options.noValidation=!0,k=new g(this.options).element("TEMP_ROOT"),k.element(C),this.options.noValidation=X,U=k.children,O=0,H=U.length;O<H;O++)Z=U[O],this.createChildNode(Z),Z.type===i.Element&&this.up();else this.node(C,T,F);return this},E.prototype.attribute=function(C,T){var F,Z;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(C));if(C!=null&&(C=I(C)),_(C))for(F in C)P.call(C,F)&&(Z=C[F],this.attribute(F,Z));else p(T)&&(T=T.apply()),this.options.keepNullAttributes&&T==null?this.currentNode.attribs[C]=new e(this,C,""):T!=null&&(this.currentNode.attribs[C]=new e(this,C,T));return this},E.prototype.text=function(C){var T;return this.openCurrent(),T=new y(this,C),this.onData(this.writer.text(T,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.cdata=function(C){var T;return this.openCurrent(),T=new r(this,C),this.onData(this.writer.cdata(T,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.comment=function(C){var T;return this.openCurrent(),T=new n(this,C),this.onData(this.writer.comment(T,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.raw=function(C){var T;return this.openCurrent(),T=new f(this,C),this.onData(this.writer.raw(T,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.instruction=function(C,T){var F,Z,O,H,X;if(this.openCurrent(),C!=null&&(C=I(C)),T!=null&&(T=I(T)),Array.isArray(C))for(F=0,H=C.length;F<H;F++)Z=C[F],this.instruction(Z);else if(_(C))for(Z in C)P.call(C,Z)&&(O=C[Z],this.instruction(Z,O));else p(T)&&(T=T.apply()),X=new h(this,C,T),this.onData(this.writer.processingInstruction(X,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},E.prototype.declaration=function(C,T,F){var Z;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return Z=new c(this,C,T,F),this.onData(this.writer.declaration(Z,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.doctype=function(C,T,F){if(this.openCurrent(),C==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new d(this,T,F),this.currentNode.rootNodeName=C,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},E.prototype.dtdElement=function(C,T){var F;return this.openCurrent(),F=new s(this,C,T),this.onData(this.writer.dtdElement(F,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.attList=function(C,T,F,Z,O){var H;return this.openCurrent(),H=new o(this,C,T,F,Z,O),this.onData(this.writer.dtdAttList(H,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.entity=function(C,T){var F;return this.openCurrent(),F=new a(this,!1,C,T),this.onData(this.writer.dtdEntity(F,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.pEntity=function(C,T){var F;return this.openCurrent(),F=new a(this,!0,C,T),this.onData(this.writer.dtdEntity(F,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.notation=function(C,T){var F;return this.openCurrent(),F=new l(this,C,T),this.onData(this.writer.dtdNotation(F,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},E.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},E.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},E.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},E.prototype.openNode=function(C){var T,F,Z,O;if(!C.isOpen){if(!this.root&&this.currentLevel===0&&C.type===i.Element&&(this.root=C),F="",C.type===i.Element){this.writerOptions.state=t.OpenTag,F=this.writer.indent(C,this.writerOptions,this.currentLevel)+"<"+C.name,O=C.attribs;for(Z in O)P.call(O,Z)&&(T=O[Z],F+=this.writer.attribute(T,this.writerOptions,this.currentLevel));F+=(C.children?">":"/>")+this.writer.endline(C,this.writerOptions,this.currentLevel),this.writerOptions.state=t.InsideTag}else this.writerOptions.state=t.OpenTag,F=this.writer.indent(C,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+C.rootNodeName,C.pubID&&C.sysID?F+=' PUBLIC "'+C.pubID+'" "'+C.sysID+'"':C.sysID&&(F+=' SYSTEM "'+C.sysID+'"'),C.children?(F+=" [",this.writerOptions.state=t.InsideTag):(this.writerOptions.state=t.CloseTag,F+=">"),F+=this.writer.endline(C,this.writerOptions,this.currentLevel);return this.onData(F,this.currentLevel),C.isOpen=!0}},E.prototype.closeNode=function(C){var T;if(!C.isClosed)return T="",this.writerOptions.state=t.CloseTag,C.type===i.Element?T=this.writer.indent(C,this.writerOptions,this.currentLevel)+"</"+C.name+">"+this.writer.endline(C,this.writerOptions,this.currentLevel):T=this.writer.indent(C,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(C,this.writerOptions,this.currentLevel),this.writerOptions.state=t.None,this.onData(T,this.currentLevel),C.isClosed=!0},E.prototype.onData=function(C,T){return this.documentStarted=!0,this.onDataCallback(C,T+1)},E.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},E.prototype.debugInfo=function(C){return C==null?"":"node: <"+C+">"},E.prototype.ele=function(){return this.element.apply(this,arguments)},E.prototype.nod=function(C,T,F){return this.node(C,T,F)},E.prototype.txt=function(C){return this.text(C)},E.prototype.dat=function(C){return this.cdata(C)},E.prototype.com=function(C){return this.comment(C)},E.prototype.ins=function(C,T){return this.instruction(C,T)},E.prototype.dec=function(C,T,F){return this.declaration(C,T,F)},E.prototype.dtd=function(C,T,F){return this.doctype(C,T,F)},E.prototype.e=function(C,T,F){return this.element(C,T,F)},E.prototype.n=function(C,T,F){return this.node(C,T,F)},E.prototype.t=function(C){return this.text(C)},E.prototype.d=function(C){return this.cdata(C)},E.prototype.c=function(C){return this.comment(C)},E.prototype.r=function(C){return this.raw(C)},E.prototype.i=function(C,T){return this.instruction(C,T)},E.prototype.att=function(){return this.currentNode&&this.currentNode.type===i.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},E.prototype.a=function(){return this.currentNode&&this.currentNode.type===i.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},E.prototype.ent=function(C,T){return this.entity(C,T)},E.prototype.pent=function(C,T){return this.pEntity(C,T)},E.prototype.not=function(C,T){return this.notation(C,T)},E}()}.call(W)),al.exports}var ul={exports:{}},yg;function AT(){return yg||(yg=1,function(){var i,t,e,r=function(o,s){for(var a in s)n.call(s,a)&&(o[a]=s[a]);function l(){this.constructor=o}return l.prototype=s.prototype,o.prototype=new l,o.__super__=s.prototype,o},n={}.hasOwnProperty;i=Wt(),e=Uv(),t=zs(),ul.exports=function(o){r(s,o);function s(a,l){this.stream=a,s.__super__.constructor.call(this,l)}return s.prototype.endline=function(a,l,c){return a.isLastRootNode&&l.state===t.CloseTag?"":s.__super__.endline.call(this,a,l,c)},s.prototype.document=function(a,l){var c,d,g,u,h,f,v,m,y;for(v=a.children,d=g=0,h=v.length;g<h;d=++g)c=v[d],c.isLastRootNode=d===a.children.length-1;for(l=this.filterOptions(l),m=a.children,y=[],u=0,f=m.length;u<f;u++)c=m[u],y.push(this.writeChildNode(c,l,0));return y},s.prototype.attribute=function(a,l,c){return this.stream.write(s.__super__.attribute.call(this,a,l,c))},s.prototype.cdata=function(a,l,c){return this.stream.write(s.__super__.cdata.call(this,a,l,c))},s.prototype.comment=function(a,l,c){return this.stream.write(s.__super__.comment.call(this,a,l,c))},s.prototype.declaration=function(a,l,c){return this.stream.write(s.__super__.declaration.call(this,a,l,c))},s.prototype.docType=function(a,l,c){var d,g,u,h;if(c||(c=0),this.openNode(a,l,c),l.state=t.OpenTag,this.stream.write(this.indent(a,l,c)),this.stream.write("<!DOCTYPE "+a.root().name),a.pubID&&a.sysID?this.stream.write(' PUBLIC "'+a.pubID+'" "'+a.sysID+'"'):a.sysID&&this.stream.write(' SYSTEM "'+a.sysID+'"'),a.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(a,l,c)),l.state=t.InsideTag,h=a.children,g=0,u=h.length;g<u;g++)d=h[g],this.writeChildNode(d,l,c+1);l.state=t.CloseTag,this.stream.write("]")}return l.state=t.CloseTag,this.stream.write(l.spaceBeforeSlash+">"),this.stream.write(this.endline(a,l,c)),l.state=t.None,this.closeNode(a,l,c)},s.prototype.element=function(a,l,c){var d,g,u,h,f,v,m,y,I;c||(c=0),this.openNode(a,l,c),l.state=t.OpenTag,this.stream.write(this.indent(a,l,c)+"<"+a.name),y=a.attribs;for(m in y)n.call(y,m)&&(d=y[m],this.attribute(d,l,c));if(u=a.children.length,h=u===0?null:a.children[0],u===0||a.children.every(function(p){return(p.type===i.Text||p.type===i.Raw)&&p.value===""}))l.allowEmpty?(this.stream.write(">"),l.state=t.CloseTag,this.stream.write("</"+a.name+">")):(l.state=t.CloseTag,this.stream.write(l.spaceBeforeSlash+"/>"));else if(l.pretty&&u===1&&(h.type===i.Text||h.type===i.Raw)&&h.value!=null)this.stream.write(">"),l.state=t.InsideTag,l.suppressPrettyCount++,this.writeChildNode(h,l,c+1),l.suppressPrettyCount--,l.state=t.CloseTag,this.stream.write("</"+a.name+">");else{for(this.stream.write(">"+this.endline(a,l,c)),l.state=t.InsideTag,I=a.children,f=0,v=I.length;f<v;f++)g=I[f],this.writeChildNode(g,l,c+1);l.state=t.CloseTag,this.stream.write(this.indent(a,l,c)+"</"+a.name+">")}return this.stream.write(this.endline(a,l,c)),l.state=t.None,this.closeNode(a,l,c)},s.prototype.processingInstruction=function(a,l,c){return this.stream.write(s.__super__.processingInstruction.call(this,a,l,c))},s.prototype.raw=function(a,l,c){return this.stream.write(s.__super__.raw.call(this,a,l,c))},s.prototype.text=function(a,l,c){return this.stream.write(s.__super__.text.call(this,a,l,c))},s.prototype.dtdAttList=function(a,l,c){return this.stream.write(s.__super__.dtdAttList.call(this,a,l,c))},s.prototype.dtdElement=function(a,l,c){return this.stream.write(s.__super__.dtdElement.call(this,a,l,c))},s.prototype.dtdEntity=function(a,l,c){return this.stream.write(s.__super__.dtdEntity.call(this,a,l,c))},s.prototype.dtdNotation=function(a,l,c){return this.stream.write(s.__super__.dtdNotation.call(this,a,l,c))},s}(e)}.call(W)),ul.exports}var mg;function bT(){return mg||(mg=1,function(){var i,t,e,r,n,o,s,a,l,c;c=qe(),a=c.assign,l=c.isFunction,e=Xv(),r=zv(),n=CT(),s=wc(),o=AT(),i=Wt(),t=zs(),Xe.create=function(d,g,u,h){var f,v;if(d==null)throw new Error("Root element needs a name.");return h=a({},g,u,h),f=new r(h),v=f.element(d),h.headless||(f.declaration(h),(h.pubID!=null||h.sysID!=null)&&f.dtd(h)),v},Xe.begin=function(d,g,u){var h;return l(d)&&(h=[d,g],g=h[0],u=h[1],d={}),g?new n(d,g,u):new r(d)},Xe.stringWriter=function(d){return new s(d)},Xe.streamWriter=function(d,g){return new o(d,g)},Xe.implementation=new e,Xe.nodeType=i,Xe.writerState=t}.call(W)),Xe}var _g;function wT(){return _g||(_g=1,function(){var i,t,e,r,n,o={}.hasOwnProperty;i=bT(),t=hc().defaults,r=function(s){return typeof s=="string"&&(s.indexOf("&")>=0||s.indexOf(">")>=0||s.indexOf("<")>=0)},n=function(s){return"<![CDATA["+e(s)+"]]>"},e=function(s){return s.replace("]]>","]]]]><![CDATA[>")},Mu.Builder=function(){function s(a){var l,c,d;this.options={},c=t["0.2"];for(l in c)o.call(c,l)&&(d=c[l],this.options[l]=d);for(l in a)o.call(a,l)&&(d=a[l],this.options[l]=d)}return s.prototype.buildObject=function(a){var l,c,d,g,u;return l=this.options.attrkey,c=this.options.charkey,Object.keys(a).length===1&&this.options.rootName===t["0.2"].rootName?(u=Object.keys(a)[0],a=a[u]):u=this.options.rootName,d=function(h){return function(f,v){var m,y,I,p,_,A;if(typeof v!="object")h.options.cdata&&r(v)?f.raw(n(v)):f.txt(v);else if(Array.isArray(v)){for(p in v)if(o.call(v,p)){y=v[p];for(_ in y)I=y[_],f=d(f.ele(_),I).up()}}else for(_ in v)if(o.call(v,_))if(y=v[_],_===l){if(typeof y=="object")for(m in y)A=y[m],f=f.att(m,A)}else if(_===c)h.options.cdata&&r(y)?f=f.raw(n(y)):f=f.txt(y);else if(Array.isArray(y))for(p in y)o.call(y,p)&&(I=y[p],typeof I=="string"?h.options.cdata&&r(I)?f=f.ele(_).raw(n(I)).up():f=f.ele(_,I).up():f=d(f.ele(_),I).up());else typeof y=="object"?f=d(f.ele(_),y).up():typeof y=="string"&&h.options.cdata&&r(y)?f=f.ele(_).raw(n(y)).up():(y==null&&(y=""),f=f.ele(_,y.toString()).up());return f}}(this),g=i.create(u,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),d(g,a).end(this.options.renderOpts)},s}()}.call(W)),Mu}var ll={},hl={},cl,Cg;function xT(){if(Cg)return cl;Cg=1,cl=i;function i(e){if(e)return t(e)}function t(e){for(var r in i.prototype)e[r]=i.prototype[r];return e}return i.prototype.on=i.prototype.addEventListener=function(e,r){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(r),this},i.prototype.once=function(e,r){var n=this;this._callbacks=this._callbacks||{};function o(){n.off(e,o),r.apply(this,arguments)}return o.fn=r,this.on(e,o),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,r){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(arguments.length==1)return delete this._callbacks[e],this;for(var o,s=0;s<n.length;s++)if(o=n[s],o===r||o.fn===r){n.splice(s,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var r=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var o=0,s=n.length;o<s;++o)n[o].apply(this,r)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length},cl}var fl,Ag;function PT(){if(Ag)return fl;Ag=1;var i=xT();function t(){i.call(this)}return t.prototype=new i,fl=t,t.Stream=t,t.prototype.pipe=function(e,r){var n=this;function o(u){e.writable&&e.write(u)===!1&&n.pause&&n.pause()}n.on("data",o);function s(){n.readable&&n.resume&&n.resume()}e.on("drain",s),!e._isStdio&&(!r||r.end!==!1)&&(n.on("end",l),n.on("close",c));var a=!1;function l(){a||(a=!0,e.end())}function c(){a||(a=!0,typeof e.destroy=="function"&&e.destroy())}function d(u){if(g(),!this.hasListeners("error"))throw u}n.on("error",d),e.on("error",d);function g(){n.off("data",o),e.off("drain",s),n.off("end",l),n.off("close",c),n.off("error",d),e.off("error",d),n.off("end",g),n.off("close",g),e.off("end",g),e.off("close",g)}return n.on("end",g),n.on("close",g),e.on("end",g),e.on("close",g),e.emit("pipe",n),e},fl}var dl={},So={exports:{}},gl={},zi={},bg;function ST(){if(bg)return zi;bg=1,zi.byteLength=a,zi.toByteArray=c,zi.fromByteArray=u;for(var i=[],t=[],e=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=r.length;n<o;++n)i[n]=r[n],t[r.charCodeAt(n)]=n;t[45]=62,t[95]=63;function s(h){var f=h.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=h.indexOf("=");v===-1&&(v=f);var m=v===f?0:4-v%4;return[v,m]}function a(h){var f=s(h),v=f[0],m=f[1];return(v+m)*3/4-m}function l(h,f,v){return(f+v)*3/4-v}function c(h){var f,v=s(h),m=v[0],y=v[1],I=new e(l(h,m,y)),p=0,_=y>0?m-4:m,A;for(A=0;A<_;A+=4)f=t[h.charCodeAt(A)]<<18|t[h.charCodeAt(A+1)]<<12|t[h.charCodeAt(A+2)]<<6|t[h.charCodeAt(A+3)],I[p++]=f>>16&255,I[p++]=f>>8&255,I[p++]=f&255;return y===2&&(f=t[h.charCodeAt(A)]<<2|t[h.charCodeAt(A+1)]>>4,I[p++]=f&255),y===1&&(f=t[h.charCodeAt(A)]<<10|t[h.charCodeAt(A+1)]<<4|t[h.charCodeAt(A+2)]>>2,I[p++]=f>>8&255,I[p++]=f&255),I}function d(h){return i[h>>18&63]+i[h>>12&63]+i[h>>6&63]+i[h&63]}function g(h,f,v){for(var m,y=[],I=f;I<v;I+=3)m=(h[I]<<16&16711680)+(h[I+1]<<8&65280)+(h[I+2]&255),y.push(d(m));return y.join("")}function u(h){for(var f,v=h.length,m=v%3,y=[],I=16383,p=0,_=v-m;p<_;p+=I)y.push(g(h,p,p+I>_?_:p+I));return m===1?(f=h[v-1],y.push(i[f>>2]+i[f<<4&63]+"==")):m===2&&(f=(h[v-2]<<8)+h[v-1],y.push(i[f>>10]+i[f>>4&63]+i[f<<2&63]+"=")),y.join("")}return zi}var To={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var wg;function TT(){return wg||(wg=1,To.read=function(i,t,e,r,n){var o,s,a=n*8-r-1,l=(1<<a)-1,c=l>>1,d=-7,g=e?n-1:0,u=e?-1:1,h=i[t+g];for(g+=u,o=h&(1<<-d)-1,h>>=-d,d+=a;d>0;o=o*256+i[t+g],g+=u,d-=8);for(s=o&(1<<-d)-1,o>>=-d,d+=r;d>0;s=s*256+i[t+g],g+=u,d-=8);if(o===0)o=1-c;else{if(o===l)return s?NaN:(h?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-c}return(h?-1:1)*s*Math.pow(2,o-r)},To.write=function(i,t,e,r,n,o){var s,a,l,c=o*8-n-1,d=(1<<c)-1,g=d>>1,u=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,f=r?1:-1,v=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+g>=1?t+=u/l:t+=u*Math.pow(2,1-g),t*l>=2&&(s++,l/=2),s+g>=d?(a=0,s=d):s+g>=1?(a=(t*l-1)*Math.pow(2,n),s=s+g):(a=t*Math.pow(2,g-1)*Math.pow(2,n),s=0));n>=8;i[e+h]=a&255,h+=f,a/=256,n-=8);for(s=s<<n|a,c+=n;c>0;i[e+h]=s&255,h+=f,s/=256,c-=8);i[e+h-f]|=v*128}),To}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var xg;function ET(){return xg||(xg=1,function(i){const t=ST(),e=TT(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=a,i.SlowBuffer=I,i.INSPECT_MAX_BYTES=50;const n=2147483647;i.kMaxLength=n,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const B=new Uint8Array(1),w={foo:function(){return 42}};return Object.setPrototypeOf(w,Uint8Array.prototype),Object.setPrototypeOf(B,w),B.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(B){if(B>n)throw new RangeError('The value "'+B+'" is invalid for option "size"');const w=new Uint8Array(B);return Object.setPrototypeOf(w,a.prototype),w}function a(B,w,S){if(typeof B=="number"){if(typeof w=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(B)}return l(B,w,S)}a.poolSize=8192;function l(B,w,S){if(typeof B=="string")return u(B,w);if(ArrayBuffer.isView(B))return f(B);if(B==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B);if(te(B,ArrayBuffer)||B&&te(B.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(te(B,SharedArrayBuffer)||B&&te(B.buffer,SharedArrayBuffer)))return v(B,w,S);if(typeof B=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const R=B.valueOf&&B.valueOf();if(R!=null&&R!==B)return a.from(R,w,S);const j=m(B);if(j)return j;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof B[Symbol.toPrimitive]=="function")return a.from(B[Symbol.toPrimitive]("string"),w,S);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B)}a.from=function(B,w,S){return l(B,w,S)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(B){if(typeof B!="number")throw new TypeError('"size" argument must be of type number');if(B<0)throw new RangeError('The value "'+B+'" is invalid for option "size"')}function d(B,w,S){return c(B),B<=0?s(B):w!==void 0?typeof S=="string"?s(B).fill(w,S):s(B).fill(w):s(B)}a.alloc=function(B,w,S){return d(B,w,S)};function g(B){return c(B),s(B<0?0:y(B)|0)}a.allocUnsafe=function(B){return g(B)},a.allocUnsafeSlow=function(B){return g(B)};function u(B,w){if((typeof w!="string"||w==="")&&(w="utf8"),!a.isEncoding(w))throw new TypeError("Unknown encoding: "+w);const S=p(B,w)|0;let R=s(S);const j=R.write(B,w);return j!==S&&(R=R.slice(0,j)),R}function h(B){const w=B.length<0?0:y(B.length)|0,S=s(w);for(let R=0;R<w;R+=1)S[R]=B[R]&255;return S}function f(B){if(te(B,Uint8Array)){const w=new Uint8Array(B);return v(w.buffer,w.byteOffset,w.byteLength)}return h(B)}function v(B,w,S){if(w<0||B.byteLength<w)throw new RangeError('"offset" is outside of buffer bounds');if(B.byteLength<w+(S||0))throw new RangeError('"length" is outside of buffer bounds');let R;return w===void 0&&S===void 0?R=new Uint8Array(B):S===void 0?R=new Uint8Array(B,w):R=new Uint8Array(B,w,S),Object.setPrototypeOf(R,a.prototype),R}function m(B){if(a.isBuffer(B)){const w=y(B.length)|0,S=s(w);return S.length===0||B.copy(S,0,0,w),S}if(B.length!==void 0)return typeof B.length!="number"||Vr(B.length)?s(0):h(B);if(B.type==="Buffer"&&Array.isArray(B.data))return h(B.data)}function y(B){if(B>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return B|0}function I(B){return+B!=B&&(B=0),a.alloc(+B)}a.isBuffer=function(w){return w!=null&&w._isBuffer===!0&&w!==a.prototype},a.compare=function(w,S){if(te(w,Uint8Array)&&(w=a.from(w,w.offset,w.byteLength)),te(S,Uint8Array)&&(S=a.from(S,S.offset,S.byteLength)),!a.isBuffer(w)||!a.isBuffer(S))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(w===S)return 0;let R=w.length,j=S.length;for(let V=0,J=Math.min(R,j);V<J;++V)if(w[V]!==S[V]){R=w[V],j=S[V];break}return R<j?-1:j<R?1:0},a.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(w,S){if(!Array.isArray(w))throw new TypeError('"list" argument must be an Array of Buffers');if(w.length===0)return a.alloc(0);let R;if(S===void 0)for(S=0,R=0;R<w.length;++R)S+=w[R].length;const j=a.allocUnsafe(S);let V=0;for(R=0;R<w.length;++R){let J=w[R];if(te(J,Uint8Array))V+J.length>j.length?(a.isBuffer(J)||(J=a.from(J)),J.copy(j,V)):Uint8Array.prototype.set.call(j,J,V);else if(a.isBuffer(J))J.copy(j,V);else throw new TypeError('"list" argument must be an Array of Buffers');V+=J.length}return j};function p(B,w){if(a.isBuffer(B))return B.length;if(ArrayBuffer.isView(B)||te(B,ArrayBuffer))return B.byteLength;if(typeof B!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof B);const S=B.length,R=arguments.length>2&&arguments[2]===!0;if(!R&&S===0)return 0;let j=!1;for(;;)switch(w){case"ascii":case"latin1":case"binary":return S;case"utf8":case"utf-8":return wt(B).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S*2;case"hex":return S>>>1;case"base64":return be(B).length;default:if(j)return R?-1:wt(B).length;w=(""+w).toLowerCase(),j=!0}}a.byteLength=p;function _(B,w,S){let R=!1;if((w===void 0||w<0)&&(w=0),w>this.length||((S===void 0||S>this.length)&&(S=this.length),S<=0)||(S>>>=0,w>>>=0,S<=w))return"";for(B||(B="utf8");;)switch(B){case"hex":return lt(this,w,S);case"utf8":case"utf-8":return H(this,w,S);case"ascii":return k(this,w,S);case"latin1":case"binary":return ot(this,w,S);case"base64":return O(this,w,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return et(this,w,S);default:if(R)throw new TypeError("Unknown encoding: "+B);B=(B+"").toLowerCase(),R=!0}}a.prototype._isBuffer=!0;function A(B,w,S){const R=B[w];B[w]=B[S],B[S]=R}a.prototype.swap16=function(){const w=this.length;if(w%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let S=0;S<w;S+=2)A(this,S,S+1);return this},a.prototype.swap32=function(){const w=this.length;if(w%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let S=0;S<w;S+=4)A(this,S,S+3),A(this,S+1,S+2);return this},a.prototype.swap64=function(){const w=this.length;if(w%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let S=0;S<w;S+=8)A(this,S,S+7),A(this,S+1,S+6),A(this,S+2,S+5),A(this,S+3,S+4);return this},a.prototype.toString=function(){const w=this.length;return w===0?"":arguments.length===0?H(this,0,w):_.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(w){if(!a.isBuffer(w))throw new TypeError("Argument must be a Buffer");return this===w?!0:a.compare(this,w)===0},a.prototype.inspect=function(){let w="";const S=i.INSPECT_MAX_BYTES;return w=this.toString("hex",0,S).replace(/(.{2})/g,"$1 ").trim(),this.length>S&&(w+=" ... "),"<Buffer "+w+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(w,S,R,j,V){if(te(w,Uint8Array)&&(w=a.from(w,w.offset,w.byteLength)),!a.isBuffer(w))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof w);if(S===void 0&&(S=0),R===void 0&&(R=w?w.length:0),j===void 0&&(j=0),V===void 0&&(V=this.length),S<0||R>w.length||j<0||V>this.length)throw new RangeError("out of range index");if(j>=V&&S>=R)return 0;if(j>=V)return-1;if(S>=R)return 1;if(S>>>=0,R>>>=0,j>>>=0,V>>>=0,this===w)return 0;let J=V-j,G=R-S;const Y=Math.min(J,G),q=this.slice(j,V),tt=w.slice(S,R);for(let nt=0;nt<Y;++nt)if(q[nt]!==tt[nt]){J=q[nt],G=tt[nt];break}return J<G?-1:G<J?1:0};function b(B,w,S,R,j){if(B.length===0)return-1;if(typeof S=="string"?(R=S,S=0):S>2147483647?S=2147483647:S<-2147483648&&(S=-2147483648),S=+S,Vr(S)&&(S=j?0:B.length-1),S<0&&(S=B.length+S),S>=B.length){if(j)return-1;S=B.length-1}else if(S<0)if(j)S=0;else return-1;if(typeof w=="string"&&(w=a.from(w,R)),a.isBuffer(w))return w.length===0?-1:P(B,w,S,R,j);if(typeof w=="number")return w=w&255,typeof Uint8Array.prototype.indexOf=="function"?j?Uint8Array.prototype.indexOf.call(B,w,S):Uint8Array.prototype.lastIndexOf.call(B,w,S):P(B,[w],S,R,j);throw new TypeError("val must be string, number or Buffer")}function P(B,w,S,R,j){let V=1,J=B.length,G=w.length;if(R!==void 0&&(R=String(R).toLowerCase(),R==="ucs2"||R==="ucs-2"||R==="utf16le"||R==="utf-16le")){if(B.length<2||w.length<2)return-1;V=2,J/=2,G/=2,S/=2}function Y(tt,nt){return V===1?tt[nt]:tt.readUInt16BE(nt*V)}let q;if(j){let tt=-1;for(q=S;q<J;q++)if(Y(B,q)===Y(w,tt===-1?0:q-tt)){if(tt===-1&&(tt=q),q-tt+1===G)return tt*V}else tt!==-1&&(q-=q-tt),tt=-1}else for(S+G>J&&(S=J-G),q=S;q>=0;q--){let tt=!0;for(let nt=0;nt<G;nt++)if(Y(B,q+nt)!==Y(w,nt)){tt=!1;break}if(tt)return q}return-1}a.prototype.includes=function(w,S,R){return this.indexOf(w,S,R)!==-1},a.prototype.indexOf=function(w,S,R){return b(this,w,S,R,!0)},a.prototype.lastIndexOf=function(w,S,R){return b(this,w,S,R,!1)};function E(B,w,S,R){S=Number(S)||0;const j=B.length-S;R?(R=Number(R),R>j&&(R=j)):R=j;const V=w.length;R>V/2&&(R=V/2);let J;for(J=0;J<R;++J){const G=parseInt(w.substr(J*2,2),16);if(Vr(G))return J;B[S+J]=G}return J}function C(B,w,S,R){return fe(wt(w,B.length-S),B,S,R)}function T(B,w,S,R){return fe(Dt(w),B,S,R)}function F(B,w,S,R){return fe(be(w),B,S,R)}function Z(B,w,S,R){return fe($t(w,B.length-S),B,S,R)}a.prototype.write=function(w,S,R,j){if(S===void 0)j="utf8",R=this.length,S=0;else if(R===void 0&&typeof S=="string")j=S,R=this.length,S=0;else if(isFinite(S))S=S>>>0,isFinite(R)?(R=R>>>0,j===void 0&&(j="utf8")):(j=R,R=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const V=this.length-S;if((R===void 0||R>V)&&(R=V),w.length>0&&(R<0||S<0)||S>this.length)throw new RangeError("Attempt to write outside buffer bounds");j||(j="utf8");let J=!1;for(;;)switch(j){case"hex":return E(this,w,S,R);case"utf8":case"utf-8":return C(this,w,S,R);case"ascii":case"latin1":case"binary":return T(this,w,S,R);case"base64":return F(this,w,S,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,w,S,R);default:if(J)throw new TypeError("Unknown encoding: "+j);j=(""+j).toLowerCase(),J=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(B,w,S){return w===0&&S===B.length?t.fromByteArray(B):t.fromByteArray(B.slice(w,S))}function H(B,w,S){S=Math.min(B.length,S);const R=[];let j=w;for(;j<S;){const V=B[j];let J=null,G=V>239?4:V>223?3:V>191?2:1;if(j+G<=S){let Y,q,tt,nt;switch(G){case 1:V<128&&(J=V);break;case 2:Y=B[j+1],(Y&192)===128&&(nt=(V&31)<<6|Y&63,nt>127&&(J=nt));break;case 3:Y=B[j+1],q=B[j+2],(Y&192)===128&&(q&192)===128&&(nt=(V&15)<<12|(Y&63)<<6|q&63,nt>2047&&(nt<55296||nt>57343)&&(J=nt));break;case 4:Y=B[j+1],q=B[j+2],tt=B[j+3],(Y&192)===128&&(q&192)===128&&(tt&192)===128&&(nt=(V&15)<<18|(Y&63)<<12|(q&63)<<6|tt&63,nt>65535&&nt<1114112&&(J=nt))}}J===null?(J=65533,G=1):J>65535&&(J-=65536,R.push(J>>>10&1023|55296),J=56320|J&1023),R.push(J),j+=G}return U(R)}const X=4096;function U(B){const w=B.length;if(w<=X)return String.fromCharCode.apply(String,B);let S="",R=0;for(;R<w;)S+=String.fromCharCode.apply(String,B.slice(R,R+=X));return S}function k(B,w,S){let R="";S=Math.min(B.length,S);for(let j=w;j<S;++j)R+=String.fromCharCode(B[j]&127);return R}function ot(B,w,S){let R="";S=Math.min(B.length,S);for(let j=w;j<S;++j)R+=String.fromCharCode(B[j]);return R}function lt(B,w,S){const R=B.length;(!w||w<0)&&(w=0),(!S||S<0||S>R)&&(S=R);let j="";for(let V=w;V<S;++V)j+=ro[B[V]];return j}function et(B,w,S){const R=B.slice(w,S);let j="";for(let V=0;V<R.length-1;V+=2)j+=String.fromCharCode(R[V]+R[V+1]*256);return j}a.prototype.slice=function(w,S){const R=this.length;w=~~w,S=S===void 0?R:~~S,w<0?(w+=R,w<0&&(w=0)):w>R&&(w=R),S<0?(S+=R,S<0&&(S=0)):S>R&&(S=R),S<w&&(S=w);const j=this.subarray(w,S);return Object.setPrototypeOf(j,a.prototype),j};function Q(B,w,S){if(B%1!==0||B<0)throw new RangeError("offset is not uint");if(B+w>S)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(w,S,R){w=w>>>0,S=S>>>0,R||Q(w,S,this.length);let j=this[w],V=1,J=0;for(;++J<S&&(V*=256);)j+=this[w+J]*V;return j},a.prototype.readUintBE=a.prototype.readUIntBE=function(w,S,R){w=w>>>0,S=S>>>0,R||Q(w,S,this.length);let j=this[w+--S],V=1;for(;S>0&&(V*=256);)j+=this[w+--S]*V;return j},a.prototype.readUint8=a.prototype.readUInt8=function(w,S){return w=w>>>0,S||Q(w,1,this.length),this[w]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(w,S){return w=w>>>0,S||Q(w,2,this.length),this[w]|this[w+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(w,S){return w=w>>>0,S||Q(w,2,this.length),this[w]<<8|this[w+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(w,S){return w=w>>>0,S||Q(w,4,this.length),(this[w]|this[w+1]<<8|this[w+2]<<16)+this[w+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(w,S){return w=w>>>0,S||Q(w,4,this.length),this[w]*16777216+(this[w+1]<<16|this[w+2]<<8|this[w+3])},a.prototype.readBigUInt64LE=Fe(function(w){w=w>>>0,K(w,"offset");const S=this[w],R=this[w+7];(S===void 0||R===void 0)&&st(w,this.length-8);const j=S+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24,V=this[++w]+this[++w]*2**8+this[++w]*2**16+R*2**24;return BigInt(j)+(BigInt(V)<<BigInt(32))}),a.prototype.readBigUInt64BE=Fe(function(w){w=w>>>0,K(w,"offset");const S=this[w],R=this[w+7];(S===void 0||R===void 0)&&st(w,this.length-8);const j=S*2**24+this[++w]*2**16+this[++w]*2**8+this[++w],V=this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+R;return(BigInt(j)<<BigInt(32))+BigInt(V)}),a.prototype.readIntLE=function(w,S,R){w=w>>>0,S=S>>>0,R||Q(w,S,this.length);let j=this[w],V=1,J=0;for(;++J<S&&(V*=256);)j+=this[w+J]*V;return V*=128,j>=V&&(j-=Math.pow(2,8*S)),j},a.prototype.readIntBE=function(w,S,R){w=w>>>0,S=S>>>0,R||Q(w,S,this.length);let j=S,V=1,J=this[w+--j];for(;j>0&&(V*=256);)J+=this[w+--j]*V;return V*=128,J>=V&&(J-=Math.pow(2,8*S)),J},a.prototype.readInt8=function(w,S){return w=w>>>0,S||Q(w,1,this.length),this[w]&128?(255-this[w]+1)*-1:this[w]},a.prototype.readInt16LE=function(w,S){w=w>>>0,S||Q(w,2,this.length);const R=this[w]|this[w+1]<<8;return R&32768?R|4294901760:R},a.prototype.readInt16BE=function(w,S){w=w>>>0,S||Q(w,2,this.length);const R=this[w+1]|this[w]<<8;return R&32768?R|4294901760:R},a.prototype.readInt32LE=function(w,S){return w=w>>>0,S||Q(w,4,this.length),this[w]|this[w+1]<<8|this[w+2]<<16|this[w+3]<<24},a.prototype.readInt32BE=function(w,S){return w=w>>>0,S||Q(w,4,this.length),this[w]<<24|this[w+1]<<16|this[w+2]<<8|this[w+3]},a.prototype.readBigInt64LE=Fe(function(w){w=w>>>0,K(w,"offset");const S=this[w],R=this[w+7];(S===void 0||R===void 0)&&st(w,this.length-8);const j=this[w+4]+this[w+5]*2**8+this[w+6]*2**16+(R<<24);return(BigInt(j)<<BigInt(32))+BigInt(S+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24)}),a.prototype.readBigInt64BE=Fe(function(w){w=w>>>0,K(w,"offset");const S=this[w],R=this[w+7];(S===void 0||R===void 0)&&st(w,this.length-8);const j=(S<<24)+this[++w]*2**16+this[++w]*2**8+this[++w];return(BigInt(j)<<BigInt(32))+BigInt(this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+R)}),a.prototype.readFloatLE=function(w,S){return w=w>>>0,S||Q(w,4,this.length),e.read(this,w,!0,23,4)},a.prototype.readFloatBE=function(w,S){return w=w>>>0,S||Q(w,4,this.length),e.read(this,w,!1,23,4)},a.prototype.readDoubleLE=function(w,S){return w=w>>>0,S||Q(w,8,this.length),e.read(this,w,!0,52,8)},a.prototype.readDoubleBE=function(w,S){return w=w>>>0,S||Q(w,8,this.length),e.read(this,w,!1,52,8)};function rt(B,w,S,R,j,V){if(!a.isBuffer(B))throw new TypeError('"buffer" argument must be a Buffer instance');if(w>j||w<V)throw new RangeError('"value" argument is out of bounds');if(S+R>B.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(w,S,R,j){if(w=+w,S=S>>>0,R=R>>>0,!j){const G=Math.pow(2,8*R)-1;rt(this,w,S,R,G,0)}let V=1,J=0;for(this[S]=w&255;++J<R&&(V*=256);)this[S+J]=w/V&255;return S+R},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(w,S,R,j){if(w=+w,S=S>>>0,R=R>>>0,!j){const G=Math.pow(2,8*R)-1;rt(this,w,S,R,G,0)}let V=R-1,J=1;for(this[S+V]=w&255;--V>=0&&(J*=256);)this[S+V]=w/J&255;return S+R},a.prototype.writeUint8=a.prototype.writeUInt8=function(w,S,R){return w=+w,S=S>>>0,R||rt(this,w,S,1,255,0),this[S]=w&255,S+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(w,S,R){return w=+w,S=S>>>0,R||rt(this,w,S,2,65535,0),this[S]=w&255,this[S+1]=w>>>8,S+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(w,S,R){return w=+w,S=S>>>0,R||rt(this,w,S,2,65535,0),this[S]=w>>>8,this[S+1]=w&255,S+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(w,S,R){return w=+w,S=S>>>0,R||rt(this,w,S,4,4294967295,0),this[S+3]=w>>>24,this[S+2]=w>>>16,this[S+1]=w>>>8,this[S]=w&255,S+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(w,S,R){return w=+w,S=S>>>0,R||rt(this,w,S,4,4294967295,0),this[S]=w>>>24,this[S+1]=w>>>16,this[S+2]=w>>>8,this[S+3]=w&255,S+4};function at(B,w,S,R,j){$(w,R,j,B,S,7);let V=Number(w&BigInt(4294967295));B[S++]=V,V=V>>8,B[S++]=V,V=V>>8,B[S++]=V,V=V>>8,B[S++]=V;let J=Number(w>>BigInt(32)&BigInt(4294967295));return B[S++]=J,J=J>>8,B[S++]=J,J=J>>8,B[S++]=J,J=J>>8,B[S++]=J,S}function N(B,w,S,R,j){$(w,R,j,B,S,7);let V=Number(w&BigInt(4294967295));B[S+7]=V,V=V>>8,B[S+6]=V,V=V>>8,B[S+5]=V,V=V>>8,B[S+4]=V;let J=Number(w>>BigInt(32)&BigInt(4294967295));return B[S+3]=J,J=J>>8,B[S+2]=J,J=J>>8,B[S+1]=J,J=J>>8,B[S]=J,S+8}a.prototype.writeBigUInt64LE=Fe(function(w,S=0){return at(this,w,S,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Fe(function(w,S=0){return N(this,w,S,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(w,S,R,j){if(w=+w,S=S>>>0,!j){const Y=Math.pow(2,8*R-1);rt(this,w,S,R,Y-1,-Y)}let V=0,J=1,G=0;for(this[S]=w&255;++V<R&&(J*=256);)w<0&&G===0&&this[S+V-1]!==0&&(G=1),this[S+V]=(w/J>>0)-G&255;return S+R},a.prototype.writeIntBE=function(w,S,R,j){if(w=+w,S=S>>>0,!j){const Y=Math.pow(2,8*R-1);rt(this,w,S,R,Y-1,-Y)}let V=R-1,J=1,G=0;for(this[S+V]=w&255;--V>=0&&(J*=256);)w<0&&G===0&&this[S+V+1]!==0&&(G=1),this[S+V]=(w/J>>0)-G&255;return S+R},a.prototype.writeInt8=function(w,S,R){return w=+w,S=S>>>0,R||rt(this,w,S,1,127,-128),w<0&&(w=255+w+1),this[S]=w&255,S+1},a.prototype.writeInt16LE=function(w,S,R){return w=+w,S=S>>>0,R||rt(this,w,S,2,32767,-32768),this[S]=w&255,this[S+1]=w>>>8,S+2},a.prototype.writeInt16BE=function(w,S,R){return w=+w,S=S>>>0,R||rt(this,w,S,2,32767,-32768),this[S]=w>>>8,this[S+1]=w&255,S+2},a.prototype.writeInt32LE=function(w,S,R){return w=+w,S=S>>>0,R||rt(this,w,S,4,2147483647,-2147483648),this[S]=w&255,this[S+1]=w>>>8,this[S+2]=w>>>16,this[S+3]=w>>>24,S+4},a.prototype.writeInt32BE=function(w,S,R){return w=+w,S=S>>>0,R||rt(this,w,S,4,2147483647,-2147483648),w<0&&(w=4294967295+w+1),this[S]=w>>>24,this[S+1]=w>>>16,this[S+2]=w>>>8,this[S+3]=w&255,S+4},a.prototype.writeBigInt64LE=Fe(function(w,S=0){return at(this,w,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Fe(function(w,S=0){return N(this,w,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function pt(B,w,S,R,j,V){if(S+R>B.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("Index out of range")}function dt(B,w,S,R,j){return w=+w,S=S>>>0,j||pt(B,w,S,4),e.write(B,w,S,R,23,4),S+4}a.prototype.writeFloatLE=function(w,S,R){return dt(this,w,S,!0,R)},a.prototype.writeFloatBE=function(w,S,R){return dt(this,w,S,!1,R)};function D(B,w,S,R,j){return w=+w,S=S>>>0,j||pt(B,w,S,8),e.write(B,w,S,R,52,8),S+8}a.prototype.writeDoubleLE=function(w,S,R){return D(this,w,S,!0,R)},a.prototype.writeDoubleBE=function(w,S,R){return D(this,w,S,!1,R)},a.prototype.copy=function(w,S,R,j){if(!a.isBuffer(w))throw new TypeError("argument should be a Buffer");if(R||(R=0),!j&&j!==0&&(j=this.length),S>=w.length&&(S=w.length),S||(S=0),j>0&&j<R&&(j=R),j===R||w.length===0||this.length===0)return 0;if(S<0)throw new RangeError("targetStart out of bounds");if(R<0||R>=this.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("sourceEnd out of bounds");j>this.length&&(j=this.length),w.length-S<j-R&&(j=w.length-S+R);const V=j-R;return this===w&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(S,R,j):Uint8Array.prototype.set.call(w,this.subarray(R,j),S),V},a.prototype.fill=function(w,S,R,j){if(typeof w=="string"){if(typeof S=="string"?(j=S,S=0,R=this.length):typeof R=="string"&&(j=R,R=this.length),j!==void 0&&typeof j!="string")throw new TypeError("encoding must be a string");if(typeof j=="string"&&!a.isEncoding(j))throw new TypeError("Unknown encoding: "+j);if(w.length===1){const J=w.charCodeAt(0);(j==="utf8"&&J<128||j==="latin1")&&(w=J)}}else typeof w=="number"?w=w&255:typeof w=="boolean"&&(w=Number(w));if(S<0||this.length<S||this.length<R)throw new RangeError("Out of range index");if(R<=S)return this;S=S>>>0,R=R===void 0?this.length:R>>>0,w||(w=0);let V;if(typeof w=="number")for(V=S;V<R;++V)this[V]=w;else{const J=a.isBuffer(w)?w:a.from(w,j),G=J.length;if(G===0)throw new TypeError('The value "'+w+'" is invalid for argument "value"');for(V=0;V<R-S;++V)this[V+S]=J[V%G]}return this};const x={};function M(B,w,S){x[B]=class extends S{constructor(){super(),Object.defineProperty(this,"message",{value:w.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${B}]`,this.stack,delete this.name}get code(){return B}set code(j){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:j,writable:!0})}toString(){return`${this.name} [${B}]: ${this.message}`}}}M("ERR_BUFFER_OUT_OF_BOUNDS",function(B){return B?`${B} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),M("ERR_INVALID_ARG_TYPE",function(B,w){return`The "${B}" argument must be of type number. Received type ${typeof w}`},TypeError),M("ERR_OUT_OF_RANGE",function(B,w,S){let R=`The value of "${B}" is out of range.`,j=S;return Number.isInteger(S)&&Math.abs(S)>2**32?j=L(String(S)):typeof S=="bigint"&&(j=String(S),(S>BigInt(2)**BigInt(32)||S<-(BigInt(2)**BigInt(32)))&&(j=L(j)),j+="n"),R+=` It must be ${w}. Received ${j}`,R},RangeError);function L(B){let w="",S=B.length;const R=B[0]==="-"?1:0;for(;S>=R+4;S-=3)w=`_${B.slice(S-3,S)}${w}`;return`${B.slice(0,S)}${w}`}function z(B,w,S){K(w,"offset"),(B[w]===void 0||B[w+S]===void 0)&&st(w,B.length-(S+1))}function $(B,w,S,R,j,V){if(B>S||B<w){const J=typeof w=="bigint"?"n":"";let G;throw V>3?w===0||w===BigInt(0)?G=`>= 0${J} and < 2${J} ** ${(V+1)*8}${J}`:G=`>= -(2${J} ** ${(V+1)*8-1}${J}) and < 2 ** ${(V+1)*8-1}${J}`:G=`>= ${w}${J} and <= ${S}${J}`,new x.ERR_OUT_OF_RANGE("value",G,B)}z(R,j,V)}function K(B,w){if(typeof B!="number")throw new x.ERR_INVALID_ARG_TYPE(w,"number",B)}function st(B,w,S){throw Math.floor(B)!==B?(K(B,S),new x.ERR_OUT_OF_RANGE(S||"offset","an integer",B)):w<0?new x.ERR_BUFFER_OUT_OF_BOUNDS:new x.ERR_OUT_OF_RANGE(S||"offset",`>= ${S?1:0} and <= ${w}`,B)}const gt=/[^+/0-9A-Za-z-_]/g;function xt(B){if(B=B.split("=")[0],B=B.trim().replace(gt,""),B.length<2)return"";for(;B.length%4!==0;)B=B+"=";return B}function wt(B,w){w=w||1/0;let S;const R=B.length;let j=null;const V=[];for(let J=0;J<R;++J){if(S=B.charCodeAt(J),S>55295&&S<57344){if(!j){if(S>56319){(w-=3)>-1&&V.push(239,191,189);continue}else if(J+1===R){(w-=3)>-1&&V.push(239,191,189);continue}j=S;continue}if(S<56320){(w-=3)>-1&&V.push(239,191,189),j=S;continue}S=(j-55296<<10|S-56320)+65536}else j&&(w-=3)>-1&&V.push(239,191,189);if(j=null,S<128){if((w-=1)<0)break;V.push(S)}else if(S<2048){if((w-=2)<0)break;V.push(S>>6|192,S&63|128)}else if(S<65536){if((w-=3)<0)break;V.push(S>>12|224,S>>6&63|128,S&63|128)}else if(S<1114112){if((w-=4)<0)break;V.push(S>>18|240,S>>12&63|128,S>>6&63|128,S&63|128)}else throw new Error("Invalid code point")}return V}function Dt(B){const w=[];for(let S=0;S<B.length;++S)w.push(B.charCodeAt(S)&255);return w}function $t(B,w){let S,R,j;const V=[];for(let J=0;J<B.length&&!((w-=2)<0);++J)S=B.charCodeAt(J),R=S>>8,j=S%256,V.push(j),V.push(R);return V}function be(B){return t.toByteArray(xt(B))}function fe(B,w,S,R){let j;for(j=0;j<R&&!(j+S>=w.length||j>=B.length);++j)w[j+S]=B[j];return j}function te(B,w){return B instanceof w||B!=null&&B.constructor!=null&&B.constructor.name!=null&&B.constructor.name===w.name}function Vr(B){return B!==B}const ro=function(){const B="0123456789abcdef",w=new Array(256);for(let S=0;S<16;++S){const R=S*16;for(let j=0;j<16;++j)w[R+j]=B[S]+B[j]}return w}();function Fe(B){return typeof BigInt>"u"?Gi:B}function Gi(){throw new Error("BigInt not supported")}}(gl)),gl}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Pg;function FT(){return Pg||(Pg=1,function(i,t){var e=ET(),r=e.Buffer;function n(s,a){for(var l in s)a[l]=s[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?i.exports=e:(n(e,t),t.Buffer=o);function o(s,a,l){return r(s,a,l)}o.prototype=Object.create(r.prototype),n(r,o),o.from=function(s,a,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return r(s,a,l)},o.alloc=function(s,a,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var c=r(s);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},o.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r(s)},o.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(s)}}(So,So.exports)),So.exports}var Sg;function MT(){if(Sg)return dl;Sg=1;var i=FT().Buffer,t=i.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function e(y){if(!y)return"utf8";for(var I;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(I)return;y=(""+y).toLowerCase(),I=!0}}function r(y){var I=e(y);if(typeof I!="string"&&(i.isEncoding===t||!t(y)))throw new Error("Unknown encoding: "+y);return I||y}dl.StringDecoder=n;function n(y){this.encoding=r(y);var I;switch(this.encoding){case"utf16le":this.text=g,this.end=u,I=4;break;case"utf8":this.fillLast=l,I=4;break;case"base64":this.text=h,this.end=f,I=3;break;default:this.write=v,this.end=m;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(I)}n.prototype.write=function(y){if(y.length===0)return"";var I,p;if(this.lastNeed){if(I=this.fillLast(y),I===void 0)return"";p=this.lastNeed,this.lastNeed=0}else p=0;return p<y.length?I?I+this.text(y,p):this.text(y,p):I||""},n.prototype.end=d,n.prototype.text=c,n.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function o(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function s(y,I,p){var _=I.length-1;if(_<p)return 0;var A=o(I[_]);return A>=0?(A>0&&(y.lastNeed=A-1),A):--_<p||A===-2?0:(A=o(I[_]),A>=0?(A>0&&(y.lastNeed=A-2),A):--_<p||A===-2?0:(A=o(I[_]),A>=0?(A>0&&(A===2?A=0:y.lastNeed=A-3),A):0))}function a(y,I,p){if((I[0]&192)!==128)return y.lastNeed=0,"";if(y.lastNeed>1&&I.length>1){if((I[1]&192)!==128)return y.lastNeed=1,"";if(y.lastNeed>2&&I.length>2&&(I[2]&192)!==128)return y.lastNeed=2,""}}function l(y){var I=this.lastTotal-this.lastNeed,p=a(this,y);if(p!==void 0)return p;if(this.lastNeed<=y.length)return y.copy(this.lastChar,I,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,I,0,y.length),this.lastNeed-=y.length}function c(y,I){var p=s(this,y,I);if(!this.lastNeed)return y.toString("utf8",I);this.lastTotal=p;var _=y.length-(p-this.lastNeed);return y.copy(this.lastChar,0,_),y.toString("utf8",I,_)}function d(y){var I=y&&y.length?this.write(y):"";return this.lastNeed?I+"":I}function g(y,I){if((y.length-I)%2===0){var p=y.toString("utf16le",I);if(p){var _=p.charCodeAt(p.length-1);if(_>=55296&&_<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],p.slice(0,-1)}return p}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",I,y.length-1)}function u(y){var I=y&&y.length?this.write(y):"";if(this.lastNeed){var p=this.lastTotal-this.lastNeed;return I+this.lastChar.toString("utf16le",0,p)}return I}function h(y,I){var p=(y.length-I)%3;return p===0?y.toString("base64",I):(this.lastNeed=3-p,this.lastTotal=3,p===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",I,y.length-p))}function f(y){var I=y&&y.length?this.write(y):"";return this.lastNeed?I+this.lastChar.toString("base64",0,3-this.lastNeed):I}function v(y){return y.toString(this.encoding)}function m(y){return y&&y.length?this.write(y):""}return dl}var Tg;function DT(){return Tg||(Tg=1,function(i){(function(t){t.parser=function(D,x){return new r(D,x)},t.SAXParser=r,t.SAXStream=d,t.createStream=c,t.MAX_BUFFER_LENGTH=64*1024;var e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(D,x){if(!(this instanceof r))return new r(D,x);var M=this;o(M),M.q=M.c="",M.bufferCheckPosition=t.MAX_BUFFER_LENGTH,M.opt=x||{},M.opt.lowercase=M.opt.lowercase||M.opt.lowercasetags,M.looseCase=M.opt.lowercase?"toLowerCase":"toUpperCase",M.tags=[],M.closed=M.closedRoot=M.sawRoot=!1,M.tag=M.error=null,M.strict=!!D,M.noscript=!!(D||M.opt.noscript),M.state=C.BEGIN,M.strictEntities=M.opt.strictEntities,M.ENTITIES=M.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),M.attribList=[],M.opt.xmlns&&(M.ns=Object.create(v)),M.trackPosition=M.opt.position!==!1,M.trackPosition&&(M.position=M.line=M.column=0),F(M,"onready")}Object.create||(Object.create=function(D){function x(){}x.prototype=D;var M=new x;return M}),Object.keys||(Object.keys=function(D){var x=[];for(var M in D)D.hasOwnProperty(M)&&x.push(M);return x});function n(D){for(var x=Math.max(t.MAX_BUFFER_LENGTH,10),M=0,L=0,z=e.length;L<z;L++){var $=D[e[L]].length;if($>x)switch(e[L]){case"textNode":O(D);break;case"cdata":Z(D,"oncdata",D.cdata),D.cdata="";break;case"script":Z(D,"onscript",D.script),D.script="";break;default:X(D,"Max buffer length exceeded: "+e[L])}M=Math.max(M,$)}var K=t.MAX_BUFFER_LENGTH-M;D.bufferCheckPosition=K+D.position}function o(D){for(var x=0,M=e.length;x<M;x++)D[e[x]]=""}function s(D){O(D),D.cdata!==""&&(Z(D,"oncdata",D.cdata),D.cdata=""),D.script!==""&&(Z(D,"onscript",D.script),D.script="")}r.prototype={end:function(){U(this)},write:dt,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var a;try{a=PT().Stream}catch{a=function(){}}a||(a=function(){});var l=t.EVENTS.filter(function(D){return D!=="error"&&D!=="end"});function c(D,x){return new d(D,x)}function d(D,x){if(!(this instanceof d))return new d(D,x);a.apply(this),this._parser=new r(D,x),this.writable=!0,this.readable=!0;var M=this;this._parser.onend=function(){M.emit("end")},this._parser.onerror=function(L){M.emit("error",L),M._parser.error=null},this._decoder=null,l.forEach(function(L){Object.defineProperty(M,"on"+L,{get:function(){return M._parser["on"+L]},set:function(z){if(!z)return M.removeAllListeners(L),M._parser["on"+L]=z,z;M.on(L,z)},enumerable:!0,configurable:!1})})}d.prototype=Object.create(a.prototype,{constructor:{value:d}}),d.prototype.write=function(D){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(D)){if(!this._decoder){var x=MT().StringDecoder;this._decoder=new x("utf8")}D=this._decoder.write(D)}return this._parser.write(D.toString()),this.emit("data",D),!0},d.prototype.end=function(D){return D&&D.length&&this.write(D),this._parser.end(),!0},d.prototype.on=function(D,x){var M=this;return!M._parser["on"+D]&&l.indexOf(D)!==-1&&(M._parser["on"+D]=function(){var L=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);L.splice(0,0,D),M.emit.apply(M,L)}),a.prototype.on.call(M,D,x)};var g="[CDATA[",u="DOCTYPE",h="http://www.w3.org/XML/1998/namespace",f="http://www.w3.org/2000/xmlns/",v={xml:h,xmlns:f},m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,I=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function _(D){return D===" "||D===`
`||D==="\r"||D==="	"}function A(D){return D==='"'||D==="'"}function b(D){return D===">"||_(D)}function P(D,x){return D.test(x)}function E(D,x){return!P(D,x)}var C=0;t.STATE={BEGIN:C++,BEGIN_WHITESPACE:C++,TEXT:C++,TEXT_ENTITY:C++,OPEN_WAKA:C++,SGML_DECL:C++,SGML_DECL_QUOTED:C++,DOCTYPE:C++,DOCTYPE_QUOTED:C++,DOCTYPE_DTD:C++,DOCTYPE_DTD_QUOTED:C++,COMMENT_STARTING:C++,COMMENT:C++,COMMENT_ENDING:C++,COMMENT_ENDED:C++,CDATA:C++,CDATA_ENDING:C++,CDATA_ENDING_2:C++,PROC_INST:C++,PROC_INST_BODY:C++,PROC_INST_ENDING:C++,OPEN_TAG:C++,OPEN_TAG_SLASH:C++,ATTRIB:C++,ATTRIB_NAME:C++,ATTRIB_NAME_SAW_WHITE:C++,ATTRIB_VALUE:C++,ATTRIB_VALUE_QUOTED:C++,ATTRIB_VALUE_CLOSED:C++,ATTRIB_VALUE_UNQUOTED:C++,ATTRIB_VALUE_ENTITY_Q:C++,ATTRIB_VALUE_ENTITY_U:C++,CLOSE_TAG:C++,CLOSE_TAG_SAW_WHITE:C++,SCRIPT:C++,SCRIPT_ENDING:C++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(D){var x=t.ENTITIES[D],M=typeof x=="number"?String.fromCharCode(x):x;t.ENTITIES[D]=M});for(var T in t.STATE)t.STATE[t.STATE[T]]=T;C=t.STATE;function F(D,x,M){D[x]&&D[x](M)}function Z(D,x,M){D.textNode&&O(D),F(D,x,M)}function O(D){D.textNode=H(D.opt,D.textNode),D.textNode&&F(D,"ontext",D.textNode),D.textNode=""}function H(D,x){return D.trim&&(x=x.trim()),D.normalize&&(x=x.replace(/\s+/g," ")),x}function X(D,x){return O(D),D.trackPosition&&(x+=`
Line: `+D.line+`
Column: `+D.column+`
Char: `+D.c),x=new Error(x),D.error=x,F(D,"onerror",x),D}function U(D){return D.sawRoot&&!D.closedRoot&&k(D,"Unclosed root tag"),D.state!==C.BEGIN&&D.state!==C.BEGIN_WHITESPACE&&D.state!==C.TEXT&&X(D,"Unexpected end"),O(D),D.c="",D.closed=!0,F(D,"onend"),r.call(D,D.strict,D.opt),D}function k(D,x){if(typeof D!="object"||!(D instanceof r))throw new Error("bad call to strictFail");D.strict&&X(D,x)}function ot(D){D.strict||(D.tagName=D.tagName[D.looseCase]());var x=D.tags[D.tags.length-1]||D,M=D.tag={name:D.tagName,attributes:{}};D.opt.xmlns&&(M.ns=x.ns),D.attribList.length=0,Z(D,"onopentagstart",M)}function lt(D,x){var M=D.indexOf(":"),L=M<0?["",D]:D.split(":"),z=L[0],$=L[1];return x&&D==="xmlns"&&(z="xmlns",$=""),{prefix:z,local:$}}function et(D){if(D.strict||(D.attribName=D.attribName[D.looseCase]()),D.attribList.indexOf(D.attribName)!==-1||D.tag.attributes.hasOwnProperty(D.attribName)){D.attribName=D.attribValue="";return}if(D.opt.xmlns){var x=lt(D.attribName,!0),M=x.prefix,L=x.local;if(M==="xmlns")if(L==="xml"&&D.attribValue!==h)k(D,"xml: prefix must be bound to "+h+`
Actual: `+D.attribValue);else if(L==="xmlns"&&D.attribValue!==f)k(D,"xmlns: prefix must be bound to "+f+`
Actual: `+D.attribValue);else{var z=D.tag,$=D.tags[D.tags.length-1]||D;z.ns===$.ns&&(z.ns=Object.create($.ns)),z.ns[L]=D.attribValue}D.attribList.push([D.attribName,D.attribValue])}else D.tag.attributes[D.attribName]=D.attribValue,Z(D,"onattribute",{name:D.attribName,value:D.attribValue});D.attribName=D.attribValue=""}function Q(D,x){if(D.opt.xmlns){var M=D.tag,L=lt(D.tagName);M.prefix=L.prefix,M.local=L.local,M.uri=M.ns[L.prefix]||"",M.prefix&&!M.uri&&(k(D,"Unbound namespace prefix: "+JSON.stringify(D.tagName)),M.uri=L.prefix);var z=D.tags[D.tags.length-1]||D;M.ns&&z.ns!==M.ns&&Object.keys(M.ns).forEach(function(te){Z(D,"onopennamespace",{prefix:te,uri:M.ns[te]})});for(var $=0,K=D.attribList.length;$<K;$++){var st=D.attribList[$],gt=st[0],xt=st[1],wt=lt(gt,!0),Dt=wt.prefix,$t=wt.local,be=Dt===""?"":M.ns[Dt]||"",fe={name:gt,value:xt,prefix:Dt,local:$t,uri:be};Dt&&Dt!=="xmlns"&&!be&&(k(D,"Unbound namespace prefix: "+JSON.stringify(Dt)),fe.uri=Dt),D.tag.attributes[gt]=fe,Z(D,"onattribute",fe)}D.attribList.length=0}D.tag.isSelfClosing=!!x,D.sawRoot=!0,D.tags.push(D.tag),Z(D,"onopentag",D.tag),x||(!D.noscript&&D.tagName.toLowerCase()==="script"?D.state=C.SCRIPT:D.state=C.TEXT,D.tag=null,D.tagName=""),D.attribName=D.attribValue="",D.attribList.length=0}function rt(D){if(!D.tagName){k(D,"Weird empty close tag."),D.textNode+="</>",D.state=C.TEXT;return}if(D.script){if(D.tagName!=="script"){D.script+="</"+D.tagName+">",D.tagName="",D.state=C.SCRIPT;return}Z(D,"onscript",D.script),D.script=""}var x=D.tags.length,M=D.tagName;D.strict||(M=M[D.looseCase]());for(var L=M;x--;){var z=D.tags[x];if(z.name!==L)k(D,"Unexpected close tag");else break}if(x<0){k(D,"Unmatched closing tag: "+D.tagName),D.textNode+="</"+D.tagName+">",D.state=C.TEXT;return}D.tagName=M;for(var $=D.tags.length;$-- >x;){var K=D.tag=D.tags.pop();D.tagName=D.tag.name,Z(D,"onclosetag",D.tagName);var st={};for(var gt in K.ns)st[gt]=K.ns[gt];var xt=D.tags[D.tags.length-1]||D;D.opt.xmlns&&K.ns!==xt.ns&&Object.keys(K.ns).forEach(function(wt){var Dt=K.ns[wt];Z(D,"onclosenamespace",{prefix:wt,uri:Dt})})}x===0&&(D.closedRoot=!0),D.tagName=D.attribValue=D.attribName="",D.attribList.length=0,D.state=C.TEXT}function at(D){var x=D.entity,M=x.toLowerCase(),L,z="";return D.ENTITIES[x]?D.ENTITIES[x]:D.ENTITIES[M]?D.ENTITIES[M]:(x=M,x.charAt(0)==="#"&&(x.charAt(1)==="x"?(x=x.slice(2),L=parseInt(x,16),z=L.toString(16)):(x=x.slice(1),L=parseInt(x,10),z=L.toString(10))),x=x.replace(/^0+/,""),isNaN(L)||z.toLowerCase()!==x?(k(D,"Invalid character entity"),"&"+D.entity+";"):String.fromCodePoint(L))}function N(D,x){x==="<"?(D.state=C.OPEN_WAKA,D.startTagPosition=D.position):_(x)||(k(D,"Non-whitespace before first tag."),D.textNode=x,D.state=C.TEXT)}function pt(D,x){var M="";return x<D.length&&(M=D.charAt(x)),M}function dt(D){var x=this;if(this.error)throw this.error;if(x.closed)return X(x,"Cannot write after close. Assign an onready handler.");if(D===null)return U(x);typeof D=="object"&&(D=D.toString());for(var M=0,L="";L=pt(D,M++),x.c=L,!!L;)switch(x.trackPosition&&(x.position++,L===`
`?(x.line++,x.column=0):x.column++),x.state){case C.BEGIN:if(x.state=C.BEGIN_WHITESPACE,L==="\uFEFF")continue;N(x,L);continue;case C.BEGIN_WHITESPACE:N(x,L);continue;case C.TEXT:if(x.sawRoot&&!x.closedRoot){for(var z=M-1;L&&L!=="<"&&L!=="&";)L=pt(D,M++),L&&x.trackPosition&&(x.position++,L===`
`?(x.line++,x.column=0):x.column++);x.textNode+=D.substring(z,M-1)}L==="<"&&!(x.sawRoot&&x.closedRoot&&!x.strict)?(x.state=C.OPEN_WAKA,x.startTagPosition=x.position):(!_(L)&&(!x.sawRoot||x.closedRoot)&&k(x,"Text data outside of root node."),L==="&"?x.state=C.TEXT_ENTITY:x.textNode+=L);continue;case C.SCRIPT:L==="<"?x.state=C.SCRIPT_ENDING:x.script+=L;continue;case C.SCRIPT_ENDING:L==="/"?x.state=C.CLOSE_TAG:(x.script+="<"+L,x.state=C.SCRIPT);continue;case C.OPEN_WAKA:if(L==="!")x.state=C.SGML_DECL,x.sgmlDecl="";else if(!_(L))if(P(m,L))x.state=C.OPEN_TAG,x.tagName=L;else if(L==="/")x.state=C.CLOSE_TAG,x.tagName="";else if(L==="?")x.state=C.PROC_INST,x.procInstName=x.procInstBody="";else{if(k(x,"Unencoded <"),x.startTagPosition+1<x.position){var $=x.position-x.startTagPosition;L=new Array($).join(" ")+L}x.textNode+="<"+L,x.state=C.TEXT}continue;case C.SGML_DECL:(x.sgmlDecl+L).toUpperCase()===g?(Z(x,"onopencdata"),x.state=C.CDATA,x.sgmlDecl="",x.cdata=""):x.sgmlDecl+L==="--"?(x.state=C.COMMENT,x.comment="",x.sgmlDecl=""):(x.sgmlDecl+L).toUpperCase()===u?(x.state=C.DOCTYPE,(x.doctype||x.sawRoot)&&k(x,"Inappropriately located doctype declaration"),x.doctype="",x.sgmlDecl=""):L===">"?(Z(x,"onsgmldeclaration",x.sgmlDecl),x.sgmlDecl="",x.state=C.TEXT):(A(L)&&(x.state=C.SGML_DECL_QUOTED),x.sgmlDecl+=L);continue;case C.SGML_DECL_QUOTED:L===x.q&&(x.state=C.SGML_DECL,x.q=""),x.sgmlDecl+=L;continue;case C.DOCTYPE:L===">"?(x.state=C.TEXT,Z(x,"ondoctype",x.doctype),x.doctype=!0):(x.doctype+=L,L==="["?x.state=C.DOCTYPE_DTD:A(L)&&(x.state=C.DOCTYPE_QUOTED,x.q=L));continue;case C.DOCTYPE_QUOTED:x.doctype+=L,L===x.q&&(x.q="",x.state=C.DOCTYPE);continue;case C.DOCTYPE_DTD:x.doctype+=L,L==="]"?x.state=C.DOCTYPE:A(L)&&(x.state=C.DOCTYPE_DTD_QUOTED,x.q=L);continue;case C.DOCTYPE_DTD_QUOTED:x.doctype+=L,L===x.q&&(x.state=C.DOCTYPE_DTD,x.q="");continue;case C.COMMENT:L==="-"?x.state=C.COMMENT_ENDING:x.comment+=L;continue;case C.COMMENT_ENDING:L==="-"?(x.state=C.COMMENT_ENDED,x.comment=H(x.opt,x.comment),x.comment&&Z(x,"oncomment",x.comment),x.comment=""):(x.comment+="-"+L,x.state=C.COMMENT);continue;case C.COMMENT_ENDED:L!==">"?(k(x,"Malformed comment"),x.comment+="--"+L,x.state=C.COMMENT):x.state=C.TEXT;continue;case C.CDATA:L==="]"?x.state=C.CDATA_ENDING:x.cdata+=L;continue;case C.CDATA_ENDING:L==="]"?x.state=C.CDATA_ENDING_2:(x.cdata+="]"+L,x.state=C.CDATA);continue;case C.CDATA_ENDING_2:L===">"?(x.cdata&&Z(x,"oncdata",x.cdata),Z(x,"onclosecdata"),x.cdata="",x.state=C.TEXT):L==="]"?x.cdata+="]":(x.cdata+="]]"+L,x.state=C.CDATA);continue;case C.PROC_INST:L==="?"?x.state=C.PROC_INST_ENDING:_(L)?x.state=C.PROC_INST_BODY:x.procInstName+=L;continue;case C.PROC_INST_BODY:if(!x.procInstBody&&_(L))continue;L==="?"?x.state=C.PROC_INST_ENDING:x.procInstBody+=L;continue;case C.PROC_INST_ENDING:L===">"?(Z(x,"onprocessinginstruction",{name:x.procInstName,body:x.procInstBody}),x.procInstName=x.procInstBody="",x.state=C.TEXT):(x.procInstBody+="?"+L,x.state=C.PROC_INST_BODY);continue;case C.OPEN_TAG:P(y,L)?x.tagName+=L:(ot(x),L===">"?Q(x):L==="/"?x.state=C.OPEN_TAG_SLASH:(_(L)||k(x,"Invalid character in tag name"),x.state=C.ATTRIB));continue;case C.OPEN_TAG_SLASH:L===">"?(Q(x,!0),rt(x)):(k(x,"Forward-slash in opening tag not followed by >"),x.state=C.ATTRIB);continue;case C.ATTRIB:if(_(L))continue;L===">"?Q(x):L==="/"?x.state=C.OPEN_TAG_SLASH:P(m,L)?(x.attribName=L,x.attribValue="",x.state=C.ATTRIB_NAME):k(x,"Invalid attribute name");continue;case C.ATTRIB_NAME:L==="="?x.state=C.ATTRIB_VALUE:L===">"?(k(x,"Attribute without value"),x.attribValue=x.attribName,et(x),Q(x)):_(L)?x.state=C.ATTRIB_NAME_SAW_WHITE:P(y,L)?x.attribName+=L:k(x,"Invalid attribute name");continue;case C.ATTRIB_NAME_SAW_WHITE:if(L==="=")x.state=C.ATTRIB_VALUE;else{if(_(L))continue;k(x,"Attribute without value"),x.tag.attributes[x.attribName]="",x.attribValue="",Z(x,"onattribute",{name:x.attribName,value:""}),x.attribName="",L===">"?Q(x):P(m,L)?(x.attribName=L,x.state=C.ATTRIB_NAME):(k(x,"Invalid attribute name"),x.state=C.ATTRIB)}continue;case C.ATTRIB_VALUE:if(_(L))continue;A(L)?(x.q=L,x.state=C.ATTRIB_VALUE_QUOTED):(k(x,"Unquoted attribute value"),x.state=C.ATTRIB_VALUE_UNQUOTED,x.attribValue=L);continue;case C.ATTRIB_VALUE_QUOTED:if(L!==x.q){L==="&"?x.state=C.ATTRIB_VALUE_ENTITY_Q:x.attribValue+=L;continue}et(x),x.q="",x.state=C.ATTRIB_VALUE_CLOSED;continue;case C.ATTRIB_VALUE_CLOSED:_(L)?x.state=C.ATTRIB:L===">"?Q(x):L==="/"?x.state=C.OPEN_TAG_SLASH:P(m,L)?(k(x,"No whitespace between attributes"),x.attribName=L,x.attribValue="",x.state=C.ATTRIB_NAME):k(x,"Invalid attribute name");continue;case C.ATTRIB_VALUE_UNQUOTED:if(!b(L)){L==="&"?x.state=C.ATTRIB_VALUE_ENTITY_U:x.attribValue+=L;continue}et(x),L===">"?Q(x):x.state=C.ATTRIB;continue;case C.CLOSE_TAG:if(x.tagName)L===">"?rt(x):P(y,L)?x.tagName+=L:x.script?(x.script+="</"+x.tagName,x.tagName="",x.state=C.SCRIPT):(_(L)||k(x,"Invalid tagname in closing tag"),x.state=C.CLOSE_TAG_SAW_WHITE);else{if(_(L))continue;E(m,L)?x.script?(x.script+="</"+L,x.state=C.SCRIPT):k(x,"Invalid tagname in closing tag."):x.tagName=L}continue;case C.CLOSE_TAG_SAW_WHITE:if(_(L))continue;L===">"?rt(x):k(x,"Invalid characters in closing tag");continue;case C.TEXT_ENTITY:case C.ATTRIB_VALUE_ENTITY_Q:case C.ATTRIB_VALUE_ENTITY_U:var K,st;switch(x.state){case C.TEXT_ENTITY:K=C.TEXT,st="textNode";break;case C.ATTRIB_VALUE_ENTITY_Q:K=C.ATTRIB_VALUE_QUOTED,st="attribValue";break;case C.ATTRIB_VALUE_ENTITY_U:K=C.ATTRIB_VALUE_UNQUOTED,st="attribValue";break}if(L===";")if(x.opt.unparsedEntities){var gt=at(x);x.entity="",x.state=K,x.write(gt)}else x[st]+=at(x),x.entity="",x.state=K;else P(x.entity.length?p:I,L)?x.entity+=L:(k(x,"Invalid character in entity name"),x[st]+="&"+x.entity+L,x.entity="",x.state=K);continue;default:throw new Error(x,"Unknown state: "+x.state)}return x.position>=x.bufferCheckPosition&&n(x),x}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var D=String.fromCharCode,x=Math.floor,M=function(){var L=16384,z=[],$,K,st=-1,gt=arguments.length;if(!gt)return"";for(var xt="";++st<gt;){var wt=Number(arguments[st]);if(!isFinite(wt)||wt<0||wt>1114111||x(wt)!==wt)throw RangeError("Invalid code point: "+wt);wt<=65535?z.push(wt):(wt-=65536,$=(wt>>10)+55296,K=wt%1024+56320,z.push($,K)),(st+1===gt||z.length>L)&&(xt+=D.apply(null,z),z.length=0)}return xt};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:M,configurable:!0,writable:!0}):String.fromCodePoint=M}()})(i)}(hl)),hl}var Eo={exports:{}},Eg;function BT(){if(Eg)return Eo.exports;Eg=1;var i=typeof Reflect=="object"?Reflect:null,t=i&&typeof i.apply=="function"?i.apply:function(A,b,P){return Function.prototype.apply.call(A,b,P)},e;i&&typeof i.ownKeys=="function"?e=i.ownKeys:Object.getOwnPropertySymbols?e=function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:e=function(A){return Object.getOwnPropertyNames(A)};function r(_){console&&console.warn&&console.warn(_)}var n=Number.isNaN||function(A){return A!==A};function o(){o.init.call(this)}Eo.exports=o,Eo.exports.once=y,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(_){if(typeof _!="number"||_<0||n(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");s=_}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(A){if(typeof A!="number"||A<0||n(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this};function l(_){return _._maxListeners===void 0?o.defaultMaxListeners:_._maxListeners}o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(A){for(var b=[],P=1;P<arguments.length;P++)b.push(arguments[P]);var E=A==="error",C=this._events;if(C!==void 0)E=E&&C.error===void 0;else if(!E)return!1;if(E){var T;if(b.length>0&&(T=b[0]),T instanceof Error)throw T;var F=new Error("Unhandled error."+(T?" ("+T.message+")":""));throw F.context=T,F}var Z=C[A];if(Z===void 0)return!1;if(typeof Z=="function")t(Z,this,b);else for(var O=Z.length,H=f(Z,O),P=0;P<O;++P)t(H[P],this,b);return!0};function c(_,A,b,P){var E,C,T;if(a(b),C=_._events,C===void 0?(C=_._events=Object.create(null),_._eventsCount=0):(C.newListener!==void 0&&(_.emit("newListener",A,b.listener?b.listener:b),C=_._events),T=C[A]),T===void 0)T=C[A]=b,++_._eventsCount;else if(typeof T=="function"?T=C[A]=P?[b,T]:[T,b]:P?T.unshift(b):T.push(b),E=l(_),E>0&&T.length>E&&!T.warned){T.warned=!0;var F=new Error("Possible EventEmitter memory leak detected. "+T.length+" "+String(A)+" listeners added. Use emitter.setMaxListeners() to increase limit");F.name="MaxListenersExceededWarning",F.emitter=_,F.type=A,F.count=T.length,r(F)}return _}o.prototype.addListener=function(A,b){return c(this,A,b,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(A,b){return c(this,A,b,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(_,A,b){var P={fired:!1,wrapFn:void 0,target:_,type:A,listener:b},E=d.bind(P);return E.listener=b,P.wrapFn=E,E}o.prototype.once=function(A,b){return a(b),this.on(A,g(this,A,b)),this},o.prototype.prependOnceListener=function(A,b){return a(b),this.prependListener(A,g(this,A,b)),this},o.prototype.removeListener=function(A,b){var P,E,C,T,F;if(a(b),E=this._events,E===void 0)return this;if(P=E[A],P===void 0)return this;if(P===b||P.listener===b)--this._eventsCount===0?this._events=Object.create(null):(delete E[A],E.removeListener&&this.emit("removeListener",A,P.listener||b));else if(typeof P!="function"){for(C=-1,T=P.length-1;T>=0;T--)if(P[T]===b||P[T].listener===b){F=P[T].listener,C=T;break}if(C<0)return this;C===0?P.shift():v(P,C),P.length===1&&(E[A]=P[0]),E.removeListener!==void 0&&this.emit("removeListener",A,F||b)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(A){var b,P,E;if(P=this._events,P===void 0)return this;if(P.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):P[A]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete P[A]),this;if(arguments.length===0){var C=Object.keys(P),T;for(E=0;E<C.length;++E)T=C[E],T!=="removeListener"&&this.removeAllListeners(T);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(b=P[A],typeof b=="function")this.removeListener(A,b);else if(b!==void 0)for(E=b.length-1;E>=0;E--)this.removeListener(A,b[E]);return this};function u(_,A,b){var P=_._events;if(P===void 0)return[];var E=P[A];return E===void 0?[]:typeof E=="function"?b?[E.listener||E]:[E]:b?m(E):f(E,E.length)}o.prototype.listeners=function(A){return u(this,A,!0)},o.prototype.rawListeners=function(A){return u(this,A,!1)},o.listenerCount=function(_,A){return typeof _.listenerCount=="function"?_.listenerCount(A):h.call(_,A)},o.prototype.listenerCount=h;function h(_){var A=this._events;if(A!==void 0){var b=A[_];if(typeof b=="function")return 1;if(b!==void 0)return b.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]};function f(_,A){for(var b=new Array(A),P=0;P<A;++P)b[P]=_[P];return b}function v(_,A){for(;A+1<_.length;A++)_[A]=_[A+1];_.pop()}function m(_){for(var A=new Array(_.length),b=0;b<A.length;++b)A[b]=_[b].listener||_[b];return A}function y(_,A){return new Promise(function(b,P){function E(T){_.removeListener(A,C),P(T)}function C(){typeof _.removeListener=="function"&&_.removeListener("error",E),b([].slice.call(arguments))}p(_,A,C,{once:!0}),A!=="error"&&I(_,E,{once:!0})})}function I(_,A,b){typeof _.on=="function"&&p(_,"error",A,b)}function p(_,A,b,P){if(typeof _.on=="function")P.once?_.once(A,b):_.on(A,b);else if(typeof _.addEventListener=="function")_.addEventListener(A,function E(C){P.once&&_.removeEventListener(A,E),b(C)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _)}return Eo.exports}var pl={},Fg;function LT(){return Fg||(Fg=1,function(){pl.stripBOM=function(i){return i[0]==="\uFEFF"?i.substring(1):i}}.call(W)),pl}var Ar={},Mg;function Vv(){return Mg||(Mg=1,function(){var i;i=new RegExp(/(?!xmlns)^.*:/),Ar.normalize=function(t){return t.toLowerCase()},Ar.firstCharLowerCase=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},Ar.stripPrefix=function(t){return t.replace(i,"")},Ar.parseNumbers=function(t){return isNaN(t)||(t=t%1===0?parseInt(t,10):parseFloat(t)),t},Ar.parseBooleans=function(t){return/^(?:true|false)$/i.test(t)&&(t=t.toLowerCase()==="true"),t}}.call(W)),Ar}var Il={},Dg;function RT(){if(Dg)return Il;Dg=1,Il.every=function(o){return new e(o)};var i={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5};for(var t in i)t==="millisecond"?i.ms=i[t]:i[t.charAt(0)]=i[t],i[t+"s"]=i[t];function e(o){this.count=0;var s=n(o);s&&(this.time=Number(s[0])*i[s[1]],this.type=s[1])}e.prototype.do=function(o){this.time&&(this.interval=setInterval(a,this.time));var s=this;function a(){s.count++,o.call(s)}return this},e.prototype.stop=function(){return this.interval&&(clearInterval(this.interval),delete this.interval),this};var r=/^\s*(\d+(?:\.\d+)?)\s*([a-z]+)\s*$/;function n(o){var s=o.match(r);return s&&i[s[2]]?s.slice(1):null}return Il}var Bg;function ZT(){return Bg||(Bg=1,function(i){(function(){var t,e,r,n,o,s,a,l,c=function(u,h){return function(){return u.apply(h,arguments)}},d=function(u,h){for(var f in h)g.call(h,f)&&(u[f]=h[f]);function v(){this.constructor=u}return v.prototype=h.prototype,u.prototype=new v,u.__super__=h.prototype,u},g={}.hasOwnProperty;a=DT(),r=BT(),t=LT(),s=Vv(),l=RT().setImmediate,e=hc().defaults,n=function(u){return typeof u=="object"&&u!=null&&Object.keys(u).length===0},o=function(u,h,f){var v,m,y;for(v=0,m=u.length;v<m;v++)y=u[v],h=y(h,f);return h},i.Parser=function(u){d(h,u);function h(f){this.parseStringPromise=c(this.parseStringPromise,this),this.parseString=c(this.parseString,this),this.reset=c(this.reset,this),this.assignOrPush=c(this.assignOrPush,this),this.processAsync=c(this.processAsync,this);var v,m,y;if(!(this instanceof i.Parser))return new i.Parser(f);this.options={},m=e["0.2"];for(v in m)g.call(m,v)&&(y=m[v],this.options[v]=y);for(v in f)g.call(f,v)&&(y=f[v],this.options[v]=y);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(s.normalize)),this.reset()}return h.prototype.processAsync=function(){var f,v;try{return this.remaining.length<=this.options.chunkSize?(f=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(f),this.saxParser.close()):(f=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(f),l(this.processAsync))}catch(m){if(v=m,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(v)}},h.prototype.assignOrPush=function(f,v,m){return v in f?(f[v]instanceof Array||(f[v]=[f[v]]),f[v].push(m)):this.options.explicitArray?f[v]=[m]:f[v]=m},h.prototype.reset=function(){var f,v,m,y;return this.removeAllListeners(),this.saxParser=a.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(I){return function(p){if(I.saxParser.resume(),!I.saxParser.errThrown)return I.saxParser.errThrown=!0,I.emit("error",p)}}(this),this.saxParser.onend=function(I){return function(){if(!I.saxParser.ended)return I.saxParser.ended=!0,I.emit("end",I.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,y=[],f=this.options.attrkey,v=this.options.charkey,this.saxParser.onopentag=function(I){return function(p){var _,A,b,P,E;if(b={},b[v]="",!I.options.ignoreAttrs){E=p.attributes;for(_ in E)g.call(E,_)&&(!(f in b)&&!I.options.mergeAttrs&&(b[f]={}),A=I.options.attrValueProcessors?o(I.options.attrValueProcessors,p.attributes[_],_):p.attributes[_],P=I.options.attrNameProcessors?o(I.options.attrNameProcessors,_):_,I.options.mergeAttrs?I.assignOrPush(b,P,A):b[f][P]=A)}return b["#name"]=I.options.tagNameProcessors?o(I.options.tagNameProcessors,p.name):p.name,I.options.xmlns&&(b[I.options.xmlnskey]={uri:p.uri,local:p.local}),y.push(b)}}(this),this.saxParser.onclosetag=function(I){return function(){var p,_,A,b,P,E,C,T,F,Z;if(E=y.pop(),P=E["#name"],(!I.options.explicitChildren||!I.options.preserveChildrenOrder)&&delete E["#name"],E.cdata===!0&&(p=E.cdata,delete E.cdata),F=y[y.length-1],E[v].match(/^\s*$/)&&!p?(_=E[v],delete E[v]):(I.options.trim&&(E[v]=E[v].trim()),I.options.normalize&&(E[v]=E[v].replace(/\s{2,}/g," ").trim()),E[v]=I.options.valueProcessors?o(I.options.valueProcessors,E[v],P):E[v],Object.keys(E).length===1&&v in E&&!I.EXPLICIT_CHARKEY&&(E=E[v])),n(E)&&(E=I.options.emptyTag!==""?I.options.emptyTag:_),I.options.validator!=null&&(Z="/"+function(){var O,H,X;for(X=[],O=0,H=y.length;O<H;O++)b=y[O],X.push(b["#name"]);return X}().concat(P).join("/"),function(){var O;try{return E=I.options.validator(Z,F&&F[P],E)}catch(H){return O=H,I.emit("error",O)}}()),I.options.explicitChildren&&!I.options.mergeAttrs&&typeof E=="object"){if(!I.options.preserveChildrenOrder)b={},I.options.attrkey in E&&(b[I.options.attrkey]=E[I.options.attrkey],delete E[I.options.attrkey]),!I.options.charsAsChildren&&I.options.charkey in E&&(b[I.options.charkey]=E[I.options.charkey],delete E[I.options.charkey]),Object.getOwnPropertyNames(E).length>0&&(b[I.options.childkey]=E),E=b;else if(F){F[I.options.childkey]=F[I.options.childkey]||[],C={};for(A in E)g.call(E,A)&&(C[A]=E[A]);F[I.options.childkey].push(C),delete E["#name"],Object.keys(E).length===1&&v in E&&!I.EXPLICIT_CHARKEY&&(E=E[v])}}return y.length>0?I.assignOrPush(F,P,E):(I.options.explicitRoot&&(T=E,E={},E[P]=T),I.resultObject=E,I.saxParser.ended=!0,I.emit("end",I.resultObject))}}(this),m=function(I){return function(p){var _,A;if(A=y[y.length-1],A)return A[v]+=p,I.options.explicitChildren&&I.options.preserveChildrenOrder&&I.options.charsAsChildren&&(I.options.includeWhiteChars||p.replace(/\\n/g,"").trim()!=="")&&(A[I.options.childkey]=A[I.options.childkey]||[],_={"#name":"__text__"},_[v]=p,I.options.normalize&&(_[v]=_[v].replace(/\s{2,}/g," ").trim()),A[I.options.childkey].push(_)),A}}(this),this.saxParser.ontext=m,this.saxParser.oncdata=function(I){return function(p){var _;if(_=m(p),_)return _.cdata=!0}}()},h.prototype.parseString=function(f,v){var m;v!=null&&typeof v=="function"&&(this.on("end",function(y){return this.reset(),v(null,y)}),this.on("error",function(y){return this.reset(),v(y)}));try{return f=f.toString(),f.trim()===""?(this.emit("end",null),!0):(f=t.stripBOM(f),this.options.async?(this.remaining=f,l(this.processAsync),this.saxParser):this.saxParser.write(f).close())}catch(y){if(m=y,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw m}else return this.emit("error",m),this.saxParser.errThrown=!0}},h.prototype.parseStringPromise=function(f){return new Promise(function(v){return function(m,y){return v.parseString(f,function(I,p){return I?y(I):m(p)})}}(this))},h}(r),i.parseString=function(u,h,f){var v,m,y;return f!=null?(typeof f=="function"&&(v=f),typeof h=="object"&&(m=h)):(typeof h=="function"&&(v=h),m={}),y=new i.Parser(m),y.parseString(u,v)},i.parseStringPromise=function(u,h){var f,v;return typeof h=="object"&&(f=h),v=new i.Parser(f),v.parseStringPromise(u)}}).call(W)}(ll)),ll}(function(){var i,t,e,r,n=function(s,a){for(var l in a)o.call(a,l)&&(s[l]=a[l]);function c(){this.constructor=s}return c.prototype=a.prototype,s.prototype=new c,s.__super__=a.prototype,s},o={}.hasOwnProperty;t=hc(),i=wT(),e=ZT(),r=Vv(),er.defaults=t.defaults,er.processors=r,er.ValidationError=function(s){n(a,s);function a(l){this.message=l}return a}(Error),er.Builder=i.Builder,er.Parser=e.Parser,er.parseString=e.parseString,er.parseStringPromise=e.parseStringPromise}).call(W);var Jv={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.furnitureDataTransformers=i.formatFurnitureData=i.transformFirst=void 0;function t(s,a){return l=>{const c=l[0];return c===""?a:s(c)}}i.transformFirst=t;function e(s){return s==="1"}function r(s){return Number(s)}function n(s){return s}function o(s){const a=Object.keys(s),l={};return a.forEach(c=>{const d=c,g=i.furnitureDataTransformers[d];if(g!=null){const u=s[c];l[d]=g(u)}}),l}i.formatFurnitureData=o,i.furnitureDataTransformers={adurl:t(n,void 0),bc:t(e,!1),buyout:t(e,!1),canlayon:t(e,!1),cansiton:t(e,!1),canstandon:t(e,!1),defaultdir:t(r,0),description:t(n,void 0),environment:t(n,void 0),excludeddynamic:t(e,!1),furniline:t(n,void 0),name:t(n,void 0),offerid:t(r,void 0),rare:t(e,!1),rentbuyout:t(e,!1),rentofferid:t(r,void 0),revision:t(r,void 0),specialtype:t(r,void 0),xdim:t(r,void 0),ydim:t(r,void 0)}})(Jv);Object.defineProperty(Yn,"__esModule",{value:!0});Yn.FurnitureData=void 0;const OT=er,GT=Jv;class xc{constructor(t){this._getFurniData=t,this._data=this._prepareData()}static create(t=""){return new xc(async()=>fetch(`${t}/furnidata.xml`).then(e=>e.text()))}async getRevisionForType(t){const e=await this.getInfo(t);return e?.revision}async getInfo(t){return(await this._data).typeToInfo[t]}async getTypeById(t,e){const r=await this._data,n=e!="floor"?r.floorIdToType[t]:r.wallIdToType[t];if(n!=null)return n}async getInfoForFurniture(t){if(t.id!=null){const e=await this.getTypeById(t.id,t.placementType);if(e!=null)return this.getInfo(e)}if(t.type!=null)return this.getInfo(t.type)}async getInfos(){const t=await this._data;return Object.entries(t.typeToInfo).map(([e,r])=>[e,r])}async _prepareData(){const t=await this._getFurniData(),e=await OT.parseStringPromise(t),r={},n={},o={},s=(a,l)=>{a.forEach(c=>{const d=c.$.classname,g=c.$.id;if(r[d]=GT.formatFurnitureData(c),l==="floor"){if(n[g]!=null)throw new Error(`Floor furniture with id ${g} already exists`);n[g]=d}else if(l==="wall"){if(o[g]!=null)throw new Error(`Wall furniture with id ${g} already exists`);o[g]=d}})};return s(e.furnidata.roomitemtypes[0].furnitype,"wall"),s(e.furnidata.wallitemtypes[0].furnitype,"floor"),{typeToInfo:r,floorIdToType:n,wallIdToType:o}}}Yn.FurnitureData=xc;var Vs={},Un={};Object.defineProperty(Un,"__esModule",{value:!0});Un.AnimationTicker=void 0;const Lg=24,Rg=60;class Pc{constructor(t){this._frame=0,this._idCounter=0,this._subscriptions=new Map,t.ticker.maxFPS=Rg,t.ticker.minFPS=Lg,t.ticker.add(()=>this._increment())}static create(t){return new Pc(t)}subscribe(t){const e=this._idCounter++;return this._subscriptions.set(e,t),()=>this._subscriptions.delete(e)}current(){return this._getNormalizedFrame(this._frame).rounded}_getNormalizedFrame(t){const e=Lg/Rg,r=t*e;return{rounded:Math.floor(r),pure:r}}_increment(){this._frame+=1;const t=this._getNormalizedFrame(this._frame);this._subscriptions.forEach(e=>e(t.rounded,t.pure))}}Un.AnimationTicker=Pc;var zn={},Qv={},Js={},Ai={},Qs={},tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.notNullOrUndefined=void 0;function NT(i){return i!=null}tr.notNullOrUndefined=NT;var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.getAvatarDirection=void 0;function jT(i){return i<-8||i>15?0:i<0?i+8:i>7?i-8:i}Yr.getAvatarDirection=jT;var $s={};Object.defineProperty($s,"__esModule",{value:!0});$s.getDrawOrderForActions=void 0;function WT(i,t){const e=new Set;return i.forEach(r=>{r.activepartset!=null&&e.add(r.activepartset)}),t.hasItem&&e.add("itemRight"),e.has("handLeft")?"lh-up":e.has("handRightAndHead")||e.has("handRight")?"rh-up":"std"}$s.getDrawOrderForActions=WT;var Ks={},qs={};Object.defineProperty(qs,"__esModule",{value:!0});qs.associateBy=void 0;function XT(i,t){const e=new Map;return i.forEach(r=>{const n=t(r);e.set(n,r)}),e}qs.associateBy=XT;var ta={},dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.applyOffsets=dr.getAssetFromPartMeta=void 0;function kT(i,t,e,{offsetX:r,offsetY:n}){const o=e.getOffsets(t.asset);if(o==null)return;const{x:s,y:a}=$v({offsets:o,customOffsets:{offsetX:r,offsetY:n},flipped:t.flipped,lay:i==="lay"});if(isNaN(s))throw new Error("Invalid x offset");if(isNaN(a))throw new Error("Invalid y offset");return{fileId:t.asset,library:"",mirror:t.flipped,x:s,y:a}}dr.getAssetFromPartMeta=kT;function $v({offsets:i,customOffsets:{offsetX:t,offsetY:e},flipped:r,lay:n}){let o=0,s=0;return s=-i.offsetY+e,r?o=64+i.offsetX-t:o=-i.offsetX-t,n&&(r?o-=52:o+=52),s=s+16,{x:o,y:s}}dr.applyOffsets=$v;var Vi={},Sc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.getPartFlippedMetaData=i.getBasicFlippedMetaData=i.getFlippedMetaData=i.DIRECTION_IS_FLIPPED=void 0;const t=Bn;i.DIRECTION_IS_FLIPPED=[!1,!1,!1,!1,!0,!0,!0,!1];function e({assetPartDefinition:o,direction:s,partType:a,flippedPartType:l}){if(!i.DIRECTION_IS_FLIPPED[s])return{direction:s,flip:!1,partType:a,swapped:!1};if(o==="wav"&&(a==t.AvatarFigurePartType.LeftHand||a==t.AvatarFigurePartType.LeftSleeve||a==t.AvatarFigurePartType.LeftCoatSleeve))return{direction:s,flip:!0,partType:a,swapped:!1};if(o=="drk"&&(a==t.AvatarFigurePartType.RightHand||a==t.AvatarFigurePartType.RightSleeve||a==t.AvatarFigurePartType.RightCoatSleeve))return{direction:s,flip:!0,partType:a,swapped:!1};if(o=="blw"&&a==t.AvatarFigurePartType.RightHand)return{direction:s,flip:!0,partType:a,swapped:!1};if(o=="sig"&&a==t.AvatarFigurePartType.LeftHand)return{direction:s,flip:!0,partType:a,swapped:!1};if(o=="respect"&&a==t.AvatarFigurePartType.LeftHand)return{direction:s,flip:!0,partType:a,swapped:!1};if(a==t.AvatarFigurePartType.RightHandItem)return{direction:s,flip:!0,partType:a,swapped:!1};if(a==t.AvatarFigurePartType.LeftHandItem)return{direction:s,flip:!0,partType:a,swapped:!1};if(a==t.AvatarFigurePartType.ChestPrint)return{direction:s,flip:!0,partType:a,swapped:!1};const d=r(s);return l!=a?{direction:d.direction,flip:!1,partType:l??a,swapped:!0}:{direction:d.direction,flip:!1,partType:a}}i.getFlippedMetaData=e;function r(o){let s=o,a=!1;return o===4&&(s=2,a=!0),o===5&&(s=1,a=!0),o===6&&(s=0,a=!0),{direction:s,flip:a}}i.getBasicFlippedMetaData=r;function n(o,{partType:s,flippedPartType:a}){const l=r(o);return a!=s?{direction:l.direction,flip:!1,partType:a??s,swapped:!0}:{direction:l.direction,flip:!1,partType:s}}i.getPartFlippedMetaData=n})(Sc);var br={},Zg;function Kv(){if(Zg)return br;Zg=1,Object.defineProperty(br,"__esModule",{value:!0}),br.getSpriteId=br.AvatarEffectPart=void 0;const i=Ri,t=dr,e=Yr,r=qv();let n=class{constructor(a,l,c,d){this._sprite=a,this._actionsData=l,this._offsetsData=c,this._effectData=d,this._directionOffset=0,this._offsets=new Map,this._customFrames=[]}setDirection(a){this._direction=a}setDirectionOffset(a){this._directionOffset=a}getDirection(a=0){if(this._direction!=null)return this._sprite.directions?e.getAvatarDirection(this._direction+this._directionOffset+a):0}setEffectFrame(a,l){const c=a.getFrameEffectPart(this._sprite.id,l);if(c!=null){let d=c.action!=null?this._actionsData.getAction(c.action):void 0;d==null&&(d=this._actionsData.getAction(i.AvatarAction.Default)),this._customFrames.push({action:d,frame:c.frame,dd:c.dd,dx:c.dx,dy:c.dy})}}setAvatarOffsets(a,l){this._offsets.set(l,a)}setEffectFrameDefaultIfNotSet(){if(this._customFrames.length>0)return;const a=this._actionsData.getAction(i.AvatarAction.Default);this._customFrames.push({action:a})}getDrawDefinition(){var a;const l=[],c=this._direction!=null?this._effectData.getSpriteDirection(this._sprite.id,this._direction):void 0;if(this._customFrames.forEach(d=>{var g;if(d.action==null)throw new Error("Invalid action");const h=this.getDirection(d.dd);if(h==null)return;const f=this._getAvatarAsset(h,(g=d.frame)!==null&&g!==void 0?g:0,d,c);f!=null&&l.push(f)}),l.length!==0)return{assets:l.flatMap(d=>[d,d]),addition:!1,kind:"EFFECT_DRAW_PART",z:(a=c?.dz)!==null&&a!==void 0?a:0,ink:this._sprite.ink}}_getAvatarAsset(a,l,c,d){var g,u,h,f;if(this._sprite.member!=null){const{id:v,offsets:m,flip:y}=r.getEffectSprite(this._sprite.member,a,l,this._offsetsData,this._sprite.directions,!1);if(m==null)return;const{x:I,y:p}=t.applyOffsets({offsets:m,customOffsets:{offsetX:(g=c.dx)!==null&&g!==void 0?g:0-((u=d?.dx)!==null&&u!==void 0?u:0),offsetY:(h=c.dy)!==null&&h!==void 0?h:0+((f=d?.dy)!==null&&f!==void 0?f:0)},lay:!1,flipped:y});return{fileId:v,library:"",mirror:y,x:I,y:p}}}};br.AvatarEffectPart=n;const o=(s,a,l)=>`h_${s}_${a}_${l}`;return br.getSpriteId=o,br}var Og;function qv(){if(Og)return Vi;Og=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.getEffectSprite=void 0;const i=Sc,t=Kv();function e(r,n,o,s,a,l){let c=t.getSpriteId(r,n,o),d=s.getOffsets(c),g=!1;if(l&&d==null){const u=i.getBasicFlippedMetaData(n);c=t.getSpriteId(r,u.direction,o),d=s.getOffsets(c),g=u.flip}return a||(c=t.getSpriteId(r,0,o),d==null&&(d=s.getOffsets(c))),{id:c,offsets:d,flip:g}}return Vi.getEffectSprite=e,Vi}Object.defineProperty(ta,"__esModule",{value:!0});ta.AvatarAdditionPart=void 0;const HT=dr,YT=Yr,UT=qv();class zT{constructor(t,e,r,n){this._addition=t,this._actionsData=e,this._offsetsData=r,this._partSetsData=n,this._directionOffset=0,this._customFrames=[],this._offsets=new Map}getDirection(t=0){if(this._direction!=null)return YT.getAvatarDirection(this._direction+this._directionOffset+t)}getDrawDefinition(){const t=[];if(this._customFrames.forEach((e,r)=>{if(e.action==null)throw new Error("Invalid action");const o=this.getDirection(e.dd);if(o==null)return;const s=this._getAsset(o,e.frame,r,e);s!=null&&t.push(s)}),t.length!==0)return{kind:"EFFECT_DRAW_PART",addition:!1,assets:t.flatMap(e=>[e,e]),z:0}}setEffectFrame(t,e){const r=this._addition.base!=null?t.getFrameBodyPartByBase(this._addition.base,e):void 0,n=t.getFrameEffectPart(this._addition.id,e);r!=null?this._handleBodyPart(t,e,r):n!=null&&this._handleFxPart(t,e,n)}setDirection(t){this._direction=t}setDirectionOffset(t){this._directionOffset=t}setAvatarOffsets(t,e){this._offsets.set(e,t)}_getAsset(t,e,r,n){var o,s,a,l,c;const d=this._addition.id;this._partSetsData.getPartInfo(d);const g=(o=n.base)!==null&&o!==void 0?o:this._addition.base,u=g!=null?`${n.action.assetpartdefinition}_${this._addition.id}_${g}`:`${n.action.assetpartdefinition}_${this._addition.id}_1`;if(u!=null){const{id:h,offsets:f,flip:v}=UT.getEffectSprite(u,t,e,this._offsetsData,!0,this._mode==="fx");if(f==null)return;const m=this._offsets.get(r),{x:y,y:I}=HT.applyOffsets({offsets:{offsetX:f.offsetX,offsetY:f.offsetY},customOffsets:{offsetX:((s=n.dx)!==null&&s!==void 0?s:0)+((a=m?.dx)!==null&&a!==void 0?a:0),offsetY:((l=n.dy)!==null&&l!==void 0?l:0)+((c=m?.dy)!==null&&c!==void 0?c:0)},lay:!1,flipped:v});return{fileId:h,library:"",mirror:v,x:y,y:I}}}_setMode(t){if(this._mode!=null&&this._mode!==t)throw new Error("Can't change mode once it is set.");this._mode=t}_handleBodyPart(t,e,r){var n;this._setMode("bodypart");const o=this._actionsData.getAction(r.action);if(o==null)throw new Error("Invalid action "+r.action);this._customFrames.push({action:o,frame:(n=r.frame)!==null&&n!==void 0?n:0,dd:r.dd,dx:r.dx,dy:r.dy})}_handleFxPart(t,e,r){var n;this._setMode("fx");const o=this._actionsData.getAction(r.action);if(o==null)throw new Error("Invalid action "+r.action);this._customFrames.push({action:o,frame:(n=r.frame)!==null&&n!==void 0?n:0,dd:r.dd,dx:r.dx,dy:r.dy})}}ta.AvatarAdditionPart=zT;var ea={};Object.defineProperty(ea,"__esModule",{value:!0});ea.AvatarBodyPart=void 0;const VT=tr;class JT{constructor(t,e,r,n,o){this._bodyPart=t,this._parts=e,this._partSets=r,this._actions=n,this._geometry=o,this._additions=[]}get z(){return this._bodyPart.z}get id(){return this._bodyPart.id}get parts(){return this._parts}addAddition(t){this._additions.push(t)}getSortedParts(t){return[...this._parts.map(r=>{const n=this._geometry.getBodyPartItem(t,this._bodyPart.id,r.type);if(n!=null)return{part:r,item:n}}).filter(VT.notNullOrUndefined).sort((r,n)=>r.item.radius-n.item.radius).map(r=>r.part),...this._additions]}setActiveAction(t){if(t.activepartset==null)return;const e=this._partSets.getActivePartSet(t.activepartset);this._parts.forEach(r=>{e.has(r.type)&&r.setActiveAction(t)})}setDirection(t){this._parts.forEach(e=>{e.setDirection(t)})}setDirectionOffset(t){this._parts.forEach(e=>{e.setDirectionOffset(t)})}setFrameRepeat(t){this._parts.forEach(e=>{e.setFrameRepeat(t)})}setEffectFrame(t,e){const r=t.getFrameBodyPart(this.id,e);if(r==null)return;const n=this._actions.getAction(r.action);this._parts.forEach(o=>{var s;n!=null&&o.addCustomFrame({action:n,frame:(s=r.frame)!==null&&s!==void 0?s:0,dd:r.dd,dx:r.dx,dy:r.dy})})}setAvatarOffsets(t,e){this._parts.forEach(r=>{r.setAvatarOffsets(t,e)}),this._additions.forEach(r=>{r.setAvatarOffsets(t,e)})}}ea.AvatarBodyPart=JT;Object.defineProperty(Ks,"__esModule",{value:!0});Ks.AvatarBodyPartList=void 0;const QT=qs,$T=tr,KT=ta,qT=ea;class Tc{constructor(t,{actionsData:e,offsetsData:r,partSetsData:n}){this._bodyParts=t,this._bodyPartsById=new Map,this._additions=new Map,this._additionsArr=[],this._bodyPartsById=QT.associateBy(this._bodyParts,o=>o.id),this._actionsData=e,this._offsetsData=r,this._partSetsData=n}static create(t,e,{geometry:r,partSetsData:n,actionsData:o,offsetsData:s}){const a=[...r.getBodyParts("full")];e&&a.push("rightitem");const l=a.map(c=>r.getBodyPart("vertical",c)).filter($T.notNullOrUndefined).map(c=>new qT.AvatarBodyPart(c,t.getPartsForBodyBart(c),n,o,r)).sort((c,d)=>c.z-d.z);return new Tc(l,{actionsData:o,offsetsData:s,partSetsData:n})}applyActions(t){t.forEach(e=>{this._bodyParts.forEach(r=>{r.setActiveAction(e)})})}applyEffectAdditions(t){t.getAddtions().forEach(e=>{var r;const n=e.align!=null?this._getBodyPartById(e.align):void 0;if(n!=null){const o=(r=this._additions.get(n))!==null&&r!==void 0?r:[],s=new KT.AvatarAdditionPart(e,this._actionsData,this._offsetsData,this._partSetsData);this._additions.set(n,[...o,s]),this._additionsArr.push(s),n.addAddition(s)}})}setEffectFrame(t,e){this._bodyParts.forEach(r=>{r.setEffectFrame(t,e),r.setFrameRepeat(2)}),this._additionsArr.forEach(r=>{r.setEffectFrame(t,e)})}setAvatarOffsets(t,e){this._bodyParts.forEach(r=>r.setAvatarOffsets(t,e))}setAdditionsDirection(t){this._additionsArr.forEach(e=>e.setDirection(t))}setDirectionOffset(t){this._additionsArr.forEach(e=>e.setDirectionOffset(t)),this._bodyParts.forEach(e=>e.setDirectionOffset(t))}setBodyPartDirection(t,e){this._bodyParts.forEach(r=>{r.id==="head"?r.setDirection(e??t):r.setDirection(t)})}getBodyPartById(t){return this._getBodyPartById(t)}_getBodyPartById(t){return this._bodyPartsById.get(t)}}Ks.AvatarBodyPartList=Tc;var ty={},ra={},ia={};Object.defineProperty(ia,"__esModule",{value:!0});ia.getAssetForFrame=void 0;const Gg=Sc,t1=dr;function e1({animationFrame:i,actionData:t,partTypeFlipped:e,direction:r,partType:n,partId:o,offsetsData:s,offsetX:a=0,offsetY:l=0}){const c=Gg.DIRECTION_IS_FLIPPED[r];let d=t.assetpartdefinition,g=0;i!=null&&(g=i.number,i.assetpartdefinition&&i.assetpartdefinition!==""&&(d=i.assetpartdefinition));const u=Gg.getFlippedMetaData({assetPartDefinition:d,flippedPartType:e,direction:r,partType:n});let h=Ng(d,u.partType,o,u.direction,g),f=s.getOffsets(h);if(f==null&&(h=Ng("std",u.partType,o,u.direction,0),f=s.getOffsets(h)),f!=null){let v=u.flip;c&&(v=!v);const m=t1.getAssetFromPartMeta(d,{flipped:v,swapped:!1,asset:h},s,{offsetX:a,offsetY:l});if(m!=null)return m}}ia.getAssetForFrame=e1;function Ng(i,t,e,r,n){return`h_${i}_${t}_${e}_${r}_${n}`}Object.defineProperty(ra,"__esModule",{value:!0});ra.AvatarPart=void 0;const jg=Yr,vl=ia;class r1{constructor(t,e,{animationData:r,figureData:n,figureMap:o,offsetsData:s,partSetsData:a}){this._figureDataPart=t,this._color=e,this._directionOffset=0,this._assets=[],this._customFrames=[],this._frameRepeat=1,this._offsets=new Map,this._animationData=r,this._figureData=n,this._figureMap=o,this._offsetsData=s,this._partSetsData=a}get type(){return this._figureDataPart.type}get index(){return this._figureDataPart.index}setFrameRepeat(t){this._frameRepeat=t}setActiveAction(t){this._action=t}setDirection(t){this._direction=jg.getAvatarDirection(t)}addCustomFrame(t){this._customFrames.push(t)}setDirectionOffset(t){this._directionOffset=t}setAvatarOffsets(t,e){this._offsets.set(e,t)}getDirection(t=0){if(this._direction!=null)return jg.getAvatarDirection(this._direction+this._directionOffset+t)}getDrawDefinition(){if(this._update(),this._assets.length!==0)return{assets:this._assets.flatMap(t=>new Array(this._frameRepeat).fill(0).map(()=>t)),color:this._figureDataPart.colorable?`#${this._color}`:void 0,index:this._figureDataPart.index,kind:"AVATAR_DRAW_PART",mode:this._figureDataPart.type!=="ey"&&this._figureDataPart.colorable?"colored":"just-image",type:this._figureDataPart.type,z:0}}_getOffsetForFrame(t){var e,r;const n=this._offsets.get(t);return n==null?{x:0,y:0}:{x:(e=n.dx)!==null&&e!==void 0?e:0,y:(r=n.dy)!==null&&r!==void 0?r:0}}_update(){const t=this._partSetsData.getPartInfo(this.type);if(this._assets=[],this._customFrames.length>0){this._customFrames.forEach((s,a)=>{var l,c;const d=s.action,g=this.getDirection(s.dd);if(g==null)throw new Error("Invalid direction");const u=this._animationData.getAnimationFrame(d.id,this.type,s.frame),h=this._getOffsetForFrame(a),f=vl.getAssetForFrame({animationFrame:u,actionData:d,direction:g,offsetsData:this._offsetsData,partId:this._figureDataPart.id,partType:this._figureDataPart.type,partTypeFlipped:t?.flippedSetType,offsetX:((l=s.dx)!==null&&l!==void 0?l:0)+h.x,offsetY:((c=s.dy)!==null&&c!==void 0?c:0)+h.y});f!=null&&this._assets.push(f)});return}const e=this._action,r=this.getDirection();if(e==null||r==null)return;let o=this._animationData.getAnimationFrames(e.id,this.type).flatMap(s=>new Array(s.repeats).fill(s));if(o.length===0&&(o=[void 0]),this._offsets.size>0)this._offsets.forEach(s=>{var a;const l=this._animationData.getAnimationFrame(e.id,this.type,(a=s.frame)!==null&&a!==void 0?a:0),c=vl.getAssetForFrame({animationFrame:l,actionData:e,direction:r,offsetsData:this._offsetsData,partId:this._figureDataPart.id,partType:this._figureDataPart.type,partTypeFlipped:t?.flippedSetType,offsetX:s.dx,offsetY:s.dy});c!=null&&this._assets.push(c)});else for(let s=0;s<o.length;s++){const a=o[s],l=vl.getAssetForFrame({animationFrame:a,actionData:e,direction:r,offsetsData:this._offsetsData,partId:this._figureDataPart.id,partType:this._figureDataPart.type,partTypeFlipped:t?.flippedSetType});l!=null&&this._assets.push(l)}}}ra.AvatarPart=r1;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.AvatarPartList=i.basePartSet=void 0;const t=Bn,e=ra;i.basePartSet=new Set([t.AvatarFigurePartType.LeftHand,t.AvatarFigurePartType.RightHand,t.AvatarFigurePartType.Body,t.AvatarFigurePartType.Head]);class r{constructor(o,s,a){this._deps=a,this._parts=[],this._hiddenLayers=new Set,this._partsByType=new Map;const{figureData:l}=a;o.forEach(({setId:c,colorId:d},g)=>{const u=l.getParts(g,c.toString()),h=l.getColor(g,d.toString());l.getHiddenLayers(g,c.toString()).forEach(v=>this._hiddenLayers.add(v)),u!=null&&u.length>0&&u.forEach(v=>{const m=new e.AvatarPart(v,h,a);this._registerPart(m)})}),s!=null&&this._addItem(s),i.basePartSet.forEach(c=>{const d=this._partsByType.get(c);(d==null||d.length===0)&&this._registerPart(new e.AvatarPart({id:"1",type:c,colorable:!1,index:0},void 0,a))})}getPartsForBodyBart(o){return o.items.flatMap(s=>{var a;return(a=this._partsByType.get(s.id))!==null&&a!==void 0?a:[]}).filter(s=>!this._hiddenLayers.has(s.type))}getPartsForType(o){const s=this._partsByType.get(o);return s==null?[]:[...s].sort((l,c)=>l.index-c.index)}get parts(){return this._parts}_addItem(o){this._registerPart(new e.AvatarPart({type:"ri",colorable:!1,id:o.toString(),index:0},void 0,this._deps))}_registerPart(o){var s;const a=o.type;this._parts.push(o);const l=(s=this._partsByType.get(a))!==null&&s!==void 0?s:[];this._partsByType.set(a,[...l,o])}}i.AvatarPartList=r})(ty);var na={};Object.defineProperty(na,"__esModule",{value:!0});na.BodyPartDrawOrder=void 0;class i1{static getDrawOrder(t,e){switch(e){case"std":return Ec[t];case"rh-up":return n1[t];case"lh-up":return o1[t]}throw new Error(`Invalid draw order type ${e}`)}}na.BodyPartDrawOrder=i1;const Ec={0:["behind","bottom","leftitem","leftarm","torso","rightitem","rightarm","head","top"],1:["behind","bottom","leftitem","leftarm","torso","rightitem","rightarm","head","top"],2:["behind","bottom","leftitem","leftarm","torso","rightitem","rightarm","head","top"],3:["behind","bottom","torso","leftitem","leftarm","rightitem","rightarm","head","top"],4:["behind","bottom","rightarm","rightitem","torso","leftitem","leftarm","head","top"],5:["behind","bottom","rightarm","rightitem","torso","leftitem","leftarm","head","top"],6:["bottom","rightarm","rightitem","torso","leftitem","leftarm","head","behind","top"],7:["bottom","rightarm","rightitem","leftitem","leftarm","torso","head","behind","top"]},n1={...Ec,2:["behind","bottom","leftitem","leftarm","torso","head","rightitem","rightarm","top"],3:["behind","bottom","leftitem","leftarm","torso","head","rightitem","rightarm","top"],4:["behind","bottom","rightarm","torso","leftitem","leftarm","head","rightitem","top"]},o1={...Ec,5:["behind","bottom","rightarm","rightitem","torso","head","leftitem","leftarm","top"],6:["behind","bottom","rightarm","rightitem","torso","head","leftitem","leftarm","top"]};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.AvatarDrawDefinition=void 0;const yl=tr,s1=Ri,a1=Yr,u1=$s,l1=Ks,h1=Kv(),c1=ty,f1=na;class d1{constructor(t,{figureData:e,actionsData:r,geometry:n,partSetsData:o,animationData:s,offsetsData:a,figureMap:l}){var c,d;this._options=t,this._directionOffset=0,this._drawParts=void 0,this._direction=t.direction,this._figureData=e,this._actionsData=r,this._geometry=n,this._partSetsData=o,this._animationData=s,this._offsetsData=a,this._figureMap=l;const g=t.effect,u=this._getPartsForLook(t.look),h=l1.AvatarBodyPartList.create(u,this._options.item!=null,{actionsData:r,geometry:n,partSetsData:o,offsetsData:a}),f=this._getActiveActions();this._bodyParts=h,h.applyActions(f),h.setBodyPartDirection(this._options.direction,this._options.headDirection);const v=new Map;if(this._effectParts=[],g!=null){h.applyEffectAdditions(g),g.getSprites().forEach(y=>{if(y.id==="avatar"){v.set(y.id,this);return}const I=new h1.AvatarEffectPart(y,this._actionsData,this._offsetsData,g);v.set(y.id,I),this._effectParts.push(I)});for(let y=0;y<g.getFrameCount();y++)h.setEffectFrame(g,y),v.forEach(I=>I.setEffectFrame(g,y));v.forEach(y=>{y.setEffectFrameDefaultIfNotSet(),y.setDirection(t.direction)}),h.setAdditionsDirection(t.direction)}const m=(d=(c=g?.getDirection())===null||c===void 0?void 0:c.offset)!==null&&d!==void 0?d:0;m!=null&&(v.forEach(y=>{y.setDirectionOffset(m)}),h.setDirectionOffset(m)),this._activeActions=f,this._partList=u}setDirection(t){this._direction=t}setDirectionOffset(t){this._directionOffset=t}setEffectFrame(t,e){const r=t.getFrameEffectPart("avatar",e);r!=null&&(this._bodyParts.setAvatarOffsets(r,e),this._effectParts.forEach(n=>{n.setAvatarOffsets(r,e)}))}setEffectFrameDefaultIfNotSet(){}getDrawDefinition(){if(this._drawParts!=null)return this._drawParts;const t=u1.getDrawOrderForActions(this._activeActions,{hasItem:this._options.item!=null}),e=a1.getAvatarDirection(this._direction+this._directionOffset),r=f1.BodyPartDrawOrder.getDrawOrder(e,t);if(r==null)return[];const o=r.map(l=>this._bodyParts.getBodyPartById(l)).filter(yl.notNullOrUndefined).flatMap(l=>l.getSortedParts("vertical")).map(l=>l.getDrawDefinition()).filter(yl.notNullOrUndefined),s=this._effectParts.map(l=>l.getDrawDefinition()).filter(yl.notNullOrUndefined),a=[...o,...s].sort((l,c)=>l.z-c.z);return this._drawParts=a,a}_getPartsForLook(t){return new c1.AvatarPartList(t,this._options.item,{figureData:this._figureData,animationData:this._animationData,figureMap:this._figureMap,offsetsData:this._offsetsData,partSetsData:this._partSetsData})}_getActiveActions(){const t=new Set(this._options.actions).add(s1.AvatarAction.Default);return this._actionsData.getActions().filter(e=>t.has(e.id)).sort((e,r)=>e.precedence<r.precedence?1:e.precedence>r.precedence?-1:0)}}Qs.AvatarDrawDefinition=d1;Object.defineProperty(Ai,"__esModule",{value:!0});Ai.getAvatarDrawDefinition=Ai.basePartSet=void 0;const g1=Ri,Fo=Bn,p1=Qs;Ai.basePartSet=new Set([Fo.AvatarFigurePartType.LeftHand,Fo.AvatarFigurePartType.RightHand,Fo.AvatarFigurePartType.Body,Fo.AvatarFigurePartType.Head]);function I1({parsedLook:i,actions:t,direction:e,headDirection:r,item:n,effect:o},s){const a=new Set(t).add(g1.AvatarAction.Default);return new p1.AvatarDrawDefinition({actions:a,direction:e,frame:0,look:i,item:n,headDirection:r,effect:o},s)}Ai.getAvatarDrawDefinition=I1;var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.parseLookString=void 0;function v1(i){return new Map(i.split(".").map(t=>{const e=t.split("-");return[e[0],{setId:Number(e[1]),colorId:Number(e[2])}]}))}Vn.parseLookString=v1;Object.defineProperty(Js,"__esModule",{value:!0});Js.createLookServer=void 0;const y1=Ai,m1=Vn;async function _1(i){return({look:t,actions:e,direction:r,headDirection:n,item:o},s)=>y1.getAvatarDrawDefinition({parsedLook:m1.parseLookString(t),actions:e,direction:r,headDirection:n,frame:0,item:o,effect:s},i)}Js.createLookServer=_1;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.createLookServer=void 0;var t=Js;Object.defineProperty(i,"createLookServer",{enumerable:!0,get:function(){return t.createLookServer}})})(Qv);var ey={exports:{}};(function(i,t){var e={};/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2013-2018 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */(function(r){i.exports=r()})(function(){return function r(n,o,s){function a(d,g){if(!o[d]){if(!n[d]){var u=typeof _dereq_=="function"&&_dereq_;if(!g&&u)return u(d,!0);if(l)return l(d,!0);var h=new Error("Cannot find module '"+d+"'");throw h.code="MODULE_NOT_FOUND",h}var f=o[d]={exports:{}};n[d][0].call(f.exports,function(v){var m=n[d][1][v];return a(m||v)},f,f.exports,r,n,o,s)}return o[d].exports}for(var l=typeof _dereq_=="function"&&_dereq_,c=0;c<s.length;c++)a(s[c]);return a}({1:[function(r,n,o){n.exports=function(s){var a=s._SomePromiseArray;function l(c){var d=new a(c),g=d.promise();return d.setHowMany(1),d.setUnwrap(),d.init(),g}s.any=function(c){return l(c)},s.prototype.any=function(){return l(this)}}},{}],2:[function(r,n,o){var s;try{throw new Error}catch(v){s=v}var a=r("./schedule"),l=r("./queue");function c(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new l(16),this._normalQueue=new l(16),this._haveDrainedQueues=!1;var v=this;this.drainQueues=function(){v._drainQueues()},this._schedule=a}c.prototype.setScheduler=function(v){var m=this._schedule;return this._schedule=v,this._customScheduler=!0,m},c.prototype.hasCustomScheduler=function(){return this._customScheduler},c.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},c.prototype.fatalError=function(v,m){m?(process.stderr.write("Fatal "+(v instanceof Error?v.stack:v)+`
`),process.exit(2)):this.throwLater(v)},c.prototype.throwLater=function(v,m){if(arguments.length===1&&(m=v,v=function(){throw m}),typeof setTimeout<"u")setTimeout(function(){v(m)},0);else try{this._schedule(function(){v(m)})}catch{throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)}};function d(v,m,y){this._lateQueue.push(v,m,y),this._queueTick()}function g(v,m,y){this._normalQueue.push(v,m,y),this._queueTick()}function u(v){this._normalQueue._pushOne(v),this._queueTick()}c.prototype.invokeLater=d,c.prototype.invoke=g,c.prototype.settlePromises=u;function h(v){for(;v.length()>0;)f(v)}function f(v){var m=v.shift();if(typeof m!="function")m._settlePromises();else{var y=v.shift(),I=v.shift();m.call(y,I)}}c.prototype._drainQueues=function(){h(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,h(this._lateQueue)},c.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},c.prototype._reset=function(){this._isTickUsed=!1},n.exports=c,n.exports.firstLineError=s},{"./queue":26,"./schedule":29}],3:[function(r,n,o){n.exports=function(s,a,l,c){var d=!1,g=function(v,m){this._reject(m)},u=function(v,m){m.promiseRejectionQueued=!0,m.bindingPromise._then(g,g,null,this,v)},h=function(v,m){this._bitField&50397184||this._resolveCallback(m.target)},f=function(v,m){m.promiseRejectionQueued||this._reject(v)};s.prototype.bind=function(v){d||(d=!0,s.prototype._propagateFrom=c.propagateFromFunction(),s.prototype._boundValue=c.boundValueFunction());var m=l(v),y=new s(a);y._propagateFrom(this,1);var I=this._target();if(y._setBoundTo(m),m instanceof s){var p={promiseRejectionQueued:!1,promise:y,target:I,bindingPromise:m};I._then(a,u,void 0,y,p),m._then(h,f,void 0,y,p),y._setOnCancel(m)}else y._resolveCallback(I);return y},s.prototype._setBoundTo=function(v){v!==void 0?(this._bitField=this._bitField|2097152,this._boundTo=v):this._bitField=this._bitField&-2097153},s.prototype._isBound=function(){return(this._bitField&2097152)===2097152},s.bind=function(v,m){return s.resolve(m).bind(v)}}},{}],4:[function(r,n,o){var s;typeof Promise<"u"&&(s=Promise);function a(){try{Promise===l&&(Promise=s)}catch{}return l}var l=r("./promise")();l.noConflict=a,n.exports=l},{"./promise":22}],5:[function(r,n,o){var s=Object.create;if(s){var a=s(null),l=s(null);a[" size"]=l[" size"]=0}n.exports=function(c){var d=r("./util"),g=d.canEvaluate;d.isIdentifier;var u;function h(y,I){var p;if(y!=null&&(p=y[I]),typeof p!="function"){var _="Object "+d.classString(y)+" has no method '"+d.toString(I)+"'";throw new c.TypeError(_)}return p}function f(y){var I=this.pop(),p=h(y,I);return p.apply(y,this)}c.prototype.call=function(y){var I=[].slice.call(arguments,1);return I.push(y),this._then(f,void 0,void 0,I,void 0)};function v(y){return y[this]}function m(y){var I=+this;return I<0&&(I=Math.max(0,I+y.length)),y[I]}c.prototype.get=function(y){var I=typeof y=="number",p;if(I)p=m;else if(g){var _=u(y);p=_!==null?_:v}else p=v;return this._then(p,void 0,void 0,y,void 0)}}},{"./util":36}],6:[function(r,n,o){n.exports=function(s,a,l,c){var d=r("./util"),g=d.tryCatch,u=d.errorObj,h=s._async;s.prototype.break=s.prototype.cancel=function(){if(!c.cancellation())return this._warn("cancellation is disabled");for(var f=this,v=f;f._isCancellable();){if(!f._cancelBy(v)){v._isFollowing()?v._followee().cancel():v._cancelBranched();break}var m=f._cancellationParent;if(m==null||!m._isCancellable()){f._isFollowing()?f._followee().cancel():f._cancelBranched();break}else f._isFollowing()&&f._followee().cancel(),f._setWillBeCancelled(),v=f,f=m}},s.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},s.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===void 0||this._branchesRemainingToCancel<=0},s.prototype._cancelBy=function(f){return f===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},s.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},s.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),h.invoke(this._cancelPromises,this,void 0))},s.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},s.prototype._unsetOnCancel=function(){this._onCancelField=void 0},s.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},s.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},s.prototype._doInvokeOnCancel=function(f,v){if(d.isArray(f))for(var m=0;m<f.length;++m)this._doInvokeOnCancel(f[m],v);else if(f!==void 0)if(typeof f=="function"){if(!v){var y=g(f).call(this._boundValue());y===u&&(this._attachExtraTrace(y.e),h.throwLater(y.e))}}else f._resultCancelled(this)},s.prototype._invokeOnCancel=function(){var f=this._onCancel();this._unsetOnCancel(),h.invoke(this._doInvokeOnCancel,this,f)},s.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},s.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(r,n,o){n.exports=function(s){var a=r("./util"),l=r("./es5").keys,c=a.tryCatch,d=a.errorObj;function g(u,h,f){return function(v){var m=f._boundValue();t:for(var y=0;y<u.length;++y){var I=u[y];if(I===Error||I!=null&&I.prototype instanceof Error){if(v instanceof I)return c(h).call(m,v)}else if(typeof I=="function"){var p=c(I).call(m,v);if(p===d)return p;if(p)return c(h).call(m,v)}else if(a.isObject(v)){for(var _=l(I),A=0;A<_.length;++A){var b=_[A];if(I[b]!=v[b])continue t}return c(h).call(m,v)}}return s}}return g}},{"./es5":13,"./util":36}],8:[function(r,n,o){n.exports=function(s){var a=!1,l=[];s.prototype._promiseCreated=function(){},s.prototype._pushContext=function(){},s.prototype._popContext=function(){return null},s._peekContext=s.prototype._peekContext=function(){};function c(){this._trace=new c.CapturedTrace(g())}c.prototype._pushContext=function(){this._trace!==void 0&&(this._trace._promiseCreated=null,l.push(this._trace))},c.prototype._popContext=function(){if(this._trace!==void 0){var u=l.pop(),h=u._promiseCreated;return u._promiseCreated=null,h}return null};function d(){if(a)return new c}function g(){var u=l.length-1;if(u>=0)return l[u]}return c.CapturedTrace=null,c.create=d,c.deactivateLongStackTraces=function(){},c.activateLongStackTraces=function(){var u=s.prototype._pushContext,h=s.prototype._popContext,f=s._peekContext,v=s.prototype._peekContext,m=s.prototype._promiseCreated;c.deactivateLongStackTraces=function(){s.prototype._pushContext=u,s.prototype._popContext=h,s._peekContext=f,s.prototype._peekContext=v,s.prototype._promiseCreated=m,a=!1},a=!0,s.prototype._pushContext=c.prototype._pushContext,s.prototype._popContext=c.prototype._popContext,s._peekContext=s.prototype._peekContext=g,s.prototype._promiseCreated=function(){var y=this._peekContext();y&&y._promiseCreated==null&&(y._promiseCreated=this)}},c}},{}],9:[function(r,n,o){n.exports=function(s,a,l,c){var d=s._async,g=r("./errors").Warning,u=r("./util"),h=r("./es5"),f=u.canAttachTrace,v,m,y=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,I=/\((?:timers\.js):\d+:\d+\)/,p=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,_=null,A=null,b=!1,P,E=u.env("BLUEBIRD_DEBUG")!=0,C=!!(u.env("BLUEBIRD_WARNINGS")!=0&&(E||u.env("BLUEBIRD_WARNINGS"))),T=!!(u.env("BLUEBIRD_LONG_STACK_TRACES")!=0&&(E||u.env("BLUEBIRD_LONG_STACK_TRACES"))),F=u.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(C||!!u.env("BLUEBIRD_W_FORGOTTEN_RETURN")),Z;(function(){var G=[];function Y(){for(var tt=0;tt<G.length;++tt)G[tt]._notifyUnhandledRejection();q()}function q(){G.length=0}Z=function(tt){G.push(tt),setTimeout(Y,1)},h.defineProperty(s,"_unhandledRejectionCheck",{value:Y}),h.defineProperty(s,"_unhandledRejectionClear",{value:q})})(),s.prototype.suppressUnhandledRejections=function(){var G=this._target();G._bitField=G._bitField&-1048577|524288},s.prototype._ensurePossibleRejectionHandled=function(){this._bitField&524288||(this._setRejectionIsUnhandled(),Z(this))},s.prototype._notifyUnhandledRejectionIsHandled=function(){Vr("rejectionHandled",v,void 0,this)},s.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456},s.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0},s.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var G=this._settledValue();this._setUnhandledRejectionIsNotified(),Vr("unhandledRejection",m,G,this)}},s.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144},s.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},s.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0},s.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576},s.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},s.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0},s.prototype._warn=function(G,Y,q){return gt(G,Y,q||this)},s.onPossiblyUnhandledRejection=function(G){var Y=s._getContext();m=u.contextBind(Y,G)},s.onUnhandledRejectionHandled=function(G){var Y=s._getContext();v=u.contextBind(Y,G)};var O=function(){};s.longStackTraces=function(){if(d.haveItemsQueued()&&!J.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);if(!J.longStackTraces&&Gi()){var G=s.prototype._captureStackTrace,Y=s.prototype._attachExtraTrace,q=s.prototype._dereferenceTrace;J.longStackTraces=!0,O=function(){if(d.haveItemsQueued()&&!J.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);s.prototype._captureStackTrace=G,s.prototype._attachExtraTrace=Y,s.prototype._dereferenceTrace=q,a.deactivateLongStackTraces(),J.longStackTraces=!1},s.prototype._captureStackTrace=L,s.prototype._attachExtraTrace=z,s.prototype._dereferenceTrace=$,a.activateLongStackTraces()}},s.hasLongStackTraces=function(){return J.longStackTraces&&Gi()};var H={unhandledrejection:{before:function(){var G=u.global.onunhandledrejection;return u.global.onunhandledrejection=null,G},after:function(G){u.global.onunhandledrejection=G}},rejectionhandled:{before:function(){var G=u.global.onrejectionhandled;return u.global.onrejectionhandled=null,G},after:function(G){u.global.onrejectionhandled=G}}},X=function(){var G=function(q,tt){if(q){var nt;try{return nt=q.before(),!u.global.dispatchEvent(tt)}finally{q.after(nt)}}else return!u.global.dispatchEvent(tt)};try{if(typeof CustomEvent=="function"){var Y=new CustomEvent("CustomEvent");return u.global.dispatchEvent(Y),function(q,tt){q=q.toLowerCase();var nt={detail:tt,cancelable:!0},At=new CustomEvent(q,nt);return h.defineProperty(At,"promise",{value:tt.promise}),h.defineProperty(At,"reason",{value:tt.reason}),G(H[q],At)}}else if(typeof Event=="function"){var Y=new Event("CustomEvent");return u.global.dispatchEvent(Y),function(tt,nt){tt=tt.toLowerCase();var At=new Event(tt,{cancelable:!0});return At.detail=nt,h.defineProperty(At,"promise",{value:nt.promise}),h.defineProperty(At,"reason",{value:nt.reason}),G(H[tt],At)}}else{var Y=document.createEvent("CustomEvent");return Y.initCustomEvent("testingtheevent",!1,!0,{}),u.global.dispatchEvent(Y),function(tt,nt){tt=tt.toLowerCase();var At=document.createEvent("CustomEvent");return At.initCustomEvent(tt,!1,!0,nt),G(H[tt],At)}}}catch{}return function(){return!1}}(),U=function(){return u.isNode?function(){return process.emit.apply(process,arguments)}:u.global?function(G){var Y="on"+G.toLowerCase(),q=u.global[Y];return q?(q.apply(u.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}();function k(G,Y){return{promise:Y}}var ot={promiseCreated:k,promiseFulfilled:k,promiseRejected:k,promiseResolved:k,promiseCancelled:k,promiseChained:function(G,Y,q){return{promise:Y,child:q}},warning:function(G,Y){return{warning:Y}},unhandledRejection:function(G,Y,q){return{reason:Y,promise:q}},rejectionHandled:k},lt=function(G){var Y=!1;try{Y=U.apply(null,arguments)}catch(tt){d.throwLater(tt),Y=!0}var q=!1;try{q=X(G,ot[G].apply(null,arguments))}catch(tt){d.throwLater(tt),q=!0}return q||Y};s.config=function(G){if(G=Object(G),"longStackTraces"in G&&(G.longStackTraces?s.longStackTraces():!G.longStackTraces&&s.hasLongStackTraces()&&O()),"warnings"in G){var Y=G.warnings;J.warnings=!!Y,F=J.warnings,u.isObject(Y)&&"wForgottenReturn"in Y&&(F=!!Y.wForgottenReturn)}if("cancellation"in G&&G.cancellation&&!J.cancellation){if(d.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");s.prototype._clearCancellationData=pt,s.prototype._propagateFrom=dt,s.prototype._onCancel=at,s.prototype._setOnCancel=N,s.prototype._attachCancellationCallback=rt,s.prototype._execute=Q,x=dt,J.cancellation=!0}if("monitoring"in G&&(G.monitoring&&!J.monitoring?(J.monitoring=!0,s.prototype._fireEvent=lt):!G.monitoring&&J.monitoring&&(J.monitoring=!1,s.prototype._fireEvent=et)),"asyncHooks"in G&&u.nodeSupportsAsyncResource){var q=J.asyncHooks,tt=!!G.asyncHooks;q!==tt&&(J.asyncHooks=tt,tt?l():c())}return s};function et(){return!1}s.prototype._fireEvent=et,s.prototype._execute=function(G,Y,q){try{G(Y,q)}catch(tt){return tt}},s.prototype._onCancel=function(){},s.prototype._setOnCancel=function(G){},s.prototype._attachCancellationCallback=function(G){},s.prototype._captureStackTrace=function(){},s.prototype._attachExtraTrace=function(){},s.prototype._dereferenceTrace=function(){},s.prototype._clearCancellationData=function(){},s.prototype._propagateFrom=function(G,Y){};function Q(G,Y,q){var tt=this;try{G(Y,q,function(nt){if(typeof nt!="function")throw new TypeError("onCancel must be a function, got: "+u.toString(nt));tt._attachCancellationCallback(nt)})}catch(nt){return nt}}function rt(G){if(!this._isCancellable())return this;var Y=this._onCancel();Y!==void 0?u.isArray(Y)?Y.push(G):this._setOnCancel([Y,G]):this._setOnCancel(G)}function at(){return this._onCancelField}function N(G){this._onCancelField=G}function pt(){this._cancellationParent=void 0,this._onCancelField=void 0}function dt(G,Y){if(Y&1){this._cancellationParent=G;var q=G._branchesRemainingToCancel;q===void 0&&(q=0),G._branchesRemainingToCancel=q+1}Y&2&&G._isBound()&&this._setBoundTo(G._boundTo)}function D(G,Y){Y&2&&G._isBound()&&this._setBoundTo(G._boundTo)}var x=D;function M(){var G=this._boundTo;return G!==void 0&&G instanceof s?G.isFulfilled()?G.value():void 0:G}function L(){this._trace=new j(this._peekContext())}function z(G,Y){if(f(G)){var q=this._trace;if(q!==void 0&&Y&&(q=q._parent),q!==void 0)q.attachExtraTrace(G);else if(!G.__stackCleaned__){var tt=fe(G);u.notEnumerableProp(G,"stack",tt.message+`
`+tt.stack.join(`
`)),u.notEnumerableProp(G,"__stackCleaned__",!0)}}}function $(){this._trace=void 0}function K(G,Y,q,tt,nt){if(G===void 0&&Y!==null&&F){if(nt!==void 0&&nt._returnedNonUndefined()||!(tt._bitField&65535))return;q&&(q=q+" ");var At="",Pt="";if(Y._trace){for(var vt=Y._trace.stack.split(`
`),Et=$t(vt),Ot=Et.length-1;Ot>=0;--Ot){var Oe=Et[Ot];if(!I.test(Oe)){var Ge=Oe.match(p);Ge&&(At="at "+Ge[1]+":"+Ge[2]+":"+Ge[3]+" ");break}}if(Et.length>0){for(var ay=Et[0],Ot=0;Ot<vt.length;++Ot)if(vt[Ot]===ay){Ot>0&&(Pt=`
`+vt[Ot-1]);break}}}var uy="a promise was created in a "+q+"handler "+At+"but was not returned from it, see http://goo.gl/rRqMUw"+Pt;tt._warn(uy,!0,Y)}}function st(G,Y){var q=G+" is deprecated and will be removed in a future version.";return Y&&(q+=" Use "+Y+" instead."),gt(q)}function gt(G,Y,q){if(J.warnings){var tt=new g(G),nt;if(Y)q._attachExtraTrace(tt);else if(J.longStackTraces&&(nt=s._peekContext()))nt.attachExtraTrace(tt);else{var At=fe(tt);tt.stack=At.message+`
`+At.stack.join(`
`)}lt("warning",tt)||te(tt,"",!0)}}function xt(G,Y){for(var q=0;q<Y.length-1;++q)Y[q].push("From previous event:"),Y[q]=Y[q].join(`
`);return q<Y.length&&(Y[q]=Y[q].join(`
`)),G+`
`+Y.join(`
`)}function wt(G){for(var Y=0;Y<G.length;++Y)(G[Y].length===0||Y+1<G.length&&G[Y][0]===G[Y+1][0])&&(G.splice(Y,1),Y--)}function Dt(G){for(var Y=G[0],q=1;q<G.length;++q){for(var tt=G[q],nt=Y.length-1,At=Y[nt],Pt=-1,vt=tt.length-1;vt>=0;--vt)if(tt[vt]===At){Pt=vt;break}for(var vt=Pt;vt>=0;--vt){var Et=tt[vt];if(Y[nt]===Et)Y.pop(),nt--;else break}Y=tt}}function $t(G){for(var Y=[],q=0;q<G.length;++q){var tt=G[q],nt=tt==="    (No stack trace)"||_.test(tt),At=nt&&B(tt);nt&&!At&&(b&&tt.charAt(0)!==" "&&(tt="    "+tt),Y.push(tt))}return Y}function be(G){for(var Y=G.stack.replace(/\s+$/g,"").split(`
`),q=0;q<Y.length;++q){var tt=Y[q];if(tt==="    (No stack trace)"||_.test(tt))break}return q>0&&G.name!="SyntaxError"&&(Y=Y.slice(q)),Y}function fe(G){var Y=G.stack,q=G.toString();return Y=typeof Y=="string"&&Y.length>0?be(G):["    (No stack trace)"],{message:q,stack:G.name=="SyntaxError"?Y:$t(Y)}}function te(G,Y,q){if(typeof console<"u"){var tt;if(u.isObject(G)){var nt=G.stack;tt=Y+A(nt,G)}else tt=Y+String(G);typeof P=="function"?P(tt,q):(typeof console.log=="function"||typeof console.log=="object")&&console.log(tt)}}function Vr(G,Y,q,tt){var nt=!1;try{typeof Y=="function"&&(nt=!0,G==="rejectionHandled"?Y(tt):Y(q,tt))}catch(At){d.throwLater(At)}G==="unhandledRejection"?!lt(G,q,tt)&&!nt&&te(q,"Unhandled rejection "):lt(G,tt)}function ro(G){var Y;if(typeof G=="function")Y="[function "+(G.name||"anonymous")+"]";else{Y=G&&typeof G.toString=="function"?G.toString():u.toString(G);var q=/\[object [a-zA-Z0-9$_]+\]/;if(q.test(Y))try{var tt=JSON.stringify(G);Y=tt}catch{}Y.length===0&&(Y="(empty array)")}return"(<"+Fe(Y)+">, no stack trace)"}function Fe(G){var Y=41;return G.length<Y?G:G.substr(0,Y-3)+"..."}function Gi(){return typeof V=="function"}var B=function(){return!1},w=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function S(G){var Y=G.match(w);if(Y)return{fileName:Y[1],line:parseInt(Y[2],10)}}function R(G,Y){if(Gi()){for(var q=(G.stack||"").split(`
`),tt=(Y.stack||"").split(`
`),nt=-1,At=-1,Pt,vt,Et=0;Et<q.length;++Et){var Ot=S(q[Et]);if(Ot){Pt=Ot.fileName,nt=Ot.line;break}}for(var Et=0;Et<tt.length;++Et){var Ot=S(tt[Et]);if(Ot){vt=Ot.fileName,At=Ot.line;break}}nt<0||At<0||!Pt||!vt||Pt!==vt||nt>=At||(B=function(Oe){if(y.test(Oe))return!0;var Ge=S(Oe);return!!(Ge&&Ge.fileName===Pt&&nt<=Ge.line&&Ge.line<=At)})}}function j(G){this._parent=G,this._promisesCreated=0;var Y=this._length=1+(G===void 0?0:G._length);V(this,j),Y>32&&this.uncycle()}u.inherits(j,Error),a.CapturedTrace=j,j.prototype.uncycle=function(){var G=this._length;if(!(G<2)){for(var Y=[],q={},tt=0,nt=this;nt!==void 0;++tt)Y.push(nt),nt=nt._parent;G=this._length=tt;for(var tt=G-1;tt>=0;--tt){var At=Y[tt].stack;q[At]===void 0&&(q[At]=tt)}for(var tt=0;tt<G;++tt){var Pt=Y[tt].stack,vt=q[Pt];if(vt!==void 0&&vt!==tt){vt>0&&(Y[vt-1]._parent=void 0,Y[vt-1]._length=1),Y[tt]._parent=void 0,Y[tt]._length=1;var Et=tt>0?Y[tt-1]:this;vt<G-1?(Et._parent=Y[vt+1],Et._parent.uncycle(),Et._length=Et._parent._length+1):(Et._parent=void 0,Et._length=1);for(var Ot=Et._length+1,Oe=tt-2;Oe>=0;--Oe)Y[Oe]._length=Ot,Ot++;return}}}},j.prototype.attachExtraTrace=function(G){if(!G.__stackCleaned__){this.uncycle();for(var Y=fe(G),q=Y.message,tt=[Y.stack],nt=this;nt!==void 0;)tt.push($t(nt.stack.split(`
`))),nt=nt._parent;Dt(tt),wt(tt),u.notEnumerableProp(G,"stack",xt(q,tt)),u.notEnumerableProp(G,"__stackCleaned__",!0)}};var V=function(){var Y=/^\s*at\s*/,q=function(Pt,vt){return typeof Pt=="string"?Pt:vt.name!==void 0&&vt.message!==void 0?vt.toString():ro(vt)};if(typeof Error.stackTraceLimit=="number"&&typeof Error.captureStackTrace=="function"){Error.stackTraceLimit+=6,_=Y,A=q;var tt=Error.captureStackTrace;return B=function(Pt){return y.test(Pt)},function(Pt,vt){Error.stackTraceLimit+=6,tt(Pt,vt),Error.stackTraceLimit-=6}}var nt=new Error;if(typeof nt.stack=="string"&&nt.stack.split(`
`)[0].indexOf("stackDetection@")>=0)return _=/@/,A=q,b=!0,function(vt){vt.stack=new Error().stack};var At;try{throw new Error}catch(Pt){At="stack"in Pt}return!("stack"in nt)&&At&&typeof Error.stackTraceLimit=="number"?(_=Y,A=q,function(vt){Error.stackTraceLimit+=6;try{throw new Error}catch(Et){vt.stack=Et.stack}Error.stackTraceLimit-=6}):(A=function(Pt,vt){return typeof Pt=="string"?Pt:(typeof vt=="object"||typeof vt=="function")&&vt.name!==void 0&&vt.message!==void 0?vt.toString():ro(vt)},null)}();typeof console<"u"&&typeof console.warn<"u"&&(P=function(G){console.warn(G)},u.isNode&&process.stderr.isTTY?P=function(G,Y){var q=Y?"\x1B[33m":"\x1B[31m";console.warn(q+G+`\x1B[0m
`)}:!u.isNode&&typeof new Error().stack=="string"&&(P=function(G,Y){console.warn("%c"+G,Y?"color: darkorange":"color: red")}));var J={warnings:C,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return T&&s.longStackTraces(),{asyncHooks:function(){return J.asyncHooks},longStackTraces:function(){return J.longStackTraces},warnings:function(){return J.warnings},cancellation:function(){return J.cancellation},monitoring:function(){return J.monitoring},propagateFromFunction:function(){return x},boundValueFunction:function(){return M},checkForgottenReturns:K,setBounds:R,warn:gt,deprecated:st,CapturedTrace:j,fireDomEvent:X,fireGlobalEvent:U}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(r,n,o){n.exports=function(s){function a(){return this.value}function l(){throw this.reason}s.prototype.return=s.prototype.thenReturn=function(c){return c instanceof s&&c.suppressUnhandledRejections(),this._then(a,void 0,void 0,{value:c},void 0)},s.prototype.throw=s.prototype.thenThrow=function(c){return this._then(l,void 0,void 0,{reason:c},void 0)},s.prototype.catchThrow=function(c){if(arguments.length<=1)return this._then(void 0,l,void 0,{reason:c},void 0);var d=arguments[1],g=function(){throw d};return this.caught(c,g)},s.prototype.catchReturn=function(c){if(arguments.length<=1)return c instanceof s&&c.suppressUnhandledRejections(),this._then(void 0,a,void 0,{value:c},void 0);var d=arguments[1];d instanceof s&&d.suppressUnhandledRejections();var g=function(){return d};return this.caught(c,g)}}},{}],11:[function(r,n,o){n.exports=function(s,a){var l=s.reduce,c=s.all;function d(){return c(this)}function g(u,h){return l(u,h,a,a)}s.prototype.each=function(u){return l(this,u,a,0)._then(d,void 0,void 0,this,void 0)},s.prototype.mapSeries=function(u){return l(this,u,a,a)},s.each=function(u,h){return l(u,h,a,0)._then(d,void 0,void 0,u,void 0)},s.mapSeries=g}},{}],12:[function(r,n,o){var s=r("./es5"),a=s.freeze,l=r("./util"),c=l.inherits,d=l.notEnumerableProp;function g(P,E){function C(T){if(!(this instanceof C))return new C(T);d(this,"message",typeof T=="string"?T:E),d(this,"name",P),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(C,Error),C}var u,h,f=g("Warning","warning"),v=g("CancellationError","cancellation error"),m=g("TimeoutError","timeout error"),y=g("AggregateError","aggregate error");try{u=TypeError,h=RangeError}catch{u=g("TypeError","type error"),h=g("RangeError","range error")}for(var I="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),p=0;p<I.length;++p)typeof Array.prototype[I[p]]=="function"&&(y.prototype[I[p]]=Array.prototype[I[p]]);s.defineProperty(y.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),y.prototype.isOperational=!0;var _=0;y.prototype.toString=function(){var P=Array(_*4+1).join(" "),E=`
`+P+`AggregateError of:
`;_++,P=Array(_*4+1).join(" ");for(var C=0;C<this.length;++C){for(var T=this[C]===this?"[Circular AggregateError]":this[C]+"",F=T.split(`
`),Z=0;Z<F.length;++Z)F[Z]=P+F[Z];T=F.join(`
`),E+=T+`
`}return _--,E};function A(P){if(!(this instanceof A))return new A(P);d(this,"name","OperationalError"),d(this,"message",P),this.cause=P,this.isOperational=!0,P instanceof Error?(d(this,"message",P.message),d(this,"stack",P.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}c(A,Error);var b=Error.__BluebirdErrorTypes__;b||(b=a({CancellationError:v,TimeoutError:m,OperationalError:A,RejectionError:A,AggregateError:y}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),n.exports={Error,TypeError:u,RangeError:h,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:f}},{"./es5":13,"./util":36}],13:[function(r,n,o){var s=function(){return this===void 0}();if(s)n.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:s,propertyIsWritable:function(m,y){var I=Object.getOwnPropertyDescriptor(m,y);return!!(!I||I.writable||I.set)}};else{var a={}.hasOwnProperty,l={}.toString,c={}.constructor.prototype,d=function(m){var y=[];for(var I in m)a.call(m,I)&&y.push(I);return y},g=function(m,y){return{value:m[y]}},u=function(m,y,I){return m[y]=I.value,m},h=function(m){return m},f=function(m){try{return Object(m).constructor.prototype}catch{return c}},v=function(m){try{return l.call(m)==="[object Array]"}catch{return!1}};n.exports={isArray:v,keys:d,names:d,defineProperty:u,getDescriptor:g,freeze:h,getPrototypeOf:f,isES5:s,propertyIsWritable:function(){return!0}}}},{}],14:[function(r,n,o){n.exports=function(s,a){var l=s.map;s.prototype.filter=function(c,d){return l(this,c,d,a)},s.filter=function(c,d,g){return l(c,d,g,a)}}},{}],15:[function(r,n,o){n.exports=function(s,a,l){var c=r("./util"),d=s.CancellationError,g=c.errorObj,u=r("./catch_filter")(l);function h(p,_,A){this.promise=p,this.type=_,this.handler=A,this.called=!1,this.cancelPromise=null}h.prototype.isFinallyHandler=function(){return this.type===0};function f(p){this.finallyHandler=p}f.prototype._resultCancelled=function(){v(this.finallyHandler)};function v(p,_){return p.cancelPromise!=null?(arguments.length>1?p.cancelPromise._reject(_):p.cancelPromise._cancel(),p.cancelPromise=null,!0):!1}function m(){return I.call(this,this.promise._target()._settledValue())}function y(p){if(!v(this,p))return g.e=p,g}function I(p){var _=this.promise,A=this.handler;if(!this.called){this.called=!0;var b=this.isFinallyHandler()?A.call(_._boundValue()):A.call(_._boundValue(),p);if(b===l)return b;if(b!==void 0){_._setReturnedNonUndefined();var P=a(b,_);if(P instanceof s){if(this.cancelPromise!=null)if(P._isCancelled()){var E=new d("late cancellation observer");return _._attachExtraTrace(E),g.e=E,g}else P.isPending()&&P._attachCancellationCallback(new f(this));return P._then(m,y,void 0,this,void 0)}}}return _.isRejected()?(v(this),g.e=p,g):(v(this),p)}return s.prototype._passThrough=function(p,_,A,b){return typeof p!="function"?this.then():this._then(A,b,void 0,new h(this,_,p),void 0)},s.prototype.lastly=s.prototype.finally=function(p){return this._passThrough(p,0,I,I)},s.prototype.tap=function(p){return this._passThrough(p,1,I)},s.prototype.tapCatch=function(p){var _=arguments.length;if(_===1)return this._passThrough(p,1,void 0,I);var A=new Array(_-1),b=0,P;for(P=0;P<_-1;++P){var E=arguments[P];if(c.isObject(E))A[b++]=E;else return s.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+c.classString(E)))}A.length=b;var C=arguments[P];return this._passThrough(u(A,C,this),1,void 0,I)},h}},{"./catch_filter":7,"./util":36}],16:[function(r,n,o){n.exports=function(s,a,l,c,d,g){var u=r("./errors"),h=u.TypeError,f=r("./util"),v=f.errorObj,m=f.tryCatch,y=[];function I(_,A,b){for(var P=0;P<A.length;++P){b._pushContext();var E=m(A[P])(_);if(b._popContext(),E===v){b._pushContext();var C=s.reject(v.e);return b._popContext(),C}var T=c(E,b);if(T instanceof s)return T}return null}function p(_,A,b,P){if(g.cancellation()){var E=new s(l),C=this._finallyPromise=new s(l);this._promise=E.lastly(function(){return C}),E._captureStackTrace(),E._setOnCancel(this)}else{var T=this._promise=new s(l);T._captureStackTrace()}this._stack=P,this._generatorFunction=_,this._receiver=A,this._generator=void 0,this._yieldHandlers=typeof b=="function"?[b].concat(y):y,this._yieldedPromise=null,this._cancellationPhase=!1}f.inherits(p,d),p.prototype._isResolved=function(){return this._promise===null},p.prototype._cleanup=function(){this._promise=this._generator=null,g.cancellation()&&this._finallyPromise!==null&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},p.prototype._promiseCancelled=function(){if(!this._isResolved()){var _=typeof this._generator.return<"u",A;if(_)this._promise._pushContext(),A=m(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var b=new s.CancellationError("generator .return() sentinel");s.coroutine.returnSentinel=b,this._promise._attachExtraTrace(b),this._promise._pushContext(),A=m(this._generator.throw).call(this._generator,b),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(A)}},p.prototype._promiseFulfilled=function(_){this._yieldedPromise=null,this._promise._pushContext();var A=m(this._generator.next).call(this._generator,_);this._promise._popContext(),this._continue(A)},p.prototype._promiseRejected=function(_){this._yieldedPromise=null,this._promise._attachExtraTrace(_),this._promise._pushContext();var A=m(this._generator.throw).call(this._generator,_);this._promise._popContext(),this._continue(A)},p.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof s){var _=this._yieldedPromise;this._yieldedPromise=null,_.cancel()}},p.prototype.promise=function(){return this._promise},p.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},p.prototype._continue=function(_){var A=this._promise;if(_===v)return this._cleanup(),this._cancellationPhase?A.cancel():A._rejectCallback(_.e,!1);var b=_.value;if(_.done===!0)return this._cleanup(),this._cancellationPhase?A.cancel():A._resolveCallback(b);var P=c(b,this._promise);if(!(P instanceof s)&&(P=I(P,this._yieldHandlers,this._promise),P===null)){this._promiseRejected(new h(`A value %s was yielded that could not be treated as a promise

    See http://goo.gl/MqrFmX

`.replace("%s",String(b))+`From coroutine:
`+this._stack.split(`
`).slice(1,-7).join(`
`)));return}P=P._target();var E=P._bitField;E&50397184?E&33554432?s._async.invoke(this._promiseFulfilled,this,P._value()):E&16777216?s._async.invoke(this._promiseRejected,this,P._reason()):this._promiseCancelled():(this._yieldedPromise=P,P._proxy(this,null))},s.coroutine=function(_,A){if(typeof _!="function")throw new h(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var b=Object(A).yieldHandler,P=p,E=new Error().stack;return function(){var C=_.apply(this,arguments),T=new P(void 0,void 0,b,E),F=T.promise();return T._generator=C,T._promiseFulfilled(void 0),F}},s.coroutine.addYieldHandler=function(_){if(typeof _!="function")throw new h("expecting a function but got "+f.classString(_));y.push(_)},s.spawn=function(_){if(g.deprecated("Promise.spawn()","Promise.coroutine()"),typeof _!="function")return a(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var A=new p(_,this),b=A.promise();return A._run(s.spawn),b}}},{"./errors":12,"./util":36}],17:[function(r,n,o){n.exports=function(s,a,l,c,d){var g=r("./util");g.canEvaluate,g.tryCatch,g.errorObj,s.join=function(){var u=arguments.length-1,h;if(u>0&&typeof arguments[u]=="function"){h=arguments[u];var v}var f=[].slice.call(arguments);h&&f.pop();var v=new a(f).promise();return h!==void 0?v.spread(h):v}}},{"./util":36}],18:[function(r,n,o){n.exports=function(s,a,l,c,d,g){var u=r("./util"),h=u.tryCatch,f=u.errorObj,v=s._async;function m(I,p,_,A){this.constructor$(I),this._promise._captureStackTrace();var b=s._getContext();if(this._callback=u.contextBind(b,p),this._preservedValues=A===d?new Array(this.length()):null,this._limit=_,this._inFlight=0,this._queue=[],v.invoke(this._asyncInit,this,void 0),u.isArray(I))for(var P=0;P<I.length;++P){var E=I[P];E instanceof s&&E.suppressUnhandledRejections()}}u.inherits(m,a),m.prototype._asyncInit=function(){this._init$(void 0,-2)},m.prototype._init=function(){},m.prototype._promiseFulfilled=function(I,p){var _=this._values,A=this.length(),b=this._preservedValues,P=this._limit;if(p<0){if(p=p*-1-1,_[p]=I,P>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(P>=1&&this._inFlight>=P)return _[p]=I,this._queue.push(p),!1;b!==null&&(b[p]=I);var E=this._promise,C=this._callback,T=E._boundValue();E._pushContext();var F=h(C).call(T,I,p,A),Z=E._popContext();if(g.checkForgottenReturns(F,Z,b!==null?"Promise.filter":"Promise.map",E),F===f)return this._reject(F.e),!0;var O=c(F,this._promise);if(O instanceof s){O=O._target();var H=O._bitField;if(H&50397184)if(H&33554432)F=O._value();else return H&16777216?(this._reject(O._reason()),!0):(this._cancel(),!0);else return P>=1&&this._inFlight++,_[p]=O,O._proxy(this,(p+1)*-1),!1}_[p]=F}var X=++this._totalResolved;return X>=A?(b!==null?this._filter(_,b):this._resolve(_),!0):!1},m.prototype._drainQueue=function(){for(var I=this._queue,p=this._limit,_=this._values;I.length>0&&this._inFlight<p;){if(this._isResolved())return;var A=I.pop();this._promiseFulfilled(_[A],A)}},m.prototype._filter=function(I,p){for(var _=p.length,A=new Array(_),b=0,P=0;P<_;++P)I[P]&&(A[b++]=p[P]);A.length=b,this._resolve(A)},m.prototype.preservedValues=function(){return this._preservedValues};function y(I,p,_,A){if(typeof p!="function")return l("expecting a function but got "+u.classString(p));var b=0;if(_!==void 0)if(typeof _=="object"&&_!==null){if(typeof _.concurrency!="number")return s.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(_.concurrency)));b=_.concurrency}else return s.reject(new TypeError("options argument must be an object but it is "+u.classString(_)));return b=typeof b=="number"&&isFinite(b)&&b>=1?b:0,new m(I,p,b,A).promise()}s.prototype.map=function(I,p){return y(this,I,p,null)},s.map=function(I,p,_,A){return y(I,p,_,A)}}},{"./util":36}],19:[function(r,n,o){n.exports=function(s,a,l,c,d){var g=r("./util"),u=g.tryCatch;s.method=function(h){if(typeof h!="function")throw new s.TypeError("expecting a function but got "+g.classString(h));return function(){var f=new s(a);f._captureStackTrace(),f._pushContext();var v=u(h).apply(this,arguments),m=f._popContext();return d.checkForgottenReturns(v,m,"Promise.method",f),f._resolveFromSyncValue(v),f}},s.attempt=s.try=function(h){if(typeof h!="function")return c("expecting a function but got "+g.classString(h));var f=new s(a);f._captureStackTrace(),f._pushContext();var v;if(arguments.length>1){d.deprecated("calling Promise.try with more than 1 argument");var m=arguments[1],y=arguments[2];v=g.isArray(m)?u(h).apply(y,m):u(h).call(y,m)}else v=u(h)();var I=f._popContext();return d.checkForgottenReturns(v,I,"Promise.try",f),f._resolveFromSyncValue(v),f},s.prototype._resolveFromSyncValue=function(h){h===g.errorObj?this._rejectCallback(h.e,!1):this._resolveCallback(h,!0)}}},{"./util":36}],20:[function(r,n,o){var s=r("./util"),a=s.maybeWrapAsError,l=r("./errors"),c=l.OperationalError,d=r("./es5");function g(v){return v instanceof Error&&d.getPrototypeOf(v)===Error.prototype}var u=/^(?:name|message|stack|cause)$/;function h(v){var m;if(g(v)){m=new c(v),m.name=v.name,m.message=v.message,m.stack=v.stack;for(var y=d.keys(v),I=0;I<y.length;++I){var p=y[I];u.test(p)||(m[p]=v[p])}return m}return s.markAsOriginatingFromRejection(v),v}function f(v,m){return function(y,I){if(v!==null){if(y){var p=h(a(y));v._attachExtraTrace(p),v._reject(p)}else if(!m)v._fulfill(I);else{var _=[].slice.call(arguments,1);v._fulfill(_)}v=null}}}n.exports=f},{"./errors":12,"./es5":13,"./util":36}],21:[function(r,n,o){n.exports=function(s){var a=r("./util"),l=s._async,c=a.tryCatch,d=a.errorObj;function g(f,v){var m=this;if(!a.isArray(f))return u.call(m,f,v);var y=c(v).apply(m._boundValue(),[null].concat(f));y===d&&l.throwLater(y.e)}function u(f,v){var m=this,y=m._boundValue(),I=f===void 0?c(v).call(y,null):c(v).call(y,null,f);I===d&&l.throwLater(I.e)}function h(f,v){var m=this;if(!f){var y=new Error(f+"");y.cause=f,f=y}var I=c(v).call(m._boundValue(),f);I===d&&l.throwLater(I.e)}s.prototype.asCallback=s.prototype.nodeify=function(f,v){if(typeof f=="function"){var m=u;v!==void 0&&Object(v).spread&&(m=g),this._then(m,h,void 0,this,f)}return this}}},{"./util":36}],22:[function(r,n,o){n.exports=function(){var s=function(){return new E(`circular promise resolution chain

    See http://goo.gl/MqrFmX
`)},a=function(){return new N.PromiseInspection(this._target())},l=function(x){return N.reject(new E(x))};function c(){}var d={},g=r("./util");g.setReflectHandler(a);var u=function(){var x=process.domain;return x===void 0?null:x},h=function(){return null},f=function(){return{domain:u(),async:null}},v=g.isNode&&g.nodeSupportsAsyncResource?r("async_hooks").AsyncResource:null,m=function(){return{domain:u(),async:new v("Bluebird::Promise")}},y=g.isNode?f:h;g.notEnumerableProp(N,"_getContext",y);var I=function(){y=m,g.notEnumerableProp(N,"_getContext",m)},p=function(){y=f,g.notEnumerableProp(N,"_getContext",f)},_=r("./es5"),A=r("./async"),b=new A;_.defineProperty(N,"_async",{value:b});var P=r("./errors"),E=N.TypeError=P.TypeError;N.RangeError=P.RangeError;var C=N.CancellationError=P.CancellationError;N.TimeoutError=P.TimeoutError,N.OperationalError=P.OperationalError,N.RejectionError=P.OperationalError,N.AggregateError=P.AggregateError;var T=function(){},F={},Z={},O=r("./thenables")(N,T),H=r("./promise_array")(N,T,O,l,c),X=r("./context")(N),U=X.create,k=r("./debuggability")(N,X,I,p);k.CapturedTrace;var ot=r("./finally")(N,O,Z),lt=r("./catch_filter")(Z),et=r("./nodeback"),Q=g.errorObj,rt=g.tryCatch;function at(x,M){if(x==null||x.constructor!==N)throw new E(`the promise constructor cannot be invoked directly

    See http://goo.gl/MqrFmX
`);if(typeof M!="function")throw new E("expecting a function but got "+g.classString(M))}function N(x){x!==T&&at(this,x),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(x),this._promiseCreated(),this._fireEvent("promiseCreated",this)}N.prototype.toString=function(){return"[object Promise]"},N.prototype.caught=N.prototype.catch=function(x){var M=arguments.length;if(M>1){var L=new Array(M-1),z=0,$;for($=0;$<M-1;++$){var K=arguments[$];if(g.isObject(K))L[z++]=K;else return l("Catch statement predicate: expecting an object but got "+g.classString(K))}if(L.length=z,x=arguments[$],typeof x!="function")throw new E("The last argument to .catch() must be a function, got "+g.toString(x));return this.then(void 0,lt(L,x,this))}return this.then(void 0,x)},N.prototype.reflect=function(){return this._then(a,a,void 0,this,void 0)},N.prototype.then=function(x,M){if(k.warnings()&&arguments.length>0&&typeof x!="function"&&typeof M!="function"){var L=".then() only accepts functions but was passed: "+g.classString(x);arguments.length>1&&(L+=", "+g.classString(M)),this._warn(L)}return this._then(x,M,void 0,void 0,void 0)},N.prototype.done=function(x,M){var L=this._then(x,M,void 0,void 0,void 0);L._setIsFinal()},N.prototype.spread=function(x){return typeof x!="function"?l("expecting a function but got "+g.classString(x)):this.all()._then(x,void 0,void 0,F,void 0)},N.prototype.toJSON=function(){var x={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(x.fulfillmentValue=this.value(),x.isFulfilled=!0):this.isRejected()&&(x.rejectionReason=this.reason(),x.isRejected=!0),x},N.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new H(this).promise()},N.prototype.error=function(x){return this.caught(g.originatesFromRejection,x)},N.getNewLibraryCopy=n.exports,N.is=function(x){return x instanceof N},N.fromNode=N.fromCallback=function(x){var M=new N(T);M._captureStackTrace();var L=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,z=rt(x)(et(M,L));return z===Q&&M._rejectCallback(z.e,!0),M._isFateSealed()||M._setAsyncGuaranteed(),M},N.all=function(x){return new H(x).promise()},N.cast=function(x){var M=O(x);return M instanceof N||(M=new N(T),M._captureStackTrace(),M._setFulfilled(),M._rejectionHandler0=x),M},N.resolve=N.fulfilled=N.cast,N.reject=N.rejected=function(x){var M=new N(T);return M._captureStackTrace(),M._rejectCallback(x,!0),M},N.setScheduler=function(x){if(typeof x!="function")throw new E("expecting a function but got "+g.classString(x));return b.setScheduler(x)},N.prototype._then=function(x,M,L,z,$){var K=$!==void 0,st=K?$:new N(T),gt=this._target(),xt=gt._bitField;K||(st._propagateFrom(this,3),st._captureStackTrace(),z===void 0&&this._bitField&2097152&&(xt&50397184?z=this._boundValue():z=gt===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,st));var wt=y();if(xt&50397184){var Dt,$t,be=gt._settlePromiseCtx;xt&33554432?($t=gt._rejectionHandler0,Dt=x):xt&16777216?($t=gt._fulfillmentHandler0,Dt=M,gt._unsetRejectionIsUnhandled()):(be=gt._settlePromiseLateCancellationObserver,$t=new C("late cancellation observer"),gt._attachExtraTrace($t),Dt=M),b.invoke(be,gt,{handler:g.contextBind(wt,Dt),promise:st,receiver:z,value:$t})}else gt._addCallbacks(x,M,st,z,wt);return st},N.prototype._length=function(){return this._bitField&65535},N.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0},N.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864},N.prototype._setLength=function(x){this._bitField=this._bitField&-65536|x&65535},N.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432,this._fireEvent("promiseFulfilled",this)},N.prototype._setRejected=function(){this._bitField=this._bitField|16777216,this._fireEvent("promiseRejected",this)},N.prototype._setFollowing=function(){this._bitField=this._bitField|67108864,this._fireEvent("promiseResolved",this)},N.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304},N.prototype._isFinal=function(){return(this._bitField&4194304)>0},N.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},N.prototype._setCancelled=function(){this._bitField=this._bitField|65536,this._fireEvent("promiseCancelled",this)},N.prototype._setWillBeCancelled=function(){this._bitField=this._bitField|8388608},N.prototype._setAsyncGuaranteed=function(){if(!b.hasCustomScheduler()){var x=this._bitField;this._bitField=x|(x&536870912)>>2^134217728}},N.prototype._setNoAsyncGuarantee=function(){this._bitField=(this._bitField|536870912)&-134217729},N.prototype._receiverAt=function(x){var M=x===0?this._receiver0:this[x*4-4+3];if(M!==d)return M===void 0&&this._isBound()?this._boundValue():M},N.prototype._promiseAt=function(x){return this[x*4-4+2]},N.prototype._fulfillmentHandlerAt=function(x){return this[x*4-4+0]},N.prototype._rejectionHandlerAt=function(x){return this[x*4-4+1]},N.prototype._boundValue=function(){},N.prototype._migrateCallback0=function(x){x._bitField;var M=x._fulfillmentHandler0,L=x._rejectionHandler0,z=x._promise0,$=x._receiverAt(0);$===void 0&&($=d),this._addCallbacks(M,L,z,$,null)},N.prototype._migrateCallbackAt=function(x,M){var L=x._fulfillmentHandlerAt(M),z=x._rejectionHandlerAt(M),$=x._promiseAt(M),K=x._receiverAt(M);K===void 0&&(K=d),this._addCallbacks(L,z,$,K,null)},N.prototype._addCallbacks=function(x,M,L,z,$){var K=this._length();if(K>=65531&&(K=0,this._setLength(0)),K===0)this._promise0=L,this._receiver0=z,typeof x=="function"&&(this._fulfillmentHandler0=g.contextBind($,x)),typeof M=="function"&&(this._rejectionHandler0=g.contextBind($,M));else{var st=K*4-4;this[st+2]=L,this[st+3]=z,typeof x=="function"&&(this[st+0]=g.contextBind($,x)),typeof M=="function"&&(this[st+1]=g.contextBind($,M))}return this._setLength(K+1),K},N.prototype._proxy=function(x,M){this._addCallbacks(void 0,void 0,M,x,null)},N.prototype._resolveCallback=function(x,M){if(!(this._bitField&117506048)){if(x===this)return this._rejectCallback(s(),!1);var L=O(x,this);if(!(L instanceof N))return this._fulfill(x);M&&this._propagateFrom(L,2);var z=L._target();if(z===this){this._reject(s());return}var $=z._bitField;if($&50397184)if($&33554432)this._fulfill(z._value());else if($&16777216)this._reject(z._reason());else{var gt=new C("late cancellation observer");z._attachExtraTrace(gt),this._reject(gt)}else{var K=this._length();K>0&&z._migrateCallback0(this);for(var st=1;st<K;++st)z._migrateCallbackAt(this,st);this._setFollowing(),this._setLength(0),this._setFollowee(L)}}},N.prototype._rejectCallback=function(x,M,L){var z=g.ensureErrorObject(x),$=z===x;if(!$&&!L&&k.warnings()){var K="a promise was rejected with a non-error: "+g.classString(x);this._warn(K,!0)}this._attachExtraTrace(z,M?$:!1),this._reject(x)},N.prototype._resolveFromExecutor=function(x){if(x!==T){var M=this;this._captureStackTrace(),this._pushContext();var L=!0,z=this._execute(x,function($){M._resolveCallback($)},function($){M._rejectCallback($,L)});L=!1,this._popContext(),z!==void 0&&M._rejectCallback(z,!0)}},N.prototype._settlePromiseFromHandler=function(x,M,L,z){var $=z._bitField;if(!($&65536)){z._pushContext();var K;M===F?!L||typeof L.length!="number"?(K=Q,K.e=new E("cannot .spread() a non-array: "+g.classString(L))):K=rt(x).apply(this._boundValue(),L):K=rt(x).call(M,L);var st=z._popContext();$=z._bitField,!($&65536)&&(K===Z?z._reject(L):K===Q?z._rejectCallback(K.e,!1):(k.checkForgottenReturns(K,st,"",z,this),z._resolveCallback(K)))}},N.prototype._target=function(){for(var x=this;x._isFollowing();)x=x._followee();return x},N.prototype._followee=function(){return this._rejectionHandler0},N.prototype._setFollowee=function(x){this._rejectionHandler0=x},N.prototype._settlePromise=function(x,M,L,z){var $=x instanceof N,K=this._bitField,st=(K&134217728)!==0;K&65536?($&&x._invokeInternalOnCancel(),L instanceof ot&&L.isFinallyHandler()?(L.cancelPromise=x,rt(M).call(L,z)===Q&&x._reject(Q.e)):M===a?x._fulfill(a.call(L)):L instanceof c?L._promiseCancelled(x):$||x instanceof H?x._cancel():L.cancel()):typeof M=="function"?$?(st&&x._setAsyncGuaranteed(),this._settlePromiseFromHandler(M,L,z,x)):M.call(L,z,x):L instanceof c?L._isResolved()||(K&33554432?L._promiseFulfilled(z,x):L._promiseRejected(z,x)):$&&(st&&x._setAsyncGuaranteed(),K&33554432?x._fulfill(z):x._reject(z))},N.prototype._settlePromiseLateCancellationObserver=function(x){var M=x.handler,L=x.promise,z=x.receiver,$=x.value;typeof M=="function"?L instanceof N?this._settlePromiseFromHandler(M,z,$,L):M.call(z,$,L):L instanceof N&&L._reject($)},N.prototype._settlePromiseCtx=function(x){this._settlePromise(x.promise,x.handler,x.receiver,x.value)},N.prototype._settlePromise0=function(x,M,L){var z=this._promise0,$=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(z,x,$,M)},N.prototype._clearCallbackDataAtIndex=function(x){var M=x*4-4;this[M+2]=this[M+3]=this[M+0]=this[M+1]=void 0},N.prototype._fulfill=function(x){var M=this._bitField;if(!((M&117506048)>>>16)){if(x===this){var L=s();return this._attachExtraTrace(L),this._reject(L)}this._setFulfilled(),this._rejectionHandler0=x,(M&65535)>0&&(M&134217728?this._settlePromises():b.settlePromises(this),this._dereferenceTrace())}},N.prototype._reject=function(x){var M=this._bitField;if(!((M&117506048)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=x,this._isFinal())return b.fatalError(x,g.isNode);(M&65535)>0?b.settlePromises(this):this._ensurePossibleRejectionHandled()}},N.prototype._fulfillPromises=function(x,M){for(var L=1;L<x;L++){var z=this._fulfillmentHandlerAt(L),$=this._promiseAt(L),K=this._receiverAt(L);this._clearCallbackDataAtIndex(L),this._settlePromise($,z,K,M)}},N.prototype._rejectPromises=function(x,M){for(var L=1;L<x;L++){var z=this._rejectionHandlerAt(L),$=this._promiseAt(L),K=this._receiverAt(L);this._clearCallbackDataAtIndex(L),this._settlePromise($,z,K,M)}},N.prototype._settlePromises=function(){var x=this._bitField,M=x&65535;if(M>0){if(x&16842752){var L=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,L,x),this._rejectPromises(M,L)}else{var z=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,z,x),this._fulfillPromises(M,z)}this._setLength(0)}this._clearCancellationData()},N.prototype._settledValue=function(){var x=this._bitField;if(x&33554432)return this._rejectionHandler0;if(x&16777216)return this._fulfillmentHandler0},typeof Symbol<"u"&&Symbol.toStringTag&&_.defineProperty(N.prototype,Symbol.toStringTag,{get:function(){return"Object"}});function pt(x){this.promise._resolveCallback(x)}function dt(x){this.promise._rejectCallback(x,!1)}N.defer=N.pending=function(){k.deprecated("Promise.defer","new Promise");var x=new N(T);return{promise:x,resolve:pt,reject:dt}},g.notEnumerableProp(N,"_makeSelfResolutionError",s),r("./method")(N,T,O,l,k),r("./bind")(N,T,O,k),r("./cancel")(N,H,l,k),r("./direct_resolve")(N),r("./synchronous_inspection")(N),r("./join")(N,H,O,T,b),N.Promise=N,N.version="3.7.2",r("./call_get.js")(N),r("./generators.js")(N,l,T,O,c,k),r("./map.js")(N,H,l,O,T,k),r("./nodeify.js")(N),r("./promisify.js")(N,T),r("./props.js")(N,H,O,l),r("./race.js")(N,T,O,l),r("./reduce.js")(N,H,l,O,T,k),r("./settle.js")(N,H,k),r("./some.js")(N,H,l),r("./timers.js")(N,T,k),r("./using.js")(N,l,O,U,T,k),r("./any.js")(N),r("./each.js")(N,T),r("./filter.js")(N,T),g.toFastProperties(N),g.toFastProperties(N.prototype);function D(x){var M=new N(T);M._fulfillmentHandler0=x,M._rejectionHandler0=x,M._promise0=x,M._receiver0=x}return D({a:1}),D({b:2}),D({c:3}),D(1),D(function(){}),D(void 0),D(!1),D(new N(T)),k.setBounds(A.firstLineError,g.lastLineError),N}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(r,n,o){n.exports=function(s,a,l,c,d){var g=r("./util");g.isArray;function u(f){switch(f){case-2:return[];case-3:return{};case-6:return new Map}}function h(f){var v=this._promise=new s(a);f instanceof s&&(v._propagateFrom(f,3),f.suppressUnhandledRejections()),v._setOnCancel(this),this._values=f,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return g.inherits(h,d),h.prototype.length=function(){return this._length},h.prototype.promise=function(){return this._promise},h.prototype._init=function f(v,m){var y=l(this._values,this._promise);if(y instanceof s){y=y._target();var I=y._bitField;if(this._values=y,I&50397184)if(I&33554432)y=y._value();else return I&16777216?this._reject(y._reason()):this._cancel();else return this._promise._setAsyncGuaranteed(),y._then(f,this._reject,void 0,this,m)}if(y=g.asArray(y),y===null){var p=c("expecting an array or an iterable object but got "+g.classString(y)).reason();this._promise._rejectCallback(p,!1);return}if(y.length===0){m===-5?this._resolveEmptyArray():this._resolve(u(m));return}this._iterate(y)},h.prototype._iterate=function(f){var v=this.getActualLength(f.length);this._length=v,this._values=this.shouldCopyValues()?new Array(v):this._values;for(var m=this._promise,y=!1,I=null,p=0;p<v;++p){var _=l(f[p],m);_ instanceof s?(_=_._target(),I=_._bitField):I=null,y?I!==null&&_.suppressUnhandledRejections():I!==null?I&50397184?I&33554432?y=this._promiseFulfilled(_._value(),p):I&16777216?y=this._promiseRejected(_._reason(),p):y=this._promiseCancelled(p):(_._proxy(this,p),this._values[p]=_):y=this._promiseFulfilled(_,p)}y||m._setAsyncGuaranteed()},h.prototype._isResolved=function(){return this._values===null},h.prototype._resolve=function(f){this._values=null,this._promise._fulfill(f)},h.prototype._cancel=function(){this._isResolved()||!this._promise._isCancellable()||(this._values=null,this._promise._cancel())},h.prototype._reject=function(f){this._values=null,this._promise._rejectCallback(f,!1)},h.prototype._promiseFulfilled=function(f,v){this._values[v]=f;var m=++this._totalResolved;return m>=this._length?(this._resolve(this._values),!0):!1},h.prototype._promiseCancelled=function(){return this._cancel(),!0},h.prototype._promiseRejected=function(f){return this._totalResolved++,this._reject(f),!0},h.prototype._resultCancelled=function(){if(!this._isResolved()){var f=this._values;if(this._cancel(),f instanceof s)f.cancel();else for(var v=0;v<f.length;++v)f[v]instanceof s&&f[v].cancel()}},h.prototype.shouldCopyValues=function(){return!0},h.prototype.getActualLength=function(f){return f},h}},{"./util":36}],24:[function(r,n,o){n.exports=function(s,a){var l={},c=r("./util"),d=r("./nodeback"),g=c.withAppended,u=c.maybeWrapAsError,h=c.canEvaluate,f=r("./errors").TypeError,v="Async",m={__isPromisified__:!0},y=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],I=new RegExp("^(?:"+y.join("|")+")$"),p=function(X){return c.isIdentifier(X)&&X.charAt(0)!=="_"&&X!=="constructor"};function _(X){return!I.test(X)}function A(X){try{return X.__isPromisified__===!0}catch{return!1}}function b(X,U,k){var ot=c.getDataPropertyOrDefault(X,U+k,m);return ot?A(ot):!1}function P(X,U,k){for(var ot=0;ot<X.length;ot+=2){var lt=X[ot];if(k.test(lt)){for(var et=lt.replace(k,""),Q=0;Q<X.length;Q+=2)if(X[Q]===et)throw new f(`Cannot promisify an API that has normal methods with '%s'-suffix

    See http://goo.gl/MqrFmX
`.replace("%s",U))}}}function E(X,U,k,ot){for(var lt=c.inheritedDataKeys(X),et=[],Q=0;Q<lt.length;++Q){var rt=lt[Q],at=X[rt],N=ot===p?!0:p(rt);typeof at=="function"&&!A(at)&&!b(X,rt,U)&&ot(rt,at,X,N)&&et.push(rt,at)}return P(et,U,k),et}var C=function(X){return X.replace(/([$])/,"\\$")},T;function F(X,U,k,ot,lt,et){var Q=function(){return this}(),rt=X;typeof rt=="string"&&(X=ot);function at(){var N=U;U===l&&(N=this);var pt=new s(a);pt._captureStackTrace();var dt=typeof rt=="string"&&this!==Q?this[rt]:X,D=d(pt,et);try{dt.apply(N,g(arguments,D))}catch(x){pt._rejectCallback(u(x),!0,!0)}return pt._isFateSealed()||pt._setAsyncGuaranteed(),pt}return c.notEnumerableProp(at,"__isPromisified__",!0),at}var Z=h?T:F;function O(X,U,k,ot,lt){for(var et=new RegExp(C(U)+"$"),Q=E(X,U,et,k),rt=0,at=Q.length;rt<at;rt+=2){var N=Q[rt],pt=Q[rt+1],dt=N+U;if(ot===Z)X[dt]=Z(N,l,N,pt,U,lt);else{var D=ot(pt,function(){return Z(N,l,N,pt,U,lt)});c.notEnumerableProp(D,"__isPromisified__",!0),X[dt]=D}}return c.toFastProperties(X),X}function H(X,U,k){return Z(X,U,void 0,X,null,k)}s.promisify=function(X,U){if(typeof X!="function")throw new f("expecting a function but got "+c.classString(X));if(A(X))return X;U=Object(U);var k=U.context===void 0?l:U.context,ot=!!U.multiArgs,lt=H(X,k,ot);return c.copyDescriptors(X,lt,_),lt},s.promisifyAll=function(X,U){if(typeof X!="function"&&typeof X!="object")throw new f(`the target of promisifyAll must be an object or a function

    See http://goo.gl/MqrFmX
`);U=Object(U);var k=!!U.multiArgs,ot=U.suffix;typeof ot!="string"&&(ot=v);var lt=U.filter;typeof lt!="function"&&(lt=p);var et=U.promisifier;if(typeof et!="function"&&(et=Z),!c.isIdentifier(ot))throw new RangeError(`suffix must be a valid identifier

    See http://goo.gl/MqrFmX
`);for(var Q=c.inheritedDataKeys(X),rt=0;rt<Q.length;++rt){var at=X[Q[rt]];Q[rt]!=="constructor"&&c.isClass(at)&&(O(at.prototype,ot,lt,et,k),O(at,ot,lt,et,k))}return O(X,ot,lt,et,k)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(r,n,o){n.exports=function(s,a,l,c){var d=r("./util"),g=d.isObject,u=r("./es5"),h;typeof Map=="function"&&(h=Map);var f=function(){var I=0,p=0;function _(A,b){this[I]=A,this[I+p]=b,I++}return function(b){p=b.size,I=0;var P=new Array(b.size*2);return b.forEach(_,P),P}}(),v=function(I){for(var p=new h,_=I.length/2|0,A=0;A<_;++A){var b=I[_+A],P=I[A];p.set(b,P)}return p};function m(I){var p=!1,_;if(h!==void 0&&I instanceof h)_=f(I),p=!0;else{var A=u.keys(I),b=A.length;_=new Array(b*2);for(var P=0;P<b;++P){var E=A[P];_[P]=I[E],_[P+b]=E}}this.constructor$(_),this._isMap=p,this._init$(void 0,p?-6:-3)}d.inherits(m,a),m.prototype._init=function(){},m.prototype._promiseFulfilled=function(I,p){this._values[p]=I;var _=++this._totalResolved;if(_>=this._length){var A;if(this._isMap)A=v(this._values);else{A={};for(var b=this.length(),P=0,E=this.length();P<E;++P)A[this._values[P+b]]=this._values[P]}return this._resolve(A),!0}return!1},m.prototype.shouldCopyValues=function(){return!1},m.prototype.getActualLength=function(I){return I>>1};function y(I){var p,_=l(I);if(g(_))_ instanceof s?p=_._then(s.props,void 0,void 0,void 0,void 0):p=new m(_).promise();else return c(`cannot await properties of a non-object

    See http://goo.gl/MqrFmX
`);return _ instanceof s&&p._propagateFrom(_,2),p}s.prototype.props=function(){return y(this)},s.props=function(I){return y(I)}}},{"./es5":13,"./util":36}],26:[function(r,n,o){function s(l,c,d,g,u){for(var h=0;h<u;++h)d[h+g]=l[h+c],l[h+c]=void 0}function a(l){this._capacity=l,this._length=0,this._front=0}a.prototype._willBeOverCapacity=function(l){return this._capacity<l},a.prototype._pushOne=function(l){var c=this.length();this._checkCapacity(c+1);var d=this._front+c&this._capacity-1;this[d]=l,this._length=c+1},a.prototype.push=function(l,c,d){var g=this.length()+3;if(this._willBeOverCapacity(g)){this._pushOne(l),this._pushOne(c),this._pushOne(d);return}var u=this._front+g-3;this._checkCapacity(g);var h=this._capacity-1;this[u+0&h]=l,this[u+1&h]=c,this[u+2&h]=d,this._length=g},a.prototype.shift=function(){var l=this._front,c=this[l];return this[l]=void 0,this._front=l+1&this._capacity-1,this._length--,c},a.prototype.length=function(){return this._length},a.prototype._checkCapacity=function(l){this._capacity<l&&this._resizeTo(this._capacity<<1)},a.prototype._resizeTo=function(l){var c=this._capacity;this._capacity=l;var d=this._front,g=this._length,u=d+g&c-1;s(this,0,this,c,u)},n.exports=a},{}],27:[function(r,n,o){n.exports=function(s,a,l,c){var d=r("./util"),g=function(h){return h.then(function(f){return u(f,h)})};function u(h,f){var v=l(h);if(v instanceof s)return g(v);if(h=d.asArray(h),h===null)return c("expecting an array or an iterable object but got "+d.classString(h));var m=new s(a);f!==void 0&&m._propagateFrom(f,3);for(var y=m._fulfill,I=m._reject,p=0,_=h.length;p<_;++p){var A=h[p];A===void 0&&!(p in h)||s.cast(A)._then(y,I,void 0,m,null)}return m}s.race=function(h){return u(h,void 0)},s.prototype.race=function(){return u(this,void 0)}}},{"./util":36}],28:[function(r,n,o){n.exports=function(s,a,l,c,d,g){var u=r("./util"),h=u.tryCatch;function f(p,_,A,b){this.constructor$(p);var P=s._getContext();this._fn=u.contextBind(P,_),A!==void 0&&(A=s.resolve(A),A._attachCancellationCallback(this)),this._initialValue=A,this._currentCancellable=null,b===d?this._eachValues=Array(this._length):b===0?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}u.inherits(f,a),f.prototype._gotAccum=function(p){this._eachValues!==void 0&&this._eachValues!==null&&p!==d&&this._eachValues.push(p)},f.prototype._eachComplete=function(p){return this._eachValues!==null&&this._eachValues.push(p),this._eachValues},f.prototype._init=function(){},f.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==void 0?this._eachValues:this._initialValue)},f.prototype.shouldCopyValues=function(){return!1},f.prototype._resolve=function(p){this._promise._resolveCallback(p),this._values=null},f.prototype._resultCancelled=function(p){if(p===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof s&&this._currentCancellable.cancel(),this._initialValue instanceof s&&this._initialValue.cancel())},f.prototype._iterate=function(p){this._values=p;var _,A,b=p.length;this._initialValue!==void 0?(_=this._initialValue,A=0):(_=s.resolve(p[0]),A=1),this._currentCancellable=_;for(var P=A;P<b;++P){var E=p[P];E instanceof s&&E.suppressUnhandledRejections()}if(!_.isRejected())for(;A<b;++A){var C={accum:null,value:p[A],index:A,length:b,array:this};_=_._then(y,void 0,void 0,C,void 0),A&127||_._setNoAsyncGuarantee()}this._eachValues!==void 0&&(_=_._then(this._eachComplete,void 0,void 0,this,void 0)),_._then(v,v,void 0,_,this)},s.prototype.reduce=function(p,_){return m(this,p,_,null)},s.reduce=function(p,_,A,b){return m(p,_,A,b)};function v(p,_){this.isFulfilled()?_._resolve(p):_._reject(p)}function m(p,_,A,b){if(typeof _!="function")return l("expecting a function but got "+u.classString(_));var P=new f(p,_,A,b);return P.promise()}function y(p){this.accum=p,this.array._gotAccum(p);var _=c(this.value,this.array._promise);return _ instanceof s?(this.array._currentCancellable=_,_._then(I,void 0,void 0,this,void 0)):I.call(this,_)}function I(p){var _=this.array,A=_._promise,b=h(_._fn);A._pushContext();var P;_._eachValues!==void 0?P=b.call(A._boundValue(),p,this.index,this.length):P=b.call(A._boundValue(),this.accum,p,this.index,this.length),P instanceof s&&(_._currentCancellable=P);var E=A._popContext();return g.checkForgottenReturns(P,E,_._eachValues!==void 0?"Promise.each":"Promise.reduce",A),P}}},{"./util":36}],29:[function(r,n,o){var s=r("./util"),a,l=function(){throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)},c=s.getNativePromise();if(s.isNode&&typeof MutationObserver>"u"){var d=W.setImmediate,g=process.nextTick;a=s.isRecentNode?function(h){d.call(W,h)}:function(h){g.call(process,h)}}else if(typeof c=="function"&&typeof c.resolve=="function"){var u=c.resolve();a=function(h){u.then(h)}}else typeof MutationObserver<"u"&&!(typeof window<"u"&&window.navigator&&(window.navigator.standalone||window.cordova))&&"classList"in document.documentElement?a=function(){var h=document.createElement("div"),f={attributes:!0},v=!1,m=document.createElement("div"),y=new MutationObserver(function(){h.classList.toggle("foo"),v=!1});y.observe(m,f);var I=function(){v||(v=!0,m.classList.toggle("foo"))};return function(_){var A=new MutationObserver(function(){A.disconnect(),_()});A.observe(h,f),I()}}():typeof setImmediate<"u"?a=function(h){setImmediate(h)}:typeof setTimeout<"u"?a=function(h){setTimeout(h,0)}:a=l;n.exports=a},{"./util":36}],30:[function(r,n,o){n.exports=function(s,a,l){var c=s.PromiseInspection,d=r("./util");function g(u){this.constructor$(u)}d.inherits(g,a),g.prototype._promiseResolved=function(u,h){this._values[u]=h;var f=++this._totalResolved;return f>=this._length?(this._resolve(this._values),!0):!1},g.prototype._promiseFulfilled=function(u,h){var f=new c;return f._bitField=33554432,f._settledValueField=u,this._promiseResolved(h,f)},g.prototype._promiseRejected=function(u,h){var f=new c;return f._bitField=16777216,f._settledValueField=u,this._promiseResolved(h,f)},s.settle=function(u){return l.deprecated(".settle()",".reflect()"),new g(u).promise()},s.allSettled=function(u){return new g(u).promise()},s.prototype.settle=function(){return s.settle(this)}}},{"./util":36}],31:[function(r,n,o){n.exports=function(s,a,l){var c=r("./util"),d=r("./errors").RangeError,g=r("./errors").AggregateError,u=c.isArray,h={};function f(m){this.constructor$(m),this._howMany=0,this._unwrap=!1,this._initialized=!1}c.inherits(f,a),f.prototype._init=function(){if(this._initialized){if(this._howMany===0){this._resolve([]);return}this._init$(void 0,-5);var m=u(this._values);!this._isResolved()&&m&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},f.prototype.init=function(){this._initialized=!0,this._init()},f.prototype.setUnwrap=function(){this._unwrap=!0},f.prototype.howMany=function(){return this._howMany},f.prototype.setHowMany=function(m){this._howMany=m},f.prototype._promiseFulfilled=function(m){return this._addFulfilled(m),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),this.howMany()===1&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},f.prototype._promiseRejected=function(m){return this._addRejected(m),this._checkOutcome()},f.prototype._promiseCancelled=function(){return this._values instanceof s||this._values==null?this._cancel():(this._addRejected(h),this._checkOutcome())},f.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var m=new g,y=this.length();y<this._values.length;++y)this._values[y]!==h&&m.push(this._values[y]);return m.length>0?this._reject(m):this._cancel(),!0}return!1},f.prototype._fulfilled=function(){return this._totalResolved},f.prototype._rejected=function(){return this._values.length-this.length()},f.prototype._addRejected=function(m){this._values.push(m)},f.prototype._addFulfilled=function(m){this._values[this._totalResolved++]=m},f.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},f.prototype._getRangeError=function(m){var y="Input array must contain at least "+this._howMany+" items but contains only "+m+" items";return new d(y)},f.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function v(m,y){if((y|0)!==y||y<0)return l(`expecting a positive integer

    See http://goo.gl/MqrFmX
`);var I=new f(m),p=I.promise();return I.setHowMany(y),I.init(),p}s.some=function(m,y){return v(m,y)},s.prototype.some=function(m){return v(this,m)},s._SomePromiseArray=f}},{"./errors":12,"./util":36}],32:[function(r,n,o){n.exports=function(s){function a(f){f!==void 0?(f=f._target(),this._bitField=f._bitField,this._settledValueField=f._isFateSealed()?f._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}a.prototype._settledValue=function(){return this._settledValueField};var l=a.prototype.value=function(){if(!this.isFulfilled())throw new TypeError(`cannot get fulfillment value of a non-fulfilled promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},c=a.prototype.error=a.prototype.reason=function(){if(!this.isRejected())throw new TypeError(`cannot get rejection reason of a non-rejected promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},d=a.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0},g=a.prototype.isRejected=function(){return(this._bitField&16777216)!==0},u=a.prototype.isPending=function(){return(this._bitField&50397184)===0},h=a.prototype.isResolved=function(){return(this._bitField&50331648)!==0};a.prototype.isCancelled=function(){return(this._bitField&8454144)!==0},s.prototype.__isCancelled=function(){return(this._bitField&65536)===65536},s.prototype._isCancelled=function(){return this._target().__isCancelled()},s.prototype.isCancelled=function(){return(this._target()._bitField&8454144)!==0},s.prototype.isPending=function(){return u.call(this._target())},s.prototype.isRejected=function(){return g.call(this._target())},s.prototype.isFulfilled=function(){return d.call(this._target())},s.prototype.isResolved=function(){return h.call(this._target())},s.prototype.value=function(){return l.call(this._target())},s.prototype.reason=function(){var f=this._target();return f._unsetRejectionIsUnhandled(),c.call(f)},s.prototype._value=function(){return this._settledValue()},s.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},s.PromiseInspection=a}},{}],33:[function(r,n,o){n.exports=function(s,a){var l=r("./util"),c=l.errorObj,d=l.isObject;function g(y,I){if(d(y)){if(y instanceof s)return y;var p=h(y);if(p===c){I&&I._pushContext();var _=s.reject(p.e);return I&&I._popContext(),_}else if(typeof p=="function"){if(v(y)){var _=new s(a);return y._then(_._fulfill,_._reject,void 0,_,null),_}return m(y,p,I)}}return y}function u(y){return y.then}function h(y){try{return u(y)}catch(I){return c.e=I,c}}var f={}.hasOwnProperty;function v(y){try{return f.call(y,"_promise0")}catch{return!1}}function m(y,I,p){var _=new s(a),A=_;p&&p._pushContext(),_._captureStackTrace(),p&&p._popContext();var b=!0,P=l.tryCatch(I).call(y,E,C);b=!1,_&&P===c&&(_._rejectCallback(P.e,!0,!0),_=null);function E(T){_&&(_._resolveCallback(T),_=null)}function C(T){_&&(_._rejectCallback(T,b,!0),_=null)}return A}return g}},{"./util":36}],34:[function(r,n,o){n.exports=function(s,a,l){var c=r("./util"),d=s.TimeoutError;function g(y){this.handle=y}g.prototype._resultCancelled=function(){clearTimeout(this.handle)};var u=function(y){return h(+this).thenReturn(y)},h=s.delay=function(y,I){var p,_;return I!==void 0?(p=s.resolve(I)._then(u,null,null,y,void 0),l.cancellation()&&I instanceof s&&p._setOnCancel(I)):(p=new s(a),_=setTimeout(function(){p._fulfill()},+y),l.cancellation()&&p._setOnCancel(new g(_)),p._captureStackTrace()),p._setAsyncGuaranteed(),p};s.prototype.delay=function(y){return h(y,this)};var f=function(y,I,p){var _;typeof I!="string"?I instanceof Error?_=I:_=new d("operation timed out"):_=new d(I),c.markAsOriginatingFromRejection(_),y._attachExtraTrace(_),y._reject(_),p?.cancel()};function v(y){return clearTimeout(this.handle),y}function m(y){throw clearTimeout(this.handle),y}s.prototype.timeout=function(y,I){y=+y;var p,_,A=new g(setTimeout(function(){p.isPending()&&f(p,I,_)},y));return l.cancellation()?(_=this.then(),p=_._then(v,m,void 0,A,void 0),p._setOnCancel(A)):p=this._then(v,m,void 0,A,void 0),p}}},{"./util":36}],35:[function(r,n,o){n.exports=function(s,a,l,c,d,g){var u=r("./util"),h=r("./errors").TypeError,f=r("./util").inherits,v=u.errorObj,m=u.tryCatch,y={};function I(C){setTimeout(function(){throw C},0)}function p(C){var T=l(C);return T!==C&&typeof C._isDisposable=="function"&&typeof C._getDisposer=="function"&&C._isDisposable()&&T._setDisposable(C._getDisposer()),T}function _(C,T){var F=0,Z=C.length,O=new s(d);function H(){if(F>=Z)return O._fulfill();var X=p(C[F++]);if(X instanceof s&&X._isDisposable()){try{X=l(X._getDisposer().tryDispose(T),C.promise)}catch(U){return I(U)}if(X instanceof s)return X._then(H,I,null,null,null)}H()}return H(),O}function A(C,T,F){this._data=C,this._promise=T,this._context=F}A.prototype.data=function(){return this._data},A.prototype.promise=function(){return this._promise},A.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():y},A.prototype.tryDispose=function(C){var T=this.resource(),F=this._context;F!==void 0&&F._pushContext();var Z=T!==y?this.doDispose(T,C):null;return F!==void 0&&F._popContext(),this._promise._unsetDisposable(),this._data=null,Z},A.isDisposer=function(C){return C!=null&&typeof C.resource=="function"&&typeof C.tryDispose=="function"};function b(C,T,F){this.constructor$(C,T,F)}f(b,A),b.prototype.doDispose=function(C,T){var F=this.data();return F.call(C,C,T)};function P(C){return A.isDisposer(C)?(this.resources[this.index]._setDisposable(C),C.promise()):C}function E(C){this.length=C,this.promise=null,this[C-1]=null}E.prototype._resultCancelled=function(){for(var C=this.length,T=0;T<C;++T){var F=this[T];F instanceof s&&F.cancel()}},s.using=function(){var C=arguments.length;if(C<2)return a("you must pass at least 2 arguments to Promise.using");var T=arguments[C-1];if(typeof T!="function")return a("expecting a function but got "+u.classString(T));var F,Z=!0;C===2&&Array.isArray(arguments[0])?(F=arguments[0],C=F.length,Z=!1):(F=arguments,C--);for(var O=new E(C),H=0;H<C;++H){var X=F[H];if(A.isDisposer(X)){var U=X;X=X.promise(),X._setDisposable(U)}else{var k=l(X);k instanceof s&&(X=k._then(P,null,null,{resources:O,index:H},void 0))}O[H]=X}for(var ot=new Array(O.length),H=0;H<ot.length;++H)ot[H]=s.resolve(O[H]).reflect();var lt=s.all(ot).then(function(Q){for(var rt=0;rt<Q.length;++rt){var at=Q[rt];if(at.isRejected())return v.e=at.error(),v;if(!at.isFulfilled()){lt.cancel();return}Q[rt]=at.value()}et._pushContext(),T=m(T);var N=Z?T.apply(void 0,Q):T(Q),pt=et._popContext();return g.checkForgottenReturns(N,pt,"Promise.using",et),N}),et=lt.lastly(function(){var Q=new s.PromiseInspection(lt);return _(O,Q)});return O.promise=et,et._setOnCancel(O),et},s.prototype._setDisposable=function(C){this._bitField=this._bitField|131072,this._disposer=C},s.prototype._isDisposable=function(){return(this._bitField&131072)>0},s.prototype._getDisposer=function(){return this._disposer},s.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},s.prototype.disposer=function(C){if(typeof C=="function")return new b(C,this,c());throw new h}}},{"./errors":12,"./util":36}],36:[function(r,n,o){var s=r("./es5"),a=typeof navigator>"u",l={e:{}},c,d=typeof self<"u"?self:typeof window<"u"?window:typeof W<"u"?W:this!==void 0?this:null;function g(){try{var M=c;return c=null,M.apply(this,arguments)}catch(L){return l.e=L,l}}function u(M){return c=M,g}var h=function(M,L){var z={}.hasOwnProperty;function $(){this.constructor=M,this.constructor$=L;for(var K in L.prototype)z.call(L.prototype,K)&&K.charAt(K.length-1)!=="$"&&(this[K+"$"]=L.prototype[K])}return $.prototype=L.prototype,M.prototype=new $,M.prototype};function f(M){return M==null||M===!0||M===!1||typeof M=="string"||typeof M=="number"}function v(M){return typeof M=="function"||typeof M=="object"&&M!==null}function m(M){return f(M)?new Error(Z(M)):M}function y(M,L){var z=M.length,$=new Array(z+1),K;for(K=0;K<z;++K)$[K]=M[K];return $[K]=L,$}function I(M,L,z){if(s.isES5){var $=Object.getOwnPropertyDescriptor(M,L);if($!=null)return $.get==null&&$.set==null?$.value:z}else return{}.hasOwnProperty.call(M,L)?M[L]:void 0}function p(M,L,z){if(f(M))return M;var $={value:z,configurable:!0,enumerable:!1,writable:!0};return s.defineProperty(M,L,$),M}function _(M){throw M}var A=function(){var M=[Array.prototype,Object.prototype,Function.prototype],L=function(K){for(var st=0;st<M.length;++st)if(M[st]===K)return!0;return!1};if(s.isES5){var z=Object.getOwnPropertyNames;return function(K){for(var st=[],gt=Object.create(null);K!=null&&!L(K);){var xt;try{xt=z(K)}catch{return st}for(var wt=0;wt<xt.length;++wt){var Dt=xt[wt];if(!gt[Dt]){gt[Dt]=!0;var $t=Object.getOwnPropertyDescriptor(K,Dt);$t!=null&&$t.get==null&&$t.set==null&&st.push(Dt)}}K=s.getPrototypeOf(K)}return st}}else{var $={}.hasOwnProperty;return function(K){if(L(K))return[];var st=[];t:for(var gt in K)if($.call(K,gt))st.push(gt);else{for(var xt=0;xt<M.length;++xt)if($.call(M[xt],gt))continue t;st.push(gt)}return st}}}(),b=/this\s*\.\s*\S+\s*=/;function P(M){try{if(typeof M=="function"){var L=s.names(M.prototype),z=s.isES5&&L.length>1,$=L.length>0&&!(L.length===1&&L[0]==="constructor"),K=b.test(M+"")&&s.names(M).length>0;if(z||$||K)return!0}return!1}catch{return!1}}function E(M){function L(){}L.prototype=M;var z=new L;function $(){return typeof z.foo}return $(),$(),M}var C=/^[a-z$_][a-z$_0-9]*$/i;function T(M){return C.test(M)}function F(M,L,z){for(var $=new Array(M),K=0;K<M;++K)$[K]=L+K+z;return $}function Z(M){try{return M+""}catch{return"[no string representation]"}}function O(M){return M instanceof Error||M!==null&&typeof M=="object"&&typeof M.message=="string"&&typeof M.name=="string"}function H(M){try{p(M,"isOperational",!0)}catch{}}function X(M){return M==null?!1:M instanceof Error.__BluebirdErrorTypes__.OperationalError||M.isOperational===!0}function U(M){return O(M)&&s.propertyIsWritable(M,"stack")}var k=function(){return"stack"in new Error?function(M){return U(M)?M:new Error(Z(M))}:function(M){if(U(M))return M;try{throw new Error(Z(M))}catch(L){return L}}}();function ot(M){return{}.toString.call(M)}function lt(M,L,z){for(var $=s.names(M),K=0;K<$.length;++K){var st=$[K];if(z(st))try{s.defineProperty(L,st,s.getDescriptor(M,st))}catch{}}}var et=function(M){return s.isArray(M)?M:null};if(typeof Symbol<"u"&&Symbol.iterator){var Q=typeof Array.from=="function"?function(M){return Array.from(M)}:function(M){for(var L=[],z=M[Symbol.iterator](),$;!($=z.next()).done;)L.push($.value);return L};et=function(M){return s.isArray(M)?M:M!=null&&typeof M[Symbol.iterator]=="function"?Q(M):null}}var rt=typeof process<"u"&&ot(process).toLowerCase()==="[object process]",at=typeof process<"u"&&typeof e<"u";function N(M){return at?e[M]:void 0}function pt(){if(typeof Promise=="function")try{var M=new Promise(function(){});if(ot(M)==="[object Promise]")return Promise}catch{}}var dt;function D(M,L){if(M===null||typeof L!="function"||L===dt)return L;M.domain!==null&&(L=M.domain.bind(L));var z=M.async;if(z!==null){var $=L;L=function(){var K=new Array(2).concat([].slice.call(arguments));return K[0]=$,K[1]=this,z.runInAsyncScope.apply(z,K)}}return L}var x={setReflectHandler:function(M){dt=M},isClass:P,isIdentifier:T,inheritedDataKeys:A,getDataPropertyOrDefault:I,thrower:_,isArray:s.isArray,asArray:et,notEnumerableProp:p,isPrimitive:f,isObject:v,isError:O,canEvaluate:a,errorObj:l,tryCatch:u,inherits:h,withAppended:y,maybeWrapAsError:m,toFastProperties:E,filledRange:F,toString:Z,canAttachTrace:U,ensureErrorObject:k,originatesFromRejection:X,markAsOriginatingFromRejection:H,classString:ot,copyDescriptors:lt,isNode:rt,hasEnvVariables:at,env:N,global:d,getNativePromise:pt,contextBind:D};x.isRecentNode=x.isNode&&function(){var M;return process.versions&&process.versions.node?M=process.versions.node.split(".").map(Number):process.version&&(M=process.version.split(".").map(Number)),M[0]===0&&M[1]>10||M[0]>0}(),x.nodeSupportsAsyncResource=x.isNode&&function(){var M=!1;try{var L=r("async_hooks").AsyncResource;M=typeof L.prototype.runInAsyncScope=="function"}catch{M=!1}return M}(),x.isNode&&x.toFastProperties(process);try{throw new Error}catch(M){x.lastLineError=M}n.exports=x},{"./es5":13,async_hooks:void 0}]},{},[4])(4)}),typeof window<"u"&&window!==null?window.P=window.Promise:typeof self<"u"&&self!==null&&(self.P=self.Promise)})(ey);var C1=ey.exports,oa={},sa={};Object.defineProperty(sa,"__esModule",{value:!0});sa.animationXml=void 0;sa.animationXml="PGFuaW1hdGlvblNldD4KCiAgICA8YWN0aW9uIGlkPSJNb3ZlIj4KCiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJiZCI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMiIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIzIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgPC9wYXJ0PgoKICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImJkcyI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMiIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIzIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgPC9wYXJ0PgoKICAgICAgICAgPHBhcnQgc2V0LXR5cGU9InNzIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIyIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjMiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICA8L3BhcnQ+CgogICAgICAgICA8cGFydCBzZXQtdHlwZT0ibGciPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMyIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgIDwvcGFydD4KCiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJzaCI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMiIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIzIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgPC9wYXJ0PgoKICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImxoIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIyIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjMiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICA8L3BhcnQ+CgogICAgICAgICA8cGFydCBzZXQtdHlwZT0ibGhzIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIyIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjMiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICA8L3BhcnQ+CgogICAgICAgICA8cGFydCBzZXQtdHlwZT0ibHMiPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMyIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgIDwvcGFydD4KCgkJIDxwYXJ0IHNldC10eXBlPSJsYyI+CgkJCSA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KCQkJIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgoJCQkgPGZyYW1lIG51bWJlcj0iMiIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CgkJCSA8ZnJhbWUgbnVtYmVyPSIzIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KCQkgPC9wYXJ0PgoKICAgICAgICAgPHBhcnQgc2V0LXR5cGU9InJoIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIyIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjMiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICA8L3BhcnQ+CgogICAgICAgICA8cGFydCBzZXQtdHlwZT0icmhzIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIyIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjMiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICA8L3BhcnQ+CgkJCgkJPHBhcnQgc2V0LXR5cGU9InJzIj4KCQkJPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CgkJCTxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgoJCQk8ZnJhbWUgbnVtYmVyPSIyIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KCQkJPGZyYW1lIG51bWJlcj0iMyIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CgkJPC9wYXJ0PgoKCQk8cGFydCBzZXQtdHlwZT0icmMiPgoJCQk8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KCQkJPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CgkJCTxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgoJCQk8ZnJhbWUgbnVtYmVyPSIzIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KCQk8L3BhcnQ+CgogICAgICAgIDxwYXJ0IHNldC10eXBlPSJjaCI+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3bGsiLz4KICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMiIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIi8+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjMiIGFzc2V0cGFydGRlZmluaXRpb249IndsayIvPgogICAgICAgIDwvcGFydD4KCiAgICA8L2FjdGlvbj4KCiAgICA8YWN0aW9uIGlkPSJXYXZlIj4KCiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJsaCI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3YXYiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249IndhdiIvPgogICAgICAgICA8L3BhcnQ+CgogICAgICAgICA8cGFydCBzZXQtdHlwZT0ibGhzIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndhdiIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2F2Ii8+CiAgICAgICAgIDwvcGFydD4KCiAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImxzIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndhdiIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2F2Ii8+CiAgICAgICAgIDwvcGFydD4KCgkJPHBhcnQgc2V0LXR5cGU9ImxjIj4KCQkJIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndhdiIvPgoJCQkgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2F2Ii8+CgkJIDwvcGFydD4KCiAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImNoIj4KICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2F2Ii8+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249IndhdiIvPgogICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIyIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3YXYiLz4KICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMyIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2F2Ii8+CiAgICAgICAgPC9wYXJ0PgoKICAgIDwvYWN0aW9uPgoKICAgIDxhY3Rpb24gaWQ9IlRhbGsiPgoKICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImhkIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249InNwayIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3BrIi8+CiAgICAgICAgIDwvcGFydD4KCiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJmYyI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzcGsiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InNwayIvPgogICAgICAgICA8L3BhcnQ+CgogICAgICAgICA8cGFydCBzZXQtdHlwZT0iZmEiPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3BrIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzcGsiLz4KICAgICAgICAgPC9wYXJ0PgoKICAgIDwvYWN0aW9uPgoKCiAgICA8YWN0aW9uIGlkPSJTd2ltIj4KCiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJiZHMiPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dtIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd20iLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249InN3bSIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMyIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dtIi8+CiAgICAgICAgIDwvcGFydD4KCiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJzcyI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd20iLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3bSIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMiIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dtIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIzIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd20iLz4KICAgICAgICAgPC9wYXJ0PgoKICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImxocyI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd20iLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3bSIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMiIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dtIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIzIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd20iLz4KICAgICAgICAgPC9wYXJ0PgoKICAgICAgICAgPHBhcnQgc2V0LXR5cGU9InJocyI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd20iLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3bSIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMiIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dtIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIzIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd20iLz4KICAgICAgICAgPC9wYXJ0PgoKICAgIDwvYWN0aW9uPgoKCiAgICA8YWN0aW9uIGlkPSJGbG9hdCI+CgogICAgICAgICA8cGFydCBzZXQtdHlwZT0iYmRzIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjMiIGFzc2V0cGFydGRlZmluaXRpb249InN3cyIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMyIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dzIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIyIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3cyIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dzIi8+CiAgICAgICAgIDwvcGFydD4KCiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJzcyI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiLz4KICAgICAgICAgPC9wYXJ0PgoKICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImxocyI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249InN3cyIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dzIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249InN3cyIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMyIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dzIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIzIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249InN3cyIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dzIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiLz4KICAgICAgICAgPC9wYXJ0PgoKICAgICAgICAgPHBhcnQgc2V0LXR5cGU9InJocyI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249InN3cyIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dzIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249InN3cyIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMyIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dzIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIzIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249InN3cyIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dzIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiLz4KICAgICAgICAgPC9wYXJ0PgoKICAgIDwvYWN0aW9uPgoKICAgIDxhY3Rpb24gaWQ9IlNpZ24iPgogICAgICAgIDxwYXJ0IHNldC10eXBlPSJsaCI+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249InNpZyIvPgogICAgICAgIDwvcGFydD4KICAgICAgICA8cGFydCBzZXQtdHlwZT0ibGkiPgogICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzaWciLz4KICAgICAgICA8L3BhcnQ+CiAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImxzIj4KICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2F2Ii8+CiAgICAgICAgPC9wYXJ0PgogICAgICAgIDxwYXJ0IHNldC10eXBlPSJsYyI+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndhdiIvPgogICAgICAgIDwvcGFydD4KICAgIDwvYWN0aW9uPgoKICAgIDxhY3Rpb24gaWQ9IlJlc3BlY3QiPgogICAgICAgIDxwYXJ0IHNldC10eXBlPSJsaCI+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249InJlc3BlY3QiIHJlcGVhdHM9IjE1Ii8+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InJlc3BlY3QiIHJlcGVhdHM9IjE1Ii8+CiAgICAgICAgPC9wYXJ0PgogICAgICAgIDxwYXJ0IHNldC10eXBlPSJscyI+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IndhdiIgcmVwZWF0cz0iMTUiLz4KICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2F2IiByZXBlYXRzPSIxNSIvPgogICAgICAgIDwvcGFydD4KICAgICAgICA8cGFydCBzZXQtdHlwZT0ibGMiPgogICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJ3YXYiIHJlcGVhdHM9IjE1Ii8+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249IndhdiIgcmVwZWF0cz0iMTUiLz4KICAgICAgICA8L3BhcnQ+CiAgICA8L2FjdGlvbj4KCgk8YWN0aW9uIGlkPSJCbG93Ij4KCiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJyaCI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJibHciIHJlcGVhdHM9IjEwIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJibHciIHJlcGVhdHM9IjEwIi8+CiAgICAgICAgIDwvcGFydD4KCiAgICAgICAgPHBhcnQgc2V0LXR5cGU9InJzIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249ImRyayIvPgogICAgICAgIDwvcGFydD4KCgkJPHBhcnQgc2V0LXR5cGU9InJjIj4KCQkJIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249ImRyayIvPgoJCTwvcGFydD4KCgkJPHBhcnQgc2V0LXR5cGU9InJpIj4KCQkJIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IiIvPgoJCTwvcGFydD4KCgkJPHBhcnQgc2V0LXR5cGU9ImV5Ij4KCQkJPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3RkIiByZXBlYXRzPSIxMCIvPgoJCQk8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJleWIiIHJlcGVhdHM9IjEwIi8+CgkJPC9wYXJ0PgoKCQk8cGFydCBzZXQtdHlwZT0iZmMiPgoJCQk8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzdGQiIHJlcGVhdHM9IjEwIi8+CgkJCTxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249ImJsdyIgcmVwZWF0cz0iMTAiLz4KCQk8L3BhcnQ+CiAgICA8L2FjdGlvbj4KCiAgICA8YWN0aW9uIGlkPSJMYXVnaCI+CgogICAgICAgICA8cGFydCBzZXQtdHlwZT0icmgiPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0iYmx3Ii8+CiAgICAgICAgIDwvcGFydD4KCiAgICAgICAgPHBhcnQgc2V0LXR5cGU9InJzIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249ImRyayIvPgogICAgICAgIDwvcGFydD4KCiAgICAgICAgPHBhcnQgc2V0LXR5cGU9InJjIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249ImRyayIvPgogICAgICAgIDwvcGFydD4KCiAgICAgICAgPHBhcnQgc2V0LXR5cGU9InJpIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249IiIvPgogICAgICAgIDwvcGFydD4KCiAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImV5Ij4KICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3RkIiByZXBlYXRzPSIyIi8+CiAgICAgICAgPC9wYXJ0PgoKICAgICAgICA8cGFydCBzZXQtdHlwZT0iZmMiPgogICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzbWwiLz4KICAgICAgICA8L3BhcnQ+CgogICAgICAgIDxvZmZzZXRzPgogICAgICAgICAgICA8ZnJhbWUgaWQ9IjAiPgogICAgICAgICAgICAgICAgPGRpcmVjdGlvbnM+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iMCI+PGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iMCIgZHk9IjEiLz48L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSIxIj48Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMSIvPjwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjIiPjxib2R5cGFydCBpZD0iaGVhZCIgZHg9IjAiIGR5PSIxIi8+PC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iMyI+PGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iMCIgZHk9IjEiLz48L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI0Ij48Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMSIvPjwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjUiPjxib2R5cGFydCBpZD0iaGVhZCIgZHg9IjAiIGR5PSIxIi8+PC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iNiI+PGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iMCIgZHk9IjEiLz48L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI3Ij48Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMSIvPjwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgPC9kaXJlY3Rpb25zPgogICAgICAgICAgICA8L2ZyYW1lPgoKICAgICAgICAgICAgPGZyYW1lIGlkPSIxIj4KICAgICAgICAgICAgICAgIDxkaXJlY3Rpb25zPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjAiPjxib2R5cGFydCBpZD0iaGVhZCIgZHg9IjAiIGR5PSIwIi8+PC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iMSI+PGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iMCIgZHk9IjAiLz48L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSIyIj48Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMCIvPjwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjMiPjxib2R5cGFydCBpZD0iaGVhZCIgZHg9IjAiIGR5PSIwIi8+PC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iNCI+PGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iMCIgZHk9IjAiLz48L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI1Ij48Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMCIvPjwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjYiPjxib2R5cGFydCBpZD0iaGVhZCIgZHg9IjAiIGR5PSIwIi8+PC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iNyI+PGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iMCIgZHk9IjAiLz48L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9ucz4KICAgICAgICAgICAgPC9mcmFtZT4KCiAgICAgICAgPC9vZmZzZXRzPgogICAgPC9hY3Rpb24+CgkKCQogICAgPGFjdGlvbiBpZD0iU25vd1dhclJ1biI+CgogICAgICAgICA8cGFydCBzZXQtdHlwZT0iY2giPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMyIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dydW4iLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249InN3cnVuIi8+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3J1biIvPgogICAgICAgICAgICAgPGZyYW1lIG51bWJlcj0iMCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3dydW4iLz4KICAgICAgICAgPC9wYXJ0PgoKICAgIDwvYWN0aW9uPgoKICAgIDxhY3Rpb24gaWQ9IlNub3dXYXJEaWVGcm9udCI+CgogICAgICAgIDxwYXJ0IHNldC10eXBlPSJjaCI+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249InN3ZGllIi8+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249InN3ZGllIi8+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3ZGllIi8+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3ZGllIiByZXBlYXRzPSIxMDAiLz4KICAgICAgICAgPC9wYXJ0PgoKICAgICAgICA8b2Zmc2V0cz4KICAgICAgICAgICAgPGZyYW1lIGlkPSIwIj4KICAgICAgICAgICAgICAgIDxkaXJlY3Rpb25zPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjAiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIxMCIgZHk9IjQiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSIyIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iMTAiIGR5PSI1Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iNCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI2Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwIiBkeT0iNCIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgPC9kaXJlY3Rpb25zPgogICAgICAgICAgICA8L2ZyYW1lPgogICAgICAgICAgICA8ZnJhbWUgaWQ9IjEiPgogICAgICAgICAgICAgICAgPGRpcmVjdGlvbnM+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iMCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9IjEwIiBkeT0iNCIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjIiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIxMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwIiBkeT0iNSIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjYiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSItMTAiIGR5PSI0Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbnM+CiAgICAgICAgICAgIDwvZnJhbWU+CiAgICAgICAgICAgIDxmcmFtZSBpZD0iMiI+CiAgICAgICAgICAgICAgICA8ZGlyZWN0aW9ucz4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSIwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSIyIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI2Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9ucz4KICAgICAgICAgICAgPC9mcmFtZT4KICAgICAgICAgICAgPGZyYW1lIGlkPSIzIiByZXBlYXRzPSIxMDAiPgogICAgICAgICAgICAgICAgPGRpcmVjdGlvbnM+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iMCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMDAiIGR5PSI1Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iMiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMDAiIGR5PSI1Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iNCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMDAiIGR5PSI1Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iNiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMDAiIGR5PSI1Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbnM+CiAgICAgICAgICAgIDwvZnJhbWU+CiAgICAgICAgPC9vZmZzZXRzPgoKCiAgICA8L2FjdGlvbj4KCiAgICA8YWN0aW9uIGlkPSJTbm93V2FyRGllQmFjayI+CgogICAgICAgIDxwYXJ0IHNldC10eXBlPSJjaCI+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249InN3ZGllIi8+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjIiIGFzc2V0cGFydGRlZmluaXRpb249InN3ZGllIi8+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjMiIGFzc2V0cGFydGRlZmluaXRpb249InN3ZGllIi8+CiAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjMiIGFzc2V0cGFydGRlZmluaXRpb249InN3ZGllIiByZXBlYXRzPSIxMDAiLz4KICAgICAgICAgPC9wYXJ0PgoKICAgICAgICA8b2Zmc2V0cz4KICAgICAgICAgICAgPGZyYW1lIGlkPSIwIj4KICAgICAgICAgICAgICAgIDxkaXJlY3Rpb25zPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjAiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSItMTAiIGR5PSI0Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iMiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iMTAiIGR5PSI1Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iNiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9IjEwIiBkeT0iNCIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgPC9kaXJlY3Rpb25zPgogICAgICAgICAgICA8L2ZyYW1lPgogICAgICAgICAgICA8ZnJhbWUgaWQ9IjEiPgogICAgICAgICAgICAgICAgPGRpcmVjdGlvbnM+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iMCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMCIgZHk9IjQiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSIyIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwIiBkeT0iNSIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjQiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIxMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI2Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iMTAiIGR5PSI0Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbnM+CiAgICAgICAgICAgIDwvZnJhbWU+CiAgICAgICAgICAgIDxmcmFtZSBpZD0iMiI+CiAgICAgICAgICAgICAgICA8ZGlyZWN0aW9ucz4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSIwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSIyIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgICAgICA8ZGlyZWN0aW9uIGlkPSI2Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJoZWFkIiBkeD0iLTEwMCIgZHk9IjUiLz4KICAgICAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbj4KICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9ucz4KICAgICAgICAgICAgPC9mcmFtZT4KICAgICAgICAgICAgPGZyYW1lIGlkPSIzIiByZXBlYXRzPSIxMDAiPgogICAgICAgICAgICAgICAgPGRpcmVjdGlvbnM+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iMCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMDAiIGR5PSI1Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iMiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMDAiIGR5PSI1Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iNCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMDAiIGR5PSI1Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICAgICAgPGRpcmVjdGlvbiBpZD0iNiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgZHg9Ii0xMDAiIGR5PSI1Ii8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXJlY3Rpb24+CiAgICAgICAgICAgICAgICA8L2RpcmVjdGlvbnM+CiAgICAgICAgICAgIDwvZnJhbWU+CiAgICAgICAgPC9vZmZzZXRzPgoKICAgIDwvYWN0aW9uPgoKICAgIDxhY3Rpb24gaWQ9IlNub3dXYXJQaWNrIj4KCiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJjaCI+CiAgICAgICAgICAgICA8ZnJhbWUgbnVtYmVyPSIwIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3BpY2siLz4KICAgICAgICAgPC9wYXJ0PgoKICAgICAgICA8b2Zmc2V0cz4KICAgICAgICAgICAgPGZyYW1lIGlkPSIwIj4KICAgICAgICAgICAgICAgIDxkaXJlY3Rpb25zPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjAiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMyIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjEiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMyIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjIiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMyIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjMiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMyIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjQiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMyIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjUiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMyIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjYiPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMyIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgICAgIDxkaXJlY3Rpb24gaWQ9IjciPgogICAgICAgICAgICAgICAgICAgICAgICA8Ym9keXBhcnQgaWQ9ImhlYWQiIGR4PSIwIiBkeT0iMyIvPgogICAgICAgICAgICAgICAgICAgIDwvZGlyZWN0aW9uPgogICAgICAgICAgICAgICAgPC9kaXJlY3Rpb25zPgogICAgICAgICAgICA8L2ZyYW1lPgogICAgICAgIDwvb2Zmc2V0cz4KCiAgICA8L2FjdGlvbj4KCiAgICA8YWN0aW9uIGlkPSJTbm93V2FyVGhyb3ciPgoKICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImNoIj4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249InN3dGhyb3ciLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249InN3dGhyb3ciLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3dGhyb3ciLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3dGhyb3ciLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3dGhyb3ciLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3dGhyb3ciLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3dGhyb3ciLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjEiIGFzc2V0cGFydGRlZmluaXRpb249InN3dGhyb3ciLz4KICAgICAgICAgICAgIDxmcmFtZSBudW1iZXI9IjAiIGFzc2V0cGFydGRlZmluaXRpb249InN3dGhyb3ciIHJlcGVhdHM9IjEwMCIvPgogICAgICAgICA8L3BhcnQ+CgogICAgPC9hY3Rpb24+CjwvYW5pbWF0aW9uU2V0Pg==";Object.defineProperty(oa,"__esModule",{value:!0});oa.AvatarAnimationData=void 0;const A1=sa;class is{constructor(t){this._animationFrames=new Map,this._animationFramesCount=new Map,new DOMParser().parseFromString(t,"text/xml").querySelectorAll("action").forEach(r=>{const n=r.getAttribute("id");if(n==null)return;r.querySelectorAll("part").forEach(l=>{const c=l.getAttribute("set-type");if(c==null)return;const d=[];l.querySelectorAll("frame").forEach(g=>{const u=this._getAnimationFrameFromElement(g);d.push(u)}),this._animationFrames.set(`${n}_${c}`,d)});const o=r.querySelectorAll("part:first-child frame").length,s=r.querySelectorAll("offsets frame").length,a=Math.max(o,s);this._animationFramesCount.set(n,a),r.querySelectorAll("offsets frame").forEach(l=>{l.getAttribute("id")!=null&&l.querySelectorAll("directions direction").forEach(d=>{d.getAttribute("id")!=null&&d.querySelectorAll("bodypart").forEach(u=>{u.getAttribute("id")!=null})})})})}static async fromUrl(t){const r=await(await fetch(t)).text();return new is(r)}static default(){return new is(atob(A1.animationXml))}getAnimationFrame(t,e,r){const n=this._animationFrames.get(`${t}_${e}`);if(n==null)return;const o=n[r];if(o!=null)return o}getAnimationFrames(t,e){var r;const n=`${t}_${e}`;return(r=this._animationFrames.get(n))!==null&&r!==void 0?r:[]}getAnimationFramesCount(t){var e;return(e=this._animationFramesCount.get(t))!==null&&e!==void 0?e:0}getAnimationOffset(t,e,r,n){}_getAnimationOffsetFromElement(t){if(t==null)return{x:0,y:0};const e=Number(t.getAttribute("dx")),r=Number(t.getAttribute("dy"));return isNaN(e)||isNaN(r)?{x:0,y:0}:{x:e,y:r}}_getAnimationFrameFromElement(t){const e=Number(t.getAttribute("number"));if(isNaN(e))throw new Error("number was NaN");const r=t.getAttribute("repeats");let n=2;r!=null&&(n=Number(r));const o=t.getAttribute("assetpartdefinition");if(o==null)throw new Error("assetpartdefinition was null");return{number:e,assetpartdefinition:o,repeats:n}}}oa.AvatarAnimationData=is;var aa={},Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.AvatarData=void 0;class b1{constructor(t){this.document=new DOMParser().parseFromString(t,"text/xml")}querySelectorAll(t){return Array.from(this.document.querySelectorAll(t))}querySelector(t){return this.document.querySelector(t)}}Ur.AvatarData=b1;Object.defineProperty(aa,"__esModule",{value:!0});aa.FigureMapData=void 0;const w1=Ur;function Wg(i,t){return`${i}_${t}`}class Fc extends w1.AvatarData{constructor(t){super(t),this._libraryForPartMap=new Map,this._allLibraries=[],this._cacheData()}static async fromUrl(t){const r=await(await fetch(t)).text();return new Fc(r)}getLibraryOfPart(t,e){const r=e==="hrb"?"hr":e;return this._libraryForPartMap.get(Wg(t,r))}getLibraries(){return this._allLibraries}_cacheData(){this.querySelectorAll("lib").forEach(e=>{const r=e.getAttribute("id");if(r==null)return;this._allLibraries.push(r),Array.from(e.querySelectorAll("part")).forEach(o=>{const s=o.getAttribute("id"),a=o.getAttribute("type");s!=null&&a!=null&&this._libraryForPartMap.set(Wg(s,a),r)})})}}aa.FigureMapData=Fc;var ua={},la={};Object.defineProperty(la,"__esModule",{value:!0});la.partsetsXml=void 0;la.partsetsXml="PHBhcnRTZXRzPgoKICAgIDxwYXJ0U2V0PgogICAgICAgICA8cGFydCBzZXQtdHlwZT0icmkiIGZsaXBwZWQtc2V0LXR5cGU9InJpIi8+CiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJyaCIgZmxpcHBlZC1zZXQtdHlwZT0ibGgiLz4KICAgICAgICAgPHBhcnQgc2V0LXR5cGU9InJocyIgZmxpcHBlZC1zZXQtdHlwZT0ibGhzIi8+CgkJIDxwYXJ0IHNldC10eXBlPSJycyIgc3dpbT0iMCIgZmxpcHBlZC1zZXQtdHlwZT0ibHMiLz4KCQkgPHBhcnQgc2V0LXR5cGU9InJjIiBzd2ltPSIwIiBmbGlwcGVkLXNldC10eXBlPSJsYyIvPgogICAgICAgICA8cGFydCBzZXQtdHlwZT0iYmQiLz4KICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImJkcyIvPgogICAgICAgICA8cGFydCBzZXQtdHlwZT0ic3MiLz4KICAgICAgICAgPHBhcnQgc2V0LXR5cGU9InNoIiBzd2ltPSIwIi8+CiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJsZyIgc3dpbT0iMCIvPgogICAgICAgICA8cGFydCBzZXQtdHlwZT0iY2giLz4KICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImNwIi8+CiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJjYyIvPgogICAgICAgICA8cGFydCBzZXQtdHlwZT0iaGQiLz4KICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImZjIi8+CiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJleSIvPgogICAgICAgICA8cGFydCBzZXQtdHlwZT0iaHIiLz4KICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImhyYiIgcmVtb3ZlLXNldC10eXBlPSJociIvPgogICAgICAgICA8cGFydCBzZXQtdHlwZT0ibGkiIGZsaXBwZWQtc2V0LXR5cGU9ImxpIi8+CiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJsaCIgZmxpcHBlZC1zZXQtdHlwZT0icmgiLz4KICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImxocyIgZmxpcHBlZC1zZXQtdHlwZT0icmhzIi8+CgkJIDxwYXJ0IHNldC10eXBlPSJscyIgc3dpbT0iMCIgZmxpcHBlZC1zZXQtdHlwZT0icnMiLz4KCQkgPHBhcnQgc2V0LXR5cGU9ImxjIiBzd2ltPSIwIiBmbGlwcGVkLXNldC10eXBlPSJyYyIvPgoJCSA8cGFydCBzZXQtdHlwZT0id2EiIHN3aW09IjAiLz4KICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImVhIi8+CiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJjYSIgc3dpbT0iMCIvPgogICAgICAgICA8cGFydCBzZXQtdHlwZT0iZmEiLz4KICAgICAgICAgPHBhcnQgc2V0LXR5cGU9ImhhIi8+CiAgICAgICAgIDxwYXJ0IHNldC10eXBlPSJoZSIvPgogICAgPC9wYXJ0U2V0PgoKCiAgICA8YWN0aXZlUGFydFNldCBpZD0iZmlndXJlIj4KICAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9InJoIi8+CiAgICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJyaHMiLz4KCQkgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9InJzIi8+CgkJIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJyYyIvPgogICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iYmQiLz4KICAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImJkcyIvPgogICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0ic3MiLz4KICAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9InNoIi8+CiAgICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJsZyIvPgogICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iY2giLz4KICAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImNwIi8+CiAgICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJjYyIvPgogICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0id2EiLz4KICAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImhkIi8+CiAgICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJmYyIvPgogICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iZXkiLz4KICAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImhyIi8+CiAgICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJocmIiLz4KICAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImxoIi8+CiAgICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJsaHMiLz4KCQkgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImxzIi8+CgkJIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJsYyIvPgogICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iZWEiLz4KICAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImNhIi8+CiAgICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJmYSIvPgogICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iaGEiLz4KICAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImhlIi8+CiAgICA8L2FjdGl2ZVBhcnRTZXQ+CgogICAgPGFjdGl2ZVBhcnRTZXQgaWQ9ImhlYWQiPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJoZCIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJmYyIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJleSIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJociIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJocmIiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iZWEiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iZmEiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iaGEiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iaGUiLz4KICAgIDwvYWN0aXZlUGFydFNldD4KCiAgICA8YWN0aXZlUGFydFNldCBpZD0ic3BlYWsiPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJoZCIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJociIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJocmIiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iZmMiLz4KCQk8YWN0aXZlUGFydCBzZXQtdHlwZT0iZmEiLz4KCQk8YWN0aXZlUGFydCBzZXQtdHlwZT0iaGEiLz4JCiAgICA8L2FjdGl2ZVBhcnRTZXQ+CgogICAgPGFjdGl2ZVBhcnRTZXQgaWQ9Imdlc3R1cmUiPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJleSIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJmYyIvPgogICAgPC9hY3RpdmVQYXJ0U2V0PgoKICAgIDxhY3RpdmVQYXJ0U2V0IGlkPSJleWUiPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJleSIvPgogICAgPC9hY3RpdmVQYXJ0U2V0PgoKICAgIDxhY3RpdmVQYXJ0U2V0IGlkPSJoYW5kUmlnaHQiPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJyaCIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJyaHMiLz4KCQk8YWN0aXZlUGFydCBzZXQtdHlwZT0icnMiLz4KCQk8YWN0aXZlUGFydCBzZXQtdHlwZT0icmMiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0icmkiLz4KICAgIDwvYWN0aXZlUGFydFNldD4KCgk8YWN0aXZlUGFydFNldCBpZD0iaGFuZFJpZ2h0QW5kSGVhZCI+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9InJoIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9InJocyIvPgoJCTxhY3RpdmVQYXJ0IHNldC10eXBlPSJycyIvPgoJCTxhY3RpdmVQYXJ0IHNldC10eXBlPSJyYyIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJyaSIvPgoJCTxhY3RpdmVQYXJ0IHNldC10eXBlPSJleSIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJmYyIvPgoJCTxhY3RpdmVQYXJ0IHNldC10eXBlPSJoZCIvPgogICAgPC9hY3RpdmVQYXJ0U2V0PgoKICAgIDxhY3RpdmVQYXJ0U2V0IGlkPSJoYW5kTGVmdCI+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImxoIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImxocyIvPgoJCTxhY3RpdmVQYXJ0IHNldC10eXBlPSJscyIvPgoJCTxhY3RpdmVQYXJ0IHNldC10eXBlPSJsYyIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJsaSIvPgogICAgPC9hY3RpdmVQYXJ0U2V0PgoKICAgIDxhY3RpdmVQYXJ0U2V0IGlkPSJ3YWxrIj4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iYmQiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iYmRzIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9InNzIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImxnIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImxoIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImxocyIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJyaCIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJyaHMiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0ibHMiLz4KCQk8YWN0aXZlUGFydCBzZXQtdHlwZT0ibGMiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0icnMiLz4KCQk8YWN0aXZlUGFydCBzZXQtdHlwZT0icmMiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0ic2giLz4KICAgIDwvYWN0aXZlUGFydFNldD4KCiAgICA8YWN0aXZlUGFydFNldCBpZD0ic2l0Ij4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iYmQiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iYmRzIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9InNzIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImxnIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9InNoIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImNjIi8+CiAgICA8L2FjdGl2ZVBhcnRTZXQ+CgogICAgPGFjdGl2ZVBhcnRTZXQgaWQ9Iml0ZW1SaWdodCI+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9InJpIi8+CiAgICA8L2FjdGl2ZVBhcnRTZXQ+CgogICAgPGFjdGl2ZVBhcnRTZXQgaWQ9InN3aW0iPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJiZHMiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0ic3MiLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0ibGhzIi8+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9InJocyIvPgogICAgPC9hY3RpdmVQYXJ0U2V0PgoJCgk8YWN0aXZlUGFydFNldCBpZD0ic25vd3dhcnJ1biI+CiAgICAgICAgPGFjdGl2ZVBhcnQgc2V0LXR5cGU9ImNoIi8+CiAgICA8L2FjdGl2ZVBhcnRTZXQ+CgogICAgPGFjdGl2ZVBhcnRTZXQgaWQ9InNub3d3YXJwaWNrIj4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iY2giLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iaGQiLz4KICAgIDwvYWN0aXZlUGFydFNldD4KCiAgICA8YWN0aXZlUGFydFNldCBpZD0ic25vd3dhcmRpZWZyb250Ij4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iY2giLz4KICAgICAgICA8YWN0aXZlUGFydCBzZXQtdHlwZT0iaGQiLz4KICAgIDwvYWN0aXZlUGFydFNldD4KCiAgICA8YWN0aXZlUGFydFNldCBpZD0ic25vd3dhcmRpZWJhY2siPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJjaCIvPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJoZCIvPgogICAgPC9hY3RpdmVQYXJ0U2V0PgoKICAgIDxhY3RpdmVQYXJ0U2V0IGlkPSJzbm93d2FydGhyb3ciPgogICAgICAgIDxhY3RpdmVQYXJ0IHNldC10eXBlPSJjaCIvPgogICAgPC9hY3RpdmVQYXJ0U2V0Pgo8L3BhcnRTZXRzPg==";Object.defineProperty(ua,"__esModule",{value:!0});ua.AvatarPartSetsData=void 0;const x1=Ur,P1=la;class ns extends x1.AvatarData{constructor(t){super(t)}static async fromUrl(t){const r=await(await fetch(t)).text();return new ns(r)}static default(){return new ns(atob(P1.partsetsXml))}getPartInfo(t){var e,r;const n=this.querySelector(`partSet part[set-type="${t}"]`);if(n!=null)return{flippedSetType:(e=n.getAttribute("flipped-set-type"))!==null&&e!==void 0?e:void 0,removeSetType:(r=n.getAttribute("remove-set-type"))!==null&&r!==void 0?r:void 0}}getActivePartSet(t){const e=this.querySelectorAll(`activePartSet[id="${t}"] activePart`);return new Set(e.map(r=>{const n=r.getAttribute("set-type");if(n==null)throw new Error("Invalid set type");return n}))}}ua.AvatarPartSetsData=ns;var ha={};Object.defineProperty(ha,"__esModule",{value:!0});ha.FigureData=void 0;const S1=Ur,Xg=(i,t)=>`${i}_${t}`,Mo=(i,t)=>`${i}_${t}`;class Mc extends S1.AvatarData{constructor(t){super(t),this._parts=new Map,this._paletteIdForSetType=new Map,this._colors=new Map,this._hiddenLayers=new Map,this._cacheData()}static async fromUrl(t){const r=await(await fetch(t)).text();return new Mc(r)}getColor(t,e){const r=this._paletteIdForSetType.get(t);if(r!=null)return this._colors.get(Xg(r,e))}getParts(t,e){return this._parts.get(Mo(t,e))}getHiddenLayers(t,e){var r;return(r=this._hiddenLayers.get(Mo(t,e)))!==null&&r!==void 0?r:[]}_cacheData(){const t=this.querySelectorAll("sets settype");this.querySelectorAll("colors palette").forEach(r=>{const n=r.getAttribute("id");if(n==null)return;Array.from(r.querySelectorAll("color")).forEach(s=>{const a=s.getAttribute("id");a!=null&&this._colors.set(Xg(n,a),s.innerHTML)})}),t.forEach(r=>{const n=r.getAttribute("type"),o=r.getAttribute("paletteid"),s=this.querySelectorAll("set");n!=null&&(o!=null&&this._paletteIdForSetType.set(n,o),s.forEach(a=>{const l=a.getAttribute("id");if(l==null)return;const c=Array.from(a.querySelectorAll("part")),d=[],g=[];a.querySelectorAll("hiddenlayers layer").forEach(u=>{const h=u.getAttribute("parttype");h!=null&&g.push(h)}),this._hiddenLayers.set(Mo(n,l),g),c.map(u=>{const h=u.getAttribute("id"),f=u.getAttribute("type"),v=u.getAttribute("colorable");let m=Number(u.getAttribute("index"));if(isNaN(m)&&(m=0),h==null)throw new Error("Invalid id");if(f==null)throw new Error("Invalid type");return{id:h,type:f,colorable:v==="1",index:m}}).forEach(u=>{d.push(u)}),this._parts.set(Mo(n,l),d)}))})}}ha.FigureData=Mc;var ca={},fa={};Object.defineProperty(fa,"__esModule",{value:!0});fa.actionsXml=void 0;fa.actionsXml="PD94bWwgdmVyc2lvbj0iMS4wIj8+CjxhY3Rpb25zPgoKICAgIDwhLS0gTWFpbiBhY3Rpb25zIC0tPgogICAgPGFjdGlvbiAgaWQ9IkxheSIgc3RhdGU9ImxheSIgcHJlY2VkZW5jZT0iMTAwIiBtYWluPSIxIiBnZW9tZXRyeXR5cGU9Imhvcml6b250YWwiIGFjdGl2ZXBhcnRzZXQ9ImZpZ3VyZSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ibGF5IiBwcmV2ZW50cz0iZnguMSxmeC4yLGZ4LjMsZnguNSxmeC42LGZ4LjE0LGZ4LjE1LGZ4LjE2LGZ4LjE3LGZ4LjE4LGZ4LjE5LGZ4LjIwLGZ4LjIxLGZ4LjIyLGZ4LjI2LGZ4LjI3LGZ4LjMxLGZ4LjMyLGZ4LjMzLGZ4LjM0LGZ4LjM1LGZ4LjM2LGZ4LjM4LGZ4LjM5LGZ4LjQ1LGZ4LjQ2LGZ4LjQ3LGZ4LjQ4LGZ4LjUzLGZ4LjU0LGZ4LjU1LGZ4LjU2LGZ4LjU3LGZ4LjU4LGZ4LjYwLGZ4LjYxLGZ4LjYyLGZ4LjYzLGZ4LjY0LGZ4LjY1LGZ4LjY2LGZ4LjY3LGZ4LjY5LGZ4LjcwLGZ4LjcxLGZ4LjcyLGZ4LjczLGZ4Ljc0LGZ4Ljc1LGZ4Ljc2LGZ4Ljc4LGZ4Ljc5LGZ4LjgwLGZ4LjgxLGZ4LjgyLGZ4LjgzLGZ4Ljg0LGZ4Ljg1LGZ4Ljg2LGZ4Ljg3LGZ4Ljg4LGZ4Ljg5LGZ4LjkwLGZ4LjkxLGZ4LjkyLGZ4LjkzLGZ4Ljk0LGZ4Ljk3LGZ4Ljk5LGZ4LjEwMCxmeC4xMDEsZnguMTA0LGZ4LjEwNSxmeC4xMDYsZnguMTA3LGZ4LjEwOCxmeC4xMDksZnguMTEwLGZ4LjExMSxmeC4xMTIsZnguMTEzLGZ4LjExNCxmeC4xMTUsZnguMTE2LGZ4LjExNyxmeC4xMTgsZnguMTE5LGZ4LjEyMCxmeC4xMjEsZnguMTIyLGZ4LjEyMyxmeC4xMjQsZnguMTI1LGZ4LjEyNixmeC4xMjcsZnguMTI4LGZ4LjEyOSxmeC4xMzAsZnguMTMxLGZ4LjEzMixmeC4xMzMsZnguMTM0LGZ4LjEzNSxmeC4xMzYsZnguMTM3LGZ4LjEzOCxmeC4xMzksZnguMTQwLGZ4LjE0MSxmeC4xNDIsZnguMTQzLGZ4LjE0NCxmeC4xNDUsZnguMTQ2LGZ4LjE0NyxmeC4xNDgsZnguMTQ5LGZ4LjE1MCxmeC4xNTEsZnguMTUyLGZ4LjE1MyxmeC4xNTQsZnguMTU1LGZ4LjE1NixmeC4xNTcsZnguMTU4LGZ4LjE1OSxmeC4xNjAsZnguMTYxLGZ4LjE2MixmeC4xNjQsZnguMTY1LGZ4LjE2NixmeC4xNjcsZnguMTY4LGZ4LjE2OSxmeC4xNzEsZnguMTcyLGZ4LjE3MyxmeC4xNzQsZnguMTc1LGZ4LjE3NixmeC4xNzcsZnguMTc5LGZ4LjE4MCxmeC4xODEsZnguMTgyLGZ4LjE4MyxmeC4xODQsZnguMTg1LGZ4LjE4NixmeC4xODgsZnguMTg5LGZ4LjE5MCxmeC4xOTEsZnguMTkyLGZ4LjE5MyxmeC4xOTQsZnguMTk1LGZ4LjE5NixmeDE5NyxmeDE5OCxmeDE5OSxzcGssZ2VzdCxzbWwsc2FkLGFncixzcnAsdXNlaSxjcmksYmxvdyIvPgogICAgPGFjdGlvbiAgaWQ9IkZsb2F0IiBzdGF0ZT0iZmxvYXQiIHByZWNlZGVuY2U9IjEwMSIgbWFpbj0iMSIgZ2VvbWV0cnl0eXBlPSJzd2ltIiBhY3RpdmVwYXJ0c2V0PSJzd2ltIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd3MiIHByZXZlbnRzPSJmeC4yLGZ4LjMsZnguNSxmeC42LGZ4LjE0LGZ4LjE1LGZ4LjE2LGZ4LjE3LGZ4LjE4LGZ4LjE5LGZ4LjIwLGZ4LjIxLGZ4LjIyLGZ4LjIzLGZ4LjI2LGZ4LjI3LGZ4LjMxLGZ4LjMyLGZ4LjMzLGZ4LjM0LGZ4LjM1LGZ4LjM2LGZ4LjM4LGZ4LjM5LGZ4LjQ1LGZ4LjQ2LGZ4LjQ4LGZ4LjU0LGZ4LjU1LGZ4LjU2LGZ4LjU3LGZ4LjU4LGZ4LjYzLGZ4LjY1LGZ4LjY2LGZ4LjY5LGZ4LjcxLGZ4LjcyLGZ4Ljc0LGZ4Ljc1LGZ4Ljc2LGZ4Ljg5LGZ4LjkwLGZ4LjkxLGZ4LjkyLGZ4Ljk0LGZ4Ljk3LGZ4Ljk5LGZ4LjEwMCxmeC4xMDEsZnguMTA0LGZ4LjEwNSxmeC4xMDYsZnguMTA3LGZ4LjEwOSxmeC4xMTAsZnguMTExLGZ4LjExMyxmeC4xMTQsZnguMTE1LGZ4LjExNixmeC4xMTcsZnguMTE4LGZ4LjExOSxmeC4xMjAsZnguMTIxLGZ4LjEyMixmeC4xMjMsZnguMTI0LGZ4LjEyNSxmeC4xMjcsZnguMTI5LGZ4LjEzMCxmeC4xMzEsZnguMTMyLGZ4LjEzNCxmeC4xMzUsZnguMTM2LGZ4LjEzOSxmeC4xNDAsZnguMTQxLGZ4LjE0MixmeC4xNDMsZnguMTQ0LGZ4LjE0NSxmeC4xNDYsZnguMTQ3LGZ4LjE0OCxmeC4xNDksZnguMTUwLGZ4LjE1MSxmeC4xNTIsZnguMTUzLGZ4LjE1NCxmeC4xNTUsZnguMTU2LGZ4LjE1NyxmeC4xNTgsZnguMTU5LGZ4LjE2MCxmeC4xNjEsZnguMTYyLGZ4LjE2NCxmeC4xNjUsZnguMTY2LGZ4LjE2NyxmeC4xNjgsZnguMTY5LGZ4LjE3MCxmeC4xNzEsZnguMTcyLGZ4LjE3MyxmeC4xNzQsZnguMTc1LGZ4LjE3NixmeC4xNzcsZnguMTAyLGZ4LjE3OCxmeC4xNzksZnguMTgwLGZ4LjE4MSxmeC4xODIsZnguMTgzLGZ4LjE4NixmeC4xODgsZnguMTg5LGZ4LjE5MCxmeC4xOTEsZnguMTkyLGZ4LjE5MyxmeC4xOTQsZnguMTk1LGZ4LjE5NixmeDE5NyxmeDE5OCxmeDE5OSxkYW5jZSx1c2VpLGNyaSxzaWduIi8+CiAgICA8YWN0aW9uICBpZD0iU3dpbSIgc3RhdGU9InN3aW0iIHByZWNlZGVuY2U9IjEwMiIgbWFpbj0iMSIgZ2VvbWV0cnl0eXBlPSJzd2ltIiBhY3RpdmVwYXJ0c2V0PSJzd2ltIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzd20iIHByZXZlbnRzPSJmeC4yLGZ4LjMsZnguNSxmeC42LGZ4LjE0LGZ4LjE1LGZ4LjE2LGZ4LjE3LGZ4LjE4LGZ4LjE5LGZ4LjIwLGZ4LjIxLGZ4LjIyLGZ4LjIzLGZ4LjI2LGZ4LjI3LGZ4LjMyLGZ4LjMzLGZ4LjM0LGZ4LjM1LGZ4LjM2LGZ4LjM4LGZ4LjM5LGZ4LjQ1LGZ4LjQ2LGZ4LjQ4LGZ4LjU0LGZ4LjU1LGZ4LjU2LGZ4LjU3LGZ4LjU4LGZ4LjYzLGZ4LjY1LGZ4LjY2LGZ4LjY5LGZ4LjcxLGZ4LjcyLGZ4Ljc0LGZ4Ljc1LGZ4Ljc2LGZ4Ljg5LGZ4LjkwLGZ4LjkxLGZ4LjkyLGZ4Ljk0LGZ4Ljk3LGZ4LjEwMCxmeC4xMDEsZnguMTA0LGZ4LjEwNSxmeC4xMDYsZnguMTA3LGZ4LjEwOSxmeC4xMTAsZnguMTExLGZ4LjExMyxmeC4xMTQsZnguMTE1LGZ4LjExNixmeC4xMTcsZnguMTE4LGZ4LjExOSxmeC4xMjAsZnguMTIxLGZ4LjEyMixmeC4xMjMsZnguMTI0LGZ4LjEyNSxmeC4xMjcsZnguMTI5LGZ4LjEzMCxmeC4xMzEsZnguMTMyLGZ4LjEzNCxmeC4xMzUsZnguMTM2LGZ4LjEzOSxmeC4xNDAsZnguMTQxLGZ4LjE0MixmeC4xNDMsZnguMTQ0LGZ4LjE0NSxmeC4xNDYsZnguMTQ3LGZ4LjE0OCxmeC4xNDksZnguMTUwLGZ4LjE1MSxmeC4xNTIsZnguMTUzLGZ4LjE1NCxmeC4xNTUsZnguMTU2LGZ4LjE1NyxmeC4xNTgsZnguMTU5LGZ4LjE2MCxmeC4xNjEsZnguMTYyLGZ4LjE2NCxmeC4xNjUsZnguMTY2LGZ4LjE2NyxmeC4xNjgsZnguMTY4LGZ4LjE3MCxmeC4xNzEsZnguMTcyLGZ4LjE3MyxmeC4xNzQsZnguMTc1LGZ4LjE3NixmeC4xNzcsZnguMTAyLGZ4LjE3OCxmeC4xNzksZnguMTgwLGZ4LjE4MSxmeC4xODIsZnguMTgzLGZ4LjE4NixmeC4xODgsZnguMTg5LGZ4LjE5MCxmeC4xOTEsZnguMTkyLGZ4LjE5MyxmeC4xOTQsZnguMTk1LGZ4LjE5NixmeDE5NyxmeDE5OCxmeDE5OSxkYW5jZSx1c2VpLGNyaSxzaWduIi8+CiAgICA8YWN0aW9uICBpZD0iU2l0IiBzdGF0ZT0ic2l0IiBwcmVjZWRlbmNlPSIxMDMiIG1haW49IjEiIGdlb21ldHJ5dHlwZT0ic2l0dGluZyIgYWN0aXZlcGFydHNldD0ic2l0IiBhc3NldHBhcnRkZWZpbml0aW9uPSJzaXQiIHByZXZlbnRzPSJmeC4yLGZ4LjMsZnguNixmeC4xNCxmeC4xNSxmeC4xNyxmeC4xOCxmeC4xOSxmeC4yMCxmeC4yMSxmeC4yMixmeC4zMyxmeC4zNCxmeC4zNSxmeC4zNixmeC4zOCxmeC4zOSxmeC40OCxmeC41NCxmeC41NSxmeC41NixmeC42OSxmeC43MSxmeC43MixmeC45MixmeC45NCxmeC45NyxmeC4xMDAsZnguMTA0LGZ4LjExNSxmeC4xMTcsZnguMTMyLGZ4LjEzNCxmeC4xMzUsZnguMTM2LGZ4LjE0MCxmeC4xNTYsZnguMTc0LGZ4LjE3NSxmeC4xNzYsZnguMTg4LGZ4LjE4OSxmeC4xOTAsZnguMTkxLGZ4LjE5MyxmeC4xOTQsZnguMTk1LGZ4MTk3LGZ4MTk4LGZ4MTk5LGRhbmNlIi8+CgogICAgPGFjdGlvbiAgaWQ9IlNub3dib2FyZDM2MCIgc3RhdGU9InNiMzYwIiBwcmVjZWRlbmNlPSIxNDAiIGFuaW1hdGlvbj0iMSIgbWFpbj0iMSIgZ2VvbWV0cnl0eXBlPSJ2ZXJ0aWNhbCIgYWN0aXZlcGFydHNldD0iZmlndXJlIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzYjM2MCIgc3RhcnRmcm9tZnJhbWV6ZXJvPSJ0cnVlIiBwcmV2ZW50cz0idXNlaSxjcmksd2F2ZSxzaWduIi8+CiAgICA8YWN0aW9uICBpZD0iU25vd2JvYXJkT2xsaWUiIHN0YXRlPSJzYm9sbGllIiBwcmVjZWRlbmNlPSIxNDEiIGFuaW1hdGlvbj0iMSIgbWFpbj0iMSIgZ2VvbWV0cnl0eXBlPSJ2ZXJ0aWNhbCIgYWN0aXZlcGFydHNldD0iZmlndXJlIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzYm9sbGllIiBzdGFydGZyb21mcmFtZXplcm89InRydWUiIHByZXZlbnRzPSJ1c2VpLGNyaSx3YXZlLHNpZ24iLz4KICAgIDxhY3Rpb24gIGlkPSJTbm93Ym9hcmRVcCIgc3RhdGU9InNidXAiIHByZWNlZGVuY2U9IjE0MiIgYW5pbWF0aW9uPSIxIiBtYWluPSIxIiBnZW9tZXRyeXR5cGU9InZlcnRpY2FsIiBhY3RpdmVwYXJ0c2V0PSJmaWd1cmUiIGFzc2V0cGFydGRlZmluaXRpb249InN0ZCIgc3RhcnRmcm9tZnJhbWV6ZXJvPSJ0cnVlIiAvPgogICAgPGFjdGlvbiAgaWQ9IlNub3dib2FyZFNxdWF0IiBzdGF0ZT0ic2JzcSIgcHJlY2VkZW5jZT0iMTQzIiBhbmltYXRpb249IjEiIG1haW49IjEiIGdlb21ldHJ5dHlwZT0idmVydGljYWwiIGFjdGl2ZXBhcnRzZXQ9ImZpZ3VyZSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3RkIiBzdGFydGZyb21mcmFtZXplcm89InRydWUiIC8+CgogICAgPGFjdGlvbiAgaWQ9IlJpZGVKdW1wIiBzdGF0ZT0icmlkZWp1bXAiIHByZWNlZGVuY2U9IjE0NCIgYW5pbWF0aW9uPSIxIiBtYWluPSIxIiBnZW9tZXRyeXR5cGU9InZlcnRpY2FsIiBhY3RpdmVwYXJ0c2V0PSJmaWd1cmUiIGFzc2V0cGFydGRlZmluaXRpb249InN0ZCIgc3RhcnRmcm9tZnJhbWV6ZXJvPSJ0cnVlIiAvPgoKICAgIDxhY3Rpb24gIGlkPSJSZXNwZWN0IiBzdGF0ZT0icmVzcGVjdCIgcHJlY2VkZW5jZT0iMjA0IiBnZW9tZXRyeXR5cGU9InZlcnRpY2FsIiBhY3RpdmVwYXJ0c2V0PSJoYW5kTGVmdCIgc3RhcnRmcm9tZnJhbWV6ZXJvPSJ0cnVlIiBhc3NldHBhcnRkZWZpbml0aW9uPSJyZXNwZWN0IiBwcmV2ZW50cz0iZGFuY2UiLz4KICAgIDxhY3Rpb24gIGlkPSJXYXZlIiBzdGF0ZT0id2F2ZSIgcHJlY2VkZW5jZT0iMjA1IiBnZW9tZXRyeXR5cGU9InZlcnRpY2FsIiBhY3RpdmVwYXJ0c2V0PSJoYW5kTGVmdCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2F2IiBwcmV2ZW50cz0iZGFuY2UiLz4KICAgIDxhY3Rpb24gIGlkPSJTaWduIiBzdGF0ZT0ic2lnbiIgcHJlY2VkZW5jZT0iMjEwIiBnZW9tZXRyeXR5cGU9InZlcnRpY2FsIiBhY3RpdmVwYXJ0c2V0PSJoYW5kTGVmdCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic2lnIiBwcmV2ZW50cz0iZGFuY2UiLz4KICAgIDxhY3Rpb24gIGlkPSJCbG93IiBzdGF0ZT0iYmxvdyIgcHJlY2VkZW5jZT0iMjExIiBnZW9tZXRyeXR5cGU9InZlcnRpY2FsIiBhY3RpdmVwYXJ0c2V0PSJoYW5kUmlnaHRBbmRIZWFkIiBhc3NldHBhcnRkZWZpbml0aW9uPSJibHciIHN0YXJ0ZnJvbWZyYW1lemVybz0idHJ1ZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIiBwcmV2ZW50cz0iZGFuY2UiLz4KICAgIDxhY3Rpb24gIGlkPSJMYXVnaCIgc3RhdGU9ImxhdWdoIiBwcmVjZWRlbmNlPSIyMTEiIGdlb21ldHJ5dHlwZT0idmVydGljYWwiIGFjdGl2ZXBhcnRzZXQ9ImhhbmRSaWdodEFuZEhlYWQiIGFzc2V0cGFydGRlZmluaXRpb249ImxnaCIgc3RhcnRmcm9tZnJhbWV6ZXJvPSJ0cnVlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiIHByZXZlbnRzPSJkYW5jZSIvPgogICAgPGFjdGlvbiAgaWQ9IklkbGUiIHN0YXRlPSJpZGxlIiBwcmVjZWRlbmNlPSIyMTEiIGdlb21ldHJ5dHlwZT0idmVydGljYWwiIGFjdGl2ZXBhcnRzZXQ9ImhlYWQiIGFzc2V0cGFydGRlZmluaXRpb249ImlkbCIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIiBwcmV2ZW50cz0iZGFuY2UiLz4KCiAgICA8YWN0aW9uICBpZD0iQXZhdGFyRWZmZWN0IiBzdGF0ZT0iZngiIHByZWNlZGVuY2U9IjIyMCIgZ2VvbWV0cnl0eXBlPSJ2ZXJ0aWNhbCIgYW5pbWF0aW9uPSIxIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzdGQiIHByZXZlbnRzPSJkYW5jZSxibG93LGxhdWdoIj4KICAgICAgICA8dHlwZSBpZD0iMSIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI1IiBwcmV2ZW50cz0idXNlaSxjcmkiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjExIiBhbmltYXRlZD0iZmFsc2UiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjEyIiBhbmltYXRlZD0iZmFsc2UiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjEzIiBhbmltYXRlZD0iZmFsc2UiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjE2IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRzPSJ1c2VpLGNyaSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTkiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMjAiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMjEiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMjIiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMjYiIHByZXZlbnRzPSJ1c2VpLGNyaSIgLz4KICAgICAgICA8dHlwZSBpZD0iMjciIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMjgiIHByZXZlbnRzPSJ1c2VpLGNyaSx3YXZlLHNpZ24iLz4KICAgICAgICA8dHlwZSBpZD0iMjkiIHByZXZlbnRzPSJ1c2VpLGNyaSx3YXZlLHNpZ24iLz4KICAgICAgICA8dHlwZSBpZD0iMzEiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMzIiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjMzIiBwcmV2ZW50aGVhZHR1cm49InRydWUiIHByZXZlbnRzPSJTbGVlcCxnZXN0LHNtbCxzYWQsYWdyLHNycCIvPgogICAgICAgIDx0eXBlIGlkPSIzNCIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIiBwcmV2ZW50cz0iU2xlZXAsZ2VzdCxzbWwsc2FkLGFncixzcnAiLz4KICAgICAgICA8dHlwZSBpZD0iMzUiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIgcHJldmVudHM9IlNsZWVwLGdlc3Qsc21sLHNhZCxhZ3Isc3JwIi8+CiAgICAgICAgPHR5cGUgaWQ9IjM2IiBwcmV2ZW50aGVhZHR1cm49InRydWUiIHByZXZlbnRzPSJTbGVlcCxnZXN0LHNtbCxzYWQsYWdyLHNycCIvPgogICAgICAgIDx0eXBlIGlkPSIzOCIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSIzOSIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI0MCIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI0MSIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI0MiIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI0MyIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI0NyIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI0OCIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI1NSIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI1NiIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI1NyIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI1OCIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI2MCIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI2NCIgcHJldmVudHM9InVzZWksY3JpIiAvPgogICAgICAgIDx0eXBlIGlkPSI2OSIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI3MSIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI3MiIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI3NCIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI3NSIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI3NiIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSI3OSIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iODAiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjgxIiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSI4MiIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iODMiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9Ijg0IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSI4NSIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iODYiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9Ijg3IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSI4OCIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iODkiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iOTAiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iOTEiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iOTQiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iOTciIC8+CiAgICAgICAgPHR5cGUgaWQ9IjEwMCIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSIxMDEiIGFuaW1hdGVkPSJ0cnVlIiBwcmV2ZW50cz0idXNlaSxjcmkiLz4KICAgICAgICA8dHlwZSBpZD0iMTAyIiBhbmltYXRlZD0idHJ1ZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTA0IiBhbmltYXRlZD0iZmFsc2UiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjEwNSIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSIxMDYiIHByZXZlbnRzPSJ1c2VpLGNyaSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTA3IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRzPSJ1c2VpLGNyaSx3YXZlIiAvPgogICAgICAgIDx0eXBlIGlkPSIxMDgiIGFuaW1hdGVkPSJ0cnVlIiBwcmV2ZW50cz0id2F2ZSxzaWduLHNpdCxTd2ltIiAvPgogICAgICAgIDx0eXBlIGlkPSIxMDkiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTEwIiBhbmltYXRlZD0iZmFsc2UiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjExMSIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSIxMTQiIHByZXZlbnRzPSJ1c2VpLGNyaSx3YXZlLHNpZ24iIC8+CiAgICAgICAgPHR5cGUgaWQ9IjExNSIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiIHByZXZlbnRzPSJ1c2VpLGNyaSx3YXZlLHNpZ24sU2xlZXAsZ2VzdCxzbWwsc2FkLGFncixzcnAiLz4KICAgICAgICA8dHlwZSBpZD0iMTE2IiBhbmltYXRlZD0iZmFsc2UiLz4KICAgICAgICA8dHlwZSBpZD0iMTE3IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxMTgiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjExOSIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iMTIwIiBhbmltYXRlZD0idHJ1ZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjEyMSIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iMTIyIiBhbmltYXRlZD0idHJ1ZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjEyMyIgYW5pbWF0ZWQ9InRydWUiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxMjQiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjEyNSIgYW5pbWF0ZWQ9InRydWUiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxMjYiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjEyNyIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iMTI4IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxMjkiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTMwIiBhbmltYXRlZD0iZmFsc2UiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjEzMSIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSIxMzIiIGFuaW1hdGVkPSJ0cnVlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iMTM0IiBhbmltYXRlZD0iZmFsc2UiLz4KICAgICAgICA8dHlwZSBpZD0iMTM1IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxMzYiIGFuaW1hdGVkPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjEzNyIgYW5pbWF0ZWQ9ImZhbHNlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjEzOCIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iMTM5IiBhbmltYXRlZD0idHJ1ZSIgcHJldmVudHM9InVzZWksY3JpIiAvPgogICAgICAgIDx0eXBlIGlkPSIxNDAiIGFuaW1hdGVkPSJ0cnVlIiAvPgogICAgICAgIDx0eXBlIGlkPSIxNDEiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjE0MiIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iMTQzIiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxNDQiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjE0NSIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iMTQ2IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxNDciIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjE0OCIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iMTQ5IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxNTAiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjE1MSIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iMTUyIiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxNTMiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjE1NCIgYW5pbWF0ZWQ9ImZhbHNlIiAvPgogICAgICAgIDx0eXBlIGlkPSIxNTUiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTU2IiBhbmltYXRlZD0idHJ1ZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTU3IiBhbmltYXRlZD0idHJ1ZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjE1OCIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50cz0idXNlaSxjcmkiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxNTkiIGFuaW1hdGVkPSJmYWxzZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTYwIiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIgcHJldmVudHM9InVzZWkiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjE2MSIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiIHByZXZlbnRzPSJ1c2VpLGNyaSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTYyIiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRzPSJ1c2VpLGNyaSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTY0IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRzPSJ1c2VpLGNyaSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTY1IiBhbmltYXRlZD0idHJ1ZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTY2IiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxNjciIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjE2OCIgYW5pbWF0ZWQ9InRydWUiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjE2OSIgYW5pbWF0ZWQ9InRydWUiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjE3MCIgYW5pbWF0ZWQ9InRydWUiIHByZXZlbnRzPSJ1c2VpLGNyaSx3YXZlLHNpZ24iIC8+CiAgICAgICAgPHR5cGUgaWQ9IjE3MSIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiIHByZXZlbnRzPSJ1c2VpIiAvPgogICAgICAgIDx0eXBlIGlkPSIxNzIiIGFuaW1hdGVkPSJ0cnVlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiIHByZXZlbnRzPSJ1c2VpIiAvPgogICAgICAgIDx0eXBlIGlkPSIxNzMiIGFuaW1hdGVkPSJ0cnVlIiBwcmV2ZW50aGVhZHR1cm49InRydWUiIHByZXZlbnRzPSJ1c2VpIiAvPgogICAgICAgIDx0eXBlIGlkPSIxNzUiIGFuaW1hdGVkPSJ0cnVlIiAvPgogICAgICAgIDx0eXBlIGlkPSIxNzYiIGFuaW1hdGVkPSJ0cnVlIiAvPgogICAgICAgIDx0eXBlIGlkPSIxNzciIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIiBwcmV2ZW50cz0idXNlaSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTc4IiBhbmltYXRlZD0idHJ1ZSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTc5IiBhbmltYXRlZD0idHJ1ZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIiBwcmV2ZW50cz0idXNlaSIgLz4KICAgICAgICA8dHlwZSBpZD0iMTgwIiBhbmltYXRlZD0iZmFsc2UiIHByZXZlbnRoZWFkdHVybj0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxODEiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjE4MiIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50cz0idXNlaSxjcmkiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjE4MyIgYW5pbWF0ZWQ9ImZhbHNlIiBwcmV2ZW50cz0idXNlaSxjcmkiIC8+CiAgICAgICAgPHR5cGUgaWQ9IjE4NCIgYW5pbWF0ZWQ9InRydWUiIHByZXZlbnRzPSJ1c2VpLGNyaSx3YXZlLHNpZ24iLz4KICAgICAgICA8dHlwZSBpZD0iMTg1IiBhbmltYXRlZD0idHJ1ZSIgcHJldmVudHM9InVzZWksY3JpLHdhdmUsc2lnbiIvPgogICAgICAgIDx0eXBlIGlkPSIxODYiIGFuaW1hdGVkPSJ0cnVlIiBwcmV2ZW50cz0idXNlaSxjcmkiLz4KICAgICAgICA8dHlwZSBpZD0iMTg3IiBhbmltYXRlZD0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxODgiIGFuaW1hdGVkPSJ0cnVlIiBwcmV2ZW50cz0idXNlaSxjcmksd2F2ZSxzaWduIi8+CiAgICAgICAgPHR5cGUgaWQ9IjE4OSIgYW5pbWF0ZWQ9InRydWUiIHByZXZlbnRzPSJ1c2VpLGNyaSx3YXZlLHNpZ24scmVzcGVjdCIvPgogICAgICAgIDx0eXBlIGlkPSIxOTAiIGFuaW1hdGVkPSJ0cnVlIiBwcmV2ZW50cz0idXNlaSxjcmksd2F2ZSxzaWduLHJlc3BlY3QiLz4KICAgICAgICA8dHlwZSBpZD0iMTkxIiBhbmltYXRlZD0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxOTIiIGFuaW1hdGVkPSJmYWxzZSIgcHJldmVudHM9InVzZWksY3JpIiAvPgogICAgICAgIDx0eXBlIGlkPSIxOTMiIGFuaW1hdGVkPSJ0cnVlIi8+CiAgICAgICAgPHR5cGUgaWQ9IjE5NCIgYW5pbWF0ZWQ9InRydWUiLz4KICAgICAgICA8dHlwZSBpZD0iMTk1IiBhbmltYXRlZD0idHJ1ZSIvPgogICAgICAgIDx0eXBlIGlkPSIxOTYiIGFuaW1hdGVkPSJ0cnVlIiBwcmV2ZW50cz0idXNlaSxjcmkiIC8+Lz4KICAgICAgICA8dHlwZSBpZD0iMTk4IiBhbmltYXRlZD0idHJ1ZSIgcHJldmVudHM9InVzZWksY3JpLHdhdmUsc2lnbixyZXNwZWN0Ii8+CgoKCgoKCgoKCiAgICA8L2FjdGlvbj4KCiAgICA8YWN0aW9uICBpZD0iRGFuY2UiIHN0YXRlPSJkYW5jZSIgcHJlY2VkZW5jZT0iMjMwIiBnZW9tZXRyeXR5cGU9InZlcnRpY2FsIiBhY3RpdmVwYXJ0c2V0PSJmaWd1cmUiIGFuaW1hdGlvbj0iMSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3RkIiBwcmV2ZW50cz0iY3JpLHVzZWkiLz4KCiAgICA8IS0tIEhhbmQgYWN0aW9ucyAtLT4KICAgIDxhY3Rpb24gIGlkPSJVc2VJdGVtIiBzdGF0ZT0idXNlaSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIiBwcmVjZWRlbmNlPSIyMDAiIGdlb21ldHJ5dHlwZT0idmVydGljYWwiIGFjdGl2ZXBhcnRzZXQ9ImhhbmRSaWdodCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0iZHJrIj4KICAgICAgICA8cGFyYW0gaWQ9ImRlZmF1bHQiIHZhbHVlPSIxIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxIiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMiIgdmFsdWU9IjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjMiIHZhbHVlPSIyIi8+CiAgICAgICAgPHBhcmFtIGlkPSI0IiB2YWx1ZT0iMyIvPgogICAgICAgIDxwYXJhbSBpZD0iOCIgdmFsdWU9IjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjkiIHZhbHVlPSI2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMCIgdmFsdWU9IjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjExIiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTIiIHZhbHVlPSI2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMyIgdmFsdWU9IjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjE0IiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTUiIHZhbHVlPSI2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxNiIgdmFsdWU9IjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjE3IiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTgiIHZhbHVlPSIxIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxOSIgdmFsdWU9IjUiLz4KICAgICAgICA8cGFyYW0gaWQ9IjIwIiB2YWx1ZT0iNzUiLz4KICAgICAgICA8cGFyYW0gaWQ9IjIxIiB2YWx1ZT0iNCIvPgogICAgICAgIDxwYXJhbSBpZD0iMjIiIHZhbHVlPSI3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIyMyIgdmFsdWU9IjgiLz4KICAgICAgICA8cGFyYW0gaWQ9IjI0IiB2YWx1ZT0iNjY3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIyNSIgdmFsdWU9IjkiLz4KICAgICAgICA8cGFyYW0gaWQ9IjI2IiB2YWx1ZT0iMzMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjI3IiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMjgiIHZhbHVlPSI0MiIvPgogICAgICAgIDxwYXJhbSBpZD0iMjkiIHZhbHVlPSI0MyIvPgogICAgICAgIDxwYXJhbSBpZD0iMzAiIHZhbHVlPSI0NCIvPgogICAgICAgIDxwYXJhbSBpZD0iMzEiIHZhbHVlPSI0NSIvPgogICAgICAgIDxwYXJhbSBpZD0iMzIiIHZhbHVlPSI0NSIvPgogICAgICAgIDxwYXJhbSBpZD0iMzMiIHZhbHVlPSI1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIzNCIgdmFsdWU9IjQ2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIzNSIgdmFsdWU9IjQ3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIzNiIgdmFsdWU9IjUwIi8+CiAgICAgICAgPHBhcmFtIGlkPSIzNyIgdmFsdWU9IjUxIi8+CiAgICAgICAgPHBhcmFtIGlkPSIzOCIgdmFsdWU9IjUyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIzOSIgdmFsdWU9IjUzIi8+CiAgICAgICAgPHBhcmFtIGlkPSI0MCIgdmFsdWU9IjU0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI0MSIgdmFsdWU9IjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjQyIiB2YWx1ZT0iNDgiLz4KICAgICAgICA8cGFyYW0gaWQ9IjQzIiB2YWx1ZT0iNTUiLz4KICAgICAgICA8cGFyYW0gaWQ9IjQ0IiB2YWx1ZT0iNTYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjQ1IiB2YWx1ZT0iNTciLz4KICAgICAgICA8cGFyYW0gaWQ9IjQ2IiB2YWx1ZT0iNTgiLz4KICAgICAgICA8cGFyYW0gaWQ9IjQ3IiB2YWx1ZT0iNTkiLz4KICAgICAgICA8cGFyYW0gaWQ9IjQ4IiB2YWx1ZT0iNjAiLz4KICAgICAgICA8cGFyYW0gaWQ9IjQ5IiB2YWx1ZT0iNjEiLz4KICAgICAgICA8cGFyYW0gaWQ9IjUwIiB2YWx1ZT0iNjIiLz4KICAgICAgICA8cGFyYW0gaWQ9IjUxIiB2YWx1ZT0iNjMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjUyIiB2YWx1ZT0iNjQiLz4KICAgICAgICA8cGFyYW0gaWQ9IjUzIiB2YWx1ZT0iNjUiLz4KICAgICAgICA8cGFyYW0gaWQ9IjU0IiB2YWx1ZT0iNjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjU1IiB2YWx1ZT0iNjciLz4KICAgICAgICA8cGFyYW0gaWQ9IjU2IiB2YWx1ZT0iNjQiLz4KICAgICAgICA8cGFyYW0gaWQ9IjU3IiB2YWx1ZT0iNDMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjU4IiB2YWx1ZT0iNjgiLz4KICAgICAgICA8cGFyYW0gaWQ9IjU5IiB2YWx1ZT0iNjkiLz4KICAgICAgICA8cGFyYW0gaWQ9IjYwIiB2YWx1ZT0iNzAiLz4KICAgICAgICA8cGFyYW0gaWQ9IjYxIiB2YWx1ZT0iNzEiLz4KICAgICAgICA8cGFyYW0gaWQ9IjYyIiB2YWx1ZT0iNzIiLz4KICAgICAgICA8cGFyYW0gaWQ9IjYzIiB2YWx1ZT0iNzMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjY0IiB2YWx1ZT0iNDQiLz4KCiAgICAgICAgPHBhcmFtIGlkPSI2NiIgdmFsdWU9Ijc1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI2NyIgdmFsdWU9IjkyIi8+CiAgICAgICAgPHBhcmFtIGlkPSI2OCIgdmFsdWU9IjkzIi8+CiAgICAgICAgPHBhcmFtIGlkPSI2OSIgdmFsdWU9Ijk0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI3MCIgdmFsdWU9IjEwNSIvPgogICAgICAgIDxwYXJhbSBpZD0iNzEiIHZhbHVlPSIxMDYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjcyIiB2YWx1ZT0iMTA5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI3MyIgdmFsdWU9IjEyNiIvPgogICAgICAgIDxwYXJhbSBpZD0iNzQiIHZhbHVlPSIxMjciLz4KICAgICAgICA8cGFyYW0gaWQ9Ijc1IiB2YWx1ZT0iMTI4Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI3NiIgdmFsdWU9IjEyOSIvPgogICAgICAgIDxwYXJhbSBpZD0iNzciIHZhbHVlPSIxMzAiLz4KICAgICAgICA8cGFyYW0gaWQ9Ijc5IiB2YWx1ZT0iMTMyIi8+CiAgICAgICAgPHBhcmFtIGlkPSI4MCIgdmFsdWU9IjEzMyIvPgogICAgICAgIDxwYXJhbSBpZD0iODEiIHZhbHVlPSIxMzQiLz4KICAgICAgICA8cGFyYW0gaWQ9IjgyIiB2YWx1ZT0iMTM2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI4MyIgdmFsdWU9IjEzNyIvPgogICAgICAgIDxwYXJhbSBpZD0iODQiIHZhbHVlPSIxMzkiLz4KICAgICAgICA8cGFyYW0gaWQ9Ijg1IiB2YWx1ZT0iMTQ0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI4NiIgdmFsdWU9IjE0NSIvPgogICAgICAgIDxwYXJhbSBpZD0iODciIHZhbHVlPSIxNTIiLz4KICAgICAgICA8cGFyYW0gaWQ9Ijg4IiB2YWx1ZT0iMTUzIi8+CiAgICAgICAgPHBhcmFtIGlkPSI4OSIgdmFsdWU9IjE1OSIvPgogICAgICAgIDxwYXJhbSBpZD0iOTAiIHZhbHVlPSIxNjAiLz4KICAgICAgICA8cGFyYW0gaWQ9IjkxIiB2YWx1ZT0iMTY0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI5MiIgdmFsdWU9IjE2OCIvPgogICAgICAgIDxwYXJhbSBpZD0iOTMiIHZhbHVlPSIxNjkiLz4KICAgICAgICA8cGFyYW0gaWQ9Ijk0IiB2YWx1ZT0iMTcwIi8+CiAgICAgICAgPHBhcmFtIGlkPSI5NSIgdmFsdWU9IjE3MSIvPgogICAgICAgIDxwYXJhbSBpZD0iOTYiIHZhbHVlPSIxNzgiLz4KICAgICAgICA8cGFyYW0gaWQ9Ijk3IiB2YWx1ZT0iMTc5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI5OCIgdmFsdWU9IjE4MCIvPiAgICAgCiAgICAgICAgPHBhcmFtIGlkPSI5OSIgdmFsdWU9IjE4MSIvPiAgICAgCiAgICAgICAgPHBhcmFtIGlkPSIxMDAiIHZhbHVlPSIxODIiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwMSIgdmFsdWU9IjE4MyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAyIiB2YWx1ZT0iMTg1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDMiIHZhbHVlPSIxODYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwNCIgdmFsdWU9IjE4NyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1IiB2YWx1ZT0iMTg4Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDYiIHZhbHVlPSIxODkiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwNyIgdmFsdWU9IjE5MCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA4IiB2YWx1ZT0iMTkxIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDkiIHZhbHVlPSIxOTIiLz4KICAgICAgICA8cGFyYW0gaWQ9IjExMCIgdmFsdWU9IjE5MyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTExIiB2YWx1ZT0iMTk0Ii8+ICAKICAgICAgICA8cGFyYW0gaWQ9IjExMiIgdmFsdWU9IjE5NiIvPiAKICAgICAgICA8cGFyYW0gaWQ9IjExMyIgdmFsdWU9IjE5NyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTE0IiB2YWx1ZT0iMTk4Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMTUiIHZhbHVlPSIxOTkiLz4KICAgICAgICA8cGFyYW0gaWQ9IjExNiIgdmFsdWU9IjIwMCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTE3IiB2YWx1ZT0iMjAxIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMTgiIHZhbHVlPSIyMDIiLz4KICAgICAgICA8cGFyYW0gaWQ9IjExOSIgdmFsdWU9IjIwMyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTIwIiB2YWx1ZT0iMjA2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMjEiIHZhbHVlPSIyMDciLz4KICAgICAgICA8cGFyYW0gaWQ9IjEyMiIgdmFsdWU9IjIwOCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTIzIiB2YWx1ZT0iMjA5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMjQiIHZhbHVlPSIyMTAiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEyNSIgdmFsdWU9IjIxMSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTI2IiB2YWx1ZT0iMjEyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMjciIHZhbHVlPSIyMTMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEyOCIgdmFsdWU9IjIxNCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTI5IiB2YWx1ZT0iMjE4Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMzAiIHZhbHVlPSIyMTkiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEzMSIgdmFsdWU9IjIyMCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTMyIiB2YWx1ZT0iMjIxIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMzMiIHZhbHVlPSIyMjIiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEzNCIgdmFsdWU9IjIyMyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTM1IiB2YWx1ZT0iMjI1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMzYiIHZhbHVlPSIyMjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEzNyIgdmFsdWU9IjIzMSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTM4IiB2YWx1ZT0iMjMyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxNDIiIHZhbHVlPSIyMzQiLz4KICAgICAgICA8cGFyYW0gaWQ9IjE0MyIgdmFsdWU9IjIzOCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTQ0IiB2YWx1ZT0iMjM5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxNDUiIHZhbHVlPSIyNDMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjE0NiIgdmFsdWU9IjI0NSIvPgoKCgogICAgICAgIAogICAgPC9hY3Rpb24+CiAgICA8YWN0aW9uICBpZD0iQ2FycnlJdGVtIiBzdGF0ZT0iY3JpIiBwcmVjZWRlbmNlPSIyMDUiIGdlb21ldHJ5dHlwZT0idmVydGljYWwiIGFjdGl2ZXBhcnRzZXQ9ImhhbmRSaWdodCIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0iY3JyIj4KICAgICAgICA8cGFyYW0gaWQ9ImRlZmF1bHQiIHZhbHVlPSIxIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxIiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMyIgdmFsdWU9IjIiLz4KICAgICAgICA8cGFyYW0gaWQ9IjQiIHZhbHVlPSIzIi8+CiAgICAgICAgPHBhcmFtIGlkPSI4IiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iOSIgdmFsdWU9IjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwIiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTEiIHZhbHVlPSI2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMiIgdmFsdWU9IjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEzIiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTQiIHZhbHVlPSI2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxNSIgdmFsdWU9IjYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjE2IiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTciIHZhbHVlPSI2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxOCIgdmFsdWU9IjEiLz4KICAgICAgICA8cGFyYW0gaWQ9IjE5IiB2YWx1ZT0iNSIvPgogICAgICAgIDxwYXJhbSBpZD0iMjAiIHZhbHVlPSI3NSIvPgogICAgICAgIDxwYXJhbSBpZD0iMjEiIHZhbHVlPSI0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIyMiIgdmFsdWU9IjciLz4KICAgICAgICA8cGFyYW0gaWQ9IjIzIiB2YWx1ZT0iOCIvPgogICAgICAgIDxwYXJhbSBpZD0iMjQiIHZhbHVlPSI2NjciLz4KICAgICAgICA8cGFyYW0gaWQ9IjI1IiB2YWx1ZT0iOSIvPgogICAgICAgIDxwYXJhbSBpZD0iMjYiIHZhbHVlPSIzMyIvPgogICAgICAgIDxwYXJhbSBpZD0iMjciIHZhbHVlPSI2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIyOCIgdmFsdWU9IjQyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIyOSIgdmFsdWU9IjQzIi8+CiAgICAgICAgPHBhcmFtIGlkPSIzMCIgdmFsdWU9IjQ0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIzMSIgdmFsdWU9IjQ1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIzMiIgdmFsdWU9IjQ1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIzMyIgdmFsdWU9IjUiLz4KICAgICAgICA8cGFyYW0gaWQ9IjM0IiB2YWx1ZT0iNDYiLz4KICAgICAgICA8cGFyYW0gaWQ9IjM1IiB2YWx1ZT0iNDciLz4KICAgICAgICA8cGFyYW0gaWQ9IjM2IiB2YWx1ZT0iNTAiLz4KICAgICAgICA8cGFyYW0gaWQ9IjM3IiB2YWx1ZT0iNTEiLz4KICAgICAgICA8cGFyYW0gaWQ9IjM4IiB2YWx1ZT0iNTIiLz4KICAgICAgICA8cGFyYW0gaWQ9IjM5IiB2YWx1ZT0iNTMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjQwIiB2YWx1ZT0iNTQiLz4KICAgICAgICA8cGFyYW0gaWQ9IjQxIiB2YWx1ZT0iNiIvPgogICAgICAgIDxwYXJhbSBpZD0iNDIiIHZhbHVlPSI0OCIvPgogICAgICAgIDxwYXJhbSBpZD0iNDMiIHZhbHVlPSI1NSIvPgogICAgICAgIDxwYXJhbSBpZD0iNDQiIHZhbHVlPSI1NiIvPgogICAgICAgIDxwYXJhbSBpZD0iNDUiIHZhbHVlPSI1NyIvPgogICAgICAgIDxwYXJhbSBpZD0iNDYiIHZhbHVlPSI1OCIvPgogICAgICAgIDxwYXJhbSBpZD0iNDciIHZhbHVlPSI1OSIvPgogICAgICAgIDxwYXJhbSBpZD0iNDgiIHZhbHVlPSI2MCIvPgogICAgICAgIDxwYXJhbSBpZD0iNDkiIHZhbHVlPSI2MSIvPgogICAgICAgIDxwYXJhbSBpZD0iNTAiIHZhbHVlPSI2MiIvPgogICAgICAgIDxwYXJhbSBpZD0iNTEiIHZhbHVlPSI2MyIvPgogICAgICAgIDxwYXJhbSBpZD0iNTIiIHZhbHVlPSI2NCIvPgogICAgICAgIDxwYXJhbSBpZD0iNTMiIHZhbHVlPSI2NSIvPgogICAgICAgIDxwYXJhbSBpZD0iNTQiIHZhbHVlPSI2NiIvPgogICAgICAgIDxwYXJhbSBpZD0iNTUiIHZhbHVlPSI2NyIvPgogICAgICAgIDxwYXJhbSBpZD0iNTYiIHZhbHVlPSI2NCIvPgogICAgICAgIDxwYXJhbSBpZD0iNTciIHZhbHVlPSI0MyIvPgogICAgICAgIDxwYXJhbSBpZD0iNTgiIHZhbHVlPSI2OCIvPgogICAgICAgIDxwYXJhbSBpZD0iNTkiIHZhbHVlPSI2OSIvPgogICAgICAgIDxwYXJhbSBpZD0iNjAiIHZhbHVlPSI3MCIvPgogICAgICAgIDxwYXJhbSBpZD0iNjEiIHZhbHVlPSI3MSIvPgogICAgICAgIDxwYXJhbSBpZD0iNjIiIHZhbHVlPSI3MiIvPgogICAgICAgIDxwYXJhbSBpZD0iNjMiIHZhbHVlPSI3MyIvPgogICAgICAgIDxwYXJhbSBpZD0iNjQiIHZhbHVlPSI0NCIvPgogICAgICAgIDxwYXJhbSBpZD0iNjYiIHZhbHVlPSI3NSIvPgogICAgICAgIDxwYXJhbSBpZD0iNjciIHZhbHVlPSI5MiIvPgogICAgICAgIDxwYXJhbSBpZD0iNjgiIHZhbHVlPSI5MyIvPgogICAgICAgIDxwYXJhbSBpZD0iNjkiIHZhbHVlPSI5NCIvPgogICAgICAgIDxwYXJhbSBpZD0iNzAiIHZhbHVlPSIxMDUiLz4KICAgICAgICA8cGFyYW0gaWQ9IjcxIiB2YWx1ZT0iMTA2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI3MiIgdmFsdWU9IjEwOSIvPgogICAgICAgIDxwYXJhbSBpZD0iNzMiIHZhbHVlPSIxMjYiLz4KICAgICAgICA8cGFyYW0gaWQ9Ijc0IiB2YWx1ZT0iMTI3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI3NSIgdmFsdWU9IjEyOCIvPgogICAgICAgIDxwYXJhbSBpZD0iNzYiIHZhbHVlPSIxMjkiLz4KICAgICAgICA8cGFyYW0gaWQ9Ijc3IiB2YWx1ZT0iMTMwIi8+CiAgICAgICAgPHBhcmFtIGlkPSI3OSIgdmFsdWU9IjEzMiIvPgogICAgICAgIDxwYXJhbSBpZD0iODAiIHZhbHVlPSIxMzMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjgxIiB2YWx1ZT0iMTM0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI4MiIgdmFsdWU9IjEzNiIvPgogICAgICAgIDxwYXJhbSBpZD0iODMiIHZhbHVlPSIxMzciLz4KICAgICAgICA8cGFyYW0gaWQ9Ijg0IiB2YWx1ZT0iMTM5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI4NSIgdmFsdWU9IjE0NCIvPgogICAgICAgIDxwYXJhbSBpZD0iODYiIHZhbHVlPSIxNDUiLz4KICAgICAgICA8cGFyYW0gaWQ9Ijg3IiB2YWx1ZT0iMTUyIi8+CiAgICAgICAgPHBhcmFtIGlkPSI4OCIgdmFsdWU9IjE1MyIvPgogICAgICAgIDxwYXJhbSBpZD0iODkiIHZhbHVlPSIxNTkiLz4KICAgICAgICA8cGFyYW0gaWQ9IjkwIiB2YWx1ZT0iMTYwIi8+CiAgICAgICAgPHBhcmFtIGlkPSI5MSIgdmFsdWU9IjE2NCIvPgogICAgICAgIDxwYXJhbSBpZD0iOTIiIHZhbHVlPSIxNjgiLz4KICAgICAgICA8cGFyYW0gaWQ9IjkzIiB2YWx1ZT0iMTY5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI5NCIgdmFsdWU9IjE3MCIvPgogICAgICAgIDxwYXJhbSBpZD0iOTUiIHZhbHVlPSIxNzEiLz4KICAgICAgICA8cGFyYW0gaWQ9Ijk2IiB2YWx1ZT0iMTc4Ii8+CiAgICAgICAgPHBhcmFtIGlkPSI5NyIgdmFsdWU9IjE3OSIvPgogICAgICAgIDxwYXJhbSBpZD0iOTgiIHZhbHVlPSIxODAiLz4gICAgIAogICAgICAgIDxwYXJhbSBpZD0iOTkiIHZhbHVlPSIxODEiLz4gICAgIAogICAgICAgIDxwYXJhbSBpZD0iMTAwIiB2YWx1ZT0iMTgyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDEiIHZhbHVlPSIxODMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwMiIgdmFsdWU9IjE4NSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzIiB2YWx1ZT0iMTg2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDQiIHZhbHVlPSIxODciLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwNSIgdmFsdWU9IjE4OCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA2IiB2YWx1ZT0iMTg5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDciIHZhbHVlPSIxOTAiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwOCIgdmFsdWU9IjE5MSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA5IiB2YWx1ZT0iMTkyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMTAiIHZhbHVlPSIxOTMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjExMSIgdmFsdWU9IjE5NCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTEyIiB2YWx1ZT0iMTk2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMTMiIHZhbHVlPSIxOTciLz4KICAgICAgICA8cGFyYW0gaWQ9IjExNCIgdmFsdWU9IjE5OCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTE1IiB2YWx1ZT0iMTk5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMTYiIHZhbHVlPSIyMDAiLz4KICAgICAgICA8cGFyYW0gaWQ9IjExNyIgdmFsdWU9IjIwMSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTE4IiB2YWx1ZT0iMjAyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMTkiIHZhbHVlPSIyMDMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEyMCIgdmFsdWU9IjIwNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTIxIiB2YWx1ZT0iMjA3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMjIiIHZhbHVlPSIyMDgiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEyMyIgdmFsdWU9IjIwOSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTI0IiB2YWx1ZT0iMjEwIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMjUiIHZhbHVlPSIyMTEiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEyNiIgdmFsdWU9IjIxMiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTI3IiB2YWx1ZT0iMjEzIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMjgiIHZhbHVlPSIyMTQiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEyOSIgdmFsdWU9IjIxOCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTMwIiB2YWx1ZT0iMjE5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMzEiIHZhbHVlPSIyMjAiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEzMiIgdmFsdWU9IjIyMSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTMzIiB2YWx1ZT0iMjIyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMzQiIHZhbHVlPSIyMjMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEzNSIgdmFsdWU9IjIyNSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTM2IiB2YWx1ZT0iMjI2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMzciIHZhbHVlPSIyMzEiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEzOCIgdmFsdWU9IjIzMiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTQyIiB2YWx1ZT0iMjM0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxNDMiIHZhbHVlPSIyMzgiLz4KICAgICAgICA8cGFyYW0gaWQ9IjE0NCIgdmFsdWU9IjIzOSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTQ1IiB2YWx1ZT0iMjQzIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxNDYiIHZhbHVlPSIyNDUiLz4KCiAgIAogICAgICAgIDxwYXJhbSBpZD0iMTAwMCIgdmFsdWU9Ijc2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDAxIiB2YWx1ZT0iNzciLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwMDIiIHZhbHVlPSI3OCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAwMyIgdmFsdWU9Ijc5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDA0IiB2YWx1ZT0iODAiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwMDUiIHZhbHVlPSI4MSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAwNiIgdmFsdWU9IjgyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDA3IiB2YWx1ZT0iODMiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwMDgiIHZhbHVlPSI4NCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAwOSIgdmFsdWU9Ijg1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDExIiB2YWx1ZT0iODciLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwMTMiIHZhbHVlPSI4OSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAxNCIgdmFsdWU9IjkwIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDE1IiB2YWx1ZT0iOTEiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwMTkiIHZhbHVlPSI5NSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAyMSIgdmFsdWU9Ijk3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDIyIiB2YWx1ZT0iOTgiLz4KICAgICAgICA8cGFyYW0gaWQ9IjEwMjMiIHZhbHVlPSI5OSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAyNCIgdmFsdWU9IjEwMCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAyNSIgdmFsdWU9IjEwMSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAyNiIgdmFsdWU9IjEwMiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAyNyIgdmFsdWU9IjEwMyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAyOCIgdmFsdWU9IjEwNyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAyOSIgdmFsdWU9IjEwOCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzMCIgdmFsdWU9IjExMCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzMSIgdmFsdWU9IjExMSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzMiIgdmFsdWU9IjExMiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzMyIgdmFsdWU9IjExMyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzNCIgdmFsdWU9IjExNCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzNSIgdmFsdWU9IjExNSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzNiIgdmFsdWU9IjExNiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzNyIgdmFsdWU9IjExNyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzOCIgdmFsdWU9IjExOCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTAzOSIgdmFsdWU9IjExOSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA0MCIgdmFsdWU9IjEyMCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA0MSIgdmFsdWU9IjEyMSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA0MiIgdmFsdWU9IjEyMiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA0MyIgdmFsdWU9IjEyMyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA0NCIgdmFsdWU9IjEyNCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA0NSIgdmFsdWU9IjEyNSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA0NiIgdmFsdWU9IjEzMSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA0NyIgdmFsdWU9IjEzNSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA0OCIgdmFsdWU9IjEzOCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA0OSIgdmFsdWU9IjE0MCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1MCIgdmFsdWU9IjE0MSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1MSIgdmFsdWU9IjE0MiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1MiIgdmFsdWU9IjE0MyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1MyIgdmFsdWU9IjE0NiIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1NCIgdmFsdWU9IjE0NyIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1NSIgdmFsdWU9IjE0OCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1NiIgdmFsdWU9IjE0OSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1NyIgdmFsdWU9IjE1MCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1OCIgdmFsdWU9IjE1MSIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA1OSIgdmFsdWU9IjE1NCIvPgogICAgICAgIDxwYXJhbSBpZD0iMTA2MCIgdmFsdWU9Ijc0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDYxIiB2YWx1ZT0iMTU1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDYyIiB2YWx1ZT0iMTU2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDYzIiB2YWx1ZT0iMTU3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDY0IiB2YWx1ZT0iMTU4Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDY1IiB2YWx1ZT0iMTYxIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDY2IiB2YWx1ZT0iMTYyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDY3IiB2YWx1ZT0iMTYzIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDY4IiB2YWx1ZT0iMTY1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDY5IiB2YWx1ZT0iMTY2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDcwIiB2YWx1ZT0iMTY3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDcxIiB2YWx1ZT0iMTcyIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDcyIiB2YWx1ZT0iMTczIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDczIiB2YWx1ZT0iMTc0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDc0IiB2YWx1ZT0iMTc1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDc1IiB2YWx1ZT0iMTc2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDc2IiB2YWx1ZT0iMTc3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDc3IiB2YWx1ZT0iMTg0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDc4IiB2YWx1ZT0iMTk1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDc5IiB2YWx1ZT0iMjA0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDgwIiB2YWx1ZT0iMjA1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDgxIiB2YWx1ZT0iMjE1Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDgyIiB2YWx1ZT0iMjE2Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDgzIiB2YWx1ZT0iMjE3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDg0IiB2YWx1ZT0iMjI0Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDg1IiB2YWx1ZT0iMjI3Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDg2IiB2YWx1ZT0iMjI4Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDg3IiB2YWx1ZT0iMjI5Ii8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDg4IiB2YWx1ZT0iMjMwIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDg5IiB2YWx1ZT0iMjMzIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDkwIiB2YWx1ZT0iMjM1Ii8+Cgk8cGFyYW0gaWQ9IjEwOTEiIHZhbHVlPSIyMzYiLz4KCTxwYXJhbSBpZD0iMTA5MiIgdmFsdWU9IjIzNyIvPgoJPHBhcmFtIGlkPSIxMDkzIiB2YWx1ZT0iMjQwIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDk0IiB2YWx1ZT0iMjQxIi8+CiAgICAgICAgPHBhcmFtIGlkPSIxMDk1IiB2YWx1ZT0iMjQyIi8+Cgk8cGFyYW0gaWQ9IjEwOTYiIHZhbHVlPSIyNDQiLz4KCgogICAgICAgIDxwYXJhbSBpZD0iOTk5OTk5OTk5IiB2YWx1ZT0iLTEiLz48IS0tIFNjcmF0Y2hpbmcgLS0+CgogICAgPC9hY3Rpb24+CiAgICAKICAgIDwhLS0gRmFjZSBhY3Rpb25zIC0tPgogICAgPGFjdGlvbiAgaWQ9IlRhbGsiIHN0YXRlPSJ0YWxrIiBwcmVjZWRlbmNlPSI1MDAiIGdlb21ldHJ5dHlwZT0idmVydGljYWwiIGFjdGl2ZXBhcnRzZXQ9InNwZWFrIiBhc3NldHBhcnRkZWZpbml0aW9uPSJzcGsiIGxheT0ibHNwIi8+CiAgICAKICAgIDxhY3Rpb24gIGlkPSJHZXN0dXJlIiBzdGF0ZT0iZ2VzdCIgcHJlY2VkZW5jZT0iNTEwIiBnZW9tZXRyeXR5cGU9InZlcnRpY2FsIiBhY3RpdmVwYXJ0c2V0PSJnZXN0dXJlIiBhc3NldHBhcnRkZWZpbml0aW9uPSJVU0VfUEFSQU1FVEVSIi8+CiAgICA8YWN0aW9uICBpZD0iR2VzdHVyZVNtaWxlIiBzdGF0ZT0ic21sIiBwcmVjZWRlbmNlPSI1MTAiIGdlb21ldHJ5dHlwZT0idmVydGljYWwiIGFjdGl2ZXBhcnRzZXQ9Imdlc3R1cmUiIGFzc2V0cGFydGRlZmluaXRpb249InNtbCIgbGF5PSJsc20iLz4KICAgIDxhY3Rpb24gIGlkPSJHZXN0dXJlU2FkIiBzdGF0ZT0ic2FkIiBwcmVjZWRlbmNlPSI1MTAiIGdlb21ldHJ5dHlwZT0idmVydGljYWwiIGFjdGl2ZXBhcnRzZXQ9Imdlc3R1cmUiIGFzc2V0cGFydGRlZmluaXRpb249InNhZCIgbGF5PSJsc2EiLz4KICAgIDxhY3Rpb24gIGlkPSJHZXN0dXJlQW5ncnkiIHN0YXRlPSJhZ3IiIHByZWNlZGVuY2U9IjUxMCIgZ2VvbWV0cnl0eXBlPSJ2ZXJ0aWNhbCIgYWN0aXZlcGFydHNldD0iZ2VzdHVyZSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0iYWdyIiBsYXk9ImxhZyIvPgogICAgPGFjdGlvbiAgaWQ9Ikdlc3R1cmVTdXJwcmlzZWQiIHN0YXRlPSJzcnAiIHByZWNlZGVuY2U9IjUxMCIgZ2VvbWV0cnl0eXBlPSJ2ZXJ0aWNhbCIgYWN0aXZlcGFydHNldD0iZ2VzdHVyZSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3JwIiBsYXk9ImxzciIvPgoKICAgIDxhY3Rpb24gIGlkPSJTbGVlcCIgc3RhdGU9IlNsZWVwIiBwcmVjZWRlbmNlPSI1MjAiIGdlb21ldHJ5dHlwZT0idmVydGljYWwiIGFjdGl2ZXBhcnRzZXQ9ImV5ZSIgcHJldmVudGhlYWR0dXJuPSJ0cnVlIiBhc3NldHBhcnRkZWZpbml0aW9uPSJleWIiIGxheT0ibGV5Ii8+CgogICAgPCEtLSBMb3dlciBwcmlvcml0eSBmdWxsIGJvZHkgYWN0aW9ucyAtLT4KICAgIDxhY3Rpb24gIGlkPSJNb3ZlIiBzdGF0ZT0ibXYiIHByZWNlZGVuY2U9IjYwMCIgZ2VvbWV0cnl0eXBlPSJ2ZXJ0aWNhbCIgYWN0aXZlcGFydHNldD0id2FsayIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0id2xrIiBwcmV2ZW50cz0iU2xlZXAiLz4KICAgIDxhY3Rpb24gIGlkPSJEZWZhdWx0IiBwcmVjZWRlbmNlPSIxMDAwIiBzdGF0ZT0ic3RkIiBtYWluPSIxIiBpc2RlZmF1bHQ9IjEiIGdlb21ldHJ5dHlwZT0idmVydGljYWwiIGFjdGl2ZXBhcnRzZXQ9ImZpZ3VyZSIgYXNzZXRwYXJ0ZGVmaW5pdGlvbj0ic3RkIi8+Cgo8L2FjdGlvbnM+Cg==";Object.defineProperty(ca,"__esModule",{value:!0});ca.AvatarActionsData=void 0;const T1=fa;class os{constructor(t){this._map=new Map,this._handItems=new Map,new DOMParser().parseFromString(t,"text/xml").querySelectorAll("action").forEach(r=>{const n=r.getAttribute("id");if(n==null)return;const o=E1(r);this._map.set(n,o),r.querySelectorAll("param").forEach(s=>{const a=s.getAttribute("id");if(a==null)return;const l=Number(s?.getAttribute("value"));isNaN(l)||this._handItems.set(`${n}_${a}`,l)})})}static async fromUrl(t){const r=await(await fetch(t)).text();return new os(r)}static default(){return new os(atob(T1.actionsXml))}getHandItemId(t,e){return this._handItems.get(`${t}_${e}`)}getActions(){return Array.from(this._map.values())}getAction(t){return this._map.get(t)}}ca.AvatarActionsData=os;function E1(i){var t;const e=i.getAttribute("id"),r=i.getAttribute("state"),n=i.getAttribute("precedence"),o=i.getAttribute("geometrytype"),s=i.getAttribute("activepartset"),a=i.getAttribute("assetpartdefinition"),l=i.getAttribute("prevents"),c=i.getAttribute("animation"),d=i.getAttribute("main"),g=i.getAttribute("isdefault");if(e==null)throw new Error("Invalid id");if(r==null)throw new Error("Invalid state");if(n==null)throw new Error("Invalid precedence");if(o==null)throw new Error("Invalid geometry type");if(a==null)throw new Error("Invalid asset part definition");const u=(t=l?.split(","))!==null&&t!==void 0?t:[],h=Number(n);if(isNaN(h))throw new Error("Invalid precedence");return{id:e,state:r,precedence:h,geometrytype:o,activepartset:s,assetpartdefinition:a,prevents:u,animation:c==="1",main:d==="1",isdefault:g==="1"}}var da={},Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.getNumberFromAttribute=void 0;function F1(i){if(i==null)return;const t=Number(i);if(!isNaN(t))return t}Jn.getNumberFromAttribute=F1;var ga={};Object.defineProperty(ga,"__esModule",{value:!0});ga.geometryXml=void 0;ga.geometryXml="PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGdlb21ldHJ5IGRpcmVjdGlvbj0iMCIgPgoKCTxjYW1lcmE+CgkJPHg+MDwveD4KCQk8eT4wPC95PgoJCTx6PjEwPC96PgoJPC9jYW1lcmE+CgkKCTxjYW52YXMgc2NhbGU9ImgiPgoJCTwhLS0gZHggYW5kIGR5IHZhbHVlcyBhcmUgb2Zmc2V0cyBmb3IgZmlndXJlIHBhcnRzIGluIGNhbnZhcywgdXNlZCBieSBBdmF0YXJJbWFnZSwgbWFpbmx5IGZvciBsYXkgYW5kIHN3aW0gLS0+CgkJPGdlb21ldHJ5IGlkPSJ2ZXJ0aWNhbCIgd2lkdGg9IjkwIiBoZWlnaHQ9IjEzMCIgZHk9IjAiIGR4PSIwIi8+CiAgICAgICAgPGdlb21ldHJ5IGlkPSJzaXR0aW5nIiB3aWR0aD0iOTAiIGhlaWdodD0iMTMwIiBkeT0iMCIgZHg9IjAiLz4KCQk8Z2VvbWV0cnkgaWQ9Imhvcml6b250YWwiIHdpZHRoPSIxMjgiIGhlaWdodD0iODAiIGR5PSIwIiBkeD0iMzAiLz4KCQk8Z2VvbWV0cnkgaWQ9InN3aG9yaXpvbnRhbCIgd2lkdGg9IjE5MiIgaGVpZ2h0PSIxMjAiIGR5PSItNDAiIGR4PSIwIi8+Cgk8L2NhbnZhcz4KCgk8Y2FudmFzIHNjYWxlPSJzaCI+CgkJPGdlb21ldHJ5IGlkPSJ2ZXJ0aWNhbCIgd2lkdGg9IjQ1IiBoZWlnaHQ9IjcyIiBkeT0iMCIgZHg9IjAiLz4KICAgICAgICA8Z2VvbWV0cnkgaWQ9InNpdHRpbmciIHdpZHRoPSI0NSIgaGVpZ2h0PSI3MiIgZHk9IjAiIGR4PSIwIi8+CgkJPGdlb21ldHJ5IGlkPSJob3Jpem9udGFsIiB3aWR0aD0iNjQiIGhlaWdodD0iNTAiIGR5PSItMTAiIGR4PSIxNSIvPgoJCTxnZW9tZXRyeSBpZD0ic3dob3Jpem9udGFsIiB3aWR0aD0iOTYiIGhlaWdodD0iNzAiIGR5PSItMjAiIGR4PSIwIi8+CgkJPGdlb21ldHJ5IGlkPSJzd2ltIiB3aWR0aD0iNjQiIGhlaWdodD0iNzAiIGR5PSIxMCIgZHg9IjI1Ii8+Cgk8L2NhbnZhcz4KCgk8YXZhdGFyc2V0IGlkPSJmdWxsIj4KCQk8YXZhdGFyc2V0IGlkPSJib2R5IiBtYWluPSIxIj4KCQkJPGJvZHlwYXJ0IGlkPSJ0b3AiIC8+CgkJCTxib2R5cGFydCBpZD0iYm90dG9tIiAvPgoJCQk8Ym9keXBhcnQgaWQ9ImJlaGluZCIgLz4KCQkJPGJvZHlwYXJ0IGlkPSJ0b3JzbyIgLz4KCQkJPGJvZHlwYXJ0IGlkPSJsZWZ0aXRlbSIgLz4KICAgICAgICAgICAgPGJvZHlwYXJ0IGlkPSJyaWdodGl0ZW0iIC8+CgkJCTxib2R5cGFydCBpZD0ibGVmdGFybSIgLz4KCQkJPGJvZHlwYXJ0IGlkPSJyaWdodGFybSIgLz4KCQk8L2F2YXRhcnNldD4KCQk8YXZhdGFyc2V0IGlkPSJoZWFkIj4KCQkJPGJvZHlwYXJ0IGlkPSJoZWFkIiAvPgoJCTwvYXZhdGFyc2V0PgoJPC9hdmF0YXJzZXQ+CgkKCTx0eXBlIGlkPSJ2ZXJ0aWNhbCIgPgoJCTxib2R5cGFydCBpZD0idG9wIiB4PSIwIiB5PSIwIiB6PSIwLjAiIHJhZGl1cz0iMi4wIiAvPgoJCTxib2R5cGFydCBpZD0iYm90dG9tIiB4PSIwIiB5PSIwIiB6PSIwLjAiIHJhZGl1cz0iMC4wMDEiIC8+CgkJPGJvZHlwYXJ0IGlkPSJiZWhpbmQiIHg9IjAiIHk9IjAiIHo9IjAuMiIgcmFkaXVzPSIwLjMiIC8+CgkJPGJvZHlwYXJ0IGlkPSJ0b3JzbyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjQiID4KCQkJPCEtLSA8Ym91bmRhcnkgdHlwZT0iY2lyY2xlL3NwaGVyZS9ib3gvY3lsaW5kZXIiIHJhZGl1cz0iMC40IiAvPiAtLT4KCQkJPGl0ZW0gaWQ9ImJkIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMSIgLz4KCQkJPGl0ZW0gaWQ9ImJkcyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMSIgLz4KCQkJPGl0ZW0gaWQ9ImNoIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA0IiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9InNoIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAyIiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImxnIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAzIiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9InNzIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA0IiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KICAgICAgICAgICAgPGl0ZW0gaWQ9ImNwIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA0NSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KICAgICAgICAgICAgPGl0ZW0gaWQ9IndhIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA1IiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImNjIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA2IiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KICAgICAgICAgICAgPGl0ZW0gaWQ9ImNhIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA3IiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQk8L2JvZHlwYXJ0PgoJCTxib2R5cGFydCBpZD0ibGVmdGl0ZW0iIHg9IjAiIHk9IjAiIHo9Ii0wLjI5IiByYWRpdXM9IjAuMyI+CgkJCTxpdGVtIGlkPSJsaSIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCTwvYm9keXBhcnQ+CiAgICAgICAgPGJvZHlwYXJ0IGlkPSJyaWdodGl0ZW0iIHg9IjAiIHk9IjAiIHo9Ii0wLjI5IiByYWRpdXM9IjAuMyI+CgkJCTxpdGVtIGlkPSJyaSIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCTwvYm9keXBhcnQ+CgkJPGJvZHlwYXJ0IGlkPSJsZWZ0YXJtIiB4PSItMSIgeT0iMCIgej0iLTAuNTEiIHJhZGl1cz0iMC41Ij4KCQkJPGl0ZW0gaWQ9ImxoIiAgeD0iMCIgeT0iMCIgej0iMCIgIHJhZGl1cz0iMC4wMSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImxocyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0ibHMiICB4PSIwIiB5PSIwIiB6PSIwIiAgcmFkaXVzPSIwLjAyIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0ibGMiICB4PSIwIiB5PSIwIiB6PSIwIiAgcmFkaXVzPSIwLjAyNSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQk8L2JvZHlwYXJ0PgoJCTxib2R5cGFydCBpZD0icmlnaHRhcm0iIHg9IjEiIHk9IjAiIHo9Ii0wLjUxIiByYWRpdXM9IjAuNSI+CgkJCTxpdGVtIGlkPSJyaCIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0icmhzIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJycyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAyIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0icmMiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMjUiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJPC9ib2R5cGFydD4KCQk8Ym9keXBhcnQgaWQ9ImhlYWQiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC41Ij4KCQkJPGl0ZW0gaWQ9ImhkIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgoJCQk8aXRlbSBpZD0iZmMiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDIiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJleSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMyIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImhyIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA0IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgoJCQk8aXRlbSBpZD0iaHJiIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDUiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjEiIC8+CgkJCTxpdGVtIGlkPSJmYSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wNiIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImVhIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA3IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0iaGEiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDgiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJoZSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wOSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQk8L2JvZHlwYXJ0PgoJPC90eXBlPgoKICAgIDx0eXBlIGlkPSJzaXR0aW5nIiA+CiAgICAgICAgPGJvZHlwYXJ0IGlkPSJ0b3AiIHg9IjAiIHk9IjAiIHo9IjAuMCIgcmFkaXVzPSIyLjAiIC8+CiAgICAgICAgPGJvZHlwYXJ0IGlkPSJib3R0b20iIHg9IjAiIHk9IjAiIHo9IjAuMCIgcmFkaXVzPSIwLjAwMSIgLz4KICAgICAgICA8Ym9keXBhcnQgaWQ9ImJlaGluZCIgeD0iMCIgeT0iMCIgej0iMC4yIiByYWRpdXM9IjAuMyIgLz4KICAgICAgICA8Ym9keXBhcnQgaWQ9InRvcnNvIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuNCIgPgogICAgICAgICAgICA8IS0tIDxib3VuZGFyeSB0eXBlPSJjaXJjbGUvc3BoZXJlL2JveC9jeWxpbmRlciIgcmFkaXVzPSIwLjQiIC8+IC0tPgogICAgICAgICAgICA8aXRlbSBpZD0iYmQiIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDEiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0iYmRzIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0iY2giIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDMiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0ic2giIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDQiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0ibGciIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDIiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0ic3MiIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDQiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0iY3AiIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDQ1IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0id2EiIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDUiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0iY2MiIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDYiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0iY2EiIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDciICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgIDwvYm9keXBhcnQ+CiAgICAgICAgPGJvZHlwYXJ0IGlkPSJsZWZ0aXRlbSIgeD0iMCIgeT0iMCIgej0iLTAuMjkiIHJhZGl1cz0iMC4zIj4KICAgICAgICAgICAgPGl0ZW0gaWQ9ImxpIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CiAgICAgICAgPC9ib2R5cGFydD4KICAgICAgICA8Ym9keXBhcnQgaWQ9InJpZ2h0aXRlbSIgeD0iMCIgeT0iMCIgej0iLTAuMjkiIHJhZGl1cz0iMC4zIj4KICAgICAgICAgICAgPGl0ZW0gaWQ9InJpIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CiAgICAgICAgPC9ib2R5cGFydD4KICAgICAgICA8Ym9keXBhcnQgaWQ9ImxlZnRhcm0iIHg9Ii0xIiB5PSIwIiB6PSItMC41MSIgcmFkaXVzPSIwLjUiPgogICAgICAgICAgICA8aXRlbSBpZD0ibGgiICB4PSIwIiB5PSIwIiB6PSIwIiAgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0ibGhzIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CiAgICAgICAgICAgIDxpdGVtIGlkPSJscyIgIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDIiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CiAgICAgICAgICAgIDxpdGVtIGlkPSJsYyIgIHg9IjAiIHk9IjAiIHo9IjAiICByYWRpdXM9IjAuMDI1IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgIDwvYm9keXBhcnQ+CiAgICAgICAgPGJvZHlwYXJ0IGlkPSJyaWdodGFybSIgeD0iMSIgeT0iMCIgej0iLTAuNTEiIHJhZGl1cz0iMC41Ij4KICAgICAgICAgICAgPGl0ZW0gaWQ9InJoIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CiAgICAgICAgICAgIDxpdGVtIGlkPSJyaHMiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KICAgICAgICAgICAgPGl0ZW0gaWQ9InJzIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDIiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CiAgICAgICAgICAgIDxpdGVtIGlkPSJyYyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAyNSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KICAgICAgICA8L2JvZHlwYXJ0PgogICAgICAgIDxib2R5cGFydCBpZD0iaGVhZCIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjUiPgogICAgICAgICAgICA8aXRlbSBpZD0iaGQiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjEiIC8+CiAgICAgICAgICAgIDxpdGVtIGlkPSJmYyIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMiIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KICAgICAgICAgICAgPGl0ZW0gaWQ9ImV5IiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAzIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0iaHIiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDQiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjEiIC8+CiAgICAgICAgICAgIDxpdGVtIGlkPSJocmIiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wNSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMSIgLz4KICAgICAgICAgICAgPGl0ZW0gaWQ9ImZhIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA2IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0iZWEiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDciIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CiAgICAgICAgICAgIDxpdGVtIGlkPSJoYSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wOCIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KICAgICAgICAgICAgPGl0ZW0gaWQ9ImhlIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA5IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgIDwvYm9keXBhcnQ+CiAgICA8L3R5cGU+CgoKCTx0eXBlIGlkPSJob3Jpem9udGFsIiA+CgkJPGJvZHlwYXJ0IGlkPSJ0b3JzbyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjQiID4KCQkJPCEtLSA8Ym91bmRhcnkgdHlwZT0iY2lyY2xlL3NwaGVyZS9ib3gvY3lsaW5kZXIiIHJhZGl1cz0iMC40IiAvPiAtLT4KCQkJPGl0ZW0gaWQ9ImJkIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMSIgLz4KCQkJPGl0ZW0gaWQ9ImJkcyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMSIgLz4KCQkJPGl0ZW0gaWQ9ImNoIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAyIiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KICAgICAgICAgICAgPGl0ZW0gaWQ9ImNwIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAyNSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9InNoIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA0IiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImxnIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAzIiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9InNzIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAzIiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9IndhIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA1IiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImNjIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA2IiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KICAgICAgICAgICAgPGl0ZW0gaWQ9ImNhIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA3IiAgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQk8L2JvZHlwYXJ0PgoJCTxib2R5cGFydCBpZD0ibGVmdGl0ZW0iIHg9IjAiIHk9IjAiIHo9Ii0wLjI5IiByYWRpdXM9IjAuMyI+CgkJCTxpdGVtIGlkPSJsaSIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCTwvYm9keXBhcnQ+CiAgICAgICAgPGJvZHlwYXJ0IGlkPSJyaWdodGl0ZW0iIHg9IjAiIHk9IjAiIHo9Ii0wLjI5IiByYWRpdXM9IjAuMyI+CgkJCTxpdGVtIGlkPSJyaSIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCTwvYm9keXBhcnQ+CgkJPGJvZHlwYXJ0IGlkPSJsZWZ0YXJtIiB4PSItMSIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjYiPgoJCQk8aXRlbSBpZD0ibGgiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImxocyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0ibHMiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMiIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImxjIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDI1IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCTwvYm9keXBhcnQ+CgkJPGJvZHlwYXJ0IGlkPSJyaWdodGFybSIgeD0iMSIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjYiPgoJCQk8aXRlbSBpZD0icmgiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9InJocyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0icnMiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMiIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9InJjIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDI1IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCTwvYm9keXBhcnQ+CgkJPGJvZHlwYXJ0IGlkPSJoZWFkIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuNSI+CgkJCTxpdGVtIGlkPSJoZCIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMSIgLz4KCQkJPGl0ZW0gaWQ9ImZjIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAyIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0iZXkiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDMiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJociIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wNCIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMSIgLz4KCQkJPGl0ZW0gaWQ9ImhyYiIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA1IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgoJCQk8aXRlbSBpZD0iZmEiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDYiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJlYSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wNyIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImhhIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA4IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0iaGUiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDkiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJPC9ib2R5cGFydD4KCTwvdHlwZT4KCQkKCTx0eXBlIGlkPSJzd2hvcml6b250YWwiID4KCQk8Ym9keXBhcnQgaWQ9InRvcnNvIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuNCIgPgoJCQk8IS0tIDxib3VuZGFyeSB0eXBlPSJjaXJjbGUvc3BoZXJlL2JveC9jeWxpbmRlciIgcmFkaXVzPSIwLjQiIC8+IC0tPgoJCQk8aXRlbSBpZD0iYmQiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgoJCQk8aXRlbSBpZD0iYmRzIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgoJCQk8aXRlbSBpZD0iY2giICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDIiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0iY3AiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDI1IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0ic2giICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDQiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0ibGciICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDMiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0ic3MiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDMiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0id2EiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDUiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0iY2MiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDYiICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgogICAgICAgICAgICA8aXRlbSBpZD0iY2EiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDciICBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCTwvYm9keXBhcnQ+CgkJPGJvZHlwYXJ0IGlkPSJsZWZ0aXRlbSIgeD0iMCIgeT0iMCIgej0iLTAuMjkiIHJhZGl1cz0iMC4zIj4KCQkJPGl0ZW0gaWQ9ImxpIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJPC9ib2R5cGFydD4KICAgICAgICA8Ym9keXBhcnQgaWQ9InJpZ2h0aXRlbSIgeD0iMCIgeT0iMCIgej0iLTAuMjkiIHJhZGl1cz0iMC4zIj4KCQkJPGl0ZW0gaWQ9InJpIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJPC9ib2R5cGFydD4KCQk8Ym9keXBhcnQgaWQ9ImxlZnRhcm0iIHg9Ii0xIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuNiI+CgkJCTxpdGVtIGlkPSJsaCIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0ibGhzIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJscyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAyIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0ibGMiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMjUiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJPC9ib2R5cGFydD4KCQk8Ym9keXBhcnQgaWQ9InJpZ2h0YXJtIiB4PSIxIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuNiI+CgkJCTxpdGVtIGlkPSJyaCIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0icmhzIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJycyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAyIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0icmMiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMjUiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJPC9ib2R5cGFydD4KCQk8Ym9keXBhcnQgaWQ9ImhlYWQiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC41Ij4KCQkJPGl0ZW0gaWQ9ImhkIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgoJCQk8aXRlbSBpZD0iZmMiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDIiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJleSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMyIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImhyIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA0IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgoJCQk8aXRlbSBpZD0iaHJiIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDUiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjEiIC8+CgkJCTxpdGVtIGlkPSJmYSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wNiIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImVhIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA3IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0iaGEiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDgiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJoZSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wOSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQk8L2JvZHlwYXJ0PgoJPC90eXBlPgoKCTx0eXBlIGlkPSJzd2ltIiA+CgkJPGJvZHlwYXJ0IGlkPSJ0b3JzbyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjQiID4KCQkJPGl0ZW0gaWQ9ImJkcyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgoJCQk8aXRlbSBpZD0ic3MiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMyIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQk8L2JvZHlwYXJ0PgoJCTxib2R5cGFydCBpZD0ibGVmdGFybSIgeD0iLTEiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC42Ij4KCQkJPGl0ZW0gaWQ9ImxocyIgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCTwvYm9keXBhcnQ+CgkJPGJvZHlwYXJ0IGlkPSJyaWdodGFybSIgeD0iMSIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjYiPgoJCQk8aXRlbSBpZD0icmhzIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDEiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJPC9ib2R5cGFydD4KCQk8Ym9keXBhcnQgaWQ9ImhlYWQiIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC41Ij4KCQkJPGl0ZW0gaWQ9ImhkIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjAxIiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgoJCQk8aXRlbSBpZD0iZmMiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDIiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJleSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wMyIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImhyIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA0IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIxIiAvPgoJCQk8aXRlbSBpZD0iaHJiIiB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDUiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjEiIC8+CgkJCTxpdGVtIGlkPSJmYSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wNiIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQkJPGl0ZW0gaWQ9ImVhIiAgeD0iMCIgeT0iMCIgej0iMCIgcmFkaXVzPSIwLjA3IiBueD0iMCIgbnk9IjAiIG56PSItMSIgZG91YmxlPSIwIiAvPgoJCQk8aXRlbSBpZD0iaGEiICB4PSIwIiB5PSIwIiB6PSIwIiByYWRpdXM9IjAuMDgiIG54PSIwIiBueT0iMCIgbno9Ii0xIiBkb3VibGU9IjAiIC8+CgkJCTxpdGVtIGlkPSJoZSIgIHg9IjAiIHk9IjAiIHo9IjAiIHJhZGl1cz0iMC4wOSIgbng9IjAiIG55PSIwIiBuej0iLTEiIGRvdWJsZT0iMCIgLz4KCQk8L2JvZHlwYXJ0PgoJPC90eXBlPgoKPC9nZW9tZXRyeT4K";Object.defineProperty(da,"__esModule",{value:!0});da.AvatarGeometryData=void 0;const kg=Jn,M1=ga;class ss{constructor(t){this._bodypartMap=new Map,this._avatarSetMap=new Map,this._geometries=new Map,this._bodyPartItemMap=new Map;const e=new DOMParser().parseFromString(t,"text/xml");e.querySelectorAll('canvas[scale="h"] geometry').forEach(r=>{const n=this._getGeometryFromElement(r);this._geometries.set(n.id,n)}),e.querySelectorAll("avatarset").forEach(r=>{const n=r.getAttribute("id");if(n==null)return;r.querySelectorAll("bodypart").forEach(s=>{var a;const l=s.getAttribute("id");if(l!=null){const c=(a=this._avatarSetMap.get(n))!==null&&a!==void 0?a:[];this._avatarSetMap.set(n,[...c,l])}})}),e.querySelectorAll("type").forEach(r=>{const n=r.getAttribute("id");n!=null&&r.querySelectorAll("bodypart").forEach(o=>{const s=this._getBodyPartFromElement(o);if(s==null)return;const a=[];o.querySelectorAll("item").forEach(l=>{const c=this._getBodyPartItemFromElement(l);c!=null&&(a.push(c),this._bodyPartItemMap.set(`${n}_${s.id}_${c.id}`,c))}),this._bodypartMap.set(`${n}_${s.id}`,{...s,items:a})})})}static async fromUrl(t){const r=await(await fetch(t)).text();return new ss(r)}static default(){return new ss(atob(M1.geometryXml))}getBodyPartItem(t,e,r){return this._bodyPartItemMap.get(`${t}_${e}_${r}`)}getBodyPart(t,e){return this._bodypartMap.get(`${t}_${e}`)}getBodyParts(t){var e;return(e=this._avatarSetMap.get(t))!==null&&e!==void 0?e:[]}getGeometry(t){return this._geometries.get(t)}_getGeometryFromElement(t){const e=t.getAttribute("id"),r=Number(t.getAttribute("width")),n=Number(t.getAttribute("height")),o=Number(t.getAttribute("dx")),s=Number(t.getAttribute("dy"));if(e==null)throw new Error("Invalid id");return{id:e,width:r,height:n,dx:o,dy:s}}_getBodyPartFromElement(t){const e=t.getAttribute("id"),r=Number(t.getAttribute("z"));if(e!=null&&!isNaN(r))return{id:e,z:r}}_getBodyPartItemFromElement(t){const e=t.getAttribute("id"),r=kg.getNumberFromAttribute(t.getAttribute("z")),n=kg.getNumberFromAttribute(t.getAttribute("radius"));if(e!=null&&r!=null&&n!=null)return{id:e,z:r,radius:n}}}da.AvatarGeometryData=ss;var Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.LegacyAssetBundle=void 0;class D1{constructor(t){this._folderUrl=t,this._blobs=new Map,this._strings=new Map}async getBlob(t){const e=this._blobs.get(t);if(e!=null)return e;const r=`${this._folderUrl}/${t}`,n=fetch(r).then(o=>o.blob());return this._blobs.set(t,n),n}async getString(t){const e=this._strings.get(t);if(e!=null)return e;const r=`${this._folderUrl}/${t}`,n=fetch(r).then(o=>o.text());return this._strings.set(t,n),n}}Qn.LegacyAssetBundle=D1;var $n={};function ry(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var iy={exports:{}},ml={exports:{}},Hg;function B1(){return Hg||(Hg=1,function(i){/**
 * @license long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/long.js for details
 */(function(t,e){typeof ry=="function"&&i&&i.exports?i.exports=e():(t.dcodeIO=t.dcodeIO||{}).Long=e()})(W,function(){function t(T,F,Z){this.low=T|0,this.high=F|0,this.unsigned=!!Z}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1});function e(T){return(T&&T.__isLong__)===!0}t.isLong=e;var r={},n={};function o(T,F){var Z,O,H;return F?(T>>>=0,(H=0<=T&&T<256)&&(O=n[T],O)?O:(Z=a(T,(T|0)<0?-1:0,!0),H&&(n[T]=Z),Z)):(T|=0,(H=-128<=T&&T<128)&&(O=r[T],O)?O:(Z=a(T,T<0?-1:0,!1),H&&(r[T]=Z),Z))}t.fromInt=o;function s(T,F){if(isNaN(T)||!isFinite(T))return F?I:y;if(F){if(T<0)return I;if(T>=f)return P}else{if(T<=-v)return E;if(T+1>=v)return b}return T<0?s(-T,F).neg():a(T%h|0,T/h|0,F)}t.fromNumber=s;function a(T,F,Z){return new t(T,F,Z)}t.fromBits=a;var l=Math.pow;function c(T,F,Z){if(T.length===0)throw Error("empty string");if(T==="NaN"||T==="Infinity"||T==="+Infinity"||T==="-Infinity")return y;if(typeof F=="number"?(Z=F,F=!1):F=!!F,Z=Z||10,Z<2||36<Z)throw RangeError("radix");var O;if((O=T.indexOf("-"))>0)throw Error("interior hyphen");if(O===0)return c(T.substring(1),F,Z).neg();for(var H=s(l(Z,8)),X=y,U=0;U<T.length;U+=8){var k=Math.min(8,T.length-U),ot=parseInt(T.substring(U,U+k),Z);if(k<8){var lt=s(l(Z,k));X=X.mul(lt).add(s(ot))}else X=X.mul(H),X=X.add(s(ot))}return X.unsigned=F,X}t.fromString=c;function d(T){return T instanceof t?T:typeof T=="number"?s(T):typeof T=="string"?c(T):a(T.low,T.high,T.unsigned)}t.fromValue=d;var g=65536,u=1<<24,h=g*g,f=h*h,v=f/2,m=o(u),y=o(0);t.ZERO=y;var I=o(0,!0);t.UZERO=I;var p=o(1);t.ONE=p;var _=o(1,!0);t.UONE=_;var A=o(-1);t.NEG_ONE=A;var b=a(-1,2147483647,!1);t.MAX_VALUE=b;var P=a(-1,-1,!0);t.MAX_UNSIGNED_VALUE=P;var E=a(0,-2147483648,!1);t.MIN_VALUE=E;var C=t.prototype;return C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},C.toString=function(F){if(F=F||10,F<2||36<F)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(E)){var Z=s(F),O=this.div(Z),H=O.mul(Z).sub(this);return O.toString(F)+H.toInt().toString(F)}else return"-"+this.neg().toString(F);for(var X=s(l(F,6),this.unsigned),U=this,k="";;){var ot=U.div(X),lt=U.sub(ot.mul(X)).toInt()>>>0,et=lt.toString(F);if(U=ot,U.isZero())return et+k;for(;et.length<6;)et="0"+et;k=""+et+k}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(E)?64:this.neg().getNumBitsAbs();for(var F=this.high!=0?this.high:this.low,Z=31;Z>0&&!(F&1<<Z);Z--);return this.high!=0?Z+33:Z+1},C.isZero=function(){return this.high===0&&this.low===0},C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return(this.low&1)===1},C.isEven=function(){return(this.low&1)===0},C.equals=function(F){return e(F)||(F=d(F)),this.unsigned!==F.unsigned&&this.high>>>31===1&&F.high>>>31===1?!1:this.high===F.high&&this.low===F.low},C.eq=C.equals,C.notEquals=function(F){return!this.eq(F)},C.neq=C.notEquals,C.lessThan=function(F){return this.comp(F)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(F){return this.comp(F)<=0},C.lte=C.lessThanOrEqual,C.greaterThan=function(F){return this.comp(F)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(F){return this.comp(F)>=0},C.gte=C.greaterThanOrEqual,C.compare=function(F){if(e(F)||(F=d(F)),this.eq(F))return 0;var Z=this.isNegative(),O=F.isNegative();return Z&&!O?-1:!Z&&O?1:this.unsigned?F.high>>>0>this.high>>>0||F.high===this.high&&F.low>>>0>this.low>>>0?-1:1:this.sub(F).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(E)?E:this.not().add(p)},C.neg=C.negate,C.add=function(F){e(F)||(F=d(F));var Z=this.high>>>16,O=this.high&65535,H=this.low>>>16,X=this.low&65535,U=F.high>>>16,k=F.high&65535,ot=F.low>>>16,lt=F.low&65535,et=0,Q=0,rt=0,at=0;return at+=X+lt,rt+=at>>>16,at&=65535,rt+=H+ot,Q+=rt>>>16,rt&=65535,Q+=O+k,et+=Q>>>16,Q&=65535,et+=Z+U,et&=65535,a(rt<<16|at,et<<16|Q,this.unsigned)},C.subtract=function(F){return e(F)||(F=d(F)),this.add(F.neg())},C.sub=C.subtract,C.multiply=function(F){if(this.isZero()||(e(F)||(F=d(F)),F.isZero()))return y;if(this.eq(E))return F.isOdd()?E:y;if(F.eq(E))return this.isOdd()?E:y;if(this.isNegative())return F.isNegative()?this.neg().mul(F.neg()):this.neg().mul(F).neg();if(F.isNegative())return this.mul(F.neg()).neg();if(this.lt(m)&&F.lt(m))return s(this.toNumber()*F.toNumber(),this.unsigned);var Z=this.high>>>16,O=this.high&65535,H=this.low>>>16,X=this.low&65535,U=F.high>>>16,k=F.high&65535,ot=F.low>>>16,lt=F.low&65535,et=0,Q=0,rt=0,at=0;return at+=X*lt,rt+=at>>>16,at&=65535,rt+=H*lt,Q+=rt>>>16,rt&=65535,rt+=X*ot,Q+=rt>>>16,rt&=65535,Q+=O*lt,et+=Q>>>16,Q&=65535,Q+=H*ot,et+=Q>>>16,Q&=65535,Q+=X*k,et+=Q>>>16,Q&=65535,et+=Z*lt+O*ot+H*k+X*U,et&=65535,a(rt<<16|at,et<<16|Q,this.unsigned)},C.mul=C.multiply,C.divide=function(F){if(e(F)||(F=d(F)),F.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?I:y;var Z,O,H;if(this.unsigned){if(F.unsigned||(F=F.toUnsigned()),F.gt(this))return I;if(F.gt(this.shru(1)))return _;H=I}else{if(this.eq(E)){if(F.eq(p)||F.eq(A))return E;if(F.eq(E))return p;var X=this.shr(1);return Z=X.div(F).shl(1),Z.eq(y)?F.isNegative()?p:A:(O=this.sub(F.mul(Z)),H=Z.add(O.div(F)),H)}else if(F.eq(E))return this.unsigned?I:y;if(this.isNegative())return F.isNegative()?this.neg().div(F.neg()):this.neg().div(F).neg();if(F.isNegative())return this.div(F.neg()).neg();H=y}for(O=this;O.gte(F);){Z=Math.max(1,Math.floor(O.toNumber()/F.toNumber()));for(var U=Math.ceil(Math.log(Z)/Math.LN2),k=U<=48?1:l(2,U-48),ot=s(Z),lt=ot.mul(F);lt.isNegative()||lt.gt(O);)Z-=k,ot=s(Z,this.unsigned),lt=ot.mul(F);ot.isZero()&&(ot=p),H=H.add(ot),O=O.sub(lt)}return H},C.div=C.divide,C.modulo=function(F){return e(F)||(F=d(F)),this.sub(this.div(F).mul(F))},C.mod=C.modulo,C.not=function(){return a(~this.low,~this.high,this.unsigned)},C.and=function(F){return e(F)||(F=d(F)),a(this.low&F.low,this.high&F.high,this.unsigned)},C.or=function(F){return e(F)||(F=d(F)),a(this.low|F.low,this.high|F.high,this.unsigned)},C.xor=function(F){return e(F)||(F=d(F)),a(this.low^F.low,this.high^F.high,this.unsigned)},C.shiftLeft=function(F){return e(F)&&(F=F.toInt()),(F&=63)===0?this:F<32?a(this.low<<F,this.high<<F|this.low>>>32-F,this.unsigned):a(0,this.low<<F-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(F){return e(F)&&(F=F.toInt()),(F&=63)===0?this:F<32?a(this.low>>>F|this.high<<32-F,this.high>>F,this.unsigned):a(this.high>>F-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(F){if(e(F)&&(F=F.toInt()),F&=63,F===0)return this;var Z=this.high;if(F<32){var O=this.low;return a(O>>>F|Z<<32-F,Z>>>F,this.unsigned)}else return F===32?a(Z,0,this.unsigned):a(Z>>>F-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?a(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:a(this.low,this.high,!0)},C.toBytes=function(T){return T?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var T=this.high,F=this.low;return[F&255,F>>>8&255,F>>>16&255,F>>>24&255,T&255,T>>>8&255,T>>>16&255,T>>>24&255]},C.toBytesBE=function(){var T=this.high,F=this.low;return[T>>>24&255,T>>>16&255,T>>>8&255,T&255,F>>>24&255,F>>>16&255,F>>>8&255,F&255]},t})}(ml)),ml.exports}(function(i){/**
 * @license bytebuffer.js (c) 2015 Daniel Wirtz <dcode@dcode.io>
 * Backing buffer: ArrayBuffer, Accessor: Uint8Array
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/bytebuffer.js for details
 */(function(t,e){typeof ry=="function"&&i&&i.exports?i.exports=function(){var r;try{r=B1()}catch{}return e(r)}():(t.dcodeIO=t.dcodeIO||{}).ByteBuffer=e(t.dcodeIO.Long)})(W,function(t){var e=function(u,h,f){if(typeof u>"u"&&(u=e.DEFAULT_CAPACITY),typeof h>"u"&&(h=e.DEFAULT_ENDIAN),typeof f>"u"&&(f=e.DEFAULT_NOASSERT),!f){if(u=u|0,u<0)throw RangeError("Illegal capacity");h=!!h,f=!!f}this.buffer=u===0?n:new ArrayBuffer(u),this.view=u===0?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=u,this.littleEndian=h,this.noAssert=f};e.VERSION="5.0.1",e.LITTLE_ENDIAN=!0,e.BIG_ENDIAN=!1,e.DEFAULT_CAPACITY=16,e.DEFAULT_ENDIAN=e.BIG_ENDIAN,e.DEFAULT_NOASSERT=!1,e.Long=t||null;var r=e.prototype;r.__isByteBuffer__,Object.defineProperty(r,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var n=new ArrayBuffer(0),o=String.fromCharCode;function s(u){var h=0;return function(){return h<u.length?u.charCodeAt(h++):null}}function a(){var u=[],h=[];return function(){if(arguments.length===0)return h.join("")+o.apply(String,u);u.length+arguments.length>1024&&(h.push(o.apply(String,u)),u.length=0),Array.prototype.push.apply(u,arguments)}}e.accessor=function(){return Uint8Array},e.allocate=function(u,h,f){return new e(u,h,f)},e.concat=function(u,h,f,v){(typeof h=="boolean"||typeof h!="string")&&(v=f,f=h,h=void 0);for(var m=0,y=0,I=u.length,p;y<I;++y)e.isByteBuffer(u[y])||(u[y]=e.wrap(u[y],h)),p=u[y].limit-u[y].offset,p>0&&(m+=p);if(m===0)return new e(0,f,v);var _=new e(m,f,v),A;for(y=0;y<I;)A=u[y++],p=A.limit-A.offset,!(p<=0)&&(_.view.set(A.view.subarray(A.offset,A.limit),_.offset),_.offset+=p);return _.limit=_.offset,_.offset=0,_},e.isByteBuffer=function(u){return(u&&u.__isByteBuffer__)===!0},e.type=function(){return ArrayBuffer},e.wrap=function(u,h,f,v){if(typeof h!="string"&&(v=f,f=h,h=void 0),typeof u=="string")switch(typeof h>"u"&&(h="utf8"),h){case"base64":return e.fromBase64(u,f);case"hex":return e.fromHex(u,f);case"binary":return e.fromBinary(u,f);case"utf8":return e.fromUTF8(u,f);case"debug":return e.fromDebug(u,f);default:throw Error("Unsupported encoding: "+h)}if(u===null||typeof u!="object")throw TypeError("Illegal buffer");var m;if(e.isByteBuffer(u))return m=r.clone.call(u),m.markedOffset=-1,m;if(u instanceof Uint8Array)m=new e(0,f,v),u.length>0&&(m.buffer=u.buffer,m.offset=u.byteOffset,m.limit=u.byteOffset+u.byteLength,m.view=new Uint8Array(u.buffer));else if(u instanceof ArrayBuffer)m=new e(0,f,v),u.byteLength>0&&(m.buffer=u,m.offset=0,m.limit=u.byteLength,m.view=u.byteLength>0?new Uint8Array(u):null);else if(Object.prototype.toString.call(u)==="[object Array]"){m=new e(u.length,f,v),m.limit=u.length;for(var y=0;y<u.length;++y)m.view[y]=u[y]}else throw TypeError("Illegal buffer");return m},r.writeBitSet=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(!(u instanceof Array))throw TypeError("Illegal BitSet: Not an array");if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}var v=h,m=u.length,y=m>>3,I=0,p;for(h+=this.writeVarint32(m,h);y--;)p=!!u[I++]&1|(!!u[I++]&1)<<1|(!!u[I++]&1)<<2|(!!u[I++]&1)<<3|(!!u[I++]&1)<<4|(!!u[I++]&1)<<5|(!!u[I++]&1)<<6|(!!u[I++]&1)<<7,this.writeByte(p,h++);if(I<m){var _=0;for(p=0;I<m;)p=p|(!!u[I++]&1)<<_++;this.writeByte(p,h++)}return f?(this.offset=h,this):h-v},r.readBitSet=function(u){var h=typeof u>"u";h&&(u=this.offset);var f=this.readVarint32(u),v=f.value,m=v>>3,y=0,I=[],p;for(u+=f.length;m--;)p=this.readByte(u++),I[y++]=!!(p&1),I[y++]=!!(p&2),I[y++]=!!(p&4),I[y++]=!!(p&8),I[y++]=!!(p&16),I[y++]=!!(p&32),I[y++]=!!(p&64),I[y++]=!!(p&128);if(y<v){var _=0;for(p=this.readByte(u++);y<v;)I[y++]=!!(p>>_++&1)}return h&&(this.offset=u),I},r.readBytes=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+u>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+"+u+") <= "+this.buffer.byteLength)}var v=this.slice(h,h+u);return f&&(this.offset+=u),v},r.writeBytes=r.append,r.writeInt8=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal value: "+u+" (not an integer)");if(u|=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}h+=1;var v=this.buffer.byteLength;return h>v&&this.resize((v*=2)>h?v:h),h-=1,this.view[h]=u,f&&(this.offset+=1),this},r.writeByte=r.writeInt8,r.readInt8=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+1) <= "+this.buffer.byteLength)}var f=this.view[u];return(f&128)===128&&(f=-(255-f+1)),h&&(this.offset+=1),f},r.readByte=r.readInt8,r.writeUint8=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal value: "+u+" (not an integer)");if(u>>>=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}h+=1;var v=this.buffer.byteLength;return h>v&&this.resize((v*=2)>h?v:h),h-=1,this.view[h]=u,f&&(this.offset+=1),this},r.writeUInt8=r.writeUint8,r.readUint8=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+1) <= "+this.buffer.byteLength)}var f=this.view[u];return h&&(this.offset+=1),f},r.readUInt8=r.readUint8,r.writeInt16=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal value: "+u+" (not an integer)");if(u|=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}h+=2;var v=this.buffer.byteLength;return h>v&&this.resize((v*=2)>h?v:h),h-=2,this.littleEndian?(this.view[h+1]=(u&65280)>>>8,this.view[h]=u&255):(this.view[h]=(u&65280)>>>8,this.view[h+1]=u&255),f&&(this.offset+=2),this},r.writeShort=r.writeInt16,r.readInt16=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+2) <= "+this.buffer.byteLength)}var f=0;return this.littleEndian?(f=this.view[u],f|=this.view[u+1]<<8):(f=this.view[u]<<8,f|=this.view[u+1]),(f&32768)===32768&&(f=-(65535-f+1)),h&&(this.offset+=2),f},r.readShort=r.readInt16,r.writeUint16=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal value: "+u+" (not an integer)");if(u>>>=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}h+=2;var v=this.buffer.byteLength;return h>v&&this.resize((v*=2)>h?v:h),h-=2,this.littleEndian?(this.view[h+1]=(u&65280)>>>8,this.view[h]=u&255):(this.view[h]=(u&65280)>>>8,this.view[h+1]=u&255),f&&(this.offset+=2),this},r.writeUInt16=r.writeUint16,r.readUint16=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+2) <= "+this.buffer.byteLength)}var f=0;return this.littleEndian?(f=this.view[u],f|=this.view[u+1]<<8):(f=this.view[u]<<8,f|=this.view[u+1]),h&&(this.offset+=2),f},r.readUInt16=r.readUint16,r.writeInt32=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal value: "+u+" (not an integer)");if(u|=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}h+=4;var v=this.buffer.byteLength;return h>v&&this.resize((v*=2)>h?v:h),h-=4,this.littleEndian?(this.view[h+3]=u>>>24&255,this.view[h+2]=u>>>16&255,this.view[h+1]=u>>>8&255,this.view[h]=u&255):(this.view[h]=u>>>24&255,this.view[h+1]=u>>>16&255,this.view[h+2]=u>>>8&255,this.view[h+3]=u&255),f&&(this.offset+=4),this},r.writeInt=r.writeInt32,r.readInt32=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+4) <= "+this.buffer.byteLength)}var f=0;return this.littleEndian?(f=this.view[u+2]<<16,f|=this.view[u+1]<<8,f|=this.view[u],f+=this.view[u+3]<<24>>>0):(f=this.view[u+1]<<16,f|=this.view[u+2]<<8,f|=this.view[u+3],f+=this.view[u]<<24>>>0),f|=0,h&&(this.offset+=4),f},r.readInt=r.readInt32,r.writeUint32=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal value: "+u+" (not an integer)");if(u>>>=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}h+=4;var v=this.buffer.byteLength;return h>v&&this.resize((v*=2)>h?v:h),h-=4,this.littleEndian?(this.view[h+3]=u>>>24&255,this.view[h+2]=u>>>16&255,this.view[h+1]=u>>>8&255,this.view[h]=u&255):(this.view[h]=u>>>24&255,this.view[h+1]=u>>>16&255,this.view[h+2]=u>>>8&255,this.view[h+3]=u&255),f&&(this.offset+=4),this},r.writeUInt32=r.writeUint32,r.readUint32=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+4) <= "+this.buffer.byteLength)}var f=0;return this.littleEndian?(f=this.view[u+2]<<16,f|=this.view[u+1]<<8,f|=this.view[u],f+=this.view[u+3]<<24>>>0):(f=this.view[u+1]<<16,f|=this.view[u+2]<<8,f|=this.view[u+3],f+=this.view[u]<<24>>>0),h&&(this.offset+=4),f},r.readUInt32=r.readUint32,t&&(r.writeInt64=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u=="number")u=t.fromNumber(u);else if(typeof u=="string")u=t.fromString(u);else if(!(u&&u instanceof t))throw TypeError("Illegal value: "+u+" (not an integer or Long)");if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}typeof u=="number"?u=t.fromNumber(u):typeof u=="string"&&(u=t.fromString(u)),h+=8;var v=this.buffer.byteLength;h>v&&this.resize((v*=2)>h?v:h),h-=8;var m=u.low,y=u.high;return this.littleEndian?(this.view[h+3]=m>>>24&255,this.view[h+2]=m>>>16&255,this.view[h+1]=m>>>8&255,this.view[h]=m&255,h+=4,this.view[h+3]=y>>>24&255,this.view[h+2]=y>>>16&255,this.view[h+1]=y>>>8&255,this.view[h]=y&255):(this.view[h]=y>>>24&255,this.view[h+1]=y>>>16&255,this.view[h+2]=y>>>8&255,this.view[h+3]=y&255,h+=4,this.view[h]=m>>>24&255,this.view[h+1]=m>>>16&255,this.view[h+2]=m>>>8&255,this.view[h+3]=m&255),f&&(this.offset+=8),this},r.writeLong=r.writeInt64,r.readInt64=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+8) <= "+this.buffer.byteLength)}var f=0,v=0;this.littleEndian?(f=this.view[u+2]<<16,f|=this.view[u+1]<<8,f|=this.view[u],f+=this.view[u+3]<<24>>>0,u+=4,v=this.view[u+2]<<16,v|=this.view[u+1]<<8,v|=this.view[u],v+=this.view[u+3]<<24>>>0):(v=this.view[u+1]<<16,v|=this.view[u+2]<<8,v|=this.view[u+3],v+=this.view[u]<<24>>>0,u+=4,f=this.view[u+1]<<16,f|=this.view[u+2]<<8,f|=this.view[u+3],f+=this.view[u]<<24>>>0);var m=new t(f,v,!1);return h&&(this.offset+=8),m},r.readLong=r.readInt64,r.writeUint64=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u=="number")u=t.fromNumber(u);else if(typeof u=="string")u=t.fromString(u);else if(!(u&&u instanceof t))throw TypeError("Illegal value: "+u+" (not an integer or Long)");if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}typeof u=="number"?u=t.fromNumber(u):typeof u=="string"&&(u=t.fromString(u)),h+=8;var v=this.buffer.byteLength;h>v&&this.resize((v*=2)>h?v:h),h-=8;var m=u.low,y=u.high;return this.littleEndian?(this.view[h+3]=m>>>24&255,this.view[h+2]=m>>>16&255,this.view[h+1]=m>>>8&255,this.view[h]=m&255,h+=4,this.view[h+3]=y>>>24&255,this.view[h+2]=y>>>16&255,this.view[h+1]=y>>>8&255,this.view[h]=y&255):(this.view[h]=y>>>24&255,this.view[h+1]=y>>>16&255,this.view[h+2]=y>>>8&255,this.view[h+3]=y&255,h+=4,this.view[h]=m>>>24&255,this.view[h+1]=m>>>16&255,this.view[h+2]=m>>>8&255,this.view[h+3]=m&255),f&&(this.offset+=8),this},r.writeUInt64=r.writeUint64,r.readUint64=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+8) <= "+this.buffer.byteLength)}var f=0,v=0;this.littleEndian?(f=this.view[u+2]<<16,f|=this.view[u+1]<<8,f|=this.view[u],f+=this.view[u+3]<<24>>>0,u+=4,v=this.view[u+2]<<16,v|=this.view[u+1]<<8,v|=this.view[u],v+=this.view[u+3]<<24>>>0):(v=this.view[u+1]<<16,v|=this.view[u+2]<<8,v|=this.view[u+3],v+=this.view[u]<<24>>>0,u+=4,f=this.view[u+1]<<16,f|=this.view[u+2]<<8,f|=this.view[u+3],f+=this.view[u]<<24>>>0);var m=new t(f,v,!0);return h&&(this.offset+=8),m},r.readUInt64=r.readUint64);function l(u,h,f,v,m){var y,I,p=m*8-v-1,_=(1<<p)-1,A=_>>1,b=-7,P=f?m-1:0,E=f?-1:1,C=u[h+P];for(P+=E,y=C&(1<<-b)-1,C>>=-b,b+=p;b>0;y=y*256+u[h+P],P+=E,b-=8);for(I=y&(1<<-b)-1,y>>=-b,b+=v;b>0;I=I*256+u[h+P],P+=E,b-=8);if(y===0)y=1-A;else{if(y===_)return I?NaN:(C?-1:1)*(1/0);I=I+Math.pow(2,v),y=y-A}return(C?-1:1)*I*Math.pow(2,y-v)}function c(u,h,f,v,m,y){var I,p,_,A=y*8-m-1,b=(1<<A)-1,P=b>>1,E=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,C=v?0:y-1,T=v?1:-1,F=h<0||h===0&&1/h<0?1:0;for(h=Math.abs(h),isNaN(h)||h===1/0?(p=isNaN(h)?1:0,I=b):(I=Math.floor(Math.log(h)/Math.LN2),h*(_=Math.pow(2,-I))<1&&(I--,_*=2),I+P>=1?h+=E/_:h+=E*Math.pow(2,1-P),h*_>=2&&(I++,_/=2),I+P>=b?(p=0,I=b):I+P>=1?(p=(h*_-1)*Math.pow(2,m),I=I+P):(p=h*Math.pow(2,P-1)*Math.pow(2,m),I=0));m>=8;u[f+C]=p&255,C+=T,p/=256,m-=8);for(I=I<<m|p,A+=m;A>0;u[f+C]=I&255,C+=T,I/=256,A-=8);u[f+C-T]|=F*128}r.writeFloat32=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="number")throw TypeError("Illegal value: "+u+" (not a number)");if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}h+=4;var v=this.buffer.byteLength;return h>v&&this.resize((v*=2)>h?v:h),h-=4,c(this.view,u,h,this.littleEndian,23,4),f&&(this.offset+=4),this},r.writeFloat=r.writeFloat32,r.readFloat32=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+4) <= "+this.buffer.byteLength)}var f=l(this.view,u,this.littleEndian,23,4);return h&&(this.offset+=4),f},r.readFloat=r.readFloat32,r.writeFloat64=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="number")throw TypeError("Illegal value: "+u+" (not a number)");if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}h+=8;var v=this.buffer.byteLength;return h>v&&this.resize((v*=2)>h?v:h),h-=8,c(this.view,u,h,this.littleEndian,52,8),f&&(this.offset+=8),this},r.writeDouble=r.writeFloat64,r.readFloat64=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+8) <= "+this.buffer.byteLength)}var f=l(this.view,u,this.littleEndian,52,8);return h&&(this.offset+=8),f},r.readDouble=r.readFloat64,e.MAX_VARINT32_BYTES=5,e.calculateVarint32=function(u){return u=u>>>0,u<128?1:u<16384?2:u<1<<21?3:u<1<<28?4:5},e.zigZagEncode32=function(u){return((u|=0)<<1^u>>31)>>>0},e.zigZagDecode32=function(u){return u>>>1^-(u&1)|0},r.writeVarint32=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal value: "+u+" (not an integer)");if(u|=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}var v=e.calculateVarint32(u),m;h+=v;var y=this.buffer.byteLength;for(h>y&&this.resize((y*=2)>h?y:h),h-=v,u>>>=0;u>=128;)m=u&127|128,this.view[h++]=m,u>>>=7;return this.view[h++]=u,f?(this.offset=h,this):v},r.writeVarint32ZigZag=function(u,h){return this.writeVarint32(e.zigZagEncode32(u),h)},r.readVarint32=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+1) <= "+this.buffer.byteLength)}var f=0,v=0,m;do{if(!this.noAssert&&u>this.limit){var y=Error("Truncated");throw y.truncated=!0,y}m=this.view[u++],f<5&&(v|=(m&127)<<7*f),++f}while(m&128);return v|=0,h?(this.offset=u,v):{value:v,length:f}},r.readVarint32ZigZag=function(u){var h=this.readVarint32(u);return typeof h=="object"?h.value=e.zigZagDecode32(h.value):h=e.zigZagDecode32(h),h},t&&(e.MAX_VARINT64_BYTES=10,e.calculateVarint64=function(u){typeof u=="number"?u=t.fromNumber(u):typeof u=="string"&&(u=t.fromString(u));var h=u.toInt()>>>0,f=u.shiftRightUnsigned(28).toInt()>>>0,v=u.shiftRightUnsigned(56).toInt()>>>0;return v==0?f==0?h<16384?h<128?1:2:h<1<<21?3:4:f<16384?f<128?5:6:f<1<<21?7:8:v<128?9:10},e.zigZagEncode64=function(u){return typeof u=="number"?u=t.fromNumber(u,!1):typeof u=="string"?u=t.fromString(u,!1):u.unsigned!==!1&&(u=u.toSigned()),u.shiftLeft(1).xor(u.shiftRight(63)).toUnsigned()},e.zigZagDecode64=function(u){return typeof u=="number"?u=t.fromNumber(u,!1):typeof u=="string"?u=t.fromString(u,!1):u.unsigned!==!1&&(u=u.toSigned()),u.shiftRightUnsigned(1).xor(u.and(t.ONE).toSigned().negate()).toSigned()},r.writeVarint64=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u=="number")u=t.fromNumber(u);else if(typeof u=="string")u=t.fromString(u);else if(!(u&&u instanceof t))throw TypeError("Illegal value: "+u+" (not an integer or Long)");if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}typeof u=="number"?u=t.fromNumber(u,!1):typeof u=="string"?u=t.fromString(u,!1):u.unsigned!==!1&&(u=u.toSigned());var v=e.calculateVarint64(u),m=u.toInt()>>>0,y=u.shiftRightUnsigned(28).toInt()>>>0,I=u.shiftRightUnsigned(56).toInt()>>>0;h+=v;var p=this.buffer.byteLength;switch(h>p&&this.resize((p*=2)>h?p:h),h-=v,v){case 10:this.view[h+9]=I>>>7&1;case 9:this.view[h+8]=v!==9?I|128:I&127;case 8:this.view[h+7]=v!==8?y>>>21|128:y>>>21&127;case 7:this.view[h+6]=v!==7?y>>>14|128:y>>>14&127;case 6:this.view[h+5]=v!==6?y>>>7|128:y>>>7&127;case 5:this.view[h+4]=v!==5?y|128:y&127;case 4:this.view[h+3]=v!==4?m>>>21|128:m>>>21&127;case 3:this.view[h+2]=v!==3?m>>>14|128:m>>>14&127;case 2:this.view[h+1]=v!==2?m>>>7|128:m>>>7&127;case 1:this.view[h]=v!==1?m|128:m&127}return f?(this.offset+=v,this):v},r.writeVarint64ZigZag=function(u,h){return this.writeVarint64(e.zigZagEncode64(u),h)},r.readVarint64=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+1) <= "+this.buffer.byteLength)}var f=u,v=0,m=0,y=0,I=0;if(I=this.view[u++],v=I&127,I&128&&(I=this.view[u++],v|=(I&127)<<7,(I&128||this.noAssert&&typeof I>"u")&&(I=this.view[u++],v|=(I&127)<<14,(I&128||this.noAssert&&typeof I>"u")&&(I=this.view[u++],v|=(I&127)<<21,(I&128||this.noAssert&&typeof I>"u")&&(I=this.view[u++],m=I&127,(I&128||this.noAssert&&typeof I>"u")&&(I=this.view[u++],m|=(I&127)<<7,(I&128||this.noAssert&&typeof I>"u")&&(I=this.view[u++],m|=(I&127)<<14,(I&128||this.noAssert&&typeof I>"u")&&(I=this.view[u++],m|=(I&127)<<21,(I&128||this.noAssert&&typeof I>"u")&&(I=this.view[u++],y=I&127,(I&128||this.noAssert&&typeof I>"u")&&(I=this.view[u++],y|=(I&127)<<7,I&128||this.noAssert&&typeof I>"u"))))))))))throw Error("Buffer overrun");var p=t.fromBits(v|m<<28,m>>>4|y<<24,!1);return h?(this.offset=u,p):{value:p,length:u-f}},r.readVarint64ZigZag=function(u){var h=this.readVarint64(u);return h&&h.value instanceof t?h.value=e.zigZagDecode64(h.value):h=e.zigZagDecode64(h),h}),r.writeCString=function(u,h){var f=typeof h>"u";f&&(h=this.offset);var v,m=u.length;if(!this.noAssert){if(typeof u!="string")throw TypeError("Illegal str: Not a string");for(v=0;v<m;++v)if(u.charCodeAt(v)===0)throw RangeError("Illegal str: Contains NULL-characters");if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}m=g.calculateUTF16asUTF8(s(u))[1],h+=m+1;var y=this.buffer.byteLength;return h>y&&this.resize((y*=2)>h?y:h),h-=m+1,g.encodeUTF16toUTF8(s(u),function(I){this.view[h++]=I}.bind(this)),this.view[h++]=0,f?(this.offset=h,this):m},r.readCString=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+1) <= "+this.buffer.byteLength)}var f=u,v,m=-1;return g.decodeUTF8toUTF16(function(){if(m===0)return null;if(u>=this.limit)throw RangeError("Illegal range: Truncated data, "+u+" < "+this.limit);return m=this.view[u++],m===0?null:m}.bind(this),v=a(),!0),h?(this.offset=u,v()):{string:v(),length:u-f}},r.writeIString=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="string")throw TypeError("Illegal str: Not a string");if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}var v=h,m;m=g.calculateUTF16asUTF8(s(u),this.noAssert)[1],h+=4+m;var y=this.buffer.byteLength;if(h>y&&this.resize((y*=2)>h?y:h),h-=4+m,this.littleEndian?(this.view[h+3]=m>>>24&255,this.view[h+2]=m>>>16&255,this.view[h+1]=m>>>8&255,this.view[h]=m&255):(this.view[h]=m>>>24&255,this.view[h+1]=m>>>16&255,this.view[h+2]=m>>>8&255,this.view[h+3]=m&255),h+=4,g.encodeUTF16toUTF8(s(u),function(I){this.view[h++]=I}.bind(this)),h!==v+4+m)throw RangeError("Illegal range: Truncated data, "+h+" == "+(h+4+m));return f?(this.offset=h,this):h-v},r.readIString=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+4) <= "+this.buffer.byteLength)}var f=u,v=this.readUint32(u),m=this.readUTF8String(v,e.METRICS_BYTES,u+=4);return u+=m.length,h?(this.offset=u,m.string):{string:m.string,length:u-f}},e.METRICS_CHARS="c",e.METRICS_BYTES="b",r.writeUTF8String=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}var v,m=h;v=g.calculateUTF16asUTF8(s(u))[1],h+=v;var y=this.buffer.byteLength;return h>y&&this.resize((y*=2)>h?y:h),h-=v,g.encodeUTF16toUTF8(s(u),function(I){this.view[h++]=I}.bind(this)),f?(this.offset=h,this):h-m},r.writeString=r.writeUTF8String,e.calculateUTF8Chars=function(u){return g.calculateUTF16asUTF8(s(u))[0]},e.calculateUTF8Bytes=function(u){return g.calculateUTF16asUTF8(s(u))[1]},e.calculateString=e.calculateUTF8Bytes,r.readUTF8String=function(u,h,f){typeof h=="number"&&(f=h,h=void 0);var v=typeof f>"u";if(v&&(f=this.offset),typeof h>"u"&&(h=e.METRICS_CHARS),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal length: "+u+" (not an integer)");if(u|=0,typeof f!="number"||f%1!==0)throw TypeError("Illegal offset: "+f+" (not an integer)");if(f>>>=0,f<0||f+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+f+" (+0) <= "+this.buffer.byteLength)}var m=0,y=f,I;if(h===e.METRICS_CHARS){if(I=a(),g.decodeUTF8(function(){return m<u&&f<this.limit?this.view[f++]:null}.bind(this),function(_){++m,g.UTF8toUTF16(_,I)}),m!==u)throw RangeError("Illegal range: Truncated data, "+m+" == "+u);return v?(this.offset=f,I()):{string:I(),length:f-y}}else if(h===e.METRICS_BYTES){if(!this.noAssert){if(typeof f!="number"||f%1!==0)throw TypeError("Illegal offset: "+f+" (not an integer)");if(f>>>=0,f<0||f+u>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+f+" (+"+u+") <= "+this.buffer.byteLength)}var p=f+u;if(g.decodeUTF8toUTF16(function(){return f<p?this.view[f++]:null}.bind(this),I=a(),this.noAssert),f!==p)throw RangeError("Illegal range: Truncated data, "+f+" == "+p);return v?(this.offset=f,I()):{string:I(),length:f-y}}else throw TypeError("Unsupported metrics: "+h)},r.readString=r.readUTF8String,r.writeVString=function(u,h){var f=typeof h>"u";if(f&&(h=this.offset),!this.noAssert){if(typeof u!="string")throw TypeError("Illegal str: Not a string");if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: "+h+" (not an integer)");if(h>>>=0,h<0||h+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+h+" (+0) <= "+this.buffer.byteLength)}var v=h,m,y;m=g.calculateUTF16asUTF8(s(u),this.noAssert)[1],y=e.calculateVarint32(m),h+=y+m;var I=this.buffer.byteLength;if(h>I&&this.resize((I*=2)>h?I:h),h-=y+m,h+=this.writeVarint32(m,h),g.encodeUTF16toUTF8(s(u),function(p){this.view[h++]=p}.bind(this)),h!==v+m+y)throw RangeError("Illegal range: Truncated data, "+h+" == "+(h+m+y));return f?(this.offset=h,this):h-v},r.readVString=function(u){var h=typeof u>"u";if(h&&(u=this.offset),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+1) <= "+this.buffer.byteLength)}var f=u,v=this.readVarint32(u),m=this.readUTF8String(v.value,e.METRICS_BYTES,u+=v.length);return u+=m.length,h?(this.offset=u,m.string):{string:m.string,length:u-f}},r.append=function(u,h,f){(typeof h=="number"||typeof h!="string")&&(f=h,h=void 0);var v=typeof f>"u";if(v&&(f=this.offset),!this.noAssert){if(typeof f!="number"||f%1!==0)throw TypeError("Illegal offset: "+f+" (not an integer)");if(f>>>=0,f<0||f+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+f+" (+0) <= "+this.buffer.byteLength)}u instanceof e||(u=e.wrap(u,h));var m=u.limit-u.offset;if(m<=0)return this;f+=m;var y=this.buffer.byteLength;return f>y&&this.resize((y*=2)>f?y:f),f-=m,this.view.set(u.view.subarray(u.offset,u.limit),f),u.offset+=m,v&&(this.offset+=m),this},r.appendTo=function(u,h){return u.append(this,h),this},r.assert=function(u){return this.noAssert=!u,this},r.capacity=function(){return this.buffer.byteLength},r.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},r.clone=function(u){var h=new e(0,this.littleEndian,this.noAssert);return u?(h.buffer=new ArrayBuffer(this.buffer.byteLength),h.view=new Uint8Array(h.buffer)):(h.buffer=this.buffer,h.view=this.view),h.offset=this.offset,h.markedOffset=this.markedOffset,h.limit=this.limit,h},r.compact=function(u,h){if(typeof u>"u"&&(u=this.offset),typeof h>"u"&&(h=this.limit),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal begin: Not an integer");if(u>>>=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal end: Not an integer");if(h>>>=0,u<0||u>h||h>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+u+" <= "+h+" <= "+this.buffer.byteLength)}if(u===0&&h===this.buffer.byteLength)return this;var f=h-u;if(f===0)return this.buffer=n,this.view=null,this.markedOffset>=0&&(this.markedOffset-=u),this.offset=0,this.limit=0,this;var v=new ArrayBuffer(f),m=new Uint8Array(v);return m.set(this.view.subarray(u,h)),this.buffer=v,this.view=m,this.markedOffset>=0&&(this.markedOffset-=u),this.offset=0,this.limit=f,this},r.copy=function(u,h){if(typeof u>"u"&&(u=this.offset),typeof h>"u"&&(h=this.limit),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal begin: Not an integer");if(u>>>=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal end: Not an integer");if(h>>>=0,u<0||u>h||h>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+u+" <= "+h+" <= "+this.buffer.byteLength)}if(u===h)return new e(0,this.littleEndian,this.noAssert);var f=h-u,v=new e(f,this.littleEndian,this.noAssert);return v.offset=0,v.limit=f,v.markedOffset>=0&&(v.markedOffset-=u),this.copyTo(v,0,u,h),v},r.copyTo=function(u,h,f,v){var m,y;if(!this.noAssert&&!e.isByteBuffer(u))throw TypeError("Illegal target: Not a ByteBuffer");if(h=(y=typeof h>"u")?u.offset:h|0,f=(m=typeof f>"u")?this.offset:f|0,v=typeof v>"u"?this.limit:v|0,h<0||h>u.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+h+" <= "+u.buffer.byteLength);if(f<0||v>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+f+" <= "+this.buffer.byteLength);var I=v-f;return I===0?u:(u.ensureCapacity(h+I),u.view.set(this.view.subarray(f,v),h),m&&(this.offset+=I),y&&(u.offset+=I),this)},r.ensureCapacity=function(u){var h=this.buffer.byteLength;return h<u?this.resize((h*=2)>u?h:u):this},r.fill=function(u,h,f){var v=typeof h>"u";if(v&&(h=this.offset),typeof u=="string"&&u.length>0&&(u=u.charCodeAt(0)),typeof h>"u"&&(h=this.offset),typeof f>"u"&&(f=this.limit),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal value: "+u+" (not an integer)");if(u|=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal begin: Not an integer");if(h>>>=0,typeof f!="number"||f%1!==0)throw TypeError("Illegal end: Not an integer");if(f>>>=0,h<0||h>f||f>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+h+" <= "+f+" <= "+this.buffer.byteLength)}if(h>=f)return this;for(;h<f;)this.view[h++]=u;return v&&(this.offset=h),this},r.flip=function(){return this.limit=this.offset,this.offset=0,this},r.mark=function(u){if(u=typeof u>"u"?this.offset:u,!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal offset: "+u+" (not an integer)");if(u>>>=0,u<0||u+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+u+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=u,this},r.order=function(u){if(!this.noAssert&&typeof u!="boolean")throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!u,this},r.LE=function(u){return this.littleEndian=typeof u<"u"?!!u:!0,this},r.BE=function(u){return this.littleEndian=typeof u<"u"?!u:!1,this},r.prepend=function(u,h,f){(typeof h=="number"||typeof h!="string")&&(f=h,h=void 0);var v=typeof f>"u";if(v&&(f=this.offset),!this.noAssert){if(typeof f!="number"||f%1!==0)throw TypeError("Illegal offset: "+f+" (not an integer)");if(f>>>=0,f<0||f+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+f+" (+0) <= "+this.buffer.byteLength)}u instanceof e||(u=e.wrap(u,h));var m=u.limit-u.offset;if(m<=0)return this;var y=m-f;if(y>0){var I=new ArrayBuffer(this.buffer.byteLength+y),p=new Uint8Array(I);p.set(this.view.subarray(f,this.buffer.byteLength),m),this.buffer=I,this.view=p,this.offset+=y,this.markedOffset>=0&&(this.markedOffset+=y),this.limit+=y,f+=y}else new Uint8Array(this.buffer);return this.view.set(u.view.subarray(u.offset,u.limit),f-m),u.offset=u.limit,v&&(this.offset-=m),this},r.prependTo=function(u,h){return u.prepend(this,h),this},r.printDebug=function(u){typeof u!="function"&&(u=console.log.bind(console)),u(this.toString()+`
-------------------------------------------------------------------
`+this.toDebug(!0))},r.remaining=function(){return this.limit-this.offset},r.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},r.resize=function(u){if(!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal capacity: "+u+" (not an integer)");if(u|=0,u<0)throw RangeError("Illegal capacity: 0 <= "+u)}if(this.buffer.byteLength<u){var h=new ArrayBuffer(u),f=new Uint8Array(h);f.set(this.view),this.buffer=h,this.view=f}return this},r.reverse=function(u,h){if(typeof u>"u"&&(u=this.offset),typeof h>"u"&&(h=this.limit),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal begin: Not an integer");if(u>>>=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal end: Not an integer");if(h>>>=0,u<0||u>h||h>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+u+" <= "+h+" <= "+this.buffer.byteLength)}return u===h?this:(Array.prototype.reverse.call(this.view.subarray(u,h)),this)},r.skip=function(u){if(!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal length: "+u+" (not an integer)");u|=0}var h=this.offset+u;if(!this.noAssert&&(h<0||h>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+u+" <= "+this.buffer.byteLength);return this.offset=h,this},r.slice=function(u,h){if(typeof u>"u"&&(u=this.offset),typeof h>"u"&&(h=this.limit),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal begin: Not an integer");if(u>>>=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal end: Not an integer");if(h>>>=0,u<0||u>h||h>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+u+" <= "+h+" <= "+this.buffer.byteLength)}var f=this.clone();return f.offset=u,f.limit=h,f},r.toBuffer=function(u){var h=this.offset,f=this.limit;if(!this.noAssert){if(typeof h!="number"||h%1!==0)throw TypeError("Illegal offset: Not an integer");if(h>>>=0,typeof f!="number"||f%1!==0)throw TypeError("Illegal limit: Not an integer");if(f>>>=0,h<0||h>f||f>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+h+" <= "+f+" <= "+this.buffer.byteLength)}if(!u&&h===0&&f===this.buffer.byteLength)return this.buffer;if(h===f)return n;var v=new ArrayBuffer(f-h);return new Uint8Array(v).set(new Uint8Array(this.buffer).subarray(h,f),0),v},r.toArrayBuffer=r.toBuffer,r.toString=function(u,h,f){if(typeof u>"u")return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch(typeof u=="number"&&(u="utf8",h=u,f=h),u){case"utf8":return this.toUTF8(h,f);case"base64":return this.toBase64(h,f);case"hex":return this.toHex(h,f);case"binary":return this.toBinary(h,f);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+u)}};var d=function(){for(var u={},h=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],f=[],v=0,m=h.length;v<m;++v)f[h[v]]=v;return u.encode=function(y,I){for(var p,_;(p=y())!==null;)I(h[p>>2&63]),_=(p&3)<<4,(p=y())!==null?(_|=p>>4&15,I(h[(_|p>>4&15)&63]),_=(p&15)<<2,(p=y())!==null?(I(h[(_|p>>6&3)&63]),I(h[p&63])):(I(h[_&63]),I(61))):(I(h[_&63]),I(61),I(61))},u.decode=function(y,I){var p,_,A;function b(P){throw Error("Illegal character code: "+P)}for(;(p=y())!==null;)if(_=f[p],typeof _>"u"&&b(p),(p=y())!==null&&(A=f[p],typeof A>"u"&&b(p),I(_<<2>>>0|(A&48)>>4),(p=y())!==null)){if(_=f[p],typeof _>"u"){if(p===61)break;b(p)}if(I((A&15)<<4>>>0|(_&60)>>2),(p=y())!==null){if(A=f[p],typeof A>"u"){if(p===61)break;b(p)}I((_&3)<<6>>>0|A)}}},u.test=function(y){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(y)},u}();r.toBase64=function(u,h){if(typeof u>"u"&&(u=this.offset),typeof h>"u"&&(h=this.limit),u=u|0,h=h|0,u<0||h>this.capacity||u>h)throw RangeError("begin, end");var f;return d.encode(function(){return u<h?this.view[u++]:null}.bind(this),f=a()),f()},e.fromBase64=function(u,h){if(typeof u!="string")throw TypeError("str");var f=new e(u.length/4*3,h),v=0;return d.decode(s(u),function(m){f.view[v++]=m}),f.limit=v,f},e.btoa=function(u){return e.fromBinary(u).toBase64()},e.atob=function(u){return e.fromBase64(u).toBinary()},r.toBinary=function(u,h){if(typeof u>"u"&&(u=this.offset),typeof h>"u"&&(h=this.limit),u|=0,h|=0,u<0||h>this.capacity()||u>h)throw RangeError("begin, end");if(u===h)return"";for(var f=[],v=[];u<h;)f.push(this.view[u++]),f.length>=1024&&(v.push(String.fromCharCode.apply(String,f)),f=[]);return v.join("")+String.fromCharCode.apply(String,f)},e.fromBinary=function(u,h){if(typeof u!="string")throw TypeError("str");for(var f=0,v=u.length,m,y=new e(v,h);f<v;){if(m=u.charCodeAt(f),m>255)throw RangeError("illegal char code: "+m);y.view[f++]=m}return y.limit=v,y},r.toDebug=function(u){for(var h=-1,f=this.buffer.byteLength,v,m="",y="",I="";h<f;){if(h!==-1&&(v=this.view[h],v<16?m+="0"+v.toString(16).toUpperCase():m+=v.toString(16).toUpperCase(),u&&(y+=v>32&&v<127?String.fromCharCode(v):".")),++h,u&&h>0&&h%16===0&&h!==f){for(;m.length<3*16+3;)m+=" ";I+=m+y+`
`,m=y=""}h===this.offset&&h===this.limit?m+=h===this.markedOffset?"!":"|":h===this.offset?m+=h===this.markedOffset?"[":"<":h===this.limit?m+=h===this.markedOffset?"]":">":m+=h===this.markedOffset?"'":u||h!==0&&h!==f?" ":""}if(u&&m!==" "){for(;m.length<3*16+3;)m+=" ";I+=m+y+`
`}return u?I:m},e.fromDebug=function(u,h,f){for(var v=u.length,m=new e((v+1)/3|0,h,f),y=0,I=0,p,_,A=!1,b=!1,P=!1,E=!1,C=!1;y<v;){switch(p=u.charAt(y++)){case"!":if(!f){if(b||P||E){C=!0;break}b=P=E=!0}m.offset=m.markedOffset=m.limit=I,A=!1;break;case"|":if(!f){if(b||E){C=!0;break}b=E=!0}m.offset=m.limit=I,A=!1;break;case"[":if(!f){if(b||P){C=!0;break}b=P=!0}m.offset=m.markedOffset=I,A=!1;break;case"<":if(!f){if(b){C=!0;break}b=!0}m.offset=I,A=!1;break;case"]":if(!f){if(E||P){C=!0;break}E=P=!0}m.limit=m.markedOffset=I,A=!1;break;case">":if(!f){if(E){C=!0;break}E=!0}m.limit=I,A=!1;break;case"'":if(!f){if(P){C=!0;break}P=!0}m.markedOffset=I,A=!1;break;case" ":A=!1;break;default:if(!f&&A){C=!0;break}if(_=parseInt(p+u.charAt(y++),16),!f&&(isNaN(_)||_<0||_>255))throw TypeError("Illegal str: Not a debug encoded string");m.view[I++]=_,A=!0}if(C)throw TypeError("Illegal str: Invalid symbol at "+y)}if(!f){if(!b||!E)throw TypeError("Illegal str: Missing offset or limit");if(I<m.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+I+" < "+v)}return m},r.toHex=function(u,h){if(u=typeof u>"u"?this.offset:u,h=typeof h>"u"?this.limit:h,!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal begin: Not an integer");if(u>>>=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal end: Not an integer");if(h>>>=0,u<0||u>h||h>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+u+" <= "+h+" <= "+this.buffer.byteLength)}for(var f=new Array(h-u),v;u<h;)v=this.view[u++],v<16?f.push("0",v.toString(16)):f.push(v.toString(16));return f.join("")},e.fromHex=function(u,h,f){if(!f){if(typeof u!="string")throw TypeError("Illegal str: Not a string");if(u.length%2!==0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var v=u.length,m=new e(v/2|0,h),y,I=0,p=0;I<v;I+=2){if(y=parseInt(u.substring(I,I+2),16),!f&&(!isFinite(y)||y<0||y>255))throw TypeError("Illegal str: Contains non-hex characters");m.view[p++]=y}return m.limit=p,m};var g=function(){var u={};return u.MAX_CODEPOINT=1114111,u.encodeUTF8=function(h,f){var v=null;for(typeof h=="number"&&(v=h,h=function(){return null});v!==null||(v=h())!==null;)v<128?f(v&127):v<2048?(f(v>>6&31|192),f(v&63|128)):v<65536?(f(v>>12&15|224),f(v>>6&63|128),f(v&63|128)):(f(v>>18&7|240),f(v>>12&63|128),f(v>>6&63|128),f(v&63|128)),v=null},u.decodeUTF8=function(h,f){for(var v,m,y,I,p=function(_){_=_.slice(0,_.indexOf(null));var A=Error(_.toString());throw A.name="TruncatedError",A.bytes=_,A};(v=h())!==null;)if(!(v&128))f(v);else if((v&224)===192)(m=h())===null&&p([v,m]),f((v&31)<<6|m&63);else if((v&240)===224)((m=h())===null||(y=h())===null)&&p([v,m,y]),f((v&15)<<12|(m&63)<<6|y&63);else if((v&248)===240)((m=h())===null||(y=h())===null||(I=h())===null)&&p([v,m,y,I]),f((v&7)<<18|(m&63)<<12|(y&63)<<6|I&63);else throw RangeError("Illegal starting byte: "+v)},u.UTF16toUTF8=function(h,f){for(var v,m=null;(v=m!==null?m:h())!==null;){if(v>=55296&&v<=57343&&(m=h())!==null&&m>=56320&&m<=57343){f((v-55296)*1024+m-56320+65536),m=null;continue}f(v)}m!==null&&f(m)},u.UTF8toUTF16=function(h,f){var v=null;for(typeof h=="number"&&(v=h,h=function(){return null});v!==null||(v=h())!==null;)v<=65535?f(v):(v-=65536,f((v>>10)+55296),f(v%1024+56320)),v=null},u.encodeUTF16toUTF8=function(h,f){u.UTF16toUTF8(h,function(v){u.encodeUTF8(v,f)})},u.decodeUTF8toUTF16=function(h,f){u.decodeUTF8(h,function(v){u.UTF8toUTF16(v,f)})},u.calculateCodePoint=function(h){return h<128?1:h<2048?2:h<65536?3:4},u.calculateUTF8=function(h){for(var f,v=0;(f=h())!==null;)v+=f<128?1:f<2048?2:f<65536?3:4;return v},u.calculateUTF16asUTF8=function(h){var f=0,v=0;return u.UTF16toUTF8(h,function(m){++f,v+=m<128?1:m<2048?2:m<65536?3:4}),[f,v]},u}();return r.toUTF8=function(u,h){if(typeof u>"u"&&(u=this.offset),typeof h>"u"&&(h=this.limit),!this.noAssert){if(typeof u!="number"||u%1!==0)throw TypeError("Illegal begin: Not an integer");if(u>>>=0,typeof h!="number"||h%1!==0)throw TypeError("Illegal end: Not an integer");if(h>>>=0,u<0||u>h||h>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+u+" <= "+h+" <= "+this.buffer.byteLength)}var f;try{g.decodeUTF8toUTF16(function(){return u<h?this.view[u++]:null}.bind(this),f=a())}catch{if(u!==h)throw RangeError("Illegal range: Truncated data, "+u+" != "+h)}return f()},e.fromUTF8=function(u,h,f){if(!f&&typeof u!="string")throw TypeError("Illegal str: Not a string");var v=new e(g.calculateUTF16asUTF8(s(u),!0)[1],h,f),m=0;return g.encodeUTF16toUTF8(s(u),function(y){v.view[m++]=y}),v.limit=m,v},e})})(iy);var L1=iy.exports,R1=W&&W.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty($n,"__esModule",{value:!0});$n.ShroomAssetBundle=void 0;const Yg=R1(L1);class ui{constructor(t=[]){this._files=new Map,this._blobs=new Map,this._strings=new Map,t.forEach(e=>this._files.set(e.fileName,e.buffer))}get files(){return Array.from(this._files.entries())}static async fromUrl(t){const e=await fetch(t);if(e.status>=400)throw new Error(`Failed to load: ${t} - ${e.status}`);const r=await e.arrayBuffer();return ui.fromBuffer(r)}static fromBuffer(t){const e=Yg.default.wrap(t),r=()=>{const s=e.readUint16(),a=e.readString(s),l=e.readUint32(),c=e.readBytes(l);return{fileName:a,buffer:c.toArrayBuffer()}};e.readByte();const n=e.readUint16(),o=[];for(let s=0;s<n;s++){const a=r();o.push(a)}return new ui(o)}addFile(t,e){this._files.set(t,e)}toBuffer(){const t=new Yg.default;return t.writeByte(ui.VERSION),t.writeUint16(this._files.size),this._files.forEach((e,r)=>{t.writeUint16(r.length),t.writeString(r),t.writeUint32(e.byteLength),t.append(e)}),t.flip().toBuffer()}async getBlob(t){const e=this._blobs.get(t);if(e!=null)return e;const r=this._files.get(t);if(r==null)throw new Error(`Couldn't find ${t}.`);const n=new Blob([r]);return this._blobs.set(t,n),n}async getString(t){const e=this._strings.get(t);if(e!=null)return e;const r=this._files.get(t);if(r==null)throw new Error(`Couldn't find ${t}.`);const o=new TextDecoder().decode(r);return this._strings.set(t,o),o}}$n.ShroomAssetBundle=ui;ui.VERSION=1;var pa={};Object.defineProperty(pa,"__esModule",{value:!0});pa.AvatarEffectMap=void 0;class Z1{constructor(t){this._effects=new Map,this._effectsArray=[],new DOMParser().parseFromString(t,"text/xml").querySelectorAll("effect").forEach(r=>{const n=this._getEffectFromElement(r);this._effects.set(n.id,n),this._effectsArray.push(n)})}getEffects(){return this._effectsArray}getEffectInfo(t){return this._effects.get(t)}_getEffectFromElement(t){const e=t.getAttribute("id"),r=t.getAttribute("lib"),n=t.getAttribute("type");if(r==null)throw new Error("Invalid lib for effect");if(n==null)throw new Error("Invalid type for effect");if(e==null)throw new Error("Invalid id");return{id:e,lib:r,type:n}}}pa.AvatarEffectMap=Z1;var Ia={},zr={},Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.loadImageFromBlob=void 0;async function O1(i){const t=new FileReader;return await new Promise(r=>{t.readAsDataURL(i),t.onloadend=()=>{r(t.result)}})}Kn.loadImageFromBlob=O1;var G1=W&&W.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),N1=W&&W.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),j1=W&&W.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&G1(t,i,e);return N1(t,i),t};Object.defineProperty(zr,"__esModule",{value:!0});zr.HitTexture=void 0;const W1=j1(Zt),X1=Hn,k1=Kn;class rn{constructor(t){this._texture=t,X1.applyTextureProperties(this._texture)}get texture(){return this._texture}static async fromSpriteSheet(t,e){const r=t.textures[e];return new rn(r)}static async fromBlob(t){const e=await k1.loadImageFromBlob(t);return rn.fromUrl(e)}static async fromUrl(t){const e=new Image;e.crossOrigin="anonymous",e.src=t,await new Promise((n,o)=>{e.onload=()=>{n({width:e.width,height:e.height})},e.onerror=s=>o(s)});const r=W1.Texture.from(e);return new rn(r)}getHitMap(){return this._getHitMap()}hits(t,e,r,n={mirrorHorizonally:!1}){n.mirrorHorizonally?t=-(t-r.x):t=t-r.x,e=e-r.y;const o=this._texture.baseTexture,s=this._getHitMap(),a=Math.round(this._texture.orig.x+t*o.resolution),l=Math.round(this._texture.orig.y+e*o.resolution),c=a+l*o.realWidth,d=c%32,g=c/32|0;return(s[g]&1<<d)!==0}_getHitMap(){var t;return this._cachedHitmap==null&&(this._cachedHitmap=H1(this._texture.baseTexture.resource.source)),(t=this._cachedHitmap)!==null&&t!==void 0?t:new Uint8ClampedArray}}zr.HitTexture=rn;function H1(i){const t=document.createElement("canvas");t.width=i.width,t.height=i.height;const e=t.getContext("2d");if(e==null)throw new Error("Invalid context 2d");const r=25,n=t.width,o=t.height;e.drawImage(i,0,0);const s=e.getImageData(0,0,n,o),a=new Uint32Array(Math.ceil(n*o/32));for(let l=0;l<n*o;l++){const c=l%32,d=l/32|0;s.data[l*4+3]>=r&&(a[d]=a[d]|1<<c)}return a}var va={};Object.defineProperty(va,"__esModule",{value:!0});va.AvatarEffectData=void 0;const ne=Jn;class Dc{constructor(t){this._frameBodyParts=new Map,this._frameFxParts=new Map,this._sprites=new Map,this._additions=new Map,this._spriteDirections=new Map,this._frameBodyPartsById=new Map,this._frameBodyPartByBase=new Map,this._frameFxPartsById=new Map;const e=new DOMParser().parseFromString(t,"text/xml"),r=e.querySelectorAll("animation > frame");r.forEach((o,s)=>{o.querySelectorAll("bodypart").forEach(a=>{var l;const c=this._getFrameBodyPartFromElement(a),d=(l=this._frameBodyParts.get(s))!==null&&l!==void 0?l:[];this._frameBodyParts.set(s,[...d,c]),this._frameBodyPartsById.set(`${a.id}_${s}`,c),c.base!=null&&this._frameBodyPartByBase.set(`${c.base}_${s}`,c)}),o.querySelectorAll("fx").forEach(a=>{var l;const c=this._getFXPartFromElement(a),d=(l=this._frameFxParts.get(s))!==null&&l!==void 0?l:[];c!=null&&(this._frameFxParts.set(s,[...d,c]),this._frameFxPartsById.set(`${c.id}_${s}`,c))})}),e.querySelectorAll("sprite").forEach(o=>{const s=this._getEffectSpriteFromElement(o);this._sprites.set(s.id,s),o.querySelectorAll("direction").forEach(a=>{const l=this._getDirectionSpriteFromElement(a);this._spriteDirections.set(`${s.id}_${l.id}`,l)})}),e.querySelectorAll("add").forEach(o=>{const s=this._getFXAddition(o);this._additions.set(s.id,s)});const n=e.querySelector("animation > direction");n!=null&&(this._direction=this._getDirectionFromElement(n)),this._frameCount=r.length}static async fromUrl(t){const r=await(await fetch(t)).text();return new Dc(r)}getFrameBodyPartByBase(t,e){return this._frameBodyPartByBase.get(`${t}_${e}`)}getFrameEffectPart(t,e){return this._frameFxPartsById.get(`${t}_${e}`)}getFrameBodyPart(t,e){return this._frameBodyPartsById.get(`${t}_${e}`)}getAddtions(){return Array.from(this._additions.values())}getFrameEffectParts(t){var e;return(e=this._frameFxParts.get(t))!==null&&e!==void 0?e:[]}getDirection(){return this._direction}getFrameBodyParts(t){var e;return(e=this._frameBodyParts.get(t))!==null&&e!==void 0?e:[]}getFrameCount(){return this._frameCount}getSprites(){return Array.from(this._sprites.values())}getSpriteDirection(t,e){return this._spriteDirections.get(`${t}_${e}`)}_getFXAddition(t){var e,r,n;const o=(e=t.getAttribute("id"))!==null&&e!==void 0?e:void 0,s=(r=t.getAttribute("align"))!==null&&r!==void 0?r:void 0,a=(n=t.getAttribute("base"))!==null&&n!==void 0?n:void 0;if(o==null)throw new Error("Invalid id");return{id:o,align:s,base:a}}_getFXPartFromElement(t){const e=t.getAttribute("action"),r=ne.getNumberFromAttribute(t.getAttribute("frame")),n=ne.getNumberFromAttribute(t.getAttribute("dx")),o=ne.getNumberFromAttribute(t.getAttribute("dy")),s=ne.getNumberFromAttribute(t.getAttribute("dd")),a=t.getAttribute("id");if(a==null)throw new Error("Invalid id");return{id:a,action:e??void 0,frame:r,dx:n,dy:o,dd:s}}_getDirectionFromElement(t){const e=ne.getNumberFromAttribute(t.getAttribute("offset"));if(e!=null)return{offset:e}}_getDirectionSpriteFromElement(t){const e=ne.getNumberFromAttribute(t.getAttribute("id")),r=ne.getNumberFromAttribute(t.getAttribute("dz")),n=ne.getNumberFromAttribute(t.getAttribute("dx")),o=ne.getNumberFromAttribute(t.getAttribute("dy"));if(e==null)throw new Error("Invalid id");return{id:e,dz:r,dx:n,dy:o}}_getEffectSpriteFromElement(t){var e;const r=t.getAttribute("id"),n=ne.getNumberFromAttribute(t.getAttribute("ink")),o=(e=t.getAttribute("member"))!==null&&e!==void 0?e:void 0,s=ne.getNumberFromAttribute(t.getAttribute("staticY")),a=t.getAttribute("directions")==="1";if(r==null)throw new Error("Invalid id");return{id:r,ink:n,member:o,staticY:s,directions:a}}_getFrameBodyPartFromElement(t){var e,r;const n=(e=t.getAttribute("action"))!==null&&e!==void 0?e:void 0,o=t.getAttribute("id"),s=ne.getNumberFromAttribute(t.getAttribute("frame")),a=ne.getNumberFromAttribute(t.getAttribute("dx")),l=ne.getNumberFromAttribute(t.getAttribute("dy")),c=ne.getNumberFromAttribute(t.getAttribute("dd")),d=(r=t.getAttribute("base"))!==null&&r!==void 0?r:void 0;if(o==null)throw new Error("Invalid id");return{action:n,frame:s,id:o,dx:a,dy:l,dd:c,base:d}}}va.AvatarEffectData=Dc;var qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.AvatarManifestData=void 0;const Y1=Ur;class U1 extends Y1.AvatarData{constructor(t){super(t),this._assets=[],this._assetbyName=new Map,this._aliases=[],this._cacheData()}getAliases(){return this._aliases}getAssets(){return this._assets}getAssetByName(t){return this._assetbyName.get(t)}_cacheData(){const t=this.querySelectorAll("assets asset"),e=this.querySelectorAll("aliases alias");for(const r of t){const n=r.querySelector('param[key="offset"]'),o=n?.getAttribute("value"),s=r.getAttribute("name");if(o!=null&&s!=null){const a=o.split(","),l=Number(a[0]),c=Number(a[1]),d={name:s,x:l,y:c,flipH:!1,flipV:!1};this._assets.push(d),this._assetbyName.set(s,d)}}for(const r of e){const n=r.getAttribute("name"),o=r.getAttribute("link"),s=r.getAttribute("fliph")==="1",a=r.getAttribute("flipv")==="1";if(n!=null&&o!=null){const l={name:n,link:o,fliph:s,flipv:a};this._aliases.push(l)}}}}qn.AvatarManifestData=U1;Object.defineProperty(Ia,"__esModule",{value:!0});Ia.AvatarEffectBundle=void 0;const z1=zr,V1=va,J1=qn;class Q1{constructor(t){this._bundle=t,this._textures=new Map,this._data=t.getString("animation.bin").then(e=>new V1.AvatarEffectData(e)),this._manifest=t.getString("manifest.bin").then(e=>new J1.AvatarManifestData(e))}async getData(){return this._data}async getTexture(t){const e=this._textures.get(t);if(e!=null)return e;const r=await this._bundle.getBlob(`${t}.png`),n=z1.HitTexture.fromBlob(r);return this._textures.set(t,n),n}async getManifest(){return this._manifest}}Ia.AvatarEffectBundle=Q1;var ya={};Object.defineProperty(ya,"__esModule",{value:!0});ya.getLibrariesForLook=void 0;function $1(i,{figureMap:t,figureData:e}){var r;const n=new Set,o=Array.from(i).flatMap(([s,{setId:a}])=>{var l,c;return(c=(l=e.getParts(s,a.toString()))===null||l===void 0?void 0:l.map(d=>({...d,setId:a,setType:s})))!==null&&c!==void 0?c:[]});for(const s of o){let a=t.getLibraryOfPart(s.id,s.type);if(a!=null){const l=(r=e.getParts(s.setType,s.setId.toString()))!==null&&r!==void 0?r:[];for(const c of l)if(a=t.getLibraryOfPart(c.id,c.type),a!=null)break}a!=null&&n.add(a)}return n.add("hh_human_face"),n.add("hh_human_item"),n.add("hh_human_body"),n}ya.getLibrariesForLook=$1;var ma={};Object.defineProperty(ma,"__esModule",{value:!0});ma.AvatarAssetLibraryCollection=void 0;const _l=Symbol("NO_ASSET");class K1{constructor(){this._assets=new Map,this._libraries=new Map,this._opened=new Set,this._loadTextures=new Map,this._textures=new Map}async open(t){if(this._opened.has(t))return;this._opened.add(t);const e=await t.getManifest();await Promise.all(e.getAssets().map(async r=>{this._assets.set(r.name,r),this._libraries.set(r.name,t)})),await Promise.all(e.getAliases().map(r=>{const n=e.getAssetByName(r.link);n!=null&&(this._assets.set(r.name,{...n,flipH:r.fliph,flipV:r.flipv}),this._libraries.set(r.name,t))}))}async loadTextures(t){return Promise.all(t.map(e=>this._loadTexture(e)))}getOffsets(t){const e=this._assets.get(t);if(e!=null)return{offsetX:e.x,offsetY:e.y}}getTexture(t){const e=this._textures.get(t);if(e!==_l)return e}_loadTexture(t){var e,r;const n=this._loadTextures.get(t);if(n!=null)return n;const o=(r=(e=this._assets.get(t))===null||e===void 0?void 0:e.name)!==null&&r!==void 0?r:t,s=this._libraries.get(t);if(s==null)throw new Error(`Couldn't find library for ${t}`);const a=s.getTexture(o).then(l=>(this._textures.set(t,l??_l),l??_l));return this._loadTextures.set(t,a),a}}ma.AvatarAssetLibraryCollection=K1;var _a={};Object.defineProperty(_a,"__esModule",{value:!0});_a.ManifestLibrary=void 0;const q1=zr,tE=qn;class eE{constructor(t){this._bundle=t,this._map=new Map,this._manifest=t.getString("manifest.bin").then(e=>new tE.AvatarManifestData(e))}async getManifest(){return this._manifest}async getTexture(t){const e=this._map.get(t);if(e!=null)return e;const r=this._bundle.getBlob(`${t}.png`).then(n=>q1.HitTexture.fromBlob(n)).catch(()=>{});return this._map.set(t,r),r}}_a.ManifestLibrary=eE;var rE=W&&W.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(zn,"__esModule",{value:!0});zn.AvatarLoader=void 0;const iE=Qv,nE=rE(C1),oE=oa,sE=aa,aE=ua,uE=ha,lE=ca,hE=da,cE=Qn,Cl=$n,Ug=pa,zg=Ia,fE=ya,dE=Vn,gE=ma,pE=_a;function IE(i){const t=[];if(i.actions.size>0){const e=Array.from(i.actions).map(r=>r).join(",");t.push(`actions(${e})`)}return t.push(`direction(${i.direction})`),t.push(`headdirection(${i.headDirection})`),i.item!=null&&t.push(`item(${i.item})`),i.look!=null&&t.push(`look(${i.look})`),i.effect!=null&&t.push(`effect(${i.effect})`),t.join(",")}class as{constructor(t){this._options=t,this._effectCache=new Map,this._lookOptionsCache=new Map,this._assetBundles=new Map,this._offsets=new gE.AvatarAssetLibraryCollection,this._dependencies=this._options.createDependencies(),this._lookServer=this._dependencies.then(async e=>iE.createLookServer({...e,offsetsData:this._offsets})).then(async e=>(await this._getAvatarDrawDefinition(e,{direction:0,headDirection:0,actions:new Set,look:"hd-99999-99999"}),e)),this._effectMap=this._options.getEffectMap()}static create(t=""){return new as({createDependencies:()=>Vg(t),getAssetBundle:async e=>new cE.LegacyAssetBundle(`${t}/figure/${e}`),getEffectMap:async()=>{const r=await(await fetch(`${t}/effectmap.xml`)).text();return new Ug.AvatarEffectMap(r)},getEffectBundle:async e=>{const r=await Cl.ShroomAssetBundle.fromUrl(`${t}/effects/${e.lib}.shroom`);return new zg.AvatarEffectBundle(r)}})}static createForAssetBundle(t=""){return new as({createDependencies:()=>Vg(t),getAssetBundle:async e=>Cl.ShroomAssetBundle.fromUrl(`${t}/figure/${e}.shroom`),getEffectMap:async()=>{const r=await(await fetch(`${t}/effectmap.xml`)).text();return new Ug.AvatarEffectMap(r)},getEffectBundle:async e=>{const r=await Cl.ShroomAssetBundle.fromUrl(`${t}/effects/${e.lib}.shroom`);return new zg.AvatarEffectBundle(r)}})}async getAvatarDrawDefinition(t){const e=await this._lookServer;return this._getAvatarDrawDefinition(e,t)}async _getAvatarDrawDefinition(t,e){var r;const{effect:n}=e;let o,s;if(n!=null){const g=await this._loadEffectCached(n);g!=null&&(o=g.effectData,s=g.effectBundle)}const{figureData:a,figureMap:l}=await this._dependencies;s!=null&&await this._offsets.open(s);const c=fE.getLibrariesForLook(dE.parseLookString(e.look),{figureData:a,figureMap:l});await Promise.all(Array.from(c).map(g=>this._getAssetBundle(g).then(u=>this._offsets.open(u))));const d=(r=t(e,o))===null||r===void 0?void 0:r.getDrawDefinition().flatMap(g=>g.assets).map(g=>g.fileId);return d!=null&&await this._offsets.loadTextures(d),{getDrawDefinition:g=>{const u=this._getDrawDefinitionCached(t,g,o);if(u==null)throw new Error("Invalid look");return u},getTexture:g=>{const u=this._offsets.getTexture(g);if(u==null)throw console.error("Texture not found in",this._offsets),new Error(`Invalid texture: ${g}`);return u}}}async _loadEffectCached(t){const e=this._effectCache.get(t);if(e!=null)return e;const r=this._loadEffect(t);return this._effectCache.set(t,r),r}async _loadEffect(t){const r=(await this._effectMap).getEffectInfo(t);if(r!=null){const n=await this._options.getEffectBundle(r),o=await n.getData();return{effectBundle:n,effectData:o}}}async _getAssetBundle(t){const e=this._assetBundles.get(t);if(e!=null)return e;const r=this._options.getAssetBundle(t).then(n=>new pE.ManifestLibrary(n));return this._assetBundles.set(t,r),r}_getDrawDefinitionCached(t,e,r){const n=IE(e),o=this._lookOptionsCache.get(n);if(o!=null)return o;const s=t(e,r);if(s!=null)return this._lookOptionsCache.set(n,s),s}}zn.AvatarLoader=as;async function Vg(i){const{animationData:t,figureMap:e,figureData:r,partSetsData:n,actionsData:o,geometry:s}=await nE.default.props({animationData:oE.AvatarAnimationData.default(),figureData:uE.FigureData.fromUrl(`${i}/figuredata.xml`),figureMap:sE.FigureMapData.fromUrl(`${i}/figuremap.xml`),partSetsData:aE.AvatarPartSetsData.default(),actionsData:lE.AvatarActionsData.default(),geometry:hE.AvatarGeometryData.default()});return{animationData:t,figureData:r,figureMap:e,partSetsData:n,actionsData:o,geometry:s}}var to={},Ca={},Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});Aa.loadImageFromUrl=void 0;async function vE(i){const t=new Image;return t.src=i,await new Promise((e,r)=>{t.onload=()=>{e({width:t.width,height:t.height})},t.onerror=n=>r(n)}),t}Aa.loadImageFromUrl=vE;var ba={};Object.defineProperty(ba,"__esModule",{value:!0});ba.JsonFurnitureAssetsData=void 0;const yE=tr;class mE{constructor(t){this._assets=t}getAsset(t){return this._assets[t]}getAssets(){return Object.values(this._assets).filter(yE.notNullOrUndefined)}}ba.JsonFurnitureAssetsData=mE;var wa={};Object.defineProperty(wa,"__esModule",{value:!0});wa.JsonFurnitureVisualizationData=void 0;class _E{constructor(t){this._furniture=t}getLayerCount(t){return this._getVisualization(t).layerCount}getLayer(t,e){return this._getVisualization(t).layers[e.toString()]}getDirections(t){return Object.keys(this._getVisualization(t).directions).map(e=>Number(e))}getDirectionLayer(t,e,r){var n;return(n=this._getVisualization(t).directions[e.toString()])===null||n===void 0?void 0:n.layers[r.toString()]}getAnimationLayer(t,e,r){var n;return(n=this._getVisualization(t).animations[e.toString()])===null||n===void 0?void 0:n.layers[r.toString()]}getFrameCountWithoutRepeat(t,e){var r;let n=1;return Object.values((r=this._getVisualization(t).animations[e.toString()])!==null&&r!==void 0?r:{}).forEach(o=>{Object.values(o??{}).forEach(s=>{var a;const c=(a=s?.frames.length)!==null&&a!==void 0?a:0;c>n&&(n=c)})}),n}getFrameCount(t,e){var r;let n=1;return Object.values((r=this._getVisualization(t).animations[e.toString()])!==null&&r!==void 0?r:{}).forEach(o=>{Object.values(o??{}).forEach(s=>{var a,l;const c=(a=s?.frames.length)!==null&&a!==void 0?a:0,d=(l=s?.frameRepeat)!==null&&l!==void 0?l:1,g=c*d;g>n&&(n=g)})}),n}getColor(t,e,r){var n,o;return(o=(n=this._getVisualization(t).colors[e.toString()])===null||n===void 0?void 0:n.layers[r.toString()])===null||o===void 0?void 0:o.color}getAnimation(t,e){const r=this._getVisualization(t).animations[e.toString()];if(r!=null)return{transitionTo:r.transitionTo,id:e}}getTransitionForAnimation(t,e){const n=Object.entries(this._getVisualization(t).animations).find(([o,s])=>s?.transitionTo===e);if(n!=null)return{id:Number(n[0]),transitionTo:e}}_getVisualization(t){const e=this._furniture[t.toString()];if(e==null)throw new Error("Invalid visualization");return e}}wa.JsonFurnitureVisualizationData=_E;var CE=W&&W.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),AE=W&&W.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),bE=W&&W.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&CE(t,i,e);return AE(t,i),t};Object.defineProperty(Ca,"__esModule",{value:!0});Ca.JsonFurnitureAssetBundle=void 0;const Jg=bE(Zt),wE=Kn,xE=Aa,PE=zr,SE=ba,TE=wa;class EE{constructor(t){this._assetBundle=t,this._data=this._load()}async getAssets(){const{assets:t}=await this._data;return t}async getVisualization(){const{visualization:t}=await this._data;return t}async getTexture(t){const{spritesheet:e}=await this._data;return PE.HitTexture.fromSpriteSheet(e,t)}async getIndex(){const{index:t}=await this._data;return t}async _load(){const t=JSON.parse(await this._assetBundle.getString("index.json")),e=await this._assetBundle.getBlob("spritesheet.png"),r=await wE.loadImageFromBlob(e),n=await xE.loadImageFromUrl(r),o=Jg.BaseTexture.from(n),s=new Jg.Spritesheet(o,t.spritesheet);return await new Promise(a=>{s.parse(()=>{a()})}),{assets:new SE.JsonFurnitureAssetsData(t.assets),visualization:new TE.JsonFurnitureVisualizationData(t.visualization),index:t.index,spritesheet:s}}}Ca.JsonFurnitureAssetBundle=EE;var xa={},Pa={},ny={},Sa={},Ta={};Object.defineProperty(Ta,"__esModule",{value:!0});Ta.parseAnimations=void 0;function FE(i,t){const e=i.animations?i.animations[0].animation:void 0;e?.forEach(r=>{const n=r.$.id,o=r.animationLayer,s=new Map;let a=1;o.forEach(l=>{const c=l.$.id;if(l.frameSequence!=null){const g=l.frameSequence[0].frame.map(h=>h.$.id),u=l.$.frameRepeat;s.set(c,{frames:g,frameRepeat:u!=null?Number(u):void 0}),g.length>a&&(a=g.length)}}),t(n,{frameCount:a,layerToFrames:s})})}Ta.parseAnimations=FE;var Ea={};Object.defineProperty(Ea,"__esModule",{value:!0});Ea.parseColors=void 0;function ME(i,t){const e=i.colors&&i.colors[0].color;e?.forEach(r=>{const n=r.$.id,o=new Map;r.colorLayer.forEach(a=>{const l=a.$.id,c=a.$.color;o.set(l,c)}),t(n,o)})}Ea.parseColors=ME;var Fa={};Object.defineProperty(Fa,"__esModule",{value:!0});Fa.parseDirections=void 0;function DE(i,t){const e=i.directions[0].direction,r=[];for(let n=0;n<e.length;n++){const o=new Map,s=Number(e[n].$.id),a=e[n].layer||[];r.push(s);for(let l=0;l<a.length;l++){const c=a[l].$;o.set(c.id,{zIndex:c!=null&&c.z!=null?Number(c.z):void 0,tag:void 0,ink:void 0,alpha:void 0,ignoreMouse:void 0})}t(s,o)}return{validDirections:r}}Fa.parseDirections=DE;var Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});Ma.parseLayers=void 0;function BE(i,t){if(i.layers!=null){const e=i.layers[0].layer,r=e==null?0:e.length;for(let n=0;n<r;n++){const o=e[n].$;t(o.id,{zIndex:o!=null&&o.z!=null?Number(o.z):0,tag:o.tag,ink:o.ink,alpha:o.alpha!=null?Number(o.alpha):void 0,ignoreMouse:o.ignoreMouse})}}}Ma.parseLayers=BE;Object.defineProperty(Sa,"__esModule",{value:!0});Sa.parseVisualization=void 0;const LE=Ta,RE=Ea,ZE=Fa,OE=Ma;function GE(i){const t=i.visualizationData.graphics[0].visualization;let e=[];for(let r=0;r<t.length;r++){const n=t[r];if(n.$.size=="64"){const o=new Map,s=new Map,a=new Map,l=new Map,{validDirections:c}=ZE.parseDirections(n,(d,g)=>l.set(d,g));return e=c,LE.parseAnimations(n,(d,g)=>a.set(d,g)),RE.parseColors(n,(d,g)=>s.set(d,g)),OE.parseLayers(n,(d,g)=>o.set(d,g)),{layerCount:Number(n.$.layerCount),getColor:(d,g)=>{var u;return(u=s?.get(d))===null||u===void 0?void 0:u.get(g)},getAnimation:(d,g)=>{var u,h;return(h=(u=a.get(d))===null||u===void 0?void 0:u.layerToFrames)===null||h===void 0?void 0:h.get(g)},getFrameCount:d=>{var g;return(g=a.get(d))===null||g===void 0?void 0:g.frameCount},getLayer:d=>o.get(d),getDirectionLayerOverride:(d,g)=>{var u;return(u=l.get(d))===null||u===void 0?void 0:u.get(g)},getAnimationDatas:()=>Array.from(a).map(([d,g])=>({id:d,data:g})),directions:e}}}throw new Error("No visualization found")}Sa.parseVisualization=GE;(function(i){var t=W&&W.__createBinding||(Object.create?function(n,o,s,a){a===void 0&&(a=s),Object.defineProperty(n,a,{enumerable:!0,get:function(){return o[s]}})}:function(n,o,s,a){a===void 0&&(a=s),n[a]=o[s]}),e=W&&W.__exportStar||function(n,o){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&t(o,n,s)};Object.defineProperty(i,"__esModule",{value:!0}),i.getCharFromLayerIndex=void 0,e(Sa,i);function r(n){return String.fromCharCode(97+n)}i.getCharFromLayerIndex=r})(ny);Object.defineProperty(Pa,"__esModule",{value:!0});Pa.getFurniDrawDefinition=void 0;const NE=ny;function jE({type:i,direction:t,animation:e},{visualizationData:r,assetsData:n}){var o;const s=i.split("*"),a=s[0],l=(o=s[1])!==null&&o!==void 0?o:"0",c=64,d=[],g=e!=null?Number(e):void 0,u=r.getLayerCount(c),h=(m,y)=>`${a}_${c}_${m}_${t}_${y}`,f=n.getAsset(h("sd",0));f!=null&&d.push({assets:[f],frameRepeat:1,shadow:!0,layer:void 0,layerIndex:-1});const v=n.getAsset(`${a}_${c}_${t}_mask`);v!=null&&d.push({assets:[v],frameRepeat:1,layer:void 0,shadow:!1,mask:!0,layerIndex:-2});for(let m=0;m<u;m++){const y=r.getDirectionLayer(c,t,m),I=r.getLayer(c,m),p=NE.getCharFromLayerIndex(m),_=g!=null?r.getAnimationLayer(c,g,m):void 0,A=l!=null?r.getColor(c,Number(l),m):void 0;d.push(WE({layer:I,directionLayer:y,animation:_,assetsData:n,color:A,getAssetName:b=>h(p,b),layerIndex:m}))}return{parts:d}}Pa.getFurniDrawDefinition=jE;function WE({layerIndex:i,layer:t,animation:e,directionLayer:r,assetsData:n,color:o,getAssetName:s}){var a,l,c,d,g;const u=(l=(a=r?.z)!==null&&a!==void 0?a:t?.z)!==null&&l!==void 0?l:0,h=(c=r?.x)!==null&&c!==void 0?c:0,f=(d=r?.y)!==null&&d!==void 0?d:0,v=n.getAsset(s(0));let m;return e!=null&&(m=e.frames.flatMap(I=>new Array(1).fill(I)).map(I=>{const p=n.getAsset(s(I));return p==null?{x:0,y:0,flipH:!1,name:"unknown",valid:!0}:{...p,x:p.x+(p.flipH?h:-h),y:p.y-f}})),(m==null||m.length===0)&&v!=null&&(m=[v]),m==null&&(m=[]),{mask:!1,shadow:!1,frameRepeat:(g=e?.frameRepeat)!==null&&g!==void 0?g:1,layer:t,z:u,tint:o,assets:m,loopCount:e?.loopCount,layerIndex:i}}Object.defineProperty(xa,"__esModule",{value:!0});xa.loadFurni=void 0;const XE=tr,kE=Pa;async function HE(i,t){const e=await t.getAssets(),r=await t.getIndex(),n=await t.getVisualization(),s=[...n.getDirections(64)].sort((d,g)=>d-g),a=e.getAssets(),c=await(async()=>{const d=Array.from(a).filter(u=>u.source==null||u.source===u.name),g=await Promise.all(d.map(async u=>{try{const h=await t.getTexture(u.name);return[u.name,h]}catch(h){return console.warn(`Failed to load furniture asset: ${u.name}`,h),null}}));return new Map(g.filter(XE.notNullOrUndefined))})();return{getDrawDefinition:(d,g)=>kE.getFurniDrawDefinition({type:i,direction:d,animation:g},{assetsData:e,visualizationData:n}),getTexture:d=>c.get(d),getExtraData:()=>r,visualizationData:n,directions:s}}xa.loadFurni=HE;var Da={},Ba={},eo={};Object.defineProperty(eo,"__esModule",{value:!0});eo.XmlData=void 0;class YE{constructor(t){this.document=new DOMParser().parseFromString(t,"text/xml")}querySelectorAll(t){return Array.from(this.document.querySelectorAll(t))}querySelector(t){return this.document.querySelector(t)}}eo.XmlData=YE;Object.defineProperty(Ba,"__esModule",{value:!0});Ba.FurnitureAssetsData=void 0;const UE=eo;class Bc extends UE.XmlData{constructor(t){super(t),this._assets=new Map,this.querySelectorAll("asset").forEach(e=>{const r=e.getAttribute("name"),n=Number(e.getAttribute("x")),o=Number(e.getAttribute("y")),s=e.getAttribute("source"),a=e.getAttribute("flipH")==="1";if(r==null)throw new Error("Invalid name");if(isNaN(n))throw new Error("x is not a number");if(isNaN(o))throw new Error("y is not a number");this._assets.set(r,{x:n,y:o,source:s??void 0,flipH:a,name:r,valid:!0})})}static async fromUrl(t){const r=await(await fetch(t)).text();return new Bc(r)}toJson(){const t=this.getAssets(),e={};return t.forEach(r=>{e[r.name]=r}),e}getAsset(t){return this._assets.get(t)}getAssets(){return Array.from(this._assets.values())}}Ba.FurnitureAssetsData=Bc;var La={};Object.defineProperty(La,"__esModule",{value:!0});La.FurnitureIndexData=void 0;class Lc{constructor(t){var e,r;const o=new DOMParser().parseFromString(t,"text/xml").querySelector("object");this._visualization=(e=o?.getAttribute("visualization"))!==null&&e!==void 0?e:void 0,this._logic=(r=o?.getAttribute("logic"))!==null&&r!==void 0?r:void 0}get visualization(){return this._visualization}get logic(){return this._logic}static async fromUrl(t){const r=await(await fetch(t)).text();return new Lc(r)}toJson(){return this.toObject()}toObject(){return{visualization:this.visualization,logic:this.logic}}}La.FurnitureIndexData=Lc;var Ra={};Object.defineProperty(Ra,"__esModule",{value:!0});Ra.FurnitureVisualizationData=void 0;const zE=eo,Do=tr;class Rc extends zE.XmlData{constructor(t){super(t)}static async fromUrl(t){const r=await(await fetch(t)).text();return new Rc(r)}getFrameCountWithoutRepeat(t,e){const r=this.querySelectorAll(`visualization[size="${t}"] animation[id="${e}"] frameSequence`);let n;return r.forEach(o=>{const s=o.children.length;(n==null||s>n)&&(n=s)}),n}getTransitionForAnimation(t,e){var r;const n=this.querySelector(`visualization[size="${t}"] animations animation[transitionTo="${e}"]`),o=Number((r=n?.getAttribute("id"))!==null&&r!==void 0?r:void 0);if(!isNaN(o))return{id:o,transitionTo:e}}getAnimation(t,e){var r;const n=this.querySelector(`visualization[size="${t}"] animations animation[id="${e}"]`);if(n==null)return;const o=Number((r=n?.getAttribute("transitionTo"))!==null&&r!==void 0?r:void 0);return{id:e,transitionTo:isNaN(o)?void 0:o}}getColor(t,e,r){var n;const o=this.querySelector(`visualization[size="${t}"] colors color[id="${e}"] colorLayer[id="${r}"]`);return(n=o?.getAttribute("color"))!==null&&n!==void 0?n:void 0}getFrameCount(t,e){const r=this.querySelectorAll(`visualization[size="${t}"] animation[id="${e}"] frameSequence`);let n;return r.forEach(o=>{var s;const a=o.parentElement,l=Number((s=a?.getAttribute("frameRepeat"))!==null&&s!==void 0?s:"1"),c=o.children.length*l;(n==null||c>n)&&(n=c)}),n}getAnimationIds(t){return this.querySelectorAll(`visualization[size="${t}"] animations animation`).map(r=>r.getAttribute("id")).filter(Do.notNullOrUndefined).map(r=>Number(r))}getAnimationLayer(t,e,r){var n,o;const s=this.querySelector(`visualization[size="${t}"] animations animation[id="${e}"] animationLayer[id="${r}"]`);if(s==null)return;const a=Number((n=s.getAttribute("frameRepeat"))!==null&&n!==void 0?n:void 0),l=Number((o=s.getAttribute("loopCount"))!==null&&o!==void 0?o:void 0),c=Array.from(s.querySelectorAll("frameSequence frame"));return{id:e,frames:c.map(d=>{var g;return Number((g=d.getAttribute("id"))!==null&&g!==void 0?g:void 0)}),frameRepeat:isNaN(a)?void 0:a,loopCount:isNaN(l)?void 0:l}}getDirections(t){return this.querySelectorAll(`visualization[size="${t}"] directions direction`).map(r=>{var n;const o=(n=r.getAttribute("id"))!==null&&n!==void 0?n:void 0;return Number(o)})}getDirectionLayer(t,e,r){const n=this.querySelector(`visualization[size="${t}"] directions direction[id="${e}"] layer[id="${r}"]`);if(n==null)return;const o=this._getNumberFromAttributeValue(n.getAttribute("z")),s=this._getNumberFromAttributeValue(n.getAttribute("x")),a=this._getNumberFromAttributeValue(n.getAttribute("y"));return{z:o,x:s,y:a}}getLayerCount(t){var e;const r=this.querySelector(`visualization[size="${t}"]`);if(r==null)throw new Error("Invalid visualization");return Number((e=r.getAttribute("layerCount"))!==null&&e!==void 0?e:void 0)}getLayer(t,e){var r,n,o,s,a,l;const c=this.querySelector(`visualization[size="${t}"] layers layer[id="${e}"]`);if(c==null)return;const d=(r=c.getAttribute("id"))!==null&&r!==void 0?r:void 0,g=(n=c.getAttribute("z"))!==null&&n!==void 0?n:void 0,u=(o=c.getAttribute("tag"))!==null&&o!==void 0?o:void 0,h=(s=c.getAttribute("alpha"))!==null&&s!==void 0?s:void 0,f=(a=c.getAttribute("ink"))!==null&&a!==void 0?a:void 0,v=(l=c.getAttribute("ignoreMouse"))!==null&&l!==void 0?l:void 0,m=Number(d),y=Number(g),I=Number(h);if(isNaN(m))throw new Error("Invalid layer id");return{id:m,z:isNaN(y)?0:y,alpha:isNaN(I)?void 0:I,tag:u??void 0,ink:f??void 0,ignoreMouse:v!=null?v==="1":void 0}}toJson(){return{...this._getJsonForSize(64)}}_toJsonMap(t,e){const r={};return t.forEach(n=>{const o=e(n);o!=null&&(r[o]=n)}),r}_getJsonAnimations(t){const e=Array.from(this.document.querySelectorAll(`visualization[size="${t}"] animations animation`)).map(r=>{const n=Array.from(r.querySelectorAll("animationLayer")).map(a=>{const l=this._getNumberFromAttributeValue(a.getAttribute("id")),c=Array.from(a.querySelectorAll("frame")).map(h=>h.getAttribute("id")).filter(Do.notNullOrUndefined).map(h=>Number(h)),d=this._getNumberFromAttributeValue(a.getAttribute("frameRepeat")),g=this._getNumberFromAttributeValue(a.getAttribute("loopCount")),u=this._getNumberFromAttributeValue(a.getAttribute("random"))===1;if(l!=null)return{id:l,frames:c,frameRepeat:d,loopCount:g,random:u}}).filter(Do.notNullOrUndefined),o=this._getNumberFromAttributeValue(r.getAttribute("id")),s=this._getNumberFromAttributeValue(r.getAttribute("transitionTo"));return o==null?null:{id:o,layers:this._toJsonMap(n,a=>a.id.toString()),transitionTo:s}}).filter(Do.notNullOrUndefined);return this._toJsonMap(e,r=>r.id.toString())}_getJsonColors(t){const e=Array.from(this.document.querySelectorAll(`visualization[size="${t}"] colors color`)).map(r=>{const n=r.getAttribute("id"),o=Array.from(r.querySelectorAll("colorLayer")).map(s=>{const a=s.getAttribute("id"),l=s.getAttribute("color");if(l==null)throw new Error("Invalid color");return{id:a,color:l}});return{id:n,layers:this._toJsonMap(o,s=>s.id)}});return this._toJsonMap(e,r=>r.id)}_getDirections(t){const e=Array.from(this.document.querySelectorAll(`visualization[size="${t}"] directions direction`)).map(r=>{const n=r.getAttribute("id"),o=Array.from(r.querySelectorAll("layer")).map(s=>{const a=s.getAttribute("id"),l=this._getNumberFromAttributeValue(s.getAttribute("x")),c=this._getNumberFromAttributeValue(s.getAttribute("y")),d=this._getNumberFromAttributeValue(s.getAttribute("z"));return{id:a,x:l,y:c,z:d}});return{id:n,layers:this._toJsonMap(o,s=>s.id)}});return this._toJsonMap(e,r=>r.id)}_getLayers(t){const e=Array.from(this.document.querySelectorAll(`visualization[size="${t}"] layers layer`)).map(r=>{var n,o;const s=this._getNumberFromAttributeValue(r.getAttribute("id")),a=(n=r.getAttribute("ink"))!==null&&n!==void 0?n:void 0,l=this._getNumberFromAttributeValue(r.getAttribute("alpha")),c=this._getNumberFromAttributeValue(r.getAttribute("z")),d=this._getNumberFromAttributeValue(r.getAttribute("ignoreMouse"))===1,g=(o=r.getAttribute("tag"))!==null&&o!==void 0?o:void 0;if(s==null)throw new Error("Invalid id");return{id:s,z:c??0,alpha:l,ignoreMouse:d,ink:a,tag:g}});return this._toJsonMap(e,r=>r.id.toString())}_getJsonForSize(t){return{[t.toString()]:{layerCount:this.getLayerCount(t),animations:this._getJsonAnimations(t),colors:this._getJsonColors(t),directions:this._getDirections(t),layers:this._getLayers(t)}}}_getNumberFromAttributeValue(t){if(t==null)return;const e=Number(t);if(!isNaN(e))return e}}Ra.FurnitureVisualizationData=Rc;Object.defineProperty(Da,"__esModule",{value:!0});Da.XmlFurnitureAssetBundle=void 0;const VE=zr,JE=Ba,QE=La,$E=Ra;class KE{constructor(t,e){this._type=t,this._assetBundle=e}async getAssets(){const t=await this._assetBundle.getString(`${this._type}_assets.bin`);return new JE.FurnitureAssetsData(t)}async getVisualization(){const t=await this._assetBundle.getString(`${this._type}_visualization.bin`);return new $E.FurnitureVisualizationData(t)}async getTexture(t){const e=await this._assetBundle.getBlob(`${t}.png`);return VE.HitTexture.fromBlob(e)}async getIndex(){const t=await this._assetBundle.getString("index.bin");return new QE.FurnitureIndexData(t)}}Da.XmlFurnitureAssetBundle=KE;Object.defineProperty(to,"__esModule",{value:!0});to.FurnitureLoader=void 0;const qE=Qn,tF=$n,eF=Ca,rF=xa,iF=Da;class us{constructor(t){this._options=t,this._furnitureCache=new Map,this._assetBundles=new Map}get delay(){return this._artificalDelay}set delay(t){this._artificalDelay=t}static create(t,e=""){return new us({furnitureData:t,getAssetBundle:async(r,n)=>{const o=new qE.LegacyAssetBundle(`${e}/hof_furni/${Qg(n,r)}`);return new iF.XmlFurnitureAssetBundle(r,o)}})}static createForJson(t,e=""){return new us({furnitureData:t,getAssetBundle:async(r,n)=>{const o=await tF.ShroomAssetBundle.fromUrl(`${e}/hof_furni/${Qg(n,r)}.shroom`);return new eF.JsonFurnitureAssetBundle(o)}})}async loadFurni(t){this.delay!=null&&await new Promise(a=>setTimeout(a,this.delay));let e;if(t.kind==="id"){const a=await this._options.furnitureData.getTypeById(t.id,t.placementType);if(a==null)throw new Error("Couldn't determine type for furniture.");e=a}else e=t.type;const n=e.split("*")[0],o=await this._options.furnitureData.getRevisionForType(e);let s=this._furnitureCache.get(e);return s!=null||(s=rF.loadFurni(e,await this._getAssetBundle(n,o)),this._furnitureCache.set(n,s)),s}_getAssetBundle(t,e){const r=`${t}_${e}`,n=this._assetBundles.get(r);if(n!=null)return n;const o=this._options.getAssetBundle(t,e);return this._assetBundles.set(r,o),o}}to.FurnitureLoader=us;const Qg=(i,t)=>i==null?t:`${i}/${t}`;Object.defineProperty(Vs,"__esModule",{value:!0});Vs.Shroom=void 0;const nF=Un,oF=zn,sF=to,aF=Yn;class Zc{constructor(t){this.dependencies=t}static create(t){return this.createShared(t).for(t.application)}static createShared({resourcePath:t,configuration:e,animationTicker:r,avatarLoader:n,furnitureData:o,furnitureLoader:s}){const a=o??aF.FurnitureData.create(t),l=n??oF.AvatarLoader.createForAssetBundle(t),c=s??sF.FurnitureLoader.createForJson(a,t),d=e??{};return{for:g=>{const h={animationTicker:r??nF.AnimationTicker.create(g),avatarLoader:l,furnitureLoader:c,configuration:d,furnitureData:a,application:g};return new Zc(h)}}}}Vs.Shroom=Zc;var Za={},uF=W&&W.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),lF=W&&W.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),hF=W&&W.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&uF(t,i,e);return lF(t,i),t};Object.defineProperty(Za,"__esModule",{value:!0});Za.Landscape=void 0;const xe=hF(Zt),cF=Ir,fF=Nn;class dF extends cF.RoomObject{constructor(){super(),this._wallHeight=0,this._wallHeightWithZ=0,this._masks=new Map,this._unsubscribe=void 0}get color(){return this._color}set color(t){this._color=t,this._updateLandscapeImages()}get leftTexture(){return this._leftTexturePromise}set leftTexture(t){this._leftTexturePromise=t,Promise.resolve(this._leftTexturePromise).then(e=>{this._leftTexture=e,this._updateLandscapeImages()})}get rightTexture(){return this._rightTexturePromise}set rightTexture(t){this._rightTexturePromise=t,Promise.resolve(this._rightTexturePromise).then(e=>{this._rightTexture=e,this._updateLandscapeImages()})}update(t){this._masks=t.masks,this._wallHeightWithZ=t.wallHeight,this._updateLandscapeImages()}destroyed(){var t,e;this._unsubscribe&&this._unsubscribe(),(t=this._container)===null||t===void 0||t.destroy(),(e=this._partNode)===null||e===void 0||e.remove()}registered(){this._partNode=this.roomVisualization.addPart(this),this._updateLandscapeImages()}_createDefaultMask(){return new xe.Graphics}_getMask(t,e,r){const n=fF.getMaskId(t,e,r);if(n!=null){const o=this._masks.get(n);if(o!=null)return o}return this._createDefaultMask()}_updateLandscapeImages(){var t;if(!this.mounted)return;const e=gF(this.tilemap.getParsedTileTypes());(t=this._container)===null||t===void 0||t.destroy();const r=new xe.Container;let n=0,o=0;e.forEach(s=>{const a=Math.abs(s.end-s.start)*32,l=new xe.Container,c=new xe.TilingSprite(xe.Texture.WHITE,a,this._wallHeightWithZ);if(this.color!=null?c.tint=parseInt(this.color.slice(1),16):c.tint=16777215,c.y=-this._wallHeightWithZ,l.addChild(c),s.type==="rowWall"){const d=this.landscapeContainer.getMaskLevel(s.level,0),g=this._getMask(2,d.roomX,0);l.mask=g;const u=this.geometry.getPosition(s.level+1,s.start,0);if(l.transform.setFromMatrix(new xe.Matrix(1,-.5,0,1)),l.x=u.x,l.y=u.y+16,this._leftTexture!=null){const h=new xe.TilingSprite(this._leftTexture,a,this._leftTexture.height);h.tilePosition=new xe.Point(n,0),h.texture=this._leftTexture,h.x=0,h.y=-this._leftTexture.height,l.addChild(h)}n+=a}else if(s.type==="colWall"){const d=this.landscapeContainer.getMaskLevel(0,s.level),g=this._getMask(4,0,d.roomY);l.mask=g;const u=this.geometry.getPosition(s.start+1,s.level+1,0);if(l.transform.setFromMatrix(new xe.Matrix(1,.5,0,1)),l.x=u.x+32,l.y=u.y,this._rightTexture!=null){const h=new xe.TilingSprite(this._rightTexture,a,this._rightTexture.height);h.texture=this._rightTexture,h.x=0,h.y=-this._rightTexture.height,h.tilePosition=new xe.Point(o,0),l.addChild(h)}o+=a}r.addChild(l)}),this._container=r,this.roomVisualization.landscapeContainer.addChild(r)}}Za.Landscape=dF;const jo=(i,t,e)=>{const r=i[e];if(r!=null)return r[t]};function gF(i){const{x:t,y:e}=pF(i);let r=t,n=e,o=!1,s;const a=[];for(;;){const l=jo(i,r,n),c={x:r,y:n-1},d={x:r+1,y:n},g=jo(i,c.x,c.y),u=jo(i,d.x,d.y);if(l==null||l.type!=="wall"&&l.type!=="door")break;const h=f=>{if(s==null){s=f;return}if(s!=null&&s.type!==f.type){a.push(s),s=f;return}s={...s,level:f.level,end:f.end}};if(l.type==="wall")switch(l.kind){case"rowWall":case"innerCorner":h({type:"rowWall",start:n,end:n-1,level:r});break;case"colWall":case"outerCorner":h({type:"colWall",start:r,end:r+(o?0:1),level:n});break}else l.type==="door"&&h({type:"rowWall",start:n,end:n-1,level:r});if(o){s!=null&&a.push(s);break}g!=null&&(g.type==="wall"||g.type==="door")?(r=c.x,n=c.y):u!=null&&u.type==="wall"?(r=d.x,n=d.y):o=!0}return a}function pF(i){const t=i.length-1;let e=t,r=0;for(;;){const n=jo(i,r,e);if(n!=null&&n.type==="wall")return{x:r,y:e};e--,e<0&&(e=t,r++)}}var Oa={};Object.defineProperty(Oa,"__esModule",{value:!0});Oa.FurnitureRoomVisualization=void 0;class Oc{constructor(t){this._container=t}get container(){return this._container}static fromContainer(t){return new Oc(t)}addMask(){return{remove:()=>{},update:()=>{},sprite:null}}}Oa.FurnitureRoomVisualization=Oc;var Ga={},Na={};Object.defineProperty(Na,"__esModule",{value:!0});Na.getIntFromHex=void 0;function IF(i){return parseInt(i.replace(/^#/,""),16)}Na.getIntFromHex=IF;Object.defineProperty(Ga,"__esModule",{value:!0});Ga.FurnitureGuildCustomizedVisualization=void 0;const $g=Na,vF=Hr,yF=vr;class bi extends yF.FurnitureVisualization{constructor(t={}){super(),this._base=new vF.AnimatedFurnitureVisualization,this._refreshModifier=!1,this.primaryColor=this._normalizeColor(t.primaryColor),this.secondaryColor=this._normalizeColor(t.secondaryColor)}get primaryColor(){return this._primaryColor}set primaryColor(t){this._primaryColor=t,this._refreshModifier=!0}get secondaryColor(){return this._secondaryColor}set secondaryColor(t){this._secondaryColor=t,this._refreshModifier=!0}isAnimated(){return!0}update(){this._base.update()}setView(t){super.setView(t),this._base.setView(t)}destroy(){this._base.destroy()}updateFrame(t){this._refreshModifier&&(this._refreshModifier=!1,this._updateModifier()),this._base.updateFrame(t)}updateDirection(t){this._base.updateDirection(t)}updateAnimation(t){this._base.updateAnimation(t)}_updateModifier(){this._base.modifier=t=>this._modifyPart(t)}_normalizeColor(t){if(!(t==null||t.length===0))return t[0]==="#"?t.slice(1):t}_modifyPart(t){switch(t.tag){case bi.PRIMARY_COLOR_TAG:this._primaryColor!=null&&t.setColor($g.getIntFromHex(this._primaryColor));break;case bi.SECONDARY_COLOR_TAG:this._secondaryColor!=null&&t.setColor($g.getIntFromHex(this._secondaryColor));break}return t}}Ga.FurnitureGuildCustomizedVisualization=bi;bi.PRIMARY_COLOR_TAG="COLOR1";bi.SECONDARY_COLOR_TAG="COLOR2";var wi={};Object.defineProperty(wi,"__esModule",{value:!0});wi.BasicFurnitureVisualization=wi.StaticFurnitureVisualization=void 0;const mF=vr;class oy extends mF.FurnitureVisualization{constructor(){super(...arguments),this._sprites=[],this._refreshFurniture=!1}setView(t){super.setView(t),this._update()}updateDirection(t){this._currentDirection!==t&&(this._currentDirection=t,this._update())}updateAnimation(t){this._animationId!==t&&(this._animationId=t,this._update())}updateFrame(){this.mounted&&this._refreshFurniture&&(this._refreshFurniture=!1,this._update())}update(){this._update()}destroy(){}_update(){this._currentDirection!=null&&(this.view.setDisplayAnimation(this._animationId),this.view.setDisplayDirection(this._currentDirection),this.view.updateDisplay(),this.view.getLayers().forEach(t=>t.setCurrentFrameIndex(0)))}}wi.StaticFurnitureVisualization=oy;wi.BasicFurnitureVisualization=oy;var ja={};Object.defineProperty(ja,"__esModule",{value:!0});ja.FurnitureBottleVisualization=void 0;const _F=Hr,CF=vr;class Ue extends CF.FurnitureVisualization{constructor(){super(...arguments),this._base=new _F.AnimatedFurnitureVisualization,this._stateQueue=[],this._running=!1}isAnimated(){return!0}destroy(){this._base.destroy()}update(){this._base.update()}setView(t){super.setView(t),this._base.setView(t)}updateFrame(t){if(this._stateQueue.length>0&&this._base.isLastFramePlayedForLayer(0)){const e=this._stateQueue.shift();e!=null&&this._base.setCurrentAnimation(e)}this._base.updateFrame(t)}updateDirection(t){this._base.updateDirection(t)}updateAnimation(t){if(t===Ue.ANIMATION_ID_ROLL.toString()&&!this._running){this._running=!0,this._stateQueue.push(Ue.ANIMATION_ID_ROLL);return}const e=Number(t);if(e>=0&&e<=7){if(this._running){this._running=!1,this._stateQueue.push(Ue.ANIMATION_ID_OFFSET_SLOW1),this._stateQueue.push(Ue.ANIMATION_ID_OFFSET_SLOW2+e),this._stateQueue.push(e);return}this._base.updateAnimation(t)}}}ja.FurnitureBottleVisualization=Ue;Ue.ANIMATION_ID_OFFSET_SLOW1=20;Ue.ANIMATION_ID_OFFSET_SLOW2=9;Ue.ANIMATION_ID_ROLL=-1;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.FURNITURE=i.TILE_CURSOR=i.AVATAR=i.RoomModelVisualization=i.WallRight=i.WallLeft=i.FurnitureVisualization=i.FurnitureBottleVisualization=i.BasicFurnitureVisualization=i.StaticFurnitureVisualization=i.FurnitureGuildCustomizedVisualization=i.AnimatedFurnitureVisualization=i.BaseAvatar=i.BaseFurniture=i.FurnitureRoomVisualization=i.AvatarAction=i.AvatarLoader=i.FurnitureLoader=i.AnimationTicker=i.Landscape=i.Shroom=i.FurnitureData=i.parseTileMapString=i.loadRoomTexture=i.RoomCamera=i.Room=i.WallFurniture=i.FloorFurniture=i.Avatar=i.RoomObject=void 0;var t=Ir;Object.defineProperty(i,"RoomObject",{enumerable:!0,get:function(){return t.RoomObject}});var e=vs;Object.defineProperty(i,"Avatar",{enumerable:!0,get:function(){return e.Avatar}});var r=Cs;Object.defineProperty(i,"FloorFurniture",{enumerable:!0,get:function(){return r.FloorFurniture}});var n=ws;Object.defineProperty(i,"WallFurniture",{enumerable:!0,get:function(){return n.WallFurniture}});var o=Ps;Object.defineProperty(i,"Room",{enumerable:!0,get:function(){return o.Room}});var s=Hs;Object.defineProperty(i,"RoomCamera",{enumerable:!0,get:function(){return s.RoomCamera}});var a=Ys;Object.defineProperty(i,"loadRoomTexture",{enumerable:!0,get:function(){return a.loadRoomTexture}});var l=Wn;Object.defineProperty(i,"parseTileMapString",{enumerable:!0,get:function(){return l.parseTileMapString}});var c=Yn;Object.defineProperty(i,"FurnitureData",{enumerable:!0,get:function(){return c.FurnitureData}});var d=Vs;Object.defineProperty(i,"Shroom",{enumerable:!0,get:function(){return d.Shroom}});var g=Za;Object.defineProperty(i,"Landscape",{enumerable:!0,get:function(){return g.Landscape}});var u=Un;Object.defineProperty(i,"AnimationTicker",{enumerable:!0,get:function(){return u.AnimationTicker}});var h=to;Object.defineProperty(i,"FurnitureLoader",{enumerable:!0,get:function(){return h.FurnitureLoader}});var f=zn;Object.defineProperty(i,"AvatarLoader",{enumerable:!0,get:function(){return f.AvatarLoader}});var v=Ri;Object.defineProperty(i,"AvatarAction",{enumerable:!0,get:function(){return v.AvatarAction}});var m=Oa;Object.defineProperty(i,"FurnitureRoomVisualization",{enumerable:!0,get:function(){return m.FurnitureRoomVisualization}});var y=Zi;Object.defineProperty(i,"BaseFurniture",{enumerable:!0,get:function(){return y.BaseFurniture}});var I=xn;Object.defineProperty(i,"BaseAvatar",{enumerable:!0,get:function(){return I.BaseAvatar}});var p=Hr;Object.defineProperty(i,"AnimatedFurnitureVisualization",{enumerable:!0,get:function(){return p.AnimatedFurnitureVisualization}});var _=Ga;Object.defineProperty(i,"FurnitureGuildCustomizedVisualization",{enumerable:!0,get:function(){return _.FurnitureGuildCustomizedVisualization}});var A=wi;Object.defineProperty(i,"StaticFurnitureVisualization",{enumerable:!0,get:function(){return A.StaticFurnitureVisualization}}),Object.defineProperty(i,"BasicFurnitureVisualization",{enumerable:!0,get:function(){return A.BasicFurnitureVisualization}});var b=ja;Object.defineProperty(i,"FurnitureBottleVisualization",{enumerable:!0,get:function(){return b.FurnitureBottleVisualization}});var P=vr;Object.defineProperty(i,"FurnitureVisualization",{enumerable:!0,get:function(){return P.FurnitureVisualization}});var E=Oi;Object.defineProperty(i,"WallLeft",{enumerable:!0,get:function(){return E.WallLeft}});var C=kn;Object.defineProperty(i,"WallRight",{enumerable:!0,get:function(){return C.WallRight}});var T=Xn;Object.defineProperty(i,"RoomModelVisualization",{enumerable:!0,get:function(){return T.RoomModelVisualization}});var F=ce;Object.defineProperty(i,"AVATAR",{enumerable:!0,get:function(){return F.AVATAR}}),Object.defineProperty(i,"TILE_CURSOR",{enumerable:!0,get:function(){return F.TILE_CURSOR}}),Object.defineProperty(i,"FURNITURE",{enumerable:!0,get:function(){return F.FURNITURE}})})(ae);let ls=qg();window.addEventListener("storage",i=>{ls=qg();for(const t in ls)Gc(t)});class St{static ROOM;static GRID;static DEFAULT_LOOK;ownAvatar=new ae.Avatar({look:St.DEFAULT_LOOK,direction:0,roomX:0,roomY:0,roomZ:0});path=[];twitchUser;readyRes=()=>{};ready;constructor(t,e){if(typeof St.ROOM>"u"||typeof St.GRID>"u"||typeof St.DEFAULT_LOOK>"u")throw new Error("MiniAvatar isn't configured correctly.");this.ready=new Promise(r=>this.readyRes=r),this.twitchUser=t,this.initAvatar(e),setInterval(()=>{const r=this.path[0];r!=null&&(this.ownAvatar.walk(r.roomX,r.roomY,r.roomZ,{direction:r.direction}),this.path.shift())},500)}static posX=13;static posY=18;async initAvatar(t){const e=await jc(t,St.DEFAULT_LOOK),r=St.getRandomTile();this.ownAvatar=new ae.Avatar({look:e.figureString,direction:4,roomX:r.roomX,roomY:r.roomY,roomZ:0}),St.ROOM.addRoomObject(this.ownAvatar),this.initMovement(),this.readyRes()}movInterval=0;idleTimeout=0;exitTimeout=0;initMovement(){this.movInterval=window.setInterval(async()=>{if(this.path.length)return;const t=St.__unsafe__getRandomTile();!t||Math.sqrt((this.ownAvatar.roomX-t.roomX)**2+(this.ownAvatar.roomY-t.roomY)**2)>10||(this.path=await this.findPath(t))},500),this.ownAvatar.removeAction(ae.AvatarAction.Sleep),this.ownAvatar.removeAction(ae.AvatarAction.Sit),this.ownAvatar.roomZ=St.GRID[this.ownAvatar.roomX][this.ownAvatar.roomY],this.ownAvatar.effect="dance.1",this.refreshIdle()}stopMovement(){clearInterval(this.movInterval),this.path=[],this.ownAvatar.addAction(ae.AvatarAction.Sleep),this.ownAvatar.addAction(ae.AvatarAction.Sit),this.ownAvatar.roomZ-=.5,this.ownAvatar.effect=void 0,this.ownAvatar.direction%2!==0&&(this.ownAvatar.direction=(this.ownAvatar.direction+1)%8),this.exitTimeout=window.setTimeout(()=>{St.ROOM.removeRoomObject(this.ownAvatar),delete ls[this.twitchUser]},1*60*60*1e3)}refreshIdle(t,e,r){clearTimeout(this.idleTimeout),clearTimeout(this.exitTimeout),this.idleTimeout=window.setTimeout(()=>{this.stopMovement()},15*60*1e3),this.ownAvatar.effect==null&&this.initMovement(),t&&e&&jc({hotel:t,nick:e}).then(n=>{if(this.ownAvatar.look===n.figureString)return;St.ROOM.removeRoomObject(this.ownAvatar);const o=this.ownAvatar.effect;this.ownAvatar=new ae.Avatar({look:n.figureString,direction:this.ownAvatar.direction,roomX:this.ownAvatar.roomX,roomY:this.ownAvatar.roomY,roomZ:this.ownAvatar.roomZ}),this.ownAvatar.effect=o,St.ROOM.addRoomObject(this.ownAvatar)})}static __unsafe__getRandomTile(){let t=Math.floor(Math.random()*St.GRID.length);if(!St.GRID[t])return;let e=Math.floor(Math.random()*St.GRID[t].length);if(St.GRID[t][e]!=-1)return{roomX:t,roomY:e,tile:St.GRID[t][e]}}static getRandomTile(){let t;do t=St.__unsafe__getRandomTile();while(!t);return t}static getAvatarDirectionFromDiff(t,e){const r=Math.sign(t),n=Math.sign(e);switch(r){case-1:switch(n){case-1:return 7;case 0:return 6;case 1:return 5}break;case 0:switch(n){case-1:return 0;case 1:return 4}break;case 1:switch(n){case-1:return 1;case 0:return 2;case 1:return 3}break}}findPath(t){return new Promise(e=>{const r=new sb.js;r.setGrid(St.GRID),r.setAcceptableTiles([1,0]),r.enableDiagonals(),r.findPath(this.ownAvatar.roomX,this.ownAvatar.roomY,t.roomX,t.roomY,n=>{let o={x:this.ownAvatar.roomX,y:this.ownAvatar.roomY};const s=[];n.forEach((a,l)=>{if(l===0)return;const c=St.getAvatarDirectionFromDiff(a.x-o.x,a.y-o.y),d=St.ROOM.getTileAtPosition(a.x,a.y);if(d!=null){const g=()=>d.type==="tile"?d.z:d.type==="stairs"?d.z+.5:0;s.push({roomX:a.x,roomY:a.y,roomZ:g(),direction:c}),o={x:a.x,y:a.y}}}),e(s)}),r.calculate()})}async setEffect(t){await this.ready,this.ownAvatar.effect=t}}const nn={};function AF(i,t,e,r){if(nn[e]){nn[e].refreshIdle(i,t,r);return}const n=r?{figureString:r}:{hotel:i,nick:t};nn[e]=new St(e,n)}function bh(i){i.action==="addPlayer"?AF(i.host,i.name,i.twitchUser,i.figureString):i.action==="setEffect"?(nn[i.twitchUser]||Gc(i.twitchUser),nn[i.twitchUser].setEffect(i.effectId)):console.error("unimplemented action",i)}function Gc(i){const t=ls[i];t&&(t.hotel||t.figureString)?bh({action:"addPlayer",host:t.hotel,name:t.nick,twitchUser:i,figureString:t.figureString}):bh({action:"addPlayer",twitchUser:i})}function bF(i,t){bh({action:"setEffect",twitchUser:i,effectId:t})}const wF=["/textures/floor/tile_0.png","/textures/floor/tile_1.png","/textures/floor/tile_2.png","/textures/floor/tile_3.png","/textures/floor/tile_4.png","/textures/floor/tile_5.png","/textures/floor/tile__0.png","/textures/floor/tile__1.png"].map(i=>"/stream-overlay"+i),xF=["/textures/wall/wall_0.png","/textures/wall/wall_1.png","/textures/wall/wall_2.png",void 0,"/textures/wall/wall_4.png","/textures/wall/wall_5.png","/textures/wall/wall_6.png","/textures/wall/wall_7.png","/textures/wall/wall_8.png","/textures/wall/wall_9_1.png","/textures/wall/wall_9_2.png","/textures/wall/wall_9_3.png","/textures/wall/wall_9_4.png","/textures/wall/wall_9_5.png","/textures/wall/wall_9_6.png","/textures/wall/wall_9_7.png","/textures/wall/wall_10.png","/textures/wall/wall_11.png","/textures/wall/wall_12.png","/textures/wall/wall_13.png","/textures/wall/wall_14.png","/textures/wall/wall_15.png","/textures/wall/wall_16.png","/textures/wall/wall_17.png","/textures/wall/wall_18_1.png","/textures/wall/wall_18_2.png","/textures/wall/wall_19_1.png","/textures/wall/wall_19_2.png","/textures/wall/wall_19_3.png","/textures/wall/wall_20_1.png","/textures/wall/wall_20_2.png","/textures/wall/wall_20_3.png","/textures/wall/wall_21_1.png","/textures/wall/wall_21_2.png","/textures/wall/wall_21_3.png","/textures/wall/wall_21_4.png","/textures/wall/wall_21_5.png","/textures/wall/wall_21_6.png","/textures/wall/wall_22_1.png","/textures/wall/wall_22_2.png","/textures/wall/wall_22_3.png","/textures/wall/wall_22_4.png","/textures/wall/wall_23_1.png","/textures/wall/wall_23_2.png","/textures/wall/wall_23_3.png","/textures/wall/wall_24.png","/textures/wall/wall_25.png","/textures/wall/wall_26.png","/textures/wall/wall_27.png","/textures/wall/wall_28.png","/textures/wall/wall_29.png","/textures/wall/wall_30.png","/textures/wall/wall_31.png"].map(i=>"/stream-overlay"+i);function PF(i,t){St.DEFAULT_LOOK=i.defaultLook??"hd-190-7-.ch-210-66-.lg-270-82-.sh-290-80-.ha-1015-61-61",ht.SCALE_MODE=Se.NEAREST;const e=i.floorPlan?i.floorPlan.split(" ").join(`
`):`xxxxxxxx
xxxxxxxx
xxxxxxxx
xxx00000
xxx00000
xx000000
xxx00000
xxx00000
xxx00000
xxx00000
`,r=ae.parseTileMapString(e).map(d=>d.map(g=>g!=="x"?Number(g):-1));St.GRID=r;const n=new Ei({view:t,antialias:!1,resolution:window.devicePixelRatio,autoDensity:!0,transparent:!0}),o=ae.Shroom.create({application:n,resourcePath:"/stream-overlay/resources"}),s=ae.Room.create(o,{tilemap:e});St.ROOM=s,s.x=i.roomCoordX||0,s.y=i.roomCoordY||0,s.hideFloor=!!(i.hideFloor??!1),s.tileHeight=i.floorHeight||8,s.hideTileCursor=!0,s.floorColor=i.floorColor??"#4d98e4";const a=wF[i.floorTexture??0];s.floorTexture=ae.loadRoomTexture(a),s.hideWalls=!!i.hideWalls,s.wallDepth=i.wallDepth||8,s.wallHeight=i.wallHeight||115,s.wallColor=i.wallColor??"#4d98e4";const l=xF[i.wallTexture??0];s.wallTexture=ae.loadRoomTexture(l);const c=ae.RoomCamera.forScreen(s);return c._state.type="OFF",n.stage.addChild(c),{updateAvatar:Gc,setEffect:bF}}const sy=ly();console.log("Received options:",sy);const SF=document.querySelector("#room-container");PF(sy,SF);
